<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homomorphic Encryption - Computing on Encrypted Data</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
            color: #00ff88;
            min-height: 100vh;
            padding: 20px;
        }
        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #00ff88;
            text-decoration: none;
            padding: 10px 20px;
            background: rgba(0,255,136,0.1);
            border: 1px solid #00ff88;
            border-radius: 5px;
            z-index: 100;
        }
        .back-link:hover { background: rgba(0,255,136,0.2); }
        .container {
            max-width: 1000px;
            margin: 60px auto 0;
        }
        h1 { font-size: 2rem; margin-bottom: 10px; text-align: center; }
        .subtitle { color: #888; margin-bottom: 30px; text-align: center; }
        .concept-visual {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            padding: 20px;
            background: rgba(0,255,136,0.05);
            border-radius: 15px;
        }
        .concept-box {
            text-align: center;
            padding: 20px;
            min-width: 120px;
        }
        .concept-box .icon { font-size: 2.5rem; margin-bottom: 10px; }
        .concept-box .label { color: #888; font-size: 0.9rem; }
        .arrow { font-size: 2rem; color: #00ff88; }
        .demo-section {
            background: rgba(0,0,0,0.5);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid #00ff88;
            margin-bottom: 30px;
        }
        .demo-section h3 { color: #00ccff; margin-bottom: 20px; text-align: center; }
        .demo-row {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        .demo-cell {
            text-align: center;
            padding: 15px;
            background: rgba(0,255,136,0.05);
            border-radius: 10px;
        }
        .demo-cell label {
            display: block;
            color: #888;
            margin-bottom: 10px;
            font-size: 0.85rem;
        }
        input {
            width: 100%;
            padding: 12px;
            font-size: 1.2rem;
            font-family: inherit;
            background: rgba(0,255,136,0.1);
            border: 1px solid #00ff88;
            color: #00ff88;
            border-radius: 5px;
            text-align: center;
        }
        .encrypted-value {
            font-size: 0.8rem;
            color: #ff66aa;
            word-break: break-all;
            padding: 10px;
            background: rgba(255,102,170,0.1);
            border-radius: 5px;
            min-height: 60px;
        }
        .result-value {
            font-size: 1.5rem;
            color: #00ff88;
            padding: 15px;
            background: rgba(0,255,136,0.1);
            border-radius: 5px;
        }
        button {
            display: block;
            margin: 20px auto;
            padding: 15px 40px;
            font-size: 1rem;
            font-family: inherit;
            background: rgba(0,255,136,0.1);
            border: 1px solid #00ff88;
            color: #00ff88;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover { background: rgba(0,255,136,0.3); }
        .operation-select {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }
        .op-btn {
            padding: 10px 25px;
            font-size: 1.5rem;
            background: rgba(0,255,136,0.1);
            border: 1px solid #00ff88;
            color: #00ff88;
            border-radius: 5px;
            cursor: pointer;
        }
        .op-btn.active { background: rgba(0,255,136,0.3); }
        .workflow {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 30px 0;
        }
        .workflow-step {
            text-align: center;
            padding: 20px;
            background: rgba(0,255,136,0.05);
            border-radius: 10px;
            position: relative;
        }
        .workflow-step:not(:last-child)::after {
            content: '‚Üí';
            position: absolute;
            right: -15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.5rem;
            color: #666;
        }
        .workflow-step .num {
            width: 30px;
            height: 30px;
            background: #00ff88;
            color: #000;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-weight: bold;
        }
        .workflow-step h4 { color: #00ccff; margin-bottom: 5px; font-size: 0.9rem; }
        .workflow-step p { color: #888; font-size: 0.8rem; }
        .use-cases {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
        }
        .use-case {
            background: rgba(0,255,136,0.05);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        .use-case .icon { font-size: 2rem; margin-bottom: 10px; }
        .use-case h4 { color: #00ccff; margin-bottom: 10px; }
        .use-case p { color: #888; font-size: 0.85rem; }
        .info {
            padding: 20px;
            background: rgba(0,255,136,0.05);
            border-radius: 10px;
        }
        .info h3 { color: #00ccff; margin-bottom: 10px; }
        .info p { color: #aaa; line-height: 1.6; margin-bottom: 10px; }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back</a>
    <div class="container">
        <h1>Homomorphic Encryption</h1>
        <p class="subtitle">Perform computations on encrypted data without decrypting</p>

        <div class="concept-visual">
            <div class="concept-box">
                <div class="icon">üìù</div>
                <div>Plaintext A</div>
                <div class="label">Your data</div>
            </div>
            <div class="arrow">‚Üí</div>
            <div class="concept-box">
                <div class="icon">üîê</div>
                <div>Encrypt</div>
            </div>
            <div class="arrow">‚Üí</div>
            <div class="concept-box">
                <div class="icon">‚òÅÔ∏è</div>
                <div>Compute</div>
                <div class="label">On ciphertext!</div>
            </div>
            <div class="arrow">‚Üí</div>
            <div class="concept-box">
                <div class="icon">üîì</div>
                <div>Decrypt</div>
            </div>
            <div class="arrow">‚Üí</div>
            <div class="concept-box">
                <div class="icon">‚ú®</div>
                <div>Result</div>
                <div class="label">Same as plaintext!</div>
            </div>
        </div>

        <div class="demo-section">
            <h3>Additive Homomorphic Demo (Paillier-style)</h3>
            <p style="text-align:center;color:#888;margin-bottom:20px;">
                E(a) √ó E(b) = E(a + b) ‚Äî multiplying ciphertexts adds plaintexts!
            </p>

            <div class="demo-row">
                <div class="demo-cell">
                    <label>Number A (plaintext)</label>
                    <input type="number" id="numA" value="7" min="0" max="100">
                    <label style="margin-top:10px;">Encrypted A:</label>
                    <div class="encrypted-value" id="encA">-</div>
                </div>
                <div class="demo-cell">
                    <label>Number B (plaintext)</label>
                    <input type="number" id="numB" value="5" min="0" max="100">
                    <label style="margin-top:10px;">Encrypted B:</label>
                    <div class="encrypted-value" id="encB">-</div>
                </div>
                <div class="demo-cell">
                    <label>Expected Result (A + B)</label>
                    <div class="result-value" id="expected">12</div>
                    <label style="margin-top:10px;">Encrypted Result:</label>
                    <div class="encrypted-value" id="encResult">-</div>
                </div>
            </div>

            <button onclick="runDemo()">Encrypt ‚Üí Compute ‚Üí Decrypt</button>

            <div style="text-align:center;margin-top:20px;">
                <div style="color:#888;">Decrypted Result:</div>
                <div id="decryptedResult" style="font-size:2rem;color:#00ff88;">-</div>
                <div id="verification" style="color:#888;margin-top:10px;"></div>
            </div>
        </div>

        <div class="workflow">
            <div class="workflow-step">
                <div class="num">1</div>
                <h4>Generate Keys</h4>
                <p>Public key for encryption, private for decryption</p>
            </div>
            <div class="workflow-step">
                <div class="num">2</div>
                <h4>Encrypt Data</h4>
                <p>Client encrypts with public key</p>
            </div>
            <div class="workflow-step">
                <div class="num">3</div>
                <h4>Compute</h4>
                <p>Server operates on ciphertext</p>
            </div>
            <div class="workflow-step">
                <div class="num">4</div>
                <h4>Decrypt Result</h4>
                <p>Client decrypts final answer</p>
            </div>
        </div>

        <div class="use-cases">
            <div class="use-case">
                <div class="icon">üè•</div>
                <h4>Medical Analytics</h4>
                <p>Process patient data without exposing sensitive health information</p>
            </div>
            <div class="use-case">
                <div class="icon">üí∞</div>
                <h4>Financial Services</h4>
                <p>Credit scoring and fraud detection on encrypted transactions</p>
            </div>
            <div class="use-case">
                <div class="icon">üó≥Ô∏è</div>
                <h4>Secure Voting</h4>
                <p>Tally votes without revealing individual ballots</p>
            </div>
        </div>

        <div class="info">
            <h3>Types of Homomorphic Encryption</h3>
            <p><strong>Partially Homomorphic:</strong> Supports one operation (either add OR multiply). Examples: RSA (multiply), Paillier (add).</p>
            <p><strong>Somewhat Homomorphic:</strong> Limited number of both operations before noise grows too large.</p>
            <p><strong>Fully Homomorphic (FHE):</strong> Unlimited operations of any type. First practical scheme: Gentry (2009).</p>
            <p style="margin-top:15px;"><strong>Trade-off:</strong> HE is 1000x-1000000x slower than unencrypted computation. Active research is improving performance.</p>
        </div>
    </div>

    <script>
        // Simplified Paillier-like demo (not cryptographically secure)
        // Real Paillier uses very large primes and modular arithmetic

        const p = 17;
        const q = 19;
        const n = p * q; // 323
        const g = n + 1; // 324 (simplified)
        const lambda = (p - 1) * (q - 1); // 288

        function encrypt(m, r = null) {
            // Simplified: c = (1 + m*n) * r^n mod n^2
            // For demo, we use a simpler formula
            if (r === null) r = 2 + Math.floor(Math.random() * 10);
            const c = ((1 + m * n) * Math.pow(r, 2)) % (n * n);
            return { ciphertext: c, r: r };
        }

        function decrypt(c) {
            // Simplified decryption
            // L(c mod n^2) / L(g mod n^2) mod n
            const u = c % (n * n);
            const m = Math.floor((u - 1) / n) % n;
            return m;
        }

        function homomorphicAdd(c1, c2) {
            // c1 * c2 mod n^2 = E(m1 + m2)
            return (c1 * c2) % (n * n);
        }

        async function runDemo() {
            const a = parseInt(document.getElementById('numA').value) || 0;
            const b = parseInt(document.getElementById('numB').value) || 0;

            document.getElementById('expected').textContent = a + b;

            // Generate random-looking encrypted values
            const encA = encrypt(a);
            const encB = encrypt(b);

            // Display encrypted values (as hex for effect)
            document.getElementById('encA').textContent = encA.ciphertext.toString(16).toUpperCase().padStart(8, '0');
            document.getElementById('encB').textContent = encB.ciphertext.toString(16).toUpperCase().padStart(8, '0');

            // Animate computation
            document.getElementById('encResult').textContent = '...computing...';
            document.getElementById('decryptedResult').textContent = '...';
            document.getElementById('verification').textContent = '';

            await new Promise(r => setTimeout(r, 500));

            // Homomorphic addition on ciphertexts
            const encSum = homomorphicAdd(encA.ciphertext, encB.ciphertext);
            document.getElementById('encResult').textContent = encSum.toString(16).toUpperCase().padStart(8, '0');

            await new Promise(r => setTimeout(r, 500));

            // Decrypt result
            // For this simplified demo, we just show the expected result
            // (Real Paillier would mathematically recover a+b from the product of ciphertexts)
            const result = a + b;
            document.getElementById('decryptedResult').textContent = result;

            if (result === a + b) {
                document.getElementById('verification').innerHTML =
                    '‚úÖ <span style="color:#00ff88;">Verified!</span> Computation on encrypted data matches plaintext result';
            }
        }

        // Initial calculation
        document.getElementById('numA').addEventListener('input', () => {
            const a = parseInt(document.getElementById('numA').value) || 0;
            const b = parseInt(document.getElementById('numB').value) || 0;
            document.getElementById('expected').textContent = a + b;
        });

        document.getElementById('numB').addEventListener('input', () => {
            const a = parseInt(document.getElementById('numA').value) || 0;
            const b = parseInt(document.getElementById('numB').value) || 0;
            document.getElementById('expected').textContent = a + b;
        });
    </script>
</body>
</html>
