<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heisenberg Uncertainty Principle - Quantum Visualizations</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #0a0e1a;
            color: #e0e0e0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        #canvas {
            display: block;
            background: #0a0e1a;
        }

        .controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(15, 20, 35, 0.9);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(100, 200, 255, 0.3);
            min-width: 300px;
        }

        .controls h3 {
            color: #00d4ff;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .control-group {
            margin-bottom: 20px;
        }

        .control-group label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            color: #b0b0b0;
        }

        input[type="range"] {
            width: 100%;
            margin-bottom: 5px;
        }

        .value-display {
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            color: #00d4ff;
            padding: 10px;
            background: rgba(0, 212, 255, 0.1);
            border-radius: 5px;
        }

        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(15, 20, 35, 0.9);
            color: #00d4ff;
            padding: 12px 24px;
            border-radius: 8px;
            text-decoration: none;
            border: 1px solid rgba(100, 200, 255, 0.3);
            transition: all 0.3s;
        }

        .back-link:hover {
            background: rgba(20, 30, 50, 0.95);
            transform: translateX(-5px);
        }

        .info {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(15, 20, 35, 0.9);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(100, 200, 255, 0.3);
            max-width: 450px;
        }

        .info h4 {
            color: #00d4ff;
            margin-bottom: 10px;
        }

        .info p {
            font-size: 13px;
            line-height: 1.6;
            color: #b0b0b0;
        }

        .formula {
            margin: 15px 0;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            text-align: center;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            color: #ffd700;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        .uncertainty-product {
            margin-top: 15px;
            padding: 15px;
            background: rgba(144, 0, 255, 0.1);
            border: 1px solid rgba(144, 0, 255, 0.3);
            border-radius: 8px;
        }

        .product-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 13px;
        }

        .product-label {
            color: #b0b0b0;
        }

        .product-value {
            color: #9000ff;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">← Back to Gallery</a>

    <canvas id="canvas"></canvas>

    <div class="controls">
        <h3>Uncertainty Principle</h3>

        <div class="control-group">
            <label>Position Uncertainty (Δx)</label>
            <input type="range" id="positionSlider" min="1" max="10" step="0.1" value="5">
            <div class="value-display" id="positionValue">5.0</div>
        </div>

        <div class="uncertainty-product">
            <div class="product-row">
                <span class="product-label">Δx × Δp =</span>
                <span class="product-value" id="product">—</span>
            </div>
            <div class="product-row">
                <span class="product-label">Minimum (ℏ/2) =</span>
                <span class="product-value">0.50</span>
            </div>
        </div>

        <div class="formula">
            Δx · Δp ≥ ℏ/2
        </div>
    </div>

    <div class="info">
        <h4>Heisenberg Uncertainty Principle</h4>
        <p>
            You cannot simultaneously know both the exact position and exact momentum of a particle.
            The more precisely you know one, the less precisely you can know the other.
        </p>
        <p style="margin-top: 10px;">
            <strong>Try this:</strong> Use the slider to narrow the position uncertainty (make the wave packet narrower).
            Watch how the momentum uncertainty automatically increases (the wave packet spreads in momentum space)!
            Their product can never be smaller than ℏ/2.
        </p>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Configuration
        let positionUncertainty = 5; // Δx
        let momentumUncertainty = 1; // Δp (calculated)

        const hbar = 1; // Planck's constant (normalized)
        const minProduct = hbar / 2;

        let phase = 0;

        function updateUncertainty() {
            // Heisenberg uncertainty relation: Δx · Δp ≥ ℏ/2
            // So Δp ≥ ℏ/(2·Δx)
            momentumUncertainty = minProduct / positionUncertainty;

            const product = positionUncertainty * momentumUncertainty;

            document.getElementById('positionValue').textContent = positionUncertainty.toFixed(1);
            document.getElementById('product').textContent = product.toFixed(2);
        }

        function drawPositionSpace() {
            const centerX = canvas.width * 0.5;
            const centerY = canvas.height * 0.3;

            // Title
            ctx.fillStyle = '#00d4ff';
            ctx.font = 'bold 20px sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('POSITION SPACE', centerX, centerY - 120);

            // Draw axes
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.2)';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(centerX - 300, centerY);
            ctx.lineTo(centerX + 300, centerY);
            ctx.stroke();

            // Draw wave packet (Gaussian in position space)
            const sigma_x = positionUncertainty * 20; // Scale for visualization
            const numPoints = 200;

            // Draw probability distribution
            ctx.fillStyle = 'rgba(0, 212, 255, 0.3)';
            ctx.beginPath();
            ctx.moveTo(centerX - 300, centerY);

            for (let i = 0; i <= numPoints; i++) {
                const x = (i / numPoints - 0.5) * 600;
                const screenX = centerX + x;
                const psi = Math.exp(-(x * x) / (2 * sigma_x * sigma_x));
                const height = psi * 100;

                if (i === 0) {
                    ctx.moveTo(screenX, centerY);
                } else {
                    ctx.lineTo(screenX, centerY - height);
                }
            }

            ctx.lineTo(centerX + 300, centerY);
            ctx.closePath();
            ctx.fill();

            // Draw wave function with oscillation
            ctx.strokeStyle = '#00d4ff';
            ctx.lineWidth = 2;
            ctx.beginPath();

            for (let i = 0; i <= numPoints; i++) {
                const x = (i / numPoints - 0.5) * 600;
                const screenX = centerX + x;
                const envelope = Math.exp(-(x * x) / (2 * sigma_x * sigma_x));
                const k0 = 5; // Central wavenumber
                const oscillation = Math.cos(k0 * x / 10 + phase);
                const psi = envelope * oscillation;
                const screenY = centerY - psi * 100;

                if (i === 0) {
                    ctx.moveTo(screenX, screenY);
                } else {
                    ctx.lineTo(screenX, screenY);
                }
            }

            ctx.stroke();

            // Draw uncertainty width indicator
            const widthX = sigma_x;
            ctx.strokeStyle = '#ffd700';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(centerX - widthX, centerY - 110);
            ctx.lineTo(centerX - widthX, centerY + 10);
            ctx.moveTo(centerX + widthX, centerY - 110);
            ctx.lineTo(centerX + widthX, centerY + 10);
            ctx.stroke();

            // Draw arrow
            ctx.beginPath();
            ctx.moveTo(centerX - widthX, centerY - 100);
            ctx.lineTo(centerX + widthX, centerY - 100);
            ctx.stroke();
            ctx.setLineDash([]);

            // Label
            ctx.fillStyle = '#ffd700';
            ctx.font = '14px sans-serif';
            ctx.fillText('Δx', centerX, centerY - 105);

            // Axes labels
            ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';
            ctx.font = '14px sans-serif';
            ctx.fillText('Position (x)', centerX + 310, centerY + 5);
        }

        function drawMomentumSpace() {
            const centerX = canvas.width * 0.5;
            const centerY = canvas.height * 0.7;

            // Title
            ctx.fillStyle = '#9000ff';
            ctx.font = 'bold 20px sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('MOMENTUM SPACE', centerX, centerY - 120);

            // Draw axes
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.2)';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(centerX - 300, centerY);
            ctx.lineTo(centerX + 300, centerY);
            ctx.stroke();

            // Fourier transform: narrow in position → wide in momentum
            const sigma_p = momentumUncertainty * 20; // Scale for visualization
            const numPoints = 200;

            // Draw probability distribution
            ctx.fillStyle = 'rgba(144, 0, 255, 0.3)';
            ctx.beginPath();
            ctx.moveTo(centerX - 300, centerY);

            for (let i = 0; i <= numPoints; i++) {
                const p = (i / numPoints - 0.5) * 600;
                const screenX = centerX + p;
                const psi = Math.exp(-(p * p) / (2 * sigma_p * sigma_p));
                const height = psi * 100;

                if (i === 0) {
                    ctx.moveTo(screenX, centerY);
                } else {
                    ctx.lineTo(screenX, centerY - height);
                }
            }

            ctx.lineTo(centerX + 300, centerY);
            ctx.closePath();
            ctx.fill();

            // Draw wave function
            ctx.strokeStyle = '#9000ff';
            ctx.lineWidth = 2;
            ctx.beginPath();

            for (let i = 0; i <= numPoints; i++) {
                const p = (i / numPoints - 0.5) * 600;
                const screenX = centerX + p;
                const psi = Math.exp(-(p * p) / (2 * sigma_p * sigma_p));
                const screenY = centerY - psi * 100;

                if (i === 0) {
                    ctx.moveTo(screenX, screenY);
                } else {
                    ctx.lineTo(screenX, screenY);
                }
            }

            ctx.stroke();

            // Draw uncertainty width indicator
            const widthP = sigma_p;
            ctx.strokeStyle = '#ffd700';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(centerX - widthP, centerY - 110);
            ctx.lineTo(centerX - widthP, centerY + 10);
            ctx.moveTo(centerX + widthP, centerY - 110);
            ctx.lineTo(centerX + widthP, centerY + 10);
            ctx.stroke();

            // Draw arrow
            ctx.beginPath();
            ctx.moveTo(centerX - widthP, centerY - 100);
            ctx.lineTo(centerX + widthP, centerY - 100);
            ctx.stroke();
            ctx.setLineDash([]);

            // Label
            ctx.fillStyle = '#ffd700';
            ctx.font = '14px sans-serif';
            ctx.fillText('Δp', centerX, centerY - 105);

            // Axes labels
            ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';
            ctx.font = '14px sans-serif';
            ctx.fillText('Momentum (p)', centerX + 310, centerY + 5);
        }

        function drawConnection() {
            const y1 = canvas.height * 0.3 + 30;
            const y2 = canvas.height * 0.7 - 150;
            const centerX = canvas.width * 0.5;

            // Draw connecting line
            ctx.strokeStyle = 'rgba(255, 215, 0, 0.5)';
            ctx.lineWidth = 2;
            ctx.setLineDash([10, 10]);
            ctx.beginPath();
            ctx.moveTo(centerX, y1);
            ctx.lineTo(centerX, y2);
            ctx.stroke();
            ctx.setLineDash([]);

            // Draw "Fourier Transform" label
            ctx.fillStyle = '#ffd700';
            ctx.font = '14px sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('Fourier Transform', centerX, (y1 + y2) / 2);

            // Draw arrows
            ctx.fillStyle = '#ffd700';
            ctx.beginPath();
            ctx.moveTo(centerX, y2);
            ctx.lineTo(centerX - 5, y2 - 10);
            ctx.lineTo(centerX + 5, y2 - 10);
            ctx.closePath();
            ctx.fill();

            ctx.beginPath();
            ctx.moveTo(centerX, y1);
            ctx.lineTo(centerX - 5, y1 + 10);
            ctx.lineTo(centerX + 5, y1 + 10);
            ctx.closePath();
            ctx.fill();
        }

        function animate() {
            phase += 0.1;

            ctx.fillStyle = '#0a0e1a';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            drawPositionSpace();
            drawMomentumSpace();
            drawConnection();

            requestAnimationFrame(animate);
        }

        // Controls
        document.getElementById('positionSlider').addEventListener('input', (e) => {
            positionUncertainty = parseFloat(e.target.value);
            updateUncertainty();
        });

        updateUncertainty();
        animate();
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
