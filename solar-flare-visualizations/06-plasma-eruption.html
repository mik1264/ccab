<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plasma Eruption</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #000;
        }
        canvas {
            display: block;
        }
        .info {
            position: absolute;
            top: 20px;
            right: 20px;
            color: #fff;
            background: rgba(0,0,0,0.8);
            padding: 15px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <div class="info">
        <h3>Plasma Eruption</h3>
        <div>Temperature: 10-20 MK</div>
        <div>Density: 10¹⁰ particles/cm³</div>
        <div>Mass: 10¹⁵ kg</div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const sunY = canvas.height * 0.8;
        const sunRadius = 150;

        class PlasmaBlob {
            constructor(time) {
                this.baseX = canvas.width / 2;
                this.baseY = sunY;
                this.time = time;
                this.size = Math.random() * 40 + 20;
                this.angleOffset = (Math.random() - 0.5) * 0.3;
                this.speedFactor = Math.random() * 0.3 + 0.7;
            }

            getPosition(globalTime) {
                const t = (globalTime - this.time) * this.speedFactor;
                if (t < 0) return null;

                // Parabolic trajectory
                const angle = -Math.PI / 2 + this.angleOffset;
                const distance = t * 3;

                const x = this.baseX + Math.cos(angle) * distance;
                const y = this.baseY + Math.sin(angle) * distance - t * 0.5; // Gravity effect

                return {x, y, t};
            }

            draw(globalTime) {
                const pos = this.getPosition(globalTime);
                if (!pos) return false;

                const {x, y, t} = pos;

                // Fade out over time
                const life = Math.max(0, 1 - t / 300);
                if (life <= 0) return false;

                // Draw blob with gradient
                const gradient = ctx.createRadialGradient(x, y, 0, x, y, this.size);
                gradient.addColorStop(0, `rgba(255, 255, 200, ${life * 0.8})`);
                gradient.addColorStop(0.4, `rgba(255, 150, 50, ${life * 0.6})`);
                gradient.addColorStop(0.7, `rgba(255, 50, 0, ${life * 0.3})`);
                gradient.addColorStop(1, 'rgba(255, 0, 0, 0)');

                ctx.beginPath();
                ctx.arc(x, y, this.size, 0, Math.PI * 2);
                ctx.fillStyle = gradient;
                ctx.fill();

                return true;
            }
        }

        class PlasmaStream {
            constructor() {
                this.points = [];
                this.maxPoints = 100;
            }

            addPoint() {
                const angle = -Math.PI / 2 + (Math.random() - 0.5) * 0.5;
                const speed = Math.random() * 2 + 1;

                this.points.push({
                    x: canvas.width / 2,
                    y: sunY - sunRadius,
                    vx: Math.cos(angle) * speed,
                    vy: Math.sin(angle) * speed,
                    life: 1,
                    size: Math.random() * 3 + 1
                });
            }

            update() {
                for (let i = this.points.length - 1; i >= 0; i--) {
                    const p = this.points[i];
                    p.x += p.vx;
                    p.y += p.vy;
                    p.vy += 0.01; // Gravity
                    p.life -= 0.01;

                    if (p.life <= 0) {
                        this.points.splice(i, 1);
                    }
                }

                // Keep adding points
                if (this.points.length < this.maxPoints) {
                    this.addPoint();
                }
            }

            draw() {
                this.points.forEach(p => {
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                    ctx.fillStyle = `rgba(255, ${100 + p.life * 155}, ${50 * p.life}, ${p.life})`;
                    ctx.fill();
                });
            }
        }

        const blobs = [];
        const streams = new PlasmaStream();
        let time = 0;

        function drawSun() {
            // Sun photosphere
            const gradient = ctx.createRadialGradient(
                canvas.width / 2, sunY,
                0,
                canvas.width / 2, sunY,
                sunRadius
            );
            gradient.addColorStop(0, '#ffff00');
            gradient.addColorStop(0.7, '#ff8800');
            gradient.addColorStop(1, '#ff4400');

            ctx.beginPath();
            ctx.arc(canvas.width / 2, sunY, sunRadius, 0, Math.PI);
            ctx.fillStyle = gradient;
            ctx.fill();
        }

        function drawCorona() {
            // Corona
            const coronaGradient = ctx.createRadialGradient(
                canvas.width / 2, sunY,
                sunRadius,
                canvas.width / 2, sunY,
                sunRadius + 100
            );
            coronaGradient.addColorStop(0, 'rgba(255, 200, 100, 0.3)');
            coronaGradient.addColorStop(1, 'rgba(255, 100, 0, 0)');

            ctx.beginPath();
            ctx.arc(canvas.width / 2, sunY, sunRadius + 100, 0, Math.PI);
            ctx.fillStyle = coronaGradient;
            ctx.fill();
        }

        function animate() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            drawCorona();
            drawSun();

            // Add new blob periodically
            if (time % 20 === 0) {
                blobs.push(new PlasmaBlob(time));
            }

            // Update and draw blobs
            for (let i = blobs.length - 1; i >= 0; i--) {
                if (!blobs[i].draw(time)) {
                    blobs.splice(i, 1);
                }
            }

            // Update and draw plasma streams
            streams.update();
            streams.draw();

            time++;
            requestAnimationFrame(animate);
        }

        animate();

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    </script>
</body>
</html>
