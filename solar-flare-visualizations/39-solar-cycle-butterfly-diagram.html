<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solar Cycle Butterfly Diagram</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: Arial; }
        canvas { display: block; }
        .info {
            position: absolute; top: 20px; left: 20px; color: #fff;
            background: rgba(0,0,0,0.8); padding: 15px; border-radius: 5px;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <div class="info">
        <h3>Butterfly Diagram</h3>
        <div>Sunspot latitudes vs time</div>
        <div>Cycle 25: 2019-2030</div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const margin = {top: 80, right: 100, bottom: 80, left: 100};
        const graphWidth = canvas.width - margin.left - margin.right;
        const graphHeight = canvas.height - margin.top - margin.bottom;

        const cycleStart = 2019;
        const cycleEnd = 2030;
        const cycleDuration = cycleEnd - cycleStart;

        class Sunspot {
            constructor(year, latitude) {
                this.year = year;
                this.latitude = latitude;
                this.size = 3 + Math.random() * 5;
                this.opacity = 0.6 + Math.random() * 0.4;
            }

            draw() {
                const x = margin.left + ((this.year - cycleStart) / cycleDuration) * graphWidth;
                const y = canvas.height / 2 + (this.latitude / 45) * (graphHeight / 2);

                ctx.beginPath();
                ctx.arc(x, y, this.size, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(255, 136, 0, ${this.opacity})`;
                ctx.fill();
            }
        }

        // Generate sunspot data for butterfly pattern
        const sunspots = [];

        for (let year = cycleStart; year <= cycleEnd; year += 0.1) {
            const cycleProgress = (year - cycleStart) / cycleDuration;

            // Latitude decreases from ~35° to ~5° over cycle
            const maxLatitude = 35 * (1 - cycleProgress) + 5;

            // More sunspots near solar maximum
            const activityLevel = Math.sin(cycleProgress * Math.PI) * 20;

            for (let i = 0; i < activityLevel; i++) {
                const lat = (Math.random() - 0.5) * maxLatitude;
                sunspots.push(new Sunspot(year, lat));
            }
        }

        function drawAxes() {
            ctx.strokeStyle = '#444';
            ctx.lineWidth = 2;

            // X-axis (time)
            ctx.beginPath();
            ctx.moveTo(margin.left, canvas.height / 2);
            ctx.lineTo(canvas.width - margin.right, canvas.height / 2);
            ctx.stroke();

            // Y-axis markers
            ctx.beginPath();
            ctx.moveTo(margin.left, margin.top);
            ctx.lineTo(margin.left, canvas.height - margin.bottom);
            ctx.stroke();

            // Labels
            ctx.fillStyle = '#888';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';

            // Years
            for (let year = cycleStart; year <= cycleEnd; year += 2) {
                const x = margin.left + ((year - cycleStart) / cycleDuration) * graphWidth;
                ctx.fillText(year.toString(), x, canvas.height - margin.bottom + 25);

                // Grid line
                ctx.strokeStyle = '#222';
                ctx.beginPath();
                ctx.moveTo(x, margin.top);
                ctx.lineTo(x, canvas.height - margin.bottom);
                ctx.stroke();
            }

            // Latitudes
            ctx.textAlign = 'right';
            for (let lat = -40; lat <= 40; lat += 10) {
                const y = canvas.height / 2 + (lat / 45) * (graphHeight / 2);
                ctx.fillText(`${lat}°`, margin.left - 10, y + 4);

                // Grid line
                ctx.strokeStyle = '#222';
                ctx.beginPath();
                ctx.moveTo(margin.left, y);
                ctx.lineTo(canvas.width - margin.right, y);
                ctx.stroke();
            }

            // Title and labels
            ctx.fillStyle = '#fff';
            ctx.font = 'bold 20px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Solar Cycle 25 - Butterfly Diagram', canvas.width / 2, 40);

            ctx.font = '14px Arial';
            ctx.fillText('Year', canvas.width / 2, canvas.height - 30);

            ctx.save();
            ctx.translate(30, canvas.height / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('Latitude (degrees)', 0, 0);
            ctx.restore();

            // Current marker (Nov 2025)
            const currentX = margin.left + ((2025.84 - cycleStart) / cycleDuration) * graphWidth;

            ctx.strokeStyle = '#ff6600';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(currentX, margin.top);
            ctx.lineTo(currentX, canvas.height - margin.bottom);
            ctx.stroke();
            ctx.setLineDash([]);

            ctx.fillStyle = '#ff6600';
            ctx.font = 'bold 12px Arial';
            ctx.fillText('Nov 2025', currentX, margin.top - 10);
            ctx.fillText('X5.1 Flare', currentX, margin.top - 25);
        }

        function drawSunspots() {
            sunspots.forEach(spot => spot.draw());
        }

        function animate() {
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            drawAxes();
            drawSunspots();

            requestAnimationFrame(animate);
        }

        animate();

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    </script>
</body>
</html>
