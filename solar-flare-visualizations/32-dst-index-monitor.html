<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dst Index Geomagnetic Storm Monitor</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: 'Courier New'; }
        canvas { display: block; }
        .info {
            position: absolute; top: 20px; left: 20px; color: #0f0;
            background: rgba(0,0,0,0.9); padding: 15px; border-radius: 5px;
            border: 1px solid #0f0;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <div class="info">
        <h3 style="margin: 0 0 10px 0;">Dst Index Monitor</h3>
        <div id="dst">Dst: 0 nT</div>
        <div id="status">Status: QUIET</div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const margin = {top: 80, right: 100, bottom: 80, left: 100};
        const graphWidth = canvas.width - margin.left - margin.right;
        const graphHeight = canvas.height - margin.top - margin.bottom;

        const dataPoints = 200;
        const data = new Array(dataPoints).fill(0);
        let currentIndex = 0;

        function generateDst() {
            const t = currentIndex / 10;
            let dst = 0;

            // Simulate geomagnetic storm
            if (currentIndex > 50 && currentIndex < 150) {
                dst = -50 - Math.sin((currentIndex - 50) / 20) * 100;
            } else {
                dst = (Math.random() - 0.5) * 20;
            }

            data[currentIndex % dataPoints] = dst;

            // Update status
            let status = 'QUIET', color = '#0f0';
            if (dst <= -250) {
                status = 'INTENSE STORM';
                color = '#f0f';
            } else if (dst <= -100) {
                status = 'MAJOR STORM';
                color = '#f00';
            } else if (dst <= -50) {
                status = 'MODERATE STORM';
                color = '#f80';
            } else if (dst <= -30) {
                status = 'WEAK STORM';
                color = '#ff0';
            }

            document.getElementById('dst').textContent = `Dst: ${Math.round(dst)} nT`;
            document.getElementById('status').textContent = `Status: ${status}`;
            document.getElementById('status').style.color = color;

            currentIndex++;
        }

        function drawAxes() {
            ctx.strokeStyle = '#0f0';
            ctx.lineWidth = 2;

            // Axes
            ctx.beginPath();
            ctx.moveTo(margin.left, margin.top);
            ctx.lineTo(margin.left, canvas.height - margin.bottom);
            ctx.lineTo(canvas.width - margin.right, canvas.height - margin.bottom);
            ctx.stroke();

            // Y-axis labels
            ctx.fillStyle = '#0f0';
            ctx.font = '12px Courier New';
            ctx.textAlign = 'right';

            const yValues = [50, 0, -50, -100, -150, -200, -250];
            yValues.forEach(value => {
                const y = canvas.height - margin.bottom - ((value + 250) / 300) * graphHeight;

                ctx.fillText(value.toString(), margin.left - 10, y + 4);

                ctx.strokeStyle = '#0f0' + '33';
                ctx.beginPath();
                ctx.moveTo(margin.left, y);
                ctx.lineTo(canvas.width - margin.right, y);
                ctx.stroke();
            });

            // Storm threshold lines
            const thresholds = [
                {value: -30, label: 'Weak', color: '#ff0'},
                {value: -50, label: 'Moderate', color: '#f80'},
                {value: -100, label: 'Major', color: '#f00'},
                {value: -250, label: 'Intense', color: '#f0f'}
            ];

            thresholds.forEach(threshold => {
                const y = canvas.height - margin.bottom - ((threshold.value + 250) / 300) * graphHeight;

                ctx.strokeStyle = threshold.color + '44';
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(margin.left, y);
                ctx.lineTo(canvas.width - margin.right, y);
                ctx.stroke();
                ctx.setLineDash([]);

                ctx.fillStyle = threshold.color;
                ctx.font = '10px Courier New';
                ctx.textAlign = 'left';
                ctx.fillText(threshold.label, canvas.width - margin.right + 10, y + 4);
            });

            // Labels
            ctx.fillStyle = '#0f0';
            ctx.font = 'bold 14px Courier New';
            ctx.textAlign = 'center';
            ctx.fillText('Time (hours)', canvas.width / 2, canvas.height - 30);

            ctx.save();
            ctx.translate(30, canvas.height / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('Dst Index (nT)', 0, 0);
            ctx.restore();

            ctx.font = 'bold 20px Courier New';
            ctx.fillText('Disturbance Storm Time Index', canvas.width / 2, 40);
        }

        function drawData() {
            ctx.beginPath();

            const visiblePoints = Math.min(currentIndex, dataPoints);

            for (let i = 0; i < visiblePoints; i++) {
                const value = data[i];
                const x = margin.left + (i / dataPoints) * graphWidth;
                const y = canvas.height - margin.bottom - ((value + 250) / 300) * graphHeight;

                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }

            ctx.strokeStyle = '#0f0';
            ctx.lineWidth = 2;
            ctx.stroke();

            // Fill under curve
            ctx.lineTo(margin.left + (visiblePoints / dataPoints) * graphWidth, canvas.height - margin.bottom);
            ctx.lineTo(margin.left, canvas.height - margin.bottom);
            ctx.closePath();
            ctx.fillStyle = '#0f0' + '22';
            ctx.fill();
        }

        function animate() {
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            drawAxes();

            if (currentIndex < dataPoints) {
                generateDst();
            }

            drawData();

            requestAnimationFrame(animate);
        }

        animate();

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    </script>
</body>
</html>
