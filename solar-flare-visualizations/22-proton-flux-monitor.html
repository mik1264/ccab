<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proton Flux Monitor</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: 'Courier New'; }
        canvas { display: block; }
        .info {
            position: absolute; top: 20px; left: 20px; color: #0f0;
            background: rgba(0,0,0,0.9); padding: 15px; border-radius: 5px;
            border: 1px solid #0f0;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <div class="info">
        <h3 style="margin: 0 0 10px 0;">GOES Proton Flux</h3>
        <div id="flux">Flux: 0 pfu</div>
        <div id="alert">Status: NORMAL</div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const margin = {top: 80, right: 100, bottom: 80, left: 100};
        const graphWidth = canvas.width - margin.left - margin.right;
        const graphHeight = canvas.height - margin.top - margin.bottom;

        const dataPoints = 500;
        const data = new Array(dataPoints).fill(0.1);
        let currentIndex = 0;

        const thresholds = [
            {value: 10, label: 'S1 (Minor)', color: '#ffff00'},
            {value: 100, label: 'S2 (Moderate)', color: '#ff8800'},
            {value: 1000, label: 'S3 (Strong)', color: '#ff6600'},
            {value: 10000, label: 'S4 (Severe)', color: '#ff0000'}
        ];

        function generateProtonFlux() {
            const t = currentIndex / 20;
            let flux = 0.1;

            // Simulate solar radiation storm
            if (currentIndex > 100 && currentIndex < 350) {
                flux = Math.pow(10, 2 + Math.sin((currentIndex - 100) / 50) * 2);
            }

            flux += (Math.random() - 0.5) * flux * 0.2;
            data[currentIndex % dataPoints] = Math.max(0.1, flux);

            // Update status
            let status = 'NORMAL', color = '#0f0';
            if (flux >= 10000) {
                status = 'S4 SEVERE';
                color = '#f00';
            } else if (flux >= 1000) {
                status = 'S3 STRONG';
                color = '#f60';
            } else if (flux >= 100) {
                status = 'S2 MODERATE';
                color = '#f80';
            } else if (flux >= 10) {
                status = 'S1 MINOR';
                color = '#ff0';
            }

            document.getElementById('flux').textContent = `Flux: ${Math.round(flux)} pfu`;
            document.getElementById('alert').textContent = `Status: ${status}`;
            document.getElementById('alert').style.color = color;

            currentIndex++;
        }

        function drawAxes() {
            ctx.strokeStyle = '#0f0';
            ctx.lineWidth = 2;

            // Axes
            ctx.beginPath();
            ctx.moveTo(margin.left, margin.top);
            ctx.lineTo(margin.left, canvas.height - margin.bottom);
            ctx.lineTo(canvas.width - margin.right, canvas.height - margin.bottom);
            ctx.stroke();

            // Y-axis labels (log scale)
            ctx.fillStyle = '#0f0';
            ctx.font = '12px Courier New';
            ctx.textAlign = 'right';

            [0.1, 1, 10, 100, 1000, 10000].forEach(value => {
                const logValue = Math.log10(value);
                const y = canvas.height - margin.bottom - ((logValue + 1) / 5) * graphHeight;

                ctx.fillText(value.toString(), margin.left - 10, y + 4);

                ctx.strokeStyle = '#0f0' + '33';
                ctx.beginPath();
                ctx.moveTo(margin.left, y);
                ctx.lineTo(canvas.width - margin.right, y);
                ctx.stroke();
            });

            // Labels
            ctx.fillStyle = '#0f0';
            ctx.font = 'bold 14px Courier New';
            ctx.textAlign = 'center';
            ctx.fillText('Time (minutes)', canvas.width / 2, canvas.height - 30);

            ctx.save();
            ctx.translate(30, canvas.height / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('Proton Flux (pfu)', 0, 0);
            ctx.restore();
        }

        function drawThresholds() {
            thresholds.forEach(threshold => {
                const logValue = Math.log10(threshold.value);
                const y = canvas.height - margin.bottom - ((logValue + 1) / 5) * graphHeight;

                ctx.strokeStyle = threshold.color + '44';
                ctx.lineWidth = 1;
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(margin.left, y);
                ctx.lineTo(canvas.width - margin.right, y);
                ctx.stroke();
                ctx.setLineDash([]);

                ctx.fillStyle = threshold.color;
                ctx.font = '10px Courier New';
                ctx.textAlign = 'left';
                ctx.fillText(threshold.label, canvas.width - margin.right + 10, y + 4);
            });
        }

        function drawData() {
            ctx.beginPath();

            const visiblePoints = Math.min(currentIndex, dataPoints);

            for (let i = 0; i < visiblePoints; i++) {
                const value = data[i];
                const logValue = Math.log10(value);
                const x = margin.left + (i / dataPoints) * graphWidth;
                const y = canvas.height - margin.bottom - ((logValue + 1) / 5) * graphHeight;

                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }

            ctx.strokeStyle = '#0f0';
            ctx.lineWidth = 2;
            ctx.stroke();

            // Fill under curve
            ctx.lineTo(margin.left + (visiblePoints / dataPoints) * graphWidth, canvas.height - margin.bottom);
            ctx.lineTo(margin.left, canvas.height - margin.bottom);
            ctx.closePath();
            ctx.fillStyle = '#0f0' + '22';
            ctx.fill();
        }

        function animate() {
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = '#0f0';
            ctx.font = 'bold 20px Courier New';
            ctx.textAlign = 'center';
            ctx.fillText('GOES Solar Proton Flux Monitor', canvas.width / 2, 40);

            drawThresholds();
            drawAxes();

            if (currentIndex < dataPoints) {
                generateProtonFlux();
            }

            drawData();

            requestAnimationFrame(animate);
        }

        animate();

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    </script>
</body>
</html>
