<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Area Chart</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 1000px;
            width: 100%;
        }

        h1 {
            color: #667eea;
            margin-bottom: 10px;
            text-align: center;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
        }

        svg {
            width: 100%;
            height: 400px;
        }

        .grid-line {
            stroke: #e0e0e0;
            stroke-width: 1;
        }

        .area {
            opacity: 0;
            transition: opacity 1.5s ease;
        }

        .area.show {
            opacity: 1;
        }

        .axis-label {
            fill: #666;
            font-size: 12px;
        }

        .back-link {
            display: inline-block;
            margin-top: 30px;
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-box {
            width: 20px;
            height: 20px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Area Chart</h1>
        <p class="subtitle">Traffic Sources Over Time</p>

        <svg id="areaChart"></svg>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-box" style="background: rgba(102, 126, 234, 0.6);"></div>
                <span>Organic</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background: rgba(240, 147, 251, 0.6);"></div>
                <span>Social</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background: rgba(79, 172, 254, 0.6);"></div>
                <span>Direct</span>
            </div>
        </div>

        <a href="../index.html" class="back-link">‚Üê Back to Gallery</a>
    </div>

    <script>
        const data = [
            { month: 'Jan', organic: 30, social: 20, direct: 15 },
            { month: 'Feb', organic: 35, social: 25, direct: 18 },
            { month: 'Mar', organic: 40, social: 22, direct: 20 },
            { month: 'Apr', organic: 45, social: 30, direct: 22 },
            { month: 'May', organic: 50, social: 35, direct: 25 },
            { month: 'Jun', organic: 55, social: 40, direct: 28 },
            { month: 'Jul', organic: 60, social: 38, direct: 30 },
            { month: 'Aug', organic: 65, social: 45, direct: 32 }
        ];

        const svg = document.getElementById('areaChart');
        const svgNS = 'http://www.w3.org/2000/svg';

        const margin = { top: 20, right: 20, bottom: 40, left: 50 };
        const width = 900;
        const height = 400;
        const chartWidth = width - margin.left - margin.right;
        const chartHeight = height - margin.top - margin.bottom;

        svg.setAttribute('viewBox', `0 0 ${width} ${height}`);

        const g = document.createElementNS(svgNS, 'g');
        g.setAttribute('transform', `translate(${margin.left}, ${margin.top})`);
        svg.appendChild(g);

        const maxValue = Math.max(...data.map(d => d.organic + d.social + d.direct));
        const xStep = chartWidth / (data.length - 1);

        // Grid lines
        for (let i = 0; i <= 5; i++) {
            const y = (chartHeight / 5) * i;
            const line = document.createElementNS(svgNS, 'line');
            line.setAttribute('x1', 0);
            line.setAttribute('y1', y);
            line.setAttribute('x2', chartWidth);
            line.setAttribute('y2', y);
            line.classList.add('grid-line');
            g.appendChild(line);

            const label = document.createElementNS(svgNS, 'text');
            label.setAttribute('x', -10);
            label.setAttribute('y', y + 5);
            label.setAttribute('text-anchor', 'end');
            label.classList.add('axis-label');
            label.textContent = Math.round(maxValue - (maxValue / 5) * i);
            g.appendChild(label);
        }

        // Create stacked areas
        const layers = [
            { key: 'direct', color: 'rgba(79, 172, 254, 0.6)' },
            { key: 'social', color: 'rgba(240, 147, 251, 0.6)' },
            { key: 'organic', color: 'rgba(102, 126, 234, 0.6)' }
        ];

        layers.forEach((layer, layerIndex) => {
            let pathData = '';
            let baselineData = '';

            data.forEach((d, i) => {
                const x = i * xStep;
                let baseValue = 0;

                // Calculate baseline (sum of previous layers)
                for (let j = 0; j < layerIndex; j++) {
                    baseValue += d[layers[j].key];
                }

                const topValue = baseValue + d[layer.key];
                const baseY = chartHeight - (baseValue / maxValue) * chartHeight;
                const topY = chartHeight - (topValue / maxValue) * chartHeight;

                if (i === 0) {
                    pathData += `M ${x} ${topY}`;
                    baselineData = `L ${x} ${baseY}`;
                } else {
                    pathData += ` L ${x} ${topY}`;
                }

                if (i === data.length - 1) {
                    pathData += ` L ${x} ${baseY}`;
                    for (let j = data.length - 1; j >= 0; j--) {
                        const bx = j * xStep;
                        let bValue = 0;
                        for (let k = 0; k < layerIndex; k++) {
                            bValue += data[j][layers[k].key];
                        }
                        const by = chartHeight - (bValue / maxValue) * chartHeight;
                        pathData += ` L ${bx} ${by}`;
                    }
                }

                // X-axis labels (only once)
                if (layerIndex === 0) {
                    const label = document.createElementNS(svgNS, 'text');
                    label.setAttribute('x', x);
                    label.setAttribute('y', chartHeight + 25);
                    label.setAttribute('text-anchor', 'middle');
                    label.classList.add('axis-label');
                    label.textContent = d.month;
                    g.appendChild(label);
                }
            });

            pathData += ' Z';

            const path = document.createElementNS(svgNS, 'path');
            path.setAttribute('d', pathData);
            path.setAttribute('fill', layer.color);
            path.classList.add('area');
            g.appendChild(path);

            setTimeout(() => {
                path.classList.add('show');
            }, layerIndex * 300);
        });
    </script>
</body>
</html>
