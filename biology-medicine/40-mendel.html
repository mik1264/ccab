<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mendelian Cross Simulator - CCAB</title>
    <link rel="stylesheet" href="../assets/css/gallery-standard.css">
    <style>
        body {
            background: #f0fdf4;
            color: #333;
            font-family: system-ui;
            padding: 2rem;
            text-align: center;
        }
        .container { max-width: 1000px; margin: 0 auto; }
        
        .grid-container {
            display: grid;
            grid-template-columns: 100px 100px 100px;
            gap: 10px;
            width: 320px;
            margin: 30px auto;
        }
        
        .cell {
            width: 100px;
            height: 100px;
            background: #fff;
            border: 2px solid #ccc;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            border-radius: 8px;
        }
        
        .header { background: #d1fae5; border-color: #10b981; }
        .result { background: #fff; position: relative; }
        
        .pea {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-bottom: 5px;
            border: 2px solid rgba(0,0,0,0.2);
        }
        .pea.green { background: #22c55e; }
        .pea.yellow { background: #eab308; }
        .pea.wrinkled { 
            border-radius: 40%; 
            background: repeating-linear-gradient(45deg, #22c55e, #22c55e 5px, #16a34a 5px, #16a34a 10px); 
        } /* Simplified visual for wrinkled */
        
        /* For this demo: Y=Yellow(Dom), y=Green(Rec). R=Round(Dom), r=Wrinkled(Rec).
           Let's just do Monohybrid Tt x Tt (Tall/Short) or Yy x Yy (Yellow/Green) first.
           Simple Yy x Yy.
        */
        
        .controls {
            margin: 20px;
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        
        select { padding: 8px; font-size: 1.1rem; }
        
        .stats {
            margin-top: 20px;
            font-family: monospace;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            display: inline-block;
        }
        
    </style>
</head>
<body>

<div class="container">
    <a href="../index.html" class="gallery-back">‚Üê Back to Gallery</a>
    <h1>Mendelian Genetics</h1>
    <p>Monohybrid Cross. Trait: Seed Color. (Y = Yellow/Dominant, y = Green/Recessive)</p>
    
    <div class="controls">
        <div>
            <label>Parent 1:</label>
            <select id="p1" onchange="update()">
                <option value="YY">YY (Homozygous Dom)</option>
                <option value="Yy" selected>Yy (Heterozygous)</option>
                <option value="yy">yy (Homozygous Rec)</option>
            </select>
        </div>
        <div>
            <label>Parent 2:</label>
            <select id="p2" onchange="update()">
                <option value="YY">YY (Homozygous Dom)</option>
                <option value="Yy" selected>Yy (Heterozygous)</option>
                <option value="yy">yy (Homozygous Rec)</option>
            </select>
        </div>
    </div>

    <div class="grid-container" id="grid">
        <!-- Grid injected -->
    </div>
    
    <div class="stats" id="stats"></div>
</div>

<script>
    function update() {
        const p1 = document.getElementById('p1').value;
        const p2 = document.getElementById('p2').value;
        
        const alleles1 = p1.split('');
        const alleles2 = p2.split('');
        
        const grid = document.getElementById('grid');
        grid.innerHTML = '';
        
        // Top-Left corner (empty)
        grid.appendChild(createCell('', ''));
        
        // Top Row (Parent 2 alleles)
        grid.appendChild(createCell(alleles2[0], 'header'));
        grid.appendChild(createCell(alleles2[1], 'header'));
        
        // Row 1
        grid.appendChild(createCell(alleles1[0], 'header')); // P1 allele 1
        const g1 = combine(alleles1[0], alleles2[0]);
        grid.appendChild(createResultCell(g1));
        const g2 = combine(alleles1[0], alleles2[1]);
        grid.appendChild(createResultCell(g2));
        
        // Row 2
        grid.appendChild(createCell(alleles1[1], 'header')); // P1 allele 2
        const g3 = combine(alleles1[1], alleles2[0]);
        grid.appendChild(createResultCell(g3));
        const g4 = combine(alleles1[1], alleles2[1]);
        grid.appendChild(createResultCell(g4));
        
        updateStats([g1, g2, g3, g4]);
    }
    
    function combine(a, b) {
        // Sort uppercase first
        if (a === 'y' && b === 'Y') return 'Yy';
        if (a === 'Y' && b === 'y') return 'Yy'; // Should already be sorted but safe
        if (a === 'y' && b === 'y') return 'yy';
        return 'YY'; // or Yy
    }
    
    function createCell(text, className) {
        const div = document.createElement('div');
        div.className = 'cell ' + className;
        div.textContent = text;
        return div;
    }
    
    function createResultCell(genotype) {
        const div = document.createElement('div');
        div.className = 'cell result';
        
        const pea = document.createElement('div');
        pea.className = 'pea ' + (genotype.includes('Y') ? 'yellow' : 'green');
        
        const text = document.createElement('div');
        text.textContent = genotype;
        
        div.appendChild(pea);
        div.appendChild(text);
        return div;
    }
    
    function updateStats(offspring) {
        let yellow = 0;
        let green = 0;
        
        let YY = 0, Yy = 0, yy = 0;
        
        offspring.forEach(g => {
            if (g.includes('Y')) yellow++; else green++;
            if (g === 'YY') YY++;
            if (g === 'Yy') Yy++;
            if (g === 'yy') yy++;
        });
        
        document.getElementById('stats').innerHTML = `
            <strong>Phenotypes:</strong><br>
            Yellow: ${yellow} (${(yellow/4*100).toFixed(0)}%)<br>
            Green: ${green} (${(green/4*100).toFixed(0)}%)<br>
            Ratio: ${yellow}:${green}<br><br>
            <strong>Genotypes:</strong><br>
            YY: ${YY}, Yy: ${Yy}, yy: ${yy}
        `;
    }
    
    update();

</script>
</body>
</html>
