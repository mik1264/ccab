<!--
    CCAB Physics Simulation Controls Template
    Use this for physics simulations with force, mass, and time controls

    Usage:
    1. Copy this control panel into your demo HTML
    2. Adjust parameters for your specific physics simulation
    3. Initialize with ControlsManager from demo-utils.js

    Example:
    const controls = new ControlsManager({
        container: '.controls',
        params: { gravity: 9.8, friction: 0.1, dt: 16 },
        callbacks: {
            'play-pause': () => toggleSimulation(),
            reset: () => resetToInitialState(),
            onParamChange: (param, value) => updatePhysics(param, value)
        }
    });
-->

<div class="controls">
    <!-- Forces Section -->
    <div class="control-section">
        <h3>Forces</h3>

        <div class="control-group">
            <label>Gravity: <span class="value">9.8</span> m/s¬≤</label>
            <input type="range" data-param="gravity" min="0" max="50" step="0.1" value="9.8">
        </div>

        <div class="control-group">
            <label>Friction: <span class="value">0.10</span></label>
            <input type="range" data-param="friction" min="0" max="1" step="0.01" value="0.1">
        </div>

        <div class="control-group">
            <label>Air Resistance: <span class="value">0.01</span></label>
            <input type="range" data-param="airResistance" min="0" max="0.5" step="0.01" value="0.01">
        </div>

        <div class="control-group">
            <label>Restitution: <span class="value">0.80</span></label>
            <input type="range" data-param="restitution" min="0" max="1" step="0.05" value="0.8">
        </div>
    </div>

    <!-- Object Properties -->
    <div class="control-section">
        <h3>Object Properties</h3>

        <div class="control-group">
            <label>Mass: <span class="value">1.0</span> kg</label>
            <input type="range" data-param="mass" min="0.1" max="10" step="0.1" value="1">
        </div>

        <div class="control-group">
            <label>Initial Velocity: <span class="value">0</span> m/s</label>
            <input type="range" data-param="initialVelocity" min="0" max="50" step="1" value="0">
        </div>

        <div class="control-group">
            <label>Launch Angle: <span class="value">45</span>¬∞</label>
            <input type="range" data-param="launchAngle" min="0" max="90" step="1" value="45">
        </div>
    </div>

    <!-- Time Control -->
    <div class="control-section">
        <h3>Time Control</h3>

        <div class="control-group">
            <label>Time Scale: <span class="value">1.0</span>x</label>
            <input type="range" data-param="timeScale" min="0.1" max="5" step="0.1" value="1">
        </div>

        <div class="control-group">
            <label>Time Step: <span class="value">16</span> ms</label>
            <input type="range" data-param="dt" min="1" max="50" step="1" value="16">
        </div>

        <div class="button-row">
            <button data-action="play-pause" class="btn btn-primary">‚ñ∂ Play</button>
            <button data-action="step" class="btn">‚è≠ Step</button>
            <button data-action="reset" class="btn">‚Ü∫ Reset</button>
        </div>
    </div>

    <!-- Visualization Options -->
    <div class="control-section">
        <h3>Visualization</h3>

        <div class="toggle-group">
            <label class="toggle">
                <input type="checkbox" data-param="showTrail" checked>
                <span class="toggle-slider"></span>
                Show Trail
            </label>
        </div>

        <div class="toggle-group">
            <label class="toggle">
                <input type="checkbox" data-param="showVectors">
                <span class="toggle-slider"></span>
                Show Velocity Vectors
            </label>
        </div>

        <div class="toggle-group">
            <label class="toggle">
                <input type="checkbox" data-param="showForces">
                <span class="toggle-slider"></span>
                Show Force Arrows
            </label>
        </div>

        <div class="toggle-group">
            <label class="toggle">
                <input type="checkbox" data-param="showEnergy">
                <span class="toggle-slider"></span>
                Show Energy Graph
            </label>
        </div>
    </div>

    <!-- Physics Presets -->
    <div class="control-section">
        <h3>Presets</h3>
        <div class="preset-grid">
            <button class="preset-btn" data-preset="earth" title="Earth gravity">üåç Earth</button>
            <button class="preset-btn" data-preset="moon" title="Moon gravity">üåô Moon</button>
            <button class="preset-btn" data-preset="mars" title="Mars gravity">üî¥ Mars</button>
            <button class="preset-btn" data-preset="space" title="Zero gravity">üåå Space</button>
        </div>
    </div>

    <!-- Energy & Statistics -->
    <div class="control-section">
        <h3>Energy & Stats</h3>
        <div class="energy-bars">
            <div class="energy-bar">
                <span class="energy-label">Kinetic</span>
                <div class="energy-track">
                    <div class="energy-fill kinetic" id="kinetic-bar" style="width: 50%"></div>
                </div>
                <span class="energy-value" id="kinetic-value">0 J</span>
            </div>
            <div class="energy-bar">
                <span class="energy-label">Potential</span>
                <div class="energy-track">
                    <div class="energy-fill potential" id="potential-bar" style="width: 50%"></div>
                </div>
                <span class="energy-value" id="potential-value">0 J</span>
            </div>
            <div class="energy-bar">
                <span class="energy-label">Total</span>
                <div class="energy-track">
                    <div class="energy-fill total" id="total-bar" style="width: 100%"></div>
                </div>
                <span class="energy-value" id="total-value">0 J</span>
            </div>
        </div>

        <div class="stats-row">
            <div class="stat-item">
                <span class="stat-label">Position</span>
                <span class="stat-value" id="stat-position">(0, 0)</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Velocity</span>
                <span class="stat-value" id="stat-velocity">0 m/s</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Time</span>
                <span class="stat-value" id="stat-time">0.00 s</span>
            </div>
        </div>
    </div>

    <!-- Export -->
    <div class="control-section">
        <div class="button-row">
            <button data-action="screenshot" class="btn btn-small">üì∑ Screenshot</button>
            <button data-action="export-data" class="btn btn-small">üìä Export CSV</button>
        </div>
    </div>

    <!-- Shortcuts -->
    <div class="control-section shortcuts">
        <p class="shortcut-hint">
            <kbd>Space</kbd> Play &nbsp;
            <kbd>R</kbd> Reset &nbsp;
            <kbd>T</kbd> Trails
        </p>
    </div>
</div>

<style>
/* Physics Controls Styling */
.controls {
    position: fixed;
    top: 80px;
    right: 20px;
    width: 300px;
    background: rgba(20, 25, 30, 0.95);
    backdrop-filter: blur(10px);
    border-radius: 12px;
    padding: 15px;
    color: #e8e6e1;
    font-family: 'Nunito', -apple-system, sans-serif;
    font-size: 14px;
    z-index: 1000;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    max-height: calc(100vh - 100px);
    overflow-y: auto;
}

.control-section {
    margin-bottom: 18px;
    padding-bottom: 14px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
}

.control-section:last-child {
    margin-bottom: 0;
    padding-bottom: 0;
    border-bottom: none;
}

.control-section h3 {
    margin: 0 0 12px 0;
    font-size: 0.8em;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    color: #f97316;
    font-weight: 600;
}

/* Sliders */
.control-group {
    margin-bottom: 12px;
}

.control-group label {
    display: flex;
    justify-content: space-between;
    margin-bottom: 6px;
    font-size: 0.9em;
    color: #a0a0a0;
}

.control-group .value {
    color: #fbbf24;
    font-weight: 600;
    font-family: 'Courier New', monospace;
    min-width: 60px;
    text-align: right;
}

.control-group input[type="range"] {
    width: 100%;
    height: 6px;
    -webkit-appearance: none;
    background: linear-gradient(to right, rgba(249, 115, 22, 0.3), rgba(249, 115, 22, 0.1));
    border-radius: 3px;
    outline: none;
}

.control-group input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 16px;
    height: 16px;
    background: #f97316;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 2px 6px rgba(249, 115, 22, 0.4);
}

/* Toggle Switches */
.toggle-group {
    margin-bottom: 10px;
}

.toggle {
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    font-size: 0.9em;
    color: #a0a0a0;
}

.toggle input {
    display: none;
}

.toggle-slider {
    width: 36px;
    height: 20px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    position: relative;
    transition: background 0.3s;
}

.toggle-slider::after {
    content: '';
    position: absolute;
    width: 16px;
    height: 16px;
    background: #888;
    border-radius: 50%;
    top: 2px;
    left: 2px;
    transition: all 0.3s;
}

.toggle input:checked + .toggle-slider {
    background: rgba(249, 115, 22, 0.3);
}

.toggle input:checked + .toggle-slider::after {
    background: #f97316;
    transform: translateX(16px);
}

/* Buttons */
.button-row {
    display: flex;
    gap: 8px;
}

.btn {
    flex: 1;
    padding: 10px 14px;
    border: none;
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.08);
    color: #e8e6e1;
    cursor: pointer;
    font-size: 0.9em;
    font-family: inherit;
    transition: all 0.2s;
}

.btn:hover {
    background: rgba(255, 255, 255, 0.15);
}

.btn-primary {
    background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
    color: white;
}

.btn-primary:hover {
    background: linear-gradient(135deg, #fb923c 0%, #f97316 100%);
}

.btn-small {
    padding: 8px 12px;
    font-size: 0.85em;
}

/* Presets */
.preset-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 8px;
}

.preset-btn {
    padding: 10px 8px;
    border: 1px solid rgba(249, 115, 22, 0.3);
    border-radius: 8px;
    background: transparent;
    color: #aaa;
    cursor: pointer;
    font-size: 0.75em;
    transition: all 0.2s;
    text-align: center;
}

.preset-btn:hover {
    border-color: #f97316;
    color: #f97316;
    background: rgba(249, 115, 22, 0.1);
}

/* Energy Bars */
.energy-bars {
    margin-bottom: 15px;
}

.energy-bar {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 8px;
}

.energy-label {
    width: 60px;
    font-size: 0.8em;
    color: #888;
}

.energy-track {
    flex: 1;
    height: 8px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 4px;
    overflow: hidden;
}

.energy-fill {
    height: 100%;
    border-radius: 4px;
    transition: width 0.3s;
}

.energy-fill.kinetic {
    background: linear-gradient(90deg, #3b82f6, #60a5fa);
}

.energy-fill.potential {
    background: linear-gradient(90deg, #10b981, #34d399);
}

.energy-fill.total {
    background: linear-gradient(90deg, #8b5cf6, #a78bfa);
}

.energy-value {
    width: 50px;
    text-align: right;
    font-size: 0.8em;
    font-family: 'Courier New', monospace;
    color: #aaa;
}

/* Stats Row */
.stats-row {
    display: flex;
    justify-content: space-between;
    padding: 10px;
    background: rgba(255, 255, 255, 0.03);
    border-radius: 8px;
}

.stat-item {
    text-align: center;
}

.stat-item .stat-label {
    display: block;
    font-size: 0.7em;
    color: #666;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.stat-item .stat-value {
    display: block;
    font-size: 0.9em;
    font-weight: 600;
    color: #fbbf24;
    font-family: 'Courier New', monospace;
    margin-top: 3px;
}

/* Shortcuts */
.shortcuts {
    text-align: center;
}

.shortcut-hint {
    margin: 0;
    font-size: 0.75em;
    color: #555;
}

kbd {
    display: inline-block;
    padding: 2px 6px;
    background: rgba(255, 255, 255, 0.08);
    border-radius: 4px;
    font-family: monospace;
    font-size: 0.9em;
    color: #888;
}

/* Scrollbar */
.controls::-webkit-scrollbar {
    width: 6px;
}

.controls::-webkit-scrollbar-track {
    background: transparent;
}

.controls::-webkit-scrollbar-thumb {
    background: rgba(249, 115, 22, 0.3);
    border-radius: 3px;
}

/* Mobile */
@media (max-width: 768px) {
    .controls {
        position: fixed;
        top: auto;
        bottom: 0;
        left: 0;
        right: 0;
        width: 100%;
        max-height: 50vh;
        border-radius: 20px 20px 0 0;
    }

    .preset-grid {
        grid-template-columns: repeat(4, 1fr);
    }
}
</style>
