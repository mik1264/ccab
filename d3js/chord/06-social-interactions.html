<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Media Interactions</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: linear-gradient(to bottom right, #ff9a9e, #fecfef, #fecfef, #feada6);
            overflow: hidden;
        }
        h1 {
            color: #d63384;
            text-align: center;
            margin-bottom: 10px;
        }
        .info {
            color: #6c3483;
            text-align: center;
            margin-bottom: 20px;
        }
        svg {
            display: block;
            margin: 0 auto;
            background: rgba(255,255,255,0.9);
            border-radius: 50%;
        }
        .chord {
            fill-opacity: 0.65;
        }
        .chord:hover {
            fill-opacity: 0.95;
            stroke: #d63384;
            stroke-width: 1.5px;
        }
    </style>
</head>
<body>
    <h1>Social Media Platform Interactions</h1>
    <p class="info">Cross-platform user engagement and sharing</p>
    <svg id="chord"></svg>

    <script>
        const width = window.innerWidth - 40;
        const height = window.innerHeight - 140;
        const size = Math.min(width, height);
        const outerRadius = size * 0.4;
        const innerRadius = outerRadius - 32;

        const svg = d3.select("#chord")
            .attr("width", size)
            .attr("height", size)
            .append("g")
            .attr("transform", `translate(${size / 2},${size / 2})`);

        const platforms = ["Facebook", "Instagram", "Twitter", "LinkedIn", "TikTok", "YouTube", "Pinterest"];

        const matrix = [
            [0, 850, 420, 180, 240, 520, 360],      // Facebook
            [820, 0, 380, 140, 680, 560, 720],      // Instagram
            [410, 370, 0, 280, 220, 340, 180],      // Twitter
            [170, 130, 270, 0, 80, 160, 120],       // LinkedIn
            [230, 670, 210, 70, 0, 580, 420],       // TikTok
            [510, 550, 330, 150, 570, 0, 380],      // YouTube
            [350, 710, 170, 110, 410, 370, 0]       // Pinterest
        ];

        const chord = d3.chord()
            .padAngle(0.05)
            .sortSubgroups(d3.descending);

        const arc = d3.arc()
            .innerRadius(innerRadius)
            .outerRadius(outerRadius);

        const ribbon = d3.ribbon()
            .radius(innerRadius);

        const platformColors = {
            "Facebook": "#3b5998",
            "Instagram": "#C13584",
            "Twitter": "#1DA1F2",
            "LinkedIn": "#0077b5",
            "TikTok": "#000000",
            "YouTube": "#FF0000",
            "Pinterest": "#E60023"
        };

        const color = d3.scaleOrdinal()
            .domain(platforms)
            .range(platforms.map(p => platformColors[p]));

        const chords = chord(matrix);

        svg.append("g")
            .selectAll("path")
            .data(chords)
            .join("path")
            .attr("class", "chord")
            .attr("d", ribbon)
            .attr("fill", d => color(platforms[d.source.index]))
            .attr("stroke", "white")
            .attr("stroke-width", 0.5)
            .append("title")
            .text(d => `${platforms[d.source.index]} â†’ ${platforms[d.target.index]}\n${d.source.value}K interactions/day`);

        const group = svg.append("g")
            .selectAll("g")
            .data(chords.groups)
            .join("g");

        group.append("path")
            .attr("fill", d => color(platforms[d.index]))
            .attr("stroke", "white")
            .attr("stroke-width", 2.5)
            .attr("d", arc);

        group.append("title")
            .text(d => `${platforms[d.index]}\nTotal: ${d.value}K interactions`);

        group.append("text")
            .each(d => { d.angle = (d.startAngle + d.endAngle) / 2; })
            .attr("dy", ".35em")
            .attr("transform", d => `
                rotate(${d.angle * 180 / Math.PI - 90})
                translate(${outerRadius + 15})
                ${d.angle > Math.PI ? "rotate(180)" : ""}
            `)
            .attr("text-anchor", d => d.angle > Math.PI ? "end" : "start")
            .attr("fill", d => color(platforms[d.index]))
            .attr("font-weight", "bold")
            .attr("font-size", "13px")
            .text(d => platforms[d.index]);
    </script>
</body>
</html>
