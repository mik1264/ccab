<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rössler Attractor</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            overflow: hidden;
            background: #0a0a0a;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        canvas {
            display: block;
        }
        .info {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            padding: 20px;
            border-radius: 10px;
            color: white;
            max-width: 300px;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <div class="info">
        <h2>Rössler Attractor</h2>
        <p>A system of three non-linear differential equations that produce a strange attractor with a single curved wing.</p>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const a = 0.2;
        const b = 0.2;
        const c = 5.7;
        const dt = 0.05;

        let x = 1;
        let y = 1;
        let z = 1;

        let points = [];
        let rotation = 0;

        function rotateY(x, z, angle) {
            const cos = Math.cos(angle);
            const sin = Math.sin(angle);
            return {
                x: x * cos + z * sin,
                z: -x * sin + z * cos
            };
        }

        function rotateX(y, z, angle) {
            const cos = Math.cos(angle);
            const sin = Math.sin(angle);
            return {
                y: y * cos - z * sin,
                z: y * sin + z * cos
            };
        }

        function project(x, y, z) {
            const scale = 15;
            const distance = 300;

            const rotated = rotateY(x, z, rotation);
            const rotated2 = rotateX(y, rotated.z, 0.5);

            const perspective = distance / (distance + rotated2.z);

            return {
                x: canvas.width / 2 + rotated.x * scale * perspective,
                y: canvas.height / 2 + rotated2.y * scale * perspective
            };
        }

        function draw() {
            ctx.fillStyle = 'rgba(10, 10, 10, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Calculate next point
            const dx = -y - z;
            const dy = x + a * y;
            const dz = b + z * (x - c);

            x += dx * dt;
            y += dy * dt;
            z += dz * dt;

            points.push({ x, y, z });

            if (points.length > 3000) {
                points.shift();
            }

            // Draw the attractor
            for (let i = 1; i < points.length; i++) {
                const p1 = project(points[i-1].x, points[i-1].y, points[i-1].z);
                const p2 = project(points[i].x, points[i].y, points[i].z);

                const hue = 280 + (i / points.length) * 80;
                const alpha = Math.min(1, i / 500);

                ctx.beginPath();
                ctx.strokeStyle = `hsla(${hue}, 70%, 60%, ${alpha})`;
                ctx.lineWidth = 2;
                ctx.moveTo(p1.x, p1.y);
                ctx.lineTo(p2.x, p2.y);
                ctx.stroke();
            }

            rotation += 0.005;
        }

        function animate() {
            draw();
            requestAnimationFrame(animate);
        }

        animate();

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    </script>
</body>
</html>