<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coding Clock - P5.js Generative Art - CCAB</title>
    <style>
        body { margin: 0; padding: 0; overflow: hidden; background: #0a0e1a; }
        .back-link {
            position: fixed; top: 10px; left: 10px; padding: 8px 16px;
            background: rgba(0, 0, 0, 0.7); color: #ec4899; text-decoration: none;
            border-radius: 6px; font-size: 14px; z-index: 999;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        .back-link:hover { background: rgba(236, 72, 153, 0.2); }
        #loading {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            color: #ec4899; font-family: -apple-system, BlinkMacSystemFont, sans-serif;
        }
        .spinner {
            width: 50px; height: 50px; border: 4px solid rgba(255, 255, 255, 0.1);
            border-top-color: #ec4899; border-radius: 50%; animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back to P5.js Gallery</a>
    <div id="loading"><div class="spinner"></div><p>Loading...</p></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <script>
        let particles = [];

        function setup() {
            createCanvas(windowWidth, windowHeight);
            document.getElementById('loading').style.display = 'none';
            colorMode(HSB, 360, 100, 100, 100);
        }

        function draw() {
            background(10, 14, 26, 30);

            let cx = width / 2;
            let cy = height / 2;
            let radius = min(width, height) * 0.35;

            // Get current time
            let hr = hour();
            let mn = minute();
            let sc = second();
            let ms = millis() % 1000;

            // Draw outer ring
            noFill();
            strokeWeight(3);
            for (let a = 0; a < 360; a += 6) {
                let r1 = radius + 20;
                let r2 = (a % 30 === 0) ? radius + 40 : radius + 30;
                let x1 = cx + r1 * cos(radians(a - 90));
                let y1 = cy + r1 * sin(radians(a - 90));
                let x2 = cx + r2 * cos(radians(a - 90));
                let y2 = cy + r2 * sin(radians(a - 90));
                stroke(280, 50, 60);
                line(x1, y1, x2, y2);
            }

            // Seconds arc
            let secAngle = map(sc + ms / 1000, 0, 60, 0, 360);
            stroke(320, 80, 90);
            strokeWeight(8);
            noFill();
            arc(cx, cy, radius * 2 + 10, radius * 2 + 10, -HALF_PI, radians(secAngle) - HALF_PI);

            // Minutes arc
            let minAngle = map(mn + sc / 60, 0, 60, 0, 360);
            stroke(300, 70, 85);
            strokeWeight(12);
            arc(cx, cy, radius * 2 - 30, radius * 2 - 30, -HALF_PI, radians(minAngle) - HALF_PI);

            // Hours arc (12-hour)
            let hrAngle = map((hr % 12) + mn / 60, 0, 12, 0, 360);
            stroke(280, 60, 80);
            strokeWeight(16);
            arc(cx, cy, radius * 2 - 70, radius * 2 - 70, -HALF_PI, radians(hrAngle) - HALF_PI);

            // Center dot
            fill(320, 80, 100);
            noStroke();
            circle(cx, cy, 20);

            // Second hand with particles
            let secX = cx + (radius - 10) * cos(radians(secAngle) - HALF_PI);
            let secY = cy + (radius - 10) * sin(radians(secAngle) - HALF_PI);

            // Add particle at second hand tip
            if (frameCount % 2 === 0) {
                particles.push({
                    x: secX,
                    y: secY,
                    vx: random(-1, 1),
                    vy: random(-1, 1),
                    life: 60,
                    hue: (sc * 6) % 360
                });
            }

            // Update and draw particles
            for (let i = particles.length - 1; i >= 0; i--) {
                let p = particles[i];
                p.x += p.vx;
                p.y += p.vy;
                p.life--;
                p.vy += 0.05; // gravity

                fill(p.hue, 70, 90, map(p.life, 0, 60, 0, 80));
                noStroke();
                circle(p.x, p.y, map(p.life, 0, 60, 2, 8));

                if (p.life <= 0) {
                    particles.splice(i, 1);
                }
            }

            // Limit particles
            if (particles.length > 200) {
                particles.splice(0, 50);
            }

            // Digital time display
            fill(320, 0, 100);
            textAlign(CENTER, CENTER);
            textSize(24);
            textFont('monospace');
            let timeStr = nf(hr, 2) + ':' + nf(mn, 2) + ':' + nf(sc, 2);
            text(timeStr, cx, cy + radius + 80);
        }

        function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
        }
    </script>
</body>
</html>
