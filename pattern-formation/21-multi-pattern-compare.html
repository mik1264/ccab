<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>Pattern Comparison</title>
<style>body{margin:0;overflow:hidden;background:#000;font-family:Arial}
.grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;padding:10px}
canvas{display:block;border:1px solid #667eea}
.label{text-align:center;color:#fff;padding:5px;font-size:14px}</style></head>
<body>
<div class="grid">
<div><canvas id="c1" width="400" height="400"></canvas><div class="label">Spots (F=0.0545, k=0.062)</div></div>
<div><canvas id="c2" width="400" height="400"></canvas><div class="label">Stripes (F=0.035, k=0.065)</div></div>
<div><canvas id="c3" width="400" height="400"></canvas><div class="label">Waves (F=0.014, k=0.045)</div></div>
<div><canvas id="c4" width="400" height="400"></canvas><div class="label">Maze (F=0.029, k=0.057)</div></div>
</div>
<script>
const params=[{f:0.0545,k:0.062},{f:0.035,k:0.065},{f:0.014,k:0.045},{f:0.029,k:0.057}];
const vs=`#version 300 es
in vec2 position;out vec2 uv;void main(){uv=position*0.5+0.5;gl_Position=vec4(position,0.0,1.0);}`;
const cs=`#version 300 es
precision highp float;uniform sampler2D state;uniform vec2 resolution;uniform float feed;uniform float kill;in vec2 uv;out vec4 fragColor;
void main(){vec2 p=1.0/resolution,s=texture(state,uv).xy;vec2 l=vec2(0.0);
l+=texture(state,uv+vec2(-p.x,0.0)).xy*0.2;l+=texture(state,uv+vec2(p.x,0.0)).xy*0.2;
l+=texture(state,uv+vec2(0.0,-p.y)).xy*0.2;l+=texture(state,uv+vec2(0.0,p.y)).xy*0.2;
l+=texture(state,uv+vec2(-p.x,-p.y)).xy*0.05;l+=texture(state,uv+vec2(p.x,-p.y)).xy*0.05;
l+=texture(state,uv+vec2(-p.x,p.y)).xy*0.05;l+=texture(state,uv+vec2(p.x,p.y)).xy*0.05;l-=s;
float a=s.x,b=s.y,abb=a*b*b;
a+=(1.0*l.x-abb+feed*(1.0-a));b+=(0.5*l.y+abb-(kill+feed)*b);fragColor=vec4(a,b,0.0,1.0);}`;
const ds=`#version 300 es
precision highp float;uniform sampler2D state;in vec2 uv;out vec4 fragColor;
void main(){float b=texture(state,uv).y;fragColor=vec4(mix(vec3(0.0),vec3(1.0,0.5,0.2),smoothstep(0.0,0.5,b)),1.0);}`;
function comp(gl,t,s){const sh=gl.createShader(t);gl.shaderSource(sh,s);gl.compileShader(sh);return sh;}
function prog(gl,v,f){const p=gl.createProgram();gl.attachShader(p,comp(gl,gl.VERTEX_SHADER,v));gl.attachShader(p,comp(gl,gl.FRAGMENT_SHADER,f));gl.linkProgram(p);return p;}
const sims=params.map((p,i)=>{
const c=document.getElementById(`c${i+1}`),gl=c.getContext('webgl2'),w=400,h=400;
const cp=prog(gl,vs,cs),dp=prog(gl,vs,ds),buf=gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER,buf);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),gl.STATIC_DRAW);
function createT(){const t=gl.createTexture();gl.bindTexture(gl.TEXTURE_2D,t);gl.texImage2D(gl.TEXTURE_2D,0,gl.RG32F,w,h,0,gl.RG,gl.FLOAT,null);
gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR);
gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.REPEAT);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.REPEAT);return t;}
const tex=[createT(),createT()],fb=[gl.createFramebuffer(),gl.createFramebuffer()];
for(let j=0;j<2;j++){gl.bindFramebuffer(gl.FRAMEBUFFER,fb[j]);gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,tex[j],0);}
const data=new Float32Array(w*h*2);for(let j=0;j<w*h;j++){data[j*2]=1.0;data[j*2+1]=Math.random()<0.1?Math.random()*0.5:0.0;}
gl.bindTexture(gl.TEXTURE_2D,tex[0]);gl.texImage2D(gl.TEXTURE_2D,0,gl.RG32F,w,h,0,gl.RG,gl.FLOAT,data);
return{gl,cp,dp,buf,tex,fb,w,h,curr:0,p};
});
function render(){
sims.forEach(s=>{
const{gl,cp,dp,buf,tex,fb,w,h,p}=s;
gl.useProgram(cp);gl.bindFramebuffer(gl.FRAMEBUFFER,fb[1-s.curr]);gl.viewport(0,0,w,h);
const pos=gl.getAttribLocation(cp,'position');gl.bindBuffer(gl.ARRAY_BUFFER,buf);gl.enableVertexAttribArray(pos);
gl.vertexAttribPointer(pos,2,gl.FLOAT,false,0,0);gl.activeTexture(gl.TEXTURE0);gl.bindTexture(gl.TEXTURE_2D,tex[s.curr]);
gl.uniform1i(gl.getUniformLocation(cp,'state'),0);gl.uniform2f(gl.getUniformLocation(cp,'resolution'),w,h);
gl.uniform1f(gl.getUniformLocation(cp,'feed'),p.f);gl.uniform1f(gl.getUniformLocation(cp,'kill'),p.k);
gl.drawArrays(gl.TRIANGLE_STRIP,0,4);s.curr=1-s.curr;
gl.useProgram(dp);gl.bindFramebuffer(gl.FRAMEBUFFER,null);
const dpos=gl.getAttribLocation(dp,'position');gl.bindBuffer(gl.ARRAY_BUFFER,buf);gl.enableVertexAttribArray(dpos);
gl.vertexAttribPointer(dpos,2,gl.FLOAT,false,0,0);gl.activeTexture(gl.TEXTURE0);gl.bindTexture(gl.TEXTURE_2D,tex[s.curr]);
gl.uniform1i(gl.getUniformLocation(dp,'state'),0);gl.drawArrays(gl.TRIANGLE_STRIP,0,4);
});
requestAnimationFrame(render);
}
render();
</script></body></html>
