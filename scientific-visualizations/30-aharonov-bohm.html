<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aharonov-Bohm Effect - Scientific Visualizations</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: #e0e0e0;
            overflow-x: hidden;
        }

        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #80cbc4;
            text-decoration: none;
            font-size: 14px;
            opacity: 0.8;
            z-index: 100;
            background: rgba(0,0,0,0.3);
            padding: 8px 16px;
            border-radius: 20px;
            transition: all 0.3s;
        }

        .back-link:hover {
            opacity: 1;
            background: rgba(0,0,0,0.5);
        }

        header {
            text-align: center;
            padding: 60px 20px 20px;
        }

        h1 {
            font-size: 2rem;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #80cbc4, #4db6ac);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: #b2dfdb;
            font-size: 1rem;
        }

        .container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .panel {
            background: rgba(0,0,0,0.3);
            border-radius: 16px;
            padding: 20px;
            border: 1px solid rgba(128, 203, 196, 0.2);
        }

        .main-panel {
            flex: 1;
            min-width: 600px;
        }

        .side-panel {
            width: 350px;
        }

        .panel-title {
            font-size: 1rem;
            color: #80cbc4;
            margin-bottom: 15px;
            text-align: center;
        }

        canvas {
            display: block;
            margin: 0 auto;
            border-radius: 8px;
        }

        .controls {
            width: 320px;
        }

        .control-group {
            margin-bottom: 18px;
        }

        .control-group label {
            display: block;
            font-size: 0.85rem;
            color: #b2dfdb;
            margin-bottom: 8px;
        }

        .control-group input[type="range"] {
            width: 100%;
            height: 6px;
            background: rgba(128, 203, 196, 0.2);
            border-radius: 3px;
            outline: none;
            -webkit-appearance: none;
        }

        .control-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: #80cbc4;
            border-radius: 50%;
            cursor: pointer;
        }

        .stats {
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            margin-bottom: 6px;
        }

        .stat-label {
            color: #b2dfdb;
        }

        .stat-value {
            color: #80cbc4;
            font-weight: 600;
        }

        .flux-presets {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .preset-btn {
            padding: 6px 12px;
            background: rgba(128, 203, 196, 0.1);
            border: 1px solid rgba(128, 203, 196, 0.2);
            color: #b2dfdb;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.75rem;
            transition: all 0.3s;
        }

        .preset-btn:hover {
            background: rgba(128, 203, 196, 0.2);
        }

        .info-panel {
            background: rgba(0,0,0,0.3);
            border-radius: 16px;
            padding: 20px;
            border: 1px solid rgba(128, 203, 196, 0.2);
            max-width: 1360px;
            margin: 20px auto;
        }

        .info-panel h3 {
            color: #80cbc4;
            margin-bottom: 10px;
            font-size: 1rem;
        }

        .info-panel p {
            font-size: 0.9rem;
            line-height: 1.6;
            color: #b0bec5;
        }

        .equation {
            font-family: 'Times New Roman', serif;
            font-style: italic;
            background: rgba(128, 203, 196, 0.1);
            padding: 10px 15px;
            border-radius: 8px;
            margin: 10px 0;
            text-align: center;
            color: #e0e0e0;
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                align-items: center;
            }

            .main-panel, .side-panel, .controls {
                width: 100%;
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">← Back to Gallery</a>

    <header>
        <h1>Aharonov-Bohm Effect</h1>
        <p class="subtitle">Quantum phase shift from electromagnetic potential in field-free region</p>
    </header>

    <div class="container">
        <div class="panel main-panel">
            <h3 class="panel-title">Electron Interference Around Magnetic Flux</h3>
            <canvas id="mainCanvas" width="650" height="400"></canvas>
        </div>

        <div class="panel side-panel">
            <h3 class="panel-title">Interference Pattern</h3>
            <canvas id="patternCanvas" width="300" height="250"></canvas>
        </div>

        <div class="panel controls">
            <div class="control-group">
                <label>Magnetic Flux Φ: <span id="fluxVal">0.0</span> Φ₀</label>
                <input type="range" id="fluxSlider" min="0" max="4" value="0" step="0.01">
                <div style="font-size: 0.75rem; color: #80cbc4; margin-top: 3px;">
                    Φ₀ = h/e (flux quantum)
                </div>
            </div>

            <div class="control-group">
                <label>Path Separation: <span id="sepVal">50</span> nm</label>
                <input type="range" id="sepSlider" min="20" max="100" value="50" step="1">
            </div>

            <div class="control-group">
                <label>Electron Energy: <span id="energyVal">50</span> keV</label>
                <input type="range" id="energySlider" min="10" max="200" value="50" step="1">
            </div>

            <div class="control-group">
                <label>Flux Presets:</label>
                <div class="flux-presets">
                    <button class="preset-btn" data-flux="0">0 (no shift)</button>
                    <button class="preset-btn" data-flux="0.25">¼ Φ₀</button>
                    <button class="preset-btn" data-flux="0.5">½ Φ₀ (π shift)</button>
                    <button class="preset-btn" data-flux="1">1 Φ₀</button>
                    <button class="preset-btn" data-flux="2">2 Φ₀</button>
                </div>
            </div>

            <div class="stats">
                <div class="stat-row">
                    <span class="stat-label">Phase shift Δφ:</span>
                    <span class="stat-value" id="phaseShift">-</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Phase (mod 2π):</span>
                    <span class="stat-value" id="phaseMod">-</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Fringe shift:</span>
                    <span class="stat-value" id="fringeShift">-</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">de Broglie λ:</span>
                    <span class="stat-value" id="deBroglie">-</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">B inside solenoid:</span>
                    <span class="stat-value" id="bField">-</span>
                </div>
            </div>
        </div>
    </div>

    <div class="info-panel">
        <h3>The Aharonov-Bohm Effect</h3>
        <p>
            Predicted by Yakir Aharonov and David Bohm in 1959, this effect demonstrates that quantum
            particles can be affected by electromagnetic potentials even in regions where the fields
            are zero. An electron beam splits to pass on either side of a solenoid (where B=0 outside),
            yet the interference pattern shifts depending on the magnetic flux enclosed—revealing the
            fundamental role of the vector potential A in quantum mechanics.
        </p>
        <div class="equation">
            Δφ = (e/ℏ) ∮ A·dl = (e/ℏ) Φ = 2π(Φ/Φ₀) &nbsp;&nbsp;where Φ₀ = h/e ≈ 4.14×10⁻¹⁵ Wb
        </div>
        <p>
            At Φ = ½Φ₀, the phase shift is exactly π, causing destructive interference where there
            was previously constructive, and vice versa—the fringes shift by half a period. This
            effect was experimentally confirmed by Tonomura et al. (1986) using superconducting
            shielding to completely exclude electrons from the magnetic field region.
        </p>
    </div>

    <script>
        const mainCanvas = document.getElementById('mainCanvas');
        const mainCtx = mainCanvas.getContext('2d');
        const patternCanvas = document.getElementById('patternCanvas');
        const patternCtx = patternCanvas.getContext('2d');

        // Constants
        const h = 6.626e-34; // Planck constant
        const e = 1.6e-19;   // Elementary charge
        const m_e = 9.1e-31; // Electron mass
        const c = 3e8;       // Speed of light
        const PHI_0 = h / e; // Flux quantum

        // Parameters
        let flux = 0; // In units of Φ₀
        let pathSeparation = 50; // nm
        let electronEnergy = 50; // keV

        let time = 0;

        // Controls
        document.getElementById('fluxSlider').addEventListener('input', (e) => {
            flux = parseFloat(e.target.value);
            document.getElementById('fluxVal').textContent = flux.toFixed(2);
            update();
        });

        document.getElementById('sepSlider').addEventListener('input', (e) => {
            pathSeparation = parseFloat(e.target.value);
            document.getElementById('sepVal').textContent = pathSeparation;
            update();
        });

        document.getElementById('energySlider').addEventListener('input', (e) => {
            electronEnergy = parseFloat(e.target.value);
            document.getElementById('energyVal').textContent = electronEnergy;
            update();
        });

        document.querySelectorAll('.preset-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                flux = parseFloat(btn.dataset.flux);
                document.getElementById('fluxSlider').value = flux;
                document.getElementById('fluxVal').textContent = flux.toFixed(2);
                update();
            });
        });

        function deBroglieWavelength() {
            // λ = h / p = h / √(2mE)
            const E = electronEnergy * 1000 * e; // Convert keV to J
            const p = Math.sqrt(2 * m_e * E);
            return h / p;
        }

        function update() {
            const lambda = deBroglieWavelength();
            const phaseShift = 2 * Math.PI * flux;
            const phaseMod = (phaseShift % (2 * Math.PI));
            const fringeShiftNum = flux; // Fringe shift = Φ/Φ₀

            document.getElementById('phaseShift').textContent = phaseShift.toFixed(3) + ' rad';
            document.getElementById('phaseMod').textContent = phaseMod.toFixed(3) + ' rad';
            document.getElementById('fringeShift').textContent = fringeShiftNum.toFixed(2) + ' fringes';
            document.getElementById('deBroglie').textContent = (lambda * 1e12).toFixed(2) + ' pm';

            // B field needed for this flux (assuming 10nm radius solenoid)
            const solenoidRadius = 10e-9; // 10 nm
            const area = Math.PI * solenoidRadius * solenoidRadius;
            const actualFlux = flux * PHI_0;
            const B = actualFlux / area;
            document.getElementById('bField').textContent = (B * 1000).toFixed(1) + ' mT';

            drawPattern();
        }

        function drawMain() {
            const ctx = mainCtx;
            const W = mainCanvas.width;
            const H = mainCanvas.height;

            // Clear
            ctx.fillStyle = '#0a0a1a';
            ctx.fillRect(0, 0, W, H);

            const sourceX = 50;
            const solenoidX = W / 2;
            const screenX = W - 80;
            const centerY = H / 2;
            const pathOffset = 80;

            // Draw solenoid cross-section
            const solenoidR = 30;
            ctx.beginPath();
            ctx.arc(solenoidX, centerY, solenoidR, 0, Math.PI * 2);
            ctx.fillStyle = 'rgba(128, 203, 196, 0.3)';
            ctx.fill();
            ctx.strokeStyle = '#80cbc4';
            ctx.lineWidth = 2;
            ctx.stroke();

            // Draw B-field indicator inside
            if (flux > 0.01) {
                const bIntensity = Math.min(1, flux / 2);
                ctx.fillStyle = `rgba(255, 193, 7, ${0.2 + 0.6 * bIntensity})`;
                ctx.beginPath();
                ctx.arc(solenoidX, centerY, solenoidR - 5, 0, Math.PI * 2);
                ctx.fill();

                // B field direction (into page)
                ctx.fillStyle = '#ffc107';
                ctx.font = '16px sans-serif';
                ctx.textAlign = 'center';
                ctx.fillText('⊗', solenoidX, centerY + 5);
                ctx.font = '10px sans-serif';
                ctx.fillText('B ≠ 0', solenoidX, centerY + 20);
            }

            // Draw "B = 0" labels outside
            ctx.fillStyle = '#b2dfdb';
            ctx.font = '10px sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('B = 0', solenoidX, centerY - solenoidR - 40);
            ctx.fillText('A ≠ 0', solenoidX, centerY - solenoidR - 25);

            // Draw electron source
            ctx.fillStyle = '#80cbc4';
            ctx.beginPath();
            ctx.arc(sourceX, centerY, 8, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillStyle = '#b2dfdb';
            ctx.font = '11px sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('e⁻ source', sourceX, centerY + 25);

            // Draw screen
            ctx.fillStyle = 'rgba(128, 203, 196, 0.3)';
            ctx.fillRect(screenX, centerY - 100, 20, 200);
            ctx.strokeStyle = '#80cbc4';
            ctx.strokeRect(screenX, centerY - 100, 20, 200);
            ctx.fillStyle = '#b2dfdb';
            ctx.fillText('Screen', screenX + 10, centerY + 120);

            // Draw electron waves
            const phaseShift = Math.PI * flux;

            // Upper path
            drawElectronWave(ctx, sourceX, centerY, solenoidX - solenoidR - 10, centerY - pathOffset, time, 0);
            drawElectronWave(ctx, solenoidX + solenoidR + 10, centerY - pathOffset, screenX, centerY, time + 3, phaseShift);

            // Lower path
            drawElectronWave(ctx, sourceX, centerY, solenoidX - solenoidR - 10, centerY + pathOffset, time, 0);
            drawElectronWave(ctx, solenoidX + solenoidR + 10, centerY + pathOffset, screenX, centerY, time + 3, -phaseShift);

            // Path curves around solenoid
            ctx.strokeStyle = 'rgba(128, 203, 196, 0.3)';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);

            // Upper curve
            ctx.beginPath();
            ctx.moveTo(solenoidX - solenoidR - 10, centerY - pathOffset);
            ctx.quadraticCurveTo(solenoidX, centerY - pathOffset - 20, solenoidX + solenoidR + 10, centerY - pathOffset);
            ctx.stroke();

            // Lower curve
            ctx.beginPath();
            ctx.moveTo(solenoidX - solenoidR - 10, centerY + pathOffset);
            ctx.quadraticCurveTo(solenoidX, centerY + pathOffset + 20, solenoidX + solenoidR + 10, centerY + pathOffset);
            ctx.stroke();

            ctx.setLineDash([]);

            // Labels
            ctx.fillStyle = '#80cbc4';
            ctx.font = '11px sans-serif';
            ctx.fillText('Path 1', solenoidX, centerY - pathOffset - 30);
            ctx.fillText('Path 2', solenoidX, centerY + pathOffset + 40);

            // Phase difference indicator
            ctx.fillStyle = '#ffc107';
            ctx.font = '12px sans-serif';
            ctx.textAlign = 'left';
            ctx.fillText('Δφ = 2π(Φ/Φ₀) = ' + (2 * Math.PI * flux).toFixed(2) + ' rad', 15, 25);
        }

        function drawElectronWave(ctx, x1, y1, x2, y2, phase, extraPhase) {
            const dx = x2 - x1;
            const dy = y2 - y1;
            const dist = Math.sqrt(dx * dx + dy * dy);
            const nx = dy / dist;
            const ny = -dx / dist;

            ctx.strokeStyle = 'rgba(128, 203, 196, 0.6)';
            ctx.lineWidth = 2;
            ctx.beginPath();

            const wavelength = 30;
            const amplitude = 8;

            for (let t = 0; t <= 1; t += 0.01) {
                const x = x1 + dx * t;
                const y = y1 + dy * t;
                const wavePhase = (t * dist / wavelength) * 2 * Math.PI - phase + extraPhase;
                const offset = amplitude * Math.sin(wavePhase);

                if (t === 0) {
                    ctx.moveTo(x + nx * offset, y + ny * offset);
                } else {
                    ctx.lineTo(x + nx * offset, y + ny * offset);
                }
            }
            ctx.stroke();
        }

        function drawPattern() {
            const ctx = patternCtx;
            const W = patternCanvas.width;
            const H = patternCanvas.height;

            ctx.fillStyle = '#0a0a1a';
            ctx.fillRect(0, 0, W, H);

            const phaseShift = 2 * Math.PI * flux;

            // Draw intensity pattern
            const patternH = H - 60;
            const patternY = 30;

            for (let y = 0; y < patternH; y++) {
                // Position on screen (centered)
                const screenPos = (y / patternH - 0.5) * 10;

                // Two-slit interference with AB phase shift
                // I = |e^(i*k*r1) + e^(i*k*r2 + iΔφ)|² ∝ cos²((phase_diff + Δφ)/2)
                const pathDiff = screenPos * 0.5; // Simplified path difference
                const intrinsicPhase = pathDiff * Math.PI;
                const totalPhase = intrinsicPhase + phaseShift;

                const intensity = Math.pow(Math.cos(totalPhase / 2), 2);

                // Color based on intensity
                const r = Math.floor(intensity * 128);
                const g = Math.floor(intensity * 203);
                const b = Math.floor(intensity * 196);

                ctx.fillStyle = `rgb(${r}, ${g}, ${b})`;
                ctx.fillRect(W / 2 - 60, patternY + y, 120, 1);
            }

            // Draw reference pattern (no flux) as outline
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.2)';
            ctx.lineWidth = 1;
            ctx.setLineDash([3, 3]);

            ctx.beginPath();
            for (let y = 0; y < patternH; y++) {
                const screenPos = (y / patternH - 0.5) * 10;
                const intrinsicPhase = screenPos * 0.5 * Math.PI;
                const intensity = Math.pow(Math.cos(intrinsicPhase / 2), 2);
                const x = W / 2 + 80 + intensity * 50;

                if (y === 0) {
                    ctx.moveTo(x, patternY + y);
                } else {
                    ctx.lineTo(x, patternY + y);
                }
            }
            ctx.stroke();
            ctx.setLineDash([]);

            // Draw shifted pattern as solid line
            ctx.strokeStyle = '#80cbc4';
            ctx.lineWidth = 2;

            ctx.beginPath();
            for (let y = 0; y < patternH; y++) {
                const screenPos = (y / patternH - 0.5) * 10;
                const intrinsicPhase = screenPos * 0.5 * Math.PI;
                const totalPhase = intrinsicPhase + phaseShift;
                const intensity = Math.pow(Math.cos(totalPhase / 2), 2);
                const x = W / 2 + 80 + intensity * 50;

                if (y === 0) {
                    ctx.moveTo(x, patternY + y);
                } else {
                    ctx.lineTo(x, patternY + y);
                }
            }
            ctx.stroke();

            // Labels
            ctx.fillStyle = '#b2dfdb';
            ctx.font = '10px sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('Interference Pattern', W / 2, 15);
            ctx.fillText('Screen', W / 2 - 60, H - 10);

            ctx.textAlign = 'left';
            ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';
            ctx.fillText('No flux', W / 2 + 135, patternY + patternH / 2 - 10);
            ctx.fillStyle = '#80cbc4';
            ctx.fillText('With flux', W / 2 + 135, patternY + patternH / 2 + 10);

            // Show fringe shift
            if (flux > 0.01) {
                const shiftArrow = flux * 20; // Visual shift amount
                ctx.fillStyle = '#ffc107';
                ctx.font = '11px sans-serif';
                ctx.textAlign = 'center';
                ctx.fillText('↕ Shifted by ' + flux.toFixed(2) + ' fringes', W / 2 - 60, H - 25);
            }
        }

        function animate() {
            time += 0.1;
            drawMain();
            requestAnimationFrame(animate);
        }

        update();
        animate();
    </script>
</body>
</html>
