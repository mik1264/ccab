<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Water Molecule (H₂O)</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            font-family: Arial, sans-serif;
        }
        canvas {
            display: block;
        }
        .info {
            position: absolute;
            top: 20px;
            left: 20px;
            color: #fff;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div class="info">
        <h2>Water Molecule (H₂O)</h2>
        <p>Interactive 3D model showing:</p>
        <ul style="margin: 5px 0; padding-left: 20px;">
            <li>Oxygen atom (red)</li>
            <li>Hydrogen atoms (white)</li>
            <li>Covalent bonds</li>
            <li>104.5° bond angle</li>
        </ul>
    </div>
    <canvas id="canvas"></canvas>
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;

        let rotationX = 0;
        let rotationY = 0;
        let time = 0;

        class Atom {
            constructor(x, y, z, radius, color, label) {
                this.x = x;
                this.y = y;
                this.z = z;
                this.radius = radius;
                this.color = color;
                this.label = label;
            }

            rotate(rx, ry) {
                // Rotate around Y axis
                let x1 = this.x * Math.cos(ry) - this.z * Math.sin(ry);
                let z1 = this.x * Math.sin(ry) + this.z * Math.cos(ry);

                // Rotate around X axis
                let y1 = this.y * Math.cos(rx) - z1 * Math.sin(rx);
                let z2 = this.y * Math.sin(rx) + z1 * Math.cos(rx);

                return {x: x1, y: y1, z: z2};
            }

            project(rx, ry) {
                const rotated = this.rotate(rx, ry);
                const scale = 400 / (400 + rotated.z);
                return {
                    x: centerX + rotated.x * scale,
                    y: centerY + rotated.y * scale,
                    z: rotated.z,
                    scale: scale,
                    color: this.color,
                    label: this.label,
                    radius: this.radius
                };
            }
        }

        // Water molecule structure
        // Oxygen at center
        const oxygen = new Atom(0, 0, 0, 40, '#FF4444', 'O');

        // Hydrogen atoms at 104.5° angle
        const bondLength = 100;
        const bondAngle = 104.5 * Math.PI / 180;

        const h1 = new Atom(
            bondLength * Math.sin(bondAngle / 2),
            bondLength * Math.cos(bondAngle / 2),
            0,
            25,
            '#FFFFFF',
            'H'
        );

        const h2 = new Atom(
            -bondLength * Math.sin(bondAngle / 2),
            bondLength * Math.cos(bondAngle / 2),
            0,
            25,
            '#FFFFFF',
            'H'
        );

        const atoms = [oxygen, h1, h2];

        // Electron cloud particles
        const electronClouds = [];
        for (let i = 0; i < 200; i++) {
            const angle = Math.random() * Math.PI * 2;
            const radius = Math.random() * 60 + 40;
            const height = (Math.random() - 0.5) * 40;
            electronClouds.push({
                angle: angle,
                radius: radius,
                height: height,
                speed: Math.random() * 0.02 + 0.01,
                phase: Math.random() * Math.PI * 2
            });
        }

        function drawBond(from, to, rx, ry) {
            const p1 = from.project(rx, ry);
            const p2 = to.project(rx, ry);

            ctx.beginPath();
            ctx.strokeStyle = 'rgba(200, 200, 255, 0.8)';
            ctx.lineWidth = 4;
            ctx.moveTo(p1.x, p1.y);
            ctx.lineTo(p2.x, p2.y);
            ctx.stroke();

            // Draw bond energy visualization
            const gradient = ctx.createLinearGradient(p1.x, p1.y, p2.x, p2.y);
            gradient.addColorStop(0, 'rgba(255, 100, 100, 0.3)');
            gradient.addColorStop(0.5, 'rgba(255, 255, 100, 0.5)');
            gradient.addColorStop(1, 'rgba(255, 100, 100, 0.3)');

            ctx.strokeStyle = gradient;
            ctx.lineWidth = 8;
            ctx.globalAlpha = 0.3;
            ctx.stroke();
            ctx.globalAlpha = 1;
        }

        function draw() {
            ctx.fillStyle = 'rgba(30, 60, 114, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            rotationX += 0.005;
            rotationY += 0.008;

            // Draw electron clouds
            electronClouds.forEach(cloud => {
                const angle = cloud.angle + time * cloud.speed;
                const x = Math.cos(angle) * cloud.radius;
                const y = cloud.height + Math.sin(time * 2 + cloud.phase) * 10;
                const z = Math.sin(angle) * cloud.radius;

                // Rotate
                const x1 = x * Math.cos(rotationY) - z * Math.sin(rotationY);
                const z1 = x * Math.sin(rotationY) + z * Math.cos(rotationY);
                const y1 = y * Math.cos(rotationX) - z1 * Math.sin(rotationX);
                const z2 = y * Math.sin(rotationX) + z1 * Math.cos(rotationX);

                const scale = 400 / (400 + z2);
                const px = centerX + x1 * scale;
                const py = centerY + y1 * scale;

                ctx.beginPath();
                ctx.arc(px, py, 2 * scale, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(100, 150, 255, ${0.2 * scale})`;
                ctx.fill();
            });

            // Draw bonds
            drawBond(oxygen, h1, rotationX, rotationY);
            drawBond(oxygen, h2, rotationX, rotationY);

            // Sort atoms by z-depth
            const projected = atoms.map(atom => atom.project(rotationX, rotationY));
            projected.sort((a, b) => a.z - b.z);

            // Draw atoms
            projected.forEach(p => {
                // Atom sphere with gradient
                const gradient = ctx.createRadialGradient(
                    p.x - p.radius * p.scale * 0.3,
                    p.y - p.radius * p.scale * 0.3,
                    0,
                    p.x,
                    p.y,
                    p.radius * p.scale
                );

                const lightColor = p.color === '#FF4444' ? '#FF8888' : '#FFFFFF';
                gradient.addColorStop(0, lightColor);
                gradient.addColorStop(1, p.color);

                ctx.beginPath();
                ctx.arc(p.x, p.y, p.radius * p.scale, 0, Math.PI * 2);
                ctx.fillStyle = gradient;
                ctx.fill();

                // Outline
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.5)';
                ctx.lineWidth = 2;
                ctx.stroke();

                // Label
                ctx.fillStyle = '#000';
                ctx.font = `bold ${20 * p.scale}px Arial`;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(p.label, p.x, p.y);
            });

            time += 0.02;
        }

        function animate() {
            draw();
            requestAnimationFrame(animate);
        }

        animate();

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    </script>
</body>
</html>