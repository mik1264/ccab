<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gravitational Slingshot (Gravity Assist)</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: Arial; }
        canvas { display: block; }
        .info { position: absolute; top: 20px; left: 20px; color: #00ff88; background: rgba(0,0,0,0.9); padding: 15px; border-radius: 10px; }
    </style>
</head>
<body>
    <div class="info">
        <h2>Gravitational Slingshot</h2>
        <p>Spacecraft gains speed from planet's gravity</p>
        <p>Used in space missions to save fuel</p>
        <p>Transfers momentum from planet to probe</p>
    </div>
    <canvas id="canvas"></canvas>
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const G = 100;

        class Planet {
            constructor(x, y, vx, vy, mass, radius, color, name) {
                this.x = x;
                this.y = y;
                this.vx = vx;
                this.vy = vy;
                this.mass = mass;
                this.radius = radius;
                this.color = color;
                this.name = name;
                this.trail = [];
            }

            update(dt) {
                this.x += this.vx * dt;
                this.y += this.vy * dt;

                this.trail.push({x: this.x, y: this.y});
                if (this.trail.length > 100) this.trail.shift();
            }

            draw() {
                // Trail
                if (this.trail.length > 1) {
                    ctx.beginPath();
                    this.trail.forEach((p, i) => {
                        if (i === 0) ctx.moveTo(p.x, p.y);
                        else ctx.lineTo(p.x, p.y);
                    });
                    ctx.strokeStyle = this.color + '33';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                }

                // Planet
                const gradient = ctx.createRadialGradient(
                    this.x - this.radius * 0.3,
                    this.y - this.radius * 0.3,
                    0,
                    this.x,
                    this.y,
                    this.radius
                );
                gradient.addColorStop(0, this.color);
                const darkerColor = this.darkenColor(this.color);
                gradient.addColorStop(1, darkerColor);

                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = gradient;
                ctx.fill();
                ctx.strokeStyle = '#fff';
                ctx.lineWidth = 2;
                ctx.stroke();

                // Velocity vector
                ctx.strokeStyle = this.color;
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(this.x, this.y);
                ctx.lineTo(this.x + this.vx * 10, this.y + this.vy * 10);
                ctx.stroke();

                // Label
                ctx.fillStyle = '#fff';
                ctx.font = 'bold 14px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(this.name, this.x, this.y - this.radius - 10);
            }

            darkenColor(color) {
                const hex = color.replace('#', '');
                const r = Math.max(0, parseInt(hex.substr(0, 2), 16) - 60);
                const g = Math.max(0, parseInt(hex.substr(2, 2), 16) - 60);
                const b = Math.max(0, parseInt(hex.substr(4, 2), 16) - 60);
                return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;
            }
        }

        class Spacecraft {
            constructor(x, y, vx, vy) {
                this.x = x;
                this.y = y;
                this.vx = vx;
                this.vy = vy;
                this.trail = [];
                this.initialSpeed = Math.sqrt(vx * vx + vy * vy);
                this.maxSpeed = this.initialSpeed;
            }

            update(planet, dt) {
                const dx = planet.x - this.x;
                const dy = planet.y - this.y;
                const distSq = dx * dx + dy * dy;
                const dist = Math.sqrt(distSq);

                if (dist > 1) {
                    const force = G * planet.mass / distSq;
                    const ax = force * (dx / dist);
                    const ay = force * (dy / dist);

                    this.vx += ax * dt;
                    this.vy += ay * dt;
                }

                this.x += this.vx * dt;
                this.y += this.vy * dt;

                const speed = Math.sqrt(this.vx * this.vx + this.vy * this.vy);
                this.maxSpeed = Math.max(this.maxSpeed, speed);

                this.trail.push({x: this.x, y: this.y, speed: speed});
                if (this.trail.length > 300) this.trail.shift();

                // Reset if off screen
                if (this.x < 0 || this.x > canvas.width || this.y < 0 || this.y > canvas.height) {
                    this.reset();
                }
            }

            reset() {
                this.x = 100;
                this.y = canvas.height / 2;
                this.vx = 3;
                this.vy = -0.5;
                this.trail = [];
                this.maxSpeed = this.initialSpeed;
            }

            draw() {
                // Trail with speed gradient
                if (this.trail.length > 1) {
                    this.trail.forEach((p, i) => {
                        if (i > 0) {
                            const prev = this.trail[i - 1];
                            const speedRatio = p.speed / this.initialSpeed;
                            const hue = Math.min(120, speedRatio * 60);

                            ctx.beginPath();
                            ctx.moveTo(prev.x, prev.y);
                            ctx.lineTo(p.x, p.y);
                            ctx.strokeStyle = `hsl(${hue}, 100%, 50%)`;
                            ctx.lineWidth = 2;
                            ctx.stroke();
                        }
                    });
                }

                // Spacecraft
                ctx.save();
                ctx.translate(this.x, this.y);

                const angle = Math.atan2(this.vy, this.vx);
                ctx.rotate(angle);

                // Body
                ctx.fillStyle = '#CCCCCC';
                ctx.fillRect(-8, -4, 16, 8);

                // Solar panels
                ctx.fillStyle = '#4488FF';
                ctx.fillRect(-12, -2, 3, 4);
                ctx.fillRect(9, -2, 3, 4);

                // Antenna
                ctx.strokeStyle = '#FFF';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(0, -4);
                ctx.lineTo(0, -10);
                ctx.stroke();

                ctx.restore();

                // Speed info
                const speed = Math.sqrt(this.vx * this.vx + this.vy * this.vy);
                const speedGain = ((speed / this.initialSpeed - 1) * 100).toFixed(1);

                ctx.fillStyle = speedGain > 0 ? '#00ff88' : '#ff8888';
                ctx.font = 'bold 14px Arial';
                ctx.textAlign = 'left';
                ctx.fillText(`Speed: ${speed.toFixed(2)} (${speedGain > 0 ? '+' : ''}${speedGain}%)`, this.x + 15, this.y);
            }
        }

        const planet = new Planet(canvas.width * 0.6, canvas.height / 2, 1, 0, 500, 40, '#FF8844', 'Jupiter');
        const spacecraft = new Spacecraft(100, canvas.height / 2, 3, -0.5);

        function draw() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            const dt = 0.1;

            planet.update(dt);
            spacecraft.update(planet, dt);

            planet.draw();
            spacecraft.draw();

            // Info display
            ctx.fillStyle = '#00ff88';
            ctx.font = 'bold 16px Arial';
            ctx.textAlign = 'center';
            const speedIncrease = ((spacecraft.maxSpeed / spacecraft.initialSpeed - 1) * 100).toFixed(1);
            ctx.fillText(`Max Speed Gain: +${speedIncrease}%`, canvas.width / 2, canvas.height - 30);
        }

        function animate() {
            draw();
            requestAnimationFrame(animate);
        }

        animate();
    </script>
</body>
</html>