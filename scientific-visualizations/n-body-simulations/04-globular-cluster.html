<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Globular Cluster</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: Arial; }
        canvas { display: block; }
        .info { position: absolute; top: 20px; left: 20px; color: #ffdd88; background: rgba(0,0,0,0.9); padding: 15px; border-radius: 10px; }
    </style>
</head>
<body>
    <div class="info">
        <h2>Globular Cluster</h2>
        <p>Dense sphere of 100+ stars</p>
        <p>Mutual gravitational attraction</p>
        <p>Complex N-body dynamics</p>
    </div>
    <canvas id="canvas"></canvas>
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        const G = 0.5;

        class Star {
            constructor() {
                const angle = Math.random() * Math.PI * 2;
                const radius = Math.random() * 150 + 50;
                this.x = centerX + Math.cos(angle) * radius;
                this.y = centerY + Math.sin(angle) * radius;

                const speed = Math.random() * 0.5;
                const speedAngle = angle + Math.PI / 2 + (Math.random() - 0.5) * 0.5;
                this.vx = Math.cos(speedAngle) * speed;
                this.vy = Math.sin(speedAngle) * speed;

                this.mass = Math.random() * 2 + 1;
                this.brightness = Math.random();
            }

            update(stars, dt) {
                let ax = 0, ay = 0;

                // Calculate gravitational forces from all other stars
                stars.forEach(other => {
                    if (other === this) return;

                    const dx = other.x - this.x;
                    const dy = other.y - this.y;
                    const distSq = dx * dx + dy * dy;
                    const dist = Math.sqrt(distSq);

                    if (dist > 5) {
                        const force = G * this.mass * other.mass / distSq;
                        ax += (force / this.mass) * (dx / dist);
                        ay += (force / this.mass) * (dy / dist);
                    }
                });

                this.vx += ax * dt;
                this.vy += ay * dt;

                // Slight damping to prevent explosion
                this.vx *= 0.999;
                this.vy *= 0.999;

                this.x += this.vx * dt;
                this.y += this.vy * dt;
            }

            draw() {
                const size = Math.sqrt(this.mass) * 2;

                // Glow
                const gradient = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, size * 3);
                gradient.addColorStop(0, `rgba(255, 255, 200, ${this.brightness})`);
                gradient.addColorStop(0.5, `rgba(255, 200, 100, ${this.brightness * 0.5})`);
                gradient.addColorStop(1, 'rgba(255, 150, 50, 0)');

                ctx.beginPath();
                ctx.arc(this.x, this.y, size * 3, 0, Math.PI * 2);
                ctx.fillStyle = gradient;
                ctx.fill();

                // Core
                ctx.beginPath();
                ctx.arc(this.x, this.y, size, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(255, 255, 255, ${this.brightness})`;
                ctx.fill();
            }
        }

        const stars = Array.from({length: 100}, () => new Star());

        function draw() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Update physics
            const dt = 0.1;
            stars.forEach(star => star.update(stars, dt));

            // Draw all stars
            stars.forEach(star => star.draw());

            // Draw center of mass
            let cmX = 0, cmY = 0, totalMass = 0;
            stars.forEach(star => {
                cmX += star.x * star.mass;
                cmY += star.y * star.mass;
                totalMass += star.mass;
            });
            cmX /= totalMass;
            cmY /= totalMass;

            ctx.beginPath();
            ctx.arc(cmX, cmY, 5, 0, Math.PI * 2);
            ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
            ctx.fill();
            ctx.strokeStyle = '#fff';
            ctx.lineWidth = 2;
            ctx.stroke();
        }

        function animate() {
            draw();
            requestAnimationFrame(animate);
        }

        animate();
    </script>
</body>
</html>