<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Electromagnetic Induction</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: Arial; }
        canvas { display: block; }
        .info { position: absolute; top: 20px; left: 20px; color: #ff88ff; background: rgba(0,0,0,0.9); padding: 15px; border-radius: 10px; }
    </style>
</head>
<body>
    <div class="info">
        <h2>Electromagnetic Induction</h2>
        <p>Faraday's Law: ε = -dΦ/dt</p>
        <p>Moving magnet induces current in coil</p>
        <p>Change in magnetic flux creates EMF</p>
    </div>
    <canvas id="canvas"></canvas>
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const coilX = canvas.width / 2;
        const coilY = canvas.height / 2;
        const coilRadius = 100;
        const coilTurns = 8;

        let magnetY = 100;
        let magnetVelocity = 3;
        let inducedCurrent = 0;

        function drawMagnet(y) {
            const magnetWidth = 80;
            const magnetHeight = 40;
            const x = coilX;

            // North pole
            const northGradient = ctx.createLinearGradient(x - magnetWidth / 2, y, x, y);
            northGradient.addColorStop(0, '#ff4444');
            northGradient.addColorStop(1, '#ff8888');

            ctx.fillStyle = northGradient;
            ctx.fillRect(x - magnetWidth / 2, y - magnetHeight / 2, magnetWidth / 2, magnetHeight);

            // South pole
            const southGradient = ctx.createLinearGradient(x, y, x + magnetWidth / 2, y);
            southGradient.addColorStop(0, '#4444ff');
            southGradient.addColorStop(1, '#8888ff');

            ctx.fillStyle = southGradient;
            ctx.fillRect(x, y - magnetHeight / 2, magnetWidth / 2, magnetHeight);

            // Border
            ctx.strokeStyle = '#fff';
            ctx.lineWidth = 3;
            ctx.strokeRect(x - magnetWidth / 2, y - magnetHeight / 2, magnetWidth, magnetHeight);

            // Labels
            ctx.fillStyle = '#fff';
            ctx.font = 'bold 20px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText('N', x - magnetWidth / 4, y);
            ctx.fillText('S', x + magnetWidth / 4, y);

            // Velocity arrow
            ctx.strokeStyle = '#00ff00';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(x + magnetWidth / 2 + 20, y);
            ctx.lineTo(x + magnetWidth / 2 + 20, y + magnetVelocity * 10);
            ctx.stroke();

            ctx.beginPath();
            ctx.moveTo(x + magnetWidth / 2 + 20, y + magnetVelocity * 10);
            ctx.lineTo(x + magnetWidth / 2 + 15, y + magnetVelocity * 10 - Math.sign(magnetVelocity) * 8);
            ctx.lineTo(x + magnetWidth / 2 + 25, y + magnetVelocity * 10 - Math.sign(magnetVelocity) * 8);
            ctx.closePath();
            ctx.fillStyle = '#00ff00';
            ctx.fill();

            // Magnetic field lines
            for (let angle = 0; angle < Math.PI * 2; angle += Math.PI / 8) {
                const startR = magnetWidth / 2 + 10;
                const endR = magnetWidth / 2 + 60;

                ctx.beginPath();
                const curvePoints = 20;
                for (let i = 0; i <= curvePoints; i++) {
                    const t = i / curvePoints;
                    const r = startR + (endR - startR) * t;
                    const offsetAngle = angle + (Math.PI / 4) * t * (angle < Math.PI ? -1 : 1);
                    const px = x + Math.cos(offsetAngle) * r;
                    const py = y + Math.sin(offsetAngle) * r;

                    if (i === 0) ctx.moveTo(px, py);
                    else ctx.lineTo(px, py);
                }
                ctx.strokeStyle = 'rgba(255, 100, 255, 0.4)';
                ctx.lineWidth = 2;
                ctx.stroke();
            }
        }

        function drawCoil() {
            // Draw coil turns
            for (let i = 0; i < coilTurns; i++) {
                const r = coilRadius + i * 8;
                ctx.beginPath();
                ctx.arc(coilX, coilY, r, 0, Math.PI * 2);
                ctx.strokeStyle = '#ff8800';
                ctx.lineWidth = 4;
                ctx.stroke();
            }

            // Wire connections
            ctx.strokeStyle = '#ff8800';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(coilX - coilRadius, coilY);
            ctx.lineTo(coilX - coilRadius - 50, coilY);
            ctx.stroke();

            ctx.beginPath();
            ctx.moveTo(coilX + coilRadius, coilY);
            ctx.lineTo(coilX + coilRadius + 50, coilY);
            ctx.stroke();

            // Current indicator (ammeter)
            const ammeterX = coilX + coilRadius + 100;
            const ammeterY = coilY;

            ctx.beginPath();
            ctx.arc(ammeterX, ammeterY, 30, 0, Math.PI * 2);
            ctx.strokeStyle = '#fff';
            ctx.lineWidth = 3;
            ctx.stroke();

            // Needle
            const needleAngle = inducedCurrent * 0.5;
            ctx.save();
            ctx.translate(ammeterX, ammeterY);
            ctx.rotate(needleAngle);
            ctx.strokeStyle = '#ff0000';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(0, 0);
            ctx.lineTo(25, 0);
            ctx.stroke();
            ctx.restore();

            // Label
            ctx.fillStyle = '#fff';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('A', ammeterX, ammeterY + 45);

            // Current value
            ctx.fillStyle = inducedCurrent > 0 ? '#00ff00' : (inducedCurrent < 0 ? '#ff0000' : '#888');
            ctx.font = 'bold 14px Arial';
            ctx.fillText(`I = ${inducedCurrent.toFixed(2)}`, ammeterX, ammeterY - 45);
        }

        function draw() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Update magnet position
            magnetY += magnetVelocity;

            // Bounce
            if (magnetY > canvas.height - 50 || magnetY < 50) {
                magnetVelocity *= -1;
            }

            // Calculate induced current based on velocity and proximity to coil
            const distanceToCoil = Math.abs(magnetY - coilY);
            const proximityFactor = Math.exp(-distanceToCoil / 150);
            inducedCurrent = -magnetVelocity * proximityFactor;

            drawCoil();
            drawMagnet(magnetY);

            // Labels
            ctx.fillStyle = '#ff88ff';
            ctx.font = 'bold 16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Induced EMF ∝ Rate of Change of Flux', canvas.width / 2, canvas.height - 40);
        }

        function animate() {
            draw();
            requestAnimationFrame(animate);
        }

        animate();
    </script>
</body>
</html>