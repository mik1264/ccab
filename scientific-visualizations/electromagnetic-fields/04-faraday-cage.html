<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Faraday Cage Effect</title>
    <style>
        body { margin: 0; overflow: hidden; background: #0a0a1a; font-family: Arial; }
        canvas { display: block; }
        .info { position: absolute; top: 20px; left: 20px; color: #88aaff; background: rgba(0,0,0,0.9); padding: 15px; border-radius: 10px; max-width: 300px; }
    </style>
</head>
<body>
    <div class="info">
        <h2>Faraday Cage</h2>
        <p>Conductive enclosure blocks external electric fields</p>
        <p>Fields redistribute on cage surface</p>
        <p>Interior remains field-free</p>
    </div>
    <canvas id="canvas"></canvas>
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        const cageSize = 200;
        const gridSize = 20;

        function isInsideCage(x, y) {
            return Math.abs(x - centerX) < cageSize / 2 && Math.abs(y - centerY) < cageSize / 2;
        }

        function calculateExternalField(x, y) {
            // Uniform field from left
            const baseFieldX = 2;
            const baseFieldY = 0;

            // Modified by cage presence
            if (isInsideCage(x, y)) {
                return {Ex: 0, Ey: 0}; // No field inside
            }

            // Field curves around cage
            const dx = x - centerX;
            const dy = y - centerY;
            const distToCage = Math.max(Math.abs(dx), Math.abs(dy)) - cageSize / 2;

            if (distToCage < 50 && !isInsideCage(x, y)) {
                // Field distortion near cage
                const distortionFactor = Math.exp(-distToCage / 30);
                const angleToCenter = Math.atan2(dy, dx);

                return {
                    Ex: baseFieldX * (1 - distortionFactor) + Math.cos(angleToCenter) * distortionFactor,
                    Ey: baseFieldY + Math.sin(angleToCenter) * distortionFactor
                };
            }

            return {Ex: baseFieldX, Ey: baseFieldY};
        }

        function drawFieldLines() {
            const numLines = 15;
            const startX = 50;

            for (let i = 0; i < numLines; i++) {
                const startY = (canvas.height / numLines) * i + 20;
                const points = [];
                let x = startX;
                let y = startY;

                for (let step = 0; step < 300; step++) {
                    const field = calculateExternalField(x, y);
                    const mag = Math.sqrt(field.Ex * field.Ex + field.Ey * field.Ey);

                    if (mag > 0.01) {
                        x += (field.Ex / mag) * 5;
                        y += (field.Ey / mag) * 5;
                        points.push({x, y});

                        if (x > canvas.width - 50 || x < 0 || y < 0 || y > canvas.height) break;
                    } else {
                        break;
                    }
                }

                // Draw line
                if (points.length > 5) {
                    ctx.beginPath();
                    points.forEach((p, idx) => {
                        if (idx === 0) ctx.moveTo(p.x, p.y);
                        else ctx.lineTo(p.x, p.y);
                    });
                    ctx.strokeStyle = 'rgba(136, 170, 255, 0.5)';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                }
            }
        }

        function drawCage() {
            // Draw cage mesh
            ctx.strokeStyle = '#ffaa00';
            ctx.lineWidth = 3;

            // Vertical bars
            for (let x = centerX - cageSize / 2; x <= centerX + cageSize / 2; x += cageSize / 8) {
                ctx.beginPath();
                ctx.moveTo(x, centerY - cageSize / 2);
                ctx.lineTo(x, centerY + cageSize / 2);
                ctx.stroke();
            }

            // Horizontal bars
            for (let y = centerY - cageSize / 2; y <= centerY + cageSize / 2; y += cageSize / 8) {
                ctx.beginPath();
                ctx.moveTo(centerX - cageSize / 2, y);
                ctx.lineTo(centerX + cageSize / 2, y);
                ctx.stroke();
            }

            // Frame
            ctx.strokeStyle = '#ff8800';
            ctx.lineWidth = 5;
            ctx.strokeRect(centerX - cageSize / 2, centerY - cageSize / 2, cageSize, cageSize);

            // Label
            ctx.fillStyle = '#ffaa00';
            ctx.font = 'bold 14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Faraday Cage', centerX, centerY);
            ctx.fillText('(Field-Free Interior)', centerX, centerY + 20);
        }

        function drawFieldVectors() {
            const spacing = 40;
            for (let x = 0; x < canvas.width; x += spacing) {
                for (let y = 0; y < canvas.height; y += spacing) {
                    const field = calculateExternalField(x, y);
                    const mag = Math.sqrt(field.Ex * field.Ex + field.Ey * field.Ey);

                    if (mag > 0.1) {
                        const arrowLength = Math.min(20, mag * 5);
                        const angle = Math.atan2(field.Ey, field.Ex);

                        ctx.save();
                        ctx.translate(x, y);
                        ctx.rotate(angle);

                        ctx.strokeStyle = 'rgba(100, 150, 255, 0.6)';
                        ctx.lineWidth = 2;
                        ctx.beginPath();
                        ctx.moveTo(0, 0);
                        ctx.lineTo(arrowLength, 0);
                        ctx.stroke();

                        ctx.beginPath();
                        ctx.moveTo(arrowLength, 0);
                        ctx.lineTo(arrowLength - 5, -3);
                        ctx.lineTo(arrowLength - 5, 3);
                        ctx.closePath();
                        ctx.fillStyle = 'rgba(100, 150, 255, 0.6)';
                        ctx.fill();

                        ctx.restore();
                    }
                }
            }
        }

        function draw() {
            ctx.fillStyle = '#0a0a1a';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            drawFieldVectors();
            drawFieldLines();
            drawCage();

            // External field label
            ctx.fillStyle = '#88aaff';
            ctx.font = 'bold 16px Arial';
            ctx.textAlign = 'left';
            ctx.fillText('External E-field â†’', 60, 50);
        }

        draw();
    </script>
</body>
</html>