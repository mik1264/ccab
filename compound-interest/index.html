<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Compound Interest Growth</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { background: #0a0e1a; overflow: hidden; font-family: 'Segoe UI', sans-serif; }
canvas { display: block; }
#title { position: fixed; top: 10px; left: 50%; transform: translateX(-50%); color: #fbbf24; font-size: 20px; font-weight: 700; z-index: 999; text-shadow: 0 0 20px rgba(251,191,36,0.5); font-family: sans-serif; }
#controls { position: fixed; bottom: 10px; left: 50%; transform: translateX(-50%); display: flex; gap: 18px; z-index: 999; background: rgba(0,0,0,0.75); padding: 12px 20px; border-radius: 10px; align-items: center; flex-wrap: wrap; justify-content: center; }
#controls label { color: #ccc; font-size: 12px; display: flex; flex-direction: column; align-items: center; gap: 2px; }
#controls input[type=range] { width: 110px; accent-color: #fbbf24; }
#controls span { color: #fbbf24; font-size: 11px; font-weight: bold; }
#info { position: fixed; top: 50px; right: 15px; color: #ccc; font-size: 12px; z-index: 999; background: rgba(0,0,0,0.65); padding: 12px; border-radius: 8px; line-height: 2; }
#info .val { color: #fbbf24; font-weight: bold; }
#info .compound { color: #4ade80; }
#info .simple { color: #f472b6; }
</style>
</head>
<body>
<a href="../index.html" style="position:fixed;top:10px;left:10px;padding:8px 16px;background:rgba(0,0,0,0.7);color:#fbbf24;text-decoration:none;border-radius:6px;font-size:14px;z-index:999;font-family:sans-serif;">‚Üê Back to Gallery</a>
<div id="title">Compound Interest Growth</div>
<div id="info">
    <div>Compound: <span class="compound" id="compVal">--</span></div>
    <div>Simple: <span class="simple" id="simpVal">--</span></div>
    <div>Difference: <span class="val" id="diffVal">--</span></div>
    <div style="margin-top:4px;font-size:10px;color:#888;">Year: <span id="yearVal" style="color:#fbbf24;">0</span></div>
</div>
<canvas id="canvas"></canvas>
<div id="controls">
    <label>Principal ($) <input type="range" id="principal" min="100" max="50000" step="100" value="1000"><span id="princVal">$1,000</span></label>
    <label>Annual Rate (%) <input type="range" id="rate" min="1" max="25" step="0.5" value="7"><span id="rateVal">7%</span></label>
    <label>Years <input type="range" id="years" min="5" max="60" step="1" value="30"><span id="yearsVal">30</span></label>
    <label>Compounding <input type="range" id="freq" min="1" max="365" step="1" value="12"><span id="freqVal">Monthly</span></label>
</div>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');

function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
resize();
window.addEventListener('resize', resize);

const principalSlider = document.getElementById('principal');
const rateSlider = document.getElementById('rate');
const yearsSlider = document.getElementById('years');
const freqSlider = document.getElementById('freq');

function freqName(n) {
    if (n === 1) return 'Annually';
    if (n === 2) return 'Semi-Annual';
    if (n === 4) return 'Quarterly';
    if (n === 12) return 'Monthly';
    if (n === 52) return 'Weekly';
    if (n === 365) return 'Daily';
    return n + 'x/yr';
}

principalSlider.oninput = () => document.getElementById('princVal').textContent = '$' + Number(principalSlider.value).toLocaleString();
rateSlider.oninput = () => document.getElementById('rateVal').textContent = rateSlider.value + '%';
yearsSlider.oninput = () => document.getElementById('yearsVal').textContent = yearsSlider.value;
freqSlider.oninput = () => document.getElementById('freqVal').textContent = freqName(parseInt(freqSlider.value));

let animYear = 0;
let lastTime = 0;

function compoundInterest(P, r, n, t) {
    return P * Math.pow(1 + r / n, n * t);
}

function simpleInterest(P, r, t) {
    return P * (1 + r * t);
}

function draw(time) {
    const dt = (time - lastTime) / 1000;
    lastTime = time;

    const P = parseFloat(principalSlider.value);
    const r = parseFloat(rateSlider.value) / 100;
    const totalYears = parseInt(yearsSlider.value);
    const n = parseInt(freqSlider.value);

    // Animate year
    if (animYear < totalYears) {
        animYear = Math.min(animYear + dt * 3, totalYears);
    }
    if (animYear > totalYears) animYear = totalYears;

    const W = canvas.width, H = canvas.height;
    ctx.fillStyle = '#0a0e1a';
    ctx.fillRect(0, 0, W, H);

    const chartLeft = W * 0.10;
    const chartRight = W * 0.88;
    const chartTop = H * 0.10;
    const chartBottom = H * 0.72;
    const chartW = chartRight - chartLeft;
    const chartH = chartBottom - chartTop;

    // Compute max value for scale
    const maxComp = compoundInterest(P, r, n, totalYears);
    const maxSimp = simpleInterest(P, r, totalYears);
    const maxVal = Math.max(maxComp, maxSimp) * 1.1;

    const mapX = (yr) => chartLeft + (yr / totalYears) * chartW;
    const mapY = (val) => chartBottom - (val / maxVal) * chartH;

    // Grid
    ctx.strokeStyle = 'rgba(255,255,255,0.05)';
    ctx.lineWidth = 1;
    for (let yr = 0; yr <= totalYears; yr += Math.max(1, Math.floor(totalYears / 10))) {
        const x = mapX(yr);
        ctx.beginPath(); ctx.moveTo(x, chartTop); ctx.lineTo(x, chartBottom); ctx.stroke();
    }
    for (let i = 0; i <= 5; i++) {
        const val = (maxVal / 5) * i;
        const y = mapY(val);
        ctx.beginPath(); ctx.moveTo(chartLeft, y); ctx.lineTo(chartRight, y); ctx.stroke();
        ctx.fillStyle = 'rgba(255,255,255,0.3)';
        ctx.font = '10px sans-serif';
        ctx.textAlign = 'right';
        ctx.fillText('$' + Math.round(val).toLocaleString(), chartLeft - 8, y + 3);
    }

    // Axes
    ctx.strokeStyle = 'rgba(255,255,255,0.3)';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(chartLeft, chartTop);
    ctx.lineTo(chartLeft, chartBottom);
    ctx.lineTo(chartRight, chartBottom);
    ctx.stroke();

    // Year labels
    ctx.fillStyle = 'rgba(255,255,255,0.4)';
    ctx.font = '10px sans-serif';
    ctx.textAlign = 'center';
    for (let yr = 0; yr <= totalYears; yr += Math.max(1, Math.floor(totalYears / 10))) {
        ctx.fillText('Yr ' + yr, mapX(yr), chartBottom + 16);
    }

    // Draw bar chart comparison
    const barW = Math.min(20, chartW / totalYears * 0.35);
    const currentYear = Math.floor(animYear);

    for (let yr = 0; yr <= currentYear; yr++) {
        const compVal = compoundInterest(P, r, n, yr);
        const simpVal = simpleInterest(P, r, yr);
        const x = mapX(yr);

        // Compound bar
        const compH = chartBottom - mapY(compVal);
        const grad1 = ctx.createLinearGradient(0, chartBottom - compH, 0, chartBottom);
        grad1.addColorStop(0, 'rgba(74,222,128,0.8)');
        grad1.addColorStop(1, 'rgba(74,222,128,0.2)');
        ctx.fillStyle = grad1;
        ctx.fillRect(x - barW - 1, chartBottom - compH, barW, compH);

        // Simple bar
        const simpH = chartBottom - mapY(simpVal);
        const grad2 = ctx.createLinearGradient(0, chartBottom - simpH, 0, chartBottom);
        grad2.addColorStop(0, 'rgba(244,114,182,0.8)');
        grad2.addColorStop(1, 'rgba(244,114,182,0.2)');
        ctx.fillStyle = grad2;
        ctx.fillRect(x + 1, chartBottom - simpH, barW, simpH);
    }

    // Draw smooth curves on top
    // Compound interest curve
    ctx.beginPath();
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 3;
    for (let yr = 0; yr <= animYear; yr += 0.1) {
        const val = compoundInterest(P, r, n, yr);
        const x = mapX(yr), y = mapY(val);
        if (yr === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
    }
    ctx.stroke();

    // Compound glow
    ctx.beginPath();
    ctx.strokeStyle = '#4ade80';
    ctx.lineWidth = 8;
    ctx.globalAlpha = 0.15;
    for (let yr = 0; yr <= animYear; yr += 0.1) {
        const val = compoundInterest(P, r, n, yr);
        const x = mapX(yr), y = mapY(val);
        if (yr === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
    }
    ctx.stroke();
    ctx.globalAlpha = 1;

    // Fill area between curves
    ctx.beginPath();
    for (let yr = 0; yr <= animYear; yr += 0.1) {
        const val = compoundInterest(P, r, n, yr);
        const x = mapX(yr), y = mapY(val);
        if (yr === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
    }
    for (let yr = animYear; yr >= 0; yr -= 0.1) {
        const val = simpleInterest(P, r, yr);
        const x = mapX(yr), y = mapY(val);
        ctx.lineTo(x, y);
    }
    ctx.closePath();
    ctx.fillStyle = 'rgba(251,191,36,0.06)';
    ctx.fill();

    // Simple interest curve
    ctx.beginPath();
    ctx.strokeStyle = '#f472b6';
    ctx.lineWidth = 3;
    for (let yr = 0; yr <= animYear; yr += 0.1) {
        const val = simpleInterest(P, r, yr);
        const x = mapX(yr), y = mapY(val);
        if (yr === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
    }
    ctx.stroke();

    // End points with values
    if (animYear > 0) {
        const cEnd = compoundInterest(P, r, n, animYear);
        const sEnd = simpleInterest(P, r, animYear);

        // Compound end point
        ctx.beginPath();
        ctx.arc(mapX(animYear), mapY(cEnd), 6, 0, Math.PI * 2);
        ctx.fillStyle = '#4ade80';
        ctx.fill();

        // Simple end point
        ctx.beginPath();
        ctx.arc(mapX(animYear), mapY(sEnd), 6, 0, Math.PI * 2);
        ctx.fillStyle = '#f472b6';
        ctx.fill();

        // Value labels
        ctx.fillStyle = '#4ade80';
        ctx.font = 'bold 13px sans-serif';
        ctx.textAlign = 'left';
        ctx.fillText('$' + Math.round(cEnd).toLocaleString(), mapX(animYear) + 12, mapY(cEnd) + 5);

        ctx.fillStyle = '#f472b6';
        ctx.fillText('$' + Math.round(sEnd).toLocaleString(), mapX(animYear) + 12, mapY(sEnd) + 5);

        // Update info panel
        document.getElementById('compVal').textContent = '$' + Math.round(cEnd).toLocaleString();
        document.getElementById('simpVal').textContent = '$' + Math.round(sEnd).toLocaleString();
        document.getElementById('diffVal').textContent = '$' + Math.round(cEnd - sEnd).toLocaleString();
        document.getElementById('yearVal').textContent = Math.floor(animYear);
    }

    // Legend
    ctx.font = 'bold 13px sans-serif';
    const legX = chartLeft + 20, legY = chartTop + 25;
    ctx.fillStyle = '#4ade80';
    ctx.fillRect(legX, legY - 5, 16, 3);
    ctx.fillText('Compound Interest', legX + 22, legY);

    ctx.fillStyle = '#f472b6';
    ctx.fillRect(legX, legY + 15, 16, 3);
    ctx.fillText('Simple Interest', legX + 22, legY + 20);

    // Coin stack visualization at the bottom
    const coinAreaTop = chartBottom + 40;
    const coinAreaH = H - coinAreaTop - 80;
    if (coinAreaH > 50 && animYear > 0) {
        const cEnd = compoundInterest(P, r, n, animYear);
        const sEnd = simpleInterest(P, r, animYear);
        const maxCoin = Math.max(cEnd, sEnd);

        const cX = W * 0.35, sX = W * 0.65;
        const cCoinH = (cEnd / maxCoin) * coinAreaH;
        const sCoinH = (sEnd / maxCoin) * coinAreaH;

        // Compound stack
        const numCoins = Math.min(30, Math.floor(cCoinH / 6));
        for (let i = 0; i < numCoins; i++) {
            const y = H - 80 - i * (cCoinH / numCoins);
            const w = 60 + Math.sin(i * 0.3) * 5;
            ctx.beginPath();
            ctx.ellipse(cX, y, w / 2, 4, 0, 0, Math.PI * 2);
            const brightness = 0.3 + (i / numCoins) * 0.7;
            ctx.fillStyle = `rgba(74,222,128,${brightness * 0.6})`;
            ctx.fill();
            ctx.strokeStyle = `rgba(74,222,128,${brightness})`;
            ctx.lineWidth = 1;
            ctx.stroke();
        }
        ctx.fillStyle = '#4ade80';
        ctx.font = 'bold 12px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText('Compound', cX, H - 55);

        // Simple stack
        const numCoins2 = Math.min(30, Math.floor(sCoinH / 6));
        for (let i = 0; i < numCoins2; i++) {
            const y = H - 80 - i * (sCoinH / numCoins2);
            const w = 60 + Math.sin(i * 0.3) * 5;
            ctx.beginPath();
            ctx.ellipse(sX, y, w / 2, 4, 0, 0, Math.PI * 2);
            const brightness = 0.3 + (i / numCoins2) * 0.7;
            ctx.fillStyle = `rgba(244,114,182,${brightness * 0.6})`;
            ctx.fill();
            ctx.strokeStyle = `rgba(244,114,182,${brightness})`;
            ctx.lineWidth = 1;
            ctx.stroke();
        }
        ctx.fillStyle = '#f472b6';
        ctx.fillText('Simple', sX, H - 55);
    }

    // Axis labels
    ctx.fillStyle = 'rgba(255,255,255,0.4)';
    ctx.font = '12px sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Years', chartLeft + chartW / 2, chartBottom + 32);

    requestAnimationFrame(draw);
}

// Reset animation on slider change
[principalSlider, rateSlider, yearsSlider, freqSlider].forEach(s => {
    s.addEventListener('input', () => { animYear = 0; });
});

requestAnimationFrame(draw);
</script>
</body>
</html>
