<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>66. The Paradox of Tolerance - Surprising Paradoxes</title>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --tolerant: #4CAF50;
            --moderate: #FFC107;
            --intolerant: #f44336;
            --background: #1a1a2e;
            --card-bg: #16213e;
            --text: #eee;
            --accent: #e94560;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Nunito', sans-serif;
            background: var(--background);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
        }
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--accent);
            text-decoration: none;
            font-weight: 500;
            margin-bottom: 20px;
            padding: 10px 20px;
            background: rgba(233,69,96,0.1);
            border-radius: 30px;
            transition: all 0.3s ease;
        }
        .back-link:hover {
            background: rgba(233,69,96,0.2);
            transform: translateX(-5px);
        }
        h1 {
            font-family: 'Lora', serif;
            font-size: 2.5rem;
            color: var(--accent);
            margin-bottom: 10px;
            text-align: center;
        }
        .subtitle {
            text-align: center;
            color: #aaa;
            font-size: 1.2rem;
            margin-bottom: 30px;
        }
        .simulation-container {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 30px;
            margin-bottom: 30px;
        }
        @media (max-width: 900px) {
            .simulation-container {
                grid-template-columns: 1fr;
            }
        }
        .canvas-wrapper {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            position: relative;
        }
        #simulationCanvas {
            width: 100%;
            height: 400px;
            border-radius: 10px;
            background: #0f0f23;
        }
        .stats-bar {
            display: flex;
            justify-content: space-around;
            margin-top: 15px;
            padding: 15px;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
        }
        .stat-item {
            text-align: center;
        }
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
        }
        .stat-label {
            font-size: 0.85rem;
            color: #888;
        }
        .tolerant-stat { color: var(--tolerant); }
        .moderate-stat { color: var(--moderate); }
        .intolerant-stat { color: var(--intolerant); }
        .controls-panel {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
        }
        .control-group {
            margin-bottom: 20px;
        }
        .control-label {
            display: block;
            margin-bottom: 8px;
            color: #aaa;
            font-size: 0.9rem;
        }
        input[type="range"] {
            width: 100%;
            height: 8px;
            background: #0f0f23;
            border-radius: 4px;
            -webkit-appearance: none;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: var(--accent);
            border-radius: 50%;
            cursor: pointer;
        }
        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            font-family: inherit;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
            min-width: 100px;
        }
        .btn-primary {
            background: var(--accent);
            color: white;
        }
        .btn-primary:hover {
            transform: scale(1.05);
        }
        .btn-secondary {
            background: rgba(255,255,255,0.1);
            color: white;
        }
        .scenario-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }
        .scenario-btn {
            padding: 10px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            color: white;
            cursor: pointer;
            font-family: inherit;
            font-size: 0.85rem;
            transition: all 0.3s;
        }
        .scenario-btn:hover {
            background: rgba(255,255,255,0.15);
        }
        .scenario-btn.active {
            border-color: var(--accent);
            background: rgba(233,69,96,0.2);
        }
        .legend {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
        }
        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        .outcome-message {
            background: rgba(0,0,0,0.5);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-top: 15px;
            display: none;
        }
        .outcome-message h3 {
            font-size: 1.3rem;
            margin-bottom: 8px;
        }
        .outcome-tolerant { border-left: 4px solid var(--tolerant); }
        .outcome-intolerant { border-left: 4px solid var(--intolerant); }
        .content-section {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 25px;
        }
        .content-section h2 {
            font-family: 'Lora', serif;
            color: var(--accent);
            margin-bottom: 15px;
            font-size: 1.5rem;
        }
        .content-section p {
            line-height: 1.8;
            color: #ccc;
            margin-bottom: 15px;
        }
        .quote-box {
            background: rgba(0,0,0,0.3);
            border-left: 4px solid var(--accent);
            padding: 20px;
            margin: 20px 0;
            font-style: italic;
            line-height: 1.7;
        }
        .quote-attribution {
            margin-top: 10px;
            font-style: normal;
            font-weight: 600;
            color: var(--accent);
        }
        .mechanism-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .mechanism-step {
            background: rgba(0,0,0,0.2);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        .step-number {
            width: 35px;
            height: 35px;
            background: var(--accent);
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin-bottom: 10px;
        }
        .mechanism-step h4 {
            color: white;
            margin-bottom: 8px;
        }
        .mechanism-step p {
            font-size: 0.9rem;
            margin: 0;
        }
        .perspectives-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .perspective-card {
            background: rgba(0,0,0,0.2);
            border-radius: 15px;
            padding: 25px;
            border-top: 3px solid var(--accent);
        }
        .perspective-card h4 {
            color: white;
            margin-bottom: 10px;
        }
        .perspective-card p {
            margin: 0;
            font-size: 0.95rem;
        }
        .context-box {
            background: linear-gradient(135deg, rgba(233,69,96,0.1), rgba(233,69,96,0.05));
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
        }
        .context-box h4 {
            color: var(--accent);
            margin-bottom: 10px;
        }
        .generation-counter {
            font-size: 1.1rem;
            color: var(--accent);
            text-align: center;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">
            <span>←</span> Back to Paradoxes
        </a>

        <h1>66. The Paradox of Tolerance</h1>
        <p class="subtitle">When tolerance enables its own destruction</p>

        <div class="simulation-container">
            <div class="canvas-wrapper">
                <canvas id="simulationCanvas"></canvas>
                <div class="stats-bar">
                    <div class="stat-item">
                        <div class="stat-value tolerant-stat" id="tolerantCount">0</div>
                        <div class="stat-label">Tolerant</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value moderate-stat" id="moderateCount">0</div>
                        <div class="stat-label">Moderate</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value intolerant-stat" id="intolerantCount">0</div>
                        <div class="stat-label">Intolerant</div>
                    </div>
                </div>
                <div class="generation-counter">Generation: <span id="generation">0</span></div>
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-dot" style="background: var(--tolerant)"></div>
                        <span>Tolerant (accepts all views)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot" style="background: var(--moderate)"></div>
                        <span>Moderate (defends tolerance)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot" style="background: var(--intolerant)"></div>
                        <span>Intolerant (suppresses others)</span>
                    </div>
                </div>
                <div id="outcomeMessage" class="outcome-message">
                    <h3 id="outcomeTitle"></h3>
                    <p id="outcomeText"></p>
                </div>
            </div>

            <div class="controls-panel">
                <h3 style="margin-bottom: 20px; color: var(--accent);">Simulation Controls</h3>
                
                <div class="control-group">
                    <label class="control-label">Intolerant Influence Strength: <span id="influenceValue">2</span>x</label>
                    <input type="range" id="influenceSlider" min="1" max="5" value="2" step="0.5">
                </div>

                <div class="control-group">
                    <label class="control-label">Initial Intolerant Population: <span id="intolerantValue">5</span>%</label>
                    <input type="range" id="intolerantSlider" min="1" max="20" value="5">
                </div>

                <div class="control-group">
                    <label class="control-label">Simulation Speed</label>
                    <input type="range" id="speedSlider" min="1" max="10" value="5">
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" id="startBtn">Start</button>
                    <button class="btn btn-secondary" id="resetBtn">Reset</button>
                </div>

                <div class="control-group" style="margin-top: 20px;">
                    <label class="control-label">Scenarios</label>
                    <div class="scenario-buttons">
                        <button class="scenario-btn active" data-scenario="unlimited">Unlimited Tolerance</button>
                        <button class="scenario-btn" data-scenario="defended">Defended Tolerance</button>
                        <button class="scenario-btn" data-scenario="outbreak">Intolerance Outbreak</button>
                        <button class="scenario-btn" data-scenario="balanced">Balanced Society</button>
                    </div>
                </div>

                <div style="margin-top: 20px; padding: 15px; background: rgba(0,0,0,0.2); border-radius: 10px; font-size: 0.85rem; color: #aaa;">
                    <strong style="color: white;">How it works:</strong><br>
                    Agents interact with neighbors. Intolerant agents aggressively convert others. 
                    Tolerant agents accept all views (including intolerance). 
                    Moderate agents resist conversion and can convert intolerant neighbors back.
                </div>
            </div>
        </div>

        <div class="content-section">
            <h2>The Famous Footnote</h2>
            <div class="quote-box">
                "Unlimited tolerance must lead to the disappearance of tolerance. If we extend unlimited tolerance even to those who are intolerant, if we are not prepared to defend a tolerant society against the onslaught of the intolerant, then the tolerant will be destroyed, and tolerance with them."
                <br><br>
                "We should claim that any movement preaching intolerance places itself outside the law, and we should consider incitement to intolerance and persecution as criminal, in the same way as we should consider incitement to murder, or to kidnapping, or to the revival of the slave trade, as criminal."
                <div class="quote-attribution">— Karl Popper, The Open Society and Its Enemies (1945)</div>
            </div>
            <p>
                This passage appears not in the main text but in a footnote (Chapter 7, Note 4) of Popper's magnum opus. Written in 1945 as World War II ended, Popper—an Austrian philosopher of Jewish descent—was grappling with how "a German public full of otherwise good people allowed Hitler to come to power."
            </p>
        </div>

        <div class="content-section">
            <h2>How the Paradox Works</h2>
            <div class="mechanism-grid">
                <div class="mechanism-step">
                    <div class="step-number">1</div>
                    <h4>Tolerance Opens Doors</h4>
                    <p>A tolerant society allows all viewpoints, including intolerant ones, to be expressed freely.</p>
                </div>
                <div class="mechanism-step">
                    <div class="step-number">2</div>
                    <h4>Exploitation Begins</h4>
                    <p>Intolerant groups exploit this openness to spread their ideology and recruit followers.</p>
                </div>
                <div class="mechanism-step">
                    <div class="step-number">3</div>
                    <h4>Asymmetric Warfare</h4>
                    <p>Tolerant people tolerate intolerance, but intolerant people actively suppress tolerance.</p>
                </div>
                <div class="mechanism-step">
                    <div class="step-number">4</div>
                    <h4>Critical Mass</h4>
                    <p>Once intolerant groups gain enough power, they dismantle the tolerant system entirely.</p>
                </div>
            </div>
        </div>

        <div class="content-section">
            <h2>Popper's Nuance (Often Missed)</h2>
            <div class="context-box">
                <h4>Not About Suppressing Ideas</h4>
                <p>Popper continues: "I do not imply that we should always suppress the utterance of intolerant philosophies; <strong>as long as we can counter them by rational argument</strong> and keep them in check by public opinion, suppression would certainly be most unwise."</p>
                <p style="margin-top: 10px;">The key trigger for action is when intolerant groups <strong>"are not prepared to meet us on the level of rational argument, but begin by denouncing all argument"</strong>—when they answer arguments with "fists or pistols."</p>
            </div>
        </div>

        <div class="content-section">
            <h2>Philosophical Perspectives</h2>
            <div class="perspectives-grid">
                <div class="perspective-card">
                    <h4>Karl Popper (1945)</h4>
                    <p>Tolerance must be defended. A society that extends unlimited tolerance to the intolerant will ultimately be destroyed. Claim the right not to tolerate those who preach violence.</p>
                </div>
                <div class="perspective-card">
                    <h4>John Rawls (1971)</h4>
                    <p>In "A Theory of Justice," Rawls argues a just society should tolerate even the intolerant—but reserves the right to self-preservation when intolerance threatens liberty and security.</p>
                </div>
                <div class="perspective-card">
                    <h4>The Critique</h4>
                    <p>Critics warn the paradox can be weaponized: Who decides what counts as "intolerant"? Vague definitions enable suppressing legitimate dissent under the guise of protecting tolerance.</p>
                </div>
                <div class="perspective-card">
                    <h4>Game Theory View</h4>
                    <p>Like the Prisoner's Dilemma: if tolerant people cooperate while intolerant people defect, defectors win. Stable cooperation requires a mechanism to punish defection.</p>
                </div>
            </div>
        </div>

        <div class="content-section">
            <h2>The Simulation Explained</h2>
            <p>
                The visualization above models a society as a grid of agents. <strong style="color: var(--tolerant);">Green (Tolerant)</strong> agents accept all views—even intolerance. <strong style="color: var(--intolerant);">Red (Intolerant)</strong> agents actively try to convert their neighbors and resist being converted. <strong style="color: var(--moderate);">Yellow (Moderate)</strong> agents defend tolerance by resisting conversion AND converting intolerant neighbors back.
            </p>
            <p>
                Try the "Unlimited Tolerance" scenario to watch Popper's prediction unfold: without defenders, intolerance spreads like a contagion. Then try "Defended Tolerance" to see how moderates who actively resist can maintain a stable, tolerant society.
            </p>
            <p>
                <strong>The key insight:</strong> Pure tolerance is inherently unstable. Stability requires some members willing to actively defend tolerant norms—not through intolerance, but through principled resistance to those who would destroy the open society.
            </p>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('simulationCanvas');
        const ctx = canvas.getContext('2d');

        // High DPI support
        function resizeCanvas() {
            const rect = canvas.getBoundingClientRect();
            const dpr = window.devicePixelRatio || 1;
            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            ctx.scale(dpr, dpr);
            canvas.style.width = rect.width + 'px';
            canvas.style.height = rect.height + 'px';
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Agent types
        const TOLERANT = 0;
        const MODERATE = 1;
        const INTOLERANT = 2;

        // Colors
        const colors = ['#4CAF50', '#FFC107', '#f44336'];

        // Grid setup
        const CELL_SIZE = 8;
        let cols, rows;
        let grid = [];
        let running = false;
        let generation = 0;
        let animationId = null;

        // Settings
        let influenceStrength = 2;
        let initialIntolerant = 5;
        let speed = 5;
        let currentScenario = 'unlimited';

        function initGrid() {
            const rect = canvas.getBoundingClientRect();
            cols = Math.floor(rect.width / CELL_SIZE);
            rows = Math.floor(rect.height / CELL_SIZE);
            grid = [];
            generation = 0;

            const scenarios = {
                unlimited: { tolerant: 95, moderate: 0, intolerant: 5 },
                defended: { tolerant: 70, moderate: 25, intolerant: 5 },
                outbreak: { tolerant: 80, moderate: 5, intolerant: 15 },
                balanced: { tolerant: 50, moderate: 40, intolerant: 10 }
            };

            const s = scenarios[currentScenario];
            // Override intolerant with slider value
            const intPct = currentScenario === 'unlimited' ? initialIntolerant : s.intolerant;
            const modPct = s.moderate;
            const tolPct = 100 - intPct - modPct;

            for (let y = 0; y < rows; y++) {
                grid[y] = [];
                for (let x = 0; x < cols; x++) {
                    const r = Math.random() * 100;
                    if (r < intPct) {
                        grid[y][x] = INTOLERANT;
                    } else if (r < intPct + modPct) {
                        grid[y][x] = MODERATE;
                    } else {
                        grid[y][x] = TOLERANT;
                    }
                }
            }

            hideOutcome();
            updateStats();
            draw();
        }

        function countNeighbors(x, y) {
            let counts = [0, 0, 0];
            for (let dy = -1; dy <= 1; dy++) {
                for (let dx = -1; dx <= 1; dx++) {
                    if (dx === 0 && dy === 0) continue;
                    const nx = (x + dx + cols) % cols;
                    const ny = (y + dy + rows) % rows;
                    counts[grid[ny][nx]]++;
                }
            }
            return counts;
        }

        function step() {
            const newGrid = grid.map(row => [...row]);

            for (let y = 0; y < rows; y++) {
                for (let x = 0; x < cols; x++) {
                    const current = grid[y][x];
                    const neighbors = countNeighbors(x, y);

                    if (current === TOLERANT) {
                        // Tolerant: easily converted by intolerant (asymmetric warfare)
                        const intolerantInfluence = neighbors[INTOLERANT] * influenceStrength;
                        const moderateInfluence = neighbors[MODERATE] * 0.5;
                        
                        if (intolerantInfluence > 2 && Math.random() < 0.3 * (intolerantInfluence / 8)) {
                            newGrid[y][x] = INTOLERANT;
                        } else if (moderateInfluence > 1 && Math.random() < 0.1) {
                            // Sometimes tolerant become moderate (learn to defend)
                            newGrid[y][x] = MODERATE;
                        }
                    } else if (current === MODERATE) {
                        // Moderate: resists conversion, can convert intolerant back
                        const intolerantInfluence = neighbors[INTOLERANT] * influenceStrength;
                        // Harder to convert - moderates resist
                        if (intolerantInfluence > 5 && Math.random() < 0.1) {
                            newGrid[y][x] = INTOLERANT;
                        }
                    } else if (current === INTOLERANT) {
                        // Intolerant: can be converted back by strong moderate presence
                        const moderateInfluence = neighbors[MODERATE];
                        if (moderateInfluence > 3 && Math.random() < 0.15) {
                            newGrid[y][x] = MODERATE;
                        }
                    }
                }
            }

            grid = newGrid;
            generation++;
            document.getElementById('generation').textContent = generation;
            updateStats();
            checkOutcome();
        }

        function updateStats() {
            let counts = [0, 0, 0];
            for (let y = 0; y < rows; y++) {
                for (let x = 0; x < cols; x++) {
                    counts[grid[y][x]]++;
                }
            }
            const total = cols * rows;
            document.getElementById('tolerantCount').textContent = Math.round(counts[TOLERANT] / total * 100) + '%';
            document.getElementById('moderateCount').textContent = Math.round(counts[MODERATE] / total * 100) + '%';
            document.getElementById('intolerantCount').textContent = Math.round(counts[INTOLERANT] / total * 100) + '%';
        }

        function checkOutcome() {
            let counts = [0, 0, 0];
            for (let y = 0; y < rows; y++) {
                for (let x = 0; x < cols; x++) {
                    counts[grid[y][x]]++;
                }
            }
            const total = cols * rows;
            const intolerantPct = counts[INTOLERANT] / total * 100;
            const tolerantPct = (counts[TOLERANT] + counts[MODERATE]) / total * 100;

            if (intolerantPct > 90) {
                showOutcome('intolerant', 'Tolerance Destroyed', 
                    'The intolerant have taken over. Popper\'s warning came true: unlimited tolerance led to its own destruction.');
                stopSimulation();
            } else if (generation > 200 && tolerantPct > 70) {
                showOutcome('tolerant', 'Tolerance Defended', 
                    'The society maintained its tolerant character. Active defense of tolerance created stability.');
                stopSimulation();
            }
        }

        function showOutcome(type, title, text) {
            const el = document.getElementById('outcomeMessage');
            el.style.display = 'block';
            el.className = 'outcome-message outcome-' + type;
            document.getElementById('outcomeTitle').textContent = title;
            document.getElementById('outcomeText').textContent = text;
        }

        function hideOutcome() {
            document.getElementById('outcomeMessage').style.display = 'none';
        }

        function draw() {
            const rect = canvas.getBoundingClientRect();
            ctx.clearRect(0, 0, rect.width, rect.height);

            for (let y = 0; y < rows; y++) {
                for (let x = 0; x < cols; x++) {
                    ctx.fillStyle = colors[grid[y][x]];
                    ctx.fillRect(x * CELL_SIZE + 1, y * CELL_SIZE + 1, CELL_SIZE - 2, CELL_SIZE - 2);
                }
            }
        }

        function animate() {
            if (!running) return;
            step();
            draw();
            setTimeout(() => {
                animationId = requestAnimationFrame(animate);
            }, 200 - speed * 18);
        }

        function startSimulation() {
            if (running) return;
            running = true;
            document.getElementById('startBtn').textContent = 'Pause';
            animate();
        }

        function stopSimulation() {
            running = false;
            document.getElementById('startBtn').textContent = 'Start';
            if (animationId) {
                cancelAnimationFrame(animationId);
            }
        }

        // Event listeners
        document.getElementById('startBtn').addEventListener('click', () => {
            if (running) {
                stopSimulation();
            } else {
                startSimulation();
            }
        });

        document.getElementById('resetBtn').addEventListener('click', () => {
            stopSimulation();
            initGrid();
        });

        document.getElementById('influenceSlider').addEventListener('input', (e) => {
            influenceStrength = parseFloat(e.target.value);
            document.getElementById('influenceValue').textContent = influenceStrength;
        });

        document.getElementById('intolerantSlider').addEventListener('input', (e) => {
            initialIntolerant = parseInt(e.target.value);
            document.getElementById('intolerantValue').textContent = initialIntolerant;
        });

        document.getElementById('speedSlider').addEventListener('input', (e) => {
            speed = parseInt(e.target.value);
        });

        document.querySelectorAll('.scenario-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.scenario-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentScenario = btn.dataset.scenario;
                stopSimulation();
                initGrid();
            });
        });

        // Initialize
        initGrid();
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
