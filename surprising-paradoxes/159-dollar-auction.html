<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Dollar Auction Paradox - Surprising Paradoxes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #e8e8e8;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            font-size: 2.2rem;
            background: linear-gradient(135deg, #27ae60, #f1c40f, #e74c3c);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #aaa;
            font-size: 1.1rem;
        }

        .back-link {
            display: inline-block;
            color: #27ae60;
            text-decoration: none;
            margin-bottom: 20px;
            transition: transform 0.2s;
        }

        .back-link:hover {
            transform: translateX(-5px);
        }

        /* Auction Stage */
        .auction-stage {
            background: linear-gradient(180deg, #1a2a1a 0%, #0d1a0d 100%);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 25px;
            border: 2px solid #27ae60;
            position: relative;
        }

        .dollar-bill {
            width: 200px;
            height: 85px;
            background: linear-gradient(135deg, #228B22 0%, #006400 50%, #004d00 100%);
            border-radius: 8px;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: bold;
            color: #98FB98;
            border: 3px solid #32CD32;
            box-shadow: 0 5px 20px rgba(39,174,96,0.4);
            position: relative;
        }

        .dollar-bill::before {
            content: '$1';
            position: absolute;
            top: 5px;
            left: 10px;
            font-size: 0.8rem;
        }

        .dollar-bill::after {
            content: 'ONE DOLLAR';
            position: absolute;
            bottom: 5px;
            font-size: 0.6rem;
            letter-spacing: 2px;
        }

        .status-msg {
            text-align: center;
            font-size: 1.2rem;
            color: #f1c40f;
            margin-bottom: 20px;
            min-height: 30px;
        }

        /* Bidders */
        .bidders {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 20px;
            align-items: center;
            margin-bottom: 25px;
        }

        .bidder {
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .bidder.you { border: 2px solid #3498db; }
        .bidder.opponent { border: 2px solid #e74c3c; }
        .bidder.winner { animation: winPulse 0.5s ease 3; }

        @keyframes winPulse {
            0%, 100% { box-shadow: 0 0 10px rgba(39,174,96,0.5); }
            50% { box-shadow: 0 0 30px rgba(39,174,96,0.8); }
        }

        .bidder-label {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .bidder.you .bidder-label { color: #3498db; }
        .bidder.opponent .bidder-label { color: #e74c3c; }

        .current-bid {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .profit-loss {
            font-size: 1.2rem;
            padding: 8px 15px;
            border-radius: 20px;
            display: inline-block;
        }

        .profit-loss.profit { background: rgba(39,174,96,0.3); color: #27ae60; }
        .profit-loss.loss { background: rgba(231,76,60,0.3); color: #e74c3c; }
        .profit-loss.neutral { background: rgba(255,255,255,0.1); color: #aaa; }

        .vs-circle {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #f1c40f, #e67e22);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            color: #1a1a2e;
        }

        /* Bid Controls */
        .bid-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .btn {
            padding: 12px 25px;
            font-size: 1rem;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: default;
        }

        .btn-bid {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }

        .btn-fold {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }

        .btn-bid:hover:not(:disabled), .btn-fold:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }

        .btn-reset {
            background: linear-gradient(135deg, #34495e, #2c3e50);
            color: white;
        }

        .btn-simulate {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            color: white;
        }

        /* Auctioneer Profit */
        .auctioneer-box {
            background: rgba(241,196,15,0.1);
            border: 1px solid rgba(241,196,15,0.3);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            margin-bottom: 20px;
        }

        .auctioneer-label {
            color: #f1c40f;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .auctioneer-profit {
            font-size: 1.8rem;
            font-weight: bold;
            color: #27ae60;
        }

        /* Bid History */
        .history-panel {
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            padding: 20px;
            max-height: 150px;
            overflow-y: auto;
        }

        .history-title {
            color: #aaa;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .history-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .bid-chip {
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.85rem;
        }

        .bid-chip.you { background: rgba(52,152,219,0.3); color: #3498db; }
        .bid-chip.opponent { background: rgba(231,76,60,0.3); color: #e74c3c; }

        /* Theory Box */
        .theory-box {
            background: linear-gradient(135deg, rgba(231,76,60,0.1), rgba(192,57,43,0.1));
            border: 1px solid rgba(231,76,60,0.3);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .theory-title {
            color: #e74c3c;
            font-size: 1.2rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .theory-content {
            line-height: 1.7;
            color: #ccc;
        }

        .escalation-visual {
            display: flex;
            align-items: flex-end;
            justify-content: center;
            gap: 5px;
            height: 100px;
            margin: 20px 0;
            padding: 10px;
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
        }

        .escalation-bar {
            width: 30px;
            background: linear-gradient(180deg, #e74c3c, #c0392b);
            border-radius: 5px 5px 0 0;
            transition: height 0.3s ease;
        }

        .threshold-line {
            position: relative;
            width: 100%;
            height: 2px;
            background: #27ae60;
            margin: 20px 0;
        }

        .threshold-line::after {
            content: '$1 threshold';
            position: absolute;
            right: 0;
            top: -20px;
            color: #27ae60;
            font-size: 0.8rem;
        }

        /* Psychology Box */
        .psychology-box {
            background: linear-gradient(135deg, rgba(155,89,182,0.1), rgba(142,68,173,0.1));
            border: 1px solid rgba(155,89,182,0.3);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .psychology-title {
            color: #9b59b6;
            font-size: 1.2rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .psychology-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .psych-item {
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            padding: 15px;
        }

        .psych-item h4 {
            color: #9b59b6;
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .psych-item p {
            color: #aaa;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        /* Insight Box */
        .insight-box {
            background: linear-gradient(135deg, rgba(39,174,96,0.1), rgba(46,204,113,0.1));
            border: 1px solid rgba(39,174,96,0.3);
            border-radius: 15px;
            padding: 25px;
        }

        .insight-title {
            color: #27ae60;
            font-size: 1.2rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .insight-content {
            line-height: 1.7;
            color: #ccc;
        }

        .highlight {
            color: #f1c40f;
            font-weight: bold;
        }

        .stats-row {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #f1c40f;
        }

        .stat-label {
            color: #888;
            font-size: 0.85rem;
        }

        @media (max-width: 600px) {
            .bidders { grid-template-columns: 1fr; }
            .vs-circle { margin: 10px auto; }
            .current-bid { font-size: 2rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">‚Üê Back to Paradoxes</a>

        <header>
            <h1>üíµ The Dollar Auction Paradox</h1>
            <p class="subtitle">How rational bidding leads to irrational losses</p>
        </header>

        <!-- Auction Stage -->
        <div class="auction-stage">
            <div class="dollar-bill">üíµ</div>

            <div class="status-msg" id="status">Make a bid to start the auction!</div>

            <div class="bidders">
                <div class="bidder you" id="playerBidder">
                    <div class="bidder-label">üë§ YOU</div>
                    <div class="current-bid" id="playerBid">$0.00</div>
                    <div class="profit-loss neutral" id="playerProfit">
                        If win: $0.00
                    </div>
                </div>

                <div class="vs-circle">VS</div>

                <div class="bidder opponent" id="opponentBidder">
                    <div class="bidder-label">ü§ñ OPPONENT</div>
                    <div class="current-bid" id="opponentBid">$0.00</div>
                    <div class="profit-loss neutral" id="opponentProfit">
                        If win: $0.00
                    </div>
                </div>
            </div>

            <div class="auctioneer-box">
                <div class="auctioneer-label">üé© Auctioneer's Guaranteed Profit</div>
                <div class="auctioneer-profit" id="auctioneerProfit">$0.00</div>
            </div>

            <div class="bid-controls">
                <button class="btn btn-bid" id="bidBtn">üí∞ Bid +$0.05</button>
                <button class="btn btn-fold" id="foldBtn" disabled>üè≥Ô∏è Fold (Lose $0.00)</button>
                <button class="btn btn-reset" id="resetBtn">üîÑ New Auction</button>
                <button class="btn btn-simulate" id="simulateBtn">‚ö° Watch AI vs AI</button>
            </div>

            <div class="history-panel">
                <div class="history-title">Bid History</div>
                <div class="history-list" id="history"></div>
            </div>
        </div>

        <!-- Theory -->
        <div class="theory-box">
            <div class="theory-title">üéØ The Trap Mechanics</div>
            <div class="theory-content">
                <p><strong>The Rules:</strong> Auction a $1 bill. Highest bidder wins it. But here's the twist:
                <span class="highlight">the second-highest bidder ALSO pays their bid and gets nothing!</span></p>

                <p style="margin-top: 15px;"><strong>The Escalation:</strong></p>
                <ul style="margin-left: 20px; margin-top: 10px; line-height: 2;">
                    <li>At <span class="highlight">$0.50 vs $0.45</span>: Second bidder thinks "I'll lose $0.45 if I stop. But if I bid $0.55, I win $0.45!"</li>
                    <li>At <span class="highlight">$0.95 vs $0.90</span>: "I'll lose $0.90 OR bid $1.00 and break even!"</li>
                    <li>At <span class="highlight">$1.00 vs $0.95</span>: "I'll lose $0.95 OR bid $1.05 and only lose $0.05!"</li>
                    <li>This continues <span class="highlight">indefinitely</span>‚Äîeach bid is "rational" given the alternative!</li>
                </ul>

                <div class="escalation-visual" id="escalationVisual">
                    <!-- Bars will be added by JS -->
                </div>
            </div>
        </div>

        <!-- Psychology -->
        <div class="psychology-box">
            <div class="psychology-title">üß† Why We Fall For It</div>
            <div class="psychology-grid">
                <div class="psych-item">
                    <h4>üíî Loss Aversion</h4>
                    <p>Losing $0.90 feels much worse than "only" losing $0.05. We bid to avoid the bigger loss.</p>
                </div>
                <div class="psych-item">
                    <h4>üé∞ Sunk Cost Fallacy</h4>
                    <p>"I've already invested this much‚ÄîI can't stop now!" Past bids shouldn't affect future decisions, but they do.</p>
                </div>
                <div class="psych-item">
                    <h4>üèÜ Competitive Ego</h4>
                    <p>Winning becomes about beating the opponent, not about the dollar. Pride overrides profit.</p>
                </div>
                <div class="psych-item">
                    <h4>üìà Escalation of Commitment</h4>
                    <p>Each small step seems reasonable. The trap is invisible until you're deep in it.</p>
                </div>
            </div>
        </div>

        <!-- Insight -->
        <div class="insight-box">
            <div class="insight-title">üèõÔ∏è Historical Context</div>
            <div class="insight-content">
                <p>Economist <span class="highlight">Martin Shubik</span> invented this game in 1971 at Yale.
                In classroom demonstrations, students have bid up to <span class="highlight">$204 for a $1 bill!</span></p>

                <p style="margin-top: 15px;">The dollar auction models real-world escalation: arms races, bidding wars for companies,
                "just one more" in gambling, and even relationship conflicts where both parties keep investing
                despite mounting costs.</p>

                <p style="margin-top: 15px;"><strong>The only winning move?</strong> <span class="highlight">Don't play.</span>
                Or if you must, collude with your opponent to split the gains‚Äîbut that requires trust in a competitive game.</p>

                <div class="stats-row">
                    <div class="stat-item">
                        <div class="stat-number" id="totalAuctions">0</div>
                        <div class="stat-label">Auctions Played</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="avgFinalBid">$0.00</div>
                        <div class="stat-label">Avg Final High Bid</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="maxBid">$0.00</div>
                        <div class="stat-label">Record High Bid</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Game state
        let playerBid = 0;
        let opponentBid = 0;
        let highBidder = null; // 'player' or 'opponent'
        let gameActive = false;
        let bidHistory = [];
        let isSimulating = false;

        // Statistics
        let stats = {
            totalAuctions: 0,
            totalFinalBids: 0,
            maxBid: 0
        };

        // Elements
        const statusEl = document.getElementById('status');
        const playerBidEl = document.getElementById('playerBid');
        const opponentBidEl = document.getElementById('opponentBid');
        const playerProfitEl = document.getElementById('playerProfit');
        const opponentProfitEl = document.getElementById('opponentProfit');
        const auctioneerProfitEl = document.getElementById('auctioneerProfit');
        const bidBtn = document.getElementById('bidBtn');
        const foldBtn = document.getElementById('foldBtn');
        const resetBtn = document.getElementById('resetBtn');
        const simulateBtn = document.getElementById('simulateBtn');
        const historyEl = document.getElementById('history');

        const bidIncrement = 0.05;

        function formatMoney(amount) {
            return '$' + amount.toFixed(2);
        }

        function updateDisplay() {
            playerBidEl.textContent = formatMoney(playerBid);
            opponentBidEl.textContent = formatMoney(opponentBid);

            // Calculate profits/losses
            const playerWinProfit = 1 - playerBid;
            const opponentWinProfit = 1 - opponentBid;

            // Update profit displays
            if (playerBid === 0 && opponentBid === 0) {
                playerProfitEl.textContent = 'If win: $0.00';
                playerProfitEl.className = 'profit-loss neutral';
                opponentProfitEl.textContent = 'If win: $0.00';
                opponentProfitEl.className = 'profit-loss neutral';
            } else {
                // Player profit display
                if (highBidder === 'player') {
                    const winText = playerWinProfit >= 0 ? `Win: +${formatMoney(playerWinProfit)}` : `Win: ${formatMoney(playerWinProfit)}`;
                    playerProfitEl.textContent = winText;
                    playerProfitEl.className = 'profit-loss ' + (playerWinProfit >= 0 ? 'profit' : 'loss');
                } else {
                    playerProfitEl.textContent = `If fold: -${formatMoney(playerBid)}`;
                    playerProfitEl.className = 'profit-loss loss';
                }

                // Opponent profit display
                if (highBidder === 'opponent') {
                    const winText = opponentWinProfit >= 0 ? `Win: +${formatMoney(opponentWinProfit)}` : `Win: ${formatMoney(opponentWinProfit)}`;
                    opponentProfitEl.textContent = winText;
                    opponentProfitEl.className = 'profit-loss ' + (opponentWinProfit >= 0 ? 'profit' : 'loss');
                } else {
                    opponentProfitEl.textContent = `If fold: -${formatMoney(opponentBid)}`;
                    opponentProfitEl.className = 'profit-loss loss';
                }
            }

            // Auctioneer profit (sum of both bids)
            const auctioneerProfit = playerBid + opponentBid - 1;
            auctioneerProfitEl.textContent = formatMoney(Math.max(0, playerBid + opponentBid));

            // Update buttons
            const nextBid = Math.max(playerBid, opponentBid) + bidIncrement;
            bidBtn.textContent = `üí∞ Bid ${formatMoney(nextBid)}`;
            foldBtn.textContent = `üè≥Ô∏è Fold (Lose ${formatMoney(playerBid)})`;
            foldBtn.disabled = playerBid === 0;

            // Highlight high bidder
            document.getElementById('playerBidder').classList.toggle('winner', highBidder === 'player' && !gameActive);
            document.getElementById('opponentBidder').classList.toggle('winner', highBidder === 'opponent' && !gameActive);

            // Update escalation visual
            updateEscalationVisual();
        }

        function updateEscalationVisual() {
            const visual = document.getElementById('escalationVisual');
            visual.innerHTML = '';

            // Show bid history as bars
            const maxVal = Math.max(1, ...bidHistory.map(b => b.amount));

            bidHistory.slice(-15).forEach((bid, i) => {
                const bar = document.createElement('div');
                bar.className = 'escalation-bar';
                const height = (bid.amount / maxVal) * 80;
                bar.style.height = Math.max(5, height) + 'px';
                bar.style.background = bid.who === 'player'
                    ? 'linear-gradient(180deg, #3498db, #2980b9)'
                    : 'linear-gradient(180deg, #e74c3c, #c0392b)';
                bar.title = `${bid.who}: ${formatMoney(bid.amount)}`;
                visual.appendChild(bar);
            });
        }

        function addToHistory(who, amount) {
            bidHistory.push({ who, amount });

            const chip = document.createElement('span');
            chip.className = 'bid-chip ' + (who === 'player' ? 'you' : 'opponent');
            chip.textContent = formatMoney(amount);
            historyEl.appendChild(chip);
            historyEl.scrollLeft = historyEl.scrollWidth;
        }

        function playerBids() {
            if (!gameActive && playerBid === 0 && opponentBid === 0) {
                gameActive = true;
            }

            if (!gameActive) return;

            const nextBid = Math.max(playerBid, opponentBid) + bidIncrement;
            playerBid = nextBid;
            highBidder = 'player';

            addToHistory('player', playerBid);
            updateDisplay();

            // Status update
            if (playerBid <= 1) {
                statusEl.textContent = `You bid ${formatMoney(playerBid)}. Opponent is thinking...`;
            } else {
                statusEl.innerHTML = `You bid ${formatMoney(playerBid)} for a $1 bill! <span style="color:#e74c3c">The trap is sprung!</span>`;
            }

            // Opponent responds
            if (!isSimulating) {
                setTimeout(opponentResponds, 800 + Math.random() * 500);
            }
        }

        function opponentResponds() {
            if (!gameActive || highBidder !== 'player') return;

            // Opponent's "rational" decision
            // They'll bid if losing their current bid is worse than the potential loss from bidding
            const potentialLoss = opponentBid; // What they lose if they fold
            const nextBid = playerBid + bidIncrement;
            const newPotentialLoss = nextBid - 1; // What they'd lose if they win at next bid

            // Add some randomness to make it interesting
            const willBid = potentialLoss > 0.10 || (Math.random() < 0.7 && opponentBid < 2);

            // Opponent has a limit (for playability)
            if (nextBid > 3 && Math.random() < 0.3) {
                // Opponent folds at high amounts sometimes
                endGame('player');
                return;
            }

            if (willBid && nextBid < 5) {
                opponentBid = nextBid;
                highBidder = 'opponent';
                addToHistory('opponent', opponentBid);
                updateDisplay();

                if (opponentBid <= 1) {
                    statusEl.textContent = `Opponent bids ${formatMoney(opponentBid)}. Your turn!`;
                } else {
                    statusEl.innerHTML = `Opponent bids ${formatMoney(opponentBid)}! <span style="color:#f1c40f">Both losing money now!</span>`;
                }

                bidBtn.disabled = false;
            } else {
                // Opponent folds
                endGame('player');
            }
        }

        function playerFolds() {
            if (!gameActive || highBidder === 'player') return;
            endGame('opponent');
        }

        function endGame(winner) {
            gameActive = false;
            bidBtn.disabled = true;
            foldBtn.disabled = true;

            const winnerBid = winner === 'player' ? playerBid : opponentBid;
            const loserBid = winner === 'player' ? opponentBid : playerBid;
            const winnerProfit = 1 - winnerBid;
            const loserLoss = loserBid;
            const auctioneerProfit = winnerBid + loserBid - 1;

            // Update stats
            stats.totalAuctions++;
            stats.totalFinalBids += Math.max(playerBid, opponentBid);
            stats.maxBid = Math.max(stats.maxBid, playerBid, opponentBid);

            document.getElementById('totalAuctions').textContent = stats.totalAuctions;
            document.getElementById('avgFinalBid').textContent = formatMoney(stats.totalFinalBids / stats.totalAuctions);
            document.getElementById('maxBid').textContent = formatMoney(stats.maxBid);

            if (winner === 'player') {
                if (winnerProfit >= 0) {
                    statusEl.innerHTML = `üéâ You won! Profit: <span style="color:#27ae60">+${formatMoney(winnerProfit)}</span>. Auctioneer got: ${formatMoney(winnerBid + loserBid)}`;
                } else {
                    statusEl.innerHTML = `You "won"... but lost <span style="color:#e74c3c">${formatMoney(-winnerProfit)}</span>. Auctioneer got: <span style="color:#27ae60">${formatMoney(winnerBid + loserBid)}</span>!`;
                }
            } else {
                statusEl.innerHTML = `You folded. Lost <span style="color:#e74c3c">${formatMoney(loserLoss)}</span>. Opponent ${winnerProfit >= 0 ? 'won' : 'lost'} ${formatMoney(Math.abs(winnerProfit))}.`;
            }

            updateDisplay();
        }

        function resetGame() {
            playerBid = 0;
            opponentBid = 0;
            highBidder = null;
            gameActive = false;
            isSimulating = false;
            bidHistory = [];

            historyEl.innerHTML = '';
            statusEl.textContent = 'Make a bid to start the auction!';
            bidBtn.disabled = false;
            foldBtn.disabled = true;
            simulateBtn.disabled = false;

            updateDisplay();
        }

        async function simulateAIvsAI() {
            resetGame();
            isSimulating = true;
            gameActive = true;
            bidBtn.disabled = true;
            foldBtn.disabled = true;
            simulateBtn.disabled = true;

            statusEl.textContent = 'ü§ñ AI vs AI simulation starting...';

            let turn = 'player'; // Just using player/opponent as AI1/AI2
            let rounds = 0;
            const maxRounds = 50;

            while (gameActive && rounds < maxRounds) {
                await new Promise(r => setTimeout(r, 200));

                const currentBid = Math.max(playerBid, opponentBid);
                const nextBid = currentBid + bidIncrement;

                if (turn === 'player') {
                    // AI1 decision
                    const lossIfFold = playerBid;
                    const lossIfBidAndWin = nextBid - 1;

                    // Will bid if loss from folding > some threshold or early game
                    const willBid = (lossIfFold > 0.08 && lossIfFold > lossIfBidAndWin * 0.5) ||
                                   currentBid < 0.90 ||
                                   (Math.random() < 0.6 && nextBid < 2.5);

                    if (willBid && nextBid < 4) {
                        playerBid = nextBid;
                        highBidder = 'player';
                        addToHistory('player', playerBid);
                        turn = 'opponent';
                    } else {
                        endGame('opponent');
                    }
                } else {
                    // AI2 decision
                    const lossIfFold = opponentBid;
                    const willBid = (lossIfFold > 0.08) ||
                                   currentBid < 0.90 ||
                                   (Math.random() < 0.6 && nextBid < 2.5);

                    if (willBid && nextBid < 4) {
                        opponentBid = nextBid;
                        highBidder = 'opponent';
                        addToHistory('opponent', opponentBid);
                        turn = 'player';
                    } else {
                        endGame('player');
                    }
                }

                updateDisplay();
                statusEl.textContent = `ü§ñ AI battle: ${formatMoney(playerBid)} vs ${formatMoney(opponentBid)}`;
                rounds++;
            }

            if (gameActive) {
                // Hit max rounds
                endGame(highBidder);
            }

            isSimulating = false;
            simulateBtn.disabled = false;
        }

        // Event listeners
        bidBtn.onclick = playerBids;
        foldBtn.onclick = playerFolds;
        resetBtn.onclick = resetGame;
        simulateBtn.onclick = simulateAIvsAI;

        // Initialize
        updateDisplay();
    </script>
</body>
</html>
