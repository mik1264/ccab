<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Olbers' Paradox - Why Is the Night Sky Dark?</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #000510 0%, #0a0a20 50%, #000510 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            font-size: 2.4em;
            background: linear-gradient(135deg, #ffd700, #fff, #87ceeb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.2em;
            color: #aaa;
            font-style: italic;
            max-width: 750px;
            margin: 0 auto;
        }

        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #ffd700;
            text-decoration: none;
            font-size: 1.1em;
            opacity: 0.8;
            transition: opacity 0.3s;
            z-index: 1000;
        }

        .back-link:hover {
            opacity: 1;
        }

        .main-panel {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }

        .simulation-container {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 25px;
            margin-bottom: 20px;
        }

        @media (max-width: 900px) {
            .simulation-container {
                grid-template-columns: 1fr;
            }
        }

        .canvas-wrapper {
            position: relative;
        }

        #skyCanvas {
            width: 100%;
            aspect-ratio: 1;
            border-radius: 50%;
            background: #000;
            box-shadow: 0 0 50px rgba(255, 255, 255, 0.1);
        }

        .canvas-label {
            text-align: center;
            margin-top: 10px;
            color: #888;
            font-size: 0.9em;
        }

        .controls-panel {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255, 215, 0, 0.15);
        }

        .control-section {
            margin-bottom: 20px;
        }

        .control-section h3 {
            color: #ffd700;
            margin-bottom: 12px;
            font-size: 1.1em;
        }

        .slider-group {
            margin-bottom: 15px;
        }

        .slider-group label {
            display: block;
            color: #bbb;
            margin-bottom: 5px;
            font-size: 0.9em;
        }

        input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: linear-gradient(to right, #333, #ffd700);
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #ffd700;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .slider-value {
            text-align: right;
            color: #ffd700;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            margin-top: 3px;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 215, 0, 0.1);
        }

        .stat-label {
            color: #888;
        }

        .stat-value {
            color: #ffd700;
            font-family: 'Courier New', monospace;
        }

        .brightness-meter {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .meter-bar {
            height: 20px;
            border-radius: 10px;
            background: linear-gradient(to right, #000, #ffd700, #fff);
            position: relative;
            margin-top: 8px;
        }

        .meter-fill {
            height: 100%;
            border-radius: 10px;
            background: linear-gradient(to right, #222, #ffd700);
            transition: width 0.3s;
        }

        .meter-label {
            text-align: center;
            margin-top: 5px;
            font-size: 0.9em;
        }

        .mode-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .mode-btn {
            flex: 1;
            padding: 10px;
            border: 1px solid rgba(255, 215, 0, 0.3);
            background: transparent;
            color: #ccc;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9em;
        }

        .mode-btn:hover {
            background: rgba(255, 215, 0, 0.1);
        }

        .mode-btn.active {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.3), rgba(255, 215, 0, 0.1));
            border-color: #ffd700;
            color: #ffd700;
        }

        .explanation {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
            padding: 25px;
            margin-top: 25px;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }

        .explanation h2 {
            color: #ffd700;
            margin-bottom: 15px;
        }

        .explanation p {
            line-height: 1.8;
            margin-bottom: 15px;
            color: #ccc;
        }

        .paradox-box {
            background: rgba(255, 215, 0, 0.05);
            border-left: 4px solid #ffd700;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
        }

        .paradox-box h3 {
            color: #ffd700;
            margin-bottom: 10px;
        }

        .formula {
            background: rgba(0, 0, 0, 0.6);
            padding: 15px 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            color: #ffd700;
            text-align: center;
            margin: 15px 0;
            font-size: 1.05em;
        }

        .resolution-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .resolution-card {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid rgba(255, 215, 0, 0.15);
        }

        .resolution-card h4 {
            color: #87ceeb;
            margin-bottom: 10px;
        }

        .resolution-card p {
            font-size: 0.95em;
            color: #bbb;
            margin: 0;
        }

        .highlight { color: #ffd700; font-weight: bold; }
        .highlight-blue { color: #87ceeb; font-weight: bold; }
        .highlight-red { color: #ff6b6b; font-weight: bold; }

        .cmb-note {
            background: linear-gradient(135deg, rgba(255, 100, 100, 0.1), rgba(100, 100, 255, 0.1));
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .cmb-note h4 {
            color: #ff9999;
            margin-bottom: 10px;
        }

        .shell-diagram {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .shell-box {
            background: rgba(255, 215, 0, 0.1);
            padding: 10px 15px;
            border-radius: 8px;
            text-align: center;
            font-size: 0.9em;
        }

        .shell-box .distance {
            color: #87ceeb;
        }

        .shell-box .stars {
            color: #ffd700;
        }

        .shell-box .brightness {
            color: #ff9999;
        }

        .equals {
            font-size: 1.5em;
            color: #ffd700;
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">← Back to Paradoxes</a>

    <div class="container">
        <header>
            <h1>Olbers' Paradox</h1>
            <p class="subtitle">If the universe is infinite and filled with stars, every line of sight should hit a star. The night sky should be <span class="highlight">BLINDINGLY BRIGHT</span>—as bright as the surface of the Sun! So why is it dark?</p>
        </header>

        <div class="main-panel">
            <div class="simulation-container">
                <div class="canvas-wrapper">
                    <canvas id="skyCanvas" width="500" height="500"></canvas>
                    <div class="canvas-label" id="canvasLabel">Infinite static universe — every direction hits a star</div>
                </div>

                <div class="controls-panel">
                    <div class="control-section">
                        <h3>Universe Model</h3>
                        <div class="mode-buttons">
                            <button class="mode-btn active" id="infiniteBtn">Infinite Static</button>
                            <button class="mode-btn" id="finiteBtn">Finite Age</button>
                            <button class="mode-btn" id="expandingBtn">Expanding</button>
                        </div>
                    </div>

                    <div class="control-section">
                        <h3>Parameters</h3>
                        <div class="slider-group">
                            <label>Shell Layers (depth)</label>
                            <input type="range" id="layersSlider" min="1" max="50" value="20">
                            <div class="slider-value" id="layersValue">20 shells</div>
                        </div>
                        <div class="slider-group">
                            <label>Star Density</label>
                            <input type="range" id="densitySlider" min="1" max="100" value="50">
                            <div class="slider-value" id="densityValue">50%</div>
                        </div>
                        <div class="slider-group">
                            <label>Universe Age (billion years)</label>
                            <input type="range" id="ageSlider" min="1" max="100" value="14">
                            <div class="slider-value" id="ageValue">14 Gyr</div>
                        </div>
                    </div>

                    <div class="control-section">
                        <h3>Statistics</h3>
                        <div class="stat-row">
                            <span class="stat-label">Total Stars</span>
                            <span class="stat-value" id="totalStars">0</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Sky Coverage</span>
                            <span class="stat-value" id="skyCoverage">0%</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Accumulated Light</span>
                            <span class="stat-value" id="accumulatedLight">0%</span>
                        </div>
                    </div>

                    <div class="brightness-meter">
                        <label style="color: #888;">Sky Brightness</label>
                        <div class="meter-bar">
                            <div class="meter-fill" id="brightnessFill" style="width: 0%"></div>
                        </div>
                        <div class="meter-label" id="brightnessLabel">Dark</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="explanation">
            <h2>The Paradox (1823)</h2>

            <div class="paradox-box">
                <h3>Heinrich Olbers' Argument</h3>
                <p>
                    Imagine the universe is <span class="highlight">infinite, static, and uniformly filled with stars</span>.
                    Look in any direction. Your line of sight must eventually hit the surface of a star!
                    If every point in the sky is a star surface, the entire sky should glow like the Sun.
                </p>
            </div>

            <h2>The Math: Why Dimness Doesn't Save Us</h2>

            <p>You might think: "Distant stars are dimmer—surely that helps?" Let's check:</p>

            <div class="shell-diagram">
                <div class="shell-box">
                    <div class="distance">Distance: r</div>
                    <div class="stars">Stars: 4πr²</div>
                    <div class="brightness">Each: 1/r²</div>
                </div>
                <div class="equals">×</div>
                <div class="shell-box">
                    <div style="color: #ffd700; font-size: 1.2em;">Shell brightness:</div>
                    <div style="color: #fff; font-size: 1.1em;">4πr² × 1/r² = 4π</div>
                    <div style="color: #ff9999;">CONSTANT!</div>
                </div>
            </div>

            <div class="formula">
                Stars in shell ∝ r² | Brightness per star ∝ 1/r² | Total from shell = CONSTANT
            </div>

            <p>
                Every shell—near or far—contributes the <span class="highlight">same total light</span>!
                With infinitely many shells, total brightness → <span class="highlight-red">INFINITY</span>.
            </p>

            <h2>The Resolution</h2>

            <div class="resolution-grid">
                <div class="resolution-card">
                    <h4>1. Finite Age</h4>
                    <p>
                        The universe is only ~13.8 billion years old. Light from stars beyond 13.8 billion light-years
                        hasn't reached us yet. We can only see a finite "observable universe."
                    </p>
                </div>
                <div class="resolution-card">
                    <h4>2. Finite Star Lifetimes</h4>
                    <p>
                        Stars burn for limited time. Even in an eternal universe, stars would need ~10²³ years to
                        fill the sky. The universe is too young by a factor of 10 trillion!
                    </p>
                </div>
                <div class="resolution-card">
                    <h4>3. Cosmic Expansion</h4>
                    <p>
                        Space itself is expanding. Light from distant galaxies gets redshifted—stretched to longer
                        wavelengths. Visible light becomes infrared, then microwaves, invisible to our eyes.
                    </p>
                </div>
                <div class="resolution-card">
                    <h4>4. Big Bang Cosmology</h4>
                    <p>
                        Before 380,000 years after the Big Bang, the universe was opaque plasma. There are no stars
                        older than ~13.6 billion years. The light simply doesn't exist!
                    </p>
                </div>
            </div>

            <div class="cmb-note">
                <h4>Plot Twist: The Sky ISN'T Actually Dark!</h4>
                <p>
                    The Cosmic Microwave Background (CMB) fills all of space with radiation at 2.7 Kelvin.
                    It's the "afterglow" of the Big Bang, redshifted from 3000K orange light to invisible microwaves.
                    In microwave vision, the entire sky <span class="highlight">glows uniformly</span>—Olbers was right after all!
                </p>
            </div>

            <p>
                Olbers' paradox, posed in 1823, was one of the first hints that the universe couldn't be
                static and eternal. It foreshadowed the Big Bang theory by over a century. The darkness of night
                is evidence that we live in a young, dynamic, expanding cosmos.
            </p>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('skyCanvas');
        const ctx = canvas.getContext('2d');

        const layersSlider = document.getElementById('layersSlider');
        const densitySlider = document.getElementById('densitySlider');
        const ageSlider = document.getElementById('ageSlider');
        const layersValue = document.getElementById('layersValue');
        const densityValue = document.getElementById('densityValue');
        const ageValue = document.getElementById('ageValue');
        const totalStarsEl = document.getElementById('totalStars');
        const skyCoverageEl = document.getElementById('skyCoverage');
        const accumulatedLightEl = document.getElementById('accumulatedLight');
        const brightnessFill = document.getElementById('brightnessFill');
        const brightnessLabel = document.getElementById('brightnessLabel');
        const canvasLabel = document.getElementById('canvasLabel');

        const infiniteBtn = document.getElementById('infiniteBtn');
        const finiteBtn = document.getElementById('finiteBtn');
        const expandingBtn = document.getElementById('expandingBtn');

        let mode = 'infinite';
        let stars = [];

        function generateStars() {
            stars = [];
            const layers = parseInt(layersSlider.value);
            const density = parseInt(densitySlider.value) / 100;
            const maxAge = parseInt(ageSlider.value);

            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const maxRadius = canvas.width / 2 - 10;

            let totalLight = 0;
            let starCount = 0;

            for (let layer = 1; layer <= layers; layer++) {
                const layerRadius = (layer / layers) * maxRadius;
                const circumference = 2 * Math.PI * layerRadius;
                const starsInLayer = Math.floor(circumference * density * 0.3);

                // In finite age mode, limit visible layers
                let layerVisible = true;
                let redshiftFactor = 1;

                if (mode === 'finite') {
                    // Light travel time proportional to distance
                    const lightTravelTime = (layer / layers) * 50; // Scale to billions of years
                    layerVisible = lightTravelTime <= maxAge;
                } else if (mode === 'expanding') {
                    // Redshift increases with distance
                    redshiftFactor = 1 / (1 + layer * 0.1);
                    if (redshiftFactor < 0.1) redshiftFactor = 0.1;
                }

                if (!layerVisible) continue;

                for (let i = 0; i < starsInLayer; i++) {
                    const angle = (i / starsInLayer) * Math.PI * 2 + layer * 0.5;
                    const jitter = (Math.random() - 0.5) * (maxRadius / layers);
                    const r = layerRadius + jitter;

                    const x = centerX + Math.cos(angle) * r;
                    const y = centerY + Math.sin(angle) * r;

                    // Brightness decreases with distance squared, but number increases
                    // Net effect: each layer contributes similar total
                    const baseBrightness = 1 / (layer * layer);
                    const brightness = baseBrightness * redshiftFactor * (mode === 'infinite' ? 1 : 0.7);

                    // Size decreases with distance
                    const size = Math.max(1, 4 - layer * 0.08);

                    // Color: redshift in expanding mode
                    let hue = 40 + Math.random() * 20; // Yellow-white stars
                    if (mode === 'expanding') {
                        hue = Math.max(0, 40 - layer * 3); // Shift to red
                    }

                    stars.push({ x, y, size, brightness, hue, layer });
                    totalLight += brightness * 100;
                    starCount++;
                }
            }

            return { totalLight, starCount };
        }

        function draw() {
            // Clear to black
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Clip to circle
            ctx.save();
            ctx.beginPath();
            ctx.arc(canvas.width/2, canvas.height/2, canvas.width/2 - 5, 0, Math.PI * 2);
            ctx.clip();

            // Calculate accumulated brightness for background glow
            const { totalLight, starCount } = generateStars();

            // In infinite mode, add background glow
            if (mode === 'infinite') {
                const glowIntensity = Math.min(1, totalLight / 500);
                const gradient = ctx.createRadialGradient(
                    canvas.width/2, canvas.height/2, 0,
                    canvas.width/2, canvas.height/2, canvas.width/2
                );
                gradient.addColorStop(0, `rgba(255, 240, 200, ${glowIntensity * 0.4})`);
                gradient.addColorStop(1, `rgba(255, 200, 100, ${glowIntensity * 0.2})`);
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);
            }

            // Draw stars from far to near
            stars.sort((a, b) => b.layer - a.layer);

            stars.forEach(star => {
                const alpha = Math.min(1, star.brightness * 50);
                ctx.fillStyle = `hsla(${star.hue}, 80%, ${50 + star.brightness * 200}%, ${alpha})`;
                ctx.beginPath();
                ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
                ctx.fill();

                // Star glow
                if (star.brightness > 0.01) {
                    const glow = ctx.createRadialGradient(star.x, star.y, 0, star.x, star.y, star.size * 3);
                    glow.addColorStop(0, `hsla(${star.hue}, 80%, 80%, ${alpha * 0.5})`);
                    glow.addColorStop(1, 'transparent');
                    ctx.fillStyle = glow;
                    ctx.beginPath();
                    ctx.arc(star.x, star.y, star.size * 3, 0, Math.PI * 2);
                    ctx.fill();
                }
            });

            ctx.restore();

            // Update stats
            totalStarsEl.textContent = starCount.toLocaleString();

            const coverage = Math.min(100, (starCount / 1000) * 100);
            skyCoverageEl.textContent = coverage.toFixed(1) + '%';

            const lightPercent = Math.min(100, totalLight / 5);
            accumulatedLightEl.textContent = lightPercent.toFixed(1) + '%';

            brightnessFill.style.width = lightPercent + '%';

            if (lightPercent < 5) {
                brightnessLabel.textContent = 'Dark (as observed)';
                brightnessLabel.style.color = '#888';
            } else if (lightPercent < 30) {
                brightnessLabel.textContent = 'Dim';
                brightnessLabel.style.color = '#aaa';
            } else if (lightPercent < 70) {
                brightnessLabel.textContent = 'Bright';
                brightnessLabel.style.color = '#ffd700';
            } else {
                brightnessLabel.textContent = 'BLINDING!';
                brightnessLabel.style.color = '#fff';
            }
        }

        function setMode(newMode) {
            mode = newMode;

            [infiniteBtn, finiteBtn, expandingBtn].forEach(btn => btn.classList.remove('active'));

            if (newMode === 'infinite') {
                infiniteBtn.classList.add('active');
                canvasLabel.textContent = 'Infinite static universe — every direction hits a star';
                ageSlider.disabled = true;
            } else if (newMode === 'finite') {
                finiteBtn.classList.add('active');
                canvasLabel.textContent = 'Finite age — light from distant stars hasn\'t arrived yet';
                ageSlider.disabled = false;
            } else {
                expandingBtn.classList.add('active');
                canvasLabel.textContent = 'Expanding universe — distant light is redshifted away';
                ageSlider.disabled = true;
            }

            draw();
        }

        infiniteBtn.addEventListener('click', () => setMode('infinite'));
        finiteBtn.addEventListener('click', () => setMode('finite'));
        expandingBtn.addEventListener('click', () => setMode('expanding'));

        layersSlider.addEventListener('input', () => {
            layersValue.textContent = layersSlider.value + ' shells';
            draw();
        });

        densitySlider.addEventListener('input', () => {
            densityValue.textContent = densitySlider.value + '%';
            draw();
        });

        ageSlider.addEventListener('input', () => {
            ageValue.textContent = ageSlider.value + ' Gyr';
            draw();
        });

        // Initial draw
        draw();

        // Animate twinkling
        setInterval(() => {
            stars.forEach(star => {
                star.brightness *= 0.95 + Math.random() * 0.1;
            });
        }, 100);
    </script>
</body>
</html>
