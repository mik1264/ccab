<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Regression to the Mean - Why Extremes Don't Last</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        header { text-align: center; margin-bottom: 30px; }
        .back-link {
            color: #00cec9;
            text-decoration: none;
            margin-bottom: 20px;
            display: inline-block;
        }
        h1 {
            font-size: 2.2rem;
            background: linear-gradient(135deg, #00cec9, #0984e3, #6c5ce7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }
        .subtitle {
            font-size: 1rem;
            color: #a0c4ff;
            max-width: 900px;
            margin: 0 auto;
            line-height: 1.6;
        }
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }
        @media (max-width: 900px) {
            .main-grid { grid-template-columns: 1fr; }
        }
        .simulation-panel {
            background: rgba(20, 30, 50, 0.8);
            border-radius: 15px;
            padding: 25px;
        }
        .simulation-panel h2 {
            color: #00cec9;
            margin-bottom: 15px;
            text-align: center;
            font-size: 1.3rem;
        }
        canvas {
            width: 100%;
            border-radius: 10px;
            background: rgba(0,0,0,0.3);
        }
        #performanceChart {
            height: 250px;
        }
        .controls {
            margin-top: 15px;
        }
        .control-row {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }
        .action-btn {
            padding: 10px 20px;
            background: linear-gradient(135deg, #00cec9, #0984e3);
            border: none;
            color: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
        }
        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 206, 201, 0.4);
        }
        .scenario-btn {
            padding: 8px 15px;
            background: rgba(0, 206, 201, 0.2);
            border: 1px solid #00cec9;
            color: #00cec9;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s;
        }
        .scenario-btn:hover, .scenario-btn.active {
            background: #00cec9;
            color: #0f3460;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        .stat-box {
            background: rgba(0,0,0,0.3);
            padding: 12px;
            border-radius: 8px;
            text-align: center;
        }
        .stat-value {
            font-size: 1.4rem;
            font-weight: bold;
        }
        .stat-value.high { color: #00b894; }
        .stat-value.low { color: #d63031; }
        .stat-value.avg { color: #fdcb6e; }
        .stat-label {
            color: #a0c4ff;
            font-size: 0.75rem;
        }
        .story-panel {
            background: rgba(20, 30, 50, 0.8);
            border-radius: 15px;
            padding: 25px;
        }
        .story-panel h2 {
            color: #fdcb6e;
            margin-bottom: 15px;
            text-align: center;
            font-size: 1.3rem;
        }
        .story-content {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 20px;
            min-height: 200px;
        }
        .story-content h3 {
            color: #00cec9;
            margin-bottom: 12px;
        }
        .story-content p {
            color: #b0c4de;
            line-height: 1.7;
            margin-bottom: 12px;
        }
        .story-navigation {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
        }
        .nav-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(0, 206, 201, 0.3);
            cursor: pointer;
            transition: all 0.3s;
        }
        .nav-dot.active {
            background: #00cec9;
            transform: scale(1.2);
        }
        .interactive-demo {
            background: rgba(20, 30, 50, 0.8);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
        }
        .interactive-demo h2 {
            color: #6c5ce7;
            text-align: center;
            margin-bottom: 20px;
        }
        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        .demo-card {
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
            padding: 20px;
        }
        .demo-card h3 {
            color: #fdcb6e;
            margin-bottom: 10px;
        }
        .pilot-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin: 15px 0;
        }
        .pilot {
            text-align: center;
            padding: 10px 5px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .pilot .icon { font-size: 1.5rem; }
        .pilot .score {
            font-size: 0.8rem;
            margin-top: 5px;
        }
        .pilot.excellent { background: rgba(0, 184, 148, 0.3); border: 1px solid #00b894; }
        .pilot.poor { background: rgba(214, 48, 49, 0.3); border: 1px solid #d63031; }
        .pilot.average { background: rgba(253, 203, 110, 0.3); border: 1px solid #fdcb6e; }
        .pilot.selected { transform: scale(1.1); box-shadow: 0 0 15px rgba(255,255,255,0.3); }
        .feedback-area {
            background: rgba(0,0,0,0.4);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            text-align: center;
        }
        .feedback-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 10px;
        }
        .feedback-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
        }
        .feedback-btn.praise {
            background: #00b894;
            color: white;
        }
        .feedback-btn.punish {
            background: #d63031;
            color: white;
        }
        .result-text {
            margin-top: 15px;
            padding: 15px;
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
            color: #b0c4de;
            display: none;
        }
        .bottom-panels {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }
        .panel {
            background: rgba(20, 30, 50, 0.8);
            border-radius: 15px;
            padding: 20px;
        }
        .panel h3 {
            color: #00cec9;
            margin-bottom: 12px;
            font-size: 1.1rem;
        }
        .panel p {
            color: #b0c4de;
            line-height: 1.7;
            font-size: 0.95rem;
            margin-bottom: 12px;
        }
        .key-insight {
            background: linear-gradient(135deg, rgba(0, 206, 201, 0.2), rgba(108, 92, 231, 0.2));
            border-left: 4px solid #fdcb6e;
            padding: 15px;
            border-radius: 0 10px 10px 0;
            margin: 15px 0;
        }
        .key-insight strong {
            color: #fdcb6e;
        }
        .examples-list {
            list-style: none;
        }
        .examples-list li {
            padding: 12px 0 12px 30px;
            position: relative;
            color: #b0c4de;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .examples-list li::before {
            content: "üìä";
            position: absolute;
            left: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="index.html" class="back-link">‚Üê Back to Paradoxes</a>
            <h1>Regression to the Mean</h1>
            <p class="subtitle">
                Extreme performances don't last‚Äîthey regress toward average. This creates powerful
                illusions: we think praise makes people worse and punishment makes them better,
                that the "Sports Illustrated jinx" is real, and that placebos actually work.
                Francis Galton discovered this in 1886‚Äîand we still fall for it every day.
            </p>
        </header>

        <div class="main-grid">
            <div class="simulation-panel">
                <h2>üìà Performance Over Time</h2>
                <canvas id="performanceChart"></canvas>
                <div class="controls">
                    <div class="control-row">
                        <button class="scenario-btn active" data-scenario="athlete">Athlete</button>
                        <button class="scenario-btn" data-scenario="student">Student</button>
                        <button class="scenario-btn" data-scenario="stock">Stock</button>
                        <button class="scenario-btn" data-scenario="weather">Weather</button>
                    </div>
                    <div class="control-row">
                        <button class="action-btn" id="runSimulation">‚ñ∂Ô∏è Run 20 Trials</button>
                        <button class="action-btn" id="resetSimulation">üîÑ Reset</button>
                    </div>
                </div>
                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-value high" id="afterHigh">--</div>
                        <div class="stat-label">After Highs</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value avg" id="trueAvg">--</div>
                        <div class="stat-label">True Average</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value low" id="afterLow">--</div>
                        <div class="stat-label">After Lows</div>
                    </div>
                </div>
            </div>

            <div class="story-panel">
                <h2>üìñ The Stories We Tell</h2>
                <div class="story-content" id="storyContent">
                    <!-- Stories will be loaded here -->
                </div>
                <div class="story-navigation" id="storyNav">
                    <!-- Dots will be added here -->
                </div>
            </div>
        </div>

        <div class="interactive-demo">
            <h2>‚úàÔ∏è Kahneman's Flight Instructors</h2>
            <div class="demo-grid">
                <div class="demo-card">
                    <h3>The Scenario</h3>
                    <p style="color: #b0c4de; line-height: 1.6;">
                        Israeli Air Force instructors believed: "Praise a pilot after a great landing,
                        they do WORSE next time. Criticize after a bad landing, they do BETTER."
                        They concluded punishment works better than praise!
                    </p>
                    <p style="color: #b0c4de; line-height: 1.6; margin-top: 10px;">
                        But Kahneman realized: after an extreme performance (good OR bad),
                        the next one will likely be closer to average‚ÄîREGARDLESS of feedback!
                    </p>
                </div>

                <div class="demo-card">
                    <h3>Try It Yourself</h3>
                    <p style="color: #a0c4ff; margin-bottom: 10px;">
                        Each pilot's TRUE skill is 70/100. Today's scores include random variation.
                        Click a pilot, give feedback, and see their next performance:
                    </p>
                    <div class="pilot-grid" id="pilotGrid">
                        <!-- Pilots will be generated here -->
                    </div>
                    <div class="feedback-area" id="feedbackArea" style="display: none;">
                        <p id="selectedPilotInfo">Selected pilot info</p>
                        <div class="feedback-buttons">
                            <button class="feedback-btn praise" id="praiseBtn">üëè Praise</button>
                            <button class="feedback-btn punish" id="punishBtn">üò† Criticize</button>
                        </div>
                        <div class="result-text" id="resultText"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="bottom-panels">
            <div class="panel">
                <h3>üèÜ The Sports Illustrated Jinx</h3>
                <p>
                    Athletes who appear on the SI cover often perform poorly afterward.
                    Is it pressure? Distraction? A literal curse?
                </p>
                <p>
                    <strong>No‚Äîit's regression to the mean!</strong> Athletes make the cover
                    after exceptional performances. Exceptional = unlikely to repeat.
                    Their next performance will probably be closer to their average.
                </p>
                <ul class="examples-list">
                    <li>
                        <strong>Madden Curse:</strong> NFL players on the video game cover
                        often have bad seasons afterward.
                    </li>
                    <li>
                        <strong>Sophomore Slump:</strong> Rookies of the Year often disappoint
                        in their second year. Their first year was unusually good!
                    </li>
                    <li>
                        <strong>Oscar Curse:</strong> Best Actress winners often divorce soon after.
                        They won during a career peak; regression affects everything.
                    </li>
                </ul>
            </div>

            <div class="panel">
                <h3>üíä Medicine's Greatest Illusion</h3>
                <p>
                    When do you seek medical treatment? Usually when symptoms are at their WORST.
                    What happens next? They improve toward your normal baseline.
                </p>
                <p>
                    This creates the illusion that treatments work‚Äîeven when they don't!
                    Patients and doctors attribute the improvement to the intervention,
                    not to regression.
                </p>
                <div class="key-insight">
                    <strong>Why Placebos "Work":</strong> You take a sugar pill at your worst.
                    You improve (you would have anyway). You credit the pill.
                    This is why we need randomized controlled trials‚Äîto separate
                    regression from genuine treatment effects!
                </div>
                <p>
                    <strong>Alternative medicine thrives on regression.</strong>
                    Homeopathy, acupuncture, crystals‚Äîall "work" because people
                    seek them at symptom peaks.
                </p>
            </div>

            <div class="panel">
                <h3>üß† Why We Miss It</h3>
                <p>
                    <strong>Causal Thinking:</strong> Our brains are wired to find causes.
                    "She praised him, then he got worse‚Äîpraise caused it!" We don't see
                    that the outcome was predetermined by the extreme starting point.
                </p>
                <p>
                    <strong>Invisible Counterfactual:</strong> We can't see what would have
                    happened without our intervention. We only see the regression.
                </p>
                <p>
                    <strong>Confirmation Bias:</strong> Instructors remember when punishment
                    "worked" (after bad ‚Üí better). They forget when it "failed" (after average ‚Üí average).
                </p>
                <div class="key-insight">
                    <strong>Galton's Discovery (1886):</strong> Tall parents have shorter children
                    (on average). Short parents have taller children. This doesn't mean height
                    is equalizing‚Äîit's regression to the population mean! Extreme parents
                    are extreme partly due to luck; their children get different luck.
                </div>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('performanceChart');
        const ctx = canvas.getContext('2d');

        const stories = [
            {
                title: "The Flight Instructor's Mistake",
                text: "Daniel Kahneman was teaching Israeli Air Force instructors about rewards and learning. An instructor objected: 'I've praised pilots after great landings, and they ALWAYS do worse next time! I criticize poor landings, and they improve. Punishment works!' Kahneman realized: the instructor was seeing regression, not learning. Extreme performances regress regardless of feedback‚Äîbut we attribute it to our actions."
            },
            {
                title: "The Vanishing Treatment Effect",
                text: "A company tests employee training: people who scored lowest on the pretest improved the most! 'The training works!' But wait‚Äîeven without training, the worst scorers would improve (regression). The best scorers would decline. To measure the real effect, you need a control group showing what regression alone would produce."
            },
            {
                title: "Tall Parents, Shorter Kids",
                text: "Francis Galton noticed: very tall parents tend to have shorter children. Very short parents tend to have taller children. He called it 'regression toward mediocrity.' It's not that height is evening out‚Äîit's that extreme heights partly reflect luck (nutrition, health). Children get new luck, so they're probably less extreme."
            },
            {
                title: "The Sports Illustrated Jinx",
                text: "Appear on SI's cover? Prepare for doom! Except... athletes make the cover after exceptional performances. Exceptional performances are, by definition, above average. Next performance? Probably closer to average. No jinx‚Äîjust math. The Madden Curse, Oscar Curse, and 'sophomore slump' are all the same phenomenon."
            }
        ];

        let currentStory = 0;
        let scenario = 'athlete';
        let data = [];
        let trueAbility = 70;
        let variance = 15;

        // Pilot simulation
        let pilots = [];
        let selectedPilot = null;
        let praiseCount = { improved: 0, declined: 0 };
        let punishCount = { improved: 0, declined: 0 };

        function initStories() {
            const nav = document.getElementById('storyNav');
            nav.innerHTML = stories.map((_, i) =>
                `<div class="nav-dot ${i === 0 ? 'active' : ''}" data-index="${i}"></div>`
            ).join('');

            nav.querySelectorAll('.nav-dot').forEach(dot => {
                dot.addEventListener('click', () => {
                    currentStory = parseInt(dot.dataset.index);
                    showStory();
                });
            });

            showStory();
        }

        function showStory() {
            const story = stories[currentStory];
            document.getElementById('storyContent').innerHTML = `
                <h3>${story.title}</h3>
                <p>${story.text}</p>
            `;

            document.querySelectorAll('.nav-dot').forEach((dot, i) => {
                dot.classList.toggle('active', i === currentStory);
            });
        }

        function generatePerformance() {
            // True ability plus random noise
            return trueAbility + (Math.random() - 0.5) * 2 * variance;
        }

        function runSimulation() {
            data = [];
            for (let i = 0; i < 20; i++) {
                data.push(generatePerformance());
            }
            drawChart();
            updateStats();
        }

        function drawChart() {
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;

            const w = canvas.width;
            const h = canvas.height;
            const padding = 40;

            ctx.fillStyle = '#1a2a3a';
            ctx.fillRect(0, 0, w, h);

            if (data.length === 0) {
                ctx.fillStyle = '#a0c4ff';
                ctx.font = '16px Georgia';
                ctx.textAlign = 'center';
                ctx.fillText('Click "Run 20 Trials" to start', w/2, h/2);
                return;
            }

            // Grid lines
            ctx.strokeStyle = 'rgba(255,255,255,0.1)';
            for (let i = 0; i <= 100; i += 20) {
                const y = h - padding - (i / 100) * (h - 2 * padding);
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(w - padding, y);
                ctx.stroke();
            }

            // True mean line
            ctx.strokeStyle = '#fdcb6e';
            ctx.setLineDash([5, 5]);
            const meanY = h - padding - (trueAbility / 100) * (h - 2 * padding);
            ctx.beginPath();
            ctx.moveTo(padding, meanY);
            ctx.lineTo(w - padding, meanY);
            ctx.stroke();
            ctx.setLineDash([]);

            ctx.fillStyle = '#fdcb6e';
            ctx.font = '11px Georgia';
            ctx.textAlign = 'left';
            ctx.fillText('True Ability', w - padding + 5, meanY + 4);

            // Data line
            ctx.strokeStyle = '#00cec9';
            ctx.lineWidth = 2;
            ctx.beginPath();

            const stepX = (w - 2 * padding) / (data.length - 1);

            data.forEach((val, i) => {
                const x = padding + i * stepX;
                const y = h - padding - (val / 100) * (h - 2 * padding);
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.stroke();

            // Points with color coding
            data.forEach((val, i) => {
                const x = padding + i * stepX;
                const y = h - padding - (val / 100) * (h - 2 * padding);

                ctx.fillStyle = val > trueAbility + variance/2 ? '#00b894' :
                               val < trueAbility - variance/2 ? '#d63031' : '#fdcb6e';
                ctx.beginPath();
                ctx.arc(x, y, 5, 0, Math.PI * 2);
                ctx.fill();
            });

            // Axes
            ctx.strokeStyle = '#4a5568';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(padding, padding);
            ctx.lineTo(padding, h - padding);
            ctx.lineTo(w - padding, h - padding);
            ctx.stroke();

            // Labels
            ctx.fillStyle = '#a0c4ff';
            ctx.font = '11px Georgia';
            ctx.textAlign = 'center';
            ctx.fillText('Trial Number', w/2, h - 5);
        }

        function updateStats() {
            if (data.length < 2) return;

            const threshold = variance / 2;
            let afterHighSum = 0, afterHighCount = 0;
            let afterLowSum = 0, afterLowCount = 0;

            for (let i = 0; i < data.length - 1; i++) {
                if (data[i] > trueAbility + threshold) {
                    afterHighSum += data[i + 1];
                    afterHighCount++;
                } else if (data[i] < trueAbility - threshold) {
                    afterLowSum += data[i + 1];
                    afterLowCount++;
                }
            }

            document.getElementById('afterHigh').textContent =
                afterHighCount > 0 ? (afterHighSum / afterHighCount).toFixed(1) : '--';
            document.getElementById('afterLow').textContent =
                afterLowCount > 0 ? (afterLowSum / afterLowCount).toFixed(1) : '--';
            document.getElementById('trueAvg').textContent = trueAbility.toFixed(1);
        }

        // Pilot simulation
        function initPilots() {
            const grid = document.getElementById('pilotGrid');
            pilots = [];

            for (let i = 0; i < 5; i++) {
                const score = 70 + (Math.random() - 0.5) * 40; // Today's score
                pilots.push({ id: i, score: score, trueAbility: 70 });
            }

            grid.innerHTML = pilots.map(p => {
                const type = p.score > 80 ? 'excellent' : p.score < 60 ? 'poor' : 'average';
                return `
                    <div class="pilot ${type}" data-id="${p.id}">
                        <div class="icon">‚úàÔ∏è</div>
                        <div class="score">${p.score.toFixed(0)}</div>
                    </div>
                `;
            }).join('');

            grid.querySelectorAll('.pilot').forEach(el => {
                el.addEventListener('click', () => selectPilot(parseInt(el.dataset.id)));
            });
        }

        function selectPilot(id) {
            selectedPilot = pilots[id];

            document.querySelectorAll('.pilot').forEach(el => {
                el.classList.toggle('selected', parseInt(el.dataset.id) === id);
            });

            const area = document.getElementById('feedbackArea');
            area.style.display = 'block';

            const type = selectedPilot.score > 80 ? 'excellent' : selectedPilot.score < 60 ? 'poor' : 'average';
            document.getElementById('selectedPilotInfo').innerHTML =
                `Pilot ${id + 1} scored <strong>${selectedPilot.score.toFixed(0)}</strong> today (${type} landing)`;

            document.getElementById('resultText').style.display = 'none';
        }

        function giveFeedback(isPraise) {
            if (!selectedPilot) return;

            const oldScore = selectedPilot.score;
            const newScore = 70 + (Math.random() - 0.5) * 40; // New random performance
            const improved = newScore > oldScore;

            const result = document.getElementById('resultText');
            result.style.display = 'block';

            if (isPraise) {
                if (improved) praiseCount.improved++;
                else praiseCount.declined++;
            } else {
                if (improved) punishCount.improved++;
                else punishCount.declined++;
            }

            result.innerHTML = `
                <strong>Next landing: ${newScore.toFixed(0)}</strong><br>
                ${improved ? 'üìà Improved!' : 'üìâ Declined!'}<br><br>
                ${isPraise ?
                    `You praised after ${oldScore.toFixed(0)}. ${improved ? 'They improved!' : 'They got worse!'}<br>` :
                    `You criticized after ${oldScore.toFixed(0)}. ${improved ? 'They improved!' : 'They got worse!'}<br>`
                }
                <small style="color: #fdcb6e;">
                    Remember: the new score is random around their true ability (70).
                    ${oldScore > 80 ? "After a high score, they'll probably regress DOWN." :
                      oldScore < 60 ? "After a low score, they'll probably regress UP." :
                      "After an average score, less change expected."}
                </small>
            `;

            // Regenerate pilots
            setTimeout(initPilots, 2000);
        }

        // Event listeners
        document.getElementById('runSimulation').addEventListener('click', runSimulation);
        document.getElementById('resetSimulation').addEventListener('click', () => {
            data = [];
            drawChart();
            document.getElementById('afterHigh').textContent = '--';
            document.getElementById('afterLow').textContent = '--';
            document.getElementById('trueAvg').textContent = '--';
        });

        document.querySelectorAll('.scenario-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.scenario-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                scenario = btn.dataset.scenario;

                // Adjust parameters
                switch (scenario) {
                    case 'athlete': trueAbility = 70; variance = 15; break;
                    case 'student': trueAbility = 75; variance = 12; break;
                    case 'stock': trueAbility = 50; variance = 25; break;
                    case 'weather': trueAbility = 60; variance = 20; break;
                }

                if (data.length > 0) runSimulation();
            });
        });

        document.getElementById('praiseBtn').addEventListener('click', () => giveFeedback(true));
        document.getElementById('punishBtn').addEventListener('click', () => giveFeedback(false));

        // Auto-cycle stories
        setInterval(() => {
            currentStory = (currentStory + 1) % stories.length;
            showStory();
        }, 10000);

        // Initialize
        initStories();
        initPilots();
        drawChart();
    </script>
</body>
</html>
