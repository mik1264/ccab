<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spin-Statistics Theorem: Why Matter is Solid | Surprising Paradoxes</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #0a0815 0%, #151030 50%, #0a0818 100%);
            color: #e0e0e0;
            min-height: 100vh;
            overflow-x: hidden;
        }
        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #ff88aa;
            text-decoration: none;
            font-size: 1rem;
            z-index: 100;
            padding: 8px 16px;
            background: rgba(0,0,0,0.5);
            border-radius: 20px;
            transition: all 0.3s ease;
        }
        .back-link:hover {
            background: rgba(255, 100, 150, 0.2);
            transform: translateX(-3px);
        }
        header {
            text-align: center;
            padding: 80px 20px 30px;
        }
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #ff6688, #ff88aa, #ffaacc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .subtitle {
            color: #aa7799;
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        .demo-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        @media (max-width: 900px) {
            .demo-section {
                grid-template-columns: 1fr;
            }
        }
        .canvas-container {
            background: linear-gradient(145deg, #0a0815, #151025);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 40px rgba(200,50,100,0.15);
        }
        .canvas-container h3 {
            color: #ff88aa;
            margin-bottom: 15px;
            text-align: center;
            font-size: 1.2rem;
        }
        .canvas-container.boson h3 { color: #88aaff; }
        canvas {
            display: block;
            width: 100%;
            border-radius: 10px;
        }
        .controls-row {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
        }
        @media (max-width: 900px) {
            .controls-row {
                flex-direction: column;
            }
        }
        .controls {
            flex: 1;
            background: linear-gradient(145deg, #100818, #180c25);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 40px rgba(200,50,100,0.15);
        }
        .comparison-panel {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        .compare-box {
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        .compare-box.fermion {
            background: rgba(255, 100, 150, 0.15);
            border: 1px solid rgba(255, 100, 150, 0.3);
        }
        .compare-box.boson {
            background: rgba(100, 150, 255, 0.15);
            border: 1px solid rgba(100, 150, 255, 0.3);
        }
        .compare-box h4 {
            font-size: 1.1rem;
            margin-bottom: 10px;
        }
        .compare-box.fermion h4 { color: #ff88aa; }
        .compare-box.boson h4 { color: #88aaff; }
        .compare-box .spin { font-size: 0.9rem; color: #aaa; margin-bottom: 5px; }
        .compare-box .stat { font-size: 0.85rem; color: #888; }
        .compare-box .examples {
            font-size: 0.8rem;
            color: #666;
            margin-top: 8px;
        }
        .control-group {
            margin-bottom: 20px;
        }
        .control-group label {
            display: block;
            margin-bottom: 8px;
            color: #ff88aa;
            font-size: 0.9rem;
        }
        .control-group input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #1a0c25;
            outline: none;
            -webkit-appearance: none;
        }
        .control-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ff6688, #cc4466);
            cursor: pointer;
        }
        .value-display {
            text-align: right;
            font-size: 0.85rem;
            color: #aaa;
            margin-top: 5px;
        }
        button {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            background: linear-gradient(135deg, #cc4466, #aa2244);
            color: white;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 10px;
        }
        button:hover {
            background: linear-gradient(135deg, #ee6688, #cc4466);
            transform: translateY(-2px);
        }
        button.active {
            box-shadow: 0 0 15px rgba(255, 100, 150, 0.4);
        }
        .wave-indicator {
            text-align: center;
            padding: 15px;
            background: rgba(100, 50, 80, 0.2);
            border-radius: 10px;
            margin-bottom: 15px;
        }
        .wave-indicator .formula {
            font-family: 'Times New Roman', serif;
            font-size: 1.3rem;
            margin-bottom: 5px;
        }
        .wave-indicator .fermion-wave { color: #ff88aa; }
        .wave-indicator .boson-wave { color: #88aaff; }
        .essay {
            background: linear-gradient(145deg, #0a0815, #151025);
            border-radius: 15px;
            padding: 40px;
            line-height: 1.8;
            box-shadow: 0 10px 40px rgba(200,50,100,0.15);
        }
        .essay h2 {
            color: #ff88aa;
            margin: 30px 0 15px;
            font-size: 1.5rem;
        }
        .essay h2:first-child { margin-top: 0; }
        .essay p {
            margin-bottom: 15px;
            color: #c0b0c8;
        }
        .essay strong { color: #ffaacc; }
        .essay em { color: #aaccff; font-style: italic; }
        .highlight-box {
            background: rgba(255, 100, 150, 0.1);
            border-left: 4px solid #ff88aa;
            padding: 20px;
            margin: 25px 0;
            border-radius: 0 10px 10px 0;
        }
        .highlight-box.paradox {
            background: rgba(200, 80, 120, 0.1);
            border-left-color: #ff6688;
        }
        .formula-box {
            text-align: center;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Times New Roman', serif;
            font-size: 1.3rem;
            color: #ffaacc;
        }
        .sources {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #2a1825;
        }
        .sources h3 {
            color: #aa7799;
            margin-bottom: 15px;
        }
        .sources ul {
            list-style: none;
        }
        .sources li {
            margin-bottom: 10px;
        }
        .sources a {
            color: #996688;
            text-decoration: none;
        }
        .sources a:hover {
            color: #ff88aa;
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">← Back to Paradoxes</a>

    <header>
        <h1>Spin-Statistics Theorem</h1>
        <p class="subtitle">Why does rotation determine whether matter is solid? The deepest connection in quantum physics.</p>
    </header>

    <div class="container">
        <div class="demo-section">
            <div class="canvas-container fermion">
                <h3>Fermions (spin ½, 3/2, ...)</h3>
                <canvas id="fermionCanvas"></canvas>
            </div>
            <div class="canvas-container boson">
                <h3>Bosons (spin 0, 1, 2, ...)</h3>
                <canvas id="bosonCanvas"></canvas>
            </div>
        </div>

        <div class="controls-row">
            <div class="controls">
                <div class="comparison-panel">
                    <div class="compare-box fermion">
                        <h4>Fermions</h4>
                        <div class="spin">Spin: ½, 3/2, 5/2...</div>
                        <div class="stat">Antisymmetric ψ</div>
                        <div class="stat">→ Pauli Exclusion</div>
                        <div class="examples">e⁻, proton, neutron, quarks</div>
                    </div>
                    <div class="compare-box boson">
                        <h4>Bosons</h4>
                        <div class="spin">Spin: 0, 1, 2...</div>
                        <div class="stat">Symmetric ψ</div>
                        <div class="stat">→ Can pile up!</div>
                        <div class="examples">photon, gluon, W/Z, Higgs</div>
                    </div>
                </div>

                <div class="wave-indicator">
                    <div class="formula fermion-wave">Fermions: ψ(1,2) = −ψ(2,1)</div>
                    <div class="formula boson-wave">Bosons: ψ(1,2) = +ψ(2,1)</div>
                </div>

                <div class="control-group">
                    <label>Temperature</label>
                    <input type="range" id="temperature" min="0.1" max="2" value="1" step="0.1">
                    <div class="value-display" id="tempDisplay">T = 1.0</div>
                </div>

                <div class="control-group">
                    <label>Particle Count</label>
                    <input type="range" id="particles" min="5" max="30" value="15" step="1">
                    <div class="value-display" id="particleDisplay">15 particles</div>
                </div>

                <button id="exchangeBtn">Exchange Two Particles</button>
                <button id="resetBtn">Reset</button>
            </div>
        </div>

        <div class="essay">
            <h2>The Deepest Mystery</h2>
            <p>
                Why can't two electrons occupy the same quantum state? The answer lies in an
                extraordinarily deep connection: <strong>particles that spin by half-integer amounts
                must have antisymmetric wave functions</strong>. This seemingly arbitrary rule
                is why matter is solid, why the periodic table exists, why you don't fall through
                the floor.
            </p>

            <div class="highlight-box paradox">
                <strong>The Paradox:</strong> What does <em>rotation</em> have to do with
                <em>statistics</em>? Spin is angular momentum. Statistics is about counting
                identical particles. There seems to be no logical connection—yet the connection
                is absolutely necessary for physics to be consistent with special relativity.
            </div>

            <h2>Fermions: The Exclusive Particles</h2>
            <p>
                Particles with half-integer spin (½, 3/2, 5/2, ...) are called <strong>fermions</strong>.
                Their wave function must be <em>antisymmetric</em> under exchange: if you swap
                two fermions, the wave function picks up a minus sign.
            </p>

            <div class="formula-box">
                ψ(particle 1, particle 2) = −ψ(particle 2, particle 1)
            </div>

            <p>
                This has a devastating consequence: if both particles are in the <em>same state</em>,
                then ψ(1,2) = ψ(2,1). But the antisymmetry requires ψ(1,2) = −ψ(2,1). The only
                solution? ψ = 0. <strong>Two identical fermions cannot occupy the same quantum state.</strong>
            </p>
            <p>
                This is the <strong>Pauli Exclusion Principle</strong>—derived purely from the
                spin-statistics connection. Electrons, protons, neutrons, and quarks are all fermions.
            </p>

            <h2>Bosons: The Social Particles</h2>
            <p>
                Particles with integer spin (0, 1, 2, ...) are <strong>bosons</strong>. Their
                wave function is <em>symmetric</em>: swapping particles leaves it unchanged.
            </p>

            <div class="formula-box">
                ψ(particle 1, particle 2) = +ψ(particle 2, particle 1)
            </div>

            <p>
                Bosons have no exclusion—they can all pile into the same quantum state. This
                enables <em>Bose-Einstein condensation</em>: at low temperatures, bosons
                collectively occupy the ground state, creating macroscopic quantum phenomena
                like superfluidity and superconductivity (via Cooper pairs).
            </p>
            <p>
                Photons, gluons, W and Z bosons, and the Higgs boson are all bosons. So is
                helium-4 (even number of fermions → composite boson).
            </p>

            <div class="highlight-box">
                <strong>Why Matter is Solid:</strong> Without the exclusion principle, all
                electrons would collapse into the lowest orbital. No chemistry. No structure.
                No you. The spin-statistics theorem is why the universe has complexity.
            </div>

            <h2>The Proof: Relativity Required</h2>
            <p>
                Wolfgang Pauli proved the spin-statistics theorem in 1940. The key insight:
                consistency with <strong>special relativity</strong> demands this connection.
                Specifically, requiring that causality hold (no faster-than-light signaling)
                and that energy be bounded from below forces the spin-statistics relation.
            </p>
            <p>
                In non-relativistic quantum mechanics, the connection appears as an empirical
                fact. Only when you combine quantum mechanics with special relativity does it
                become a mathematical necessity.
            </p>

            <h2>Composite Particles</h2>
            <p>
                For composite particles, the rule is simple: count the fermions inside.
            </p>
            <p>
                <strong>Odd number of fermions → fermion.</strong> Helium-3 has 2 protons +
                1 neutron + 2 electrons = 5 fermions (odd) → He-3 is a fermion.
            </p>
            <p>
                <strong>Even number of fermions → boson.</strong> Helium-4 has 2 protons +
                2 neutrons + 2 electrons = 6 fermions (even) → He-4 is a boson.
            </p>
            <p>
                This is why He-3 and He-4 behave so differently at low temperatures: He-3
                remains a Fermi liquid while He-4 becomes a Bose-Einstein superfluid.
            </p>

            <h2>Statistics and Distributions</h2>
            <p>
                The spin-statistics connection determines how particles distribute over
                energy states:
            </p>
            <p>
                <strong>Fermi-Dirac statistics</strong> (fermions): At absolute zero, fermions
                fill states from lowest energy up to the "Fermi level." No two can share a state.
            </p>
            <p>
                <strong>Bose-Einstein statistics</strong> (bosons): At low temperatures, bosons
                preferentially occupy the lowest energy state. This leads to stimulated emission
                (lasers) and Bose-Einstein condensates.
            </p>

            <div class="sources">
                <h3>Sources & Further Reading</h3>
                <ul>
                    <li><a href="https://en.wikipedia.org/wiki/Spin–statistics_theorem">Wikipedia: Spin-Statistics Theorem</a></li>
                    <li><a href="https://en.wikipedia.org/wiki/Pauli_exclusion_principle">Wikipedia: Pauli Exclusion Principle</a></li>
                    <li><a href="https://en.wikipedia.org/wiki/Spin_(physics)">Wikipedia: Spin (Physics)</a></li>
                    <li><a href="https://web2.ph.utexas.edu/~vadim/Classes/2019f/spinstat.pdf">UT Austin: Spin-Statistics Theorem (PDF)</a></li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Fermion canvas
        const fermionCanvas = document.getElementById('fermionCanvas');
        const fermionCtx = fermionCanvas.getContext('2d');

        // Boson canvas
        const bosonCanvas = document.getElementById('bosonCanvas');
        const bosonCtx = bosonCanvas.getContext('2d');

        // High DPI setup
        const dpr = window.devicePixelRatio || 1;

        function setupCanvas(canvas, ctx) {
            const rect = canvas.getBoundingClientRect();
            canvas.width = rect.width * dpr;
            canvas.height = rect.width * 0.8 * dpr;
            canvas.style.height = rect.width * 0.8 + 'px';
            ctx.scale(dpr, dpr);
            return { width: rect.width, height: rect.width * 0.8 };
        }

        const fermionDims = setupCanvas(fermionCanvas, fermionCtx);
        const bosonDims = setupCanvas(bosonCanvas, bosonCtx);

        // State
        let time = 0;
        let temperature = 1.0;
        let particleCount = 15;
        let fermions = [];
        let bosons = [];
        let exchangeAnimation = null;

        // Energy levels
        const numLevels = 8;

        // Controls
        const tempSlider = document.getElementById('temperature');
        const particleSlider = document.getElementById('particles');
        const exchangeBtn = document.getElementById('exchangeBtn');
        const resetBtn = document.getElementById('resetBtn');

        tempSlider.addEventListener('input', e => {
            temperature = parseFloat(e.target.value);
            document.getElementById('tempDisplay').textContent = 'T = ' + temperature.toFixed(1);
            redistributeParticles();
        });

        particleSlider.addEventListener('input', e => {
            particleCount = parseInt(e.target.value);
            document.getElementById('particleDisplay').textContent = particleCount + ' particles';
            initParticles();
        });

        exchangeBtn.addEventListener('click', () => {
            startExchangeAnimation();
        });

        resetBtn.addEventListener('click', () => {
            initParticles();
        });

        class Particle {
            constructor(type, level, slot) {
                this.type = type;
                this.level = level;
                this.slot = slot;
                this.spin = type === 'fermion' ? (Math.random() < 0.5 ? 0.5 : -0.5) : 0;
                this.x = 0;
                this.y = 0;
                this.targetX = 0;
                this.targetY = 0;
                this.phase = Math.random() * Math.PI * 2;
            }

            setPosition(dims) {
                const levelHeight = dims.height / (numLevels + 1);
                this.targetY = dims.height - (this.level + 1) * levelHeight;

                const levelWidth = dims.width * 0.6;
                const startX = (dims.width - levelWidth) / 2;

                if (this.type === 'fermion') {
                    // Two slots per level (spin up/down)
                    this.targetX = startX + (this.slot + 0.5) * (levelWidth / 2);
                } else {
                    // Bosons can pile up - use same position with slight offset
                    this.targetX = dims.width / 2 + (Math.random() - 0.5) * 20;
                    this.targetY += (Math.random() - 0.5) * 10;
                }

                if (this.x === 0) {
                    this.x = this.targetX;
                    this.y = this.targetY;
                }
            }

            update() {
                this.x += (this.targetX - this.x) * 0.1;
                this.y += (this.targetY - this.y) * 0.1;
                this.phase += 0.05;
            }

            draw(ctx, highlight = false) {
                ctx.save();
                ctx.translate(this.x, this.y);

                // Glow
                const color = this.type === 'fermion' ? 'rgba(255, 100, 150, 0.3)' : 'rgba(100, 150, 255, 0.3)';
                const gradient = ctx.createRadialGradient(0, 0, 0, 0, 0, 20);
                gradient.addColorStop(0, color);
                gradient.addColorStop(1, 'transparent');
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(0, 0, 20, 0, Math.PI * 2);
                ctx.fill();

                // Particle body
                const baseColor = this.type === 'fermion' ? '#ff88aa' : '#88aaff';
                ctx.fillStyle = highlight ? '#ffffff' : baseColor;
                ctx.beginPath();
                ctx.arc(0, 0, 8, 0, Math.PI * 2);
                ctx.fill();

                // Spin arrow for fermions
                if (this.type === 'fermion' && this.spin !== 0) {
                    ctx.strokeStyle = this.spin > 0 ? '#ffcc88' : '#88ccff';
                    ctx.lineWidth = 2;
                    const arrowDir = this.spin > 0 ? -1 : 1;
                    ctx.beginPath();
                    ctx.moveTo(0, arrowDir * 12);
                    ctx.lineTo(0, arrowDir * (-5));
                    ctx.stroke();
                    // Arrowhead
                    ctx.beginPath();
                    ctx.moveTo(0, arrowDir * (-5));
                    ctx.lineTo(-4, arrowDir * 2);
                    ctx.lineTo(4, arrowDir * 2);
                    ctx.closePath();
                    ctx.fill();
                }

                ctx.restore();
            }
        }

        function initParticles() {
            fermions = [];
            bosons = [];

            // Distribute fermions (respecting exclusion)
            let fermionLevel = 0;
            let fermionSlot = 0;
            for (let i = 0; i < particleCount; i++) {
                const p = new Particle('fermion', fermionLevel, fermionSlot);
                p.spin = fermionSlot === 0 ? 0.5 : -0.5;
                fermions.push(p);
                p.setPosition(fermionDims);

                fermionSlot++;
                if (fermionSlot >= 2) {
                    fermionSlot = 0;
                    fermionLevel++;
                }
            }

            // Distribute bosons (all can go to ground state at low T)
            for (let i = 0; i < particleCount; i++) {
                const level = Math.floor(Math.random() * temperature * 3);
                const p = new Particle('boson', Math.min(level, numLevels - 1), 0);
                bosons.push(p);
                p.setPosition(bosonDims);
            }

            redistributeParticles();
        }

        function redistributeParticles() {
            // Fermions stay in their levels (exclusion)
            // Bosons redistribute based on temperature
            bosons.forEach(p => {
                if (temperature < 0.3) {
                    p.level = 0; // BEC: all in ground state
                } else {
                    p.level = Math.floor(Math.random() * temperature * 4);
                    p.level = Math.min(p.level, numLevels - 1);
                }
                p.setPosition(bosonDims);
            });
        }

        function startExchangeAnimation() {
            if (fermions.length < 2 || bosons.length < 2) return;

            // Pick two particles to exchange
            exchangeAnimation = {
                fermionPair: [0, 1],
                bosonPair: [0, 1],
                progress: 0,
                phase: 'swapping'
            };
        }

        function drawEnergyLevels(ctx, dims, type) {
            const levelHeight = dims.height / (numLevels + 1);

            for (let i = 0; i < numLevels; i++) {
                const y = dims.height - (i + 1) * levelHeight;

                ctx.strokeStyle = 'rgba(150, 150, 150, 0.3)';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(dims.width * 0.15, y);
                ctx.lineTo(dims.width * 0.85, y);
                ctx.stroke();

                // Level label
                ctx.fillStyle = 'rgba(150, 150, 150, 0.5)';
                ctx.font = '10px Segoe UI';
                ctx.textAlign = 'left';
                ctx.fillText('n=' + i, 5, y + 4);
            }

            // Energy arrow
            ctx.strokeStyle = 'rgba(200, 200, 200, 0.5)';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(dims.width - 20, dims.height - 20);
            ctx.lineTo(dims.width - 20, 30);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(dims.width - 20, 30);
            ctx.lineTo(dims.width - 25, 45);
            ctx.moveTo(dims.width - 20, 30);
            ctx.lineTo(dims.width - 15, 45);
            ctx.stroke();

            ctx.fillStyle = 'rgba(200, 200, 200, 0.7)';
            ctx.font = '11px Segoe UI';
            ctx.textAlign = 'center';
            ctx.fillText('E', dims.width - 20, 20);
        }

        function drawExchangeEffect(ctx, dims, particles, pair, type) {
            if (!exchangeAnimation || exchangeAnimation.progress >= 1) return;

            const p1 = particles[pair[0]];
            const p2 = particles[pair[1]];

            const prog = exchangeAnimation.progress;

            // Draw swap path
            ctx.strokeStyle = type === 'fermion' ? 'rgba(255, 100, 150, 0.5)' : 'rgba(100, 150, 255, 0.5)';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);

            const midX = (p1.x + p2.x) / 2;
            const midY = (p1.y + p2.y) / 2 - 30;

            ctx.beginPath();
            ctx.moveTo(p1.x, p1.y);
            ctx.quadraticCurveTo(midX, midY, p2.x, p2.y);
            ctx.stroke();
            ctx.setLineDash([]);

            // Wave function sign indicator
            const sign = type === 'fermion' ? '−' : '+';
            const signColor = type === 'fermion' ? '#ff6688' : '#88aaff';

            ctx.fillStyle = signColor;
            ctx.font = 'bold 24px Segoe UI';
            ctx.textAlign = 'center';
            ctx.fillText('ψ → ' + sign + 'ψ', dims.width / 2, 30);
        }

        function animate() {
            // Clear canvases
            fermionCtx.fillStyle = '#0a0815';
            fermionCtx.fillRect(0, 0, fermionDims.width, fermionDims.height);

            bosonCtx.fillStyle = '#0a0815';
            bosonCtx.fillRect(0, 0, bosonDims.width, bosonDims.height);

            // Draw energy levels
            drawEnergyLevels(fermionCtx, fermionDims, 'fermion');
            drawEnergyLevels(bosonCtx, bosonDims, 'boson');

            // Update and draw particles
            fermions.forEach((p, i) => {
                p.update();
                const highlight = exchangeAnimation && exchangeAnimation.fermionPair.includes(i);
                p.draw(fermionCtx, highlight);
            });

            bosons.forEach((p, i) => {
                p.update();
                const highlight = exchangeAnimation && exchangeAnimation.bosonPair.includes(i);
                p.draw(bosonCtx, highlight);
            });

            // Draw exchange animation
            if (exchangeAnimation) {
                drawExchangeEffect(fermionCtx, fermionDims, fermions, exchangeAnimation.fermionPair, 'fermion');
                drawExchangeEffect(bosonCtx, bosonDims, bosons, exchangeAnimation.bosonPair, 'boson');

                exchangeAnimation.progress += 0.02;
                if (exchangeAnimation.progress >= 1) {
                    exchangeAnimation = null;
                }
            }

            // Labels
            fermionCtx.fillStyle = '#aa6688';
            fermionCtx.font = '11px Segoe UI';
            fermionCtx.textAlign = 'center';
            fermionCtx.fillText('Max 2 per level (↑ and ↓)', fermionDims.width / 2, fermionDims.height - 10);

            bosonCtx.fillStyle = '#6688aa';
            bosonCtx.font = '11px Segoe UI';
            bosonCtx.textAlign = 'center';
            bosonCtx.fillText('All can occupy same state!', bosonDims.width / 2, bosonDims.height - 10);

            time++;
            requestAnimationFrame(animate);
        }

        // Handle resize
        window.addEventListener('resize', () => {
            setupCanvas(fermionCanvas, fermionCtx);
            setupCanvas(bosonCanvas, bosonCtx);
            initParticles();
        });

        initParticles();
        animate();
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
