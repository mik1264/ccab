<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Monty Hall Problem - Surprising Paradoxes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #e8e8e8;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            font-size: 2.2rem;
            background: linear-gradient(135deg, #f39c12, #e74c3c, #9b59b6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #aaa;
            font-size: 1.1rem;
        }

        .back-link {
            display: inline-block;
            color: #f39c12;
            text-decoration: none;
            margin-bottom: 20px;
            transition: transform 0.2s;
        }

        .back-link:hover {
            transform: translateX(-5px);
        }

        /* Game Stage */
        .game-stage {
            background: linear-gradient(180deg, #1a0a20 0%, #2d1b3d 100%);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 25px;
            border: 2px solid #4a3b5c;
            position: relative;
            overflow: hidden;
        }

        .stage-lights {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: linear-gradient(180deg, rgba(255,200,50,0.2), transparent);
            pointer-events: none;
        }

        .doors-container {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 20px;
        }

        .door-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .door-label {
            font-size: 1.2rem;
            color: #f39c12;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .door {
            width: 120px;
            height: 180px;
            background: linear-gradient(135deg, #8b4513 0%, #654321 50%, #4a3218 100%);
            border-radius: 10px 10px 0 0;
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
            border: 4px solid #5d3a1a;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .door::before {
            content: '';
            position: absolute;
            top: 50%;
            right: 15px;
            width: 15px;
            height: 15px;
            background: radial-gradient(circle, #ffd700, #b8860b);
            border-radius: 50%;
            transform: translateY(-50%);
            box-shadow: 0 0 10px rgba(255,215,0,0.5);
        }

        .door:hover:not(.disabled):not(.opened) {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(243,156,18,0.3);
        }

        .door.selected {
            border-color: #f39c12;
            box-shadow: 0 0 30px rgba(243,156,18,0.5);
        }

        .door.opened {
            transform: perspective(500px) rotateY(-100deg);
            transform-origin: left center;
            cursor: default;
        }

        .door.disabled {
            cursor: default;
            opacity: 0.7;
        }

        .door-content {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            opacity: 0;
            transition: opacity 0.3s ease 0.2s;
            background: linear-gradient(135deg, #2d1b3d, #1a0a20);
            border-radius: 10px 10px 0 0;
        }

        .door.opened .door-content {
            opacity: 1;
        }

        .prize-label {
            font-size: 1rem;
            color: #aaa;
            margin-top: 10px;
        }

        .car-icon { color: #e74c3c; }
        .goat-icon { color: #a0a0a0; }

        /* Game Status */
        .game-status {
            text-align: center;
            font-size: 1.3rem;
            color: #f39c12;
            min-height: 40px;
            margin-bottom: 15px;
        }

        .game-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 25px;
            font-size: 1rem;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: default;
        }

        .btn-switch {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
        }

        .btn-stay {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }

        .btn-switch:hover:not(:disabled), .btn-stay:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }

        .btn-reset {
            background: linear-gradient(135deg, #34495e, #2c3e50);
            color: white;
        }

        .btn-auto {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            color: white;
        }

        /* Statistics */
        .stats-panel {
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid rgba(243,156,18,0.2);
        }

        .stats-title {
            text-align: center;
            font-size: 1.3rem;
            color: #f39c12;
            margin-bottom: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .stat-box {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }

        .stat-box.switch { border-left: 4px solid #27ae60; }
        .stat-box.stay { border-left: 4px solid #e74c3c; }

        .stat-strategy {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .stat-strategy.switch { color: #27ae60; }
        .stat-strategy.stay { color: #e74c3c; }

        .stat-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        .stat-value {
            font-weight: bold;
            color: #f39c12;
        }

        .probability-bar {
            height: 30px;
            background: #2c3e50;
            border-radius: 15px;
            overflow: hidden;
            margin-top: 15px;
            position: relative;
        }

        .probability-fill {
            height: 100%;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .probability-fill.switch { background: linear-gradient(90deg, #27ae60, #2ecc71); }
        .probability-fill.stay { background: linear-gradient(90deg, #e74c3c, #c0392b); }

        /* Theory Box */
        .theory-box {
            background: linear-gradient(135deg, rgba(155,89,182,0.1), rgba(142,68,173,0.1));
            border: 1px solid rgba(155,89,182,0.3);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .theory-title {
            color: #9b59b6;
            font-size: 1.2rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .theory-content {
            line-height: 1.7;
            color: #ccc;
        }

        .probability-visual {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
        }

        .prob-column {
            text-align: center;
        }

        .prob-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .prob-circle.initial { background: linear-gradient(135deg, #3498db, #2980b9); }
        .prob-circle.switch { background: linear-gradient(135deg, #27ae60, #2ecc71); }
        .prob-circle.stay { background: linear-gradient(135deg, #e74c3c, #c0392b); }

        /* 100 Doors Demo */
        .hundred-doors {
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid rgba(52,152,219,0.3);
        }

        .hundred-title {
            color: #3498db;
            font-size: 1.2rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .doors-grid {
            display: grid;
            grid-template-columns: repeat(20, 1fr);
            gap: 3px;
            margin: 20px 0;
        }

        .mini-door {
            width: 100%;
            aspect-ratio: 1;
            background: #654321;
            border-radius: 3px;
            transition: all 0.3s ease;
            font-size: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .mini-door.selected { background: #f39c12; }
        .mini-door.revealed { background: #2c3e50; }
        .mini-door.remaining { background: #27ae60; animation: pulse 1s infinite; }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 5px #27ae60; }
            50% { box-shadow: 0 0 15px #27ae60; }
        }

        .hundred-explanation {
            color: #ccc;
            line-height: 1.7;
            text-align: center;
        }

        /* Insight Box */
        .insight-box {
            background: linear-gradient(135deg, rgba(231,76,60,0.1), rgba(192,57,43,0.1));
            border: 1px solid rgba(231,76,60,0.3);
            border-radius: 15px;
            padding: 25px;
        }

        .insight-title {
            color: #e74c3c;
            font-size: 1.2rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .insight-content {
            line-height: 1.7;
            color: #ccc;
        }

        .highlight {
            color: #f39c12;
            font-weight: bold;
        }

        @media (max-width: 600px) {
            .doors-container { gap: 15px; }
            .door { width: 90px; height: 140px; }
            .door-content { font-size: 3rem; }
            .stats-grid { grid-template-columns: 1fr; }
            .doors-grid { grid-template-columns: repeat(10, 1fr); }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">‚Üê Back to Paradoxes</a>

        <header>
            <h1>üö™ The Monty Hall Problem</h1>
            <p class="subtitle">Why switching doors wins 2/3 of the time</p>
        </header>

        <!-- Game Stage -->
        <div class="game-stage">
            <div class="stage-lights"></div>

            <div class="game-status" id="status">Pick a door to begin!</div>

            <div class="doors-container" id="doorsContainer">
                <div class="door-wrapper">
                    <div class="door-label">Door 1</div>
                    <div class="door" id="door0" data-index="0">
                        <div class="door-content" id="content0">
                            <span id="prize0"></span>
                            <span class="prize-label" id="label0"></span>
                        </div>
                    </div>
                </div>
                <div class="door-wrapper">
                    <div class="door-label">Door 2</div>
                    <div class="door" id="door1" data-index="1">
                        <div class="door-content" id="content1">
                            <span id="prize1"></span>
                            <span class="prize-label" id="label1"></span>
                        </div>
                    </div>
                </div>
                <div class="door-wrapper">
                    <div class="door-label">Door 3</div>
                    <div class="door" id="door2" data-index="2">
                        <div class="door-content" id="content2">
                            <span id="prize2"></span>
                            <span class="prize-label" id="label2"></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="game-controls">
                <button class="btn btn-switch" id="switchBtn" disabled>üîÑ Switch</button>
                <button class="btn btn-stay" id="stayBtn" disabled>‚úã Stay</button>
                <button class="btn btn-reset" id="resetBtn">üîÑ New Game</button>
                <button class="btn btn-auto" id="autoBtn">‚ö° Simulate 100</button>
            </div>
        </div>

        <!-- Statistics -->
        <div class="stats-panel">
            <div class="stats-title">üìä Strategy Statistics</div>
            <div class="stats-grid">
                <div class="stat-box switch">
                    <div class="stat-strategy switch">SWITCH Strategy</div>
                    <div class="stat-row">
                        <span>Games:</span>
                        <span class="stat-value" id="switchGames">0</span>
                    </div>
                    <div class="stat-row">
                        <span>Wins:</span>
                        <span class="stat-value" id="switchWins">0</span>
                    </div>
                    <div class="probability-bar">
                        <div class="probability-fill switch" id="switchBar" style="width: 0%">
                            <span id="switchPercent">0%</span>
                        </div>
                    </div>
                    <div style="margin-top: 10px; color: #888; font-size: 0.9rem;">
                        Expected: ~66.7%
                    </div>
                </div>
                <div class="stat-box stay">
                    <div class="stat-strategy stay">STAY Strategy</div>
                    <div class="stat-row">
                        <span>Games:</span>
                        <span class="stat-value" id="stayGames">0</span>
                    </div>
                    <div class="stat-row">
                        <span>Wins:</span>
                        <span class="stat-value" id="stayWins">0</span>
                    </div>
                    <div class="probability-bar">
                        <div class="probability-fill stay" id="stayBar" style="width: 0%">
                            <span id="stayPercent">0%</span>
                        </div>
                    </div>
                    <div style="margin-top: 10px; color: #888; font-size: 0.9rem;">
                        Expected: ~33.3%
                    </div>
                </div>
            </div>
        </div>

        <!-- Theory -->
        <div class="theory-box">
            <div class="theory-title">üß† Why Switching Wins</div>
            <div class="theory-content">
                <p>When you first pick a door, you have a <span class="highlight">1/3 chance</span> of being right
                and a <span class="highlight">2/3 chance</span> of being wrong.</p>

                <div class="probability-visual">
                    <div class="prob-column">
                        <div class="prob-circle initial">1/3</div>
                        <div>Your Door</div>
                    </div>
                    <div class="prob-column">
                        <div class="prob-circle initial">2/3</div>
                        <div>Other Doors</div>
                    </div>
                </div>

                <p>When Monty reveals a goat behind one of the other doors, he's not giving you new information
                about YOUR door‚Äîhe's <span class="highlight">concentrating the 2/3 probability</span> onto the
                remaining door!</p>

                <div class="probability-visual">
                    <div class="prob-column">
                        <div class="prob-circle stay">1/3</div>
                        <div>Stay = 33%</div>
                    </div>
                    <div class="prob-column">
                        <div class="prob-circle switch">2/3</div>
                        <div>Switch = 67%</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 100 Doors Demo -->
        <div class="hundred-doors">
            <div class="hundred-title">üí° The 100-Door Intuition</div>
            <div class="doors-grid" id="hundredDoors"></div>
            <div class="hundred-explanation">
                <p>Imagine 100 doors. You pick one (1% chance). Monty opens 98 doors showing goats,
                leaving just your door and one other.</p>
                <p>Your door still has a <span class="highlight">1% chance</span>.
                The remaining door has <span class="highlight">99%</span>!</p>
                <p style="margin-top: 15px;"><button class="btn btn-auto" id="demo100Btn">‚ñ∂ Animate</button></p>
            </div>
        </div>

        <!-- Insight -->
        <div class="insight-box">
            <div class="insight-title">üé≠ Famous Controversy</div>
            <div class="insight-content">
                <p>When Marilyn vos Savant published this problem in Parade magazine in 1990, she received
                <span class="highlight">10,000 letters</span>‚Äîincluding nearly 1,000 from PhDs‚Äîtelling her
                she was wrong!</p>
                <p style="margin-top: 15px;">Even legendary mathematician <span class="highlight">Paul Erd≈ës</span>
                refused to believe the answer until he saw computer simulations proving it. The problem perfectly
                illustrates how our intuitions about probability can mislead us.</p>
                <p style="margin-top: 15px; font-style: italic; color: #888;">Named after Monty Hall, host of
                "Let's Make a Deal" (1963-2003)</p>
            </div>
        </div>
    </div>

    <script>
        // Game state
        let carPosition = 0;
        let selectedDoor = -1;
        let revealedDoor = -1;
        let gamePhase = 'pick'; // pick, decide, finished

        // Statistics
        let stats = {
            switchGames: 0,
            switchWins: 0,
            stayGames: 0,
            stayWins: 0
        };

        // Elements
        const doors = [
            document.getElementById('door0'),
            document.getElementById('door1'),
            document.getElementById('door2')
        ];
        const statusEl = document.getElementById('status');
        const switchBtn = document.getElementById('switchBtn');
        const stayBtn = document.getElementById('stayBtn');
        const resetBtn = document.getElementById('resetBtn');
        const autoBtn = document.getElementById('autoBtn');

        // Initialize game
        function initGame() {
            // Randomly place car
            carPosition = Math.floor(Math.random() * 3);
            selectedDoor = -1;
            revealedDoor = -1;
            gamePhase = 'pick';

            // Reset doors
            doors.forEach((door, i) => {
                door.classList.remove('selected', 'opened', 'disabled');
                door.onclick = () => pickDoor(i);

                const prize = i === carPosition ? 'üöó' : 'üêê';
                const label = i === carPosition ? 'CAR!' : 'Goat';
                const colorClass = i === carPosition ? 'car-icon' : 'goat-icon';

                document.getElementById(`prize${i}`).textContent = prize;
                document.getElementById(`prize${i}`).className = colorClass;
                document.getElementById(`label${i}`).textContent = label;
            });

            statusEl.textContent = 'Pick a door to begin!';
            switchBtn.disabled = true;
            stayBtn.disabled = true;
        }

        // Pick a door
        function pickDoor(index) {
            if (gamePhase !== 'pick') return;

            selectedDoor = index;
            doors[index].classList.add('selected');

            // Monty reveals a goat
            revealGoat();
        }

        // Monty reveals a goat
        function revealGoat() {
            // Find a door that is not selected and not the car
            const options = [0, 1, 2].filter(i => i !== selectedDoor && i !== carPosition);
            revealedDoor = options[Math.floor(Math.random() * options.length)];

            setTimeout(() => {
                doors[revealedDoor].classList.add('opened', 'disabled');
                gamePhase = 'decide';

                statusEl.textContent = `Monty reveals a goat behind Door ${revealedDoor + 1}. Switch or Stay?`;
                switchBtn.disabled = false;
                stayBtn.disabled = false;

                // Disable clicking on doors
                doors.forEach(door => door.onclick = null);
            }, 500);
        }

        // Switch doors
        function switchDoors() {
            if (gamePhase !== 'decide') return;

            // Find the other door
            const newChoice = [0, 1, 2].find(i => i !== selectedDoor && i !== revealedDoor);
            doors[selectedDoor].classList.remove('selected');
            selectedDoor = newChoice;
            doors[selectedDoor].classList.add('selected');

            finishGame('switch');
        }

        // Stay with current door
        function stayWithDoor() {
            if (gamePhase !== 'decide') return;
            finishGame('stay');
        }

        // Finish the game
        function finishGame(strategy) {
            gamePhase = 'finished';
            switchBtn.disabled = true;
            stayBtn.disabled = true;

            // Open all doors
            doors.forEach(door => door.classList.add('opened'));

            // Check if won
            const won = selectedDoor === carPosition;

            // Update stats
            if (strategy === 'switch') {
                stats.switchGames++;
                if (won) stats.switchWins++;
            } else {
                stats.stayGames++;
                if (won) stats.stayWins++;
            }

            updateStats();

            // Show result
            if (won) {
                statusEl.innerHTML = `üéâ You WON the car by <span style="color: ${strategy === 'switch' ? '#27ae60' : '#e74c3c'}">${strategy === 'switch' ? 'switching' : 'staying'}</span>!`;
            } else {
                statusEl.innerHTML = `üò¢ You got a goat by <span style="color: ${strategy === 'switch' ? '#27ae60' : '#e74c3c'}">${strategy === 'switch' ? 'switching' : 'staying'}</span>.`;
            }
        }

        // Update statistics display
        function updateStats() {
            document.getElementById('switchGames').textContent = stats.switchGames;
            document.getElementById('switchWins').textContent = stats.switchWins;
            document.getElementById('stayGames').textContent = stats.stayGames;
            document.getElementById('stayWins').textContent = stats.stayWins;

            const switchPct = stats.switchGames > 0 ? (stats.switchWins / stats.switchGames * 100) : 0;
            const stayPct = stats.stayGames > 0 ? (stats.stayWins / stats.stayGames * 100) : 0;

            document.getElementById('switchBar').style.width = switchPct + '%';
            document.getElementById('switchPercent').textContent = switchPct.toFixed(1) + '%';
            document.getElementById('stayBar').style.width = stayPct + '%';
            document.getElementById('stayPercent').textContent = stayPct.toFixed(1) + '%';
        }

        // Simulate many games
        async function simulate(count) {
            autoBtn.disabled = true;

            for (let i = 0; i < count; i++) {
                // Quick simulation
                const car = Math.floor(Math.random() * 3);
                const pick = Math.floor(Math.random() * 3);

                // Switch always wins if initial pick was wrong
                const switchWins = pick !== car;
                const stayWins = pick === car;

                // Alternate strategies or random
                if (i % 2 === 0) {
                    stats.switchGames++;
                    if (switchWins) stats.switchWins++;
                } else {
                    stats.stayGames++;
                    if (stayWins) stats.stayWins++;
                }

                if (i % 10 === 0) {
                    updateStats();
                    await new Promise(r => setTimeout(r, 10));
                }
            }

            updateStats();
            autoBtn.disabled = false;
        }

        // 100 doors demo
        function setup100Doors() {
            const container = document.getElementById('hundredDoors');
            container.innerHTML = '';

            for (let i = 0; i < 100; i++) {
                const door = document.createElement('div');
                door.className = 'mini-door';
                door.id = `mini${i}`;
                container.appendChild(door);
            }
        }

        async function animate100Doors() {
            const btn = document.getElementById('demo100Btn');
            btn.disabled = true;

            // Reset all doors
            for (let i = 0; i < 100; i++) {
                document.getElementById(`mini${i}`).className = 'mini-door';
            }

            // Car position
            const carPos = Math.floor(Math.random() * 100);

            // Player picks door 0
            const picked = 0;
            document.getElementById(`mini${picked}`).classList.add('selected');

            await new Promise(r => setTimeout(r, 500));

            // Reveal 98 doors (all except picked and car)
            for (let i = 0; i < 100; i++) {
                if (i !== picked && i !== carPos) {
                    document.getElementById(`mini${i}`).classList.add('revealed');
                    if (i % 5 === 0) {
                        await new Promise(r => setTimeout(r, 30));
                    }
                }
            }

            await new Promise(r => setTimeout(r, 500));

            // Highlight remaining door
            if (carPos !== picked) {
                document.getElementById(`mini${carPos}`).classList.add('remaining');
                document.getElementById(`mini${carPos}`).textContent = 'üöó';
            } else {
                document.getElementById(`mini${picked}`).textContent = 'üöó';
            }

            btn.disabled = false;
        }

        // Event listeners
        switchBtn.onclick = switchDoors;
        stayBtn.onclick = stayWithDoor;
        resetBtn.onclick = initGame;
        autoBtn.onclick = () => simulate(100);
        document.getElementById('demo100Btn').onclick = animate100Doors;

        // Initialize
        initGame();
        setup100Doors();
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
