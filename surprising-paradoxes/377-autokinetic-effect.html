<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Autokinetic Effect - Surprising Paradoxes</title>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --sage: #8A9A5B;
            --moss: #606C38;
            --earth: #DDA15E;
            --cream: #FEFAE0;
            --terracotta: #BC6C25;
            --dark-moss: #3d4423;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, var(--cream) 0%, #F4F1DE 50%, #EDE8D5 100%);
            min-height: 100vh;
            color: var(--dark-moss);
            line-height: 1.7;
        }

        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--moss);
            text-decoration: none;
            font-weight: 600;
            padding: 10px 20px;
            background: rgba(255,255,255,0.8);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            transition: all 0.3s ease;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .back-link:hover {
            background: var(--moss);
            color: white;
            transform: translateX(-5px);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 80px 20px 40px;
        }

        h1 {
            font-family: 'Lora', serif;
            font-size: 2.8rem;
            color: var(--moss);
            margin-bottom: 10px;
            text-align: center;
        }

        .subtitle {
            text-align: center;
            color: var(--terracotta);
            font-size: 1.2rem;
            margin-bottom: 40px;
            font-weight: 500;
        }

        .intro-card {
            background: rgba(255,255,255,0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }

        .intro-card h2 {
            font-family: 'Lora', serif;
            color: var(--moss);
            margin-bottom: 15px;
        }

        .experiment-phase {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .experiment-phase.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .btn {
            display: inline-block;
            padding: 15px 35px;
            background: var(--moss);
            color: white;
            border: none;
            border-radius: 30px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            font-family: 'Nunito', sans-serif;
        }

        .btn:hover {
            background: var(--dark-moss);
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(96, 108, 56, 0.3);
        }

        .btn-secondary {
            background: var(--terracotta);
        }

        .btn-secondary:hover {
            background: #a55a1f;
        }

        .dark-room {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 1000;
            display: none;
            cursor: crosshair;
        }

        .dark-room.active {
            display: block;
        }

        .light-dot {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #fff;
            border-radius: 50%;
            box-shadow: 0 0 20px #fff, 0 0 40px #fff;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .dark-room-ui {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            color: rgba(255,255,255,0.7);
        }

        .instruction-text {
            font-size: 1rem;
            margin-bottom: 15px;
            max-width: 400px;
        }

        .trial-info {
            position: absolute;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255,255,255,0.5);
            font-size: 0.9rem;
        }

        .movement-slider {
            width: 300px;
            margin: 20px auto;
        }

        .movement-slider input {
            width: 100%;
            height: 8px;
            accent-color: white;
            background: rgba(255,255,255,0.2);
            border-radius: 4px;
        }

        .slider-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 0.8rem;
            color: rgba(255,255,255,0.5);
        }

        .current-estimate {
            font-size: 2rem;
            font-weight: 700;
            color: white;
            margin: 10px 0;
        }

        .exit-btn {
            padding: 10px 25px;
            background: rgba(255,255,255,0.15);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .exit-btn:hover {
            background: rgba(255,255,255,0.25);
        }

        .results-card {
            background: linear-gradient(135deg, var(--moss) 0%, var(--dark-moss) 100%);
            color: white;
            border-radius: 20px;
            padding: 40px;
            margin: 30px 0;
            text-align: center;
        }

        .results-card h2 {
            font-family: 'Lora', serif;
            font-size: 2rem;
            margin-bottom: 20px;
        }

        .chart-container {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
        }

        .chart-title {
            font-weight: 600;
            margin-bottom: 15px;
        }

        canvas {
            max-width: 100%;
        }

        .science-section {
            background: rgba(255,255,255,0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
        }

        .science-section h3 {
            font-family: 'Lora', serif;
            color: var(--moss);
            margin-bottom: 15px;
        }

        blockquote {
            border-left: 4px solid var(--earth);
            padding-left: 20px;
            margin: 20px 0;
            font-style: italic;
            color: var(--terracotta);
        }

        .group-phase {
            background: rgba(255,255,255,0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
        }

        .group-member {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: rgba(255,255,255,0.5);
            border-radius: 12px;
            margin: 10px 0;
        }

        .member-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--sage);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1.2rem;
        }

        .member-info {
            flex: 1;
        }

        .member-name {
            font-weight: 600;
            color: var(--moss);
        }

        .member-estimate {
            font-size: 0.9rem;
            color: var(--terracotta);
        }

        .you-badge {
            background: var(--earth);
            color: white;
            padding: 2px 10px;
            border-radius: 10px;
            font-size: 0.8rem;
        }

        .convergence-chart {
            background: rgba(255,255,255,0.5);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-box {
            background: rgba(255,255,255,0.15);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
        }

        .stat-label {
            font-size: 0.85rem;
            opacity: 0.9;
        }

        .timer-display {
            position: absolute;
            top: 30px;
            right: 30px;
            color: rgba(255,255,255,0.4);
            font-size: 1.2rem;
        }

        @media (max-width: 600px) {
            h1 { font-size: 2rem; }
            .movement-slider { width: 250px; }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">
        <span>←</span> Back to Paradoxes
    </a>

    <div class="container">
        <h1>The Autokinetic Effect</h1>
        <p class="subtitle">When Stillness Creates Movement</p>

        <!-- Phase 1: Introduction -->
        <div id="phase1" class="experiment-phase active">
            <div class="intro-card">
                <h2>A Light That Moves... But Doesn't</h2>
                <p>In a completely dark room, stare at a single point of light. Within seconds, something strange happens: <strong>the light appears to move</strong>.</p>
                <p>It drifts. It wanders. It traces patterns in the darkness.</p>
                <p>But the light never moved at all. <strong>Your brain invented the motion.</strong></p>
            </div>

            <div class="science-section">
                <h3>Why Does This Happen?</h3>
                <p>In normal vision, your eyes make tiny involuntary movements called <strong>microsaccades</strong>. Your brain normally compensates for these by comparing the movement to stable reference points in your environment.</p>
                <p>But in complete darkness with only a single point of light:</p>
                <ul style="margin: 15px 0; padding-left: 25px;">
                    <li>There are <strong>no reference points</strong></li>
                    <li>Your eyes still make their tiny movements</li>
                    <li>Your brain can't tell if you moved or the light moved</li>
                    <li>It defaults to assuming <strong>the light moved</strong></li>
                </ul>
            </div>

            <div class="science-section">
                <h3>Sherif's Conformity Experiment (1935)</h3>
                <p>Turkish-American psychologist <strong>Muzafer Sherif</strong> realized this ambiguous illusion was perfect for studying social influence. In his landmark experiment:</p>
                <ol style="margin: 15px 0; padding-left: 25px;">
                    <li><strong>Phase 1</strong>: Individuals estimated how far the light "moved" — answers varied wildly (2-25 cm)</li>
                    <li><strong>Phase 2</strong>: Groups of three estimated together, saying answers aloud — estimates <strong>converged</strong> to a shared norm</li>
                    <li><strong>Phase 3</strong>: Tested individually again — people <strong>kept the group norm</strong></li>
                </ol>
                <blockquote>
                    "Subjects were changed by the group experience, whether they realized it or not."
                    <br><br>— Muzafer Sherif, 1935
                </blockquote>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" onclick="startExperiment()">Begin the Experiment</button>
                <p style="margin-top: 15px; color: var(--terracotta);">3 trials alone, then 3 trials with a "group"</p>
            </div>
        </div>

        <!-- Phase 2: Solo Trials -->
        <div id="phase2" class="experiment-phase">
            <div class="intro-card" style="text-align: center;">
                <h2>Phase 1: Individual Trials</h2>
                <p>You'll observe the light 3 times. After each observation, estimate how far it appeared to move.</p>
                <p>Remember: The light is actually <strong>completely stationary</strong>.</p>
                <div style="margin-top: 25px;">
                    <button class="btn" onclick="startTrial('solo')">Start Trial <span id="soloTrialNum">1</span> of 3</button>
                </div>
            </div>
        </div>

        <!-- Phase 3: Group Introduction -->
        <div id="phase3" class="experiment-phase">
            <div class="intro-card" style="text-align: center;">
                <h2>Phase 2: Group Trials</h2>
                <p>Now you'll estimate with two other participants. You'll hear their estimates before giving yours.</p>
                <p><em>(These are simulated participants based on Sherif's actual experimental data)</em></p>
            </div>

            <div class="group-phase">
                <h3 style="font-family: 'Lora', serif; color: var(--moss); margin-bottom: 20px;">Your Group</h3>
                <div class="group-member">
                    <div class="member-avatar">A</div>
                    <div class="member-info">
                        <div class="member-name">Participant A</div>
                        <div class="member-estimate">Initial estimate: <span id="partAInit">?</span> cm</div>
                    </div>
                </div>
                <div class="group-member">
                    <div class="member-avatar">B</div>
                    <div class="member-info">
                        <div class="member-name">Participant B</div>
                        <div class="member-estimate">Initial estimate: <span id="partBInit">?</span> cm</div>
                    </div>
                </div>
                <div class="group-member">
                    <div class="member-avatar" style="background: var(--terracotta);">Y</div>
                    <div class="member-info">
                        <div class="member-name">You <span class="you-badge">That's you</span></div>
                        <div class="member-estimate">Your average: <span id="yourAvg">?</span> cm</div>
                    </div>
                </div>
            </div>

            <div style="text-align: center;">
                <button class="btn" onclick="startGroupTrials()">Begin Group Trials</button>
            </div>
        </div>

        <!-- Phase 4: Group Trials -->
        <div id="phase4" class="experiment-phase">
            <div class="intro-card" style="text-align: center;">
                <h2>Group Trial <span id="groupTrialNum">1</span> of 3</h2>
                <p>Watch the light, then you'll see what Participant A and B estimate before giving yours.</p>
                <div style="margin-top: 25px;">
                    <button class="btn" onclick="startTrial('group')">Observe the Light</button>
                </div>
            </div>
        </div>

        <!-- Phase 5: Group Response -->
        <div id="phase5" class="experiment-phase">
            <div class="group-phase">
                <h3 style="font-family: 'Lora', serif; color: var(--moss); margin-bottom: 20px;">Group Estimates - Trial <span id="groupTrialLabel">1</span></h3>
                <div class="group-member" id="partAResponse" style="opacity: 0; transition: opacity 0.5s;">
                    <div class="member-avatar">A</div>
                    <div class="member-info">
                        <div class="member-name">Participant A says:</div>
                        <div class="member-estimate" style="font-size: 1.3rem; font-weight: 700; color: var(--moss);">"<span id="partAEst">?</span> centimeters"</div>
                    </div>
                </div>
                <div class="group-member" id="partBResponse" style="opacity: 0; transition: opacity 0.5s;">
                    <div class="member-avatar">B</div>
                    <div class="member-info">
                        <div class="member-name">Participant B says:</div>
                        <div class="member-estimate" style="font-size: 1.3rem; font-weight: 700; color: var(--moss);">"<span id="partBEst">?</span> centimeters"</div>
                    </div>
                </div>
                <div class="group-member" id="yourResponse" style="opacity: 0; transition: opacity 0.5s;">
                    <div class="member-avatar" style="background: var(--terracotta);">Y</div>
                    <div class="member-info">
                        <div class="member-name">Your turn:</div>
                        <div style="margin-top: 10px;">
                            <input type="range" id="groupSlider" min="1" max="25" value="10" style="width: 200px; accent-color: var(--terracotta);">
                            <div style="font-size: 1.5rem; font-weight: 700; color: var(--terracotta);"><span id="groupSliderVal">10</span> cm</div>
                        </div>
                    </div>
                </div>
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn" id="submitGroupBtn" onclick="submitGroupResponse()" style="opacity: 0; transition: opacity 0.5s;">Submit Your Estimate</button>
            </div>
        </div>

        <!-- Phase 6: Results -->
        <div id="phase6" class="experiment-phase">
            <div class="results-card">
                <h2>Your Results</h2>
                <p>Did your estimates converge toward the group?</p>
                <div class="stat-grid">
                    <div class="stat-box">
                        <div class="stat-number" id="soloAvgStat">?</div>
                        <div class="stat-label">Your Solo Average (cm)</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number" id="groupAvgStat">?</div>
                        <div class="stat-label">Your Group Average (cm)</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number" id="convergenceStat">?</div>
                        <div class="stat-label">Convergence %</div>
                    </div>
                </div>
            </div>

            <div class="science-section">
                <h3>Your Convergence Chart</h3>
                <p>Watch how estimates change from individual to group trials:</p>
                <div class="convergence-chart">
                    <canvas id="convergenceCanvas" width="600" height="300"></canvas>
                </div>
            </div>

            <div class="science-section">
                <h3>What Sherif Found</h3>
                <p>In Sherif's original 1935 experiment:</p>
                <ul style="margin: 15px 0; padding-left: 25px;">
                    <li><strong>Individual estimates varied wildly</strong>: from 2 to 25+ centimeters</li>
                    <li><strong>Group estimates converged</strong>: after several trials, groups developed a shared "norm"</li>
                    <li><strong>Norms persisted</strong>: when tested alone later, people kept the group estimate</li>
                    <li><strong>Subjects were unaware</strong>: most believed their estimates were their own</li>
                </ul>
                <p>This demonstrated <strong>informational conformity</strong>: in ambiguous situations, we look to others as sources of information about reality.</p>
            </div>

            <div class="science-section">
                <h3>The Deeper Lesson</h3>
                <p>The autokinetic effect reveals two profound truths:</p>
                <ol style="margin: 15px 0; padding-left: 25px;">
                    <li><strong>Perception is constructed</strong>: Your brain doesn't passively receive reality—it actively builds it. Without reference points, it invents motion that doesn't exist.</li>
                    <li><strong>Social reality is negotiated</strong>: When we're uncertain, we unconsciously calibrate our perceptions to match those around us. The group becomes a reference point for "truth."</li>
                </ol>
                <blockquote>
                    "In ambiguous situations, we use other people as an anchor for our own judgments—and often internalize those judgments as our own."
                </blockquote>
            </div>

            <div class="btn-group">
                <button class="btn" onclick="resetExperiment()">Start Over</button>
            </div>
        </div>
    </div>

    <!-- Dark Room Overlay -->
    <div id="darkRoom" class="dark-room">
        <div class="light-dot" id="lightDot"></div>
        <div class="timer-display" id="trialTimer">10</div>
        <div class="trial-info" id="trialInfo">Trial 1 of 3</div>
        <div class="dark-room-ui" id="darkRoomUI" style="display: none;">
            <div class="instruction-text">
                How far did the light appear to move?
            </div>
            <div class="movement-slider">
                <input type="range" id="movementSlider" min="1" max="25" value="10">
                <div class="slider-labels">
                    <span>1 cm</span>
                    <span>25 cm</span>
                </div>
            </div>
            <div class="current-estimate"><span id="estimateValue">10</span> cm</div>
            <button class="exit-btn" onclick="submitEstimate()">Submit Estimate</button>
        </div>
    </div>

    <script>
        // Experiment state
        let soloTrials = [];
        let groupTrials = [];
        let currentSoloTrial = 0;
        let currentGroupTrial = 0;
        let trialMode = 'solo';
        let trialInterval = null;
        let trialCountdown = 10;

        // Simulated group members (based on Sherif's data patterns)
        let partA = { init: 0, estimates: [] };
        let partB = { init: 0, estimates: [] };

        function startExperiment() {
            // Generate group members with different starting points
            // One high estimator, one low estimator
            partA.init = 5 + Math.random() * 4; // 5-9 cm
            partB.init = 15 + Math.random() * 6; // 15-21 cm

            document.getElementById('partAInit').textContent = partA.init.toFixed(1);
            document.getElementById('partBInit').textContent = partB.init.toFixed(1);

            showPhase(2);
        }

        function startTrial(mode) {
            trialMode = mode;
            document.getElementById('darkRoom').classList.add('active');
            document.getElementById('darkRoomUI').style.display = 'none';

            // Update trial info
            const trialNum = mode === 'solo' ? currentSoloTrial + 1 : currentGroupTrial + 1;
            document.getElementById('trialInfo').textContent = `Trial ${trialNum} of 3`;

            // Start countdown
            trialCountdown = 10;
            document.getElementById('trialTimer').textContent = trialCountdown;

            trialInterval = setInterval(() => {
                trialCountdown--;
                document.getElementById('trialTimer').textContent = trialCountdown;

                if (trialCountdown <= 0) {
                    clearInterval(trialInterval);
                    if (mode === 'solo') {
                        showSoloResponse();
                    } else {
                        showGroupPhase();
                    }
                }
            }, 1000);
        }

        function showSoloResponse() {
            document.getElementById('darkRoomUI').style.display = 'block';

            // Set slider to random starting point
            const slider = document.getElementById('movementSlider');
            slider.value = 8 + Math.floor(Math.random() * 10);
            document.getElementById('estimateValue').textContent = slider.value;

            slider.oninput = function() {
                document.getElementById('estimateValue').textContent = this.value;
            };
        }

        function submitEstimate() {
            const estimate = parseInt(document.getElementById('movementSlider').value);
            soloTrials.push(estimate);
            currentSoloTrial++;

            document.getElementById('darkRoom').classList.remove('active');

            if (currentSoloTrial < 3) {
                document.getElementById('soloTrialNum').textContent = currentSoloTrial + 1;
                showPhase(2);
            } else {
                // Calculate average and show group phase
                const avg = soloTrials.reduce((a, b) => a + b, 0) / soloTrials.length;
                document.getElementById('yourAvg').textContent = avg.toFixed(1);
                showPhase(3);
            }
        }

        function startGroupTrials() {
            currentGroupTrial = 0;
            generateGroupEstimates();
            showPhase(4);
        }

        function generateGroupEstimates() {
            // Simulate group convergence (they move toward a middle ground)
            const yourAvg = soloTrials.reduce((a, b) => a + b, 0) / soloTrials.length;
            const groupCenter = (partA.init + partB.init + yourAvg) / 3;

            partA.estimates = [];
            partB.estimates = [];

            for (let i = 0; i < 3; i++) {
                // Each trial, they move closer to group center
                const progress = (i + 1) / 3 * 0.6; // 20%, 40%, 60% convergence
                const noise = (Math.random() - 0.5) * 2;

                partA.estimates.push(partA.init + (groupCenter - partA.init) * progress + noise);
                partB.estimates.push(partB.init + (groupCenter - partB.init) * progress + noise);
            }
        }

        function showGroupPhase() {
            document.getElementById('darkRoom').classList.remove('active');
            document.getElementById('groupTrialNum').textContent = currentGroupTrial + 1;
            document.getElementById('groupTrialLabel').textContent = currentGroupTrial + 1;

            // Reset visibility
            document.getElementById('partAResponse').style.opacity = '0';
            document.getElementById('partBResponse').style.opacity = '0';
            document.getElementById('yourResponse').style.opacity = '0';
            document.getElementById('submitGroupBtn').style.opacity = '0';

            // Set up group slider
            const slider = document.getElementById('groupSlider');
            const yourAvg = soloTrials.reduce((a, b) => a + b, 0) / soloTrials.length;
            slider.value = Math.round(yourAvg);
            document.getElementById('groupSliderVal').textContent = slider.value;

            slider.oninput = function() {
                document.getElementById('groupSliderVal').textContent = this.value;
            };

            showPhase(5);

            // Reveal estimates one by one
            setTimeout(() => {
                document.getElementById('partAEst').textContent = partA.estimates[currentGroupTrial].toFixed(1);
                document.getElementById('partAResponse').style.opacity = '1';
            }, 500);

            setTimeout(() => {
                document.getElementById('partBEst').textContent = partB.estimates[currentGroupTrial].toFixed(1);
                document.getElementById('partBResponse').style.opacity = '1';
            }, 1500);

            setTimeout(() => {
                document.getElementById('yourResponse').style.opacity = '1';
                document.getElementById('submitGroupBtn').style.opacity = '1';
            }, 2500);
        }

        function submitGroupResponse() {
            const estimate = parseInt(document.getElementById('groupSlider').value);
            groupTrials.push(estimate);
            currentGroupTrial++;

            if (currentGroupTrial < 3) {
                document.getElementById('groupTrialNum').textContent = currentGroupTrial + 1;
                showPhase(4);
            } else {
                showResults();
            }
        }

        function showResults() {
            const soloAvg = soloTrials.reduce((a, b) => a + b, 0) / soloTrials.length;
            const groupAvg = groupTrials.reduce((a, b) => a + b, 0) / groupTrials.length;
            const groupCenter = (partA.init + partB.init + soloAvg) / 3;

            // Calculate convergence (how much you moved toward group center)
            const initialDist = Math.abs(soloAvg - groupCenter);
            const finalDist = Math.abs(groupAvg - groupCenter);
            const convergence = initialDist > 0 ? Math.round((1 - finalDist / initialDist) * 100) : 0;

            document.getElementById('soloAvgStat').textContent = soloAvg.toFixed(1);
            document.getElementById('groupAvgStat').textContent = groupAvg.toFixed(1);
            document.getElementById('convergenceStat').textContent = Math.max(0, convergence) + '%';

            drawConvergenceChart();
            showPhase(6);
        }

        function drawConvergenceChart() {
            const canvas = document.getElementById('convergenceCanvas');
            const ctx = canvas.getContext('2d');
            const w = canvas.width;
            const h = canvas.height;

            ctx.fillStyle = '#f8f6f1';
            ctx.fillRect(0, 0, w, h);

            // Draw axes
            ctx.strokeStyle = '#606C38';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(60, 20);
            ctx.lineTo(60, h - 40);
            ctx.lineTo(w - 20, h - 40);
            ctx.stroke();

            // Labels
            ctx.fillStyle = '#606C38';
            ctx.font = '12px Nunito';
            ctx.textAlign = 'center';

            // X-axis labels
            const trials = ['Solo 1', 'Solo 2', 'Solo 3', 'Group 1', 'Group 2', 'Group 3'];
            const xStep = (w - 100) / 5;
            trials.forEach((label, i) => {
                ctx.fillText(label, 80 + i * xStep, h - 20);
            });

            // Y-axis labels
            ctx.textAlign = 'right';
            for (let i = 0; i <= 25; i += 5) {
                const y = h - 40 - (i / 25) * (h - 80);
                ctx.fillText(i + ' cm', 55, y + 4);
                ctx.strokeStyle = '#ddd';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(60, y);
                ctx.lineTo(w - 20, y);
                ctx.stroke();
            }

            // Draw group members' lines
            const allPartA = [partA.init, partA.init, partA.init, ...partA.estimates];
            const allPartB = [partB.init, partB.init, partB.init, ...partB.estimates];
            const allYou = [...soloTrials, ...groupTrials];

            function drawLine(data, color) {
                ctx.strokeStyle = color;
                ctx.lineWidth = 3;
                ctx.beginPath();
                data.forEach((val, i) => {
                    const x = 80 + i * xStep;
                    const y = h - 40 - (val / 25) * (h - 80);
                    if (i === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                });
                ctx.stroke();

                // Draw points
                ctx.fillStyle = color;
                data.forEach((val, i) => {
                    const x = 80 + i * xStep;
                    const y = h - 40 - (val / 25) * (h - 80);
                    ctx.beginPath();
                    ctx.arc(x, y, 5, 0, Math.PI * 2);
                    ctx.fill();
                });
            }

            drawLine(allPartA, '#8A9A5B');
            drawLine(allPartB, '#606C38');
            drawLine(allYou, '#BC6C25');

            // Legend
            ctx.font = '11px Nunito';
            ctx.textAlign = 'left';
            const legendY = 35;

            ctx.fillStyle = '#8A9A5B';
            ctx.fillRect(w - 150, legendY, 15, 15);
            ctx.fillStyle = '#333';
            ctx.fillText('Participant A', w - 130, legendY + 12);

            ctx.fillStyle = '#606C38';
            ctx.fillRect(w - 150, legendY + 20, 15, 15);
            ctx.fillStyle = '#333';
            ctx.fillText('Participant B', w - 130, legendY + 32);

            ctx.fillStyle = '#BC6C25';
            ctx.fillRect(w - 150, legendY + 40, 15, 15);
            ctx.fillStyle = '#333';
            ctx.fillText('You', w - 130, legendY + 52);
        }

        function showPhase(num) {
            document.querySelectorAll('.experiment-phase').forEach(p => p.classList.remove('active'));
            document.getElementById('phase' + num).classList.add('active');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function resetExperiment() {
            soloTrials = [];
            groupTrials = [];
            currentSoloTrial = 0;
            currentGroupTrial = 0;
            document.getElementById('soloTrialNum').textContent = '1';
            showPhase(1);
        }
    </script>
</body>
</html>
