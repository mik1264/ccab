<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Second System Effect - Surprising Paradoxes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #e8e8e8;
            min-height: 100vh;
            line-height: 1.8;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .back-link {
            display: inline-block;
            color: #64b5f6;
            text-decoration: none;
            margin-bottom: 30px;
            font-size: 14px;
            transition: color 0.3s;
        }

        .back-link:hover {
            color: #90caf9;
        }

        h1 {
            font-size: 2.5rem;
            background: linear-gradient(135deg, #e94560, #ff6b6b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.3rem;
            color: #90caf9;
            margin-bottom: 30px;
            font-style: italic;
        }

        .paradox-statement {
            background: rgba(233, 69, 96, 0.1);
            border-left: 4px solid #e94560;
            padding: 25px;
            margin: 30px 0;
            font-size: 1.25rem;
            border-radius: 0 10px 10px 0;
        }

        .section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
        }

        h2 {
            color: #e94560;
            font-size: 1.5rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .icon {
            font-size: 1.5rem;
        }

        /* System Comparison Visualization */
        .systems-container {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .system-box {
            flex: 1;
            min-width: 200px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s ease;
            border: 2px solid transparent;
        }

        .system-box:hover {
            transform: translateY(-5px);
        }

        .system-box.first {
            border-color: #4caf50;
        }

        .system-box.second {
            border-color: #e94560;
        }

        .system-box.third {
            border-color: #2196f3;
        }

        .system-box.active {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(233, 69, 96, 0.3);
        }

        .system-icon {
            font-size: 3rem;
            margin-bottom: 10px;
        }

        .system-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .system-subtitle {
            font-size: 0.85rem;
            opacity: 0.7;
            margin-bottom: 15px;
        }

        .features-bar {
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .features-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 1s ease;
        }

        .first .features-fill { background: linear-gradient(90deg, #4caf50, #8bc34a); }
        .second .features-fill { background: linear-gradient(90deg, #e94560, #ff6b6b); }
        .third .features-fill { background: linear-gradient(90deg, #2196f3, #64b5f6); }

        .feature-count {
            font-size: 2rem;
            font-weight: bold;
            margin: 10px 0;
        }

        .first .feature-count { color: #4caf50; }
        .second .feature-count { color: #e94560; }
        .third .feature-count { color: #2196f3; }

        /* Feature Request Simulator */
        .simulator {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
        }

        .simulator-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .project-phase {
            font-size: 1.2rem;
            padding: 8px 20px;
            border-radius: 20px;
            background: rgba(233, 69, 96, 0.2);
            color: #e94560;
        }

        .stats-row {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #64b5f6;
        }

        .stat-label {
            font-size: 0.75rem;
            opacity: 0.7;
        }

        .feature-backlog {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 20px 0;
            min-height: 50px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        .feature-chip {
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            animation: chipAppear 0.3s ease;
            white-space: nowrap;
        }

        @keyframes chipAppear {
            from { transform: scale(0); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .feature-chip.essential { background: #4caf50; color: white; }
        .feature-chip.nice { background: #ff9800; color: white; }
        .feature-chip.bloat { background: #e94560; color: white; }

        .btn-row {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .btn-add {
            background: linear-gradient(135deg, #e94560, #ff6b6b);
            color: white;
        }

        .btn-add:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(233, 69, 96, 0.4);
        }

        .btn-ship {
            background: linear-gradient(135deg, #4caf50, #8bc34a);
            color: white;
        }

        .btn-ship:hover {
            transform: scale(1.05);
        }

        .btn-reset {
            background: rgba(255, 255, 255, 0.1);
            color: #e8e8e8;
        }

        .btn-reset:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Complexity Chart */
        .chart-container {
            width: 100%;
            height: 300px;
            position: relative;
            margin: 20px 0;
        }

        .chart-canvas {
            width: 100%;
            height: 100%;
        }

        /* Quote */
        .quote {
            background: linear-gradient(135deg, rgba(233, 69, 96, 0.1), rgba(100, 181, 246, 0.1));
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            position: relative;
        }

        .quote::before {
            content: '"';
            font-size: 4rem;
            color: #e94560;
            opacity: 0.3;
            position: absolute;
            top: 10px;
            left: 20px;
        }

        .quote-text {
            font-size: 1.2rem;
            font-style: italic;
            margin-bottom: 15px;
            padding-left: 40px;
        }

        .quote-author {
            text-align: right;
            color: #64b5f6;
            font-size: 1rem;
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding-left: 30px;
            margin: 30px 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 10px;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(to bottom, #4caf50, #e94560, #2196f3);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 25px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -25px;
            top: 20px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 3px solid;
        }

        .timeline-item:nth-child(1)::before { border-color: #4caf50; background: #4caf50; }
        .timeline-item:nth-child(2)::before { border-color: #ff9800; background: #ff9800; }
        .timeline-item:nth-child(3)::before { border-color: #e94560; background: #e94560; }
        .timeline-item:nth-child(4)::before { border-color: #2196f3; background: #2196f3; }

        .timeline-title {
            font-weight: bold;
            color: #64b5f6;
            margin-bottom: 5px;
        }

        /* Examples */
        .examples-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .example-card {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
            transition: transform 0.3s;
        }

        .example-card:hover {
            transform: translateY(-3px);
        }

        .example-title {
            color: #e94560;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }

        .example-detail {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .first-label { color: #4caf50; }
        .second-label { color: #e94560; }

        /* Ship Result Modal */
        .result-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .result-modal.show {
            display: flex;
        }

        .result-content {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            max-width: 500px;
            margin: 20px;
            animation: modalPop 0.4s ease;
        }

        @keyframes modalPop {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .result-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .result-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
        }

        .result-success .result-icon { color: #4caf50; }
        .result-success .result-title { color: #4caf50; }
        .result-bloated .result-icon { color: #e94560; }
        .result-bloated .result-title { color: #e94560; }

        .close-modal {
            margin-top: 20px;
            padding: 10px 30px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1rem;
        }

        .close-modal:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .insight-box {
            background: rgba(33, 150, 243, 0.1);
            border-left: 4px solid #2196f3;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
        }

        .insight-box h3 {
            color: #64b5f6;
            margin-bottom: 10px;
        }

        .references {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .references h3 {
            color: #64b5f6;
            margin-bottom: 15px;
        }

        .references ul {
            list-style: none;
        }

        .references li {
            margin-bottom: 10px;
            padding-left: 20px;
            position: relative;
        }

        .references li::before {
            content: '‚Üí';
            position: absolute;
            left: 0;
            color: #e94560;
        }

        .references a {
            color: #90caf9;
            text-decoration: none;
        }

        .references a:hover {
            text-decoration: underline;
        }

        @media (max-width: 600px) {
            h1 { font-size: 1.8rem; }
            .systems-container { flex-direction: column; }
            .system-box { min-width: 100%; }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">‚Üê Back to Surprising Paradoxes</a>

        <h1>The Second System Effect</h1>
        <p class="subtitle">Why Your Ambitious Sequel Will Likely Fail</p>

        <div class="paradox-statement">
            <strong>The Paradox:</strong> Success with a first project leads to overconfidence in the second,
            causing architects to add every feature they restrained themselves from in v1‚Äîresulting in a
            bloated, delayed, often failed "second system."
        </div>

        <div class="section">
            <h2><span class="icon">üìä</span> The Three Systems Pattern</h2>
            <p>Click each system to see how complexity evolves:</p>

            <div class="systems-container">
                <div class="system-box first active" onclick="selectSystem(1)">
                    <div class="system-icon">üå±</div>
                    <div class="system-title">First System</div>
                    <div class="system-subtitle">"Careful & Constrained"</div>
                    <div class="features-bar">
                        <div class="features-fill" style="width: 35%"></div>
                    </div>
                    <div class="feature-count">12</div>
                    <div>Core Features</div>
                </div>

                <div class="system-box second" onclick="selectSystem(2)">
                    <div class="system-icon">üêâ</div>
                    <div class="system-title">Second System</div>
                    <div class="system-subtitle">"Dangerous & Bloated"</div>
                    <div class="features-bar">
                        <div class="features-fill" style="width: 95%"></div>
                    </div>
                    <div class="feature-count">47</div>
                    <div>Crammed Features</div>
                </div>

                <div class="system-box third" onclick="selectSystem(3)">
                    <div class="system-icon">‚öñÔ∏è</div>
                    <div class="system-title">Third System</div>
                    <div class="system-subtitle">"Wise & Balanced"</div>
                    <div class="features-bar">
                        <div class="features-fill" style="width: 55%"></div>
                    </div>
                    <div class="feature-count">18</div>
                    <div>Right Features</div>
                </div>
            </div>

            <div id="system-explanation" class="insight-box">
                <h3>üå± First System: The Cautious Beginner</h3>
                <p>The architect knows they don't fully understand the problem yet. Fear of failure leads to
                <strong>restraint</strong>‚Äîonly essential features make it in. Ideas get saved in a mental
                "next time" list. The result is often spare, clean, and surprisingly successful.</p>
            </div>
        </div>

        <div class="quote">
            <p class="quote-text">This second is the most dangerous system a man ever designs. The general
            tendency is to over-design the second system, using all the ideas and frills that were
            cautiously sidetracked on the first one.</p>
            <p class="quote-author">‚Äî Fred Brooks, <em>The Mythical Man-Month</em> (1975)</p>
        </div>

        <div class="section">
            <h2><span class="icon">üéÆ</span> Feature Creep Simulator</h2>
            <p>Experience the second system effect yourself! Add features until you're ready to ship:</p>

            <div class="simulator">
                <div class="simulator-header">
                    <div class="project-phase" id="project-phase">Building System 1</div>
                    <div class="stats-row">
                        <div class="stat">
                            <div class="stat-value" id="feature-count">0</div>
                            <div class="stat-label">Features</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="complexity-score">1.0x</div>
                            <div class="stat-label">Complexity</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="ship-risk">5%</div>
                            <div class="stat-label">Failure Risk</div>
                        </div>
                    </div>
                </div>

                <div class="feature-backlog" id="feature-backlog">
                    <em style="opacity: 0.5;">Features will appear here...</em>
                </div>

                <div class="btn-row">
                    <button class="btn btn-add" onclick="addFeature()">+ Add Feature</button>
                    <button class="btn btn-ship" onclick="shipProduct()">üöÄ Ship It!</button>
                    <button class="btn btn-reset" onclick="resetSimulator()">‚Ü∫ Start Over</button>
                </div>
            </div>
        </div>

        <div class="section">
            <h2><span class="icon">üìà</span> The Psychological Timeline</h2>

            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-title">Phase 1: First System Development</div>
                    <p>Humble. Cautious. Every feature is questioned. "Do we really need this?" The lack of
                    confidence becomes a superpower‚Äîonly the essential survives.</p>
                </div>

                <div class="timeline-item">
                    <div class="timeline-title">Phase 2: First System Success</div>
                    <p>Victory! But during development, the architect accumulated a mental wishlist:
                    "Next time, we'll add X, Y, Z..." These ideas feel validated by success.</p>
                </div>

                <div class="timeline-item">
                    <div class="timeline-title">Phase 3: Second System Begins</div>
                    <p>Confidence is high. The floodgates open. Every deferred feature, every "wouldn't it
                    be cool if..." gets added. Scope explodes. Complexity compounds exponentially.</p>
                </div>

                <div class="timeline-item">
                    <div class="timeline-title">Phase 4: The Reckoning</div>
                    <p>Late. Over budget. Buggy. Users confused by features they never asked for.
                    The second system collapses under its own weight‚Äîor limps to release, unloved.</p>
                </div>
            </div>
        </div>

        <div class="section">
            <h2><span class="icon">üí°</span> Real-World Examples</h2>

            <div class="examples-grid">
                <div class="example-card">
                    <div class="example-title">OS/360 (IBM)</div>
                    <p class="first-label">First: IBM 1410/7010</p>
                    <p class="second-label">Second: OS/360</p>
                    <p class="example-detail">Brooks' own example. OS/360 was late, over budget, memory-hungry,
                    and initially buggy. The team's previous successes bred dangerous overconfidence.</p>
                </div>

                <div class="example-card">
                    <div class="example-title">Windows Vista (Microsoft)</div>
                    <p class="first-label">First: Windows XP</p>
                    <p class="second-label">Second: Windows Vista</p>
                    <p class="example-detail">Crammed with features, resource-heavy, poor compatibility.
                    Microsoft learned: Windows 7 was a focused, refined "third system."</p>
                </div>

                <div class="example-card">
                    <div class="example-title">Netscape 6</div>
                    <p class="first-label">First: Netscape Navigator</p>
                    <p class="second-label">Second: Netscape 6 (complete rewrite)</p>
                    <p class="example-detail">The ambitious rewrite took 3 years. By release, Internet Explorer
                    dominated. The perfect is the enemy of the shipped.</p>
                </div>

                <div class="example-card">
                    <div class="example-title">Duke Nukem Forever</div>
                    <p class="first-label">First: Duke Nukem 3D (1996)</p>
                    <p class="second-label">Second: Duke Nukem Forever</p>
                    <p class="example-detail">15 years in development hell. Constant engine rewrites to add
                    "the latest" features. Finally shipped to mediocre reviews.</p>
                </div>
            </div>
        </div>

        <div class="insight-box">
            <h3>üõ°Ô∏è How to Defend Against Second System Effect</h3>
            <ul style="margin-left: 20px; margin-top: 10px;">
                <li><strong>Assign a skeptic</strong> whose job is to say "Do we really need this?"</li>
                <li><strong>Time-box feature additions</strong>‚Äîno new features after a deadline</li>
                <li><strong>Remember your fear</strong>‚Äîartificially recreate first-system caution</li>
                <li><strong>Ship incrementally</strong>‚Äîget user feedback before committing to complexity</li>
                <li><strong>Study your deferred list</strong>‚Äîmost "essential" v2 features weren't missed by users</li>
            </ul>
        </div>

        <div class="section">
            <h2><span class="icon">üß†</span> The Psychology Behind It</h2>
            <p>The second system effect is a perfect storm of cognitive biases:</p>
            <ul style="margin-left: 20px; margin-top: 15px;">
                <li><strong>Overconfidence Bias:</strong> Success inflates perceived ability</li>
                <li><strong>Planning Fallacy:</strong> Underestimating time/complexity of additions</li>
                <li><strong>Sunk Cost Fallacy:</strong> "We've planned these features, we can't drop them now"</li>
                <li><strong>Feature Positive Effect:</strong> Easier to imagine benefits of features than costs</li>
                <li><strong>Hindsight Bias:</strong> First system's constraints now seem "too limiting"</li>
            </ul>
        </div>

        <div class="references">
            <h3>References</h3>
            <ul>
                <li>Brooks, F.P. (1975). <em>The Mythical Man-Month: Essays on Software Engineering</em>. Addison-Wesley.</li>
                <li><a href="https://en.wikipedia.org/wiki/Second-system_effect" target="_blank">Wikipedia: Second-system effect</a></li>
                <li><a href="https://softpanorama.org/SE/Laws_of_software_development/second_system_effect.shtml" target="_blank">Softpanorama: The Second System Effect</a></li>
            </ul>
        </div>
    </div>

    <!-- Result Modal -->
    <div class="result-modal" id="result-modal">
        <div class="result-content" id="result-content">
            <div class="result-icon" id="result-icon">üéâ</div>
            <div class="result-title" id="result-title">Success!</div>
            <p id="result-message">Your product shipped successfully!</p>
            <button class="close-modal" onclick="closeModal()">Continue</button>
        </div>
    </div>

    <script>
        // System Selection
        const explanations = {
            1: `<h3>üå± First System: The Cautious Beginner</h3>
                <p>The architect knows they don't fully understand the problem yet. Fear of failure leads to
                <strong>restraint</strong>‚Äîonly essential features make it in. Ideas get saved in a mental
                "next time" list. The result is often spare, clean, and surprisingly successful.</p>`,
            2: `<h3>üêâ Second System: The Dangerous Sequel</h3>
                <p>Now armed with "mastery," the architect unleashes every deferred idea. "This time we'll do it
                <em>right</em>!" becomes a rallying cry for scope creep. Features multiply. Complexity compounds.
                The team's confidence blinds them to the gathering storm.</p>`,
            3: `<h3>‚öñÔ∏è Third System: Hard-Won Wisdom</h3>
                <p>Chastened by the second system's failures, the architect finally achieves balance. They now
                know which features <em>actually</em> matter vs. which seemed important. Restraint returns‚Äîbut
                this time from wisdom, not fear. The third system is often the best.</p>`
        };

        function selectSystem(num) {
            document.querySelectorAll('.system-box').forEach((box, i) => {
                box.classList.toggle('active', i === num - 1);
            });
            document.getElementById('system-explanation').innerHTML = explanations[num];
        }

        // Feature Creep Simulator
        const essentialFeatures = [
            "User login", "Save data", "Basic UI", "Search", "Settings",
            "Notifications", "Profile", "Dashboard"
        ];

        const niceToHaveFeatures = [
            "Dark mode", "Themes", "Analytics", "Export CSV", "Undo/redo",
            "Keyboard shortcuts", "Social sharing", "Favorites", "Tags",
            "Custom fonts", "Widgets", "Templates"
        ];

        const bloatFeatures = [
            "AI suggestions", "Blockchain backup", "3D view mode", "Voice control",
            "AR preview", "Social feed", "Achievements", "Leaderboard",
            "In-app purchases", "Subscription tiers", "White-label SDK",
            "Plugin marketplace", "Custom scripting", "Collaboration mode",
            "Video chat", "Screen recording", "Translation (47 languages)",
            "Offline-first sync", "IoT integration", "Metaverse portal"
        ];

        let currentFeatures = [];
        let systemNumber = 1;
        let shippedSystems = 0;

        function getRandomFeature() {
            const all = [...essentialFeatures, ...niceToHaveFeatures, ...bloatFeatures]
                .filter(f => !currentFeatures.includes(f));

            if (all.length === 0) return null;

            // Probability based on system number
            let pool;
            if (systemNumber === 1) {
                // First system: mostly essential
                const weights = [0.7, 0.25, 0.05];
                const rand = Math.random();
                if (rand < weights[0]) pool = essentialFeatures;
                else if (rand < weights[0] + weights[1]) pool = niceToHaveFeatures;
                else pool = bloatFeatures;
            } else {
                // Second system: bloat creep!
                const weights = [0.15, 0.35, 0.5];
                const rand = Math.random();
                if (rand < weights[0]) pool = essentialFeatures;
                else if (rand < weights[0] + weights[1]) pool = niceToHaveFeatures;
                else pool = bloatFeatures;
            }

            const available = pool.filter(f => !currentFeatures.includes(f));
            if (available.length === 0) {
                return all[Math.floor(Math.random() * all.length)];
            }
            return available[Math.floor(Math.random() * available.length)];
        }

        function getFeatureType(feature) {
            if (essentialFeatures.includes(feature)) return 'essential';
            if (niceToHaveFeatures.includes(feature)) return 'nice';
            return 'bloat';
        }

        function updateStats() {
            const count = currentFeatures.length;
            const bloatCount = currentFeatures.filter(f => getFeatureType(f) === 'bloat').length;
            const niceCount = currentFeatures.filter(f => getFeatureType(f) === 'nice').length;

            const complexity = (1 + count * 0.1 + bloatCount * 0.3 + niceCount * 0.15).toFixed(1);
            const risk = Math.min(95, 5 + count * 2 + bloatCount * 8 + niceCount * 3);

            document.getElementById('feature-count').textContent = count;
            document.getElementById('complexity-score').textContent = complexity + 'x';
            document.getElementById('ship-risk').textContent = risk + '%';

            // Color code risk
            const riskEl = document.getElementById('ship-risk');
            if (risk < 30) riskEl.style.color = '#4caf50';
            else if (risk < 60) riskEl.style.color = '#ff9800';
            else riskEl.style.color = '#e94560';
        }

        function addFeature() {
            const feature = getRandomFeature();
            if (!feature) {
                alert("You've added every possible feature! Ship it or start over.");
                return;
            }

            currentFeatures.push(feature);

            const backlog = document.getElementById('feature-backlog');
            if (currentFeatures.length === 1) {
                backlog.innerHTML = '';
            }

            const chip = document.createElement('span');
            chip.className = `feature-chip ${getFeatureType(feature)}`;
            chip.textContent = feature;
            backlog.appendChild(chip);

            updateStats();
        }

        function shipProduct() {
            if (currentFeatures.length === 0) {
                alert("Add at least one feature before shipping!");
                return;
            }

            const count = currentFeatures.length;
            const bloatCount = currentFeatures.filter(f => getFeatureType(f) === 'bloat').length;
            const risk = Math.min(95, 5 + count * 2 + bloatCount * 8);

            const success = Math.random() * 100 > risk;

            const modal = document.getElementById('result-modal');
            const content = document.getElementById('result-content');
            const icon = document.getElementById('result-icon');
            const title = document.getElementById('result-title');
            const message = document.getElementById('result-message');

            if (success) {
                content.className = 'result-content result-success';
                icon.textContent = 'üéâ';
                title.textContent = systemNumber === 1 ? 'System 1 Shipped!' : 'Against All Odds!';

                if (systemNumber === 1) {
                    message.innerHTML = `<strong>${count} features</strong> shipped successfully!<br><br>
                    Now, with your newfound confidence, it's time to build System 2...<br>
                    <em>All those features you held back? Now's the time!</em>`;
                    shippedSystems++;
                } else {
                    message.innerHTML = `Wow! Your bloated System 2 actually shipped!<br>
                    ${bloatCount} bloat features and it still worked. You got lucky!`;
                }
            } else {
                content.className = 'result-content result-bloated';
                icon.textContent = 'üí•';
                title.textContent = 'Project Failed!';
                message.innerHTML = `<strong>${count} features</strong> was too many.<br>
                ${bloatCount > 5 ? `The ${bloatCount} bloat features killed it.` : 'Complexity overwhelmed the team.'}<br><br>
                <em>This is the Second System Effect in action.</em>`;
            }

            modal.classList.add('show');
        }

        function closeModal() {
            document.getElementById('result-modal').classList.remove('show');

            // If system 1 succeeded, move to system 2
            if (shippedSystems === 1 && systemNumber === 1) {
                systemNumber = 2;
                currentFeatures = [];
                document.getElementById('feature-backlog').innerHTML =
                    '<em style="opacity: 0.5;">System 2 begins... add those features you held back!</em>';
                document.getElementById('project-phase').textContent = 'Building System 2';
                document.getElementById('project-phase').style.background = 'rgba(233, 69, 96, 0.3)';
                updateStats();
            }
        }

        function resetSimulator() {
            systemNumber = 1;
            shippedSystems = 0;
            currentFeatures = [];
            document.getElementById('feature-backlog').innerHTML =
                '<em style="opacity: 0.5;">Features will appear here...</em>';
            document.getElementById('project-phase').textContent = 'Building System 1';
            document.getElementById('project-phase').style.background = 'rgba(233, 69, 96, 0.2)';
            updateStats();
        }

        // Initialize
        updateStats();
    </script>
</body>
</html>
