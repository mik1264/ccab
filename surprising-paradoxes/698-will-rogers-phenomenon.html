<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>698 - Will Rogers Phenomenon | Surprising Paradoxes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #e8e8e8;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 25px;
        }

        h1 {
            font-size: 2.4rem;
            background: linear-gradient(135deg, #f39c12, #e74c3c);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.1rem;
            color: #a0a0a0;
            max-width: 800px;
            margin: 0 auto;
        }

        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #f39c12;
            text-decoration: none;
            font-size: 1rem;
            opacity: 0.8;
            transition: opacity 0.3s;
            z-index: 100;
        }

        .back-link:hover {
            opacity: 1;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }

        @media (max-width: 1100px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        .panel {
            background: rgba(255,255,255,0.05);
            border-radius: 20px;
            padding: 20px;
        }

        .panel-title {
            font-size: 1.2rem;
            color: #f39c12;
            margin-bottom: 15px;
            text-align: center;
        }

        .quote-box {
            background: rgba(243, 156, 18, 0.1);
            border-left: 4px solid #f39c12;
            padding: 15px;
            border-radius: 0 12px 12px 0;
            margin-bottom: 20px;
            font-style: italic;
        }

        .quote-box p {
            color: #e8e8e8;
            font-size: 1rem;
            line-height: 1.6;
        }

        .quote-box .attribution {
            color: #f39c12;
            font-style: normal;
            font-weight: 600;
            margin-top: 10px;
        }

        .groups-container {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 15px;
            align-items: center;
        }

        .group-box {
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            padding: 20px;
            min-height: 300px;
        }

        .group-header {
            text-align: center;
            margin-bottom: 15px;
        }

        .group-name {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .group-name.oklahoma {
            color: #e74c3c;
        }

        .group-name.california {
            color: #3498db;
        }

        .group-average {
            font-size: 2rem;
            font-weight: 700;
        }

        .group-average.up {
            color: #2ecc71;
        }

        .group-average.down {
            color: #e74c3c;
        }

        .average-label {
            font-size: 0.8rem;
            color: #a0a0a0;
        }

        .people-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
        }

        .person {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 700;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
        }

        .person:hover {
            transform: scale(1.15);
            border-color: #f39c12;
        }

        .person.selected {
            border-color: #f39c12;
            box-shadow: 0 0 15px rgba(243, 156, 18, 0.5);
        }

        .person.migrant {
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(243, 156, 18, 0.5); }
            50% { box-shadow: 0 0 15px 5px rgba(243, 156, 18, 0.3); }
        }

        .arrow-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .migrate-btn {
            padding: 10px 15px;
            background: linear-gradient(135deg, #f39c12, #e74c3c);
            border: none;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            font-size: 1.5rem;
            transition: transform 0.2s;
        }

        .migrate-btn:hover {
            transform: scale(1.1);
        }

        .migrate-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        button {
            padding: 10px 20px;
            background: linear-gradient(135deg, #f39c12, #e74c3c);
            border: none;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(243, 156, 18, 0.3);
        }

        .stats-row {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .stat-box {
            background: rgba(255,255,255,0.08);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #f39c12;
        }

        .stat-label {
            font-size: 0.8rem;
            color: #a0a0a0;
            margin-top: 5px;
        }

        .explanation {
            background: rgba(46, 204, 113, 0.1);
            border-left: 4px solid #2ecc71;
            padding: 15px;
            border-radius: 0 12px 12px 0;
            margin-top: 20px;
        }

        .explanation h4 {
            color: #2ecc71;
            margin-bottom: 10px;
        }

        .explanation p {
            font-size: 0.9rem;
            color: #c0c0c0;
            line-height: 1.6;
        }

        .medical-section {
            background: rgba(231, 76, 60, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }

        .medical-section h4 {
            color: #e74c3c;
            margin-bottom: 15px;
            text-align: center;
        }

        .stage-boxes {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .stage-box {
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
        }

        .stage-name {
            font-weight: 600;
            margin-bottom: 10px;
        }

        .stage-name.early {
            color: #2ecc71;
        }

        .stage-name.late {
            color: #e74c3c;
        }

        .survival-bar {
            height: 25px;
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            overflow: hidden;
            margin: 10px 0;
        }

        .survival-fill {
            height: 100%;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 10px;
            font-size: 0.8rem;
            font-weight: 600;
            transition: width 0.5s;
        }

        .history-box {
            background: rgba(52, 152, 219, 0.1);
            border-radius: 15px;
            padding: 15px;
            margin-top: 15px;
        }

        .history-box h4 {
            color: #3498db;
            margin-bottom: 10px;
        }

        .history-box p {
            font-size: 0.85rem;
            color: #a0a0a0;
            line-height: 1.6;
        }

        .migration-log {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            max-height: 150px;
            overflow-y: auto;
        }

        .log-entry {
            font-size: 0.85rem;
            padding: 5px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            color: #b0b0b0;
        }

        .log-entry:last-child {
            border-bottom: none;
        }

        .log-entry .iq {
            color: #f39c12;
            font-weight: 600;
        }

        .change-indicator {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 5px;
        }

        .change-indicator.positive {
            background: rgba(46, 204, 113, 0.3);
            color: #2ecc71;
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back to Paradoxes</a>

    <div class="container">
        <header>
            <h1>The Will Rogers Phenomenon</h1>
            <p class="subtitle">Move someone from Group A to Group B, and BOTH averages go up. Impossible? Nope. It happens in cancer staging, education tracking, and everyday statistics.</p>
        </header>

        <div class="main-grid">
            <div class="panel">
                <div class="panel-title">ü§† The Original Joke</div>

                <div class="quote-box">
                    <p>"When the Okies left Oklahoma and moved to California, they raised the average intelligence level in both states."</p>
                    <div class="attribution">‚Äî Attributed to Will Rogers</div>
                </div>

                <div class="groups-container">
                    <div class="group-box">
                        <div class="group-header">
                            <div class="group-name oklahoma">Oklahoma</div>
                            <div class="group-average" id="oklahomaAvg">100</div>
                            <div class="average-label">Average IQ</div>
                        </div>
                        <div class="people-grid" id="oklahomaGroup">
                            <!-- Filled by JS -->
                        </div>
                    </div>

                    <div class="arrow-container">
                        <button class="migrate-btn" id="migrateBtn" onclick="migrateLowest()">‚Üí</button>
                        <div style="font-size: 0.8rem; color: #a0a0a0; text-align: center;">Click to<br>migrate</div>
                    </div>

                    <div class="group-box">
                        <div class="group-header">
                            <div class="group-name california">California</div>
                            <div class="group-average" id="californiaAvg">110</div>
                            <div class="average-label">Average IQ</div>
                        </div>
                        <div class="people-grid" id="californiaGroup">
                            <!-- Filled by JS -->
                        </div>
                    </div>
                </div>

                <div class="controls">
                    <button onclick="resetGroups()">Reset</button>
                    <button onclick="autoMigrate()">Auto-Migrate All Eligible</button>
                </div>

                <div class="migration-log" id="migrationLog">
                    <div style="color: #a0a0a0; text-align: center; font-size: 0.85rem;">Migration log will appear here</div>
                </div>
            </div>

            <div class="panel">
                <div class="panel-title">üìä Why It Works</div>

                <div class="stats-row">
                    <div class="stat-box">
                        <div class="stat-value" id="migrantCount">0</div>
                        <div class="stat-label">People Migrated</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="bothIncreased">0</div>
                        <div class="stat-label">Both Increased</div>
                    </div>
                </div>

                <div class="explanation">
                    <h4>üîë The Key Insight</h4>
                    <p>The migrant is the <strong>lowest</strong> in Group A but <strong>higher than average</strong> in Group B.</p>
                    <p style="margin-top: 10px;">Removing the lowest raises Group A's average. Adding someone above average raises Group B's average. Both go up!</p>
                    <p style="margin-top: 10px;"><strong>The magic zone:</strong> Anyone with IQ between Oklahoma's lowest and California's average can raise both!</p>
                </div>

                <div class="stat-box" style="margin-top: 15px;">
                    <div style="font-size: 0.9rem; color: #a0a0a0; margin-bottom: 10px;">Current "Magic Zone" for Migration</div>
                    <div style="display: flex; justify-content: center; align-items: center; gap: 10px;">
                        <span style="color: #e74c3c;" id="zoneMin">95</span>
                        <span style="color: #a0a0a0;">to</span>
                        <span style="color: #3498db;" id="zoneMax">110</span>
                    </div>
                    <div style="font-size: 0.8rem; color: #a0a0a0; margin-top: 5px;">Anyone in this range raises both averages</div>
                </div>

                <div class="history-box">
                    <h4>üìú Historical Context</h4>
                    <p>The joke predates Will Rogers and has been told about various states and countries. Dr. Alvan Feinstein coined "Will Rogers Phenomenon" in 1985 while studying cancer staging, where improved diagnostics moved patients between stages‚Äîraising survival rates in ALL stages without improving any individual outcome!</p>
                </div>
            </div>

            <div class="panel" style="grid-column: span 2;">
                <div class="panel-title">üè• Medical Stage Migration: The Serious Application</div>

                <div class="medical-section">
                    <h4>Cancer Staging Example</h4>
                    <p style="text-align: center; color: #b0b0b0; margin-bottom: 20px;">
                        Better imaging detects hidden metastases, "upgrading" patients from Stage I to Stage II.
                        These patients were the worst in Stage I but are the best in Stage II‚Äîso both stages show improved survival!
                    </p>

                    <div class="stage-boxes">
                        <div class="stage-box">
                            <div class="stage-name early">Stage I (Early)</div>
                            <div style="font-size: 0.85rem; color: #a0a0a0;">Before: Mixed outcomes</div>
                            <div class="survival-bar">
                                <div class="survival-fill" style="width: 70%; background: linear-gradient(90deg, #2ecc71, #27ae60);">70%</div>
                            </div>
                            <div style="font-size: 0.85rem; color: #a0a0a0;">After: Worst cases removed</div>
                            <div class="survival-bar">
                                <div class="survival-fill" style="width: 85%; background: linear-gradient(90deg, #2ecc71, #27ae60);">85%</div>
                            </div>
                            <div class="change-indicator positive">+15%</div>
                        </div>

                        <div class="stage-box">
                            <div class="stage-name late">Stage II (Advanced)</div>
                            <div style="font-size: 0.85rem; color: #a0a0a0;">Before: Severe cases only</div>
                            <div class="survival-bar">
                                <div class="survival-fill" style="width: 30%; background: linear-gradient(90deg, #e74c3c, #c0392b);">30%</div>
                            </div>
                            <div style="font-size: 0.85rem; color: #a0a0a0;">After: Healthier cases added</div>
                            <div class="survival-bar">
                                <div class="survival-fill" style="width: 45%; background: linear-gradient(90deg, #e74c3c, #c0392b);">45%</div>
                            </div>
                            <div class="change-indicator positive">+15%</div>
                        </div>
                    </div>

                    <p style="text-align: center; color: #e74c3c; margin-top: 20px; font-weight: 600;">
                        ‚ö†Ô∏è Both stages show "improvement" but NO individual patient got better!
                    </p>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                    <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 15px;">
                        <h4 style="color: #f39c12; margin-bottom: 10px;">Real-World Examples</h4>
                        <ul style="font-size: 0.85rem; color: #b0b0b0; padding-left: 20px; line-height: 1.8;">
                            <li>Lung cancer staging with CT scans (1985 study)</li>
                            <li>Breast cancer with improved imaging</li>
                            <li>Multiple sclerosis with MRI (McDonald criteria)</li>
                            <li>Prostate cancer with PSA testing</li>
                            <li>School "tracking" systems moving students between levels</li>
                        </ul>
                    </div>

                    <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 15px;">
                        <h4 style="color: #e74c3c; margin-bottom: 10px;">Why This Matters</h4>
                        <p style="font-size: 0.85rem; color: #b0b0b0; line-height: 1.6;">
                            When comparing treatments across eras, "improved survival rates" might just be stage migration, not better treatment! Clinical trials must use historical controls carefully. A "breakthrough" could be an illusion created by reclassification.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // State
        let oklahoma = [];
        let california = [];
        let migrantCount = 0;
        let bothIncreasedCount = 0;
        let logs = [];

        // IQ color scale
        function getIQColor(iq) {
            const normalized = (iq - 80) / 50; // 80-130 range
            const r = Math.round(231 - normalized * 100);
            const g = Math.round(76 + normalized * 128);
            const b = Math.round(60 + normalized * 80);
            return `rgb(${r}, ${g}, ${b})`;
        }

        // Initialize groups
        function initGroups() {
            oklahoma = [];
            california = [];

            // Oklahoma: IQ 85-115, average ~100
            for (let i = 0; i < 12; i++) {
                oklahoma.push(Math.round(85 + Math.random() * 30));
            }

            // California: IQ 100-125, average ~112
            for (let i = 0; i < 12; i++) {
                california.push(Math.round(100 + Math.random() * 25));
            }

            // Sort for visualization
            oklahoma.sort((a, b) => a - b);
            california.sort((a, b) => a - b);

            migrantCount = 0;
            bothIncreasedCount = 0;
            logs = [];

            render();
        }

        function average(arr) {
            if (arr.length === 0) return 0;
            return arr.reduce((a, b) => a + b, 0) / arr.length;
        }

        function render() {
            // Render Oklahoma
            const okGrid = document.getElementById('oklahomaGroup');
            okGrid.innerHTML = oklahoma.map((iq, i) => `
                <div class="person ${i === 0 ? 'migrant' : ''}"
                     style="background: ${getIQColor(iq)};"
                     title="IQ: ${iq}">
                    ${iq}
                </div>
            `).join('');

            // Render California
            const caGrid = document.getElementById('californiaGroup');
            caGrid.innerHTML = california.map((iq) => `
                <div class="person"
                     style="background: ${getIQColor(iq)};"
                     title="IQ: ${iq}">
                    ${iq}
                </div>
            `).join('');

            // Update averages
            const okAvg = average(oklahoma);
            const caAvg = average(california);

            document.getElementById('oklahomaAvg').textContent = okAvg.toFixed(1);
            document.getElementById('californiaAvg').textContent = caAvg.toFixed(1);

            // Update magic zone
            if (oklahoma.length > 0) {
                document.getElementById('zoneMin').textContent = Math.min(...oklahoma);
                document.getElementById('zoneMax').textContent = caAvg.toFixed(1);
            }

            // Update stats
            document.getElementById('migrantCount').textContent = migrantCount;
            document.getElementById('bothIncreased').textContent = bothIncreasedCount;

            // Update migrate button
            const btn = document.getElementById('migrateBtn');
            const canMigrate = oklahoma.length > 1 && Math.min(...oklahoma) < caAvg;
            btn.disabled = !canMigrate;

            // Update log
            const logDiv = document.getElementById('migrationLog');
            if (logs.length === 0) {
                logDiv.innerHTML = '<div style="color: #a0a0a0; text-align: center; font-size: 0.85rem;">Migration log will appear here</div>';
            } else {
                logDiv.innerHTML = logs.map(l => `<div class="log-entry">${l}</div>`).reverse().join('');
            }
        }

        function migrateLowest() {
            if (oklahoma.length <= 1) return;

            const oldOkAvg = average(oklahoma);
            const oldCaAvg = average(california);

            // Get lowest from Oklahoma
            const migrant = Math.min(...oklahoma);

            // Check if migration will raise both
            if (migrant >= oldCaAvg) {
                logs.push(`IQ <span class="iq">${migrant}</span> can't migrate: above CA average (${oldCaAvg.toFixed(1)})`);
                render();
                return;
            }

            // Migrate
            oklahoma = oklahoma.filter(iq => iq !== migrant || oklahoma.indexOf(migrant) !== oklahoma.lastIndexOf(migrant) ? true : oklahoma.splice(oklahoma.indexOf(migrant), 1) && false);
            oklahoma.splice(oklahoma.indexOf(migrant), 1);
            california.push(migrant);
            california.sort((a, b) => a - b);

            const newOkAvg = average(oklahoma);
            const newCaAvg = average(california);

            migrantCount++;

            const okChange = newOkAvg - oldOkAvg;
            const caChange = newCaAvg - oldCaAvg;

            if (okChange > 0 && caChange > 0) {
                bothIncreasedCount++;
                logs.push(`IQ <span class="iq">${migrant}</span> migrated: OK ${oldOkAvg.toFixed(1)}‚Üí${newOkAvg.toFixed(1)} (+${okChange.toFixed(1)}), CA ${oldCaAvg.toFixed(1)}‚Üí${newCaAvg.toFixed(1)} (+${caChange.toFixed(1)}) <span class="change-indicator positive">BOTH UP!</span>`);
            } else {
                logs.push(`IQ <span class="iq">${migrant}</span> migrated: OK ${oldOkAvg.toFixed(1)}‚Üí${newOkAvg.toFixed(1)}, CA ${oldCaAvg.toFixed(1)}‚Üí${newCaAvg.toFixed(1)}`);
            }

            render();
        }

        function autoMigrate() {
            const interval = setInterval(() => {
                const caAvg = average(california);
                const minOk = oklahoma.length > 0 ? Math.min(...oklahoma) : Infinity;

                if (oklahoma.length <= 1 || minOk >= caAvg) {
                    clearInterval(interval);
                    return;
                }

                migrateLowest();
            }, 500);
        }

        function resetGroups() {
            initGroups();
        }

        // Initialize
        initGroups();
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
