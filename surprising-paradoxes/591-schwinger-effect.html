<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Schwinger Effect - Surprising Paradoxes</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #0a0a12 0%, #1a1a2e 50%, #0f0f1a 100%);
            color: #e0e0e0;
            min-height: 100vh;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        .back-link {
            display: inline-block;
            color: #f4a261;
            text-decoration: none;
            margin-bottom: 20px;
            font-size: 0.95rem;
            transition: color 0.3s;
        }

        .back-link:hover { color: #e9c46a; }

        h1 {
            font-size: 2.5rem;
            color: #e9c46a;
            margin-bottom: 15px;
            text-shadow: 0 0 40px rgba(233, 196, 106, 0.3);
        }

        .subtitle {
            font-size: 1.2rem;
            color: #8ecae6;
            font-style: italic;
        }

        .visualization-container {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 40px;
            border: 1px solid rgba(233, 196, 106, 0.2);
        }

        .canvas-wrapper {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        canvas {
            border-radius: 10px;
            background: #000;
        }

        .field-indicator {
            text-align: center;
            margin: 15px 0;
        }

        .field-bar {
            height: 25px;
            background: linear-gradient(90deg, #333 0%, #4CAF50 30%, #FFC107 60%, #f44336 90%, #ff0000 100%);
            border-radius: 12px;
            position: relative;
            margin: 10px auto;
            max-width: 600px;
        }

        .field-marker {
            position: absolute;
            top: -5px;
            width: 4px;
            height: 35px;
            background: #fff;
            border-radius: 2px;
            transition: left 0.3s;
        }

        .field-labels {
            display: flex;
            justify-content: space-between;
            max-width: 600px;
            margin: 0 auto;
            font-size: 0.8rem;
            color: #888;
        }

        .field-value {
            font-size: 1.3rem;
            color: #e9c46a;
            margin-top: 10px;
        }

        .critical-label {
            color: #f44336;
            font-size: 0.85rem;
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .control-group {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
        }

        .control-group label {
            display: block;
            margin-bottom: 8px;
            color: #e9c46a;
            font-size: 0.9rem;
        }

        .control-group input[type="range"] {
            width: 100%;
            margin-bottom: 5px;
        }

        .control-group .value {
            text-align: right;
            font-size: 0.8rem;
            color: #8ecae6;
        }

        .stats-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .stat-box {
            background: rgba(255, 255, 255, 0.05);
            padding: 12px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-box .label {
            font-size: 0.8rem;
            color: #8ecae6;
            margin-bottom: 5px;
        }

        .stat-box .value {
            font-size: 1.2rem;
            color: #e9c46a;
            font-weight: bold;
        }

        .mode-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .mode-btn {
            padding: 10px 18px;
            border: 1px solid rgba(233, 196, 106, 0.5);
            background: rgba(233, 196, 106, 0.1);
            color: #e9c46a;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.85rem;
        }

        .mode-btn:hover {
            background: rgba(233, 196, 106, 0.2);
        }

        .mode-btn.active {
            background: rgba(233, 196, 106, 0.3);
            border-color: #e9c46a;
        }

        .essay {
            line-height: 1.9;
            font-size: 1.1rem;
        }

        .essay h2 {
            color: #e9c46a;
            margin: 40px 0 20px;
            font-size: 1.6rem;
            border-bottom: 1px solid rgba(233, 196, 106, 0.3);
            padding-bottom: 10px;
        }

        .essay h3 {
            color: #f4a261;
            margin: 30px 0 15px;
            font-size: 1.3rem;
        }

        .essay p {
            margin-bottom: 20px;
            text-align: justify;
        }

        .equation {
            background: rgba(142, 202, 230, 0.1);
            padding: 20px;
            margin: 25px 0;
            border-radius: 10px;
            text-align: center;
            font-family: 'Courier New', monospace;
            color: #8ecae6;
            font-size: 1.1rem;
            overflow-x: auto;
        }

        .highlight-box {
            background: linear-gradient(135deg, rgba(233, 196, 106, 0.1), rgba(244, 162, 97, 0.1));
            border-left: 4px solid #e9c46a;
            padding: 20px;
            margin: 25px 0;
            border-radius: 0 10px 10px 0;
        }

        .highlight-box strong {
            color: #e9c46a;
        }

        .comparison-table {
            width: 100%;
            margin: 25px 0;
            border-collapse: collapse;
            font-size: 0.95rem;
        }

        .comparison-table th, .comparison-table td {
            padding: 12px 10px;
            text-align: center;
            border: 1px solid rgba(142, 202, 230, 0.3);
        }

        .comparison-table th {
            background: rgba(142, 202, 230, 0.15);
            color: #8ecae6;
        }

        .comparison-table td {
            background: rgba(0, 0, 0, 0.3);
        }

        .sources {
            background: rgba(0, 0, 0, 0.3);
            padding: 25px;
            border-radius: 10px;
            margin-top: 40px;
        }

        .sources h3 {
            color: #e9c46a;
            margin-bottom: 15px;
        }

        .sources ul {
            list-style: none;
        }

        .sources li {
            margin-bottom: 10px;
        }

        .sources a {
            color: #8ecae6;
            text-decoration: none;
        }

        .sources a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="index.html" class="back-link">← Back to Surprising Paradoxes</a>
            <h1>The Schwinger Effect</h1>
            <p class="subtitle">Creating matter from nothing using pure electric fields</p>
        </header>

        <div class="visualization-container">
            <div class="mode-buttons">
                <button class="mode-btn active" onclick="setMode('vacuum')">Vacuum Pairs</button>
                <button class="mode-btn" onclick="setMode('field')">Field Strength</button>
                <button class="mode-btn" onclick="setMode('magnetar')">Magnetar</button>
            </div>

            <div class="canvas-wrapper">
                <canvas id="canvas" width="800" height="450"></canvas>
            </div>

            <div class="field-indicator">
                <div class="field-value" id="fieldDisplay">E = 10¹⁵ V/m</div>
                <div class="field-bar">
                    <div class="field-marker" id="fieldMarker"></div>
                </div>
                <div class="field-labels">
                    <span>10¹² V/m</span>
                    <span>10¹⁵ V/m</span>
                    <span class="critical-label">E<sub>c</sub> = 1.32 × 10¹⁸ V/m</span>
                    <span>10²⁰ V/m</span>
                </div>
            </div>

            <div class="stats-row">
                <div class="stat-box">
                    <div class="label">E / E<sub>critical</sub></div>
                    <div class="value" id="ratioValue">0.001</div>
                </div>
                <div class="stat-box">
                    <div class="label">Pair Production Rate</div>
                    <div class="value" id="rateValue">~0</div>
                </div>
                <div class="stat-box">
                    <div class="label">Pairs Created</div>
                    <div class="value" id="pairsValue">0</div>
                </div>
            </div>

            <div class="controls">
                <div class="control-group">
                    <label>Electric Field Strength (log scale)</label>
                    <input type="range" id="fieldStrength" min="12" max="20" step="0.1" value="15">
                    <div class="value">10^<span id="expValue">15</span> V/m</div>
                </div>

                <div class="control-group">
                    <label>Animation Speed</label>
                    <input type="range" id="animSpeed" min="0.2" max="3" step="0.1" value="1">
                    <div class="value"><span id="speedValue">1.0</span>x</div>
                </div>

                <div class="control-group">
                    <label>Virtual Pair Density</label>
                    <input type="range" id="pairDensity" min="10" max="100" step="5" value="40">
                    <div class="value"><span id="densityValue">40</span></div>
                </div>
            </div>
        </div>

        <article class="essay">
            <h2>Making Matter From Nothing</h2>

            <p>
                According to quantum electrodynamics, the vacuum is not truly empty. It seethes with
                virtual electron-positron pairs constantly popping into and out of existence, existing
                only for the briefest moment allowed by the uncertainty principle before annihilating.
            </p>

            <p>
                But what if you could pull these pairs apart before they annihilate? What if you could
                turn virtual particles into <strong>real</strong> particles? Julian Schwinger showed in
                1951 that a sufficiently strong electric field can do exactly this—creating matter from
                pure vacuum.
            </p>

            <div class="highlight-box">
                <strong>The Paradox:</strong> Empty space can become a source of matter! Apply a
                strong enough electric field (about 10¹⁸ V/m), and electron-positron pairs materialize
                from the vacuum. The vacuum itself "breaks down" and becomes conducting.
            </div>

            <h2>The Critical Field Strength</h2>

            <p>
                The key quantity is the <strong>Schwinger limit</strong> or critical field strength:
            </p>

            <div class="equation">
                E<sub>c</sub> = m²c³ / (eℏ) ≈ 1.32 × 10¹⁸ V/m
            </div>

            <p>
                This is the electric field at which the work done on a virtual electron-positron pair
                over one Compton wavelength equals their rest mass energy 2mc². At this field strength,
                the vacuum becomes unstable and pairs are produced copiously.
            </p>

            <p>
                How strong is this? A lightning bolt produces about 3 × 10⁵ V/m. The Schwinger limit is
                about 10 <em>trillion</em> times stronger than lightning. The most powerful lasers today
                achieve "only" about 10¹⁵ V/m—still a thousand times too weak.
            </p>

            <h2>The Tunneling Picture</h2>

            <p>
                Below the critical field, pair production still occurs, but exponentially slowly. The
                pairs must quantum-tunnel through a potential barrier created by the vacuum. Schwinger's
                famous formula gives the production rate:
            </p>

            <div class="equation">
                Γ ∝ (eE)² exp(-π m²c³ / eℏE) = (eE)² exp(-π E<sub>c</sub> / E)
            </div>

            <p>
                Notice the exponential suppression: when E << E<sub>c</sub>, the factor exp(-πE<sub>c</sub>/E)
                is fantastically small. At E = E<sub>c</sub>/10, the rate is suppressed by a factor of
                10⁻¹⁴. The effect is non-perturbative—it can't be computed order by order in the
                fine-structure constant.
            </p>

            <h2>Physical Mechanism</h2>

            <h3>Virtual Pairs Under Tension</h3>

            <p>
                In the vacuum, virtual electron-positron pairs constantly appear for time Δt ~ ℏ/2mc².
                During this brief existence, they're separated by about one Compton wavelength
                λ<sub>C</sub> = ℏ/mc ≈ 3.86 × 10⁻¹³ m.
            </p>

            <p>
                An external electric field pulls the electron and positron in opposite directions.
                If the field does enough work on them during their virtual existence—specifically,
                if eE × λ<sub>C</sub> > 2mc²—they gain enough energy to become real particles.
            </p>

            <p>
                This condition gives exactly the Schwinger critical field. Above this threshold, the
                vacuum "sparks"—pairs appear continuously, extracting energy from the field until it
                decays below the critical value.
            </p>

            <h2>Where Might It Occur?</h2>

            <table class="comparison-table">
                <tr>
                    <th>System</th>
                    <th>Field Strength</th>
                    <th>E / E<sub>c</sub></th>
                    <th>Pair Production?</th>
                </tr>
                <tr>
                    <td>Lightning</td>
                    <td>~10⁵ V/m</td>
                    <td>10⁻¹³</td>
                    <td>No</td>
                </tr>
                <tr>
                    <td>Intense Laser (2023)</td>
                    <td>~10¹⁵ V/m</td>
                    <td>10⁻³</td>
                    <td>Negligible</td>
                </tr>
                <tr>
                    <td>Heavy Ion Collision</td>
                    <td>~10¹⁷ V/m</td>
                    <td>~0.1</td>
                    <td>Possibly</td>
                </tr>
                <tr>
                    <td>Magnetar Surface</td>
                    <td>~10¹⁸-10¹⁹ V/m</td>
                    <td>1-10</td>
                    <td>Yes!</td>
                </tr>
                <tr>
                    <td>Extreme Light Infrastructure (planned)</td>
                    <td>~10¹⁶ V/m</td>
                    <td>~0.01</td>
                    <td>Enhanced with tricks</td>
                </tr>
            </table>

            <h3>Magnetars: Nature's Schwinger Machines</h3>

            <p>
                Magnetars—neutron stars with extreme magnetic fields—are the only known natural systems
                where the Schwinger effect may occur. Their surface magnetic fields reach 10¹¹ T
                (compared to Earth's 50 μT), creating electric fields near or above the Schwinger limit.
            </p>

            <p>
                Near the magnetic poles, the rapidly changing magnetic field induces electric fields
                that can spark pair cascades—a runaway production of electron-positron pairs. This may
                explain the intense gamma-ray bursts observed from magnetars.
            </p>

            <h2>Historical Development</h2>

            <p>
                The effect has a rich history:
            </p>

            <p>
                <strong>1931</strong>: Fritz Sauter first calculated tunneling through the "Klein zone"
                barrier, finding exponentially small probability.<br>
                <strong>1936</strong>: Heisenberg and Euler computed vacuum polarization effects in QED,
                finding nonlinear corrections to Maxwell's equations.<br>
                <strong>1951</strong>: Julian Schwinger gave the definitive QED calculation of the pair
                production rate, establishing the field that bears his name.
            </p>

            <h2>Experimental Efforts</h2>

            <p>
                Direct observation of the Schwinger effect remains elusive. Current strategies include:
            </p>

            <p>
                <strong>High-intensity lasers:</strong> Facilities like ELI (Extreme Light Infrastructure)
                aim to focus petawatt lasers to achieve near-critical fields. By using multiple beams
                or clever pulse sequences, the effective pair production rate might be enhanced.
            </p>

            <p>
                <strong>Heavy ion collisions:</strong> When uranium nuclei (Z=92) pass close to each
                other at RHIC or LHC, the combined Coulomb field briefly approaches the Schwinger
                limit. Pair production may occur, though distinguishing it from other processes is
                challenging.
            </p>

            <p>
                <strong>Graphene analogs:</strong> In 2022, researchers led by Andre Geim observed an
                analog of the Schwinger effect in graphene, where electrons behave like massless
                Dirac fermions with a much lower "critical field." This doesn't create real
                electron-positron pairs but demonstrates the physics in a controllable system.
            </p>

            <div class="highlight-box">
                <strong>The Deep Insight:</strong> The Schwinger effect proves that the vacuum isn't
                just empty space—it's a medium with properties. Strong enough fields can "polarize"
                the vacuum, eventually causing it to break down and produce real particles. Matter
                can literally be created from nothing but geometry and field.
            </div>

            <div class="sources">
                <h3>Sources & Further Reading</h3>
                <ul>
                    <li><a href="https://en.wikipedia.org/wiki/Schwinger_effect">Schwinger effect - Wikipedia</a></li>
                    <li><a href="https://en.wikipedia.org/wiki/Schwinger_limit">Schwinger limit - Wikipedia</a></li>
                    <li><a href="https://dunne.physics.uconn.edu/dunne-schwinger/">The Schwinger Effect - Gerald Dunne</a></li>
                    <li><a href="https://arxiv.org/pdf/2112.02460">Magnetars as Laboratories for Strong Field QED</a></li>
                    <li><a href="https://www.phys.uconn.edu/~dunne/dunne_schwinger.html">Schwinger Pair Production from Vacuum</a></li>
                </ul>
            </div>
        </article>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        // High DPI
        const dpr = window.devicePixelRatio || 1;
        const rect = canvas.getBoundingClientRect();
        canvas.width = rect.width * dpr;
        canvas.height = rect.height * dpr;
        ctx.scale(dpr, dpr);
        canvas.style.width = rect.width + 'px';
        canvas.style.height = rect.height + 'px';

        const width = rect.width;
        const height = rect.height;

        // Critical field exponent
        const criticalExp = 18.12; // log10 of 1.32e18

        // Parameters
        let fieldExp = 15; // 10^15 V/m
        let animSpeed = 1;
        let pairDensity = 40;
        let currentMode = 'vacuum';
        let time = 0;
        let pairsCreated = 0;

        // Virtual pairs
        let virtualPairs = [];
        let realPairs = [];

        // Controls
        document.getElementById('fieldStrength').addEventListener('input', (e) => {
            fieldExp = parseFloat(e.target.value);
            document.getElementById('expValue').textContent = fieldExp.toFixed(1);
            updateFieldDisplay();
        });

        document.getElementById('animSpeed').addEventListener('input', (e) => {
            animSpeed = parseFloat(e.target.value);
            document.getElementById('speedValue').textContent = animSpeed.toFixed(1);
        });

        document.getElementById('pairDensity').addEventListener('input', (e) => {
            pairDensity = parseInt(e.target.value);
            document.getElementById('densityValue').textContent = pairDensity;
        });

        function setMode(mode) {
            currentMode = mode;
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            if (mode === 'magnetar') {
                fieldExp = 18.5;
                document.getElementById('fieldStrength').value = 18.5;
                document.getElementById('expValue').textContent = '18.5';
            }

            updateFieldDisplay();
        }

        function updateFieldDisplay() {
            const E = Math.pow(10, fieldExp);
            const Ec = Math.pow(10, criticalExp);
            const ratio = E / Ec;

            document.getElementById('fieldDisplay').textContent = `E = 10^${fieldExp.toFixed(1)} V/m`;

            // Update marker position
            const markerPercent = Math.max(0, Math.min(100, (fieldExp - 12) / 8 * 100));
            document.getElementById('fieldMarker').style.left = `${markerPercent}%`;

            // Update stats
            document.getElementById('ratioValue').textContent = ratio.toExponential(2);

            // Pair production rate (exponentially suppressed)
            if (ratio > 0.5) {
                document.getElementById('rateValue').textContent = 'HIGH';
            } else if (ratio > 0.1) {
                document.getElementById('rateValue').textContent = 'Moderate';
            } else if (ratio > 0.01) {
                document.getElementById('rateValue').textContent = 'Very low';
            } else {
                document.getElementById('rateValue').textContent = '~0';
            }
        }

        function initVirtualPairs() {
            virtualPairs = [];
            for (let i = 0; i < pairDensity; i++) {
                virtualPairs.push({
                    x: Math.random() * width,
                    y: Math.random() * height,
                    separation: 0,
                    maxSep: 10 + Math.random() * 10,
                    lifetime: Math.random(),
                    phase: Math.random() * Math.PI * 2
                });
            }
        }

        function drawVacuumMode() {
            const E = Math.pow(10, fieldExp);
            const Ec = Math.pow(10, criticalExp);
            const ratio = E / Ec;

            // Draw electric field lines
            ctx.strokeStyle = 'rgba(255, 200, 100, 0.15)';
            ctx.lineWidth = 1;
            for (let y = 30; y < height - 30; y += 30) {
                ctx.beginPath();
                ctx.moveTo(50, y);
                ctx.lineTo(width - 50, y);
                ctx.stroke();

                // Arrows
                ctx.beginPath();
                ctx.moveTo(width - 55, y - 4);
                ctx.lineTo(width - 50, y);
                ctx.lineTo(width - 55, y + 4);
                ctx.strokeStyle = 'rgba(255, 200, 100, 0.3)';
                ctx.stroke();
            }

            // Field direction indicator
            ctx.fillStyle = 'rgba(255, 200, 100, 0.5)';
            ctx.font = '14px Georgia';
            ctx.textAlign = 'center';
            ctx.fillText('E →', width - 30, height / 2);

            // Update and draw virtual pairs
            virtualPairs.forEach(pair => {
                pair.phase += 0.1 * animSpeed;
                pair.lifetime += 0.01 * animSpeed;

                if (pair.lifetime > 1) {
                    pair.lifetime = 0;
                    pair.x = Math.random() * width;
                    pair.y = Math.random() * height;
                }

                // Pair separation based on field strength
                const fieldPull = ratio * 30;
                pair.separation = pair.maxSep + fieldPull * Math.sin(pair.phase);

                // Draw electron (left)
                const alpha = 0.4 + 0.3 * Math.sin(pair.lifetime * Math.PI * 2);
                ctx.beginPath();
                ctx.arc(pair.x - pair.separation / 2, pair.y, 4, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(76, 175, 80, ${alpha})`;
                ctx.fill();

                // Draw positron (right)
                ctx.beginPath();
                ctx.arc(pair.x + pair.separation / 2, pair.y, 4, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(255, 107, 107, ${alpha})`;
                ctx.fill();

                // Connection line (virtual)
                ctx.beginPath();
                ctx.moveTo(pair.x - pair.separation / 2, pair.y);
                ctx.lineTo(pair.x + pair.separation / 2, pair.y);
                ctx.strokeStyle = `rgba(255, 255, 255, ${alpha * 0.3})`;
                ctx.setLineDash([2, 3]);
                ctx.lineWidth = 1;
                ctx.stroke();
                ctx.setLineDash([]);

                // If above critical, make pair real
                if (ratio > 0.5 && pair.separation > 25 && Math.random() < ratio * 0.01 * animSpeed) {
                    realPairs.push({
                        electronX: pair.x - pair.separation / 2,
                        electronY: pair.y,
                        positronX: pair.x + pair.separation / 2,
                        positronY: pair.y,
                        life: 1
                    });
                    pairsCreated++;
                    document.getElementById('pairsValue').textContent = pairsCreated;

                    // Reset virtual pair
                    pair.x = Math.random() * width;
                    pair.y = Math.random() * height;
                    pair.lifetime = 0;
                }
            });

            // Draw and update real pairs (flying apart)
            realPairs.forEach(rp => {
                rp.electronX -= 3 * animSpeed;
                rp.positronX += 3 * animSpeed;
                rp.life -= 0.01;

                // Electron
                ctx.beginPath();
                ctx.arc(rp.electronX, rp.electronY, 6, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(76, 175, 80, ${rp.life})`;
                ctx.fill();
                ctx.strokeStyle = `rgba(129, 199, 132, ${rp.life})`;
                ctx.lineWidth = 2;
                ctx.stroke();

                // Positron
                ctx.beginPath();
                ctx.arc(rp.positronX, rp.positronY, 6, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(255, 107, 107, ${rp.life})`;
                ctx.fill();
                ctx.strokeStyle = `rgba(255, 138, 138, ${rp.life})`;
                ctx.stroke();

                // Spiral trail
                if (rp.life > 0.5) {
                    ctx.beginPath();
                    ctx.arc(rp.electronX + 10, rp.electronY, 8, 0, Math.PI * 2);
                    ctx.strokeStyle = `rgba(76, 175, 80, ${(rp.life - 0.5) * 0.5})`;
                    ctx.lineWidth = 1;
                    ctx.stroke();
                }
            });

            realPairs = realPairs.filter(rp => rp.life > 0);

            // Legend
            ctx.font = '11px Georgia';
            ctx.fillStyle = '#4CAF50';
            ctx.textAlign = 'left';
            ctx.fillText('● electron (e⁻)', 20, 25);
            ctx.fillStyle = '#ff6b6b';
            ctx.fillText('● positron (e⁺)', 20, 42);

            // Status
            if (ratio > 0.5) {
                ctx.fillStyle = '#ff6b6b';
                ctx.font = '16px Georgia';
                ctx.textAlign = 'center';
                ctx.fillText('VACUUM BREAKDOWN!', width / 2, 35);
                ctx.font = '12px Georgia';
                ctx.fillText('Pairs materializing from vacuum', width / 2, 55);
            }
        }

        function drawFieldMode() {
            const centerY = height / 2;

            // Draw potential energy curve
            ctx.strokeStyle = '#e9c46a';
            ctx.lineWidth = 2;
            ctx.beginPath();

            for (let x = 50; x < width - 50; x++) {
                const dx = x - width / 2;
                // Potential: -eEx + mc² for electron
                const potential = -dx * 0.005 * (fieldExp - 12) + 50;
                const y = centerY + potential;
                if (x === 50) ctx.moveTo(x, y);
                else ctx.lineTo(x, Math.max(50, Math.min(height - 50, y)));
            }
            ctx.stroke();

            // Draw energy gap
            const gapWidth = 100 * Math.pow(10, criticalExp - fieldExp);
            const clampedGap = Math.min(300, Math.max(20, gapWidth / 1e12));

            ctx.fillStyle = 'rgba(142, 202, 230, 0.2)';
            ctx.fillRect(width / 2 - clampedGap / 2, centerY - 30, clampedGap, 60);

            ctx.strokeStyle = '#8ecae6';
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(width / 2 - clampedGap / 2, centerY - 30);
            ctx.lineTo(width / 2 - clampedGap / 2, centerY + 30);
            ctx.moveTo(width / 2 + clampedGap / 2, centerY - 30);
            ctx.lineTo(width / 2 + clampedGap / 2, centerY + 30);
            ctx.stroke();
            ctx.setLineDash([]);

            // Labels
            ctx.font = '12px Georgia';
            ctx.fillStyle = '#e9c46a';
            ctx.textAlign = 'center';
            ctx.fillText('V(x) = -eEx', width / 2, 40);

            ctx.fillStyle = '#8ecae6';
            ctx.fillText('2mc² gap', width / 2, centerY);
            ctx.fillText('Tunneling barrier', width / 2, centerY + 50);

            ctx.fillStyle = '#aaa';
            ctx.textAlign = 'left';
            ctx.fillText('Higher field → Narrower barrier → More tunneling', 60, height - 30);
        }

        function drawMagnetarMode() {
            const centerX = width / 2;
            const centerY = height / 2;

            // Draw magnetar
            const starRadius = 60;
            const gradient = ctx.createRadialGradient(centerX, centerY, 0, centerX, centerY, starRadius);
            gradient.addColorStop(0, '#fff');
            gradient.addColorStop(0.3, '#88ccff');
            gradient.addColorStop(0.7, '#4488ff');
            gradient.addColorStop(1, '#2244aa');

            ctx.beginPath();
            ctx.arc(centerX, centerY, starRadius, 0, Math.PI * 2);
            ctx.fillStyle = gradient;
            ctx.fill();

            // Magnetic field lines
            ctx.strokeStyle = 'rgba(255, 100, 100, 0.5)';
            ctx.lineWidth = 2;

            for (let i = 0; i < 8; i++) {
                const angle = (i / 8) * Math.PI * 2 + time * 0.2 * animSpeed;
                ctx.beginPath();

                for (let r = starRadius + 10; r < 200; r += 5) {
                    const spread = (r - starRadius) * 0.01;
                    const x = centerX + Math.cos(angle + spread) * r;
                    const y = centerY + Math.sin(angle + spread) * r;
                    if (r === starRadius + 10) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }
                ctx.stroke();
            }

            // Pair production near poles
            const poleOffset = 50;
            for (let pole of [-1, 1]) {
                const poleY = centerY + pole * poleOffset;

                // Spark effect
                if (Math.random() < 0.3 * animSpeed) {
                    const sparkX = centerX + (Math.random() - 0.5) * 40 + pole * 60;
                    const sparkY = poleY + (Math.random() - 0.5) * 30;

                    // Electron
                    ctx.beginPath();
                    ctx.arc(sparkX - 5, sparkY, 3, 0, Math.PI * 2);
                    ctx.fillStyle = '#4CAF50';
                    ctx.fill();

                    // Positron
                    ctx.beginPath();
                    ctx.arc(sparkX + 5, sparkY, 3, 0, Math.PI * 2);
                    ctx.fillStyle = '#ff6b6b';
                    ctx.fill();

                    // Burst
                    ctx.beginPath();
                    ctx.arc(sparkX, sparkY, 10, 0, Math.PI * 2);
                    ctx.strokeStyle = 'rgba(255, 255, 100, 0.5)';
                    ctx.lineWidth = 1;
                    ctx.stroke();
                }
            }

            // Labels
            ctx.font = '14px Georgia';
            ctx.fillStyle = '#8ecae6';
            ctx.textAlign = 'center';
            ctx.fillText('Magnetar', centerX, centerY + starRadius + 25);
            ctx.fillText('(Neutron Star)', centerX, centerY + starRadius + 42);

            ctx.fillStyle = '#ff6b6b';
            ctx.font = '12px Georgia';
            ctx.fillText('B ~ 10¹¹ T', centerX, centerY - starRadius - 30);
            ctx.fillText('E > E_critical', centerX, centerY - starRadius - 15);

            ctx.fillStyle = '#e9c46a';
            ctx.fillText('Pair cascades', centerX + 100, centerY - 60);
            ctx.fillText('at magnetic poles', centerX + 100, centerY - 45);
        }

        function animate() {
            ctx.fillStyle = '#0a0a12';
            ctx.fillRect(0, 0, width, height);

            time += 0.016;

            switch (currentMode) {
                case 'vacuum':
                    drawVacuumMode();
                    break;
                case 'field':
                    drawFieldMode();
                    break;
                case 'magnetar':
                    drawMagnetarMode();
                    break;
            }

            requestAnimationFrame(animate);
        }

        // Initialize
        initVirtualPairs();
        updateFieldDisplay();
        animate();
    </script>
</body>
</html>
