<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boltzmann Brain Paradox | Surprising Paradoxes</title>
    <style>
        :root {
            --sage: #8A9A5B;
            --moss: #606C38;
            --earth: #DDA15E;
            --cream: #FEFAE0;
            --terracotta: #BC6C25;
            --dark-moss: #3d4423;
            --void: #0a0a12;
            --cosmic: #1a1a2e;
            --nebula: #16213e;
            --star: #e8e8ff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--void);
            color: var(--star);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Cosmic background */
        .cosmic-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at center, var(--cosmic) 0%, var(--void) 100%);
            z-index: -2;
        }

        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--sage);
            text-decoration: none;
            margin-bottom: 1.5rem;
            transition: color 0.3s;
        }

        .back-link:hover {
            color: var(--earth);
        }

        h1 {
            font-family: 'Lora', Georgia, serif;
            font-size: 2.5rem;
            color: var(--star);
            margin-bottom: 0.5rem;
            text-shadow: 0 0 20px rgba(138, 154, 91, 0.5);
        }

        .subtitle {
            color: rgba(232, 232, 255, 0.7);
            font-size: 1.1rem;
            margin-bottom: 2rem;
        }

        .intro-box {
            background: rgba(26, 26, 46, 0.8);
            border: 1px solid rgba(138, 154, 91, 0.3);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .intro-box h2 {
            font-family: 'Lora', Georgia, serif;
            color: var(--sage);
            margin-bottom: 1rem;
        }

        .intro-box p {
            line-height: 1.7;
            margin-bottom: 1rem;
        }

        .sim-container {
            background: rgba(22, 33, 62, 0.6);
            border: 1px solid rgba(138, 154, 91, 0.3);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .sim-header {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .sim-header h3 {
            font-family: 'Lora', Georgia, serif;
            color: var(--earth);
            font-size: 1.3rem;
        }

        /* Universe visualization */
        .universe-viz {
            position: relative;
            width: 100%;
            height: 400px;
            background: radial-gradient(ellipse at center, rgba(26, 26, 46, 0.8) 0%, rgba(10, 10, 18, 0.9) 100%);
            border-radius: 16px;
            overflow: hidden;
            margin-bottom: 1.5rem;
        }

        .entropy-meter {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.6);
            padding: 10px 15px;
            border-radius: 10px;
            font-size: 0.9rem;
        }

        .entropy-label {
            color: rgba(232, 232, 255, 0.7);
            margin-bottom: 5px;
        }

        .entropy-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--earth);
        }

        .time-display {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.6);
            padding: 10px 15px;
            border-radius: 10px;
            font-size: 0.9rem;
            text-align: right;
        }

        .time-label {
            color: rgba(232, 232, 255, 0.7);
            margin-bottom: 5px;
        }

        .time-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--sage);
        }

        /* Particle canvas */
        #particleCanvas {
            width: 100%;
            height: 100%;
        }

        /* Event notification */
        .event-box {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(188, 108, 37, 0.9);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.5s;
            text-align: center;
        }

        .event-box.visible {
            opacity: 1;
        }

        .event-box.brain {
            background: linear-gradient(135deg, var(--terracotta), var(--earth));
            animation: pulse-glow 1s infinite;
        }

        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(221, 161, 94, 0.5); }
            50% { box-shadow: 0 0 40px rgba(221, 161, 94, 0.8); }
        }

        /* Controls */
        .controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
            margin-bottom: 1.5rem;
        }

        .controls button {
            background: linear-gradient(135deg, var(--moss), var(--dark-moss));
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
        }

        .controls button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(138, 154, 91, 0.4);
        }

        .controls button.active {
            background: linear-gradient(135deg, var(--terracotta), var(--earth));
        }

        /* Stats grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .stat-card {
            background: rgba(26, 26, 46, 0.8);
            border: 1px solid rgba(138, 154, 91, 0.2);
            border-radius: 12px;
            padding: 1rem;
            text-align: center;
        }

        .stat-card .label {
            color: rgba(232, 232, 255, 0.6);
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
        }

        .stat-card .value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--sage);
        }

        .stat-card .value.brain-count {
            color: var(--earth);
        }

        /* Probability comparison */
        .probability-section {
            background: rgba(26, 26, 46, 0.8);
            border: 1px solid rgba(138, 154, 91, 0.3);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .probability-section h3 {
            font-family: 'Lora', Georgia, serif;
            color: var(--sage);
            margin-bottom: 1rem;
        }

        .prob-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        @media (max-width: 600px) {
            .prob-comparison {
                grid-template-columns: 1fr;
            }
        }

        .prob-item {
            text-align: center;
            padding: 1.5rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
        }

        .prob-item.observer {
            border: 2px solid var(--moss);
        }

        .prob-item.brain {
            border: 2px solid var(--terracotta);
        }

        .prob-item .icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .prob-item .title {
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: var(--star);
        }

        .prob-item .prob-value {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .prob-item.observer .prob-value {
            color: var(--sage);
        }

        .prob-item.brain .prob-value {
            color: var(--earth);
        }

        .prob-item .explanation {
            font-size: 0.85rem;
            color: rgba(232, 232, 255, 0.7);
        }

        /* Timeline */
        .timeline-section {
            background: rgba(26, 26, 46, 0.8);
            border: 1px solid rgba(138, 154, 91, 0.3);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .timeline-section h3 {
            font-family: 'Lora', Georgia, serif;
            color: var(--sage);
            margin-bottom: 1.5rem;
        }

        .cosmic-timeline {
            position: relative;
            padding-left: 30px;
        }

        .cosmic-timeline::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(to bottom, var(--moss), var(--terracotta));
        }

        .timeline-event {
            position: relative;
            margin-bottom: 1.5rem;
            padding-left: 20px;
        }

        .timeline-event::before {
            content: '';
            position: absolute;
            left: -26px;
            top: 5px;
            width: 12px;
            height: 12px;
            background: var(--sage);
            border-radius: 50%;
            border: 2px solid var(--cosmic);
        }

        .timeline-event.brain::before {
            background: var(--terracotta);
            box-shadow: 0 0 10px var(--earth);
        }

        .timeline-event .time {
            font-size: 0.85rem;
            color: var(--earth);
            font-weight: bold;
            margin-bottom: 0.3rem;
        }

        .timeline-event .desc {
            color: rgba(232, 232, 255, 0.9);
            line-height: 1.5;
        }

        /* Paradox box */
        .paradox-box {
            background: linear-gradient(135deg, rgba(188, 108, 37, 0.2), rgba(221, 161, 94, 0.1));
            border: 2px solid var(--terracotta);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .paradox-box h3 {
            font-family: 'Lora', Georgia, serif;
            color: var(--earth);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .paradox-box p {
            line-height: 1.7;
            margin-bottom: 1rem;
        }

        .paradox-box strong {
            color: var(--earth);
        }

        /* Implications */
        .implications-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .implication-card {
            background: rgba(26, 26, 46, 0.8);
            border: 1px solid rgba(138, 154, 91, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
        }

        .implication-card h4 {
            color: var(--sage);
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .implication-card p {
            color: rgba(232, 232, 255, 0.8);
            line-height: 1.6;
            font-size: 0.95rem;
        }

        /* Solutions section */
        .solutions-section {
            background: rgba(26, 26, 46, 0.8);
            border: 1px solid rgba(138, 154, 91, 0.3);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .solutions-section h3 {
            font-family: 'Lora', Georgia, serif;
            color: var(--sage);
            margin-bottom: 1rem;
        }

        .solution-item {
            padding: 1rem;
            margin-bottom: 1rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            border-left: 3px solid var(--moss);
        }

        .solution-item:last-child {
            margin-bottom: 0;
        }

        .solution-item h4 {
            color: var(--earth);
            margin-bottom: 0.5rem;
        }

        .solution-item p {
            color: rgba(232, 232, 255, 0.8);
            line-height: 1.6;
            font-size: 0.95rem;
        }

        /* Quote */
        .quote-box {
            background: rgba(96, 108, 56, 0.2);
            border-left: 4px solid var(--sage);
            padding: 1.5rem;
            margin: 2rem 0;
            font-style: italic;
        }

        .quote-box .author {
            margin-top: 0.5rem;
            text-align: right;
            color: var(--sage);
            font-style: normal;
            font-weight: bold;
        }

        /* Floating brain visualization */
        .brain-float {
            position: fixed;
            pointer-events: none;
            opacity: 0;
            font-size: 2rem;
            z-index: 100;
            transition: opacity 0.5s;
        }

        .brain-float.visible {
            opacity: 1;
            animation: float-up 3s forwards;
        }

        @keyframes float-up {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-100px) scale(0.5); opacity: 0; }
        }

        /* Mobile adjustments */
        @media (max-width: 600px) {
            h1 { font-size: 1.8rem; }
            .container { padding: 1rem; }
            .universe-viz { height: 300px; }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="cosmic-bg"></div>
    <div class="stars" id="stars"></div>

    <div class="container">
        <a href="index.html" class="back-link">‚Üê Back to Paradoxes</a>

        <h1>üß† The Boltzmann Brain Paradox</h1>
        <p class="subtitle">Why random fluctuations may create more observers than the entire history of the universe</p>

        <div class="intro-box">
            <h2>The Problem</h2>
            <p>
                Ludwig Boltzmann proposed that our ordered universe arose from a random fluctuation in an otherwise
                chaotic sea of particles. But here's the paradox: if random fluctuations can create our entire
                universe, <strong>it's far more probable they'd just create a single brain with false memories</strong>
                ‚Äî a "Boltzmann Brain" ‚Äî than an entire cosmos with billions of years of history.
            </p>
            <p>
                If this is true, you're more likely to be a momentary fluctuation imagining this reality than
                a real observer in a 13.8-billion-year-old universe. Every memory you have could be an illusion
                that popped into existence a moment ago.
            </p>
        </div>

        <div class="sim-container">
            <div class="sim-header">
                <h3>Cosmic Fluctuation Simulator</h3>
                <p style="color: rgba(232,232,255,0.6); margin-top: 0.5rem;">Watch entropy fluctuations over cosmological time</p>
            </div>

            <div class="universe-viz">
                <canvas id="particleCanvas"></canvas>
                <div class="entropy-meter">
                    <div class="entropy-label">Entropy Level</div>
                    <div class="entropy-value" id="entropyValue">100%</div>
                </div>
                <div class="time-display">
                    <div class="time-label">Time (10^x years)</div>
                    <div class="time-value" id="timeValue">0</div>
                </div>
                <div class="event-box" id="eventBox">Event</div>
            </div>

            <div class="controls">
                <button id="btnPlay" class="active">‚ñ∂ Run Simulation</button>
                <button id="btnFast">‚è© 1000x Speed</button>
                <button id="btnReset">‚Ü∫ Reset</button>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="label">Simulated Years</div>
                    <div class="value" id="statYears">0</div>
                </div>
                <div class="stat-card">
                    <div class="label">Minor Fluctuations</div>
                    <div class="value" id="statMinor">0</div>
                </div>
                <div class="stat-card">
                    <div class="label">Boltzmann Brains</div>
                    <div class="value brain-count" id="statBrains">0</div>
                </div>
                <div class="stat-card">
                    <div class="label">Full Universes</div>
                    <div class="value" id="statUniverses">0</div>
                </div>
            </div>
        </div>

        <div class="probability-section">
            <h3>The Probability Problem</h3>
            <div class="prob-comparison">
                <div class="prob-item observer">
                    <div class="icon">üåå</div>
                    <div class="title">Normal Observer</div>
                    <div class="prob-value">10<sup>-10<sup>120</sup></sup></div>
                    <div class="explanation">
                        Probability of a fluctuation creating an entire universe with
                        stars, planets, and evolution leading to conscious observers
                    </div>
                </div>
                <div class="prob-item brain">
                    <div class="icon">üß†</div>
                    <div class="title">Boltzmann Brain</div>
                    <div class="prob-value">10<sup>-10<sup>50</sup></sup></div>
                    <div class="explanation">
                        Probability of a fluctuation creating just a brain with
                        false memories of a universe ‚Äî vastly more likely!
                    </div>
                </div>
            </div>
            <p style="text-align: center; margin-top: 1.5rem; color: rgba(232,232,255,0.7);">
                The difference is roughly <strong style="color: var(--earth);">10<sup>70</sup></strong> times more likely
                for a brain than a universe ‚Äî an incomprehensibly huge ratio.
            </p>
        </div>

        <div class="timeline-section">
            <h3>Cosmic Timeline of Fluctuations</h3>
            <div class="cosmic-timeline">
                <div class="timeline-event">
                    <div class="time">Now (10<sup>10</sup> years)</div>
                    <div class="desc">Current age of universe. Stars shine, life evolves normally.</div>
                </div>
                <div class="timeline-event">
                    <div class="time">10<sup>14</sup> years</div>
                    <div class="desc">Last stars burn out. Universe becomes dark and cold.</div>
                </div>
                <div class="timeline-event">
                    <div class="time">10<sup>40</sup> years</div>
                    <div class="desc">Protons decay. Only black holes and scattered particles remain.</div>
                </div>
                <div class="timeline-event">
                    <div class="time">10<sup>100</sup> years</div>
                    <div class="desc">Last black holes evaporate. Maximum entropy approaches.</div>
                </div>
                <div class="timeline-event brain">
                    <div class="time">10<sup>10<sup>50</sup></sup> years</div>
                    <div class="desc"><strong>First Boltzmann Brains appear!</strong> Random fluctuations occasionally produce momentary conscious observers.</div>
                </div>
                <div class="timeline-event">
                    <div class="time">10<sup>10<sup>120</sup></sup> years</div>
                    <div class="desc">Poincar√© recurrence: the entire observable universe might randomly reform.</div>
                </div>
            </div>
        </div>

        <div class="paradox-box">
            <h3>‚ö†Ô∏è The Paradox</h3>
            <p>
                If our universe will exist for eternity (or even just an incomprehensibly long time), then
                Boltzmann Brains will vastly outnumber "normal" observers like us. By a straight probability
                calculation, <strong>you should expect to be a Boltzmann Brain</strong>, not a real human
                with genuine memories.
            </p>
            <p>
                But if you were a Boltzmann Brain, your memories would be random noise ‚Äî there would be no
                reason to expect coherent physics, consistent memories, or a sensible reality. The fact that
                your experiences ARE coherent seems to contradict the statistical prediction.
            </p>
            <p>
                <strong>This creates a deep problem for cosmology:</strong> any theory predicting eternal
                existence seems to predict we should be Boltzmann Brains, but we clearly aren't. Something
                must be wrong with our assumptions.
            </p>
        </div>

        <div class="implications-grid">
            <div class="implication-card">
                <h4>üî¨ Threat to Science</h4>
                <p>
                    If you might be a Boltzmann Brain, you can't trust your memories of doing experiments.
                    All of science collapses into solipsism ‚Äî maybe physics itself is just a false memory.
                </p>
            </div>
            <div class="implication-card">
                <h4>üå°Ô∏è Heat Death Problem</h4>
                <p>
                    Any cosmology predicting the universe approaches heat death and exists eternally will
                    produce this paradox. Boltzmann Brains are inevitable in eternal thermal equilibrium.
                </p>
            </div>
            <div class="implication-card">
                <h4>üé≤ Statistical Reasoning</h4>
                <p>
                    The paradox challenges how we use probability in cosmology. If most observers are
                    Boltzmann Brains, but we aren't, is anthropic reasoning fundamentally flawed?
                </p>
            </div>
            <div class="implication-card">
                <h4>‚ôæÔ∏è Infinity Problem</h4>
                <p>
                    In an infinite universe or multiverse, there are infinitely many of both types of
                    observers. Comparing infinite quantities requires careful "measure" choices that
                    remain unsolved.
                </p>
            </div>
        </div>

        <div class="solutions-section">
            <h3>Proposed Solutions</h3>

            <div class="solution-item">
                <h4>1. Universe Has Finite Lifetime</h4>
                <p>
                    If the universe ends (Big Crunch, Big Rip, or vacuum decay) before Boltzmann Brain
                    timescales, normal observers dominate. Dark energy models with certain parameters
                    could end the universe in ~10<sup>50</sup> years.
                </p>
            </div>

            <div class="solution-item">
                <h4>2. De Sitter Equilibrium Doesn't Produce Observers</h4>
                <p>
                    Perhaps the late universe doesn't actually fluctuate in the way assumed. Some quantum
                    gravity theories suggest the de Sitter thermal state may be fundamentally different.
                </p>
            </div>

            <div class="solution-item">
                <h4>3. Cognitive Instability Argument</h4>
                <p>
                    Believing you're a Boltzmann Brain is self-defeating: it means you can't trust the
                    reasoning that led you to that conclusion. We should reject theories that predict
                    most observers can't do reliable reasoning.
                </p>
            </div>

            <div class="solution-item">
                <h4>4. Typicality Is Wrong</h4>
                <p>
                    Maybe we shouldn't assume we're "typical" observers. Alternative anthropic principles
                    might weight observers by their causal connections or information content.
                </p>
            </div>
        </div>

        <div class="quote-box">
            "If our universe is truly eternal, we are almost certainly not real. That's an uncomfortable
            position for any cosmological theory to be in."
            <div class="author">‚Äî Sean Carroll, Theoretical Physicist</div>
        </div>

        <div class="intro-box" style="background: rgba(96, 108, 56, 0.2); border-color: var(--moss);">
            <h2>Why This Matters</h2>
            <p>
                The Boltzmann Brain paradox isn't just philosophical navel-gazing ‚Äî it's a serious constraint
                on cosmological theories. Any model of the universe must avoid predicting that Boltzmann
                Brains dominate, or it predicts that we shouldn't be having coherent experiences.
            </p>
            <p>
                This has led physicists to prefer cosmologies where the universe ends (through vacuum decay
                or other mechanisms) before Boltzmann Brain timescales ‚Äî a striking case where questions
                about consciousness and existence constrain our theories of fundamental physics.
            </p>
        </div>
    </div>

    <script>
        // Star background
        const starsContainer = document.getElementById('stars');
        for (let i = 0; i < 200; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.width = star.style.height = (Math.random() * 2 + 1) + 'px';
            star.style.animationDelay = Math.random() * 3 + 's';
            starsContainer.appendChild(star);
        }

        // Simulation
        const canvas = document.getElementById('particleCanvas');
        const ctx = canvas.getContext('2d');

        function resizeCanvas() {
            const rect = canvas.parentElement.getBoundingClientRect();
            canvas.width = rect.width;
            canvas.height = rect.height;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Particles
        const particles = [];
        const particleCount = 500;

        class Particle {
            constructor() {
                this.reset();
            }

            reset() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.vx = (Math.random() - 0.5) * 2;
                this.vy = (Math.random() - 0.5) * 2;
                this.radius = Math.random() * 2 + 1;
                this.color = `hsla(${200 + Math.random() * 60}, 70%, 70%, 0.6)`;
            }

            update(entropy) {
                // More chaotic movement at high entropy
                const chaos = entropy / 100;
                this.vx += (Math.random() - 0.5) * 0.5 * chaos;
                this.vy += (Math.random() - 0.5) * 0.5 * chaos;

                // Damping
                this.vx *= 0.99;
                this.vy *= 0.99;

                this.x += this.vx;
                this.y += this.vy;

                // Wrap around
                if (this.x < 0) this.x = canvas.width;
                if (this.x > canvas.width) this.x = 0;
                if (this.y < 0) this.y = canvas.height;
                if (this.y > canvas.height) this.y = 0;
            }

            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.fill();
            }
        }

        for (let i = 0; i < particleCount; i++) {
            particles.push(new Particle());
        }

        // Simulation state
        let simTime = 0; // In units of 10^x years
        let entropy = 50;
        let running = false;
        let speed = 1;
        let minorFluctuations = 0;
        let brainCount = 0;
        let universeCount = 0;
        let lastFluctuation = 0;

        // Boltzmann Brain appearing
        let brainAppearing = false;
        let brainX = 0;
        let brainY = 0;
        let brainProgress = 0;

        // DOM elements
        const entropyEl = document.getElementById('entropyValue');
        const timeEl = document.getElementById('timeValue');
        const eventBox = document.getElementById('eventBox');
        const statYears = document.getElementById('statYears');
        const statMinor = document.getElementById('statMinor');
        const statBrains = document.getElementById('statBrains');
        const statUniverses = document.getElementById('statUniverses');
        const btnPlay = document.getElementById('btnPlay');
        const btnFast = document.getElementById('btnFast');
        const btnReset = document.getElementById('btnReset');

        function formatExponent(exp) {
            if (exp < 100) return exp.toFixed(0);
            if (exp < 1000) return exp.toFixed(0);
            return '10^' + Math.log10(exp).toFixed(1);
        }

        function showEvent(text, isBrain = false) {
            eventBox.textContent = text;
            eventBox.className = 'event-box visible' + (isBrain ? ' brain' : '');
            setTimeout(() => {
                eventBox.className = 'event-box';
            }, 2000);
        }

        function spawnFloatingBrain() {
            const brain = document.createElement('div');
            brain.className = 'brain-float visible';
            brain.textContent = 'üß†';
            brain.style.left = (Math.random() * 80 + 10) + '%';
            brain.style.top = (Math.random() * 60 + 20) + '%';
            document.body.appendChild(brain);
            setTimeout(() => brain.remove(), 3000);
        }

        function update() {
            if (!running) return;

            // Advance time (logarithmically)
            simTime += 0.01 * speed;

            // Entropy approaches maximum with fluctuations
            const targetEntropy = 90 + Math.sin(simTime * 0.1) * 5;
            entropy += (targetEntropy - entropy) * 0.01;

            // Random fluctuations
            if (Math.random() < 0.01 * speed) {
                const fluctuation = (Math.random() - 0.3) * 20;
                entropy += fluctuation;
                entropy = Math.max(50, Math.min(100, entropy));

                if (fluctuation < -10) {
                    minorFluctuations++;
                    if (simTime - lastFluctuation > 5) {
                        showEvent('Minor entropy fluctuation detected!');
                        lastFluctuation = simTime;
                    }
                }
            }

            // Boltzmann Brain probability increases with time
            // Simulated probability (dramatically accelerated for visualization)
            const brainProb = Math.min(0.001 * speed, 0.01) * (simTime > 50 ? (simTime - 50) / 100 : 0);

            if (Math.random() < brainProb && !brainAppearing) {
                brainAppearing = true;
                brainX = Math.random() * canvas.width;
                brainY = Math.random() * canvas.height;
                brainProgress = 0;
                brainCount++;
                spawnFloatingBrain();
                showEvent('‚ö° BOLTZMANN BRAIN FORMED! ‚ö°', true);
            }

            // Universe recurrence (extremely rare)
            if (Math.random() < 0.00001 * speed && simTime > 100) {
                universeCount++;
                showEvent('üåå FULL UNIVERSE FLUCTUATION! üåå');
                entropy = 30;
            }

            // Update displays
            entropyEl.textContent = entropy.toFixed(1) + '%';
            timeEl.textContent = '10^' + formatExponent(simTime);
            statYears.textContent = '10^' + formatExponent(simTime);
            statMinor.textContent = minorFluctuations;
            statBrains.textContent = brainCount;
            statUniverses.textContent = universeCount;

            // Update particles
            particles.forEach(p => p.update(entropy));

            // Brain formation animation
            if (brainAppearing) {
                brainProgress += 0.02;
                if (brainProgress >= 1) {
                    brainAppearing = false;
                }
            }

            draw();
            requestAnimationFrame(update);
        }

        function draw() {
            ctx.fillStyle = 'rgba(10, 10, 18, 0.3)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw particles
            particles.forEach(p => p.draw());

            // Draw Boltzmann Brain forming
            if (brainAppearing) {
                const size = 30 + brainProgress * 20;
                const alpha = Math.sin(brainProgress * Math.PI);

                // Glow effect
                const gradient = ctx.createRadialGradient(brainX, brainY, 0, brainX, brainY, size * 2);
                gradient.addColorStop(0, `rgba(221, 161, 94, ${alpha * 0.8})`);
                gradient.addColorStop(0.5, `rgba(188, 108, 37, ${alpha * 0.4})`);
                gradient.addColorStop(1, 'rgba(188, 108, 37, 0)');

                ctx.beginPath();
                ctx.arc(brainX, brainY, size * 2, 0, Math.PI * 2);
                ctx.fillStyle = gradient;
                ctx.fill();

                // Brain emoji
                ctx.font = size + 'px serif';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.globalAlpha = alpha;
                ctx.fillText('üß†', brainX, brainY);
                ctx.globalAlpha = 1;
            }
        }

        // Controls
        btnPlay.addEventListener('click', () => {
            running = !running;
            btnPlay.textContent = running ? '‚è∏ Pause' : '‚ñ∂ Run Simulation';
            btnPlay.classList.toggle('active', running);
            if (running) update();
        });

        btnFast.addEventListener('click', () => {
            speed = speed === 1 ? 1000 : 1;
            btnFast.textContent = speed === 1 ? '‚è© 1000x Speed' : '‚è© 1x Speed';
            btnFast.classList.toggle('active', speed > 1);
        });

        btnReset.addEventListener('click', () => {
            simTime = 0;
            entropy = 50;
            minorFluctuations = 0;
            brainCount = 0;
            universeCount = 0;
            brainAppearing = false;
            particles.forEach(p => p.reset());

            entropyEl.textContent = '50%';
            timeEl.textContent = '0';
            statYears.textContent = '0';
            statMinor.textContent = '0';
            statBrains.textContent = '0';
            statUniverses.textContent = '0';

            ctx.fillStyle = 'rgba(10, 10, 18, 1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            particles.forEach(p => p.draw());
        });

        // Initial draw
        draw();
    </script>
</body>
</html>
