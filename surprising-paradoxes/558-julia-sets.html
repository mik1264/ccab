<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Julia Sets - Surprising Paradoxes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #0a0a1a 0%, #1a1a3e 50%, #0a1a2e 100%);
            color: #e6f1ff;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #f472b6;
            text-decoration: none;
            font-size: 14px;
            z-index: 100;
            padding: 8px 16px;
            background: rgba(244, 114, 182, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            transition: all 0.3s;
        }

        .back-link:hover {
            background: rgba(244, 114, 182, 0.2);
        }

        header {
            text-align: center;
            padding: 60px 20px 20px;
        }

        h1 {
            font-size: clamp(1.8rem, 5vw, 2.8rem);
            background: linear-gradient(135deg, #f472b6, #c084fc, #38bdf8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
        }

        .subtitle {
            font-size: 1rem;
            color: #8892b0;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .main-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            max-width: 1400px;
            margin: 20px auto;
            padding: 0 20px;
        }

        @media (max-width: 1000px) {
            .main-container {
                grid-template-columns: 1fr;
            }
        }

        .canvas-panel {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(244, 114, 182, 0.2);
            border-radius: 20px;
            padding: 15px;
        }

        .canvas-panel h3 {
            color: #f472b6;
            font-size: 0.9rem;
            margin-bottom: 10px;
            text-align: center;
        }

        canvas {
            width: 100%;
            height: 400px;
            background: #000;
            border-radius: 12px;
            cursor: crosshair;
        }

        .param-display {
            text-align: center;
            margin-top: 10px;
            font-family: monospace;
            font-size: 0.85rem;
            color: #c084fc;
        }

        .controls-panel {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(244, 114, 182, 0.2);
            border-radius: 20px;
            padding: 25px;
            grid-column: 1 / -1;
        }

        .control-section {
            margin-bottom: 15px;
        }

        .control-section h3 {
            color: #f472b6;
            font-size: 0.85rem;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .presets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 8px;
        }

        .preset-btn {
            padding: 12px 10px;
            background: rgba(192, 132, 252, 0.1);
            border: 1px solid rgba(192, 132, 252, 0.3);
            border-radius: 10px;
            color: #c084fc;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.8rem;
            text-align: center;
        }

        .preset-btn:hover, .preset-btn.active {
            background: rgba(192, 132, 252, 0.3);
            border-color: #c084fc;
        }

        .preset-btn small {
            display: block;
            color: #8892b0;
            font-size: 0.7rem;
            margin-top: 4px;
        }

        .slider-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .slider-group {
            margin: 10px 0;
        }

        .slider-group label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.85rem;
            color: #a8b2d1;
        }

        .slider-group input[type="range"] {
            width: 100%;
            height: 5px;
            -webkit-appearance: none;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }

        .slider-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: linear-gradient(135deg, #f472b6, #c084fc);
            border-radius: 50%;
            cursor: pointer;
        }

        .connection-box {
            background: linear-gradient(135deg, rgba(244, 114, 182, 0.1), rgba(56, 189, 248, 0.1));
            border-radius: 15px;
            padding: 20px;
            margin: 20px auto;
            max-width: 1360px;
            text-align: center;
        }

        .connection-box h3 {
            color: #38bdf8;
            margin-bottom: 10px;
        }

        .connection-box p {
            color: #a8b2d1;
            line-height: 1.6;
        }

        .explanation {
            background: linear-gradient(135deg, rgba(244, 114, 182, 0.05), rgba(192, 132, 252, 0.05));
            border-radius: 20px;
            padding: 30px;
            margin: 30px auto;
            max-width: 1360px;
        }

        .explanation h2 {
            color: #f472b6;
            margin-bottom: 20px;
        }

        .exp-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .exp-card {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid #c084fc;
        }

        .exp-card h3 {
            color: #c084fc;
            margin-bottom: 10px;
            font-size: 1rem;
        }

        .exp-card p {
            color: #a8b2d1;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        footer {
            text-align: center;
            padding: 40px 20px;
            color: #495670;
            font-size: 0.85rem;
        }

        footer a {
            color: #f472b6;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back to Paradoxes</a>

    <header>
        <h1>Julia Sets</h1>
        <p class="subtitle">
            Each point in the Mandelbrot set corresponds to a different Julia set.
            Click on the Mandelbrot to explore the infinite family of Julia fractals‚Äî
            connected sets, disconnected "dust," and everything in between.
        </p>
    </header>

    <div class="main-container">
        <div class="canvas-panel">
            <h3>Mandelbrot Set (click to choose c)</h3>
            <canvas id="mandelbrotCanvas"></canvas>
            <div class="param-display">Click anywhere to select c value</div>
        </div>

        <div class="canvas-panel">
            <h3>Julia Set for c = <span id="cValue">-0.4 + 0.6i</span></h3>
            <canvas id="juliaCanvas"></canvas>
            <div class="param-display" id="juliaType">Connected Julia Set</div>
        </div>

        <div class="controls-panel">
            <div class="control-section">
                <h3>Famous Julia Sets</h3>
                <div class="presets-grid">
                    <button class="preset-btn" onclick="setC(-0.4, 0.6)">
                        Rabbit
                        <small>c = -0.4 + 0.6i</small>
                    </button>
                    <button class="preset-btn" onclick="setC(0.285, 0.01)">
                        Seahorse
                        <small>c = 0.285 + 0.01i</small>
                    </button>
                    <button class="preset-btn" onclick="setC(-0.835, -0.2321)">
                        Dragon
                        <small>c = -0.835 - 0.232i</small>
                    </button>
                    <button class="preset-btn" onclick="setC(-0.8, 0.156)">
                        San Marco
                        <small>c = -0.8 + 0.156i</small>
                    </button>
                    <button class="preset-btn" onclick="setC(-0.7269, 0.1889)">
                        Spiral
                        <small>c = -0.727 + 0.189i</small>
                    </button>
                    <button class="preset-btn" onclick="setC(0.285, 0.535)">
                        Galaxy
                        <small>c = 0.285 + 0.535i</small>
                    </button>
                    <button class="preset-btn" onclick="setC(-1.476, 0)">
                        Cauliflower
                        <small>c = -1.476 + 0i</small>
                    </button>
                    <button class="preset-btn" onclick="setC(0, 1)">
                        Dendrite
                        <small>c = 0 + 1i</small>
                    </button>
                    <button class="preset-btn" onclick="setC(-0.123, 0.745)">
                        Douady Rabbit
                        <small>c = -0.123 + 0.745i</small>
                    </button>
                    <button class="preset-btn" onclick="setC(-0.75, 0)">
                        Basilica
                        <small>c = -0.75 + 0i</small>
                    </button>
                    <button class="preset-btn" onclick="setC(0.35, 0.35)">
                        Dust
                        <small>c = 0.35 + 0.35i</small>
                    </button>
                    <button class="preset-btn" onclick="setC(-2, 0)">
                        Line
                        <small>c = -2 + 0i</small>
                    </button>
                </div>
            </div>

            <div class="control-section">
                <h3>Manual c Selection</h3>
                <div class="slider-row">
                    <div class="slider-group">
                        <label>
                            <span>Real(c):</span>
                            <span id="realValue">-0.4</span>
                        </label>
                        <input type="range" id="realSlider" min="-2" max="1" step="0.01" value="-0.4">
                    </div>
                    <div class="slider-group">
                        <label>
                            <span>Imag(c):</span>
                            <span id="imagValue">0.6</span>
                        </label>
                        <input type="range" id="imagSlider" min="-1.5" max="1.5" step="0.01" value="0.6">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="connection-box">
        <h3>üîó The Mandelbrot-Julia Connection</h3>
        <p>
            The Mandelbrot set is a "map" of all Julia sets! Points <strong>inside</strong> the Mandelbrot
            give <strong>connected</strong> Julia sets. Points <strong>outside</strong> give <strong>disconnected</strong>
            "Fatou dust." Points on the <strong>boundary</strong> create the most intricate patterns.
        </p>
    </div>

    <div class="explanation">
        <h2>Two Sides of the Same Formula</h2>

        <div class="exp-grid">
            <div class="exp-card">
                <h3>Same Formula, Different Question</h3>
                <p><strong>Mandelbrot:</strong> Fix z‚ÇÄ = 0, vary c. Which c values keep the orbit bounded?<br>
                   <strong>Julia:</strong> Fix c, vary z‚ÇÄ. Which starting points keep the orbit bounded?</p>
            </div>
            <div class="exp-card">
                <h3>Connected vs. Disconnected</h3>
                <p>If c is inside the Mandelbrot set, the Julia set is one connected piece.
                   If c is outside, the Julia set shatters into infinitely many disconnected points
                   called "Fatou dust" or "Cantor dust."</p>
            </div>
            <div class="exp-card">
                <h3>Self-Similarity</h3>
                <p>Julia sets are perfectly self-similar at every scale. Zoom into any part
                   and you see the same pattern. This is in contrast to the Mandelbrot set,
                   which has similar but not identical copies.</p>
            </div>
            <div class="exp-card">
                <h3>Historical Note</h3>
                <p>Gaston Julia studied these sets in 1918, decades before computers!
                   He could only imagine their beauty. Mandelbrot visualized them in the 1980s,
                   revealing structures Julia could never have seen.</p>
            </div>
        </div>
    </div>

    <footer>
        <p>Part of <a href="index.html">Surprising Paradoxes</a> |
           First studied by Gaston Julia (1918) ‚Ä¢ Visualized by Benoit Mandelbrot (1980s)</p>
    </footer>

    <script>
        const mandelbrotCanvas = document.getElementById('mandelbrotCanvas');
        const juliaCanvas = document.getElementById('juliaCanvas');
        const mCtx = mandelbrotCanvas.getContext('2d');
        const jCtx = juliaCanvas.getContext('2d');

        let cReal = -0.4;
        let cImag = 0.6;
        const maxIterations = 150;

        function resizeCanvases() {
            [mandelbrotCanvas, juliaCanvas].forEach(canvas => {
                const rect = canvas.getBoundingClientRect();
                canvas.width = rect.width * 2;
                canvas.height = rect.height * 2;
            });
        }

        function getColor(iterations, maxIter) {
            if (iterations === maxIter) return [0, 0, 0];

            const t = iterations / maxIter;
            const h = 280 + t * 60;
            const s = 80;
            const l = 20 + t * 50;

            // HSL to RGB
            const c = (1 - Math.abs(2 * l / 100 - 1)) * s / 100;
            const x = c * (1 - Math.abs((h / 60) % 2 - 1));
            const m = l / 100 - c / 2;

            let r, g, b;
            if (h < 60) { r = c; g = x; b = 0; }
            else if (h < 120) { r = x; g = c; b = 0; }
            else if (h < 180) { r = 0; g = c; b = x; }
            else if (h < 240) { r = 0; g = x; b = c; }
            else if (h < 300) { r = x; g = 0; b = c; }
            else { r = c; g = 0; b = x; }

            return [
                Math.round((r + m) * 255),
                Math.round((g + m) * 255),
                Math.round((b + m) * 255)
            ];
        }

        function mandelbrotIterate(cx, cy) {
            let x = 0, y = 0;
            let iter = 0;

            while (x*x + y*y <= 4 && iter < maxIterations) {
                const xNew = x*x - y*y + cx;
                y = 2*x*y + cy;
                x = xNew;
                iter++;
            }

            return iter;
        }

        function juliaIterate(zx, zy, cx, cy) {
            let iter = 0;

            while (zx*zx + zy*zy <= 4 && iter < maxIterations) {
                const xNew = zx*zx - zy*zy + cx;
                zy = 2*zx*zy + cy;
                zx = xNew;
                iter++;
            }

            return iter;
        }

        function renderMandelbrot() {
            const width = mandelbrotCanvas.width;
            const height = mandelbrotCanvas.height;
            const imageData = mCtx.createImageData(width, height);
            const data = imageData.data;

            const xMin = -2.5, xMax = 1;
            const yMin = -1.5, yMax = 1.5;

            for (let py = 0; py < height; py++) {
                for (let px = 0; px < width; px++) {
                    const cx = xMin + (px / width) * (xMax - xMin);
                    const cy = yMin + (py / height) * (yMax - yMin);

                    const iter = mandelbrotIterate(cx, cy);
                    const [r, g, b] = getColor(iter, maxIterations);

                    const idx = (py * width + px) * 4;
                    data[idx] = r;
                    data[idx + 1] = g;
                    data[idx + 2] = b;
                    data[idx + 3] = 255;
                }
            }

            mCtx.putImageData(imageData, 0, 0);

            // Mark current c point
            const markerX = ((cReal - xMin) / (xMax - xMin)) * width;
            const markerY = ((cImag - yMin) / (yMax - yMin)) * height;

            mCtx.strokeStyle = '#fff';
            mCtx.lineWidth = 2;
            mCtx.beginPath();
            mCtx.arc(markerX, markerY, 8, 0, Math.PI * 2);
            mCtx.stroke();

            mCtx.fillStyle = '#f472b6';
            mCtx.beginPath();
            mCtx.arc(markerX, markerY, 4, 0, Math.PI * 2);
            mCtx.fill();
        }

        function renderJulia() {
            const width = juliaCanvas.width;
            const height = juliaCanvas.height;
            const imageData = jCtx.createImageData(width, height);
            const data = imageData.data;

            const xMin = -2, xMax = 2;
            const yMin = -1.5, yMax = 1.5;

            for (let py = 0; py < height; py++) {
                for (let px = 0; px < width; px++) {
                    const zx = xMin + (px / width) * (xMax - xMin);
                    const zy = yMin + (py / height) * (yMax - yMin);

                    const iter = juliaIterate(zx, zy, cReal, cImag);
                    const [r, g, b] = getColor(iter, maxIterations);

                    const idx = (py * width + px) * 4;
                    data[idx] = r;
                    data[idx + 1] = g;
                    data[idx + 2] = b;
                    data[idx + 3] = 255;
                }
            }

            jCtx.putImageData(imageData, 0, 0);
        }

        function setC(real, imag) {
            cReal = real;
            cImag = imag;
            updateDisplay();
            renderMandelbrot();
            renderJulia();
        }

        function updateDisplay() {
            const sign = cImag >= 0 ? '+' : '-';
            document.getElementById('cValue').textContent =
                `${cReal.toFixed(3)} ${sign} ${Math.abs(cImag).toFixed(3)}i`;
            document.getElementById('realSlider').value = cReal;
            document.getElementById('imagSlider').value = cImag;
            document.getElementById('realValue').textContent = cReal.toFixed(2);
            document.getElementById('imagValue').textContent = cImag.toFixed(2);

            // Check if c is inside Mandelbrot (simplified check)
            const inMandelbrot = mandelbrotIterate(cReal, cImag) === maxIterations;
            document.getElementById('juliaType').textContent =
                inMandelbrot ? 'Connected Julia Set' : 'Disconnected (Fatou Dust)';
        }

        // Click on Mandelbrot to select c
        mandelbrotCanvas.addEventListener('click', (e) => {
            const rect = mandelbrotCanvas.getBoundingClientRect();
            const x = (e.clientX - rect.left) / rect.width;
            const y = (e.clientY - rect.top) / rect.height;

            cReal = -2.5 + x * 3.5;
            cImag = -1.5 + y * 3;

            updateDisplay();
            renderMandelbrot();
            renderJulia();
        });

        // Sliders
        document.getElementById('realSlider').addEventListener('input', (e) => {
            cReal = parseFloat(e.target.value);
            document.getElementById('realValue').textContent = cReal.toFixed(2);
        });

        document.getElementById('realSlider').addEventListener('change', () => {
            updateDisplay();
            renderMandelbrot();
            renderJulia();
        });

        document.getElementById('imagSlider').addEventListener('input', (e) => {
            cImag = parseFloat(e.target.value);
            document.getElementById('imagValue').textContent = cImag.toFixed(2);
        });

        document.getElementById('imagSlider').addEventListener('change', () => {
            updateDisplay();
            renderMandelbrot();
            renderJulia();
        });

        window.addEventListener('resize', () => {
            resizeCanvases();
            renderMandelbrot();
            renderJulia();
        });

        // Initialize
        resizeCanvases();
        updateDisplay();
        renderMandelbrot();
        renderJulia();
    </script>
</body>
</html>
