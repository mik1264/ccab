<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thomson's Lamp | Surprising Paradoxes</title>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --sage: #8A9A5B;
            --moss: #606C38;
            --earth: #DDA15E;
            --cream: #FEFAE0;
            --terracotta: #BC6C25;
            --dark-moss: #3d4423;
            --lamp-glow: #FFD93D;
            --lamp-off: #3a3a3a;
            --dark-bg: #1a1a1a;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(180deg, var(--dark-bg) 0%, #0d0d0d 100%);
            min-height: 100vh;
            color: var(--cream);
            overflow-x: hidden;
        }

        .organic-back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            background: rgba(255,255,255,0.85);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            text-decoration: none;
            color: var(--moss);
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .organic-back-link:hover {
            transform: translateX(-3px);
            background: #fff;
        }

        header {
            text-align: center;
            padding: 60px 20px 30px;
        }

        h1 {
            font-family: 'Lora', serif;
            font-size: 2.5em;
            color: var(--lamp-glow);
            margin-bottom: 10px;
            text-shadow: 0 0 30px rgba(255,217,61,0.3);
        }

        .subtitle {
            font-size: 1.2em;
            color: #888;
            font-weight: 500;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .main-layout {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 30px;
            align-items: start;
        }

        @media (max-width: 1000px) {
            .main-layout {
                grid-template-columns: 1fr;
            }
        }

        .lamp-area {
            background: linear-gradient(135deg, #2a2a2a 0%, var(--dark-bg) 100%);
            border: 2px solid #444;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }

        .lamp-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px;
        }

        .lamp {
            width: 120px;
            height: 180px;
            position: relative;
            transition: all 0.1s ease;
        }

        .lamp-bulb {
            width: 100px;
            height: 100px;
            background: var(--lamp-off);
            border-radius: 50% 50% 40% 40%;
            margin: 0 auto;
            position: relative;
            transition: all 0.05s ease;
        }

        .lamp.on .lamp-bulb {
            background: radial-gradient(circle at 30% 30%, #fff 0%, var(--lamp-glow) 40%, #f0b800 100%);
            box-shadow: 0 0 60px var(--lamp-glow), 0 0 120px rgba(255,217,61,0.5), 0 0 200px rgba(255,217,61,0.3);
        }

        .lamp-base {
            width: 60px;
            height: 20px;
            background: linear-gradient(180deg, #666 0%, #333 100%);
            margin: 0 auto;
            border-radius: 0 0 10px 10px;
        }

        .lamp-stand {
            width: 20px;
            height: 60px;
            background: linear-gradient(90deg, #444 0%, #666 50%, #444 100%);
            margin: 0 auto;
        }

        .lamp-foot {
            width: 80px;
            height: 15px;
            background: linear-gradient(180deg, #555 0%, #333 100%);
            margin: 0 auto;
            border-radius: 5px;
        }

        .state-display {
            text-align: center;
            margin-top: 30px;
        }

        .state-label {
            font-family: 'Lora', serif;
            font-size: 3em;
            margin-bottom: 10px;
            transition: color 0.1s;
        }

        .state-label.on {
            color: var(--lamp-glow);
            text-shadow: 0 0 20px var(--lamp-glow);
        }

        .state-label.off {
            color: #666;
        }

        .timer-display {
            font-family: 'Courier New', monospace;
            font-size: 1.5em;
            color: #888;
            margin-top: 10px;
        }

        .switch-count {
            margin-top: 10px;
            color: #aaa;
        }

        .timeline {
            margin-top: 30px;
            background: #222;
            border-radius: 15px;
            padding: 20px;
        }

        .timeline-header {
            font-family: 'Lora', serif;
            color: var(--lamp-glow);
            margin-bottom: 15px;
        }

        .timeline-bar {
            height: 40px;
            background: #333;
            border-radius: 10px;
            position: relative;
            overflow: hidden;
        }

        .timeline-segment {
            position: absolute;
            height: 100%;
            transition: all 0.1s;
        }

        .timeline-segment.on {
            background: linear-gradient(180deg, var(--lamp-glow) 0%, #c9a227 100%);
        }

        .timeline-segment.off {
            background: #1a1a1a;
        }

        .timeline-marker {
            position: absolute;
            top: -8px;
            width: 3px;
            height: 56px;
            background: #fff;
            transform: translateX(-1px);
        }

        .timeline-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            font-size: 0.85em;
            color: #666;
        }

        .sequence-display {
            margin-top: 20px;
            padding: 15px;
            background: #222;
            border-radius: 10px;
            text-align: center;
        }

        .sequence-title {
            font-size: 0.9em;
            color: #888;
            margin-bottom: 10px;
        }

        .sequence-bits {
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
            letter-spacing: 2px;
        }

        .bit-on {
            color: var(--lamp-glow);
        }

        .bit-off {
            color: #666;
        }

        .controls-panel {
            background: linear-gradient(135deg, #2a2a2a 0%, var(--dark-bg) 100%);
            border: 2px solid #444;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.4);
        }

        .control-group {
            margin-bottom: 20px;
        }

        .control-label {
            display: block;
            font-family: 'Lora', serif;
            font-weight: 600;
            color: var(--lamp-glow);
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .animation-controls {
            display: flex;
            gap: 10px;
        }

        button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 25px;
            font-family: 'Nunito', sans-serif;
            font-weight: 600;
            font-size: 0.95em;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-glow {
            background: linear-gradient(135deg, var(--lamp-glow) 0%, #c9a227 100%);
            color: #1a1a1a;
        }

        .btn-glow:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255,217,61,0.4);
        }

        .btn-dark {
            background: rgba(255,255,255,0.1);
            color: #aaa;
            border: 1px solid #444;
        }

        .btn-dark:hover {
            background: rgba(255,255,255,0.2);
        }

        .paradox-box {
            background: linear-gradient(135deg, #2a1a00 0%, #1a1000 100%);
            border: 2px solid var(--lamp-glow);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        .paradox-title {
            font-family: 'Lora', serif;
            color: var(--lamp-glow);
            margin-bottom: 10px;
        }

        .paradox-text {
            font-size: 0.95em;
            line-height: 1.6;
            color: #ddd;
        }

        .grandi-series {
            font-family: 'Courier New', monospace;
            text-align: center;
            padding: 15px;
            background: #222;
            border-radius: 10px;
            margin: 15px 0;
            font-size: 1.1em;
        }

        .final-question {
            text-align: center;
            padding: 20px;
            background: rgba(255,217,61,0.1);
            border-radius: 15px;
            margin-top: 15px;
        }

        .final-question .big-q {
            font-size: 4em;
            color: var(--lamp-glow);
        }

        .final-question p {
            color: #aaa;
            margin-top: 10px;
        }

        .explanation {
            background: linear-gradient(135deg, #2a2a2a 0%, var(--dark-bg) 100%);
            border: 2px solid #444;
            border-radius: 20px;
            padding: 30px;
            margin-top: 30px;
            color: #ccc;
        }

        .explanation h2 {
            font-family: 'Lora', serif;
            color: var(--lamp-glow);
            margin: 20px 0 15px;
        }

        .explanation h2:first-child {
            margin-top: 0;
        }

        .explanation p {
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .highlight {
            background: rgba(255,217,61,0.2);
            padding: 2px 6px;
            border-radius: 3px;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #444;
        }

        .comparison-table th {
            background: rgba(255,217,61,0.2);
            color: var(--lamp-glow);
            font-family: 'Lora', serif;
        }

        .comparison-table tr:hover {
            background: rgba(255,255,255,0.05);
        }

        .narration {
            background: rgba(255,217,61,0.1);
            border-left: 4px solid var(--lamp-glow);
            padding: 15px 20px;
            margin: 15px 0;
            font-style: italic;
            border-radius: 0 10px 10px 0;
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: linear-gradient(90deg, #444 0%, var(--lamp-glow) 100%);
            outline: none;
            -webkit-appearance: none;
            cursor: pointer;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .slider-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.85em;
            color: #666;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <a href="index.html" class="organic-back-link">
        <span class="back-arrow">‚Üê</span>
        <span class="back-text">Gallery</span>
    </a>

    <header>
        <h1>üí° Thomson's Lamp</h1>
        <p class="subtitle">After infinitely many switches... is the lamp ON or OFF?</p>
    </header>

    <div class="container">
        <div class="main-layout">
            <div class="lamp-area">
                <div class="lamp-container">
                    <div class="lamp" id="lamp">
                        <div class="lamp-bulb"></div>
                        <div class="lamp-base"></div>
                        <div class="lamp-stand"></div>
                        <div class="lamp-foot"></div>
                    </div>

                    <div class="state-display">
                        <div class="state-label off" id="stateLabel">OFF</div>
                        <div class="timer-display">Time: <span id="timerDisplay">0.000</span> min</div>
                        <div class="switch-count">Switches: <span id="switchCount">0</span></div>
                    </div>
                </div>

                <div class="timeline">
                    <div class="timeline-header">Timeline (0 ‚Üí 2 minutes)</div>
                    <div class="timeline-bar" id="timelineBar">
                        <div class="timeline-marker" id="timelineMarker" style="left: 0%;"></div>
                    </div>
                    <div class="timeline-labels">
                        <span>0 min</span>
                        <span>1 min</span>
                        <span>1.5 min</span>
                        <span>1.75 min</span>
                        <span>2 min</span>
                    </div>
                </div>

                <div class="sequence-display">
                    <div class="sequence-title">State Sequence:</div>
                    <div class="sequence-bits" id="sequenceBits">
                        <span class="bit-off">‚Ä¢</span>
                    </div>
                </div>
            </div>

            <div class="controls-panel">
                <div class="control-group">
                    <label class="control-label">üé¨ Simulation</label>
                    <div class="animation-controls">
                        <button class="btn-glow" id="startBtn">‚ñ∂ Start Supertask</button>
                        <button class="btn-dark" id="resetBtn">‚Ü∫ Reset</button>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label">‚ö° Speed</label>
                    <input type="range" id="speedSlider" min="1" max="10" value="5">
                    <div class="slider-labels">
                        <span>Slow</span>
                        <span>Fast</span>
                    </div>
                </div>

                <div class="paradox-box">
                    <div class="paradox-title">ü§Ø The Paradox</div>
                    <div class="paradox-text">
                        Switch at t=1, t=1.5, t=1.75, t=1.875...<br>
                        All switches complete by t=2 minutes.<br><br>
                        At t=2, is the lamp ON or OFF?<br><br>
                        <strong>It can't be ON</strong> ‚Äì every ON was followed by OFF!<br>
                        <strong>It can't be OFF</strong> ‚Äì every OFF was followed by ON!
                    </div>
                </div>

                <div class="grandi-series">
                    1 ‚àí 1 + 1 ‚àí 1 + 1 ‚àí 1 + ... = <span style="color: var(--lamp-glow);">???</span>
                </div>

                <div class="final-question" id="finalQuestion" style="display: none;">
                    <div class="big-q">‚ùì</div>
                    <p>The sequence 0, 1, 0, 1, 0, 1...<br>has NO limit!</p>
                </div>
            </div>
        </div>

        <div class="explanation">
            <h2>The Setup</h2>

            <p>
                In 1954, British philosopher <span class="highlight">James F. Thomson</span> devised this thought
                experiment to analyze <strong>supertasks</strong>‚Äîthe completion of infinitely many tasks in finite time.
            </p>

            <div class="narration">
                "Suppose I switch the lamp on at time 0. At t=1 minute, I switch it off.
                At t=1.5 minutes, I switch it on. At t=1.75 minutes, off again.
                Each switch takes half the time of the previous interval..."
            </div>

            <p>
                The switching times form a geometric series: 1 + 0.5 + 0.25 + 0.125 + ... = <strong>2 minutes</strong>.
                After exactly 2 minutes, infinitely many switches have occurred.
            </p>

            <h2>The Contradiction</h2>

            <table class="comparison-table">
                <tr>
                    <th>Argument</th>
                    <th>Conclusion</th>
                    <th>Problem</th>
                </tr>
                <tr>
                    <td>Every ON is followed by OFF</td>
                    <td>Can't end ON</td>
                    <td>There's no "last" switch!</td>
                </tr>
                <tr>
                    <td>Every OFF is followed by ON</td>
                    <td>Can't end OFF</td>
                    <td>Same problem in reverse!</td>
                </tr>
                <tr>
                    <td>Lamp must be ON or OFF</td>
                    <td>Contradiction!</td>
                    <td>???</td>
                </tr>
            </table>

            <h2>Grandi's Series: The Mathematical Heart</h2>

            <p>
                If we represent ON = 1 and OFF = 0, the lamp's state at any moment before t=2 is:
            </p>

            <div class="grandi-series" style="font-size: 1.3em;">
                S = 1 ‚àí 1 + 1 ‚àí 1 + 1 ‚àí 1 + ...
            </div>

            <p>
                This is <span class="highlight">Grandi's series</span>, which famously has no standard sum:
            </p>

            <ul style="margin-left: 25px; line-height: 2;">
                <li><strong>Group as (1-1) + (1-1) + ...</strong> = 0 + 0 + ... = 0</li>
                <li><strong>Group as 1 + (-1+1) + (-1+1) + ...</strong> = 1 + 0 + 0 + ... = 1</li>
                <li><strong>Ces√†ro sum:</strong> Average of partial sums = 1/2</li>
            </ul>

            <p>
                The sequence of partial sums is 1, 0, 1, 0, 1, 0... which <strong>oscillates forever</strong>
                and does not converge to any value.
            </p>

            <h2>Resolution: The Problem Is Underspecified</h2>

            <p>
                Philosopher <span class="highlight">Paul Benacerraf</span> (1962) argued that Thomson's lamp
                is not truly paradoxical‚Äîit's simply <em>underspecified</em>.
            </p>

            <p>
                The supertask defines the lamp's state at every time <strong>before</strong> t=2,
                but nothing in the setup logically determines its state <strong>at</strong> t=2.
                The final state is simply not entailed by the infinite sequence of switches.
            </p>

            <div class="narration">
                "The lamp could be ON at t=2, or OFF, or transformed into a pumpkin.
                Nothing in the premises rules out any possibility."
            </div>

            <h2>Comparison with Ross-Littlewood</h2>

            <p>
                Unlike the <span class="highlight">Ross-Littlewood paradox</span> (balls in a vase),
                Thomson's lamp has no definite mathematical answer:
            </p>

            <table class="comparison-table">
                <tr>
                    <th>Paradox</th>
                    <th>Question</th>
                    <th>Answer</th>
                </tr>
                <tr>
                    <td>Ross-Littlewood</td>
                    <td>How many balls at noon?</td>
                    <td><strong>0</strong> (each ball n removed at step n)</td>
                </tr>
                <tr>
                    <td>Thomson's Lamp</td>
                    <td>Is lamp on or off at t=2?</td>
                    <td><strong>Undetermined</strong> (no convergent limit)</td>
                </tr>
            </table>

            <p>
                The difference: in Ross-Littlewood, we can trace each ball's fate.
                In Thomson's lamp, the ON/OFF sequence has no limit‚Äîthe question is meaningless
                without additional assumptions about what happens at t=2.
            </p>
        </div>
    </div>

    <script>
        const lamp = document.getElementById('lamp');
        const stateLabel = document.getElementById('stateLabel');
        const timerDisplay = document.getElementById('timerDisplay');
        const switchCount = document.getElementById('switchCount');
        const timelineBar = document.getElementById('timelineBar');
        const timelineMarker = document.getElementById('timelineMarker');
        const sequenceBits = document.getElementById('sequenceBits');
        const finalQuestion = document.getElementById('finalQuestion');
        const startBtn = document.getElementById('startBtn');
        const resetBtn = document.getElementById('resetBtn');
        const speedSlider = document.getElementById('speedSlider');

        let isOn = false;
        let switches = 0;
        let running = false;
        let timeouts = [];

        function setLampState(on) {
            isOn = on;
            lamp.classList.toggle('on', on);
            stateLabel.classList.toggle('on', on);
            stateLabel.classList.toggle('off', !on);
            stateLabel.textContent = on ? 'ON' : 'OFF';
        }

        function updateTimer(time) {
            timerDisplay.textContent = time.toFixed(3);
            const percent = (time / 2) * 100;
            timelineMarker.style.left = percent + '%';
        }

        function updateSequence() {
            let bits = '';
            const maxShow = 20;
            const showCount = Math.min(switches + 1, maxShow);

            for (let i = 0; i < showCount; i++) {
                const on = i % 2 === 0;
                bits += `<span class="${on ? 'bit-on' : 'bit-off'}">${on ? '1' : '0'}</span> `;
            }

            if (switches >= maxShow) {
                bits += '<span style="color: #888;">...</span>';
            }

            sequenceBits.innerHTML = bits;
        }

        function updateTimeline(time) {
            // Create segments for the timeline
            let html = '';
            let lastTime = 0;
            const segmentTimes = [];

            for (let i = 0; i <= switches; i++) {
                const switchTime = i === 0 ? 0 : 2 - Math.pow(0.5, i - 1);
                segmentTimes.push(switchTime);
            }

            // Current time
            const currentTime = time;

            for (let i = 0; i < segmentTimes.length; i++) {
                const start = segmentTimes[i];
                const end = i < segmentTimes.length - 1 ? segmentTimes[i + 1] : Math.min(currentTime, 2);
                const on = i % 2 === 0;

                if (end > start) {
                    const left = (start / 2) * 100;
                    const width = ((end - start) / 2) * 100;

                    html += `<div class="timeline-segment ${on ? 'on' : 'off'}" style="left: ${left}%; width: ${width}%;"></div>`;
                }
            }

            html += `<div class="timeline-marker" id="timelineMarker" style="left: ${(time / 2) * 100}%;"></div>`;
            timelineBar.innerHTML = html;
        }

        async function runSupertask() {
            if (running) return;
            running = true;
            startBtn.textContent = '‚è∏ Running...';
            startBtn.disabled = true;

            const speed = parseInt(speedSlider.value);
            const baseDelay = 1100 - speed * 100;

            // First switch at t=0 (turn on)
            setLampState(true);
            switches = 1;
            switchCount.textContent = switches;
            updateSequence();
            updateTimeline(0);
            await sleep(baseDelay);

            // Subsequent switches
            let t = 1; // Time in minutes
            let interval = 0.5;
            const maxSwitches = 20; // Visual limit

            while (switches < maxSwitches && running) {
                updateTimer(t);
                updateTimeline(t);

                setLampState(!isOn);
                switches++;
                switchCount.textContent = switches;
                updateSequence();

                await sleep(Math.max(baseDelay * interval, 50));

                t += interval;
                interval /= 2;
            }

            if (running) {
                // Rapid remaining switches
                for (let i = 0; i < 50 && running; i++) {
                    setLampState(!isOn);
                    switches++;
                    switchCount.textContent = switches;
                    t += interval;
                    interval /= 2;
                    await sleep(20);
                }

                // Final state: t=2
                updateTimer(2);
                updateTimeline(2);

                // Show the paradox
                stateLabel.textContent = '???';
                stateLabel.classList.remove('on', 'off');
                stateLabel.style.color = 'var(--lamp-glow)';
                lamp.classList.remove('on');

                finalQuestion.style.display = 'block';
                switchCount.textContent = '‚àû';
            }

            running = false;
            startBtn.textContent = '‚ñ∂ Start Supertask';
            startBtn.disabled = false;
        }

        function sleep(ms) {
            return new Promise(resolve => {
                const id = setTimeout(resolve, ms);
                timeouts.push(id);
            });
        }

        function reset() {
            running = false;
            timeouts.forEach(clearTimeout);
            timeouts = [];

            isOn = false;
            switches = 0;

            setLampState(false);
            switchCount.textContent = '0';
            updateTimer(0);
            sequenceBits.innerHTML = '<span class="bit-off">‚Ä¢</span>';
            timelineBar.innerHTML = '<div class="timeline-marker" style="left: 0%;"></div>';
            finalQuestion.style.display = 'none';
            stateLabel.style.color = '';

            startBtn.textContent = '‚ñ∂ Start Supertask';
            startBtn.disabled = false;
        }

        // Event listeners
        startBtn.addEventListener('click', runSupertask);
        resetBtn.addEventListener('click', reset);

        // Initialize
        reset();
    </script>
</body>
</html>
