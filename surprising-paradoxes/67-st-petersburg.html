<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The St. Petersburg Paradox - Infinite Expected Value</title>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #f1c40f;
            --gold-dark: #d4ac0d;
            --casino-green: #27ae60;
            --casino-red: #c0392b;
            --sage: #8A9A5B;
            --moss: #606C38;
            --cream: #FEFAE0;
            --velvet: #1a1a2e;
            --felt: #2d4a3e;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, var(--velvet) 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #ecf0f1;
            overflow-x: hidden;
        }

        /* Casino table background */
        .casino-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(ellipse at center, rgba(45, 74, 62, 0.3) 0%, transparent 70%),
                repeating-linear-gradient(45deg, rgba(255, 215, 0, 0.02) 0px, rgba(255, 215, 0, 0.02) 2px, transparent 2px, transparent 10px);
            z-index: 0;
        }

        /* Floating coins */
        .floating-coin {
            position: fixed;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: linear-gradient(135deg, #f1c40f 0%, #d4ac0d 50%, #f39c12 100%);
            box-shadow: 0 0 20px rgba(241, 196, 15, 0.5);
            z-index: 1;
            animation: floatCoin 6s ease-in-out infinite;
        }

        @keyframes floatCoin {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        .organic-back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 100;
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 18px;
            background: rgba(241, 196, 15, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(241, 196, 15, 0.3);
            border-radius: 30px;
            color: var(--gold);
            text-decoration: none;
            font-family: 'Nunito', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .organic-back-link:hover {
            background: rgba(241, 196, 15, 0.4);
            transform: translateX(-3px);
        }

        .container {
            position: relative;
            z-index: 10;
            max-width: 1100px;
            margin: 0 auto;
            padding: 80px 20px 40px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-family: 'Lora', serif;
            font-size: 2.8rem;
            background: linear-gradient(135deg, #f1c40f, #f39c12, #e67e22);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .header .subtitle {
            font-size: 1.2rem;
            color: #bdc3c7;
        }

        .game-panel {
            background: rgba(45, 74, 62, 0.6);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(241, 196, 15, 0.4);
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .game-area {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }

        @media (max-width: 800px) {
            .game-area {
                grid-template-columns: 1fr;
            }
        }

        .coin-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .coin {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, #f1c40f 0%, #d4ac0d 30%, #f39c12 70%, #e67e22 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            font-weight: bold;
            color: #1a1a2e;
            box-shadow:
                0 0 30px rgba(241, 196, 15, 0.5),
                inset 0 0 20px rgba(255, 255, 255, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
            perspective: 1000px;
        }

        .coin:hover {
            transform: scale(1.05);
            box-shadow: 0 0 50px rgba(241, 196, 15, 0.7);
        }

        .coin.flipping {
            animation: flipCoin 0.8s ease-in-out;
        }

        @keyframes flipCoin {
            0% { transform: rotateY(0); }
            50% { transform: rotateY(900deg) scale(1.2); }
            100% { transform: rotateY(1800deg); }
        }

        .coin.heads { color: var(--casino-green); }
        .coin.tails { color: var(--casino-red); }

        .flip-sequence {
            text-align: center;
            padding: 20px;
        }

        .flip-sequence h3 {
            color: var(--gold);
            margin-bottom: 15px;
        }

        .sequence-display {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
            min-height: 50px;
        }

        .flip-result {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
            animation: popIn 0.3s ease-out;
        }

        @keyframes popIn {
            0% { transform: scale(0); }
            70% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .flip-result.tails {
            background: var(--casino-red);
            color: white;
        }

        .flip-result.heads {
            background: var(--casino-green);
            color: white;
        }

        .prize-display {
            text-align: center;
            padding: 20px;
        }

        .prize-display h3 {
            color: var(--gold);
            margin-bottom: 15px;
        }

        .current-prize {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(135deg, #f1c40f, #e67e22);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: none;
        }

        .prize-formula {
            font-size: 1rem;
            color: #bdc3c7;
            margin-top: 10px;
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 30px;
            font-family: 'Nunito', sans-serif;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-gold {
            background: linear-gradient(135deg, #f1c40f, #e67e22);
            color: #1a1a2e;
        }

        .btn-gold:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 25px rgba(241, 196, 15, 0.5);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .stats-panel {
            background: rgba(22, 33, 62, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(241, 196, 15, 0.3);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .stats-panel h2 {
            font-family: 'Lora', serif;
            color: var(--gold);
            margin-bottom: 20px;
            text-align: center;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
        }

        .stat-box {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--gold);
        }

        .stat-value.positive { color: var(--casino-green); }
        .stat-value.negative { color: var(--casino-red); }

        .stat-label {
            font-size: 0.85rem;
            color: #bdc3c7;
            margin-top: 5px;
        }

        .expected-value-box {
            background: linear-gradient(135deg, rgba(241, 196, 15, 0.2), rgba(230, 126, 34, 0.2));
            border: 2px solid var(--gold);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
        }

        .infinity-symbol {
            font-size: 5rem;
            background: linear-gradient(135deg, #f1c40f, #e67e22);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .explanation {
            background: rgba(22, 33, 62, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(241, 196, 15, 0.3);
            border-radius: 20px;
            padding: 30px;
            margin-top: 30px;
        }

        .explanation h2 {
            font-family: 'Lora', serif;
            color: var(--gold);
            margin-bottom: 20px;
        }

        .explanation p {
            line-height: 1.8;
            margin-bottom: 15px;
            color: #bdc3c7;
        }

        .highlight {
            color: var(--gold);
            font-weight: 600;
        }

        .paradox-box {
            background: linear-gradient(135deg, rgba(241, 196, 15, 0.15), rgba(230, 126, 34, 0.15));
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border-left: 4px solid var(--gold);
        }

        .paradox-box h3 {
            color: var(--gold);
            margin-bottom: 10px;
        }

        .math-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            overflow: hidden;
        }

        .math-table th, .math-table td {
            padding: 12px 15px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .math-table th {
            background: rgba(241, 196, 15, 0.2);
            color: var(--gold);
            font-weight: 600;
        }

        .math-table tr:last-child td {
            border-bottom: none;
        }

        .math-table .contribution {
            color: var(--gold);
            font-weight: bold;
        }

        .solutions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .solution-card {
            background: rgba(45, 74, 62, 0.4);
            border: 1px solid rgba(241, 196, 15, 0.3);
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .solution-card:hover {
            transform: translateY(-5px);
            border-color: var(--gold);
        }

        .solution-card h4 {
            color: var(--gold);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .solution-card p {
            font-size: 0.9rem;
            color: #bdc3c7;
            line-height: 1.6;
        }

        .history-timeline {
            position: relative;
            padding-left: 30px;
            margin: 30px 0;
        }

        .history-timeline::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--gold);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 20px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -26px;
            top: 5px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--gold);
        }

        .timeline-year {
            color: var(--gold);
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="casino-bg"></div>

    <!-- Floating coins -->
    <div class="floating-coin" style="top: 10%; left: 10%; animation-delay: 0s;"></div>
    <div class="floating-coin" style="top: 20%; left: 85%; animation-delay: 1s;"></div>
    <div class="floating-coin" style="top: 60%; left: 5%; animation-delay: 2s;"></div>
    <div class="floating-coin" style="top: 75%; left: 90%; animation-delay: 3s;"></div>

    <a href="index.html" class="organic-back-link">
        <span class="back-arrow">‚Üê</span>
        <span class="back-text">Gallery</span>
    </a>

    <div class="container">
        <header class="header">
            <h1>The St. Petersburg Paradox</h1>
            <p class="subtitle">A game with infinite expected value that no one wants to play</p>
        </header>

        <div class="game-panel">
            <div class="game-area">
                <div class="flip-sequence">
                    <h3>Flip Sequence</h3>
                    <div class="sequence-display" id="sequenceDisplay">
                        <span style="color: #bdc3c7; font-style: italic;">Click the coin to start!</span>
                    </div>
                </div>

                <div class="coin-container">
                    <div class="coin" id="coin" onclick="flipCoin()">ü™ô</div>
                    <p style="margin-top: 15px; color: #bdc3c7; font-size: 0.9rem;">Click to flip!</p>
                </div>

                <div class="prize-display">
                    <h3>Your Prize</h3>
                    <div class="current-prize" id="currentPrize">$0</div>
                    <div class="prize-formula" id="prizeFormula">Flip until heads appears!</div>
                </div>
            </div>

            <div class="controls">
                <button class="btn btn-gold" onclick="flipCoin()">Flip Coin</button>
                <button class="btn btn-secondary" onclick="autoPlay()">Auto Play (100 games)</button>
                <button class="btn btn-secondary" onclick="resetGame()">Reset</button>
            </div>
        </div>

        <div class="stats-panel">
            <h2>Your Statistics</h2>
            <div class="stats-grid">
                <div class="stat-box">
                    <div class="stat-value" id="gamesPlayed">0</div>
                    <div class="stat-label">Games Played</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="totalWinnings">$0</div>
                    <div class="stat-label">Total Winnings</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="avgWinning">$0</div>
                    <div class="stat-label">Average per Game</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="maxWinning">$0</div>
                    <div class="stat-label">Best Game</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="longestRun">0</div>
                    <div class="stat-label">Longest Tail Streak</div>
                </div>
                <div class="stat-box expected-value-box">
                    <div class="stat-label" style="margin-bottom: 10px;">Expected Value</div>
                    <div class="infinity-symbol">‚àû</div>
                    <div class="stat-label" style="margin-top: 10px; color: var(--gold);">Infinite!</div>
                </div>
            </div>
        </div>

        <div class="explanation">
            <h2>The Game Rules</h2>

            <div class="paradox-box">
                <h3>How It Works</h3>
                <p>
                    1. A fair coin is flipped until it lands <strong>HEADS</strong>.<br>
                    2. If heads appears on flip n, you win <strong>$2‚Åø</strong>.<br>
                    3. Heads on flip 1 = $2, flip 2 = $4, flip 3 = $8, etc.<br><br>
                    <span style="color: var(--gold); font-size: 1.2rem;">
                        How much would you pay to play this game?
                    </span>
                </p>
            </div>

            <h3 style="color: var(--gold); margin: 25px 0 15px;">Expected Value Calculation</h3>

            <table class="math-table">
                <tr>
                    <th>Flip #</th>
                    <th>Result</th>
                    <th>Probability</th>
                    <th>Prize</th>
                    <th>Expected Contribution</th>
                </tr>
                <tr>
                    <td>1</td>
                    <td>H</td>
                    <td>1/2</td>
                    <td>$2</td>
                    <td class="contribution">$1</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>TH</td>
                    <td>1/4</td>
                    <td>$4</td>
                    <td class="contribution">$1</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>TTH</td>
                    <td>1/8</td>
                    <td>$8</td>
                    <td class="contribution">$1</td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>TTTH</td>
                    <td>1/16</td>
                    <td>$16</td>
                    <td class="contribution">$1</td>
                </tr>
                <tr>
                    <td>n</td>
                    <td>T...TH</td>
                    <td>1/2‚Åø</td>
                    <td>$2‚Åø</td>
                    <td class="contribution">$1</td>
                </tr>
                <tr style="background: rgba(241, 196, 15, 0.15);">
                    <td colspan="4"><strong>Total Expected Value</strong></td>
                    <td class="contribution" style="font-size: 1.3rem;">$1 + $1 + $1 + ... = ‚àû</td>
                </tr>
            </table>

            <p>
                Every flip contributes exactly <span class="highlight">$1 to the expected value</span>.
                Since there are infinitely many possible flips, the sum is <strong>INFINITE</strong>!
            </p>

            <div class="paradox-box" style="border-left-color: var(--casino-red);">
                <h3>The Paradox</h3>
                <p>
                    Mathematically, you should pay <strong>any finite amount</strong> to play this game‚Äî
                    even $1 million! But psychological studies show most people won't pay more than <strong>$10-25</strong>.
                    <br><br>
                    Why the huge gap between mathematical expectation and human intuition?
                </p>
            </div>

            <h3 style="color: var(--gold); margin: 30px 0 20px;">Historical Timeline</h3>

            <div class="history-timeline">
                <div class="timeline-item">
                    <span class="timeline-year">1713</span> - Nicolas Bernoulli first poses the problem to Pierre R√©mond de Montmort
                </div>
                <div class="timeline-item">
                    <span class="timeline-year">1738</span> - Daniel Bernoulli publishes the paradox and solution in the St. Petersburg Academy, giving it its name
                </div>
                <div class="timeline-item">
                    <span class="timeline-year">1954</span> - John von Neumann & Oskar Morgenstern develop modern utility theory, building on Bernoulli's insights
                </div>
                <div class="timeline-item">
                    <span class="timeline-year">2002</span> - Daniel Kahneman wins Nobel Prize for Prospect Theory, another approach to this puzzle
                </div>
            </div>

            <h3 style="color: var(--gold); margin: 30px 0 20px;">Proposed Solutions</h3>

            <div class="solutions">
                <div class="solution-card">
                    <h4>üìâ Diminishing Marginal Utility</h4>
                    <p>
                        <strong>Daniel Bernoulli (1738):</strong> The utility of money isn't linear.
                        Winning $1 billion doesn't make you 1000√ó happier than $1 million.
                        If utility = log(wealth), expected utility becomes finite!
                    </p>
                </div>

                <div class="solution-card">
                    <h4>üí∞ Finite Wealth</h4>
                    <p>
                        No casino has infinite money. If the house has $1 trillion max,
                        the expected value becomes finite (about $40). Real-world constraints matter!
                    </p>
                </div>

                <div class="solution-card">
                    <h4>‚è±Ô∏è Time Limits</h4>
                    <p>
                        Getting 40 tails in a row (needed for a trillion-dollar win) would take
                        impossibly long. Physical time constraints cap the realistic expectation.
                    </p>
                </div>

                <div class="solution-card">
                    <h4>üéØ Probability Weighting</h4>
                    <p>
                        <strong>Kahneman & Tversky:</strong> Humans overweight small probabilities
                        but also ignore extremely tiny ones. Very unlikely huge payoffs get mentally discounted.
                    </p>
                </div>

                <div class="solution-card">
                    <h4>üî¢ Median vs Mean</h4>
                    <p>
                        The expected value is infinite, but the <em>median</em> outcome is just $2!
                        (50% chance of heads on first flip). Perhaps median matters more than mean.
                    </p>
                </div>

                <div class="solution-card">
                    <h4>üß† Risk Aversion</h4>
                    <p>
                        Even with fair odds, people prefer certainty. The game is extremely
                        high-variance: usually you win $2-4, very rarely you hit jackpots.
                    </p>
                </div>
            </div>

            <div class="paradox-box" style="margin-top: 30px; border-left-color: var(--casino-green);">
                <h3 style="color: var(--casino-green);">The Lesson</h3>
                <p>
                    The St. Petersburg Paradox reveals that <span class="highlight">expected value isn't everything</span>.
                    Human decision-making involves utility, risk tolerance, probability perception, and real-world constraints.
                    This insight founded modern behavioral economics and decision theory!
                </p>
            </div>
        </div>
    </div>

    <script>
        let gameState = {
            flips: [],
            isPlaying: false,
            stats: {
                gamesPlayed: 0,
                totalWinnings: 0,
                maxWinning: 0,
                longestRun: 0
            }
        };

        function flipCoin() {
            if (gameState.isPlaying) return;

            const coin = document.getElementById('coin');
            const isHeads = Math.random() < 0.5;

            coin.classList.add('flipping');

            setTimeout(() => {
                coin.classList.remove('flipping');

                if (isHeads) {
                    // Game ends - heads!
                    gameState.flips.push('H');
                    coin.textContent = 'H';
                    coin.classList.add('heads');
                    coin.classList.remove('tails');

                    // Calculate prize
                    const flipCount = gameState.flips.length;
                    const prize = Math.pow(2, flipCount);

                    // Update display
                    updateSequenceDisplay();
                    document.getElementById('currentPrize').textContent = formatMoney(prize);
                    document.getElementById('prizeFormula').textContent = `2^${flipCount} = $${prize.toLocaleString()}`;

                    // Update stats
                    gameState.stats.gamesPlayed++;
                    gameState.stats.totalWinnings += prize;
                    gameState.stats.maxWinning = Math.max(gameState.stats.maxWinning, prize);
                    gameState.stats.longestRun = Math.max(gameState.stats.longestRun, flipCount - 1);

                    updateStats();

                    // Reset for next game
                    setTimeout(() => {
                        gameState.flips = [];
                        coin.textContent = 'ü™ô';
                        coin.classList.remove('heads', 'tails');
                    }, 2000);

                } else {
                    // Tails - continue flipping
                    gameState.flips.push('T');
                    coin.textContent = 'T';
                    coin.classList.add('tails');
                    coin.classList.remove('heads');

                    const flipCount = gameState.flips.length;
                    const potentialPrize = Math.pow(2, flipCount + 1);

                    updateSequenceDisplay();
                    document.getElementById('currentPrize').textContent = `$${potentialPrize.toLocaleString()}`;
                    document.getElementById('prizeFormula').textContent = `Next heads = 2^${flipCount + 1}`;
                }
            }, 800);
        }

        function updateSequenceDisplay() {
            const display = document.getElementById('sequenceDisplay');
            display.innerHTML = gameState.flips.map((flip, i) =>
                `<div class="flip-result ${flip === 'H' ? 'heads' : 'tails'}">${flip}</div>`
            ).join('');
        }

        function formatMoney(amount) {
            if (amount >= 1e12) return `$${(amount / 1e12).toFixed(1)}T`;
            if (amount >= 1e9) return `$${(amount / 1e9).toFixed(1)}B`;
            if (amount >= 1e6) return `$${(amount / 1e6).toFixed(1)}M`;
            if (amount >= 1e3) return `$${(amount / 1e3).toFixed(1)}K`;
            return `$${amount.toLocaleString()}`;
        }

        function updateStats() {
            const { gamesPlayed, totalWinnings, maxWinning, longestRun } = gameState.stats;

            document.getElementById('gamesPlayed').textContent = gamesPlayed;
            document.getElementById('totalWinnings').textContent = formatMoney(totalWinnings);
            document.getElementById('avgWinning').textContent = gamesPlayed > 0 ?
                formatMoney(Math.round(totalWinnings / gamesPlayed)) : '$0';
            document.getElementById('maxWinning').textContent = formatMoney(maxWinning);
            document.getElementById('longestRun').textContent = longestRun;
        }

        function autoPlay() {
            const games = 100;
            let wins = [];

            for (let i = 0; i < games; i++) {
                let flips = 0;
                while (Math.random() >= 0.5) {
                    flips++;
                }
                flips++; // The final heads
                const prize = Math.pow(2, flips);
                wins.push(prize);

                gameState.stats.gamesPlayed++;
                gameState.stats.totalWinnings += prize;
                gameState.stats.maxWinning = Math.max(gameState.stats.maxWinning, prize);
                gameState.stats.longestRun = Math.max(gameState.stats.longestRun, flips - 1);
            }

            updateStats();

            // Show summary
            const avg = wins.reduce((a, b) => a + b, 0) / games;
            const max = Math.max(...wins);
            const median = wins.sort((a, b) => a - b)[Math.floor(games / 2)];

            alert(`Auto-played ${games} games!\n\nAverage win: ${formatMoney(Math.round(avg))}\nMedian win: ${formatMoney(median)}\nMax win: ${formatMoney(max)}\n\nNotice: Average is high but median is usually just $2-4!`);
        }

        function resetGame() {
            gameState = {
                flips: [],
                isPlaying: false,
                stats: {
                    gamesPlayed: 0,
                    totalWinnings: 0,
                    maxWinning: 0,
                    longestRun: 0
                }
            };

            document.getElementById('coin').textContent = 'ü™ô';
            document.getElementById('coin').classList.remove('heads', 'tails');
            document.getElementById('sequenceDisplay').innerHTML = '<span style="color: #bdc3c7; font-style: italic;">Click the coin to start!</span>';
            document.getElementById('currentPrize').textContent = '$0';
            document.getElementById('prizeFormula').textContent = 'Flip until heads appears!';

            updateStats();
        }
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
