<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rössler Attractor - Simpler Than Lorenz, Still Chaotic</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #0a1628 0%, #1e3a5f 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }
        .back-link {
            display: inline-flex;
            align-items: center;
            color: #38bdf8;
            text-decoration: none;
            margin-bottom: 15px;
            font-size: 0.95em;
        }
        .back-link:hover {
            color: #7dd3fc;
            text-decoration: underline;
        }
        h1 {
            font-size: 1.8em;
            margin-bottom: 5px;
            color: #fff;
            text-shadow: 0 0 30px rgba(56, 189, 248, 0.5);
        }
        .subtitle {
            color: #7dd3fc;
            margin-bottom: 20px;
            font-size: 1.05em;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        .main-content {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 20px;
        }
        .canvas-container {
            background: rgba(0,0,0,0.4);
            border-radius: 12px;
            padding: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        canvas {
            border-radius: 8px;
            background: #050d18;
            cursor: grab;
        }
        canvas:active {
            cursor: grabbing;
        }
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .panel {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 15px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .panel h3 {
            font-size: 0.9em;
            color: #38bdf8;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85em;
            font-weight: 500;
            transition: all 0.2s;
        }
        .btn-primary {
            background: linear-gradient(135deg, #38bdf8, #0284c7);
            color: white;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(56, 189, 248, 0.4);
        }
        .btn-secondary {
            background: rgba(255,255,255,0.1);
            color: #e0e0e0;
            border: 1px solid rgba(255,255,255,0.2);
        }
        .btn-secondary:hover {
            background: rgba(255,255,255,0.2);
        }
        .param-group {
            margin-bottom: 15px;
        }
        .param-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        .param-name {
            color: #7dd3fc;
            font-size: 0.85em;
        }
        .param-value {
            color: #bae6fd;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.9em;
        }
        input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: rgba(255,255,255,0.1);
            -webkit-appearance: none;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #38bdf8;
            cursor: pointer;
        }
        .equations {
            background: rgba(0,0,0,0.3);
            padding: 12px;
            border-radius: 6px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.85em;
            line-height: 1.8;
            color: #bae6fd;
        }
        .equation-line {
            margin: 3px 0;
        }
        .presets {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
        }
        .preset-btn {
            padding: 6px 8px;
            font-size: 0.75em;
        }
        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        .stat-label {
            color: #7dd3fc;
            font-size: 0.8em;
        }
        .stat-value {
            color: #bae6fd;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.8em;
        }
        .exp-section {
            margin-top: 20px;
        }
        .exp-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
        }
        .exp-card {
            background: linear-gradient(135deg, rgba(56,189,248,0.1), rgba(2,132,199,0.05));
            border-radius: 10px;
            padding: 15px;
            border: 1px solid rgba(56,189,248,0.2);
        }
        .exp-card h4 {
            color: #38bdf8;
            margin-bottom: 8px;
            font-size: 0.95em;
        }
        .exp-card p {
            font-size: 0.85em;
            line-height: 1.6;
            color: #7dd3fc;
        }
        .drag-hint {
            text-align: center;
            font-size: 0.75em;
            color: #64748b;
            margin-top: 8px;
        }
        @media (max-width: 900px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">← Back to Paradoxes</a>
        <h1>The Rössler Attractor</h1>
        <p class="subtitle">Simpler Than Lorenz, Still Beautifully Chaotic</p>

        <div class="main-content">
            <div class="canvas-container">
                <div>
                    <canvas id="mainCanvas" width="650" height="550"></canvas>
                    <p class="drag-hint">Drag to rotate • Scroll to zoom</p>
                </div>
            </div>

            <div class="sidebar">
                <div class="panel">
                    <h3>Controls</h3>
                    <div class="controls">
                        <button class="btn btn-primary" id="playBtn">Pause</button>
                        <button class="btn btn-secondary" id="resetBtn">Reset</button>
                        <button class="btn btn-secondary" id="clearBtn">Clear Trail</button>
                    </div>
                </div>

                <div class="panel">
                    <h3>Parameters</h3>
                    <div class="param-group">
                        <div class="param-label">
                            <span class="param-name">a</span>
                            <span class="param-value" id="aValue">0.20</span>
                        </div>
                        <input type="range" id="aSlider" min="0.05" max="0.5" step="0.01" value="0.20">
                    </div>
                    <div class="param-group">
                        <div class="param-label">
                            <span class="param-name">b</span>
                            <span class="param-value" id="bValue">0.20</span>
                        </div>
                        <input type="range" id="bSlider" min="0.05" max="2" step="0.01" value="0.20">
                    </div>
                    <div class="param-group">
                        <div class="param-label">
                            <span class="param-name">c</span>
                            <span class="param-value" id="cValue">5.70</span>
                        </div>
                        <input type="range" id="cSlider" min="3" max="18" step="0.1" value="5.70">
                    </div>
                </div>

                <div class="panel">
                    <h3>Presets</h3>
                    <div class="presets">
                        <button class="btn btn-secondary preset-btn" data-a="0.2" data-b="0.2" data-c="5.7">Classic (c=5.7)</button>
                        <button class="btn btn-secondary preset-btn" data-a="0.2" data-b="0.2" data-c="4">Periodic (c=4)</button>
                        <button class="btn btn-secondary preset-btn" data-a="0.2" data-b="0.2" data-c="9">More Chaos (c=9)</button>
                        <button class="btn btn-secondary preset-btn" data-a="0.2" data-b="0.2" data-c="14">Extreme (c=14)</button>
                    </div>
                </div>

                <div class="panel">
                    <h3>The Equations</h3>
                    <div class="equations">
                        <div class="equation-line">dx/dt = -y - z</div>
                        <div class="equation-line">dy/dt = x + ay</div>
                        <div class="equation-line">dz/dt = b + z(x - c)</div>
                    </div>
                    <p style="font-size: 0.75em; color: #64748b; margin-top: 8px;">
                        Only ONE nonlinearity: z×x in the third equation. That's all it takes for chaos!
                    </p>
                </div>

                <div class="panel">
                    <h3>Current State</h3>
                    <div class="stat-row">
                        <span class="stat-label">x</span>
                        <span id="xValue" class="stat-value">0.1</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">y</span>
                        <span id="yValue" class="stat-value">0.1</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">z</span>
                        <span id="zValue" class="stat-value">0.1</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Points</span>
                        <span id="pointCount" class="stat-value">0</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="exp-section">
            <div class="exp-cards">
                <div class="exp-card">
                    <h4>Otto Rössler (1976)</h4>
                    <p>German biochemist Otto Rössler created this system while modeling chemical reactions. His goal: find the simplest possible equations that produce chaos. The Lorenz system has THREE nonlinearities—Rössler found ONE was enough! Published as "An Equation for Continuous Chaos."</p>
                </div>
                <div class="exp-card">
                    <h4>The Spiral and the Kick</h4>
                    <p>Watch the trajectory: it spirals outward in the x-y plane, then suddenly gets "kicked" up in z, reinjected closer to the center, and spirals out again. This mechanism—spiral, kick, reinject—is simpler and easier to analyze than Lorenz's butterfly wings.</p>
                </div>
                <div class="exp-card">
                    <h4>Period-Doubling Route to Chaos</h4>
                    <p>Change parameter c: at c≈4 you get a simple periodic orbit. As c increases, the period doubles (2→4→8→16...) until chaos erupts around c≈5.7. This is the same route to chaos as the Logistic Map—Feigenbaum's universal route!</p>
                </div>
                <div class="exp-card">
                    <h4>Why "Simpler" Matters</h4>
                    <p>With only one nonlinearity, Rössler's system became a testbed for chaos theory. It helped prove that complex behavior doesn't require complex equations. One product of two variables—that's all you need to generate deterministic chaos!</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('mainCanvas');
        const ctx = canvas.getContext('2d');

        // State
        let a = 0.2, b = 0.2, c = 5.7;
        let x = 0.1, y = 0.1, z = 0.1;
        let trail = [];
        const maxTrail = 15000;
        const dt = 0.01;
        let running = true;

        // View
        let rotX = 0.3;
        let rotY = -0.5;
        let zoom = 12;
        let dragging = false;
        let lastMouse = { x: 0, y: 0 };

        // Rössler system derivatives
        function derivatives(x, y, z) {
            return {
                dx: -y - z,
                dy: x + a * y,
                dz: b + z * (x - c)
            };
        }

        // RK4 integration
        function step() {
            const k1 = derivatives(x, y, z);
            const k2 = derivatives(
                x + k1.dx * dt / 2,
                y + k1.dy * dt / 2,
                z + k1.dz * dt / 2
            );
            const k3 = derivatives(
                x + k2.dx * dt / 2,
                y + k2.dy * dt / 2,
                z + k2.dz * dt / 2
            );
            const k4 = derivatives(
                x + k3.dx * dt,
                y + k3.dy * dt,
                z + k3.dz * dt
            );

            x += (k1.dx + 2 * k2.dx + 2 * k3.dx + k4.dx) * dt / 6;
            y += (k1.dy + 2 * k2.dy + 2 * k3.dy + k4.dy) * dt / 6;
            z += (k1.dz + 2 * k2.dz + 2 * k3.dz + k4.dz) * dt / 6;

            // Check for blow-up
            if (Math.abs(x) > 1000 || Math.abs(y) > 1000 || Math.abs(z) > 1000) {
                reset();
            }
        }

        // 3D to 2D projection with rotation
        function project(px, py, pz) {
            // Rotate around Y
            let rx = px * Math.cos(rotY) + pz * Math.sin(rotY);
            let rz = -px * Math.sin(rotY) + pz * Math.cos(rotY);
            let ry = py;

            // Rotate around X
            let ry2 = ry * Math.cos(rotX) - rz * Math.sin(rotX);
            let rz2 = ry * Math.sin(rotX) + rz * Math.cos(rotX);

            const cx = canvas.width / 2;
            const cy = canvas.height / 2;

            return {
                x: cx + rx * zoom,
                y: cy - ry2 * zoom,
                z: rz2
            };
        }

        function draw() {
            const w = canvas.width;
            const h = canvas.height;

            // Clear
            ctx.fillStyle = '#050d18';
            ctx.fillRect(0, 0, w, h);

            // Draw axes
            ctx.strokeStyle = 'rgba(255,255,255,0.15)';
            ctx.lineWidth = 1;
            const axisLen = 5;
            const origin = project(0, 0, 0);
            const xAxis = project(axisLen, 0, 0);
            const yAxis = project(0, axisLen, 0);
            const zAxis = project(0, 0, axisLen);

            ctx.beginPath();
            ctx.moveTo(origin.x, origin.y);
            ctx.lineTo(xAxis.x, xAxis.y);
            ctx.stroke();
            ctx.fillStyle = 'rgba(255,100,100,0.5)';
            ctx.fillText('x', xAxis.x + 5, xAxis.y);

            ctx.beginPath();
            ctx.moveTo(origin.x, origin.y);
            ctx.lineTo(yAxis.x, yAxis.y);
            ctx.stroke();
            ctx.fillStyle = 'rgba(100,255,100,0.5)';
            ctx.fillText('y', yAxis.x + 5, yAxis.y);

            ctx.beginPath();
            ctx.moveTo(origin.x, origin.y);
            ctx.lineTo(zAxis.x, zAxis.y);
            ctx.stroke();
            ctx.fillStyle = 'rgba(100,100,255,0.5)';
            ctx.fillText('z', zAxis.x + 5, zAxis.y);

            // Draw trail
            if (trail.length > 1) {
                ctx.lineWidth = 1.5;
                ctx.lineCap = 'round';

                for (let i = 1; i < trail.length; i++) {
                    const p1 = project(trail[i - 1].x, trail[i - 1].y, trail[i - 1].z);
                    const p2 = project(trail[i].x, trail[i].y, trail[i].z);

                    // Color based on z value and age
                    const age = i / trail.length;
                    const zNorm = Math.max(0, Math.min(1, (trail[i].z - 0) / 25));

                    const hue = 180 + zNorm * 60; // Cyan to blue
                    const alpha = 0.1 + age * 0.8;

                    ctx.strokeStyle = `hsla(${hue}, 80%, 60%, ${alpha})`;
                    ctx.beginPath();
                    ctx.moveTo(p1.x, p1.y);
                    ctx.lineTo(p2.x, p2.y);
                    ctx.stroke();
                }
            }

            // Draw current point
            const current = project(x, y, z);
            ctx.fillStyle = '#fff';
            ctx.beginPath();
            ctx.arc(current.x, current.y, 4, 0, Math.PI * 2);
            ctx.fill();

            // Update stats
            document.getElementById('xValue').textContent = x.toFixed(3);
            document.getElementById('yValue').textContent = y.toFixed(3);
            document.getElementById('zValue').textContent = z.toFixed(3);
            document.getElementById('pointCount').textContent = trail.length.toLocaleString();
        }

        function reset() {
            x = 0.1 + Math.random() * 0.01;
            y = 0.1 + Math.random() * 0.01;
            z = 0.1;
            trail = [];
        }

        function clearTrail() {
            trail = [];
        }

        function animate() {
            if (running) {
                // Multiple steps per frame for smoother trail
                for (let i = 0; i < 10; i++) {
                    step();
                    trail.push({ x, y, z });
                    if (trail.length > maxTrail) {
                        trail.shift();
                    }
                }
            }
            draw();
            requestAnimationFrame(animate);
        }

        // Event handlers
        document.getElementById('playBtn').addEventListener('click', () => {
            running = !running;
            document.getElementById('playBtn').textContent = running ? 'Pause' : 'Play';
        });

        document.getElementById('resetBtn').addEventListener('click', reset);
        document.getElementById('clearBtn').addEventListener('click', clearTrail);

        ['a', 'b', 'c'].forEach(param => {
            const slider = document.getElementById(param + 'Slider');
            slider.addEventListener('input', (e) => {
                const val = parseFloat(e.target.value);
                if (param === 'a') a = val;
                if (param === 'b') b = val;
                if (param === 'c') c = val;
                document.getElementById(param + 'Value').textContent = val.toFixed(2);
            });
        });

        document.querySelectorAll('.preset-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                a = parseFloat(btn.dataset.a);
                b = parseFloat(btn.dataset.b);
                c = parseFloat(btn.dataset.c);
                document.getElementById('aSlider').value = a;
                document.getElementById('bSlider').value = b;
                document.getElementById('cSlider').value = c;
                document.getElementById('aValue').textContent = a.toFixed(2);
                document.getElementById('bValue').textContent = b.toFixed(2);
                document.getElementById('cValue').textContent = c.toFixed(2);
                reset();
            });
        });

        // Mouse rotation
        canvas.addEventListener('mousedown', (e) => {
            dragging = true;
            lastMouse = { x: e.clientX, y: e.clientY };
            canvas.style.cursor = 'grabbing';
        });

        canvas.addEventListener('mousemove', (e) => {
            if (dragging) {
                const dx = e.clientX - lastMouse.x;
                const dy = e.clientY - lastMouse.y;
                rotY += dx * 0.01;
                rotX += dy * 0.01;
                rotX = Math.max(-Math.PI / 2, Math.min(Math.PI / 2, rotX));
                lastMouse = { x: e.clientX, y: e.clientY };
            }
        });

        canvas.addEventListener('mouseup', () => {
            dragging = false;
            canvas.style.cursor = 'grab';
        });

        canvas.addEventListener('mouseleave', () => {
            dragging = false;
            canvas.style.cursor = 'grab';
        });

        canvas.addEventListener('wheel', (e) => {
            e.preventDefault();
            zoom *= e.deltaY > 0 ? 0.95 : 1.05;
            zoom = Math.max(5, Math.min(50, zoom));
        });

        // Start
        animate();
    </script>
</body>
</html>
