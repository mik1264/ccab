<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Two Envelope Paradox - Surprising Paradoxes</title>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --envelope-red: #c41e3a;
            --envelope-blue: #1e4d8c;
            --gold: #ffd700;
            --paper: #f5f5dc;
            --dark: #1a1a2e;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #fff;
            overflow-x: hidden;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--gold);
            text-decoration: none;
            font-weight: 500;
            margin-bottom: 30px;
            padding: 10px 20px;
            background: rgba(255,215,0,0.1);
            border-radius: 30px;
            transition: all 0.3s ease;
            border: 1px solid rgba(255,215,0,0.3);
        }
        .back-link:hover {
            background: rgba(255,215,0,0.2);
            transform: translateX(-5px);
        }
        h1 {
            font-family: 'Lora', serif;
            font-size: 2.8rem;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #ffd700, #ff8c00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .subtitle {
            font-size: 1.3rem;
            color: rgba(255,255,255,0.7);
            margin-bottom: 40px;
            max-width: 700px;
            line-height: 1.7;
        }
        .intro-box {
            background: rgba(255,255,255,0.05);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            border: 1px solid rgba(255,215,0,0.2);
        }
        .intro-box p {
            line-height: 1.8;
            margin-bottom: 15px;
        }
        .highlight {
            color: var(--gold);
            font-weight: 600;
        }
        .game-area {
            background: rgba(0,0,0,0.3);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 40px;
            text-align: center;
        }
        .game-title {
            font-family: 'Lora', serif;
            font-size: 1.5rem;
            color: var(--gold);
            margin-bottom: 30px;
        }
        .envelopes-container {
            display: flex;
            justify-content: center;
            gap: 60px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        .envelope-wrapper {
            text-align: center;
        }
        .envelope {
            width: 180px;
            height: 120px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            transform-style: preserve-3d;
        }
        .envelope:hover:not(.disabled) {
            transform: translateY(-10px) scale(1.05);
        }
        .envelope.selected {
            transform: translateY(-20px) scale(1.1);
            filter: drop-shadow(0 20px 30px rgba(255,215,0,0.3));
        }
        .envelope.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .envelope-body {
            width: 100%;
            height: 100%;
            border-radius: 5px 5px 10px 10px;
            position: relative;
        }
        .envelope-a .envelope-body {
            background: linear-gradient(180deg, var(--envelope-red) 0%, #8b0000 100%);
            border: 3px solid #ff6b6b;
        }
        .envelope-b .envelope-body {
            background: linear-gradient(180deg, var(--envelope-blue) 0%, #0a2647 100%);
            border: 3px solid #4a90d9;
        }
        .envelope-flap {
            position: absolute;
            top: -30px;
            left: 0;
            width: 100%;
            height: 60px;
            clip-path: polygon(0 50%, 50% 100%, 100% 50%, 100% 0, 0 0);
            transition: transform 0.5s ease;
            transform-origin: bottom;
        }
        .envelope-a .envelope-flap {
            background: linear-gradient(180deg, #ff4444 0%, var(--envelope-red) 100%);
        }
        .envelope-b .envelope-flap {
            background: linear-gradient(180deg, #4a90d9 0%, var(--envelope-blue) 100%);
        }
        .envelope.open .envelope-flap {
            transform: rotateX(180deg);
        }
        .envelope-label {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2rem;
            font-weight: 700;
            color: rgba(255,255,255,0.9);
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        .envelope-amount {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--gold);
            margin-top: 15px;
            height: 30px;
        }
        .envelope-name {
            font-size: 1.1rem;
            color: rgba(255,255,255,0.7);
            margin-top: 5px;
        }
        .game-message {
            font-size: 1.3rem;
            margin-bottom: 25px;
            min-height: 60px;
            color: rgba(255,255,255,0.9);
        }
        .game-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        .game-btn {
            padding: 15px 35px;
            border: none;
            border-radius: 30px;
            font-family: 'Nunito', sans-serif;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .game-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .btn-switch {
            background: linear-gradient(135deg, #ffd700, #ff8c00);
            color: #1a1a2e;
        }
        .btn-switch:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(255,215,0,0.4);
        }
        .btn-keep {
            background: rgba(255,255,255,0.1);
            color: #fff;
            border: 2px solid rgba(255,255,255,0.3);
        }
        .btn-keep:hover:not(:disabled) {
            background: rgba(255,255,255,0.2);
        }
        .btn-new {
            background: linear-gradient(135deg, #4CAF50, #2E7D32);
            color: #fff;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        .stat-card {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--gold);
        }
        .stat-label {
            font-size: 0.9rem;
            color: rgba(255,255,255,0.6);
            margin-top: 5px;
        }
        .paradox-section {
            margin-top: 50px;
        }
        .paradox-section h2 {
            font-family: 'Lora', serif;
            font-size: 1.8rem;
            color: var(--gold);
            margin-bottom: 25px;
        }
        .calculation-box {
            background: rgba(0,0,0,0.4);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
        }
        .calculation-box h3 {
            color: #ff6b6b;
            margin-bottom: 20px;
            font-family: 'Lora', serif;
        }
        .formula {
            font-family: 'Georgia', serif;
            font-size: 1.3rem;
            background: rgba(255,255,255,0.05);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
        }
        .formula .wrong {
            color: #ff6b6b;
        }
        .formula .right {
            color: #90ee90;
        }
        .resolution-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        .resolution-card {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 25px;
            border-left: 4px solid var(--gold);
        }
        .resolution-card h4 {
            color: var(--gold);
            margin-bottom: 15px;
            font-family: 'Lora', serif;
        }
        .resolution-card p {
            color: rgba(255,255,255,0.8);
            line-height: 1.7;
            font-size: 0.95rem;
        }
        .simulation-section {
            margin-top: 50px;
            background: rgba(255,255,255,0.03);
            border-radius: 20px;
            padding: 30px;
        }
        .simulation-section h3 {
            font-family: 'Lora', serif;
            color: var(--gold);
            margin-bottom: 20px;
        }
        .sim-controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        .sim-btn {
            padding: 12px 25px;
            border: 2px solid var(--gold);
            background: transparent;
            color: var(--gold);
            border-radius: 25px;
            cursor: pointer;
            font-family: 'Nunito', sans-serif;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .sim-btn:hover {
            background: rgba(255,215,0,0.2);
        }
        .sim-results {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }
        .sim-result {
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }
        .sim-result h4 {
            margin-bottom: 15px;
        }
        .sim-result.switch h4 {
            color: #ffd700;
        }
        .sim-result.keep h4 {
            color: #90ee90;
        }
        .history-section {
            margin-top: 50px;
        }
        .history-section h3 {
            font-family: 'Lora', serif;
            color: var(--gold);
            margin-bottom: 20px;
        }
        .sources {
            margin-top: 50px;
            padding: 20px;
            background: rgba(0,0,0,0.2);
            border-radius: 15px;
            font-size: 0.85rem;
        }
        .sources h4 {
            color: var(--gold);
            margin-bottom: 10px;
        }
        .sources a {
            color: rgba(255,255,255,0.6);
            text-decoration: none;
        }
        .sources a:hover {
            color: var(--gold);
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">‚Üê Back to Paradoxes</a>
        
        <h1>The Two Envelope Paradox</h1>
        <p class="subtitle">You have two envelopes‚Äîone contains twice as much as the other. Should you switch? Always? Never? The math says... both!</p>
        
        <div class="intro-box">
            <p>You're given two identical envelopes. One contains <span class="highlight">twice as much money</span> as the other, but you don't know which is which.</p>
            <p>You pick one envelope and peek inside: it contains <span class="highlight">$100</span>. Now you're offered a chance to switch.</p>
            <p>Should you? The other envelope has either $50 or $200. If you calculate the expected value of switching: <span class="highlight">0.5 √ó $50 + 0.5 √ó $200 = $125</span>. That's more than $100‚Äîswitch!</p>
            <p>But wait... you could make the <em>exact same argument</em> about any amount. And after switching, the same logic says switch back! <span class="highlight">What's going on?</span></p>
        </div>
        
        <div class="game-area">
            <div class="game-title">üé≤ Play the Game</div>
            
            <div class="envelopes-container">
                <div class="envelope-wrapper">
                    <div class="envelope envelope-a" id="envelopeA">
                        <div class="envelope-flap"></div>
                        <div class="envelope-body">
                            <span class="envelope-label">A</span>
                        </div>
                    </div>
                    <div class="envelope-amount" id="amountA"></div>
                    <div class="envelope-name">Envelope A</div>
                </div>
                
                <div class="envelope-wrapper">
                    <div class="envelope envelope-b" id="envelopeB">
                        <div class="envelope-flap"></div>
                        <div class="envelope-body">
                            <span class="envelope-label">B</span>
                        </div>
                    </div>
                    <div class="envelope-amount" id="amountB"></div>
                    <div class="envelope-name">Envelope B</div>
                </div>
            </div>
            
            <div class="game-message" id="gameMessage">Click an envelope to choose it</div>
            
            <div class="game-buttons" id="gameButtons">
                <button class="game-btn btn-switch" id="switchBtn" style="display: none;">Switch Envelopes</button>
                <button class="game-btn btn-keep" id="keepBtn" style="display: none;">Keep Current</button>
                <button class="game-btn btn-new" id="newGameBtn" style="display: none;">New Game</button>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="gamesPlayed">0</div>
                    <div class="stat-label">Games Played</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="switchWins">0</div>
                    <div class="stat-label">Switch Was Better</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="keepWins">0</div>
                    <div class="stat-label">Keep Was Better</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalEarnings">$0</div>
                    <div class="stat-label">Your Total Earnings</div>
                </div>
            </div>
        </div>
        
        <div class="paradox-section">
            <h2>The Faulty Reasoning</h2>
            
            <div class="calculation-box">
                <h3>‚ö†Ô∏è The "Always Switch" Argument</h3>
                <p style="margin-bottom: 15px; color: rgba(255,255,255,0.8);">You open your envelope and see X dollars. The other envelope contains either X/2 or 2X with equal probability:</p>
                <div class="formula">
                    E[switch] = <span class="wrong">0.5 √ó (X/2) + 0.5 √ó (2X) = 1.25X</span>
                </div>
                <p style="color: rgba(255,255,255,0.8);">Since 1.25X > X, you should switch! But this reasoning is <strong style="color: #ff6b6b;">flawed</strong>.</p>
            </div>
            
            <div class="calculation-box">
                <h3>‚úì The Correct Reasoning</h3>
                <p style="margin-bottom: 15px; color: rgba(255,255,255,0.8);">Let's say the smaller amount is S. The envelopes contain S and 2S. You have one of them with 50% probability each:</p>
                <div class="formula">
                    E[your envelope] = <span class="right">0.5 √ó S + 0.5 √ó 2S = 1.5S</span>
                </div>
                <div class="formula">
                    E[other envelope] = <span class="right">0.5 √ó 2S + 0.5 √ó S = 1.5S</span>
                </div>
                <p style="color: rgba(255,255,255,0.8);">Both expectations are equal! There's <strong style="color: #90ee90;">no advantage to switching</strong>.</p>
            </div>
        </div>
        
        <h2 style="font-family: 'Lora', serif; color: var(--gold); margin-top: 50px; margin-bottom: 25px;">Resolving the Paradox</h2>
        <div class="resolution-grid">
            <div class="resolution-card">
                <h4>The Variable Confusion</h4>
                <p>The fallacy uses "X" to mean two different things: in the X/2 case, X is the larger amount; in the 2X case, X is the smaller amount. You can't use the same variable for both!</p>
            </div>
            <div class="resolution-card">
                <h4>Conditional Probability</h4>
                <p>The probability that you hold the smaller envelope is 50%, but that's BEFORE you see any amount. Once you see a specific value, the probabilities may not still be 50-50 (they depend on how the amounts were chosen).</p>
            </div>
            <div class="resolution-card">
                <h4>The Setup Problem</h4>
                <p>For the faulty argument to work for ALL possible amounts, you'd need an infinite pool of money. No finite setup can make switching always better, because the expectation calculation becomes undefined.</p>
            </div>
            <div class="resolution-card">
                <h4>Symmetry Argument</h4>
                <p>Both envelopes are identical before you choose. Any advantage to switching would mean the other envelope is systematically better‚Äîbut by symmetry, neither can be systematically better!</p>
            </div>
        </div>
        
        <div class="simulation-section">
            <h3>üî¨ Run a Simulation</h3>
            <p style="margin-bottom: 20px; color: rgba(255,255,255,0.7);">See what happens over many trials with different strategies:</p>
            
            <div class="sim-controls">
                <button class="sim-btn" id="sim100">Run 100 Games</button>
                <button class="sim-btn" id="sim1000">Run 1,000 Games</button>
                <button class="sim-btn" id="simReset">Reset Simulation</button>
            </div>
            
            <div class="sim-results">
                <div class="sim-result switch">
                    <h4>Always Switch Strategy</h4>
                    <div class="stat-value" id="simSwitchTotal">$0</div>
                    <div class="stat-label">Total Winnings</div>
                    <div style="margin-top: 10px;">
                        <span id="simSwitchGames">0</span> games, 
                        avg: $<span id="simSwitchAvg">0</span>
                    </div>
                </div>
                <div class="sim-result keep">
                    <h4>Always Keep Strategy</h4>
                    <div class="stat-value" id="simKeepTotal">$0</div>
                    <div class="stat-label">Total Winnings</div>
                    <div style="margin-top: 10px;">
                        <span id="simKeepGames">0</span> games, 
                        avg: $<span id="simKeepAvg">0</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="history-section">
            <h3>Historical Origins</h3>
            <p style="line-height: 1.8; color: rgba(255,255,255,0.8); margin-bottom: 15px;">
                The paradox traces back to 1943 when Belgian mathematician <strong style="color: var(--gold);">Maurice Kraitchik</strong> 
                posed a puzzle about two men comparing the worth of their neckties‚Äîeach thinking they have the advantage in a trade.
            </p>
            <p style="line-height: 1.8; color: rgba(255,255,255,0.8); margin-bottom: 15px;">
                The modern "two envelopes" formulation appeared in the late 1980s, introduced by 
                <strong style="color: var(--gold);">Martin Gardner</strong> (1989) and <strong style="color: var(--gold);">Barry Nalebuff</strong> (1988).
            </p>
            <p style="line-height: 1.8; color: rgba(255,255,255,0.8);">
                It has since become one of the most debated problems in probability theory, with papers still being published 
                offering new perspectives on its resolution.
            </p>
        </div>
        
        <div class="sources">
            <h4>Sources</h4>
            <p>
                <a href="https://en.wikipedia.org/wiki/Two_envelopes_problem">Wikipedia: Two Envelopes Problem</a> ‚Ä¢ 
                <a href="https://brilliant.org/wiki/two-envelope-paradox/">Brilliant: Two Envelope Paradox</a> ‚Ä¢ 
                <a href="https://plus.maths.org/content/two-envelopes-problem-resolution">Plus Maths: Resolution</a> ‚Ä¢ 
                <a href="https://math.hmc.edu/funfacts/two-envelopes-paradox/">HMC Math Fun Facts</a>
            </p>
        </div>
    </div>
    
    <script>
        // Game state
        let gameState = 'choose'; // choose, decide, result
        let envelopeA, envelopeB;
        let selectedEnvelope = null;
        let stats = {
            gamesPlayed: 0,
            switchWins: 0,
            keepWins: 0,
            totalEarnings: 0
        };
        
        // Simulation state
        let simStats = {
            switchTotal: 0,
            keepTotal: 0,
            games: 0
        };
        
        const envelopeAEl = document.getElementById('envelopeA');
        const envelopeBEl = document.getElementById('envelopeB');
        const amountAEl = document.getElementById('amountA');
        const amountBEl = document.getElementById('amountB');
        const messageEl = document.getElementById('gameMessage');
        const switchBtn = document.getElementById('switchBtn');
        const keepBtn = document.getElementById('keepBtn');
        const newGameBtn = document.getElementById('newGameBtn');
        
        function generateEnvelopes() {
            // Generate base amount between $10 and $500
            const baseAmount = Math.floor(Math.random() * 491 + 10);
            const amounts = [baseAmount, baseAmount * 2];
            
            // Randomly assign to envelopes
            if (Math.random() < 0.5) {
                envelopeA = amounts[0];
                envelopeB = amounts[1];
            } else {
                envelopeA = amounts[1];
                envelopeB = amounts[0];
            }
        }
        
        function resetGame() {
            gameState = 'choose';
            selectedEnvelope = null;
            generateEnvelopes();
            
            envelopeAEl.classList.remove('selected', 'disabled', 'open');
            envelopeBEl.classList.remove('selected', 'disabled', 'open');
            amountAEl.textContent = '';
            amountBEl.textContent = '';
            
            messageEl.textContent = 'Click an envelope to choose it';
            switchBtn.style.display = 'none';
            keepBtn.style.display = 'none';
            newGameBtn.style.display = 'none';
        }
        
        function selectEnvelope(envelope) {
            if (gameState !== 'choose') return;
            
            selectedEnvelope = envelope;
            gameState = 'decide';
            
            if (envelope === 'A') {
                envelopeAEl.classList.add('selected', 'open');
                envelopeBEl.classList.add('disabled');
                amountAEl.textContent = '$' + envelopeA;
                messageEl.innerHTML = `You see <strong>$${envelopeA}</strong> in your envelope.<br>The other has either $${envelopeA/2} or $${envelopeA*2}. Switch?`;
            } else {
                envelopeBEl.classList.add('selected', 'open');
                envelopeAEl.classList.add('disabled');
                amountBEl.textContent = '$' + envelopeB;
                messageEl.innerHTML = `You see <strong>$${envelopeB}</strong> in your envelope.<br>The other has either $${envelopeB/2} or $${envelopeB*2}. Switch?`;
            }
            
            switchBtn.style.display = 'inline-block';
            keepBtn.style.display = 'inline-block';
        }
        
        function makeDecision(switched) {
            gameState = 'result';
            
            // Reveal both envelopes
            envelopeAEl.classList.add('open');
            envelopeBEl.classList.add('open');
            envelopeAEl.classList.remove('disabled');
            envelopeBEl.classList.remove('disabled');
            amountAEl.textContent = '$' + envelopeA;
            amountBEl.textContent = '$' + envelopeB;
            
            let yourAmount, otherAmount;
            if (selectedEnvelope === 'A') {
                yourAmount = switched ? envelopeB : envelopeA;
                otherAmount = switched ? envelopeA : envelopeB;
            } else {
                yourAmount = switched ? envelopeA : envelopeB;
                otherAmount = switched ? envelopeB : envelopeA;
            }
            
            stats.gamesPlayed++;
            stats.totalEarnings += yourAmount;
            
            if (yourAmount > otherAmount) {
                if (switched) {
                    stats.switchWins++;
                    messageEl.innerHTML = `üéâ You switched and won <strong>$${yourAmount}</strong>!<br>The other envelope had $${otherAmount}. Switching was better!`;
                } else {
                    stats.keepWins++;
                    messageEl.innerHTML = `üéâ You kept and won <strong>$${yourAmount}</strong>!<br>The other envelope had $${otherAmount}. Keeping was better!`;
                }
            } else {
                if (switched) {
                    stats.keepWins++;
                    messageEl.innerHTML = `You switched and got <strong>$${yourAmount}</strong>.<br>The other envelope had $${otherAmount}. Keeping would have been better!`;
                } else {
                    stats.switchWins++;
                    messageEl.innerHTML = `You kept and got <strong>$${yourAmount}</strong>.<br>The other envelope had $${otherAmount}. Switching would have been better!`;
                }
            }
            
            updateStats();
            
            switchBtn.style.display = 'none';
            keepBtn.style.display = 'none';
            newGameBtn.style.display = 'inline-block';
        }
        
        function updateStats() {
            document.getElementById('gamesPlayed').textContent = stats.gamesPlayed;
            document.getElementById('switchWins').textContent = stats.switchWins;
            document.getElementById('keepWins').textContent = stats.keepWins;
            document.getElementById('totalEarnings').textContent = '$' + stats.totalEarnings.toLocaleString();
        }
        
        // Simulation functions
        function runSimulation(games) {
            for (let i = 0; i < games; i++) {
                // Generate amounts
                const baseAmount = Math.floor(Math.random() * 491 + 10);
                const small = baseAmount;
                const large = baseAmount * 2;
                
                // Randomly assign
                let envA, envB;
                if (Math.random() < 0.5) {
                    envA = small;
                    envB = large;
                } else {
                    envA = large;
                    envB = small;
                }
                
                // Player picks A
                const picked = envA;
                const other = envB;
                
                // Always switch: gets other
                simStats.switchTotal += other;
                
                // Always keep: gets picked
                simStats.keepTotal += picked;
                
                simStats.games++;
            }
            
            updateSimStats();
        }
        
        function updateSimStats() {
            document.getElementById('simSwitchTotal').textContent = '$' + simStats.switchTotal.toLocaleString();
            document.getElementById('simKeepTotal').textContent = '$' + simStats.keepTotal.toLocaleString();
            document.getElementById('simSwitchGames').textContent = simStats.games;
            document.getElementById('simKeepGames').textContent = simStats.games;
            document.getElementById('simSwitchAvg').textContent = simStats.games ? Math.round(simStats.switchTotal / simStats.games) : 0;
            document.getElementById('simKeepAvg').textContent = simStats.games ? Math.round(simStats.keepTotal / simStats.games) : 0;
        }
        
        function resetSimulation() {
            simStats = { switchTotal: 0, keepTotal: 0, games: 0 };
            updateSimStats();
        }
        
        // Event listeners
        envelopeAEl.addEventListener('click', () => selectEnvelope('A'));
        envelopeBEl.addEventListener('click', () => selectEnvelope('B'));
        switchBtn.addEventListener('click', () => makeDecision(true));
        keepBtn.addEventListener('click', () => makeDecision(false));
        newGameBtn.addEventListener('click', resetGame);
        
        document.getElementById('sim100').addEventListener('click', () => runSimulation(100));
        document.getElementById('sim1000').addEventListener('click', () => runSimulation(1000));
        document.getElementById('simReset').addEventListener('click', resetSimulation);
        
        // Initialize
        resetGame();
    </script>
</body>
</html>
