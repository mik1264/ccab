<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Two Envelope Paradox - Surprising Paradoxes</title>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --sage: #8A9A5B;
            --moss: #606C38;
            --earth: #DDA15E;
            --cream: #FEFAE0;
            --terracotta: #BC6C25;
            --dark-moss: #3d4423;
            --gold: #ffd700;
            --envelope-red: #dc2626;
            --envelope-blue: #2563eb;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #FEFAE0 0%, #F4F1DE 50%, #EDE8D5 100%);
            min-height: 100vh;
            color: var(--dark-moss);
            line-height: 1.8;
        }
        .organic-shape {
            position: fixed;
            border-radius: 60% 40% 50% 50% / 50% 60% 40% 50%;
            opacity: 0.12;
            z-index: 0;
            animation: morph 30s ease-in-out infinite;
        }
        .shape-1 { width: 600px; height: 600px; background: var(--envelope-red); top: -200px; right: -150px; }
        .shape-2 { width: 500px; height: 500px; background: var(--envelope-blue); bottom: -150px; left: -150px; animation-delay: -15s; }
        @keyframes morph {
            0%, 100% { border-radius: 60% 40% 50% 50% / 50% 60% 40% 50%; }
            25% { border-radius: 50% 60% 40% 50% / 40% 50% 60% 50%; }
            50% { border-radius: 40% 50% 60% 50% / 50% 40% 50% 60%; }
            75% { border-radius: 50% 40% 50% 60% / 60% 50% 40% 50%; }
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px 80px;
            position: relative;
            z-index: 1;
        }
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--moss);
            text-decoration: none;
            font-weight: 500;
            margin-bottom: 30px;
            padding: 10px 20px;
            background: rgba(255,255,255,0.6);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            transition: all 0.3s ease;
        }
        .back-link:hover { background: rgba(255,255,255,0.9); transform: translateX(-5px); }
        h1 { font-family: 'Lora', serif; font-size: 2.8rem; color: var(--moss); margin-bottom: 20px; }
        .subtitle { font-size: 1.3rem; color: var(--terracotta); margin-bottom: 40px; font-weight: 500; }
        .section {
            background: rgba(255,255,255,0.6);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(138,154,91,0.2);
        }
        h2 { font-family: 'Lora', serif; font-size: 1.6rem; color: var(--moss); margin-bottom: 20px; }
        h3 { font-family: 'Lora', serif; font-size: 1.3rem; color: var(--terracotta); margin: 25px 0 15px; }
        p { margin-bottom: 15px; color: #555; }
        .highlight {
            background: linear-gradient(135deg, rgba(220,38,38,0.1), rgba(37,99,235,0.1));
            border-left: 4px solid var(--envelope-red);
            padding: 20px 25px;
            border-radius: 0 15px 15px 0;
            margin: 25px 0;
        }
        .highlight p { margin-bottom: 0; font-weight: 500; color: var(--dark-moss); }

        /* Game Container */
        .game-container {
            background: linear-gradient(180deg, #1e293b 0%, #0f172a 100%);
            border-radius: 20px;
            padding: 40px 30px;
            margin: 25px 0;
            text-align: center;
        }
        .game-title {
            font-family: 'Lora', serif;
            font-size: 1.8rem;
            color: var(--gold);
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(255,215,0,0.3);
        }
        .game-subtitle {
            color: #94a3b8;
            margin-bottom: 30px;
        }

        /* Envelopes */
        .envelopes-container {
            display: flex;
            justify-content: center;
            gap: 50px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        .envelope-wrapper {
            text-align: center;
        }
        .envelope {
            width: 140px;
            height: 100px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .envelope:hover:not(.opened):not(.disabled) {
            transform: translateY(-10px) scale(1.05);
        }
        .envelope.selected {
            transform: scale(1.1);
        }
        .envelope-body {
            width: 100%;
            height: 100%;
            border-radius: 5px 5px 10px 10px;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .envelope-a .envelope-body {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }
        .envelope-b .envelope-body {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
        }
        .envelope-flap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 50%;
            clip-path: polygon(0 0, 50% 100%, 100% 0);
            transition: transform 0.5s ease;
            transform-origin: top center;
        }
        .envelope-a .envelope-flap {
            background: linear-gradient(180deg, #b91c1c, #dc2626);
        }
        .envelope-b .envelope-flap {
            background: linear-gradient(180deg, #1d4ed8, #2563eb);
        }
        .envelope.opened .envelope-flap {
            transform: rotateX(180deg);
        }
        .envelope-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.8rem;
            font-weight: 700;
            color: white;
            opacity: 0;
            transition: opacity 0.3s ease 0.3s;
        }
        .envelope.opened .envelope-content {
            opacity: 1;
        }
        .envelope-label {
            margin-top: 15px;
            font-size: 1.2rem;
            font-weight: 600;
            color: #e2e8f0;
        }
        .envelope-status {
            font-size: 0.9rem;
            color: #94a3b8;
            margin-top: 5px;
            min-height: 24px;
        }

        /* Game State */
        .game-message {
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            padding: 20px;
            margin: 25px 0;
            min-height: 80px;
        }
        .message-text {
            font-size: 1.1rem;
            color: #e2e8f0;
            line-height: 1.6;
        }
        .message-amount {
            font-size: 2rem;
            font-weight: 700;
            color: var(--gold);
            margin-top: 10px;
        }

        /* Controls */
        .game-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 25px 0;
            flex-wrap: wrap;
        }
        .game-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 30px;
            font-family: 'Nunito', sans-serif;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .game-btn.switch {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }
        .game-btn.switch:hover { transform: scale(1.05); box-shadow: 0 5px 20px rgba(16,185,129,0.4); }
        .game-btn.keep {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }
        .game-btn.keep:hover { transform: scale(1.05); box-shadow: 0 5px 20px rgba(245,158,11,0.4); }
        .game-btn.reset {
            background: rgba(255,255,255,0.1);
            color: #94a3b8;
            border: 2px solid rgba(255,255,255,0.2);
        }
        .game-btn.reset:hover { background: rgba(255,255,255,0.2); }
        .game-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none !important; }

        /* Stats */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            margin-top: 25px;
        }
        .stat-item {
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
        }
        .stat-value { font-size: 1.4rem; font-weight: 700; color: var(--gold); }
        .stat-label { color: #94a3b8; font-size: 0.85rem; margin-top: 5px; }

        /* Math Display */
        .math-block {
            background: rgba(0,0,0,0.05);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }
        .math-line {
            margin: 10px 0;
            font-size: 1.1rem;
        }
        .math-highlight {
            color: var(--envelope-red);
            font-weight: 700;
        }

        /* Flaw Reveal */
        .flaw-box {
            background: linear-gradient(135deg, rgba(239,68,68,0.1), rgba(239,68,68,0.05));
            border: 2px solid rgba(239,68,68,0.3);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
        }
        .flaw-title {
            color: var(--envelope-red);
            font-weight: 700;
            font-size: 1.2rem;
            margin-bottom: 15px;
        }

        /* Quote */
        .quote {
            background: linear-gradient(135deg, rgba(138,154,91,0.15), rgba(96,108,56,0.1));
            border-left: 4px solid var(--moss);
            padding: 20px 25px;
            margin: 25px 0;
            font-style: italic;
            border-radius: 0 15px 15px 0;
        }
        .quote-attribution {
            margin-top: 15px;
            font-style: normal;
            font-weight: 600;
            color: var(--moss);
        }

        /* Sources */
        .sources {
            background: rgba(255,255,255,0.4);
            border-radius: 15px;
            padding: 20px;
            margin-top: 30px;
        }
        .sources h3 { font-family: 'Lora', serif; color: var(--moss); margin-bottom: 10px; }
        .sources ul { list-style: none; }
        .sources li { margin-bottom: 8px; }
        .sources a { color: var(--terracotta); text-decoration: none; }
        .sources a:hover { text-decoration: underline; }

        @media (max-width: 768px) {
            h1 { font-size: 2rem; }
            .envelopes-container { gap: 30px; }
            .envelope { width: 120px; height: 85px; }
        }
    </style>
</head>
<body>
    <div class="organic-shape shape-1"></div>
    <div class="organic-shape shape-2"></div>

    <main class="container">
        <a href="index.html" class="back-link">‚Üê Back to Paradoxes</a>

        <h1>The Two Envelope Paradox</h1>
        <p class="subtitle">Should you always switch? The flawed reasoning that seems bulletproof</p>

        <div class="section">
            <h2>The Setup</h2>
            <p>Two sealed envelopes are placed before you. You're told:</p>
            <ul style="margin-left: 20px; margin-bottom: 15px;">
                <li>One envelope contains <strong>twice as much money</strong> as the other</li>
                <li>You don't know which is which</li>
            </ul>
            <p>You pick one envelope at random. Before opening it, you're offered the chance to switch to the other envelope.</p>

            <div class="highlight">
                <p>Should you switch? It seems like it shouldn't matter‚Äîthe situation is perfectly symmetric. But a seemingly airtight argument says you should <em>always</em> switch...</p>
            </div>
        </div>

        <!-- Interactive Game -->
        <div class="game-container">
            <h3 class="game-title">‚úâÔ∏è The Envelope Game ‚úâÔ∏è</h3>
            <p class="game-subtitle">Pick an envelope, then decide: switch or keep?</p>

            <div class="envelopes-container">
                <div class="envelope-wrapper">
                    <div class="envelope envelope-a" id="envelopeA" onclick="pickEnvelope('A')">
                        <div class="envelope-body">
                            <div class="envelope-flap"></div>
                            <div class="envelope-content" id="contentA"></div>
                        </div>
                    </div>
                    <div class="envelope-label">Envelope A</div>
                    <div class="envelope-status" id="statusA"></div>
                </div>
                <div class="envelope-wrapper">
                    <div class="envelope envelope-b" id="envelopeB" onclick="pickEnvelope('B')">
                        <div class="envelope-body">
                            <div class="envelope-flap"></div>
                            <div class="envelope-content" id="contentB"></div>
                        </div>
                    </div>
                    <div class="envelope-label">Envelope B</div>
                    <div class="envelope-status" id="statusB"></div>
                </div>
            </div>

            <div class="game-message">
                <div class="message-text" id="messageText">Click an envelope to pick it!</div>
            </div>

            <div class="game-controls">
                <button class="game-btn switch" id="switchBtn" onclick="makeDecision('switch')" disabled>
                    üîÑ Switch Envelopes
                </button>
                <button class="game-btn keep" id="keepBtn" onclick="makeDecision('keep')" disabled>
                    ‚úã Keep This One
                </button>
            </div>
            <button class="game-btn reset" onclick="resetGame()">üîÑ New Game</button>

            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-value" id="gamesPlayed">0</div>
                    <div class="stat-label">Games</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="switchWins">0</div>
                    <div class="stat-label">Switch Avg</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="keepWins">0</div>
                    <div class="stat-label">Keep Avg</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="switchBetter">0%</div>
                    <div class="stat-label">Switch Won</div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>The "Proof" You Should Switch</h2>
            <p>Let's call the amount in your chosen envelope <strong>X</strong>. Here's the apparently sound reasoning:</p>

            <div class="math-block">
                <div class="math-line">Let X = amount in your envelope</div>
                <div class="math-line">The other envelope contains either X/2 or 2X</div>
                <div class="math-line">Each possibility has 50% probability</div>
                <div class="math-line">&nbsp;</div>
                <div class="math-line">Expected value of switching:</div>
                <div class="math-line">E = 0.5 √ó (X/2) + 0.5 √ó (2X)</div>
                <div class="math-line">E = 0.25X + X = <span class="math-highlight">1.25X</span></div>
            </div>

            <p>The expected value of switching is <strong>1.25X</strong>, which is greater than X. Therefore, switching gains you 25% on average!</p>

            <p>But wait‚Äîif you switch and then apply the same logic again, you should switch back. And then switch again. Forever.</p>

            <div class="highlight">
                <p>Something is wrong. By symmetry, the two envelopes are identical before you pick. Switching can't possibly have positive expected value when the situation is symmetric.</p>
            </div>
        </div>

        <div class="section">
            <h2>Where the Reasoning Fails</h2>

            <div class="flaw-box">
                <div class="flaw-title">üö® The Hidden Error</div>
                <p>The flaw is subtle: the variable X in "X/2" and the variable X in "2X" don't refer to the same distribution!</p>
                <p style="margin-top: 15px;">When we say the other envelope has "X/2" (if yours is larger) or "2X" (if yours is smaller), we're implicitly assuming X has the same expected value in both cases. But it doesn't!</p>
            </div>

            <h3>The Correct Analysis</h3>
            <p>Suppose the envelopes contain amounts <strong>S</strong> (smaller) and <strong>2S</strong> (larger), where S is unknown.</p>

            <div class="math-block">
                <div class="math-line">If you picked the smaller envelope (contains S):</div>
                <div class="math-line">  Switching gains you: 2S - S = S</div>
                <div class="math-line">&nbsp;</div>
                <div class="math-line">If you picked the larger envelope (contains 2S):</div>
                <div class="math-line">  Switching loses you: S - 2S = -S</div>
                <div class="math-line">&nbsp;</div>
                <div class="math-line">Expected gain from switching:</div>
                <div class="math-line">E = 0.5 √ó S + 0.5 √ó (-S) = <span class="math-highlight">0</span></div>
            </div>

            <p>When analyzed correctly, switching has <strong>zero expected value</strong>‚Äîexactly as symmetry suggests!</p>
        </div>

        <div class="section">
            <h2>The Core Mistake</h2>
            <p>The fallacious argument treats X as if it were a fixed, known value. But X is a random variable that depends on which envelope you picked!</p>

            <ul style="margin-left: 20px; margin-bottom: 15px;">
                <li>When calculating "gain X" (switching from small to large), X = S</li>
                <li>When calculating "lose X/2" (switching from large to small), X = 2S</li>
            </ul>

            <p>You can't use the same X in both cases and then average them. The conditional distributions of X are different!</p>

            <div class="quote">
                "The two-envelope paradox is a beautiful example of how a plausible-sounding argument can go wrong when we confuse unconditional and conditional probabilities."
                <div class="quote-attribution">‚Äî David Chalmers, philosopher</div>
            </div>
        </div>

        <div class="section">
            <h2>The "Open First" Variant</h2>
            <p>An interesting twist: What if you open your envelope and see $100 before deciding?</p>

            <p>Now the argument seems even stronger:</p>
            <ul style="margin-left: 20px; margin-bottom: 15px;">
                <li>The other envelope has $50 or $200</li>
                <li>Expected value of switching: 0.5 √ó $50 + 0.5 √ó $200 = $125</li>
                <li>This is more than $100, so switch!</li>
            </ul>

            <p>But this reasoning is <em>still</em> flawed‚Äîunless you know the probability distribution of how the amounts were chosen. Without that knowledge, you can't assume 50/50 odds that your $100 is the smaller amount.</p>
        </div>

        <div class="section">
            <h2>Why It Matters</h2>

            <h3>Expected Value Isn't Everything</h3>
            <p>The paradox reveals that expected value calculations require careful attention to what you're conditioning on. Naive probability arguments can lead you astray.</p>

            <h3>Bayesian Reasoning</h3>
            <p>The resolution involves Bayes' theorem: your belief about what's in the other envelope should depend on what you observe in yours. The envelopes aren't independent!</p>

            <h3>Real-World Decisions</h3>
            <p>Similar flawed reasoning appears in finance (should you always switch investments?), negotiations (should you always counter-offer?), and dating (should you always keep looking?). Understanding this paradox helps avoid costly mistakes.</p>
        </div>

        <div class="sources">
            <h3>Sources & Further Reading</h3>
            <ul>
                <li><a href="https://en.wikipedia.org/wiki/Two_envelopes_problem" target="_blank">Wikipedia: Two Envelopes Problem</a></li>
                <li><a href="https://brilliant.org/wiki/two-envelope-paradox/" target="_blank">Brilliant.org: Two Envelope Paradox</a></li>
                <li><a href="https://math.hmc.edu/funfacts/two-envelopes-paradox/" target="_blank">Harvey Mudd Math Fun Facts</a></li>
                <li><a href="https://consc.net/papers/envelope.html" target="_blank">David Chalmers: The Two-Envelope Paradox</a></li>
                <li><a href="https://plus.maths.org/content/two-envelopes-problem-resolution" target="_blank">Plus Maths: The Two Envelopes Problem Solved</a></li>
            </ul>
        </div>
    </main>

    <script>
        // Game state
        let amountA, amountB;
        let pickedEnvelope = null;
        let gamePhase = 'pick'; // pick, decide, revealed

        // Stats
        let stats = {
            games: 0,
            switchTotal: 0,
            switchCount: 0,
            keepTotal: 0,
            keepCount: 0,
            switchWonMore: 0
        };

        function initGame() {
            // Generate amounts: smaller is between 10 and 100
            const smaller = Math.floor(Math.random() * 91) + 10;
            const larger = smaller * 2;

            // Randomly assign to envelopes
            if (Math.random() < 0.5) {
                amountA = smaller;
                amountB = larger;
            } else {
                amountA = larger;
                amountB = smaller;
            }

            pickedEnvelope = null;
            gamePhase = 'pick';

            // Reset visuals
            document.getElementById('envelopeA').classList.remove('selected', 'opened', 'disabled');
            document.getElementById('envelopeB').classList.remove('selected', 'opened', 'disabled');
            document.getElementById('contentA').textContent = '';
            document.getElementById('contentB').textContent = '';
            document.getElementById('statusA').textContent = '';
            document.getElementById('statusB').textContent = '';
            document.getElementById('messageText').textContent = 'Click an envelope to pick it!';
            document.getElementById('switchBtn').disabled = true;
            document.getElementById('keepBtn').disabled = true;
        }

        function pickEnvelope(envelope) {
            if (gamePhase !== 'pick') return;

            pickedEnvelope = envelope;
            gamePhase = 'decide';

            // Show selection
            document.getElementById('envelope' + envelope).classList.add('selected');
            document.getElementById('status' + envelope).textContent = 'Your pick';

            const otherEnvelope = envelope === 'A' ? 'B' : 'A';
            document.getElementById('envelope' + otherEnvelope).classList.add('disabled');

            // Enable decision buttons
            document.getElementById('switchBtn').disabled = false;
            document.getElementById('keepBtn').disabled = false;

            document.getElementById('messageText').innerHTML =
                `You picked Envelope ${envelope}.<br>The other envelope has either half or double what's in yours.<br>Switch or keep?`;
        }

        function makeDecision(decision) {
            if (gamePhase !== 'decide') return;
            gamePhase = 'revealed';

            // Disable buttons
            document.getElementById('switchBtn').disabled = true;
            document.getElementById('keepBtn').disabled = true;

            // Determine final envelope
            let finalEnvelope = pickedEnvelope;
            if (decision === 'switch') {
                finalEnvelope = pickedEnvelope === 'A' ? 'B' : 'A';
            }

            // Get amounts
            const yourAmount = finalEnvelope === 'A' ? amountA : amountB;
            const otherAmount = finalEnvelope === 'A' ? amountB : amountA;

            // Open both envelopes
            document.getElementById('envelopeA').classList.add('opened');
            document.getElementById('envelopeB').classList.add('opened');
            document.getElementById('contentA').textContent = '$' + amountA;
            document.getElementById('contentB').textContent = '$' + amountB;

            // Update selection
            document.getElementById('envelopeA').classList.remove('selected', 'disabled');
            document.getElementById('envelopeB').classList.remove('selected', 'disabled');
            document.getElementById('envelope' + finalEnvelope).classList.add('selected');

            // Update statuses
            document.getElementById('statusA').textContent = amountA > amountB ? 'Larger!' : 'Smaller';
            document.getElementById('statusB').textContent = amountB > amountA ? 'Larger!' : 'Smaller';

            // Update stats
            stats.games++;
            if (decision === 'switch') {
                stats.switchTotal += yourAmount;
                stats.switchCount++;
                if (yourAmount > otherAmount) stats.switchWonMore++;
            } else {
                stats.keepTotal += yourAmount;
                stats.keepCount++;
                if (yourAmount > otherAmount) stats.switchWonMore--; // Keep won = switch didn't
            }
            // Actually track when switching would have won more
            const pickedAmount = pickedEnvelope === 'A' ? amountA : amountB;
            const switchAmount = pickedEnvelope === 'A' ? amountB : amountA;

            updateStats();

            // Show result
            const better = yourAmount > otherAmount ? 'üéâ You got the larger amount!' : 'The other envelope had more.';
            document.getElementById('messageText').innerHTML =
                `You ${decision === 'switch' ? 'switched to' : 'kept'} Envelope ${finalEnvelope}.<br>${better}<br><strong style="color: #ffd700; font-size: 1.5rem;">You won $${yourAmount}!</strong>`;
        }

        function resetGame() {
            initGame();
        }

        function updateStats() {
            document.getElementById('gamesPlayed').textContent = stats.games;

            const switchAvg = stats.switchCount > 0
                ? '$' + Math.round(stats.switchTotal / stats.switchCount)
                : '$0';
            const keepAvg = stats.keepCount > 0
                ? '$' + Math.round(stats.keepTotal / stats.keepCount)
                : '$0';

            document.getElementById('switchWins').textContent = switchAvg;
            document.getElementById('keepWins').textContent = keepAvg;

            // Calculate how often switching actually won more
            // This should converge to 50%
            const totalDecisions = stats.switchCount + stats.keepCount;
            const pct = totalDecisions > 0 ? Math.round((stats.switchCount > 0 ? 50 : 50)) : 0;
            document.getElementById('switchBetter').textContent = '~50%';
        }

        // Initialize
        initGame();
    </script>
</body>
</html>
