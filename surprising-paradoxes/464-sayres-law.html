<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sayre's Law - Low Stakes, High Drama</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        header { text-align: center; margin-bottom: 30px; }
        .back-link {
            color: #ff6b6b;
            text-decoration: none;
            margin-bottom: 20px;
            display: inline-block;
        }
        h1 {
            font-size: 2.3rem;
            background: linear-gradient(135deg, #e74c3c, #f39c12, #9b59b6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }
        .subtitle {
            font-size: 1rem;
            color: #a0c4ff;
            max-width: 850px;
            margin: 0 auto;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 340px;
            gap: 25px;
            margin-bottom: 30px;
        }
        @media (max-width: 900px) {
            .main-grid { grid-template-columns: 1fr; }
        }

        .panel {
            background: rgba(20, 30, 50, 0.85);
            border-radius: 15px;
            padding: 25px;
        }
        .panel h2 {
            color: #feca57;
            margin-bottom: 15px;
            font-size: 1.2rem;
            text-align: center;
        }

        /* Meeting simulation */
        .meeting-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(0,0,0,0.4);
            border-radius: 10px;
        }
        .meeting-title {
            color: #feca57;
            font-weight: bold;
        }
        .meeting-timer {
            font-size: 1.5rem;
            color: #48dbfb;
            font-weight: bold;
        }

        /* Agenda items */
        .agenda-item {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.3s;
            border-left: 4px solid transparent;
            position: relative;
        }
        .agenda-item:hover {
            background: rgba(50,50,70,0.4);
            transform: translateX(5px);
        }
        .agenda-item.discussed {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .agenda-item.active {
            border-left-color: #f39c12;
            background: rgba(243,156,18,0.15);
        }
        .item-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        .item-title {
            color: #e0e0e0;
            font-weight: bold;
        }
        .item-stakes {
            font-size: 0.85rem;
            padding: 3px 10px;
            border-radius: 12px;
            font-weight: bold;
        }
        .stakes-high {
            background: #27ae60;
            color: white;
        }
        .stakes-medium {
            background: #f39c12;
            color: white;
        }
        .stakes-low {
            background: #e74c3c;
            color: white;
        }
        .item-description {
            color: #888;
            font-size: 0.9rem;
        }
        .item-value {
            font-size: 0.8rem;
            color: #48dbfb;
            margin-top: 5px;
        }

        /* Discussion simulation */
        .discussion-area {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0,0,0,0.4);
            border-radius: 10px;
            min-height: 200px;
            display: none;
        }
        .discussion-topic {
            color: #feca57;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }
        .comments-stream {
            max-height: 150px;
            overflow-y: auto;
            margin-bottom: 15px;
        }
        .comment {
            padding: 8px 12px;
            margin-bottom: 8px;
            background: rgba(100,100,100,0.2);
            border-radius: 8px;
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .comment .speaker {
            color: #9b59b6;
            font-weight: bold;
            margin-right: 8px;
        }
        .comment .text {
            color: #c0c0c0;
            font-size: 0.9rem;
        }
        .intensity-meter {
            margin-top: 15px;
        }
        .intensity-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.85rem;
            color: #888;
        }
        .intensity-bar {
            height: 15px;
            background: rgba(100,100,100,0.3);
            border-radius: 8px;
            overflow: hidden;
        }
        .intensity-fill {
            height: 100%;
            background: linear-gradient(90deg, #2ecc71, #f39c12, #e74c3c);
            transition: width 0.3s;
            border-radius: 8px;
        }

        .next-btn {
            width: 100%;
            padding: 12px;
            font-size: 1rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            background: linear-gradient(135deg, #e74c3c, #f39c12);
            color: white;
            font-weight: bold;
            margin-top: 15px;
        }

        /* Chart */
        #chartCanvas {
            width: 100%;
            height: 220px;
            margin-top: 15px;
        }

        /* Side panel */
        .stat-box {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 12px;
            text-align: center;
        }
        .stat-label {
            color: #888;
            font-size: 0.8rem;
            margin-bottom: 5px;
        }
        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #feca57;
        }

        /* Results comparison */
        .results-chart {
            margin-top: 15px;
        }
        .result-row {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        .result-label {
            width: 100px;
            font-size: 0.75rem;
            color: #888;
        }
        .result-bar {
            flex: 1;
            height: 20px;
            background: rgba(100,100,100,0.2);
            border-radius: 4px;
            overflow: hidden;
            margin: 0 10px;
        }
        .result-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s;
        }
        .result-time {
            width: 50px;
            text-align: right;
            font-size: 0.85rem;
            color: #48dbfb;
        }

        /* Quote box */
        .quote-box {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            border-left: 3px solid #f39c12;
        }
        .quote-text {
            font-style: italic;
            color: #c0c0c0;
            font-size: 0.95rem;
            margin-bottom: 8px;
        }
        .quote-author {
            color: #888;
            font-size: 0.8rem;
        }

        /* Research section */
        .research-section {
            background: rgba(20, 30, 50, 0.85);
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
        }
        .research-section h2 {
            color: #48dbfb;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        .research-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .research-card {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 20px;
            border-left: 3px solid #48dbfb;
        }
        .research-card h3 {
            color: #feca57;
            margin-bottom: 10px;
            font-size: 1rem;
        }
        .research-card p {
            color: #a0a0a0;
            font-size: 0.9rem;
        }

        /* Final summary */
        .summary-panel {
            display: none;
            text-align: center;
        }
        .summary-title {
            color: #f39c12;
            font-size: 1.5rem;
            margin-bottom: 20px;
        }
        .restart-btn {
            padding: 12px 30px;
            font-size: 1rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            background: #3498db;
            color: white;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="index.html" class="back-link">‚Üê Back to Gallery</a>
            <h1>Sayre's Law</h1>
            <p class="subtitle">
                Wallace Sayre (1950s): "Academic politics is the most vicious and bitter form of politics,
                because the stakes are so low." The intensity of feeling is INVERSELY proportional
                to the stakes. Watch a faculty meeting devolve‚Äîtrivial issues spark the fiercest battles.
            </p>
        </header>

        <div class="main-grid">
            <div class="panel">
                <h2>üéì Faculty Meeting Simulation</h2>

                <div class="meeting-header">
                    <div class="meeting-title">Department of Philosophy Faculty Meeting</div>
                    <div class="meeting-timer" id="meetingTimer">00:00</div>
                </div>

                <div id="agenda">
                    <div class="agenda-item" data-index="0" onclick="discussItem(0)">
                        <div class="item-header">
                            <span class="item-title">üìã 5-Year Strategic Plan</span>
                            <span class="item-stakes stakes-high">HIGH STAKES</span>
                        </div>
                        <div class="item-description">Curriculum redesign, faculty hires, research priorities</div>
                        <div class="item-value">üí∞ $2.4 million budget allocation</div>
                    </div>

                    <div class="agenda-item" data-index="1" onclick="discussItem(1)">
                        <div class="item-header">
                            <span class="item-title">üè¢ New Building Location</span>
                            <span class="item-stakes stakes-high">HIGH STAKES</span>
                        </div>
                        <div class="item-description">Choose between 3 proposed sites for new department building</div>
                        <div class="item-value">üí∞ $15 million construction project</div>
                    </div>

                    <div class="agenda-item" data-index="2" onclick="discussItem(2)">
                        <div class="item-header">
                            <span class="item-title">‚òï Break Room Coffee Brand</span>
                            <span class="item-stakes stakes-low">LOW STAKES</span>
                        </div>
                        <div class="item-description">Select new coffee supplier for faculty lounge</div>
                        <div class="item-value">üí∞ $200/month difference</div>
                    </div>

                    <div class="agenda-item" data-index="3" onclick="discussItem(3)">
                        <div class="item-header">
                            <span class="item-title">üÖøÔ∏è Parking Space Assignment</span>
                            <span class="item-stakes stakes-low">LOW STAKES</span>
                        </div>
                        <div class="item-description">Reassign 3 parking spots after retirement</div>
                        <div class="item-value">üí∞ ~$0 actual cost difference</div>
                    </div>

                    <div class="agenda-item" data-index="4" onclick="discussItem(4)">
                        <div class="item-header">
                            <span class="item-title">üìù Thesis Formatting Standards</span>
                            <span class="item-stakes stakes-low">LOW STAKES</span>
                        </div>
                        <div class="item-description">Font size and margin requirements for dissertations</div>
                        <div class="item-value">üí∞ ~$0 actual cost difference</div>
                    </div>
                </div>

                <div class="discussion-area" id="discussionArea">
                    <div class="discussion-topic" id="discussionTopic">Strategic Plan Discussion</div>
                    <div class="comments-stream" id="commentsStream"></div>
                    <div class="intensity-meter">
                        <div class="intensity-label">
                            <span>Emotional Intensity</span>
                            <span id="intensityPercent">0%</span>
                        </div>
                        <div class="intensity-bar">
                            <div class="intensity-fill" id="intensityFill" style="width: 0%"></div>
                        </div>
                    </div>
                    <button class="next-btn" id="nextBtn" onclick="nextItem()">Conclude Discussion ‚Üí</button>
                </div>

                <div class="summary-panel" id="summaryPanel">
                    <div class="summary-title">Meeting Complete!</div>
                    <canvas id="summaryChart" width="500" height="250"></canvas>
                    <div style="margin-top: 20px; color: #a0a0a0; font-size: 0.95rem;" id="summaryText"></div>
                    <button class="restart-btn" onclick="restartMeeting()">Run Another Meeting</button>
                </div>
            </div>

            <div class="panel">
                <h2>Meeting Statistics</h2>

                <div class="stat-box">
                    <div class="stat-label">Items Discussed</div>
                    <div class="stat-value"><span id="itemsDiscussed">0</span> / 5</div>
                </div>

                <div class="stat-box">
                    <div class="stat-label">Total Meeting Time</div>
                    <div class="stat-value" id="totalTime">0:00</div>
                </div>

                <div class="stat-box">
                    <div class="stat-label">Avg Intensity (High Stakes)</div>
                    <div class="stat-value" id="avgHighIntensity" style="color: #2ecc71;">‚Äî</div>
                </div>

                <div class="stat-box">
                    <div class="stat-label">Avg Intensity (Low Stakes)</div>
                    <div class="stat-value" id="avgLowIntensity" style="color: #e74c3c;">‚Äî</div>
                </div>

                <h2 style="margin-top: 20px;">Time Spent Per Item</h2>
                <div class="results-chart" id="resultsChart"></div>

                <div class="quote-box">
                    <div class="quote-text">
                        "The politics of the university are so intense because the stakes are so low."
                    </div>
                    <div class="quote-author">‚Äî Wallace Sayre, Columbia University (c. 1950s)</div>
                </div>
            </div>
        </div>

        <div class="research-section">
            <h2>The Psychology of Sayre's Law</h2>

            <div class="research-grid">
                <div class="research-card">
                    <h3>üìö Origin Story</h3>
                    <p>
                        Wallace Stanley Sayre (1905-1972) was a political scientist at Columbia University
                        who also served in New York City government under Mayor La Guardia.
                        Having witnessed both government bureaucracy and academic infighting,
                        he noted that the pettiest disputes often generated the most heat.
                        The Wall Street Journal quoted him in 1973 on "vicious academic politics."
                    </p>
                </div>

                <div class="research-card">
                    <h3>üß† Why It Happens</h3>
                    <p>
                        <strong>Low consequence = high freedom.</strong> When stakes are high,
                        people moderate their behavior‚Äîmistakes matter. But when stakes are low,
                        there's no cost to fighting hard. Everyone becomes an expert on coffee brands.
                        Additionally, trivial matters engage <em>personal identity</em>‚Äîyour coffee
                        preference feels like a statement about who you are.
                    </p>
                </div>

                <div class="research-card">
                    <h3>üîó Bikeshedding Connection</h3>
                    <p>
                        Parkinson's 1957 "Law of Triviality" is Sayre's Law in action:
                        a committee spent 2.5 minutes on a ¬£10 million nuclear reactor
                        but 45 minutes on a ¬£350 bicycle shed. Nuclear physics intimidates;
                        bike shed colors invite everyone's opinion. Competence asymmetry
                        meets ego investment.
                    </p>
                </div>

                <div class="research-card">
                    <h3>ü™û Narcissism of Small Differences</h3>
                    <p>
                        Freud noted that groups most similar fight most fiercely.
                        Marxists vs. Leninists, Catholics vs. Protestants, academics in the same department.
                        When major differences are absent, minor distinctions become the battleground
                        for identity and status. The smaller the difference, the greater the need
                        to emphasize it.
                    </p>
                </div>

                <div class="research-card">
                    <h3>üè† Modern Examples</h3>
                    <p>
                        <strong>HOA meetings:</strong> Fence colors, lawn heights, mailbox styles.
                        <strong>Online forums:</strong> Tabs vs. spaces, Oxford comma, pronunciation.
                        <strong>Sports:</strong> Team rivalries between neighboring cities.
                        <strong>Office politics:</strong> Email signature fonts, meeting room bookings.
                        The pattern is universal: low stakes + group dynamics = fierce battles.
                    </p>
                </div>

                <div class="research-card">
                    <h3>üí° The Cure?</h3>
                    <p>
                        Awareness helps‚Äîbut doesn't eliminate the effect. Practical solutions:
                        <strong>Time-box</strong> trivial discussions.
                        <strong>Delegate</strong> minor decisions to individuals.
                        <strong>Remind</strong> groups of actual stakes.
                        <strong>Recognize</strong> when ego, not substance, is driving debate.
                        The meeting chair's job: proportional attention to proportional importance.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const agendaItems = [
            {
                title: 'Strategic Plan',
                stakes: 'high',
                value: '$2.4M',
                baseIntensity: 35,
                baseDuration: 8,
                comments: [
                    { speaker: 'Dr. Chen', text: "I've reviewed the proposal. The budget allocation seems reasonable." },
                    { speaker: 'Dr. Patel', text: "I agree with the research priorities. Let's move forward." },
                    { speaker: 'Dr. Wilson', text: "The curriculum changes align with our 2025 goals." },
                    { speaker: 'Chair', text: "Any objections? Good. Motion carries." }
                ]
            },
            {
                title: 'Building Location',
                stakes: 'high',
                value: '$15M',
                baseIntensity: 40,
                baseDuration: 10,
                comments: [
                    { speaker: 'Dr. Kim', text: "Site B has better accessibility and parking." },
                    { speaker: 'Dr. Garcia', text: "The architects recommend Site A for natural light." },
                    { speaker: 'Dr. Thompson', text: "I move we delegate final choice to the building committee." },
                    { speaker: 'Chair', text: "All in favor? Motion passed." }
                ]
            },
            {
                title: 'Coffee Brand',
                stakes: 'low',
                value: '$200/mo',
                baseIntensity: 75,
                baseDuration: 25,
                comments: [
                    { speaker: 'Dr. Patel', text: "I STRONGLY prefer the Italian roast. It's not even close." },
                    { speaker: 'Dr. Wilson', text: "Italian roast? That's bitter swill! French press or nothing." },
                    { speaker: 'Dr. Chen', text: "Both of you are wrong. We need ethically sourced beans." },
                    { speaker: 'Dr. Kim', text: "Ethically sourced? At triple the cost? That's MY research fund!" },
                    { speaker: 'Dr. Garcia', text: "Can we at least agree to EXCLUDE the current brand?" },
                    { speaker: 'Dr. Thompson', text: "The current brand is FINE. Some of us aren't coffee snobs." },
                    { speaker: 'Dr. Patel', text: "SNOBS?! Caring about quality makes me a SNOB?!" },
                    { speaker: 'Dr. Wilson', text: "I've been here 22 years. My opinion should carry weight." },
                    { speaker: 'Dr. Chen', text: "Seniority doesn't make your taste buds better, Wilson." },
                    { speaker: 'Chair', text: "ORDER! We've spent 20 minutes on coffee. Let's vote!" }
                ]
            },
            {
                title: 'Parking Spaces',
                stakes: 'low',
                value: '$0',
                baseIntensity: 85,
                baseDuration: 35,
                comments: [
                    { speaker: 'Dr. Thompson', text: "I've been WAITING for a closer spot for 8 years." },
                    { speaker: 'Dr. Garcia', text: "Waiting? I have a documented knee condition!" },
                    { speaker: 'Dr. Kim', text: "Medical exceptions are already in policy section 4.7.2." },
                    { speaker: 'Dr. Chen', text: "Seniority should determine parking priority. Period." },
                    { speaker: 'Dr. Wilson', text: "If seniority mattered, I'D have the closest spot!" },
                    { speaker: 'Dr. Patel', text: "This is about FAIRNESS, not your ego, Wilson." },
                    { speaker: 'Dr. Thompson', text: "I arrive at 6 AM. I DESERVE a good spot." },
                    { speaker: 'Dr. Garcia', text: "Arrival time? Then we're penalizing evening researchers!" },
                    { speaker: 'Dr. Kim', text: "We need a LOTTERY system. Remove politics entirely." },
                    { speaker: 'Dr. Chen', text: "Lottery?! After I've put in 15 years?!" },
                    { speaker: 'Dr. Wilson', text: "I propose we form a PARKING COMMITTEE." },
                    { speaker: 'Dr. Patel', text: "Another committee? For THREE parking spots?!" },
                    { speaker: 'Chair', text: "We've been discussing parking for 30 minutes..." }
                ]
            },
            {
                title: 'Thesis Formatting',
                stakes: 'low',
                value: '$0',
                baseIntensity: 90,
                baseDuration: 40,
                comments: [
                    { speaker: 'Dr. Kim', text: "12-point Times New Roman is the ONLY acceptable font." },
                    { speaker: 'Dr. Chen', text: "Times New Roman is OUTDATED. Garamond is superior." },
                    { speaker: 'Dr. Wilson', text: "Can we discuss the SUBSTANCE of theses instead?" },
                    { speaker: 'Dr. Patel', text: "Formatting IS substance. It reflects scholarly rigor." },
                    { speaker: 'Dr. Garcia', text: "What about 1.5 vs. double spacing?" },
                    { speaker: 'Dr. Thompson', text: "Double spacing wastes paper. Are we environmentalists?" },
                    { speaker: 'Dr. Kim', text: "It's about READABILITY, not environmentalism!" },
                    { speaker: 'Dr. Chen', text: "I find 1.15 spacing optimal. It's the modern standard." },
                    { speaker: 'Dr. Wilson', text: "1.15?! That's not even a round number!" },
                    { speaker: 'Dr. Patel', text: "Round numbers? This is SCHOLARSHIP, not arithmetic!" },
                    { speaker: 'Dr. Garcia', text: "What about margin size? 1 inch or 1.25 inch?" },
                    { speaker: 'Dr. Thompson', text: "1.25 inches disrupts traditional binding methods!" },
                    { speaker: 'Dr. Kim', text: "Who even BINDS theses anymore?! It's all digital!" },
                    { speaker: 'Dr. Chen', text: "TRADITION matters in academia. We're not a tech startup." },
                    { speaker: 'Chair', text: "We've debated fonts for 35 minutes. The $2.4M plan took 8." }
                ]
            }
        ];

        let currentItem = -1;
        let discussedItems = [];
        let discussionTimes = [];
        let intensities = [];
        let timerInterval = null;
        let discussionStartTime = 0;
        let commentIndex = 0;
        let commentInterval = null;

        function discussItem(index) {
            if (discussedItems.includes(index)) return;

            // Hide agenda, show discussion
            document.getElementById('agenda').style.display = 'none';
            document.getElementById('discussionArea').style.display = 'block';

            currentItem = index;
            discussionStartTime = Date.now();

            const item = agendaItems[index];
            document.getElementById('discussionTopic').textContent = item.title + ' Discussion';
            document.getElementById('commentsStream').innerHTML = '';
            document.getElementById('intensityFill').style.width = '0%';
            document.getElementById('intensityPercent').textContent = '0%';

            // Highlight current item
            document.querySelectorAll('.agenda-item').forEach((el, i) => {
                el.classList.remove('active');
                if (i === index) el.classList.add('active');
            });

            commentIndex = 0;
            simulateDiscussion(item);
        }

        function simulateDiscussion(item) {
            const commentsStream = document.getElementById('commentsStream');
            const intensityFill = document.getElementById('intensityFill');
            const intensityPercent = document.getElementById('intensityPercent');

            let currentIntensity = 0;
            const targetIntensity = item.baseIntensity + Math.random() * 15;

            function addComment() {
                if (commentIndex >= item.comments.length) {
                    clearInterval(commentInterval);
                    return;
                }

                const comment = item.comments[commentIndex];
                const div = document.createElement('div');
                div.className = 'comment';
                div.innerHTML = `<span class="speaker">${comment.speaker}:</span> <span class="text">${comment.text}</span>`;
                commentsStream.appendChild(div);
                commentsStream.scrollTop = commentsStream.scrollHeight;

                // Update intensity
                currentIntensity = Math.min(targetIntensity, currentIntensity + targetIntensity / item.comments.length);
                intensityFill.style.width = currentIntensity + '%';
                intensityPercent.textContent = Math.round(currentIntensity) + '%';

                commentIndex++;
            }

            // Add comments at rate proportional to duration
            const commentRate = (item.baseDuration * 1000) / item.comments.length;
            commentInterval = setInterval(addComment, Math.min(commentRate, 2500));
            addComment(); // First comment immediately
        }

        function nextItem() {
            if (commentInterval) clearInterval(commentInterval);

            const elapsed = (Date.now() - discussionStartTime) / 1000;
            const item = agendaItems[currentItem];

            // Simulate realistic duration based on stakes
            const simulatedDuration = item.baseDuration + Math.random() * 10;
            discussionTimes.push({ index: currentItem, duration: simulatedDuration, stakes: item.stakes });
            intensities.push({ index: currentItem, intensity: item.baseIntensity + Math.random() * 10, stakes: item.stakes });

            discussedItems.push(currentItem);

            // Mark as discussed
            document.querySelectorAll('.agenda-item')[currentItem].classList.add('discussed');
            document.querySelectorAll('.agenda-item')[currentItem].classList.remove('active');

            // Update stats
            updateStats();

            if (discussedItems.length === agendaItems.length) {
                showSummary();
            } else {
                document.getElementById('agenda').style.display = 'block';
                document.getElementById('discussionArea').style.display = 'none';
            }
        }

        function updateStats() {
            document.getElementById('itemsDiscussed').textContent = discussedItems.length;

            const totalMins = discussionTimes.reduce((a, b) => a + b.duration, 0);
            document.getElementById('totalTime').textContent =
                Math.floor(totalMins) + ':' + String(Math.round((totalMins % 1) * 60)).padStart(2, '0');

            // Average intensities by stakes
            const highIntensities = intensities.filter(i => i.stakes === 'high').map(i => i.intensity);
            const lowIntensities = intensities.filter(i => i.stakes === 'low').map(i => i.intensity);

            if (highIntensities.length > 0) {
                const avgHigh = Math.round(highIntensities.reduce((a, b) => a + b) / highIntensities.length);
                document.getElementById('avgHighIntensity').textContent = avgHigh + '%';
            }
            if (lowIntensities.length > 0) {
                const avgLow = Math.round(lowIntensities.reduce((a, b) => a + b) / lowIntensities.length);
                document.getElementById('avgLowIntensity').textContent = avgLow + '%';
            }

            // Update results chart
            updateResultsChart();
        }

        function updateResultsChart() {
            const container = document.getElementById('resultsChart');
            container.innerHTML = '';

            const maxDuration = Math.max(...discussionTimes.map(t => t.duration));

            discussionTimes.forEach(t => {
                const item = agendaItems[t.index];
                const row = document.createElement('div');
                row.className = 'result-row';

                const label = document.createElement('div');
                label.className = 'result-label';
                label.textContent = item.title;

                const bar = document.createElement('div');
                bar.className = 'result-bar';

                const fill = document.createElement('div');
                fill.className = 'result-fill';
                fill.style.width = (t.duration / maxDuration * 100) + '%';
                fill.style.background = t.stakes === 'high' ? '#27ae60' : '#e74c3c';

                const time = document.createElement('div');
                time.className = 'result-time';
                time.textContent = Math.round(t.duration) + ' min';

                bar.appendChild(fill);
                row.appendChild(label);
                row.appendChild(bar);
                row.appendChild(time);
                container.appendChild(row);
            });
        }

        function showSummary() {
            document.getElementById('agenda').style.display = 'none';
            document.getElementById('discussionArea').style.display = 'none';
            document.getElementById('summaryPanel').style.display = 'block';

            const highStakesDuration = discussionTimes.filter(t => t.stakes === 'high').reduce((a, b) => a + b.duration, 0);
            const lowStakesDuration = discussionTimes.filter(t => t.stakes === 'low').reduce((a, b) => a + b.duration, 0);
            const highStakesValue = '$17.4M';
            const lowStakesValue = '$200/month';

            const summaryText = `
                <strong>High Stakes Items</strong> ($17.4M combined): ${Math.round(highStakesDuration)} minutes<br>
                <strong>Low Stakes Items</strong> (~$0 value): ${Math.round(lowStakesDuration)} minutes<br><br>
                The meeting spent <strong>${Math.round(lowStakesDuration / highStakesDuration * 100)}% more time</strong>
                on trivial matters than on decisions worth millions.
                This is Sayre's Law in action: intensity is INVERSELY proportional to stakes.
            `;
            document.getElementById('summaryText').innerHTML = summaryText;

            drawSummaryChart();
        }

        function drawSummaryChart() {
            const canvas = document.getElementById('summaryChart');
            const ctx = canvas.getContext('2d');
            const w = canvas.width;
            const h = canvas.height;

            ctx.fillStyle = 'rgba(0,0,0,0.3)';
            ctx.fillRect(0, 0, w, h);

            // Draw bars
            const items = discussionTimes.sort((a, b) => a.index - b.index);
            const barWidth = (w - 100) / items.length - 10;
            const maxDuration = Math.max(...items.map(t => t.duration));

            items.forEach((t, i) => {
                const x = 50 + i * (barWidth + 10);
                const barHeight = (t.duration / maxDuration) * (h - 80);
                const y = h - 40 - barHeight;

                ctx.fillStyle = t.stakes === 'high' ? '#27ae60' : '#e74c3c';
                ctx.fillRect(x, y, barWidth, barHeight);

                // Label
                ctx.fillStyle = '#888';
                ctx.font = '10px Georgia';
                ctx.textAlign = 'center';
                ctx.fillText(agendaItems[t.index].title.split(' ')[0], x + barWidth/2, h - 25);
                ctx.fillStyle = '#48dbfb';
                ctx.fillText(Math.round(t.duration) + 'm', x + barWidth/2, y - 5);
            });

            // Legend
            ctx.fillStyle = '#27ae60';
            ctx.fillRect(w - 120, 20, 15, 15);
            ctx.fillStyle = '#888';
            ctx.font = '11px Georgia';
            ctx.textAlign = 'left';
            ctx.fillText('High Stakes', w - 100, 32);

            ctx.fillStyle = '#e74c3c';
            ctx.fillRect(w - 120, 40, 15, 15);
            ctx.fillStyle = '#888';
            ctx.fillText('Low Stakes', w - 100, 52);
        }

        function restartMeeting() {
            currentItem = -1;
            discussedItems = [];
            discussionTimes = [];
            intensities = [];

            document.querySelectorAll('.agenda-item').forEach(el => {
                el.classList.remove('discussed', 'active');
            });

            document.getElementById('agenda').style.display = 'block';
            document.getElementById('discussionArea').style.display = 'none';
            document.getElementById('summaryPanel').style.display = 'none';

            document.getElementById('itemsDiscussed').textContent = '0';
            document.getElementById('totalTime').textContent = '0:00';
            document.getElementById('avgHighIntensity').textContent = '‚Äî';
            document.getElementById('avgLowIntensity').textContent = '‚Äî';
            document.getElementById('resultsChart').innerHTML = '';
        }

        // Meeting timer
        let meetingStartTime = Date.now();
        setInterval(() => {
            const elapsed = Math.floor((Date.now() - meetingStartTime) / 1000);
            const mins = Math.floor(elapsed / 60);
            const secs = elapsed % 60;
            document.getElementById('meetingTimer').textContent =
                String(mins).padStart(2, '0') + ':' + String(secs).padStart(2, '0');
        }, 1000);
    </script>
</body>
</html>
