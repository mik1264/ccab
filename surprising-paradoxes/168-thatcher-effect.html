<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Thatcher Effect | Surprising Paradoxes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --portrait-blue: #1e3a5f;
            --gold: #d4a574;
            --cream: #f5f0e6;
            --dark: #1a1a2e;
            --warning-red: #e74c3c;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(180deg, var(--portrait-blue) 0%, var(--dark) 100%);
            color: var(--cream);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: var(--gold);
            text-shadow: 0 0 20px rgba(212, 165, 116, 0.3);
        }

        .subtitle {
            font-size: 1.3em;
            color: var(--cream);
            font-style: italic;
            opacity: 0.9;
        }

        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            color: var(--gold);
            text-decoration: none;
            font-size: 1em;
            opacity: 0.8;
            transition: opacity 0.3s;
            z-index: 100;
        }

        .back-link:hover {
            opacity: 1;
        }

        /* Demo container */
        .demo-container {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 2px solid rgba(212, 165, 116, 0.3);
        }

        .face-display {
            display: flex;
            justify-content: center;
            gap: 40px;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }

        .face-panel {
            text-align: center;
        }

        .face-panel h3 {
            color: var(--gold);
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .face-canvas {
            border: 4px solid var(--gold);
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            transition: transform 0.5s ease;
        }

        .face-canvas.inverted {
            transform: rotate(180deg);
        }

        /* Controls */
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin: 30px 0;
        }

        .control-btn {
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: bold;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .flip-btn {
            background: linear-gradient(135deg, var(--gold), #c49b6a);
            color: var(--dark);
        }

        .flip-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(212, 165, 116, 0.5);
        }

        .reset-btn {
            background: rgba(255, 255, 255, 0.1);
            color: var(--cream);
            border: 2px solid var(--gold);
        }

        .reset-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Reveal message */
        .reveal-message {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, rgba(231, 76, 60, 0.2), rgba(255, 100, 100, 0.1));
            border: 2px solid var(--warning-red);
            border-radius: 15px;
            margin: 20px 0;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .reveal-message.visible {
            opacity: 1;
        }

        .reveal-message h3 {
            color: var(--warning-red);
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .reveal-message p {
            color: var(--cream);
            font-size: 1.1em;
        }

        /* Instructions */
        .instructions {
            background: rgba(212, 165, 116, 0.1);
            border: 2px solid rgba(212, 165, 116, 0.3);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            text-align: center;
        }

        .instructions h3 {
            color: var(--gold);
            margin-bottom: 15px;
        }

        .instructions p {
            line-height: 1.8;
            font-size: 1.1em;
        }

        /* Face selection */
        .face-selector {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .face-option {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid transparent;
            border-radius: 20px;
            cursor: pointer;
            color: var(--cream);
            transition: all 0.3s ease;
        }

        .face-option:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .face-option.active {
            border-color: var(--gold);
            background: rgba(212, 165, 116, 0.2);
        }

        /* Sections */
        .section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .section h2 {
            color: var(--gold);
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 2px solid rgba(212, 165, 116, 0.3);
            padding-bottom: 10px;
        }

        .section p {
            line-height: 1.8;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        /* Paradox highlight */
        .paradox-box {
            background: linear-gradient(135deg, rgba(212, 165, 116, 0.2), rgba(212, 165, 116, 0.05));
            border: 2px solid var(--gold);
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
        }

        .paradox-box h3 {
            color: var(--gold);
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        /* Brain regions */
        .brain-regions {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .brain-region {
            text-align: center;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            min-width: 180px;
        }

        .brain-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .brain-region h4 {
            color: var(--gold);
            margin-bottom: 8px;
        }

        .brain-region p {
            font-size: 0.9em;
            color: rgba(245, 240, 230, 0.8);
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding-left: 30px;
            margin: 20px 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: linear-gradient(180deg, var(--gold), var(--portrait-blue));
            border-radius: 2px;
        }

        .timeline-item {
            position: relative;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(212, 165, 116, 0.1);
            border-radius: 10px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -33px;
            top: 20px;
            width: 12px;
            height: 12px;
            background: var(--gold);
            border-radius: 50%;
            border: 3px solid var(--portrait-blue);
        }

        .timeline-year {
            font-weight: bold;
            color: var(--gold);
            font-size: 1.1em;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 30px;
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.9em;
        }

        footer a {
            color: var(--gold);
        }

        /* Responsive */
        @media (max-width: 600px) {
            h1 {
                font-size: 1.8em;
            }

            .face-display {
                flex-direction: column;
                align-items: center;
            }

            .face-canvas {
                width: 250px;
                height: 300px;
            }

            .controls {
                flex-direction: column;
                align-items: center;
            }

            .control-btn {
                width: 100%;
                max-width: 250px;
            }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back to Paradoxes</a>

    <div class="container">
        <header>
            <h1>üëÅÔ∏è The Thatcher Effect</h1>
            <p class="subtitle">When Inversion Hides the Obvious</p>
        </header>

        <div class="demo-container">
            <div class="instructions">
                <h3>The Experiment</h3>
                <p>Look at both faces below. They both appear relatively normal when upside-down.<br>
                Now click <strong>"Flip Faces"</strong> to see them right-side-up...</p>
            </div>

            <div class="face-selector">
                <button class="face-option active" data-face="simple">Simple Face</button>
                <button class="face-option" data-face="detailed">Detailed Face</button>
                <button class="face-option" data-face="photo">Photo-realistic</button>
            </div>

            <div class="face-display">
                <div class="face-panel">
                    <h3>Normal Face</h3>
                    <canvas id="normal-face" class="face-canvas inverted" width="220" height="280"></canvas>
                </div>
                <div class="face-panel">
                    <h3>"Thatcherized" Face</h3>
                    <canvas id="thatcher-face" class="face-canvas inverted" width="220" height="280"></canvas>
                </div>
            </div>

            <div class="reveal-message" id="reveal-message">
                <h3>üò± The Grotesque Revealed!</h3>
                <p>The right face has its eyes and mouth <strong>flipped upside-down</strong>‚Äîyet you couldn't tell when the whole image was inverted. Your brain's face-processing circuits only work properly when faces are upright!</p>
            </div>

            <div class="controls">
                <button class="control-btn flip-btn" id="flip-btn">Flip Faces</button>
                <button class="control-btn reset-btn" id="reset-btn">Reset (Invert)</button>
            </div>
        </div>

        <section class="section">
            <h2>What Is the Thatcher Effect?</h2>
            <p>
                The <strong>Thatcher effect</strong> (also called the Thatcher illusion) is a remarkable demonstration
                of how our brains process faces. When a face is shown upside-down, we fail to notice even
                dramatic distortions to the eyes and mouth‚Äîdistortions that appear horrifyingly grotesque
                when the face is viewed right-side-up.
            </p>
            <p>
                The effect was discovered in 1980 by <strong>Peter Thompson</strong>, a psychology professor at
                the University of York. He used a photograph of British Prime Minister Margaret Thatcher,
                inverting just the eyes and mouth within an otherwise normal face. When the whole image was
                shown upside-down, observers couldn't detect anything wrong!
            </p>

            <div class="paradox-box">
                <h3>ü§î The Perceptual Paradox</h3>
                <p>
                    Here's what makes this truly paradoxical: the information in both images is <em>identical</em>.
                    Whether upright or inverted, the same pixels are present. Yet your brain processes them
                    completely differently based on orientation. When upright, you see a monster; when inverted,
                    you see a normal face.
                </p>
                <p>
                    This reveals that face perception isn't about detecting individual features‚Äîit's about
                    <strong>holistic processing</strong> that only works in the expected orientation. Turn a face
                    upside-down, and your specialized face-recognition circuits essentially shut off!
                </p>
            </div>
        </section>

        <section class="section">
            <h2>Why Does This Happen?</h2>
            <p>
                The Thatcher effect reveals something profound about how the brain processes faces:
            </p>

            <div class="brain-regions">
                <div class="brain-region">
                    <div class="brain-icon">üß†</div>
                    <h4>Fusiform Face Area</h4>
                    <p>Specialized for processing upright faces‚Äîbarely activates for inverted faces</p>
                </div>
                <div class="brain-region">
                    <div class="brain-icon">üëÅÔ∏è</div>
                    <h4>Superior Temporal Sulcus</h4>
                    <p>Processes facial expressions‚Äîonly works properly when faces are upright</p>
                </div>
                <div class="brain-region">
                    <div class="brain-icon">üîÑ</div>
                    <h4>Holistic Processing</h4>
                    <p>Faces are processed as wholes, not collections of parts‚Äîexcept when inverted</p>
                </div>
            </div>

            <p>
                Research using fMRI brain imaging shows that when you view a "Thatcherized" face upright,
                the <strong>superior temporal sulcus</strong>‚Äîa region linked to processing facial expressions‚Äîshows
                a strong response. But when the same image is inverted, this response disappears.
            </p>
            <p>
                The leading explanation is that we process upright faces <strong>holistically</strong>‚Äîas unified
                gestalts where the spatial relationships between features matter enormously. But when faces are
                inverted, we switch to <strong>feature-by-feature</strong> processing, which misses the distortion
                because each individual feature (eyes, mouth) still looks like a normal feature, just rotated.
            </p>
        </section>

        <section class="section">
            <h2>Historical Discovery</h2>
            <div class="timeline">
                <div class="timeline-item">
                    <span class="timeline-year">1980</span>
                    <p>Peter Thompson creates the original Thatcher illusion using a photo of Margaret Thatcher, demonstrating at the University of York.</p>
                </div>
                <div class="timeline-item">
                    <span class="timeline-year">1980s‚Äì90s</span>
                    <p>The effect becomes a standard demonstration in psychology courses, revealing the orientation-specificity of face processing.</p>
                </div>
                <div class="timeline-item">
                    <span class="timeline-year">2004</span>
                    <p>Studies show that even infants (4+ months) are sensitive to the Thatcher effect, suggesting early-developing face expertise.</p>
                </div>
                <div class="timeline-item">
                    <span class="timeline-year">2014</span>
                    <p>fMRI research precisely localizes the neural response to Thatcherization in the superior temporal sulcus.</p>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>Who Is Affected?</h2>
            <p>
                The Thatcher effect reveals the specialized nature of human face processing:
            </p>
            <ul style="margin-left: 20px; line-height: 2;">
                <li><strong>Most people:</strong> Strongly experience the effect‚Äîinverted faces look normal, upright Thatcherized faces look monstrous</li>
                <li><strong>Infants:</strong> Show the effect by 4 months of age, indicating early face expertise</li>
                <li><strong>Children with autism:</strong> Still show the effect, though some studies suggest reduced sensitivity</li>
                <li><strong>People with prosopagnosia:</strong> Show a significantly weaker response‚Äîthey lack the specialized face processing that creates the illusion</li>
                <li><strong>Other primates:</strong> Rhesus monkeys show a similar inversion effect, suggesting evolutionary origins</li>
            </ul>
        </section>

        <section class="section">
            <h2>Try It Yourself</h2>
            <p>
                The demo above uses synthetic faces, but the effect is even more powerful with real photographs.
                You can create your own Thatcher illusion:
            </p>
            <ol style="margin-left: 20px; line-height: 2.2;">
                <li>Take any portrait photo</li>
                <li>Carefully cut out (or digitally select) just the eyes and mouth</li>
                <li>Rotate these features 180¬∞</li>
                <li>Paste them back into the face</li>
                <li>Turn the whole image upside-down</li>
                <li>Show it to friends‚Äîthey won't notice anything wrong!</li>
                <li>Then flip it right-side-up and watch their reaction üò±</li>
            </ol>
        </section>

        <footer>
            <p>
                Part of the <a href="index.html">Surprising Paradoxes</a> collection<br>
                Discovered by Peter Thompson (1980) at the University of York
            </p>
        </footer>
    </div>

    <script>
        const normalCanvas = document.getElementById('normal-face');
        const thatcherCanvas = document.getElementById('thatcher-face');
        const normalCtx = normalCanvas.getContext('2d');
        const thatcherCtx = thatcherCanvas.getContext('2d');
        const flipBtn = document.getElementById('flip-btn');
        const resetBtn = document.getElementById('reset-btn');
        const revealMessage = document.getElementById('reveal-message');
        const faceOptions = document.querySelectorAll('.face-option');

        let currentFace = 'simple';
        let isInverted = true;

        // Face drawing functions
        function drawSimpleFace(ctx, thatcherized = false) {
            const w = ctx.canvas.width;
            const h = ctx.canvas.height;

            // Background
            ctx.fillStyle = '#f5e6d3';
            ctx.fillRect(0, 0, w, h);

            // Face oval
            ctx.fillStyle = '#ffd4a3';
            ctx.beginPath();
            ctx.ellipse(w/2, h/2, w/2 - 20, h/2 - 20, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.strokeStyle = '#d4a574';
            ctx.lineWidth = 3;
            ctx.stroke();

            // Hair
            ctx.fillStyle = '#4a3728';
            ctx.beginPath();
            ctx.ellipse(w/2, 50, 80, 50, 0, Math.PI, Math.PI * 2);
            ctx.fill();

            // Draw eyes and mouth (potentially inverted)
            drawFaceFeatures(ctx, w, h, thatcherized, 'simple');
        }

        function drawDetailedFace(ctx, thatcherized = false) {
            const w = ctx.canvas.width;
            const h = ctx.canvas.height;

            // Background
            ctx.fillStyle = '#e8ddd4';
            ctx.fillRect(0, 0, w, h);

            // Face shape
            ctx.fillStyle = '#fcd5b5';
            ctx.beginPath();
            ctx.moveTo(w/2, 30);
            ctx.bezierCurveTo(w - 20, 50, w - 20, h - 80, w/2, h - 20);
            ctx.bezierCurveTo(20, h - 80, 20, 50, w/2, 30);
            ctx.fill();
            ctx.strokeStyle = '#c9a88a';
            ctx.lineWidth = 2;
            ctx.stroke();

            // Hair
            ctx.fillStyle = '#2c1810';
            ctx.beginPath();
            ctx.moveTo(30, 80);
            ctx.bezierCurveTo(30, 20, w - 30, 20, w - 30, 80);
            ctx.bezierCurveTo(w - 50, 60, w/2, 40, 50, 60);
            ctx.closePath();
            ctx.fill();

            // Nose
            ctx.strokeStyle = '#c9a88a';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(w/2, 120);
            ctx.lineTo(w/2 - 8, 170);
            ctx.lineTo(w/2 + 8, 170);
            ctx.stroke();

            // Ears
            ctx.fillStyle = '#fcd5b5';
            ctx.beginPath();
            ctx.ellipse(25, 140, 12, 25, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();
            ctx.beginPath();
            ctx.ellipse(w - 25, 140, 12, 25, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();

            drawFaceFeatures(ctx, w, h, thatcherized, 'detailed');
        }

        function drawPhotoFace(ctx, thatcherized = false) {
            const w = ctx.canvas.width;
            const h = ctx.canvas.height;

            // Background
            const bgGradient = ctx.createRadialGradient(w/2, h/2, 0, w/2, h/2, h/2);
            bgGradient.addColorStop(0, '#d4c4b5');
            bgGradient.addColorStop(1, '#a89080');
            ctx.fillStyle = bgGradient;
            ctx.fillRect(0, 0, w, h);

            // Face with shading
            const faceGradient = ctx.createRadialGradient(w/2 - 20, h/2 - 30, 0, w/2, h/2, 120);
            faceGradient.addColorStop(0, '#ffe4c4');
            faceGradient.addColorStop(0.5, '#f5d5b5');
            faceGradient.addColorStop(1, '#dbb090');
            ctx.fillStyle = faceGradient;
            ctx.beginPath();
            ctx.ellipse(w/2, h/2 + 10, 85, 110, 0, 0, Math.PI * 2);
            ctx.fill();

            // Hair with texture
            ctx.fillStyle = '#1a1008';
            ctx.beginPath();
            ctx.moveTo(25, 100);
            ctx.bezierCurveTo(25, 20, w - 25, 20, w - 25, 100);
            ctx.bezierCurveTo(w - 40, 70, w/2 + 30, 50, w/2, 60);
            ctx.bezierCurveTo(w/2 - 30, 50, 40, 70, 25, 100);
            ctx.fill();

            // Add hair strands
            ctx.strokeStyle = '#2a2018';
            ctx.lineWidth = 1;
            for (let i = 0; i < 20; i++) {
                ctx.beginPath();
                const startX = 40 + Math.random() * (w - 80);
                ctx.moveTo(startX, 30 + Math.random() * 30);
                ctx.bezierCurveTo(
                    startX + (Math.random() - 0.5) * 30, 60,
                    startX + (Math.random() - 0.5) * 40, 80,
                    startX + (Math.random() - 0.5) * 20, 95
                );
                ctx.stroke();
            }

            // Nose with shading
            ctx.fillStyle = '#e5c5a5';
            ctx.beginPath();
            ctx.moveTo(w/2, 115);
            ctx.lineTo(w/2 - 12, 175);
            ctx.quadraticCurveTo(w/2, 185, w/2 + 12, 175);
            ctx.closePath();
            ctx.fill();

            // Nose shadow
            ctx.fillStyle = 'rgba(150, 100, 70, 0.3)';
            ctx.beginPath();
            ctx.moveTo(w/2 + 5, 120);
            ctx.lineTo(w/2 + 15, 170);
            ctx.lineTo(w/2 + 5, 175);
            ctx.closePath();
            ctx.fill();

            // Ears
            ctx.fillStyle = '#f5d5b5';
            ctx.beginPath();
            ctx.ellipse(22, 145, 15, 30, -0.2, 0, Math.PI * 2);
            ctx.fill();
            ctx.beginPath();
            ctx.ellipse(w - 22, 145, 15, 30, 0.2, 0, Math.PI * 2);
            ctx.fill();

            // Eyebrows
            ctx.strokeStyle = '#3a2a1a';
            ctx.lineWidth = 4;
            ctx.lineCap = 'round';
            ctx.beginPath();
            ctx.moveTo(55, 100);
            ctx.quadraticCurveTo(80, 92, 105, 98);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(w - 55, 100);
            ctx.quadraticCurveTo(w - 80, 92, w - 105, 98);
            ctx.stroke();

            drawFaceFeatures(ctx, w, h, thatcherized, 'photo');
        }

        function drawFaceFeatures(ctx, w, h, thatcherized, style) {
            const eyeY = style === 'simple' ? 120 : 125;
            const mouthY = style === 'simple' ? 200 : 215;

            ctx.save();

            if (thatcherized) {
                // Draw eyes inverted
                drawEyes(ctx, w, eyeY, style, true);
                // Draw mouth inverted
                drawMouth(ctx, w, mouthY, style, true);
            } else {
                drawEyes(ctx, w, eyeY, style, false);
                drawMouth(ctx, w, mouthY, style, false);
            }

            ctx.restore();
        }

        function drawEyes(ctx, w, y, style, inverted) {
            const leftEyeX = w/2 - 40;
            const rightEyeX = w/2 + 40;

            if (style === 'simple') {
                // Left eye
                ctx.save();
                if (inverted) {
                    ctx.translate(leftEyeX, y);
                    ctx.rotate(Math.PI);
                    ctx.translate(-leftEyeX, -y);
                }
                ctx.fillStyle = 'white';
                ctx.beginPath();
                ctx.ellipse(leftEyeX, y, 20, 12, 0, 0, Math.PI * 2);
                ctx.fill();
                ctx.strokeStyle = '#333';
                ctx.lineWidth = 2;
                ctx.stroke();
                ctx.fillStyle = '#4a2c1a';
                ctx.beginPath();
                ctx.arc(leftEyeX, y, 8, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillStyle = 'black';
                ctx.beginPath();
                ctx.arc(leftEyeX, y, 4, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();

                // Right eye
                ctx.save();
                if (inverted) {
                    ctx.translate(rightEyeX, y);
                    ctx.rotate(Math.PI);
                    ctx.translate(-rightEyeX, -y);
                }
                ctx.fillStyle = 'white';
                ctx.beginPath();
                ctx.ellipse(rightEyeX, y, 20, 12, 0, 0, Math.PI * 2);
                ctx.fill();
                ctx.strokeStyle = '#333';
                ctx.lineWidth = 2;
                ctx.stroke();
                ctx.fillStyle = '#4a2c1a';
                ctx.beginPath();
                ctx.arc(rightEyeX, y, 8, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillStyle = 'black';
                ctx.beginPath();
                ctx.arc(rightEyeX, y, 4, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();

            } else {
                // More detailed eyes
                [leftEyeX, rightEyeX].forEach(eyeX => {
                    ctx.save();
                    if (inverted) {
                        ctx.translate(eyeX, y);
                        ctx.rotate(Math.PI);
                        ctx.translate(-eyeX, -y);
                    }

                    // Eye white
                    ctx.fillStyle = '#fffef8';
                    ctx.beginPath();
                    ctx.ellipse(eyeX, y, 22, 13, 0, 0, Math.PI * 2);
                    ctx.fill();

                    // Eye outline
                    ctx.strokeStyle = '#2a1a0a';
                    ctx.lineWidth = 2;
                    ctx.stroke();

                    // Iris
                    const irisGradient = ctx.createRadialGradient(eyeX, y, 0, eyeX, y, 10);
                    irisGradient.addColorStop(0, '#6a8c50');
                    irisGradient.addColorStop(0.7, '#3a5a28');
                    irisGradient.addColorStop(1, '#2a3a18');
                    ctx.fillStyle = irisGradient;
                    ctx.beginPath();
                    ctx.arc(eyeX, y, 10, 0, Math.PI * 2);
                    ctx.fill();

                    // Pupil
                    ctx.fillStyle = '#000';
                    ctx.beginPath();
                    ctx.arc(eyeX, y, 5, 0, Math.PI * 2);
                    ctx.fill();

                    // Light reflection
                    ctx.fillStyle = 'rgba(255,255,255,0.8)';
                    ctx.beginPath();
                    ctx.arc(eyeX + 3, y - 3, 2, 0, Math.PI * 2);
                    ctx.fill();

                    // Upper eyelid line
                    ctx.strokeStyle = '#2a1a0a';
                    ctx.lineWidth = 3;
                    ctx.beginPath();
                    ctx.arc(eyeX, y, 22, -Math.PI * 0.9, -Math.PI * 0.1);
                    ctx.stroke();

                    ctx.restore();
                });
            }
        }

        function drawMouth(ctx, w, y, style, inverted) {
            ctx.save();

            if (inverted) {
                ctx.translate(w/2, y);
                ctx.rotate(Math.PI);
                ctx.translate(-w/2, -y);
            }

            if (style === 'simple') {
                // Simple smile
                ctx.strokeStyle = '#8b4513';
                ctx.lineWidth = 4;
                ctx.lineCap = 'round';
                ctx.beginPath();
                ctx.arc(w/2, y - 15, 30, 0.2, Math.PI - 0.2);
                ctx.stroke();

                // Lips
                ctx.fillStyle = '#c4756a';
                ctx.beginPath();
                ctx.ellipse(w/2, y, 25, 10, 0, 0, Math.PI);
                ctx.fill();
            } else {
                // Detailed mouth
                // Upper lip
                ctx.fillStyle = '#c97070';
                ctx.beginPath();
                ctx.moveTo(w/2 - 30, y);
                ctx.quadraticCurveTo(w/2 - 15, y - 8, w/2, y - 5);
                ctx.quadraticCurveTo(w/2 + 15, y - 8, w/2 + 30, y);
                ctx.quadraticCurveTo(w/2 + 15, y + 5, w/2, y + 3);
                ctx.quadraticCurveTo(w/2 - 15, y + 5, w/2 - 30, y);
                ctx.fill();

                // Lower lip
                ctx.fillStyle = '#d48080';
                ctx.beginPath();
                ctx.moveTo(w/2 - 28, y + 2);
                ctx.quadraticCurveTo(w/2, y + 18, w/2 + 28, y + 2);
                ctx.quadraticCurveTo(w/2, y + 8, w/2 - 28, y + 2);
                ctx.fill();

                // Mouth line
                ctx.strokeStyle = '#8a4040';
                ctx.lineWidth = 1.5;
                ctx.beginPath();
                ctx.moveTo(w/2 - 28, y + 1);
                ctx.quadraticCurveTo(w/2, y + 6, w/2 + 28, y + 1);
                ctx.stroke();

                // Teeth hint
                ctx.fillStyle = 'rgba(255,255,255,0.7)';
                ctx.beginPath();
                ctx.rect(w/2 - 15, y, 30, 5);
                ctx.fill();
            }

            ctx.restore();
        }

        function drawFaces() {
            switch (currentFace) {
                case 'simple':
                    drawSimpleFace(normalCtx, false);
                    drawSimpleFace(thatcherCtx, true);
                    break;
                case 'detailed':
                    drawDetailedFace(normalCtx, false);
                    drawDetailedFace(thatcherCtx, true);
                    break;
                case 'photo':
                    drawPhotoFace(normalCtx, false);
                    drawPhotoFace(thatcherCtx, true);
                    break;
            }
        }

        function flipFaces() {
            normalCanvas.classList.toggle('inverted');
            thatcherCanvas.classList.toggle('inverted');
            isInverted = !isInverted;

            if (!isInverted) {
                revealMessage.classList.add('visible');
                flipBtn.textContent = 'Invert Faces';
            } else {
                revealMessage.classList.remove('visible');
                flipBtn.textContent = 'Flip Faces';
            }
        }

        function resetFaces() {
            normalCanvas.classList.add('inverted');
            thatcherCanvas.classList.add('inverted');
            isInverted = true;
            revealMessage.classList.remove('visible');
            flipBtn.textContent = 'Flip Faces';
        }

        // Event listeners
        flipBtn.addEventListener('click', flipFaces);
        resetBtn.addEventListener('click', resetFaces);

        faceOptions.forEach(option => {
            option.addEventListener('click', () => {
                faceOptions.forEach(o => o.classList.remove('active'));
                option.classList.add('active');
                currentFace = option.dataset.face;
                drawFaces();
            });
        });

        // Initial draw
        drawFaces();
    </script>
</body>
</html>
