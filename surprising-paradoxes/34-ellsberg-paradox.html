<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Ellsberg Paradox - Surprising Paradoxes</title>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --sage: #8A9A5B;
            --moss: #606C38;
            --earth: #DDA15E;
            --cream: #FEFAE0;
            --terracotta: #BC6C25;
            --dark-moss: #3d4423;
            --urn-brown: #78350f;
            --red-ball: #dc2626;
            --black-ball: #1c1917;
            --yellow-ball: #eab308;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #FEFAE0 0%, #F4F1DE 50%, #EDE8D5 100%);
            min-height: 100vh;
            color: var(--dark-moss);
            line-height: 1.8;
        }
        .organic-shape {
            position: fixed;
            border-radius: 60% 40% 50% 50% / 50% 60% 40% 50%;
            opacity: 0.12;
            z-index: 0;
            animation: morph 30s ease-in-out infinite;
        }
        .shape-1 { width: 600px; height: 600px; background: var(--red-ball); top: -200px; right: -150px; }
        .shape-2 { width: 500px; height: 500px; background: var(--yellow-ball); bottom: -150px; left: -150px; animation-delay: -15s; }
        @keyframes morph {
            0%, 100% { border-radius: 60% 40% 50% 50% / 50% 60% 40% 50%; }
            25% { border-radius: 50% 60% 40% 50% / 40% 50% 60% 50%; }
            50% { border-radius: 40% 50% 60% 50% / 50% 40% 50% 60%; }
            75% { border-radius: 50% 40% 50% 60% / 60% 50% 40% 50%; }
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px 80px;
            position: relative;
            z-index: 1;
        }
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--moss);
            text-decoration: none;
            font-weight: 500;
            margin-bottom: 30px;
            padding: 10px 20px;
            background: rgba(255,255,255,0.6);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            transition: all 0.3s ease;
        }
        .back-link:hover { background: rgba(255,255,255,0.9); transform: translateX(-5px); }
        h1 { font-family: 'Lora', serif; font-size: 2.8rem; color: var(--moss); margin-bottom: 20px; }
        .subtitle { font-size: 1.3rem; color: var(--terracotta); margin-bottom: 40px; font-weight: 500; }
        .section {
            background: rgba(255,255,255,0.6);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(138,154,91,0.2);
        }
        h2 { font-family: 'Lora', serif; font-size: 1.6rem; color: var(--moss); margin-bottom: 20px; }
        h3 { font-family: 'Lora', serif; font-size: 1.3rem; color: var(--terracotta); margin: 25px 0 15px; }
        p { margin-bottom: 15px; color: #555; }
        .highlight {
            background: linear-gradient(135deg, rgba(220,38,38,0.1), rgba(234,179,8,0.1));
            border-left: 4px solid var(--red-ball);
            padding: 20px 25px;
            border-radius: 0 15px 15px 0;
            margin: 25px 0;
        }
        .highlight p { margin-bottom: 0; font-weight: 500; color: var(--dark-moss); }

        /* Simulation Container */
        .sim-container {
            background: linear-gradient(180deg, #fef3c7 0%, #fde68a 100%);
            border-radius: 20px;
            padding: 40px 30px;
            margin: 25px 0;
            position: relative;
            overflow: hidden;
        }
        .sim-title {
            font-family: 'Lora', serif;
            font-size: 1.6rem;
            color: var(--urn-brown);
            margin-bottom: 10px;
            text-align: center;
        }
        .sim-subtitle {
            color: #92400e;
            text-align: center;
            margin-bottom: 25px;
        }

        /* Urn Display */
        .urn-display {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            gap: 30px;
            margin: 30px 0;
        }
        .urn {
            position: relative;
            width: 180px;
            height: 200px;
            background: linear-gradient(135deg, #92400e, #78350f);
            border-radius: 20px 20px 40px 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3), inset 0 -10px 20px rgba(0,0,0,0.2);
        }
        .urn::before {
            content: '';
            position: absolute;
            top: -15px;
            left: 10%;
            right: 10%;
            height: 30px;
            background: linear-gradient(135deg, #a16207, #92400e);
            border-radius: 10px 10px 0 0;
        }
        .urn-label {
            position: absolute;
            top: -50px;
            background: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 700;
            color: var(--urn-brown);
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        .balls-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 5px;
            max-width: 140px;
        }
        .ball {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            box-shadow: inset -3px -3px 6px rgba(0,0,0,0.3), 0 2px 4px rgba(0,0,0,0.2);
        }
        .ball.red { background: radial-gradient(circle at 30% 30%, #f87171, #dc2626); }
        .ball.black { background: radial-gradient(circle at 30% 30%, #57534e, #1c1917); }
        .ball.yellow { background: radial-gradient(circle at 30% 30%, #fde047, #eab308); }
        .ball.mystery {
            background: linear-gradient(135deg, #1c1917 50%, #eab308 50%);
            animation: mysteryPulse 2s ease-in-out infinite;
        }
        @keyframes mysteryPulse {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }
        .urn-info {
            position: absolute;
            bottom: -40px;
            font-size: 0.85rem;
            color: #78350f;
            font-weight: 600;
            text-align: center;
            width: 100%;
        }

        /* Gamble Cards */
        .gambles-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
        }
        .gamble-pair {
            margin-bottom: 30px;
        }
        .gamble-pair:last-child {
            margin-bottom: 0;
        }
        .pair-title {
            font-weight: 700;
            color: var(--urn-brown);
            margin-bottom: 15px;
            text-align: center;
        }
        .gamble-options {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        .gamble-card {
            background: #f5f5f4;
            border: 3px solid #d6d3d1;
            border-radius: 15px;
            padding: 20px;
            width: 200px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        .gamble-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .gamble-card.selected {
            border-color: #16a34a;
            background: #dcfce7;
        }
        .gamble-card.selected::after {
            content: '‚úì';
            position: absolute;
            top: -10px;
            right: -10px;
            background: #16a34a;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }
        .gamble-card {
            position: relative;
        }
        .gamble-name {
            font-weight: 700;
            color: var(--urn-brown);
            font-size: 1.2rem;
            margin-bottom: 10px;
        }
        .gamble-desc {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 10px;
        }
        .gamble-balls {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin: 10px 0;
        }
        .gamble-balls .ball {
            width: 30px;
            height: 30px;
        }
        .gamble-odds {
            font-size: 0.85rem;
            color: #78716c;
            font-weight: 600;
        }

        /* Results */
        .results-box {
            background: linear-gradient(135deg, rgba(220,38,38,0.1), rgba(234,179,8,0.1));
            border: 2px solid #fcd34d;
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            text-align: center;
        }
        .results-title {
            font-weight: 700;
            color: var(--urn-brown);
            font-size: 1.2rem;
            margin-bottom: 15px;
        }
        .paradox-reveal {
            background: #fef2f2;
            border: 2px solid #fecaca;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
        }
        .paradox-reveal p {
            margin-bottom: 0;
            color: #dc2626;
            font-weight: 600;
        }

        /* Stats */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--urn-brown);
        }
        .stat-label {
            font-size: 0.85rem;
            color: #78716c;
        }

        /* Controls */
        .sim-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 25px;
            flex-wrap: wrap;
        }
        .sim-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-family: 'Nunito', sans-serif;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .sim-btn.primary {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
            color: white;
        }
        .sim-btn.primary:hover { transform: scale(1.05); box-shadow: 0 5px 20px rgba(220,38,38,0.4); }
        .sim-btn.secondary {
            background: white;
            color: #78716c;
            border: 2px solid #d6d3d1;
        }
        .sim-btn.secondary:hover { background: #f5f5f4; }
        .sim-btn:disabled { opacity: 0.5; cursor: not-allowed; }

        /* Logic Breakdown */
        .logic-box {
            background: #fefce8;
            border: 2px solid #fef08a;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }
        .logic-title {
            font-weight: 700;
            color: #ca8a04;
            margin-bottom: 15px;
        }
        .logic-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px;
            background: rgba(255,255,255,0.5);
            border-radius: 8px;
            margin-bottom: 10px;
        }
        .logic-row:last-child {
            margin-bottom: 0;
        }

        /* Quote */
        .quote {
            background: linear-gradient(135deg, rgba(220,38,38,0.1), rgba(234,179,8,0.1));
            border-left: 4px solid var(--urn-brown);
            padding: 20px 25px;
            margin: 25px 0;
            font-style: italic;
            border-radius: 0 15px 15px 0;
        }
        .quote-attribution {
            margin-top: 15px;
            font-style: normal;
            font-weight: 600;
            color: var(--urn-brown);
        }

        /* Real World Cards */
        .realworld-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
        .realworld-card {
            background: rgba(0,0,0,0.03);
            border-radius: 15px;
            padding: 20px;
        }
        .realworld-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        .realworld-title {
            font-weight: 600;
            color: var(--terracotta);
            margin-bottom: 8px;
        }
        .realworld-desc {
            font-size: 0.9rem;
            color: #666;
        }

        /* Sources */
        .sources {
            background: rgba(255,255,255,0.4);
            border-radius: 15px;
            padding: 20px;
            margin-top: 30px;
        }
        .sources h3 { font-family: 'Lora', serif; color: var(--moss); margin-bottom: 10px; }
        .sources ul { list-style: none; }
        .sources li { margin-bottom: 8px; }
        .sources a { color: var(--terracotta); text-decoration: none; }
        .sources a:hover { text-decoration: underline; }

        @media (max-width: 768px) {
            h1 { font-size: 2rem; }
            .urn-display { flex-direction: column; align-items: center; }
            .urn { width: 150px; height: 170px; }
            .gamble-card { width: 100%; }
        }
    </style>
</head>
<body>
    <div class="organic-shape shape-1"></div>
    <div class="organic-shape shape-2"></div>

    <main class="container">
        <a href="index.html" class="back-link">‚Üê Back to Paradoxes</a>

        <h1>The Ellsberg Paradox</h1>
        <p class="subtitle">Why we fear the unknown more than the risky</p>

        <div class="section">
            <h2>The Setup</h2>
            <p>Imagine an urn containing 90 balls. You know exactly 30 are red. The remaining 60 are some mix of black and yellow‚Äîbut you don't know the ratio. It could be 60 black and 0 yellow, or 0 black and 60 yellow, or anything in between.</p>

            <div class="highlight">
                <p>You'll be paid $100 if the ball you draw matches your bet. Which gambles would you prefer?</p>
            </div>

            <p>Daniel Ellsberg (yes, the Pentagon Papers whistleblower) discovered in 1961 that people's choices in this scenario violate the fundamental axioms of rational decision theory‚Äîyet feel completely reasonable.</p>
        </div>

        <!-- Interactive Simulation -->
        <div class="sim-container">
            <h3 class="sim-title">üé± The Ellsberg Experiment üé±</h3>
            <p class="sim-subtitle">Make your choices, then see the paradox revealed</p>

            <div class="urn-display">
                <div class="urn">
                    <div class="urn-label">The Urn</div>
                    <div class="balls-container" id="urnBalls">
                        <!-- Balls will be generated by JS -->
                    </div>
                    <div class="urn-info">90 balls total</div>
                </div>
            </div>

            <div class="gambles-section">
                <div class="gamble-pair" id="pair1">
                    <div class="pair-title">Choice 1: Which bet do you prefer?</div>
                    <div class="gamble-options">
                        <div class="gamble-card" id="gambleA" onclick="selectGamble(1, 'A')">
                            <div class="gamble-name">Gamble A</div>
                            <div class="gamble-desc">Win if RED is drawn</div>
                            <div class="gamble-balls">
                                <div class="ball red"></div>
                            </div>
                            <div class="gamble-odds">Known: 30/90 = 33.3%</div>
                        </div>
                        <div class="gamble-card" id="gambleB" onclick="selectGamble(1, 'B')">
                            <div class="gamble-name">Gamble B</div>
                            <div class="gamble-desc">Win if BLACK is drawn</div>
                            <div class="gamble-balls">
                                <div class="ball black"></div>
                            </div>
                            <div class="gamble-odds">Unknown: 0-60/90 = 0-66.7%</div>
                        </div>
                    </div>
                </div>

                <div class="gamble-pair" id="pair2">
                    <div class="pair-title">Choice 2: Which bet do you prefer?</div>
                    <div class="gamble-options">
                        <div class="gamble-card" id="gambleC" onclick="selectGamble(2, 'C')">
                            <div class="gamble-name">Gamble C</div>
                            <div class="gamble-desc">Win if RED or YELLOW</div>
                            <div class="gamble-balls">
                                <div class="ball red"></div>
                                <div class="ball yellow"></div>
                            </div>
                            <div class="gamble-odds">Unknown: 30-90/90 = 33-100%</div>
                        </div>
                        <div class="gamble-card" id="gambleD" onclick="selectGamble(2, 'D')">
                            <div class="gamble-name">Gamble D</div>
                            <div class="gamble-desc">Win if BLACK or YELLOW</div>
                            <div class="gamble-balls">
                                <div class="ball black"></div>
                                <div class="ball yellow"></div>
                            </div>
                            <div class="gamble-odds">Known: 60/90 = 66.7%</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="results-box" id="resultsBox" style="display: none;">
                <div class="results-title">Your Choices Analyzed</div>
                <div id="choicesSummary"></div>
                <div class="paradox-reveal" id="paradoxReveal" style="display: none;">
                    <p id="paradoxText"></p>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="statA">0%</div>
                    <div class="stat-label">Choose A over B</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="statD">0%</div>
                    <div class="stat-label">Choose D over C</div>
                </div>
            </div>

            <div class="sim-controls">
                <button class="sim-btn primary" id="revealBtn" onclick="revealParadox()" disabled>üîç Reveal the Paradox</button>
                <button class="sim-btn secondary" onclick="resetSim()">üîÑ Reset</button>
            </div>
        </div>

        <div class="section">
            <h2>The Paradox</h2>
            <p>Most people prefer <strong>A over B</strong> (known 33% vs unknown black) and <strong>D over C</strong> (known 67% vs unknown red+yellow). This seems reasonable‚Äîwe prefer known odds!</p>

            <p>But here's the contradiction:</p>

            <div class="logic-box">
                <div class="logic-title">üß† The Logical Trap</div>
                <div class="logic-row">
                    <span>If you prefer A over B:</span>
                    <span>P(red) > P(black)</span>
                </div>
                <div class="logic-row">
                    <span>This means you believe:</span>
                    <span>30/90 > Black/90</span>
                </div>
                <div class="logic-row">
                    <span>Which implies:</span>
                    <span>Black < 30</span>
                </div>
                <div class="logic-row">
                    <span>If Black < 30, then Yellow > 30</span>
                    <span>(since Black + Yellow = 60)</span>
                </div>
                <div class="logic-row">
                    <span>So Red + Yellow > 60</span>
                    <span>meaning C > D!</span>
                </div>
            </div>

            <p>But you preferred D! Your preferences are <em>logically inconsistent</em>. You can't simultaneously believe black is less likely than red AND that black+yellow is more likely than red+yellow.</p>

            <div class="quote">
                "People are not simply risk-averse; they are ambiguity-averse. They prefer the devil they know to the devil they don't."
                <div class="quote-attribution">‚Äî Daniel Ellsberg, 1961</div>
            </div>
        </div>

        <div class="section">
            <h2>Ambiguity Aversion</h2>
            <p>The Ellsberg Paradox reveals that humans don't just dislike risk‚Äîwe have a separate, powerful aversion to <strong>ambiguity</strong> (not knowing the probabilities at all).</p>

            <h3>Risk vs. Ambiguity</h3>
            <ul style="margin-left: 25px; margin-bottom: 15px;">
                <li><strong>Risk:</strong> Known probabilities (a fair coin: 50/50)</li>
                <li><strong>Ambiguity:</strong> Unknown probabilities (a coin that might be biased, but you don't know how)</li>
            </ul>

            <p>Standard expected utility theory treats these the same‚Äîa rational agent should assign subjective probabilities and maximize expected value. But humans systematically avoid ambiguity, even when it means accepting objectively worse odds.</p>

            <h3>Why Does This Violate Rationality?</h3>
            <p>The <strong>Sure-Thing Principle</strong> (one of the axioms of rational choice) says: if you prefer A to B when some event E happens, and you also prefer A to B when E doesn't happen, then you should prefer A to B regardless of E.</p>

            <p>In the Ellsberg case:</p>
            <ul style="margin-left: 25px;">
                <li>If yellow balls exist: red+yellow should be preferred (more chances to win)</li>
                <li>If no yellow balls: red+yellow = red = same as gamble A</li>
                <li>Yet people prefer the "safe" black+yellow (gamble D) in both cases!</li>
            </ul>
        </div>

        <div class="section">
            <h2>Real-World Applications</h2>

            <div class="realworld-grid">
                <div class="realworld-card">
                    <div class="realworld-icon">üìà</div>
                    <div class="realworld-title">Home Bias in Investing</div>
                    <div class="realworld-desc">Investors prefer domestic stocks over foreign ones with identical returns‚Äîbecause foreign markets feel more "unknown."</div>
                </div>
                <div class="realworld-card">
                    <div class="realworld-icon">üè•</div>
                    <div class="realworld-title">Medical Decisions</div>
                    <div class="realworld-desc">Patients prefer treatments with known side effects over newer treatments with uncertain (but potentially better) outcomes.</div>
                </div>
                <div class="realworld-card">
                    <div class="realworld-icon">üõ°Ô∏è</div>
                    <div class="realworld-title">Insurance Purchasing</div>
                    <div class="realworld-desc">People over-insure against ambiguous risks and under-insure against well-quantified ones.</div>
                </div>
                <div class="realworld-card">
                    <div class="realworld-icon">üíº</div>
                    <div class="realworld-title">Career Choices</div>
                    <div class="realworld-desc">People stay in unsatisfying jobs with known downsides rather than risk switching to opportunities with unclear outcomes.</div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>The Man Behind the Paradox</h2>
            <p>Daniel Ellsberg is better known for leaking the Pentagon Papers in 1971‚Äîclassified documents revealing government deception about the Vietnam War. But before becoming a whistleblower, he was a brilliant decision theorist at RAND Corporation.</p>

            <p>His 1961 paper "Risk, Ambiguity, and the Savage Axioms" challenged the foundations of rational choice theory. Though initially controversial, his insights are now fundamental to behavioral economics, earning him recognition as a pioneer in understanding how humans actually make decisions under uncertainty.</p>

            <p>Interestingly, John Maynard Keynes described a version of this paradox as early as 1921, but it was Ellsberg who formalized it and explored its implications for economic theory.</p>
        </div>

        <div class="section">
            <h2>Theoretical Resolutions</h2>

            <h3>Maxmin Expected Utility</h3>
            <p>Instead of assuming a single probability distribution, assume the decision-maker considers the worst-case scenario across all possible distributions. This "pessimistic" approach can rationalize ambiguity aversion.</p>

            <h3>Choquet Expected Utility</h3>
            <p>French mathematician Gustave Choquet developed a generalized integral that allows for non-additive probabilities, accommodating the kind of behavior seen in the Ellsberg experiment.</p>

            <h3>The Lesson</h3>
            <p>The Ellsberg Paradox doesn't mean humans are irrational‚Äîit means our intuitive definition of "rational" was incomplete. We've since developed richer theories of decision-making that account for ambiguity, leading to better models in economics, AI, and policy design.</p>
        </div>

        <div class="sources">
            <h3>Sources & Further Reading</h3>
            <ul>
                <li><a href="https://en.wikipedia.org/wiki/Ellsberg_paradox" target="_blank">Wikipedia: Ellsberg Paradox</a></li>
                <li><a href="https://www.numberanalytics.com/blog/ellsberg-paradox-decision-analysis" target="_blank">Number Analytics: The Ellsberg Paradox Explained</a></li>
                <li><a href="https://blogs.lse.ac.uk/usappblog/2018/12/15/the-ellsberg-paradox-and-the-ambiguity-and-complexity-of-decision-making/" target="_blank">LSE: The Ellsberg Paradox and Decision-Making</a></li>
                <li><a href="https://www.futilitycloset.com/2016/07/20/the-ellsberg-paradox/" target="_blank">Futility Closet: The Ellsberg Paradox</a></li>
                <li><a href="https://policonomics.com/ellsberg-paradox/" target="_blank">Policonomics: Ellsberg Paradox</a></li>
            </ul>
        </div>
    </main>

    <script>
        let choice1 = null;
        let choice2 = null;
        let totalResponses = 0;
        let countA = 0;
        let countD = 0;

        // Simulated historical data (typical experimental results)
        const historicalA = 71;
        const historicalD = 68;

        function initUrn() {
            const container = document.getElementById('urnBalls');
            container.innerHTML = '';

            // 30 red balls
            for (let i = 0; i < 6; i++) {
                const ball = document.createElement('div');
                ball.className = 'ball red';
                container.appendChild(ball);
            }

            // 12 mystery balls (representing the unknown 60)
            for (let i = 0; i < 12; i++) {
                const ball = document.createElement('div');
                ball.className = 'ball mystery';
                container.appendChild(ball);
            }
        }

        function selectGamble(pair, choice) {
            if (pair === 1) {
                choice1 = choice;
                document.getElementById('gambleA').classList.toggle('selected', choice === 'A');
                document.getElementById('gambleB').classList.toggle('selected', choice === 'B');
            } else {
                choice2 = choice;
                document.getElementById('gambleC').classList.toggle('selected', choice === 'C');
                document.getElementById('gambleD').classList.toggle('selected', choice === 'D');
            }

            // Enable reveal button when both choices are made
            document.getElementById('revealBtn').disabled = !(choice1 && choice2);
        }

        function revealParadox() {
            const resultsBox = document.getElementById('resultsBox');
            const choicesSummary = document.getElementById('choicesSummary');
            const paradoxReveal = document.getElementById('paradoxReveal');
            const paradoxText = document.getElementById('paradoxText');

            resultsBox.style.display = 'block';

            // Update stats
            totalResponses++;
            if (choice1 === 'A') countA++;
            if (choice2 === 'D') countD++;

            // Use weighted average with historical data
            const displayA = Math.round((countA / totalResponses * 30 + historicalA * 70) / 100);
            const displayD = Math.round((countD / totalResponses * 30 + historicalD * 70) / 100);

            document.getElementById('statA').textContent = displayA + '%';
            document.getElementById('statD').textContent = displayD + '%';

            choicesSummary.innerHTML = `
                <p>You chose: <strong>Gamble ${choice1}</strong> and <strong>Gamble ${choice2}</strong></p>
            `;

            if (choice1 === 'A' && choice2 === 'D') {
                paradoxReveal.style.display = 'block';
                paradoxText.innerHTML = `
                    <strong>üéØ You demonstrated the Ellsberg Paradox!</strong><br><br>
                    By choosing A, you implied P(black) < 1/3.<br>
                    By choosing D, you implied P(black) + P(yellow) > P(red) + P(yellow).<br><br>
                    But if P(black) < 1/3, then P(yellow) > 1/3, so P(red) + P(yellow) > 2/3 = P(black) + P(yellow).<br><br>
                    <em>Your preferences are logically inconsistent‚Äîbut you're in good company. About 70% of people make the same choices!</em>
                `;
            } else if (choice1 === 'B' && choice2 === 'C') {
                paradoxReveal.style.display = 'block';
                paradoxText.innerHTML = `
                    <strong>üéØ Reverse Ellsberg!</strong><br><br>
                    Interestingly, you're ambiguity-seeking rather than ambiguity-averse. You preferred the gambles with unknown probabilities!
                    This is less common but also leads to inconsistent preferences by the same logic.
                `;
            } else {
                paradoxReveal.style.display = 'block';
                paradoxReveal.style.background = '#dcfce7';
                paradoxReveal.style.borderColor = '#86efac';
                paradoxText.innerHTML = `
                    <strong style="color: #16a34a;">‚úì Consistent Preferences!</strong><br><br>
                    Your choices (${choice1} and ${choice2}) are logically consistent with expected utility theory.
                    You're in the minority‚Äîmost people fall into the paradox!
                `;
            }
        }

        function resetSim() {
            choice1 = null;
            choice2 = null;

            ['gambleA', 'gambleB', 'gambleC', 'gambleD'].forEach(id => {
                document.getElementById(id).classList.remove('selected');
            });

            document.getElementById('resultsBox').style.display = 'none';
            document.getElementById('revealBtn').disabled = true;
        }

        // Initialize
        initUrn();
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
