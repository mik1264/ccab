<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Birthday Paradox - 23 People, 50% Match | Surprising Paradoxes #662</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #1a1a2e 100%);
            min-height: 100vh;
            color: #e2e8f0;
            overflow-x: hidden;
        }
        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #f472b6;
            text-decoration: none;
            font-size: 0.9rem;
            z-index: 100;
            padding: 8px 16px;
            background: rgba(0,0,0,0.4);
            border-radius: 20px;
            transition: all 0.3s;
        }
        .back-link:hover { background: rgba(244,114,182,0.2); }

        header {
            text-align: center;
            padding: 60px 20px 30px;
        }
        h1 {
            font-size: 2.8rem;
            background: linear-gradient(135deg, #f472b6, #818cf8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        .subtitle {
            color: #94a3b8;
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px 40px;
        }

        .hook {
            background: linear-gradient(135deg, rgba(244,114,182,0.15), rgba(129,140,248,0.15));
            border: 2px solid rgba(244,114,182,0.3);
            border-radius: 16px;
            padding: 25px;
            text-align: center;
            margin-bottom: 30px;
        }
        .hook h2 {
            font-size: 1.5rem;
            color: #f472b6;
            margin-bottom: 10px;
        }
        .hook p {
            color: #f9a8d4;
            font-size: 1rem;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 380px;
            gap: 30px;
        }

        .visualization {
            background: rgba(15,23,42,0.8);
            border-radius: 16px;
            padding: 25px;
            border: 1px solid rgba(244,114,182,0.2);
        }
        .visualization h3 {
            color: #f472b6;
            margin-bottom: 20px;
            text-align: center;
        }

        .people-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
            min-height: 300px;
        }

        .person {
            background: rgba(30,41,59,0.5);
            border-radius: 12px;
            padding: 10px;
            text-align: center;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        .person.match {
            background: rgba(34,197,94,0.2);
            border-color: #22c55e;
            animation: pulse-match 1s ease infinite;
        }
        @keyframes pulse-match {
            0%, 100% { box-shadow: 0 0 0 0 rgba(34,197,94,0.4); }
            50% { box-shadow: 0 0 20px 5px rgba(34,197,94,0.2); }
        }
        .person-icon {
            font-size: 1.8rem;
            margin-bottom: 5px;
        }
        .person-birthday {
            font-size: 0.7rem;
            color: #94a3b8;
        }
        .person.match .person-birthday {
            color: #22c55e;
            font-weight: 600;
        }

        .match-display {
            background: rgba(34,197,94,0.1);
            border: 1px solid rgba(34,197,94,0.3);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            margin-top: 15px;
            min-height: 60px;
        }
        .match-display.has-match {
            background: rgba(34,197,94,0.2);
        }
        .match-display h4 {
            color: #22c55e;
            margin-bottom: 5px;
        }
        .match-display p {
            color: #86efac;
            font-size: 0.9rem;
        }

        .controls-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .panel {
            background: rgba(15,23,42,0.8);
            border-radius: 16px;
            padding: 20px;
            border: 1px solid rgba(244,114,182,0.2);
        }
        .panel h3 {
            color: #f472b6;
            font-size: 1rem;
            margin-bottom: 15px;
        }

        .slider-control {
            margin-bottom: 20px;
        }
        .slider-control label {
            display: block;
            color: #94a3b8;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }
        .slider-row {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .slider-row input[type="range"] {
            flex: 1;
            height: 8px;
            -webkit-appearance: none;
            background: linear-gradient(90deg, #818cf8, #f472b6);
            border-radius: 4px;
        }
        .slider-row input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            cursor: grab;
        }
        .slider-value {
            background: rgba(244,114,182,0.2);
            padding: 8px 15px;
            border-radius: 8px;
            font-weight: 600;
            color: #f472b6;
            min-width: 60px;
            text-align: center;
        }

        .btn-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .btn {
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        .btn:hover { transform: translateY(-2px); }
        .btn-generate {
            background: linear-gradient(135deg, #f472b6, #ec4899);
            color: white;
        }
        .btn-simulate {
            background: linear-gradient(135deg, #818cf8, #6366f1);
            color: white;
        }
        .btn-add {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: white;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }
        .stat-box {
            background: rgba(30,41,59,0.5);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        .stat-box .value {
            font-size: 1.8rem;
            font-weight: bold;
        }
        .stat-box.pink .value { color: #f472b6; }
        .stat-box.purple .value { color: #818cf8; }
        .stat-box.green .value { color: #22c55e; }
        .stat-box.yellow .value { color: #fbbf24; }
        .stat-box .label {
            font-size: 0.75rem;
            color: #64748b;
            margin-top: 5px;
        }

        .probability-display {
            background: linear-gradient(135deg, rgba(244,114,182,0.1), rgba(129,140,248,0.1));
            border: 1px solid rgba(244,114,182,0.3);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            margin-top: 15px;
        }
        .prob-label {
            color: #94a3b8;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }
        .prob-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: #f472b6;
        }
        .prob-formula {
            font-size: 0.8rem;
            color: #64748b;
            margin-top: 10px;
            font-family: 'Courier New', monospace;
        }

        .simulation-results {
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
        }
        .sim-stat {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(244,114,182,0.1);
        }
        .sim-stat:last-child { border-bottom: none; }
        .sim-stat .label { color: #94a3b8; }
        .sim-stat .value { font-weight: 600; color: #f472b6; }

        .chart-container {
            background: rgba(15,23,42,0.8);
            border-radius: 16px;
            padding: 25px;
            border: 1px solid rgba(244,114,182,0.2);
            margin-top: 30px;
        }
        .chart-container h3 {
            color: #f472b6;
            margin-bottom: 20px;
            text-align: center;
        }
        #probChart {
            width: 100%;
            height: 300px;
            background: rgba(0,0,0,0.2);
            border-radius: 12px;
        }

        .explanation {
            margin-top: 30px;
        }
        .explanation-card {
            background: rgba(15,23,42,0.8);
            border-radius: 16px;
            padding: 25px;
            border: 1px solid rgba(244,114,182,0.2);
            margin-bottom: 20px;
        }
        .explanation-card h3 {
            color: #f472b6;
            margin-bottom: 15px;
        }
        .explanation-card p {
            color: #94a3b8;
            line-height: 1.8;
            margin-bottom: 12px;
        }

        .pairs-insight {
            background: linear-gradient(135deg, rgba(129,140,248,0.15), rgba(99,102,241,0.15));
            border: 2px solid rgba(129,140,248,0.3);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            margin: 15px 0;
        }
        .pairs-insight h4 {
            color: #818cf8;
            margin-bottom: 10px;
        }
        .pairs-formula {
            font-size: 1.5rem;
            color: #a5b4fc;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
        }
        .pairs-insight p {
            color: #c7d2fe;
        }

        .milestones {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        .milestone {
            background: rgba(30,41,59,0.5);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        .milestone .people {
            font-size: 1.5rem;
            font-weight: bold;
            color: #f472b6;
        }
        .milestone .prob {
            font-size: 1.1rem;
            color: #22c55e;
            margin: 5px 0;
        }
        .milestone .pairs {
            font-size: 0.75rem;
            color: #64748b;
        }

        @media (max-width: 1000px) {
            .main-grid { grid-template-columns: 1fr; }
            .milestones { grid-template-columns: repeat(2, 1fr); }
            h1 { font-size: 2rem; }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back to Paradoxes</a>

    <header>
        <h1>The Birthday Paradox</h1>
        <p class="subtitle">In a room of just 23 people, there's a 50% chance two share a birthday!</p>
    </header>

    <div class="container">
        <div class="hook">
            <h2>23 PEOPLE = 50% CHANCE OF MATCH!</h2>
            <p>Most people guess you'd need ~183 people (half of 365). But 23 is enough! The secret: it's not about matching YOUR birthday‚Äîit's about ANY pair matching. 23 people = 253 pairs!</p>
        </div>

        <div class="main-grid">
            <div class="visualization">
                <h3>The Room (<span id="peopleInRoom">0</span> people)</h3>
                <div class="people-grid" id="peopleGrid"></div>
                <div class="match-display" id="matchDisplay">
                    <p style="color: #64748b;">Generate a room to see birthday matches</p>
                </div>
            </div>

            <div class="controls-panel">
                <div class="panel">
                    <h3>Room Size</h3>
                    <div class="slider-control">
                        <label>Number of people in the room</label>
                        <div class="slider-row">
                            <input type="range" id="peopleSlider" min="2" max="70" value="23">
                            <span class="slider-value" id="sliderValue">23</span>
                        </div>
                    </div>
                    <div class="btn-group">
                        <button class="btn btn-generate" id="generateBtn">Generate Room</button>
                        <button class="btn btn-add" id="addOneBtn">Add One Person</button>
                        <button class="btn btn-simulate" id="simulateBtn">Run 1000 Simulations</button>
                    </div>
                </div>

                <div class="panel">
                    <h3>Statistics</h3>
                    <div class="stats-grid">
                        <div class="stat-box pink">
                            <div class="value" id="numPeople">23</div>
                            <div class="label">People</div>
                        </div>
                        <div class="stat-box purple">
                            <div class="value" id="numPairs">253</div>
                            <div class="label">Unique Pairs</div>
                        </div>
                        <div class="stat-box green">
                            <div class="value" id="matchesFound">0</div>
                            <div class="label">Matches Found</div>
                        </div>
                        <div class="stat-box yellow">
                            <div class="value" id="matchingPairs">0</div>
                            <div class="label">Matching Pairs</div>
                        </div>
                    </div>

                    <div class="probability-display">
                        <div class="prob-label">Theoretical Probability of Match</div>
                        <div class="prob-value" id="theoreticalProb">50.7%</div>
                        <div class="prob-formula">P = 1 - (365!/((365-n)! √ó 365‚Åø))</div>
                    </div>

                    <div class="simulation-results" id="simResults" style="display: none;">
                        <div class="sim-stat">
                            <span class="label">Simulations Run</span>
                            <span class="value" id="simCount">0</span>
                        </div>
                        <div class="sim-stat">
                            <span class="label">Rooms with Match</span>
                            <span class="value" id="simMatches">0</span>
                        </div>
                        <div class="sim-stat">
                            <span class="label">Observed Probability</span>
                            <span class="value" id="simProb">0%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="chart-container">
            <h3>Probability vs Number of People</h3>
            <canvas id="probChart"></canvas>
        </div>

        <div class="explanation">
            <div class="explanation-card">
                <h3>Why It Works: The Power of Pairs</h3>
                <p>The key insight is that we're not asking "Does someone share MY birthday?" We're asking "Do ANY two people share a birthday?" This is a much easier condition to satisfy!</p>

                <div class="pairs-insight">
                    <h4>Number of Unique Pairs</h4>
                    <div class="pairs-formula">C(n,2) = n(n-1)/2</div>
                    <p>With 23 people: 23 √ó 22 / 2 = <strong>253 pairs</strong></p>
                    <p>Each pair has a 1/365 chance of matching. With 253 chances, matches become likely!</p>
                </div>

                <div class="milestones">
                    <div class="milestone">
                        <div class="people">23</div>
                        <div class="prob">50.7%</div>
                        <div class="pairs">253 pairs</div>
                    </div>
                    <div class="milestone">
                        <div class="people">32</div>
                        <div class="prob">75.3%</div>
                        <div class="pairs">496 pairs</div>
                    </div>
                    <div class="milestone">
                        <div class="people">50</div>
                        <div class="prob">97.0%</div>
                        <div class="pairs">1,225 pairs</div>
                    </div>
                    <div class="milestone">
                        <div class="people">70</div>
                        <div class="prob">99.9%</div>
                        <div class="pairs">2,415 pairs</div>
                    </div>
                </div>
            </div>

            <div class="explanation-card">
                <h3>The Mathematics</h3>
                <p>It's easier to calculate P(no match) and subtract from 1:</p>
                <p><strong>Person 1:</strong> Can have any birthday (365/365 = 100%)</p>
                <p><strong>Person 2:</strong> Must differ from person 1 (364/365 = 99.7%)</p>
                <p><strong>Person 3:</strong> Must differ from both (363/365 = 99.5%)</p>
                <p>...and so on. Multiply all these fractions together!</p>
                <p><strong>P(no match with 23 people) = 365/365 √ó 364/365 √ó 363/365 √ó ... √ó 343/365 ‚âà 0.493</strong></p>
                <p><strong>P(at least one match) = 1 - 0.493 = 0.507 = 50.7%</strong></p>
            </div>

            <div class="explanation-card">
                <h3>Real-World Applications</h3>
                <p><strong>Cryptography:</strong> The "birthday attack" exploits this principle to find hash collisions faster than brute force.</p>
                <p><strong>DNA Forensics:</strong> Calculating the probability of matching genetic markers between unrelated individuals.</p>
                <p><strong>Quality Control:</strong> Detecting duplicate records in databases.</p>
                <p><strong>Party Trick:</strong> Bet someone that in a room of 30+ people, two share a birthday. You'll win ~70% of the time!</p>
            </div>
        </div>
    </div>

    <script>
        const peopleGrid = document.getElementById('peopleGrid');
        const matchDisplay = document.getElementById('matchDisplay');
        const peopleSlider = document.getElementById('peopleSlider');
        const sliderValue = document.getElementById('sliderValue');

        const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
        const daysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];

        let currentPeople = [];

        function randomBirthday() {
            const dayOfYear = Math.floor(Math.random() * 365);
            let month = 0;
            let day = dayOfYear;
            while (day >= daysInMonth[month]) {
                day -= daysInMonth[month];
                month++;
            }
            return { month, day: day + 1, dayOfYear };
        }

        function formatBirthday(b) {
            return `${months[b.month]} ${b.day}`;
        }

        function calculatePairs(n) {
            return n * (n - 1) / 2;
        }

        function theoreticalProbability(n) {
            if (n > 365) return 1;
            let pNoMatch = 1;
            for (let i = 0; i < n; i++) {
                pNoMatch *= (365 - i) / 365;
            }
            return 1 - pNoMatch;
        }

        function findMatches(people) {
            const matches = new Map();
            const matchingIndices = new Set();

            for (let i = 0; i < people.length; i++) {
                for (let j = i + 1; j < people.length; j++) {
                    if (people[i].dayOfYear === people[j].dayOfYear) {
                        matchingIndices.add(i);
                        matchingIndices.add(j);
                        const key = people[i].dayOfYear;
                        if (!matches.has(key)) {
                            matches.set(key, []);
                        }
                        matches.set(key, [...new Set([...matches.get(key), i, j])]);
                    }
                }
            }

            return { matches, matchingIndices };
        }

        function generateRoom(n) {
            currentPeople = [];
            for (let i = 0; i < n; i++) {
                currentPeople.push(randomBirthday());
            }
            renderRoom();
        }

        function renderRoom() {
            const n = currentPeople.length;
            const { matches, matchingIndices } = findMatches(currentPeople);

            peopleGrid.innerHTML = currentPeople.map((person, i) => `
                <div class="person ${matchingIndices.has(i) ? 'match' : ''}">
                    <div class="person-icon">${matchingIndices.has(i) ? 'üéÇ' : 'üë§'}</div>
                    <div class="person-birthday">${formatBirthday(person)}</div>
                </div>
            `).join('');

            document.getElementById('peopleInRoom').textContent = n;

            // Count matching pairs
            let totalMatchingPairs = 0;
            matches.forEach((indices) => {
                totalMatchingPairs += calculatePairs(indices.length);
            });

            // Update stats
            document.getElementById('numPeople').textContent = n;
            document.getElementById('numPairs').textContent = calculatePairs(n).toLocaleString();
            document.getElementById('matchesFound').textContent = matches.size;
            document.getElementById('matchingPairs').textContent = totalMatchingPairs;
            document.getElementById('theoreticalProb').textContent = (theoreticalProbability(n) * 100).toFixed(1) + '%';

            // Update match display
            if (matches.size > 0) {
                let matchText = [];
                matches.forEach((indices, dayOfYear) => {
                    const birthday = currentPeople[indices[0]];
                    matchText.push(`${formatBirthday(birthday)} (${indices.length} people)`);
                });
                matchDisplay.innerHTML = `<h4>üéâ Match${matches.size > 1 ? 'es' : ''} Found!</h4><p>${matchText.join(', ')}</p>`;
                matchDisplay.classList.add('has-match');
            } else {
                matchDisplay.innerHTML = `<p style="color: #94a3b8;">No matches in this room</p>`;
                matchDisplay.classList.remove('has-match');
            }
        }

        function runSimulation(n, trials) {
            let matchCount = 0;
            for (let t = 0; t < trials; t++) {
                const people = [];
                const seen = new Set();
                let hasMatch = false;

                for (let i = 0; i < n && !hasMatch; i++) {
                    const day = Math.floor(Math.random() * 365);
                    if (seen.has(day)) {
                        hasMatch = true;
                    }
                    seen.add(day);
                }
                if (hasMatch) matchCount++;
            }
            return matchCount;
        }

        function drawChart() {
            const canvas = document.getElementById('probChart');
            const ctx = canvas.getContext('2d');
            canvas.width = canvas.offsetWidth;
            canvas.height = 300;

            const w = canvas.width;
            const h = canvas.height;
            const padding = 50;

            ctx.clearRect(0, 0, w, h);

            // Draw axes
            ctx.strokeStyle = '#475569';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(padding, padding);
            ctx.lineTo(padding, h - padding);
            ctx.lineTo(w - padding, h - padding);
            ctx.stroke();

            // Draw probability curve
            ctx.beginPath();
            ctx.strokeStyle = '#f472b6';
            ctx.lineWidth = 3;

            for (let n = 1; n <= 70; n++) {
                const prob = theoreticalProbability(n);
                const x = padding + (n / 70) * (w - 2 * padding);
                const y = h - padding - prob * (h - 2 * padding);

                if (n === 1) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.stroke();

            // Draw 50% line
            ctx.strokeStyle = '#22c55e';
            ctx.lineWidth = 1;
            ctx.setLineDash([5, 5]);
            const y50 = h - padding - 0.5 * (h - 2 * padding);
            ctx.beginPath();
            ctx.moveTo(padding, y50);
            ctx.lineTo(w - padding, y50);
            ctx.stroke();

            // Draw 23 people marker
            const x23 = padding + (23 / 70) * (w - 2 * padding);
            ctx.beginPath();
            ctx.moveTo(x23, h - padding);
            ctx.lineTo(x23, y50);
            ctx.stroke();
            ctx.setLineDash([]);

            // Labels
            ctx.fillStyle = '#94a3b8';
            ctx.font = '12px sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('Number of People', w / 2, h - 10);
            ctx.fillText('23', x23, h - padding + 20);
            ctx.fillText('70', w - padding, h - padding + 20);

            ctx.save();
            ctx.translate(15, h / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('Probability', 0, 0);
            ctx.restore();

            ctx.fillText('50%', padding - 25, y50 + 4);
            ctx.fillText('100%', padding - 25, padding + 4);

            // Highlight point at current slider value
            const n = parseInt(peopleSlider.value);
            const prob = theoreticalProbability(n);
            const xCurrent = padding + (n / 70) * (w - 2 * padding);
            const yCurrent = h - padding - prob * (h - 2 * padding);

            ctx.beginPath();
            ctx.arc(xCurrent, yCurrent, 8, 0, Math.PI * 2);
            ctx.fillStyle = '#818cf8';
            ctx.fill();
        }

        peopleSlider.addEventListener('input', () => {
            const n = parseInt(peopleSlider.value);
            sliderValue.textContent = n;
            document.getElementById('numPeople').textContent = n;
            document.getElementById('numPairs').textContent = calculatePairs(n).toLocaleString();
            document.getElementById('theoreticalProb').textContent = (theoreticalProbability(n) * 100).toFixed(1) + '%';
            drawChart();
        });

        document.getElementById('generateBtn').addEventListener('click', () => {
            generateRoom(parseInt(peopleSlider.value));
        });

        document.getElementById('addOneBtn').addEventListener('click', () => {
            currentPeople.push(randomBirthday());
            peopleSlider.value = currentPeople.length;
            sliderValue.textContent = currentPeople.length;
            renderRoom();
            drawChart();
        });

        document.getElementById('simulateBtn').addEventListener('click', () => {
            const n = parseInt(peopleSlider.value);
            const trials = 1000;
            const matchCount = runSimulation(n, trials);

            document.getElementById('simResults').style.display = 'block';
            document.getElementById('simCount').textContent = trials.toLocaleString();
            document.getElementById('simMatches').textContent = matchCount.toLocaleString();
            document.getElementById('simProb').textContent = (matchCount / trials * 100).toFixed(1) + '%';
        });

        // Initialize
        generateRoom(23);
        drawChart();
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
