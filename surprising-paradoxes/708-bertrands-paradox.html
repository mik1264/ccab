<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>708 - Bertrand's Paradox | Surprising Paradoxes | CCAB</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #e8e8e8;
            padding: 20px;
        }
        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #64b5f6;
            text-decoration: none;
            font-size: 14px;
            opacity: 0.8;
            z-index: 100;
        }
        .back-link:hover { opacity: 1; }
        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding-top: 40px;
        }
        h1 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #e74c3c, #9b59b6, #3498db);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .subtitle {
            text-align: center;
            color: #aaa;
            font-size: 1.1rem;
            margin-bottom: 30px;
        }
        .question-section {
            background: rgba(52, 152, 219, 0.15);
            border: 1px solid rgba(52, 152, 219, 0.3);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            text-align: center;
        }
        .question-section h2 {
            color: #3498db;
            font-size: 1.4rem;
            margin-bottom: 15px;
        }
        .question-section p {
            font-size: 1.15rem;
            line-height: 1.6;
        }
        .answers-preview {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        .answer-chip {
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 1.2rem;
        }
        .answer-chip.red { background: rgba(231, 76, 60, 0.3); color: #e74c3c; }
        .answer-chip.purple { background: rgba(155, 89, 182, 0.3); color: #9b59b6; }
        .answer-chip.blue { background: rgba(52, 152, 219, 0.3); color: #3498db; }
        .main-section {
            background: rgba(255,255,255,0.05);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 30px;
        }
        .tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        .tab {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: rgba(255,255,255,0.1);
            color: #e8e8e8;
        }
        .tab:hover { background: rgba(255,255,255,0.2); }
        .tab.active.method1 { background: #e74c3c; color: white; }
        .tab.active.method2 { background: #9b59b6; color: white; }
        .tab.active.method3 { background: #3498db; color: white; }
        .method-content {
            display: none;
        }
        .method-content.active { display: block; }
        .visualization-area {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 25px;
        }
        @media (max-width: 800px) {
            .visualization-area { grid-template-columns: 1fr; }
        }
        .canvas-container {
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        canvas {
            max-width: 100%;
        }
        .stats-panel {
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
            padding: 20px;
        }
        .method-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            text-align: center;
        }
        .method1 .method-title { color: #e74c3c; }
        .method2 .method-title { color: #9b59b6; }
        .method3 .method-title { color: #3498db; }
        .method-description {
            font-size: 0.95rem;
            line-height: 1.6;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
        }
        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .stat-row:last-child { border-bottom: none; }
        .stat-value {
            font-weight: bold;
        }
        .expected-box {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        .method1 .expected-box { background: rgba(231, 76, 60, 0.2); border: 1px solid rgba(231, 76, 60, 0.5); }
        .method2 .expected-box { background: rgba(155, 89, 182, 0.2); border: 1px solid rgba(155, 89, 182, 0.5); }
        .method3 .expected-box { background: rgba(52, 152, 219, 0.2); border: 1px solid rgba(52, 152, 219, 0.5); }
        .expected-label { font-size: 0.9rem; color: #aaa; }
        .expected-value {
            font-size: 2rem;
            font-weight: bold;
        }
        .method1 .expected-value { color: #e74c3c; }
        .method2 .expected-value { color: #9b59b6; }
        .method3 .expected-value { color: #3498db; }
        .controls {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        .btn {
            padding: 10px 20px;
            font-size: 0.9rem;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .btn-primary {
            background: linear-gradient(135deg, #e74c3c, #9b59b6);
            color: white;
        }
        .btn-primary:hover { transform: scale(1.05); }
        .btn-secondary {
            background: rgba(100, 181, 246, 0.2);
            border: 2px solid #64b5f6;
            color: #64b5f6;
        }
        .comparison-section {
            background: rgba(255,255,255,0.05);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 30px;
        }
        .comparison-section h3 {
            color: #f1c40f;
            margin-bottom: 20px;
            text-align: center;
        }
        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }
        @media (max-width: 700px) {
            .comparison-grid { grid-template-columns: 1fr; }
        }
        .comparison-card {
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }
        .comparison-card.m1 { background: rgba(231, 76, 60, 0.15); border: 2px solid rgba(231, 76, 60, 0.5); }
        .comparison-card.m2 { background: rgba(155, 89, 182, 0.15); border: 2px solid rgba(155, 89, 182, 0.5); }
        .comparison-card.m3 { background: rgba(52, 152, 219, 0.15); border: 2px solid rgba(52, 152, 219, 0.5); }
        .comparison-card h4 {
            margin-bottom: 10px;
        }
        .comparison-card.m1 h4 { color: #e74c3c; }
        .comparison-card.m2 h4 { color: #9b59b6; }
        .comparison-card.m3 h4 { color: #3498db; }
        .comparison-prob {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 15px 0;
        }
        .comparison-card.m1 .comparison-prob { color: #e74c3c; }
        .comparison-card.m2 .comparison-prob { color: #9b59b6; }
        .comparison-card.m3 .comparison-prob { color: #3498db; }
        .explanation-section {
            background: rgba(255,255,255,0.05);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 30px;
        }
        .explanation-section h3 {
            color: #f1c40f;
            margin-bottom: 15px;
        }
        .explanation-section p {
            line-height: 1.7;
            margin-bottom: 12px;
        }
        .resolution-box {
            background: rgba(46, 204, 113, 0.1);
            border: 1px solid rgba(46, 204, 113, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }
        .resolution-box h4 {
            color: #2ecc71;
            margin-bottom: 10px;
        }
        .history {
            background: rgba(155, 89, 182, 0.1);
            border-left: 4px solid #9b59b6;
            padding: 20px;
            margin-top: 30px;
            border-radius: 0 12px 12px 0;
        }
        .history h4 {
            color: #9b59b6;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">← Back to Paradoxes</a>

    <div class="container">
        <h1>Bertrand's Paradox</h1>
        <p class="subtitle">Joseph Bertrand (1889) • The Ambiguity of "Random"</p>

        <div class="question-section">
            <h2>The Question</h2>
            <p>Draw a <strong>random chord</strong> on a circle.<br>
            What's the probability it's longer than the side of an inscribed equilateral triangle?</p>
            <div class="answers-preview">
                <span class="answer-chip red">1/3</span>
                <span class="answer-chip purple">1/2</span>
                <span class="answer-chip blue">1/4</span>
            </div>
            <p style="margin-top: 15px; color: #f1c40f;"><strong>All three answers are correct!</strong> It depends on what "random" means.</p>
        </div>

        <div class="main-section">
            <div class="tabs">
                <button class="tab active method1" onclick="showMethod(1)">Method 1: Random Endpoints</button>
                <button class="tab method2" onclick="showMethod(2)">Method 2: Random Radius</button>
                <button class="tab method3" onclick="showMethod(3)">Method 3: Random Midpoint</button>
            </div>

            <!-- Method 1 -->
            <div class="method-content method1 active" id="method1">
                <div class="visualization-area">
                    <div class="canvas-container">
                        <canvas id="canvas1" width="350" height="350"></canvas>
                    </div>
                    <div class="stats-panel">
                        <div class="method-title">Random Endpoints</div>
                        <div class="method-description">
                            Fix one endpoint on the circle. Choose the second endpoint uniformly at random on the circumference. The chord is long when the second point falls in a 120° arc.
                        </div>
                        <div class="stat-row">
                            <span>Chords drawn</span>
                            <span class="stat-value" id="count1">0</span>
                        </div>
                        <div class="stat-row">
                            <span>Long chords</span>
                            <span class="stat-value" id="long1">0</span>
                        </div>
                        <div class="stat-row">
                            <span>Observed ratio</span>
                            <span class="stat-value" id="ratio1">0%</span>
                        </div>
                        <div class="expected-box">
                            <div class="expected-label">Expected Probability</div>
                            <div class="expected-value">1/3 ≈ 33.3%</div>
                        </div>
                        <div class="controls">
                            <button class="btn btn-primary" onclick="drawChords(1, 1)">Draw 1</button>
                            <button class="btn btn-secondary" onclick="drawChords(1, 100)">Draw 100</button>
                            <button class="btn btn-secondary" onclick="resetMethod(1)">Reset</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Method 2 -->
            <div class="method-content method2" id="method2">
                <div class="visualization-area">
                    <div class="canvas-container">
                        <canvas id="canvas2" width="350" height="350"></canvas>
                    </div>
                    <div class="stats-panel">
                        <div class="method-title">Random Radius Point</div>
                        <div class="method-description">
                            Choose a random point on a radius. Draw the chord perpendicular to the radius at that point. The chord is long when the point is in the inner half of the radius.
                        </div>
                        <div class="stat-row">
                            <span>Chords drawn</span>
                            <span class="stat-value" id="count2">0</span>
                        </div>
                        <div class="stat-row">
                            <span>Long chords</span>
                            <span class="stat-value" id="long2">0</span>
                        </div>
                        <div class="stat-row">
                            <span>Observed ratio</span>
                            <span class="stat-value" id="ratio2">0%</span>
                        </div>
                        <div class="expected-box">
                            <div class="expected-label">Expected Probability</div>
                            <div class="expected-value">1/2 = 50%</div>
                        </div>
                        <div class="controls">
                            <button class="btn btn-primary" onclick="drawChords(2, 1)">Draw 1</button>
                            <button class="btn btn-secondary" onclick="drawChords(2, 100)">Draw 100</button>
                            <button class="btn btn-secondary" onclick="resetMethod(2)">Reset</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Method 3 -->
            <div class="method-content method3" id="method3">
                <div class="visualization-area">
                    <div class="canvas-container">
                        <canvas id="canvas3" width="350" height="350"></canvas>
                    </div>
                    <div class="stats-panel">
                        <div class="method-title">Random Midpoint</div>
                        <div class="method-description">
                            Choose a random point inside the circle. Draw the unique chord with this point as its midpoint. The chord is long when the point is inside an inner circle of radius r/2.
                        </div>
                        <div class="stat-row">
                            <span>Chords drawn</span>
                            <span class="stat-value" id="count3">0</span>
                        </div>
                        <div class="stat-row">
                            <span>Long chords</span>
                            <span class="stat-value" id="long3">0</span>
                        </div>
                        <div class="stat-row">
                            <span>Observed ratio</span>
                            <span class="stat-value" id="ratio3">0%</span>
                        </div>
                        <div class="expected-box">
                            <div class="expected-label">Expected Probability</div>
                            <div class="expected-value">1/4 = 25%</div>
                        </div>
                        <div class="controls">
                            <button class="btn btn-primary" onclick="drawChords(3, 1)">Draw 1</button>
                            <button class="btn btn-secondary" onclick="drawChords(3, 100)">Draw 100</button>
                            <button class="btn btn-secondary" onclick="resetMethod(3)">Reset</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="comparison-section">
            <h3>Side-by-Side Comparison</h3>
            <div class="comparison-grid">
                <div class="comparison-card m1">
                    <h4>Method 1</h4>
                    <p>Random point on circumference</p>
                    <div class="comparison-prob">1/3</div>
                    <p style="font-size: 0.85rem; color: #aaa;">Long arc is 120° of 360°</p>
                </div>
                <div class="comparison-card m2">
                    <h4>Method 2</h4>
                    <p>Random point on radius</p>
                    <div class="comparison-prob">1/2</div>
                    <p style="font-size: 0.85rem; color: #aaa;">Inner half of radius works</p>
                </div>
                <div class="comparison-card m3">
                    <h4>Method 3</h4>
                    <p>Random point in circle</p>
                    <div class="comparison-prob">1/4</div>
                    <p style="font-size: 0.85rem; color: #aaa;">Inner circle is 1/4 the area</p>
                </div>
            </div>
        </div>

        <div class="explanation-section">
            <h3>Why Three Different Answers?</h3>
            <p>The phrase <strong>"random chord"</strong> is ambiguous! Each method defines a different probability distribution over the space of all possible chords.</p>
            <p>In the 19th century, mathematicians assumed there was one "natural" answer. Bertrand showed this assumption was naive — without specifying <em>how</em> the randomness is generated, the question has no unique answer.</p>
            <p>This paradox revolutionized probability theory by highlighting the need for <strong>precise problem specification</strong>. It's not enough to say "random" — you must say <em>what</em> is uniformly distributed.</p>

            <div class="resolution-box">
                <h4>Jaynes' Resolution (1973)</h4>
                <p>Physicist E.T. Jaynes argued that <strong>Method 2 is the "correct" answer</strong> if we add reasonable constraints:</p>
                <ul style="margin-left: 20px; line-height: 1.8;">
                    <li><strong>Scale invariance:</strong> The answer shouldn't change if we resize the circle</li>
                    <li><strong>Translation invariance:</strong> The answer shouldn't change if we move the circle</li>
                    <li><strong>Rotation invariance:</strong> The answer shouldn't change if we rotate the circle</li>
                </ul>
                <p style="margin-top: 10px;">Only Method 2 satisfies all three! But without these constraints, all three methods remain valid.</p>
            </div>
        </div>

        <div class="history">
            <h4>Historical Note</h4>
            <p>French mathematician Joseph Bertrand presented this paradox in his 1889 book <em>Calcul des probabilités</em>. It caused a crisis in classical probability theory, which relied on the "principle of indifference" (if we have no reason to favor one outcome, all outcomes are equally likely). Bertrand showed that this principle is ambiguous when dealing with continuous distributions — there are multiple ways to be "equally likely," and they give different answers.</p>
        </div>
    </div>

    <script>
        const canvases = {};
        const contexts = {};
        const stats = {
            1: { count: 0, long: 0 },
            2: { count: 0, long: 0 },
            3: { count: 0, long: 0 }
        };

        const cx = 175, cy = 175, radius = 140;
        const triangleSide = radius * Math.sqrt(3); // Side length of inscribed equilateral triangle

        function initCanvas(method) {
            const canvas = document.getElementById('canvas' + method);
            const ctx = canvas.getContext('2d');
            canvases[method] = canvas;
            contexts[method] = ctx;
            drawBase(method);
        }

        function drawBase(method) {
            const ctx = contexts[method];
            ctx.clearRect(0, 0, 350, 350);

            // Draw circle
            ctx.beginPath();
            ctx.arc(cx, cy, radius, 0, Math.PI * 2);
            ctx.strokeStyle = '#64b5f6';
            ctx.lineWidth = 2;
            ctx.stroke();

            // Draw inscribed equilateral triangle
            ctx.beginPath();
            for (let i = 0; i < 3; i++) {
                const angle = (i * 2 * Math.PI / 3) - Math.PI / 2;
                const x = cx + radius * Math.cos(angle);
                const y = cy + radius * Math.sin(angle);
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.closePath();
            ctx.strokeStyle = 'rgba(241, 196, 15, 0.5)';
            ctx.lineWidth = 2;
            ctx.stroke();

            // Method-specific guides
            if (method === 2) {
                // Draw a reference radius
                ctx.beginPath();
                ctx.moveTo(cx, cy);
                ctx.lineTo(cx + radius, cy);
                ctx.strokeStyle = 'rgba(155, 89, 182, 0.3)';
                ctx.lineWidth = 1;
                ctx.stroke();

                // Mark the halfway point
                ctx.beginPath();
                ctx.arc(cx + radius/2, cy, 4, 0, Math.PI * 2);
                ctx.fillStyle = '#9b59b6';
                ctx.fill();
            }

            if (method === 3) {
                // Draw inner circle (radius/2)
                ctx.beginPath();
                ctx.arc(cx, cy, radius/2, 0, Math.PI * 2);
                ctx.strokeStyle = 'rgba(52, 152, 219, 0.3)';
                ctx.lineWidth = 1;
                ctx.setLineDash([5, 5]);
                ctx.stroke();
                ctx.setLineDash([]);
            }
        }

        function drawChord(method, isLong) {
            const ctx = contexts[method];
            let x1, y1, x2, y2;

            if (method === 1) {
                // Random endpoints on circumference
                const angle1 = 0; // Fix first point at top
                const angle2 = Math.random() * 2 * Math.PI;

                x1 = cx + radius * Math.cos(angle1);
                y1 = cy + radius * Math.sin(angle1);
                x2 = cx + radius * Math.cos(angle2);
                y2 = cy + radius * Math.sin(angle2);
            } else if (method === 2) {
                // Random point on radius, chord perpendicular
                const d = Math.random() * radius; // Distance from center
                const angle = Math.random() * 2 * Math.PI; // Random radius direction

                // Point on radius
                const px = cx + d * Math.cos(angle);
                const py = cy + d * Math.sin(angle);

                // Chord perpendicular to radius
                const halfChordLength = Math.sqrt(radius * radius - d * d);
                const perpAngle = angle + Math.PI / 2;

                x1 = px + halfChordLength * Math.cos(perpAngle);
                y1 = py + halfChordLength * Math.sin(perpAngle);
                x2 = px - halfChordLength * Math.cos(perpAngle);
                y2 = py - halfChordLength * Math.sin(perpAngle);
            } else {
                // Random midpoint inside circle
                let mx, my;
                do {
                    mx = cx + (Math.random() * 2 - 1) * radius;
                    my = cy + (Math.random() * 2 - 1) * radius;
                } while ((mx - cx) ** 2 + (my - cy) ** 2 > radius * radius);

                // Distance from center to midpoint
                const d = Math.sqrt((mx - cx) ** 2 + (my - cy) ** 2);

                if (d < 0.001) {
                    // Midpoint at center - any diameter
                    x1 = cx + radius;
                    y1 = cy;
                    x2 = cx - radius;
                    y2 = cy;
                } else {
                    // Chord perpendicular to line from center to midpoint
                    const halfChordLength = Math.sqrt(radius * radius - d * d);
                    const angle = Math.atan2(my - cy, mx - cx);
                    const perpAngle = angle + Math.PI / 2;

                    x1 = mx + halfChordLength * Math.cos(perpAngle);
                    y1 = my + halfChordLength * Math.sin(perpAngle);
                    x2 = mx - halfChordLength * Math.cos(perpAngle);
                    y2 = my - halfChordLength * Math.sin(perpAngle);
                }
            }

            // Calculate chord length
            const chordLength = Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2);
            const longChord = chordLength > triangleSide;

            // Draw chord
            ctx.beginPath();
            ctx.moveTo(x1, y1);
            ctx.lineTo(x2, y2);
            ctx.strokeStyle = longChord ? 'rgba(46, 204, 113, 0.6)' : 'rgba(231, 76, 60, 0.4)';
            ctx.lineWidth = 1;
            ctx.stroke();

            return longChord;
        }

        function drawChords(method, n) {
            for (let i = 0; i < n; i++) {
                const isLong = drawChord(method);
                stats[method].count++;
                if (isLong) stats[method].long++;
            }
            updateStats(method);
        }

        function updateStats(method) {
            document.getElementById('count' + method).textContent = stats[method].count;
            document.getElementById('long' + method).textContent = stats[method].long;
            const ratio = stats[method].count > 0 ?
                (stats[method].long / stats[method].count * 100).toFixed(1) : 0;
            document.getElementById('ratio' + method).textContent = ratio + '%';
        }

        function resetMethod(method) {
            stats[method] = { count: 0, long: 0 };
            updateStats(method);
            drawBase(method);
        }

        function showMethod(method) {
            // Update tabs
            document.querySelectorAll('.tab').forEach(t => {
                t.classList.remove('active');
            });
            document.querySelector(`.tab.method${method}`).classList.add('active');

            // Update content
            document.querySelectorAll('.method-content').forEach(c => {
                c.classList.remove('active');
            });
            document.getElementById('method' + method).classList.add('active');
        }

        // Initialize all canvases
        for (let i = 1; i <= 3; i++) {
            initCanvas(i);
        }
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
