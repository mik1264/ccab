<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>86. The Paradox of Enrichment - Surprising Paradoxes</title>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --prey: #4CAF50;
            --predator: #f44336;
            --bg-dark: #1a2f1a;
            --card-bg: #1e3d1e;
            --text: #e8e8e8;
            --accent: #8BC34A;
            --warning: #FF9800;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, var(--bg-dark), #0d1f0d);
            color: var(--text);
            min-height: 100vh;
        }
        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 30px 20px;
        }
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--accent);
            text-decoration: none;
            font-weight: 500;
            margin-bottom: 20px;
            padding: 10px 20px;
            background: rgba(139,195,74,0.1);
            border-radius: 30px;
            transition: all 0.3s ease;
        }
        .back-link:hover {
            background: rgba(139,195,74,0.2);
        }
        h1 {
            font-family: 'Lora', serif;
            font-size: 2.5rem;
            color: var(--accent);
            margin-bottom: 10px;
            text-align: center;
        }
        .subtitle {
            text-align: center;
            color: #888;
            font-size: 1.2rem;
            margin-bottom: 30px;
        }
        .simulation-container {
            display: grid;
            grid-template-columns: 1fr 320px;
            gap: 25px;
            margin-bottom: 25px;
        }
        @media (max-width: 900px) {
            .simulation-container { grid-template-columns: 1fr; }
        }
        .main-panel {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(139,195,74,0.3);
        }
        .canvas-container {
            position: relative;
            margin-bottom: 20px;
        }
        #simCanvas {
            width: 100%;
            height: 350px;
            background: #0a150a;
            border-radius: 10px;
        }
        .population-display {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        .pop-box {
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }
        .pop-box.prey { border-left: 4px solid var(--prey); }
        .pop-box.predator { border-left: 4px solid var(--predator); }
        .pop-label {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 8px;
            color: #aaa;
        }
        .pop-icon {
            font-size: 1.5rem;
        }
        .pop-value {
            font-size: 2rem;
            font-weight: 700;
        }
        .pop-value.prey { color: var(--prey); }
        .pop-value.predator { color: var(--predator); }
        .status-bar {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }
        .status-label {
            font-size: 0.9rem;
            color: #888;
            margin-bottom: 5px;
        }
        .status-value {
            font-size: 1.2rem;
            font-weight: 700;
        }
        .status-stable { color: var(--prey); }
        .status-oscillating { color: var(--warning); }
        .status-extinction { color: var(--predator); }
        .controls-panel {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(139,195,74,0.3);
        }
        .controls-title {
            font-family: 'Lora', serif;
            color: var(--accent);
            margin-bottom: 20px;
            text-align: center;
        }
        .control-group {
            margin-bottom: 25px;
        }
        .control-label {
            display: block;
            margin-bottom: 8px;
            color: #aaa;
            font-size: 0.9rem;
        }
        .control-value {
            color: var(--accent);
            font-weight: 700;
        }
        input[type="range"] {
            width: 100%;
            height: 10px;
            background: rgba(0,0,0,0.3);
            border-radius: 5px;
            -webkit-appearance: none;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            background: var(--accent);
            border-radius: 50%;
            cursor: pointer;
        }
        .carrying-capacity-visual {
            margin-top: 10px;
            padding: 15px;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
        }
        .capacity-bar {
            height: 20px;
            background: linear-gradient(90deg, var(--prey) 0%, var(--warning) 50%, var(--predator) 100%);
            border-radius: 10px;
            position: relative;
            margin-bottom: 10px;
        }
        .capacity-marker {
            position: absolute;
            top: -5px;
            width: 4px;
            height: 30px;
            background: white;
            transform: translateX(-50%);
            border-radius: 2px;
        }
        .capacity-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
            color: #888;
        }
        .btn-group {
            display: flex;
            gap: 10px;
        }
        .btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-family: inherit;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        .btn-start {
            background: var(--accent);
            color: var(--bg-dark);
        }
        .btn-reset {
            background: rgba(255,255,255,0.1);
            color: white;
        }
        .btn:hover {
            transform: scale(1.02);
        }
        .paradox-indicator {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-weight: 600;
        }
        .paradox-indicator.safe {
            background: rgba(76,175,80,0.2);
            border: 1px solid var(--prey);
            color: var(--prey);
        }
        .paradox-indicator.danger {
            background: rgba(244,67,54,0.2);
            border: 1px solid var(--predator);
            color: var(--predator);
        }
        .content-section {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 25px;
        }
        .content-section h2 {
            font-family: 'Lora', serif;
            color: var(--accent);
            margin-bottom: 15px;
        }
        .content-section p {
            line-height: 1.8;
            color: #bbb;
            margin-bottom: 15px;
        }
        .quote-box {
            background: rgba(0,0,0,0.3);
            border-left: 4px solid var(--warning);
            padding: 20px;
            margin: 20px 0;
            font-style: italic;
        }
        .example-box {
            background: rgba(0,0,0,0.2);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
        }
        .example-box h4 {
            color: var(--accent);
            margin-bottom: 15px;
        }
        .phase-diagram {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 25px 0;
        }
        .phase-card {
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }
        .phase-card h4 {
            margin-bottom: 10px;
        }
        .phase-card.stable { border-top: 4px solid var(--prey); }
        .phase-card.stable h4 { color: var(--prey); }
        .phase-card.oscillate { border-top: 4px solid var(--warning); }
        .phase-card.oscillate h4 { color: var(--warning); }
        .phase-card.extinct { border-top: 4px solid var(--predator); }
        .phase-card.extinct h4 { color: var(--predator); }
        .phase-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">
            <span>‚Üê</span> Back to Paradoxes
        </a>

        <h1>86. The Paradox of Enrichment</h1>
        <p class="subtitle">When more food causes extinction</p>

        <div class="simulation-container">
            <div class="main-panel">
                <div class="canvas-container">
                    <canvas id="simCanvas"></canvas>
                </div>
                
                <div class="population-display">
                    <div class="pop-box prey">
                        <div class="pop-label">
                            <span class="pop-icon">üê∞</span>
                            <span>Prey (Rabbits)</span>
                        </div>
                        <div class="pop-value prey" id="preyPop">500</div>
                    </div>
                    <div class="pop-box predator">
                        <div class="pop-label">
                            <span class="pop-icon">ü¶ä</span>
                            <span>Predators (Foxes)</span>
                        </div>
                        <div class="pop-value predator" id="predPop">50</div>
                    </div>
                </div>

                <div class="status-bar">
                    <div class="status-label">System State</div>
                    <div class="status-value" id="systemState">Stable Equilibrium</div>
                </div>
            </div>

            <div class="controls-panel">
                <h3 class="controls-title">Ecosystem Controls</h3>
                
                <div class="control-group">
                    <label class="control-label">
                        Carrying Capacity (Food): <span class="control-value" id="kValue">500</span>
                    </label>
                    <input type="range" id="carryingCapacity" min="100" max="2000" value="500" step="50">
                    <div class="carrying-capacity-visual">
                        <div class="capacity-bar">
                            <div class="capacity-marker" id="capacityMarker" style="left: 21%;"></div>
                        </div>
                        <div class="capacity-labels">
                            <span>Scarce</span>
                            <span>Abundant</span>
                            <span>Excessive</span>
                        </div>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label">
                        Simulation Speed: <span class="control-value" id="speedValue">1x</span>
                    </label>
                    <input type="range" id="simSpeed" min="1" max="10" value="5">
                </div>

                <div class="btn-group">
                    <button class="btn btn-start" id="startBtn">Start</button>
                    <button class="btn btn-reset" id="resetBtn">Reset</button>
                </div>

                <div class="paradox-indicator safe" id="paradoxIndicator">
                    ‚úì Low K = Stable System
                </div>

                <div style="margin-top: 20px; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 10px; font-size: 0.85rem; color: #aaa;">
                    <strong style="color: white;">Try this:</strong><br>
                    Start with low carrying capacity (stable). Then slowly increase it and watch the system destabilize!
                </div>
            </div>
        </div>

        <div class="content-section">
            <h2>The Paradox</h2>
            <p>
                In 1971, ecologist <strong>Michael Rosenzweig</strong> discovered something deeply counterintuitive: 
                <em>adding more food to an ecosystem can destabilize it and cause extinctions</em>.
            </p>
            <div class="quote-box">
                "By attempting to increase the carrying capacity in an ecosystem, one could fatally imbalance it."
                <div style="margin-top: 10px; color: var(--accent); font-style: normal;">‚Äî The original "paradox"</div>
            </div>
            <p>
                This defies common sense. Shouldn't more food mean more prey, which means more predators, leading 
                to a larger but stable ecosystem? Instead, the mathematics shows that enrichment beyond a critical 
                threshold causes the system to oscillate wildly‚Äîand potentially collapse.
            </p>
        </div>

        <div class="content-section">
            <h2>The Three Phases</h2>
            <div class="phase-diagram">
                <div class="phase-card stable">
                    <div class="phase-icon">üåø</div>
                    <h4>Low Enrichment</h4>
                    <p>Stable equilibrium. Populations find a balance and stay there.</p>
                </div>
                <div class="phase-card oscillate">
                    <div class="phase-icon">üìàüìâ</div>
                    <h4>Medium Enrichment</h4>
                    <p>Hopf bifurcation! Stable cycles emerge‚Äîboom and bust.</p>
                </div>
                <div class="phase-card extinct">
                    <div class="phase-icon">üíÄ</div>
                    <h4>High Enrichment</h4>
                    <p>Oscillations become extreme. Predator extinction likely.</p>
                </div>
            </div>
        </div>

        <div class="content-section">
            <h2>Why It Happens</h2>
            <div class="example-box">
                <h4>The Mechanism</h4>
                <p>
                    1. <strong>More food ‚Üí More prey:</strong> The prey population grows larger.<br>
                    2. <strong>More prey ‚Üí More predators:</strong> Predators thrive and reproduce rapidly.<br>
                    3. <strong>Too many predators ‚Üí Prey crash:</strong> Predators eat prey faster than they reproduce.<br>
                    4. <strong>Prey crash ‚Üí Predator crash:</strong> With no food, predators starve.<br>
                    5. <strong>Extreme cycles:</strong> These boom-bust cycles grow more violent with more enrichment.
                </p>
            </div>
            <p>
                The key insight comes from the <strong>Lotka-Volterra equations</strong> with a type II functional 
                response (predators get "full" and can't eat faster). At low carrying capacity, the system finds 
                equilibrium. But beyond a critical K value, a <strong>Hopf bifurcation</strong> occurs‚Äîthe equilibrium 
                becomes unstable and limit cycles emerge.
            </p>
        </div>

        <div class="content-section">
            <h2>Real-World Examples</h2>
            <p>
                The paradox has been confirmed in laboratory experiments, particularly with microorganisms and 
                small invertebrates. In the field, it's harder to observe directly because natural ecosystems 
                have evolved stabilizing mechanisms:
            </p>
            <ul style="margin-left: 25px; color: #bbb; line-height: 2;">
                <li><strong>Refugia:</strong> Prey can hide from predators</li>
                <li><strong>Multiple prey species:</strong> Predators can switch targets</li>
                <li><strong>Predator territoriality:</strong> Limits predator density</li>
                <li><strong>Prey defenses:</strong> Toxicity or unpalatability at high density</li>
            </ul>
            <p style="margin-top: 15px;">
                These mechanisms explain why ecosystems don't constantly collapse‚Äîevolution has built in 
                stabilizers. But when humans artificially enrich systems (fertilizer runoff, for example), 
                these safeguards can be overwhelmed.
            </p>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('simCanvas');
        const ctx = canvas.getContext('2d');
        
        // High DPI
        function resizeCanvas() {
            const rect = canvas.getBoundingClientRect();
            const dpr = window.devicePixelRatio || 1;
            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            ctx.scale(dpr, dpr);
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Simulation state
        let prey = 500;
        let predator = 50;
        let K = 500; // carrying capacity
        let running = false;
        let history = { prey: [], predator: [] };
        const maxHistory = 300;

        // Lotka-Volterra parameters
        const r = 0.5;      // prey growth rate
        const a = 0.01;     // predation rate
        const h = 0.02;     // handling time (type II response)
        const e = 0.5;      // predator efficiency
        const m = 0.2;      // predator mortality

        function simulate(dt) {
            // Type II functional response
            const funcResponse = (a * prey) / (1 + a * h * prey);
            
            // Lotka-Volterra with logistic prey growth
            const dPrey = r * prey * (1 - prey / K) - funcResponse * predator;
            const dPred = e * funcResponse * predator - m * predator;
            
            prey = Math.max(0, prey + dPrey * dt);
            predator = Math.max(0, predator + dPred * dt);
            
            // Store history
            history.prey.push(prey);
            history.predator.push(predator);
            if (history.prey.length > maxHistory) {
                history.prey.shift();
                history.predator.shift();
            }
        }

        function draw() {
            const rect = canvas.getBoundingClientRect();
            const width = rect.width;
            const height = rect.height;
            
            ctx.clearRect(0, 0, width, height);
            
            // Grid
            ctx.strokeStyle = 'rgba(139,195,74,0.1)';
            ctx.lineWidth = 1;
            for (let i = 0; i < width; i += 50) {
                ctx.beginPath();
                ctx.moveTo(i, 0);
                ctx.lineTo(i, height);
                ctx.stroke();
            }
            for (let i = 0; i < height; i += 50) {
                ctx.beginPath();
                ctx.moveTo(0, i);
                ctx.lineTo(width, i);
                ctx.stroke();
            }
            
            // Find max for scaling
            const maxPop = Math.max(K * 1.2, Math.max(...history.prey, ...history.predator, 100));
            
            // Draw prey
            if (history.prey.length > 1) {
                ctx.beginPath();
                ctx.strokeStyle = '#4CAF50';
                ctx.lineWidth = 2;
                for (let i = 0; i < history.prey.length; i++) {
                    const x = (i / maxHistory) * width;
                    const y = height - (history.prey[i] / maxPop) * height * 0.9;
                    if (i === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }
                ctx.stroke();
            }
            
            // Draw predator
            if (history.predator.length > 1) {
                ctx.beginPath();
                ctx.strokeStyle = '#f44336';
                ctx.lineWidth = 2;
                for (let i = 0; i < history.predator.length; i++) {
                    const x = (i / maxHistory) * width;
                    const y = height - (history.predator[i] / maxPop) * height * 0.9;
                    if (i === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }
                ctx.stroke();
            }
            
            // Carrying capacity line
            ctx.beginPath();
            ctx.strokeStyle = 'rgba(255,255,255,0.3)';
            ctx.setLineDash([5, 5]);
            const kY = height - (K / maxPop) * height * 0.9;
            ctx.moveTo(0, kY);
            ctx.lineTo(width, kY);
            ctx.stroke();
            ctx.setLineDash([]);
            
            // Label
            ctx.fillStyle = 'rgba(255,255,255,0.5)';
            ctx.font = '12px Nunito';
            ctx.fillText(`K = ${K}`, 10, kY - 5);
            
            // Update displays
            document.getElementById('preyPop').textContent = Math.round(prey);
            document.getElementById('predPop').textContent = Math.round(predator);
            
            // Determine system state
            updateSystemState();
        }

        function updateSystemState() {
            const stateEl = document.getElementById('systemState');
            const indicator = document.getElementById('paradoxIndicator');
            
            if (predator < 1) {
                stateEl.textContent = 'PREDATOR EXTINCT!';
                stateEl.className = 'status-value status-extinction';
                indicator.className = 'paradox-indicator danger';
                indicator.textContent = '‚úó Enrichment ‚Üí Extinction!';
            } else if (K > 800) {
                // Check for oscillations
                if (history.prey.length > 50) {
                    const recent = history.prey.slice(-50);
                    const min = Math.min(...recent);
                    const max = Math.max(...recent);
                    const amplitude = (max - min) / ((max + min) / 2);
                    
                    if (amplitude > 0.5) {
                        stateEl.textContent = 'Violent Oscillations';
                        stateEl.className = 'status-value status-extinction';
                        indicator.className = 'paradox-indicator danger';
                        indicator.textContent = '‚ö† High K = Dangerous Cycles';
                    } else if (amplitude > 0.2) {
                        stateEl.textContent = 'Oscillating (Limit Cycles)';
                        stateEl.className = 'status-value status-oscillating';
                        indicator.className = 'paradox-indicator danger';
                        indicator.textContent = '‚ö† Bifurcation Zone';
                    }
                }
            } else {
                stateEl.textContent = 'Stable Equilibrium';
                stateEl.className = 'status-value status-stable';
                indicator.className = 'paradox-indicator safe';
                indicator.textContent = '‚úì Low K = Stable System';
            }
        }

        let animationId = null;
        let speed = 5;

        function animate() {
            if (!running) return;
            
            for (let i = 0; i < speed; i++) {
                simulate(0.1);
            }
            draw();
            animationId = requestAnimationFrame(animate);
        }

        // Controls
        document.getElementById('startBtn').addEventListener('click', () => {
            running = !running;
            document.getElementById('startBtn').textContent = running ? 'Pause' : 'Start';
            if (running) animate();
        });

        document.getElementById('resetBtn').addEventListener('click', () => {
            running = false;
            document.getElementById('startBtn').textContent = 'Start';
            prey = 500;
            predator = 50;
            history = { prey: [], predator: [] };
            draw();
        });

        document.getElementById('carryingCapacity').addEventListener('input', (e) => {
            K = parseInt(e.target.value);
            document.getElementById('kValue').textContent = K;
            const pct = ((K - 100) / 1900) * 100;
            document.getElementById('capacityMarker').style.left = pct + '%';
            updateSystemState();
        });

        document.getElementById('simSpeed').addEventListener('input', (e) => {
            speed = parseInt(e.target.value);
            document.getElementById('speedValue').textContent = speed + 'x';
        });

        // Initialize
        draw();
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
