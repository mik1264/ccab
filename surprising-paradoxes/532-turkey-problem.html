<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Turkey Problem - Surprising Paradoxes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #e8e8e8;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.7;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 30px 0;
            border-bottom: 2px solid #e94560;
            margin-bottom: 30px;
        }

        h1 {
            font-size: 2.5rem;
            color: #e94560;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(233, 69, 96, 0.3);
        }

        .subtitle {
            font-size: 1.2rem;
            color: #a0a0a0;
            font-style: italic;
        }

        .attribution {
            margin-top: 15px;
            font-size: 0.95rem;
            color: #888;
        }

        .attribution strong {
            color: #e94560;
        }

        section {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid rgba(233, 69, 96, 0.2);
        }

        h2 {
            color: #e94560;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        h3 {
            color: #f39c12;
            margin: 20px 0 10px;
            font-size: 1.2rem;
        }

        p {
            margin-bottom: 15px;
            text-align: justify;
        }

        .quote {
            background: rgba(233, 69, 96, 0.1);
            border-left: 4px solid #e94560;
            padding: 20px;
            margin: 20px 0;
            font-style: italic;
            font-size: 1.1rem;
        }

        .quote-author {
            text-align: right;
            margin-top: 10px;
            color: #e94560;
            font-style: normal;
            font-weight: bold;
        }

        /* Turkey Simulation */
        .simulation-container {
            background: linear-gradient(180deg, #87CEEB 0%, #98FB98 70%, #8B4513 100%);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
            height: 300px;
            overflow: hidden;
        }

        .sun {
            position: absolute;
            top: 20px;
            right: 40px;
            width: 60px;
            height: 60px;
            background: radial-gradient(circle, #FFD700 0%, #FFA500 100%);
            border-radius: 50%;
            box-shadow: 0 0 40px #FFD700;
        }

        .barn {
            position: absolute;
            bottom: 60px;
            left: 30px;
            width: 100px;
            height: 80px;
            background: #8B0000;
            clip-path: polygon(0 30%, 50% 0, 100% 30%, 100% 100%, 0 100%);
        }

        .barn::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 35px;
            width: 30px;
            height: 40px;
            background: #4a2c2a;
        }

        .fence {
            position: absolute;
            bottom: 40px;
            left: 0;
            right: 0;
            height: 40px;
            background: repeating-linear-gradient(
                90deg,
                transparent,
                transparent 20px,
                #deb887 20px,
                #deb887 25px
            );
        }

        .turkey {
            position: absolute;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            transition: all 0.5s ease;
        }

        .turkey-body {
            width: 60px;
            height: 50px;
            background: #8B4513;
            border-radius: 50%;
            position: relative;
        }

        .turkey-head {
            position: absolute;
            top: -15px;
            right: -10px;
            width: 25px;
            height: 25px;
            background: #8B4513;
            border-radius: 50%;
        }

        .turkey-beak {
            position: absolute;
            top: 5px;
            right: -8px;
            width: 15px;
            height: 8px;
            background: #FFA500;
            border-radius: 3px;
        }

        .turkey-wattle {
            position: absolute;
            top: 12px;
            right: -5px;
            width: 10px;
            height: 15px;
            background: #FF0000;
            border-radius: 50% 50% 50% 50%;
        }

        .turkey-tail {
            position: absolute;
            left: -30px;
            top: -10px;
            width: 40px;
            height: 50px;
            background: conic-gradient(
                from 180deg,
                #8B0000 0deg,
                #CD853F 45deg,
                #8B0000 90deg,
                #CD853F 135deg,
                #8B0000 180deg
            );
            border-radius: 50% 50% 0 0;
        }

        .turkey-legs {
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
        }

        .leg {
            width: 5px;
            height: 20px;
            background: #FFA500;
        }

        .farmer {
            position: absolute;
            bottom: 80px;
            right: 100px;
            opacity: 0;
            transition: all 1s ease;
        }

        .farmer.visible {
            opacity: 1;
        }

        .farmer-body {
            width: 30px;
            height: 50px;
            background: #4169E1;
            border-radius: 5px 5px 0 0;
        }

        .farmer-head {
            width: 25px;
            height: 25px;
            background: #FFDAB9;
            border-radius: 50%;
            position: absolute;
            top: -20px;
            left: 2.5px;
        }

        .farmer-hat {
            position: absolute;
            top: -35px;
            left: -2px;
            width: 35px;
            height: 15px;
            background: #8B4513;
            border-radius: 5px;
        }

        .food-bowl {
            position: absolute;
            bottom: 70px;
            left: 45%;
            width: 40px;
            height: 20px;
            background: #A0522D;
            border-radius: 0 0 50% 50%;
            opacity: 0;
            transition: opacity 0.5s;
        }

        .food-bowl.visible {
            opacity: 1;
        }

        .food-bowl::before {
            content: '';
            position: absolute;
            top: -5px;
            left: 5px;
            width: 30px;
            height: 10px;
            background: #FFD700;
            border-radius: 50%;
        }

        .axe {
            position: absolute;
            bottom: 120px;
            right: 80px;
            opacity: 0;
            transform: rotate(-45deg);
            transition: all 0.5s ease;
        }

        .axe.visible {
            opacity: 1;
        }

        .axe-handle {
            width: 8px;
            height: 50px;
            background: #8B4513;
        }

        .axe-blade {
            position: absolute;
            top: -5px;
            left: -15px;
            width: 30px;
            height: 25px;
            background: #C0C0C0;
            clip-path: polygon(100% 0, 100% 100%, 0 50%);
        }

        .day-counter {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 1.3rem;
            color: white;
        }

        .day-counter span {
            color: #e94560;
            font-weight: bold;
        }

        .thought-bubble {
            position: absolute;
            bottom: 180px;
            left: 45%;
            background: white;
            color: #333;
            padding: 10px 15px;
            border-radius: 15px;
            font-size: 0.9rem;
            max-width: 200px;
            opacity: 0;
            transition: opacity 0.5s;
        }

        .thought-bubble.visible {
            opacity: 1;
        }

        .thought-bubble::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 30px;
            border: 10px solid transparent;
            border-top-color: white;
        }

        /* Graph Container */
        .graph-container {
            background: #1a1a2e;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        canvas {
            width: 100%;
            border-radius: 10px;
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        button {
            background: linear-gradient(135deg, #e94560, #c23a51);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 30px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(233, 69, 96, 0.4);
        }

        button:disabled {
            background: #555;
            cursor: not-allowed;
            transform: none;
        }

        .speed-control {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #aaa;
        }

        .speed-control input {
            width: 120px;
        }

        /* Confidence Meter */
        .confidence-meter {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
        }

        .meter-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .meter-bar {
            height: 30px;
            background: #333;
            border-radius: 15px;
            overflow: hidden;
        }

        .meter-fill {
            height: 100%;
            background: linear-gradient(90deg, #2ecc71, #f1c40f, #e94560);
            border-radius: 15px;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 10px;
            color: white;
            font-weight: bold;
        }

        /* Statistics Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: rgba(233, 69, 96, 0.1);
            border: 1px solid rgba(233, 69, 96, 0.3);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            color: #e94560;
            font-weight: bold;
        }

        .stat-label {
            color: #888;
            font-size: 0.9rem;
            margin-top: 5px;
        }

        /* Examples Section */
        .examples-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .example-card {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid #f39c12;
        }

        .example-card h4 {
            color: #f39c12;
            margin-bottom: 10px;
        }

        .example-card .year {
            color: #e94560;
            font-weight: bold;
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding-left: 30px;
            margin: 20px 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 10px;
            top: 0;
            bottom: 0;
            width: 3px;
            background: #e94560;
        }

        .timeline-item {
            position: relative;
            margin-bottom: 25px;
            padding-left: 20px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -24px;
            top: 5px;
            width: 15px;
            height: 15px;
            background: #e94560;
            border-radius: 50%;
            border: 3px solid #1a1a2e;
        }

        .timeline-year {
            color: #e94560;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .timeline-content {
            color: #ccc;
        }

        /* Warning Box */
        .warning-box {
            background: linear-gradient(135deg, rgba(231, 76, 60, 0.2), rgba(241, 196, 15, 0.1));
            border: 2px solid #e74c3c;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .warning-box h3 {
            color: #e74c3c;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .back-link {
            display: inline-block;
            color: #e94560;
            text-decoration: none;
            margin-bottom: 20px;
            font-size: 1.1rem;
            transition: color 0.3s;
        }

        .back-link:hover {
            color: #f39c12;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8rem;
            }

            .simulation-container {
                height: 250px;
            }

            .turkey {
                transform: translateX(-50%) scale(0.8);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">&larr; Back to Surprising Paradoxes</a>

        <header>
            <h1>The Turkey Problem</h1>
            <p class="subtitle">Why confidence peaks just before disaster strikes</p>
            <p class="attribution">
                <strong>Nassim Nicholas Taleb</strong> (2007) ‚Äî Based on <strong>Bertrand Russell's</strong> chicken (1912)
            </p>
        </header>

        <section>
            <h2>The Parable</h2>
            <div class="quote">
                "Consider a turkey that is fed every day. Every single feeding will firm up the bird's belief that it is the general rule of life to be fed every day by friendly members of the human race 'looking out for its best interests,' as a politician would say. On the afternoon of the Wednesday before Thanksgiving, something unexpected will happen to the turkey. It will incur a revision of belief."
                <div class="quote-author">‚Äî Nassim Nicholas Taleb, The Black Swan (2007)</div>
            </div>
            <p>
                A turkey is fed by a farmer for <strong>1,000 consecutive days</strong>. Each day, the turkey's confidence grows that the farmer is kind and benevolent. By day 1,000, the turkey's certainty has never been higher. The economics department, risk management division, and analytics team of the turkey all concur: humans are wonderful creatures who exist to feed turkeys.
            </p>
            <p>
                Then comes <strong>Day 1,001</strong>‚Äîthe Wednesday before Thanksgiving. The farmer arrives not with food, but with an axe.
            </p>
        </section>

        <section>
            <h2>Experience the Turkey's Journey</h2>
            <div class="simulation-container">
                <div class="day-counter">Day <span id="dayNumber">1</span> of 1,001</div>
                <div class="sun"></div>
                <div class="barn"></div>
                <div class="fence"></div>

                <div class="turkey" id="turkey">
                    <div class="turkey-tail"></div>
                    <div class="turkey-body">
                        <div class="turkey-head">
                            <div class="turkey-beak"></div>
                            <div class="turkey-wattle"></div>
                        </div>
                    </div>
                    <div class="turkey-legs">
                        <div class="leg"></div>
                        <div class="leg"></div>
                    </div>
                </div>

                <div class="farmer" id="farmer">
                    <div class="farmer-hat"></div>
                    <div class="farmer-head"></div>
                    <div class="farmer-body"></div>
                </div>

                <div class="food-bowl" id="foodBowl"></div>

                <div class="axe" id="axe">
                    <div class="axe-blade"></div>
                    <div class="axe-handle"></div>
                </div>

                <div class="thought-bubble" id="thoughtBubble">
                    Life is good! The farmer loves me!
                </div>
            </div>

            <div class="confidence-meter">
                <div class="meter-label">
                    <span>Turkey's Confidence</span>
                    <span id="confidenceValue">0%</span>
                </div>
                <div class="meter-bar">
                    <div class="meter-fill" id="confidenceFill" style="width: 0%"></div>
                </div>
            </div>

            <div class="controls">
                <button id="startBtn" onclick="startSimulation()">Start Journey</button>
                <button id="skipBtn" onclick="skipToEnd()" disabled>Skip to Day 1,001</button>
                <button id="resetBtn" onclick="resetSimulation()" disabled>Reset</button>
                <div class="speed-control">
                    <label>Speed:</label>
                    <input type="range" id="speedSlider" min="1" max="100" value="50">
                    <span id="speedValue">50x</span>
                </div>
            </div>
        </section>

        <section>
            <h2>The Confidence Graph</h2>
            <div class="graph-container">
                <canvas id="confidenceGraph" height="300"></canvas>
            </div>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="daysElapsed">0</div>
                    <div class="stat-label">Days of Feeding</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="currentConfidence">0%</div>
                    <div class="stat-label">Current Confidence</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="actualRisk">Low</div>
                    <div class="stat-label">Actual Risk Level</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="beliefStrength">Uncertain</div>
                    <div class="stat-label">Belief Strength</div>
                </div>
            </div>
        </section>

        <section>
            <h2>The Paradox Explained</h2>
            <div class="warning-box">
                <h3>‚ö†Ô∏è The Cruel Irony</h3>
                <p>
                    <strong>The turkey's confidence reached its maximum precisely when its risk was highest.</strong> The feeling of safety peaked the night before death. Every additional day of feeding strengthened the belief that feeding would continue forever‚Äîbut brought the turkey one day closer to Thanksgiving.
                </p>
            </div>

            <h3>The Problem of Induction</h3>
            <p>
                The turkey relied on <strong>inductive reasoning</strong>: observing specific instances (daily feedings) to derive a general rule ("I will always be fed"). This is how most of us navigate life‚Äîand it usually works. But inductive reasoning has a fatal flaw: <em>no number of observations can prove a universal law</em>.
            </p>

            <h3>What the Turkey Couldn't See</h3>
            <p>
                The turkey had access to all the data available within its world‚Äî1,000 days of consistent feeding. What it couldn't access was the <strong>hidden structure</strong> of reality: the existence of Thanksgiving, the farmer's economic incentives, and the very concept of being "fattened up." The most important piece of information was invisible to the turkey's data collection.
            </p>

            <h3>Perspective Matters</h3>
            <p>
                Taleb notes that what is a "Black Swan" (unpredictable event) for the turkey is <strong>not a Black Swan for the butcher</strong>. The butcher knew all along. The lesson: ask yourself whether you're the turkey or the butcher in any given situation.
            </p>
        </section>

        <section>
            <h2>Historical Origins</h2>
            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-year">~200 CE</div>
                    <div class="timeline-content">
                        <strong>Sextus Empiricus</strong> formulated the problem of induction, questioning whether past observations justify future predictions.
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-year">1739</div>
                    <div class="timeline-content">
                        <strong>David Hume</strong> articulated the problem rigorously in "A Treatise of Human Nature." No amount of observed sunrises proves the sun will rise tomorrow.
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-year">1912</div>
                    <div class="timeline-content">
                        <strong>Bertrand Russell</strong> introduced the chicken/turkey analogy in "The Problems of Philosophy" to make the abstract problem visceral and memorable.
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-year">1934</div>
                    <div class="timeline-content">
                        <strong>Karl Popper</strong> proposed falsificationism as an alternative: we can never prove theories true, only prove them false.
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-year">2007</div>
                    <div class="timeline-content">
                        <strong>Nassim Nicholas Taleb</strong> popularized the turkey version in "The Black Swan," connecting it to financial markets and rare events.
                    </div>
                </div>
            </div>
        </section>

        <section>
            <h2>Real-World "Turkeys"</h2>
            <div class="examples-grid">
                <div class="example-card">
                    <h4>Lehman Brothers</h4>
                    <p class="year">September 15, 2008</p>
                    <p>158 years of successful banking. "Too big to fail." Employees confident until the final weekend. Bankruptcy came on a Monday morning.</p>
                </div>
                <div class="example-card">
                    <h4>Long-Term Capital Management</h4>
                    <p class="year">August 1998</p>
                    <p>Nobel laureates. 40% annual returns for 4 years. Their models said disaster was a 10-sigma event (virtually impossible). It happened anyway.</p>
                </div>
                <div class="example-card">
                    <h4>Kodak</h4>
                    <p class="year">January 19, 2012</p>
                    <p>130 years dominating photography. Invented the digital camera in 1975. Filed for bankruptcy when digital killed film‚Äîtheir own invention.</p>
                </div>
                <div class="example-card">
                    <h4>Blockbuster</h4>
                    <p class="year">September 23, 2010</p>
                    <p>9,000 stores worldwide. Declined to buy Netflix for $50 million in 2000. Netflix is now worth $150+ billion.</p>
                </div>
                <div class="example-card">
                    <h4>Housing Market 2008</h4>
                    <p class="year">2007-2008</p>
                    <p>"Housing prices always go up." Decades of data confirmed it. Then they didn't. $8 trillion in home value evaporated.</p>
                </div>
                <div class="example-card">
                    <h4>Swiss Franc Peg</h4>
                    <p class="year">January 15, 2015</p>
                    <p>Swiss National Bank promised to maintain 1.20 EUR/CHF floor "with utmost determination." Abandoned without warning. 30% move in minutes.</p>
                </div>
            </div>
        </section>

        <section>
            <h2>How to Avoid Being the Turkey</h2>
            <p>Taleb offers these strategies to avoid the turkey's fate:</p>

            <h3>1. Seek Fragility, Not Risk</h3>
            <p>
                Instead of trying to predict Black Swans (impossible), identify where you're <strong>fragile</strong>‚Äîwhere a rare event would devastate you. Reduce fragility before the event occurs.
            </p>

            <h3>2. Ask: "What Don't I Know?"</h3>
            <p>
                The turkey's data was complete within its observable world. But the <strong>unknown unknowns</strong>‚ÄîThanksgiving, the farmer's motives‚Äîwere the real determinants. Always question what's outside your data.
            </p>

            <h3>3. Beware of Confirmation</h3>
            <p>
                Each feeding confirmed the turkey's belief. But confirmation is cheap‚Äîany theory can find confirming evidence. Look for what could <strong>disconfirm</strong> your beliefs.
            </p>

            <h3>4. Consider the Butcher's View</h3>
            <p>
                In every transaction, someone knows more. Ask yourself: am I the turkey or the butcher? Is my counterparty acting on information I don't have?
            </p>

            <h3>5. Build Optionality</h3>
            <p>
                The turkey had no options‚Äîno escape route, no plan B. Create situations where you have <strong>limited downside and unlimited upside</strong> (what Taleb calls "antifragility").
            </p>
        </section>

        <section>
            <h2>The Ultimate Lesson</h2>
            <div class="quote">
                "The turkey problem can be generalized to any situation where the same hand that feeds you can be the one that wrings your neck."
                <div class="quote-author">‚Äî Nassim Nicholas Taleb</div>
            </div>
            <p>
                Past performance is not just a "poor predictor" of future results‚Äîit can be <strong>actively misleading</strong>. The longer a pattern persists, the more confident we become, even as the probability of a pattern-breaking event may be increasing. The turkey's tragedy is not that it was stupid, but that it was <em>rational given its available information</em>.
            </p>
            <p>
                The problem isn't inductive reasoning itself‚Äîwe'd be paralyzed without it. The problem is <strong>overconfidence</strong> in induction, especially in domains where rare, catastrophic events are possible. Some turkeys are destined for Thanksgiving. The question is whether you know which kind you are.
            </p>
        </section>
    </div>

    <script>
        // State
        let day = 1;
        let isRunning = false;
        let intervalId = null;
        let confidenceData = [];
        let canvas, ctx;

        // Elements
        const dayNumber = document.getElementById('dayNumber');
        const confidenceValue = document.getElementById('confidenceValue');
        const confidenceFill = document.getElementById('confidenceFill');
        const farmer = document.getElementById('farmer');
        const foodBowl = document.getElementById('foodBowl');
        const axe = document.getElementById('axe');
        const thoughtBubble = document.getElementById('thoughtBubble');
        const turkey = document.getElementById('turkey');
        const startBtn = document.getElementById('startBtn');
        const skipBtn = document.getElementById('skipBtn');
        const resetBtn = document.getElementById('resetBtn');
        const speedSlider = document.getElementById('speedSlider');
        const speedValue = document.getElementById('speedValue');

        // Stats
        const daysElapsed = document.getElementById('daysElapsed');
        const currentConfidence = document.getElementById('currentConfidence');
        const actualRisk = document.getElementById('actualRisk');
        const beliefStrength = document.getElementById('beliefStrength');

        // Initialize canvas
        function initCanvas() {
            canvas = document.getElementById('confidenceGraph');
            ctx = canvas.getContext('2d');
            canvas.width = canvas.offsetWidth * 2;
            canvas.height = 300 * 2;
            ctx.scale(2, 2);
            drawGraph();
        }

        // Calculate confidence (asymptotic approach to 100%)
        function calculateConfidence(d) {
            if (d > 1000) return 0; // Death
            return 100 * (1 - Math.exp(-d / 200));
        }

        // Get thoughts based on day
        function getThought(d) {
            if (d > 1000) return "Wait... what's that?! üò±";
            if (d > 990) return "Life couldn't be better! ü•∞";
            if (d > 900) return "The farmer is the best! üòä";
            if (d > 700) return "I'm so lucky to be here! ‚ú®";
            if (d > 500) return "This is definitely forever! üíï";
            if (d > 300) return "Humans are so kind! üôè";
            if (d > 100) return "Food every day? Amazing! üåæ";
            if (d > 50) return "This pattern seems reliable! üìà";
            if (d > 10) return "Maybe tomorrow too? ü§î";
            return "Is this food for me? ü§®";
        }

        // Update display
        function updateDisplay() {
            const confidence = calculateConfidence(day);

            dayNumber.textContent = day;
            confidenceValue.textContent = confidence.toFixed(1) + '%';
            confidenceFill.style.width = confidence + '%';

            // Stats
            daysElapsed.textContent = day;
            currentConfidence.textContent = confidence.toFixed(0) + '%';

            // Risk level (inverse of confidence - the cruel irony)
            if (day <= 100) {
                actualRisk.textContent = 'Low';
                actualRisk.style.color = '#2ecc71';
            } else if (day <= 500) {
                actualRisk.textContent = 'Medium';
                actualRisk.style.color = '#f39c12';
            } else if (day <= 950) {
                actualRisk.textContent = 'High';
                actualRisk.style.color = '#e67e22';
            } else if (day <= 1000) {
                actualRisk.textContent = 'IMMINENT';
                actualRisk.style.color = '#e94560';
            } else {
                actualRisk.textContent = 'REALIZED';
                actualRisk.style.color = '#c0392b';
            }

            // Belief strength
            if (confidence < 30) beliefStrength.textContent = 'Uncertain';
            else if (confidence < 60) beliefStrength.textContent = 'Growing';
            else if (confidence < 85) beliefStrength.textContent = 'Strong';
            else beliefStrength.textContent = 'Absolute';

            // Update thought bubble
            thoughtBubble.textContent = getThought(day);
            thoughtBubble.classList.add('visible');

            // Show/hide elements
            if (day <= 1000) {
                farmer.classList.add('visible');
                foodBowl.classList.add('visible');
                axe.classList.remove('visible');
                turkey.style.opacity = '1';
            } else {
                farmer.classList.add('visible');
                foodBowl.classList.remove('visible');
                axe.classList.add('visible');
                turkey.style.opacity = '0.3';
                turkey.style.transform = 'translateX(-50%) rotate(90deg)';
            }

            // Store data for graph
            if (day <= 1001 && !confidenceData.find(d => d.day === day)) {
                confidenceData.push({ day, confidence });
            }

            drawGraph();
        }

        // Draw graph
        function drawGraph() {
            const width = canvas.width / 2;
            const height = canvas.height / 2;
            const padding = 50;
            const graphWidth = width - padding * 2;
            const graphHeight = height - padding * 2;

            // Clear
            ctx.fillStyle = '#1a1a2e';
            ctx.fillRect(0, 0, width, height);

            // Draw axes
            ctx.strokeStyle = '#444';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(padding, padding);
            ctx.lineTo(padding, height - padding);
            ctx.lineTo(width - padding, height - padding);
            ctx.stroke();

            // Labels
            ctx.fillStyle = '#888';
            ctx.font = '12px Georgia';
            ctx.textAlign = 'center';
            ctx.fillText('Days', width / 2, height - 10);

            ctx.save();
            ctx.translate(15, height / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('Confidence %', 0, 0);
            ctx.restore();

            // X-axis labels
            for (let i = 0; i <= 1000; i += 200) {
                const x = padding + (i / 1001) * graphWidth;
                ctx.fillText(i.toString(), x, height - padding + 20);
            }
            ctx.fillText('1001', width - padding, height - padding + 20);

            // Y-axis labels
            for (let i = 0; i <= 100; i += 25) {
                const y = height - padding - (i / 100) * graphHeight;
                ctx.fillText(i.toString(), padding - 25, y + 4);
            }

            // Draw confidence line
            if (confidenceData.length > 1) {
                ctx.strokeStyle = '#2ecc71';
                ctx.lineWidth = 2;
                ctx.beginPath();

                confidenceData.forEach((point, i) => {
                    const x = padding + (point.day / 1001) * graphWidth;
                    const y = height - padding - (point.confidence / 100) * graphHeight;

                    if (i === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                });
                ctx.stroke();
            }

            // Draw vertical line at current day
            if (day > 0 && day <= 1001) {
                const x = padding + (day / 1001) * graphWidth;
                ctx.strokeStyle = 'rgba(233, 69, 96, 0.5)';
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(x, padding);
                ctx.lineTo(x, height - padding);
                ctx.stroke();
                ctx.setLineDash([]);
            }

            // Draw Thanksgiving line
            const thanksgivingX = padding + graphWidth;
            ctx.strokeStyle = 'rgba(231, 76, 60, 0.8)';
            ctx.lineWidth = 2;
            ctx.setLineDash([10, 5]);
            ctx.beginPath();
            ctx.moveTo(thanksgivingX, padding);
            ctx.lineTo(thanksgivingX, height - padding);
            ctx.stroke();
            ctx.setLineDash([]);

            // Thanksgiving label
            ctx.fillStyle = '#e74c3c';
            ctx.font = 'bold 12px Georgia';
            ctx.save();
            ctx.translate(thanksgivingX + 5, height / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('ü¶É THANKSGIVING', 0, 0);
            ctx.restore();

            // If we've hit day 1001, draw the crash
            if (confidenceData.some(d => d.day > 1000)) {
                const lastGoodPoint = confidenceData.find(d => d.day === 1000) || { day: 1000, confidence: 99 };
                const crashPoint = { day: 1001, confidence: 0 };

                ctx.strokeStyle = '#e94560';
                ctx.lineWidth = 3;
                ctx.beginPath();
                const x1 = padding + (lastGoodPoint.day / 1001) * graphWidth;
                const y1 = height - padding - (lastGoodPoint.confidence / 100) * graphHeight;
                const x2 = padding + (crashPoint.day / 1001) * graphWidth;
                const y2 = height - padding;
                ctx.moveTo(x1, y1);
                ctx.lineTo(x2, y2);
                ctx.stroke();

                // Skull emoji at crash point
                ctx.font = '20px sans-serif';
                ctx.fillText('üíÄ', x2 - 10, y2 - 10);
            }
        }

        // Start simulation
        function startSimulation() {
            if (isRunning) return;
            isRunning = true;
            startBtn.disabled = true;
            skipBtn.disabled = false;

            const speed = speedSlider.value;
            const delay = Math.max(10, 500 - speed * 4);

            intervalId = setInterval(() => {
                if (day <= 1001) {
                    updateDisplay();
                    day++;
                } else {
                    stopSimulation();
                }
            }, delay);
        }

        // Stop simulation
        function stopSimulation() {
            isRunning = false;
            if (intervalId) {
                clearInterval(intervalId);
                intervalId = null;
            }
            startBtn.disabled = true;
            skipBtn.disabled = true;
            resetBtn.disabled = false;
        }

        // Skip to end
        function skipToEnd() {
            stopSimulation();

            // Fill in data
            for (let d = day; d <= 1001; d++) {
                confidenceData.push({ day: d, confidence: calculateConfidence(d) });
            }

            day = 1001;
            updateDisplay();
            resetBtn.disabled = false;
        }

        // Reset
        function resetSimulation() {
            stopSimulation();
            day = 1;
            confidenceData = [];
            turkey.style.opacity = '1';
            turkey.style.transform = 'translateX(-50%)';
            farmer.classList.remove('visible');
            foodBowl.classList.remove('visible');
            axe.classList.remove('visible');
            thoughtBubble.classList.remove('visible');
            startBtn.disabled = false;
            skipBtn.disabled = true;
            resetBtn.disabled = true;
            updateDisplay();
        }

        // Speed slider
        speedSlider.addEventListener('input', () => {
            speedValue.textContent = speedSlider.value + 'x';
            if (isRunning) {
                clearInterval(intervalId);
                const delay = Math.max(10, 500 - speedSlider.value * 4);
                intervalId = setInterval(() => {
                    if (day <= 1001) {
                        updateDisplay();
                        day++;
                    } else {
                        stopSimulation();
                    }
                }, delay);
            }
        });

        // Initialize
        window.addEventListener('load', () => {
            initCanvas();
            updateDisplay();
        });

        window.addEventListener('resize', () => {
            canvas.width = canvas.offsetWidth * 2;
            canvas.height = 300 * 2;
            ctx.scale(2, 2);
            drawGraph();
        });
    </script>
</body>
</html>
