<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Unexpected Hanging Paradox - Surprising Paradoxes</title>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --prison-gray: #4a4a4a;
            --rope-brown: #8b4513;
            --parchment: #f4e4bc;
            --blood-red: #8b0000;
            --freedom-green: #228b22;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(180deg, #2c2c2c 0%, #1a1a1a 50%, #0d0d0d 100%);
            min-height: 100vh;
            color: #fff;
            overflow-x: hidden;
        }
        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--parchment);
            text-decoration: none;
            font-weight: 500;
            margin-bottom: 30px;
            padding: 10px 20px;
            background: rgba(244,228,188,0.1);
            border-radius: 30px;
            transition: all 0.3s ease;
            border: 1px solid rgba(244,228,188,0.3);
        }
        .back-link:hover {
            background: rgba(244,228,188,0.2);
            transform: translateX(-5px);
        }
        h1 {
            font-family: 'Lora', serif;
            font-size: 2.6rem;
            margin-bottom: 15px;
            color: var(--parchment);
            text-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }
        .subtitle {
            font-size: 1.3rem;
            color: rgba(255,255,255,0.7);
            margin-bottom: 40px;
            max-width: 700px;
            line-height: 1.7;
        }
        .scroll-box {
            background: linear-gradient(180deg, #d4c4a8 0%, #c4b498 100%);
            border-radius: 10px;
            padding: 35px;
            margin-bottom: 40px;
            color: #3a3a3a;
            box-shadow: 0 10px 40px rgba(0,0,0,0.4);
            position: relative;
        }
        .scroll-box::before {
            content: '';
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 2.5rem;
        }
        .scroll-box h2 {
            font-family: 'Lora', serif;
            color: #5a4a3a;
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.4rem;
        }
        .scroll-box p {
            line-height: 1.9;
            font-size: 1.1rem;
            text-align: center;
        }
        .highlight {
            color: var(--blood-red);
            font-weight: 700;
        }

        /* Tab Navigation */
        .tab-nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        .tab-btn {
            padding: 12px 25px;
            border: 2px solid rgba(244,228,188,0.3);
            background: rgba(255,255,255,0.05);
            color: var(--parchment);
            border-radius: 30px;
            font-family: 'Nunito', sans-serif;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .tab-btn:hover {
            background: rgba(244,228,188,0.1);
        }
        .tab-btn.active {
            background: rgba(244,228,188,0.2);
            border-color: var(--parchment);
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }

        .week-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin: 40px 0;
        }
        .day-card {
            width: 130px;
            background: rgba(255,255,255,0.05);
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 15px;
            padding: 20px 15px;
            text-align: center;
            transition: all 0.4s ease;
            cursor: pointer;
        }
        .day-card:hover {
            transform: translateY(-5px);
            border-color: rgba(244,228,188,0.5);
        }
        .day-card.eliminated {
            background: rgba(139,0,0,0.3);
            border-color: var(--blood-red);
            opacity: 0.6;
            transform: scale(0.95);
        }
        .day-card.eliminated .day-name::after {
            content: ' X';
        }
        .day-card.execution {
            background: linear-gradient(135deg, rgba(139,0,0,0.5), rgba(139,0,0,0.3));
            border-color: #ff4444;
            animation: pulse 1s infinite;
        }
        .day-card.safe {
            background: rgba(34,139,34,0.3);
            border-color: var(--freedom-green);
        }
        .day-card.selected {
            background: rgba(139,69,19,0.4);
            border-color: var(--rope-brown);
            box-shadow: 0 0 20px rgba(139,69,19,0.5);
        }
        .day-card.passed {
            opacity: 0.4;
        }
        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 20px rgba(255,0,0,0.5); }
            50% { box-shadow: 0 0 40px rgba(255,0,0,0.8); }
        }
        .day-name {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: var(--parchment);
        }
        .day-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        .day-status {
            font-size: 0.85rem;
            color: rgba(255,255,255,0.6);
        }
        .reasoning-section {
            background: rgba(0,0,0,0.4);
            border-radius: 20px;
            padding: 35px;
            margin: 40px 0;
        }
        .reasoning-section h2 {
            font-family: 'Lora', serif;
            color: var(--parchment);
            margin-bottom: 25px;
            text-align: center;
        }
        .reasoning-step {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid var(--blood-red);
            opacity: 0.4;
            transition: all 0.4s ease;
        }
        .reasoning-step.active {
            opacity: 1;
            border-left-color: var(--parchment);
        }
        .reasoning-step.complete {
            opacity: 1;
            border-left-color: var(--blood-red);
        }
        .step-number {
            display: inline-block;
            width: 30px;
            height: 30px;
            background: var(--blood-red);
            color: #fff;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            font-weight: 700;
            margin-right: 15px;
        }
        .reasoning-step p {
            display: inline;
            color: rgba(255,255,255,0.9);
            line-height: 1.7;
        }
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin: 30px 0;
        }
        .control-btn {
            padding: 15px 35px;
            border: none;
            border-radius: 30px;
            font-family: 'Nunito', sans-serif;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .control-btn.primary {
            background: linear-gradient(135deg, var(--parchment), #d4b896);
            color: #3a3a3a;
        }
        .control-btn.secondary {
            background: rgba(255,255,255,0.1);
            color: #fff;
            border: 2px solid rgba(255,255,255,0.3);
        }
        .control-btn.danger {
            background: linear-gradient(135deg, var(--blood-red), #6b0000);
            color: #fff;
        }
        .control-btn:hover {
            transform: scale(1.05);
        }
        .control-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        .result-box {
            text-align: center;
            padding: 40px;
            border-radius: 20px;
            margin: 40px 0;
            display: none;
        }
        .result-box.prisoner-wins {
            background: linear-gradient(135deg, rgba(34,139,34,0.3), rgba(34,139,34,0.1));
            border: 2px solid var(--freedom-green);
        }
        .result-box.judge-wins {
            background: linear-gradient(135deg, rgba(139,0,0,0.3), rgba(139,0,0,0.1));
            border: 2px solid var(--blood-red);
        }
        .result-box h3 {
            font-family: 'Lora', serif;
            font-size: 1.8rem;
            margin-bottom: 15px;
        }
        .result-box.prisoner-wins h3 { color: var(--freedom-green); }
        .result-box.judge-wins h3 { color: #ff6b6b; }
        .result-box p {
            color: rgba(255,255,255,0.8);
            line-height: 1.8;
        }
        .resolution-section {
            margin-top: 50px;
        }
        .resolution-section h2 {
            font-family: 'Lora', serif;
            color: var(--parchment);
            margin-bottom: 25px;
        }
        .resolution-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }
        .resolution-card {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(244,228,188,0.2);
        }
        .resolution-card h4 {
            color: var(--parchment);
            margin-bottom: 12px;
            font-family: 'Lora', serif;
        }
        .resolution-card p {
            color: rgba(255,255,255,0.8);
            line-height: 1.7;
            font-size: 0.95rem;
        }
        .history-section {
            margin-top: 50px;
            padding: 30px;
            background: rgba(244,228,188,0.05);
            border-radius: 20px;
        }
        .history-section h3 {
            font-family: 'Lora', serif;
            color: var(--parchment);
            margin-bottom: 20px;
        }
        .sources {
            margin-top: 50px;
            padding: 20px;
            background: rgba(0,0,0,0.2);
            border-radius: 15px;
            font-size: 0.85rem;
        }
        .sources h4 {
            color: var(--parchment);
            margin-bottom: 10px;
        }
        .sources a {
            color: rgba(255,255,255,0.6);
            text-decoration: none;
        }
        .sources a:hover {
            color: var(--parchment);
        }
        .prisoner-thought {
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 25px;
            margin: 30px 0;
            position: relative;
            font-style: italic;
            text-align: center;
        }
        .prisoner-thought::before {
            content: '';
            position: absolute;
            top: -15px;
            left: 30px;
            font-size: 2rem;
        }
        .prisoner-emoji {
            font-size: 4rem;
            margin-bottom: 15px;
        }

        /* Week Simulator Styles */
        .simulator-section {
            background: rgba(139,69,19,0.1);
            border: 2px solid rgba(139,69,19,0.3);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
        }
        .simulator-section h3 {
            font-family: 'Lora', serif;
            color: var(--parchment);
            text-align: center;
            margin-bottom: 20px;
        }
        .simulator-instructions {
            text-align: center;
            color: rgba(255,255,255,0.7);
            margin-bottom: 20px;
        }
        .simulator-timeline {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        .timeline-day {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: rgba(255,255,255,0.1);
            border: 3px solid rgba(255,255,255,0.2);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        .timeline-day:hover {
            transform: scale(1.1);
            border-color: var(--parchment);
        }
        .timeline-day.secret-day {
            background: rgba(139,69,19,0.4);
            border-color: var(--rope-brown);
            box-shadow: 0 0 15px rgba(139,69,19,0.5);
        }
        .timeline-day.current-day {
            border-color: #fff;
            background: rgba(255,255,255,0.2);
        }
        .timeline-day.execution-day {
            background: var(--blood-red);
            border-color: #ff4444;
            animation: pulse 1s infinite;
        }
        .timeline-day.passed-day {
            opacity: 0.3;
        }
        .timeline-day.safe-day {
            background: rgba(34,139,34,0.4);
            border-color: var(--freedom-green);
        }
        .timeline-day-name {
            font-size: 0.7rem;
            font-weight: 700;
            color: var(--parchment);
        }
        .timeline-day-icon {
            font-size: 1.5rem;
        }
        .timeline-arrow {
            font-size: 1.5rem;
            color: rgba(255,255,255,0.3);
        }
        .sim-status {
            text-align: center;
            padding: 20px;
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            margin: 20px 0;
        }
        .sim-status h4 {
            color: var(--parchment);
            margin-bottom: 10px;
            font-family: 'Lora', serif;
        }
        .sim-status p {
            color: rgba(255,255,255,0.8);
        }
        .surprise-meter {
            margin: 20px auto;
            max-width: 400px;
        }
        .surprise-meter-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.85rem;
            color: rgba(255,255,255,0.6);
        }
        .surprise-meter-bar {
            height: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            overflow: hidden;
        }
        .surprise-meter-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--freedom-green), #ffcc00, var(--blood-red));
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        /* Decision Tree Styles */
        .decision-tree-container {
            overflow-x: auto;
            padding: 20px 0;
        }
        .decision-tree {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 900px;
            padding: 20px;
        }
        .tree-level {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 10px 0;
            position: relative;
        }
        .tree-node {
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 12px;
            padding: 15px 20px;
            text-align: center;
            min-width: 150px;
            transition: all 0.3s ease;
            position: relative;
        }
        .tree-node.root {
            background: rgba(139,69,19,0.3);
            border-color: var(--rope-brown);
        }
        .tree-node.eliminated {
            background: rgba(139,0,0,0.3);
            border-color: var(--blood-red);
        }
        .tree-node.active {
            border-color: var(--parchment);
            box-shadow: 0 0 20px rgba(244,228,188,0.3);
        }
        .tree-node.conclusion {
            background: rgba(34,139,34,0.3);
            border-color: var(--freedom-green);
        }
        .tree-node.paradox {
            background: linear-gradient(135deg, rgba(139,0,0,0.3), rgba(34,139,34,0.3));
            border-color: #ffcc00;
            animation: paradoxPulse 2s infinite;
        }
        @keyframes paradoxPulse {
            0%, 100% { box-shadow: 0 0 20px rgba(255,204,0,0.3); }
            50% { box-shadow: 0 0 40px rgba(255,204,0,0.6); }
        }
        .tree-node-title {
            font-weight: 700;
            color: var(--parchment);
            margin-bottom: 5px;
        }
        .tree-node-text {
            font-size: 0.85rem;
            color: rgba(255,255,255,0.7);
        }
        .tree-connector {
            position: absolute;
            width: 2px;
            background: rgba(255,255,255,0.2);
            left: 50%;
            transform: translateX(-50%);
        }
        .tree-branch {
            position: absolute;
            height: 2px;
            background: rgba(255,255,255,0.2);
            top: -20px;
        }
        .tree-legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            color: rgba(255,255,255,0.7);
        }
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 5px;
        }
        .legend-color.root { background: rgba(139,69,19,0.5); border: 2px solid var(--rope-brown); }
        .legend-color.eliminated { background: rgba(139,0,0,0.5); border: 2px solid var(--blood-red); }
        .legend-color.active { background: rgba(255,255,255,0.2); border: 2px solid var(--parchment); }
        .legend-color.conclusion { background: rgba(34,139,34,0.5); border: 2px solid var(--freedom-green); }
        .legend-color.paradox { background: linear-gradient(135deg, rgba(139,0,0,0.5), rgba(34,139,34,0.5)); border: 2px solid #ffcc00; }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">Back to Paradoxes</a>

        <h1>The Unexpected Hanging Paradox</h1>
        <p class="subtitle">A prisoner uses flawless logic to prove a "surprise" execution is impossible. Then the executioner arrives and he's completely surprised.</p>

        <div class="scroll-box">
            <h2>The Judge's Decree</h2>
            <p>"You shall be <span class="highlight">hanged at noon</span> on one weekday next week. However, the execution will be a <span class="highlight">surprise</span> you will not know which day until the executioner arrives at your cell door."</p>
        </div>

        <!-- Tab Navigation -->
        <div class="tab-nav">
            <button class="tab-btn active" data-tab="classic">Classic Demonstration</button>
            <button class="tab-btn" data-tab="simulator">Week Simulator</button>
            <button class="tab-btn" data-tab="decision-tree">Decision Tree</button>
        </div>

        <!-- Classic Demonstration Tab -->
        <div class="tab-content active" id="classic-tab">
            <div class="prisoner-thought">
                <div class="prisoner-emoji" id="prisonerEmoji">?</div>
                <p id="prisonerThought">"Let me think about this carefully..."</p>
            </div>

            <div class="week-container" id="weekContainer">
                <div class="day-card" data-day="monday">
                    <div class="day-icon">M</div>
                    <div class="day-name">Monday</div>
                    <div class="day-status">Possible</div>
                </div>
                <div class="day-card" data-day="tuesday">
                    <div class="day-icon">T</div>
                    <div class="day-name">Tuesday</div>
                    <div class="day-status">Possible</div>
                </div>
                <div class="day-card" data-day="wednesday">
                    <div class="day-icon">W</div>
                    <div class="day-name">Wednesday</div>
                    <div class="day-status">Possible</div>
                </div>
                <div class="day-card" data-day="thursday">
                    <div class="day-icon">Th</div>
                    <div class="day-name">Thursday</div>
                    <div class="day-status">Possible</div>
                </div>
                <div class="day-card" data-day="friday">
                    <div class="day-icon">F</div>
                    <div class="day-name">Friday</div>
                    <div class="day-status">Possible</div>
                </div>
            </div>

            <div class="reasoning-section">
                <h2>The Prisoner's "Perfect" Logic</h2>

                <div class="reasoning-step" data-step="1">
                    <span class="step-number">1</span>
                    <p><strong>Friday is impossible.</strong> If I'm still alive Thursday night, Friday is the only day left. I'd KNOW it's Friday so it wouldn't be a surprise. Therefore, not Friday.</p>
                </div>

                <div class="reasoning-step" data-step="2">
                    <span class="step-number">2</span>
                    <p><strong>Thursday is impossible.</strong> Having eliminated Friday, if I'm alive Wednesday night, Thursday is the last possible day. I'd know no surprise. Therefore, not Thursday.</p>
                </div>

                <div class="reasoning-step" data-step="3">
                    <span class="step-number">3</span>
                    <p><strong>Wednesday is impossible.</strong> With Thursday and Friday eliminated, Wednesday becomes predictable by Tuesday night. No surprise possible. Therefore, not Wednesday.</p>
                </div>

                <div class="reasoning-step" data-step="4">
                    <span class="step-number">4</span>
                    <p><strong>Tuesday is impossible.</strong> Only Tuesday and Monday remain. By Monday night, I'd know it must be Tuesday. No surprise. Therefore, not Tuesday.</p>
                </div>

                <div class="reasoning-step" data-step="5">
                    <span class="step-number">5</span>
                    <p><strong>Monday is impossible.</strong> It's the only day left! I'd know right now it must be Monday. That's no surprise at all. Therefore, not Monday!</p>
                </div>

                <div class="reasoning-step" data-step="6">
                    <span class="step-number">6</span>
                    <p><strong>Conclusion:</strong> The execution cannot happen on ANY day without violating the "surprise" condition. The judge's decree is self-contradictory! I'm safe!</p>
                </div>
            </div>

            <div class="controls">
                <button class="control-btn primary" id="stepBtn">Next Step</button>
                <button class="control-btn danger" id="executeBtn" style="display: none;">Execute on Wednesday</button>
                <button class="control-btn secondary" id="resetBtn">Reset</button>
            </div>

            <div class="result-box prisoner-wins" id="prisonerResult">
                <h3>The Prisoner's Triumph!</h3>
                <p>Through pure logic, the prisoner has proven the execution cannot happen. He goes to sleep confident in his reasoning...</p>
            </div>

            <div class="result-box judge-wins" id="judgeResult">
                <h3>KNOCK KNOCK KNOCK!</h3>
                <p>Wednesday noon. The executioner arrives. The prisoner is <strong>utterly shocked</strong> he truly didn't expect it! The judge's conditions were perfectly satisfied. The prisoner's "perfect" logic failed him.</p>
            </div>
        </div>

        <!-- Week Simulator Tab -->
        <div class="tab-content" id="simulator-tab">
            <div class="simulator-section">
                <h3>Be the Judge: Choose the Execution Day</h3>
                <p class="simulator-instructions">Click on a day to secretly select it for the execution. Then advance through the week to see if the prisoner is surprised.</p>

                <div class="simulator-timeline" id="simTimeline">
                    <div class="timeline-day" data-sim-day="monday">
                        <span class="timeline-day-icon">M</span>
                        <span class="timeline-day-name">Mon</span>
                    </div>
                    <span class="timeline-arrow">-></span>
                    <div class="timeline-day" data-sim-day="tuesday">
                        <span class="timeline-day-icon">T</span>
                        <span class="timeline-day-name">Tue</span>
                    </div>
                    <span class="timeline-arrow">-></span>
                    <div class="timeline-day" data-sim-day="wednesday">
                        <span class="timeline-day-icon">W</span>
                        <span class="timeline-day-name">Wed</span>
                    </div>
                    <span class="timeline-arrow">-></span>
                    <div class="timeline-day" data-sim-day="thursday">
                        <span class="timeline-day-icon">Th</span>
                        <span class="timeline-day-name">Thu</span>
                    </div>
                    <span class="timeline-arrow">-></span>
                    <div class="timeline-day" data-sim-day="friday">
                        <span class="timeline-day-icon">F</span>
                        <span class="timeline-day-name">Fri</span>
                    </div>
                </div>

                <div class="sim-status" id="simStatus">
                    <h4>Phase 1: Select Execution Day</h4>
                    <p>Click on any day to secretly choose when the execution will happen.</p>
                </div>

                <div class="surprise-meter" id="surpriseMeter" style="display: none;">
                    <div class="surprise-meter-label">
                        <span>Expected</span>
                        <span>Prisoner's Surprise Level</span>
                        <span>Surprised!</span>
                    </div>
                    <div class="surprise-meter-bar">
                        <div class="surprise-meter-fill" id="surpriseFill" style="width: 50%;"></div>
                    </div>
                </div>

                <div class="controls">
                    <button class="control-btn primary" id="simNextDay" disabled>Advance to Next Day</button>
                    <button class="control-btn secondary" id="simReset">Reset Simulation</button>
                </div>

                <div class="prisoner-thought" id="simPrisonerThought" style="display: none;">
                    <div class="prisoner-emoji" id="simPrisonerEmoji">?</div>
                    <p id="simPrisonerThoughtText">"Hmm, today could be the day..."</p>
                </div>
            </div>
        </div>

        <!-- Decision Tree Tab -->
        <div class="tab-content" id="decision-tree-tab">
            <div class="simulator-section">
                <h3>Backward Induction Decision Tree</h3>
                <p class="simulator-instructions">This tree shows the prisoner's backward reasoning process. Watch how eliminating Friday cascades to eliminate all days.</p>

                <div class="tree-legend">
                    <div class="legend-item"><span class="legend-color root"></span> Starting Point</div>
                    <div class="legend-item"><span class="legend-color active"></span> Current Analysis</div>
                    <div class="legend-item"><span class="legend-color eliminated"></span> Eliminated Day</div>
                    <div class="legend-item"><span class="legend-color conclusion"></span> Prisoner's Conclusion</div>
                    <div class="legend-item"><span class="legend-color paradox"></span> The Paradox</div>
                </div>

                <div class="decision-tree-container">
                    <div class="decision-tree" id="decisionTree">
                        <!-- Tree will be generated by JavaScript -->
                    </div>
                </div>

                <div class="controls">
                    <button class="control-btn primary" id="treeStep">Advance Reasoning</button>
                    <button class="control-btn danger" id="treeReveal" style="display: none;">Reveal the Paradox</button>
                    <button class="control-btn secondary" id="treeReset">Reset Tree</button>
                </div>

                <div class="sim-status" id="treeStatus">
                    <h4>Step 0: Initial State</h4>
                    <p>The prisoner knows the execution will happen on one of the five weekdays and will be a "surprise."</p>
                </div>
            </div>
        </div>

        <div class="resolution-section">
            <h2>Where Did the Logic Go Wrong?</h2>
            <div class="resolution-grid">
                <div class="resolution-card">
                    <h4>Self-Reference Problem</h4>
                    <p>The prisoner's reasoning depends on <em>knowing</em> the judge speaks truth. But if he "knows" the execution will be a surprise, and uses that to prove no day works, he's created a contradiction. You can't simultaneously know a surprise will happen AND reason about it.</p>
                </div>
                <div class="resolution-card">
                    <h4>Knowledge vs. Belief</h4>
                    <p>The prisoner confuses what he can <em>deduce</em> with what he will <em>know</em>. His backward reasoning assumes he'll maintain certainty about his deductions but his own conclusion ("it can't happen") undermines the premises.</p>
                </div>
                <div class="resolution-card">
                    <h4>Temporal Paradox</h4>
                    <p>The prisoner reasons from "what I'll know Thursday night" but his conclusion (no execution) prevents him from ever reaching that state of knowledge. The reasoning is valid only in worlds where the conclusion is false!</p>
                </div>
                <div class="resolution-card">
                    <h4>The Key Insight</h4>
                    <p>Once the prisoner concludes "it can't happen," he stops expecting it. This makes EVERY day a potential surprise again! His logical victory is self-defeating by proving it impossible, he makes it possible.</p>
                </div>
            </div>
        </div>

        <div class="history-section">
            <h3>Origins of the Paradox</h3>
            <p style="line-height: 1.8; color: rgba(255,255,255,0.8); margin-bottom: 15px;">
                The paradox was discovered by Swedish mathematician <strong style="color: var(--parchment);">Lennart Ekbom</strong> in 1943-1944, inspired by a real announcement: Swedish radio declared a civil defense drill would occur the following week, but the exact day would be a surprise.
            </p>
            <p style="line-height: 1.8; color: rgba(255,255,255,0.8); margin-bottom: 15px;">
                It was popularized by <strong style="color: var(--parchment);">Martin Gardner</strong> in his March 1963 Scientific American column, sparking decades of philosophical debate.
            </p>
            <p style="line-height: 1.8; color: rgba(255,255,255,0.8);">
                The "surprise examination" variant is commonly used in philosophy courses: a professor announces a surprise quiz next week. Students use the same reasoning and are always surprised when the quiz arrives!
            </p>
        </div>

        <div class="sources">
            <h4>Sources</h4>
            <p>
                <a href="https://en.wikipedia.org/wiki/Unexpected_hanging_paradox">Wikipedia: Unexpected Hanging Paradox</a> |
                <a href="https://mathworld.wolfram.com/UnexpectedHangingParadox.html">Wolfram MathWorld</a> |
                <a href="https://plato.stanford.edu/entries/paradox-surprise/">Stanford Encyclopedia of Philosophy</a>
            </p>
        </div>
    </div>

    <script>
        // ==================== CLASSIC DEMONSTRATION ====================
        let currentStep = 0;
        const maxSteps = 7;
        const days = ['friday', 'thursday', 'wednesday', 'tuesday', 'monday'];

        const prisonerThoughts = [
            { emoji: '?', thought: '"Let me think about this carefully..."' },
            { emoji: '!', thought: '"Wait... Friday can\'t work! If I\'m alive Thursday night, I\'d KNOW it\'s Friday!"' },
            { emoji: '...', thought: '"And Thursday can\'t work either! Same logic applies once Friday is ruled out."' },
            { emoji: '!!', thought: '"Wednesday falls to the same reasoning. This is too easy!"' },
            { emoji: '!!!', thought: '"Tuesday? Nope! I\'d know by Monday night."' },
            { emoji: '!!!!', thought: '"Monday is the only day left which means I\'d know right now! No surprise possible!"' },
            { emoji: 'YES', thought: '"I\'VE DONE IT! The execution is logically impossible! I\'m saved!"' },
            { emoji: '?!', thought: '"W-WHAT?! The executioner?! But... but my logic was PERFECT!"' }
        ];

        function updateDisplay() {
            const thought = prisonerThoughts[Math.min(currentStep, prisonerThoughts.length - 1)];
            document.getElementById('prisonerEmoji').textContent = thought.emoji;
            document.getElementById('prisonerThought').textContent = thought.thought;

            document.querySelectorAll('.reasoning-step').forEach((step, index) => {
                if (index < currentStep) {
                    step.classList.add('complete');
                    step.classList.remove('active');
                } else if (index === currentStep) {
                    step.classList.add('active');
                    step.classList.remove('complete');
                } else {
                    step.classList.remove('active', 'complete');
                }
            });

            document.querySelectorAll('#weekContainer .day-card').forEach(card => {
                card.classList.remove('eliminated', 'execution', 'safe');
                card.querySelector('.day-status').textContent = 'Possible';
                card.querySelector('.day-icon').textContent = card.dataset.day.charAt(0).toUpperCase();
            });

            for (let i = 0; i < Math.min(currentStep, 5); i++) {
                const dayCard = document.querySelector(`#weekContainer [data-day="${days[i]}"]`);
                dayCard.classList.add('eliminated');
                dayCard.querySelector('.day-status').textContent = 'Eliminated';
                dayCard.querySelector('.day-icon').textContent = 'X';
            }

            document.getElementById('prisonerResult').style.display = currentStep === 6 ? 'block' : 'none';
            document.getElementById('judgeResult').style.display = currentStep === 7 ? 'block' : 'none';
            document.getElementById('executeBtn').style.display = currentStep === 6 ? 'inline-block' : 'none';
            document.getElementById('stepBtn').style.display = currentStep >= 6 ? 'none' : 'inline-block';

            if (currentStep === 6) {
                document.querySelectorAll('#weekContainer .day-card').forEach(card => {
                    card.classList.remove('eliminated');
                    card.classList.add('safe');
                    card.querySelector('.day-status').textContent = 'Safe!';
                    card.querySelector('.day-icon').textContent = 'OK';
                });
            }

            if (currentStep === 7) {
                document.querySelectorAll('#weekContainer .day-card').forEach(card => {
                    card.classList.remove('safe', 'eliminated');
                    card.querySelector('.day-status').textContent = 'Passed';
                    card.querySelector('.day-icon').textContent = card.dataset.day.charAt(0).toUpperCase();
                });
                const wednesday = document.querySelector('#weekContainer [data-day="wednesday"]');
                wednesday.classList.add('execution');
                wednesday.querySelector('.day-status').textContent = 'EXECUTION!';
                wednesday.querySelector('.day-icon').textContent = '!!';
            }
        }

        document.getElementById('stepBtn').addEventListener('click', () => {
            if (currentStep < 6) {
                currentStep++;
                updateDisplay();
            }
        });

        document.getElementById('executeBtn').addEventListener('click', () => {
            currentStep = 7;
            updateDisplay();
        });

        document.getElementById('resetBtn').addEventListener('click', () => {
            currentStep = 0;
            updateDisplay();
        });

        // ==================== TAB NAVIGATION ====================
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                btn.classList.add('active');
                document.getElementById(btn.dataset.tab + '-tab').classList.add('active');
            });
        });

        // ==================== WEEK SIMULATOR ====================
        let simSecretDay = null;
        let simCurrentDay = -1; // -1 = before week starts
        const simDays = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday'];
        const dayNames = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'];

        const simPrisonerReactions = {
            morning: [
                { emoji: '?', text: '"Morning... is today the day? My logic says no day can be a surprise..."' },
                { emoji: '...', text: '"Another morning. Still confident in my reasoning. No execution can surprise me."' },
                { emoji: '...', text: '"Halfway through the week. I\'m starting to feel safe..."' },
                { emoji: '!!', text: '"Thursday already! If no execution yet, Friday would be obvious... but I proved that impossible!"' },
                { emoji: '!!!', text: '"Friday morning. The last day. If it happens now, I\'d know but I proved it can\'t happen!"' }
            ],
            evening: [
                { emoji: '...', text: '"Monday night. Survived. Four days remain, which means I couldn\'t have predicted today anyway..."' },
                { emoji: '...', text: '"Tuesday night. Safe again. Maybe my logic really does work?"' },
                { emoji: '?', text: '"Wednesday night. More than half the week gone. My confidence grows..."' },
                { emoji: '!!', text: '"Thursday night! Only Friday left. But... wait... if I know it\'s Friday..."' },
                { emoji: '!!!', text: '"I survived the week! My logic was correct! The paradox is resolved... or is it?"' }
            ],
            execution: { emoji: '?!', text: '"WHAT?! The executioner?! But I calculated... I was CERTAIN..."' },
            surprised: { emoji: '?!', text: '"I... I genuinely did NOT expect this. My own logic blinded me!"' },
            notSurprised: { emoji: '!!', text: '"Aha! I KNEW it would be today! ...Wait, but if I knew, then the surprise condition fails..."' }
        };

        function updateSimulator() {
            const timelineDays = document.querySelectorAll('.timeline-day');
            timelineDays.forEach((day, index) => {
                day.classList.remove('secret-day', 'current-day', 'execution-day', 'passed-day', 'safe-day');
                if (simSecretDay === simDays[index] && simCurrentDay === -1) {
                    day.classList.add('secret-day');
                }
                if (index < simCurrentDay) {
                    day.classList.add('passed-day');
                }
                if (index === simCurrentDay) {
                    if (simSecretDay === simDays[index]) {
                        day.classList.add('execution-day');
                    } else {
                        day.classList.add('current-day');
                    }
                }
                if (simCurrentDay === 5 && simSecretDay !== simDays[index]) {
                    day.classList.add('safe-day');
                }
            });

            const statusEl = document.getElementById('simStatus');
            const surpriseMeter = document.getElementById('surpriseMeter');
            const prisonerThoughtEl = document.getElementById('simPrisonerThought');
            const nextDayBtn = document.getElementById('simNextDay');

            if (simSecretDay === null) {
                statusEl.innerHTML = '<h4>Phase 1: Select Execution Day</h4><p>Click on any day to secretly choose when the execution will happen.</p>';
                surpriseMeter.style.display = 'none';
                prisonerThoughtEl.style.display = 'none';
                nextDayBtn.disabled = true;
            } else if (simCurrentDay === -1) {
                statusEl.innerHTML = `<h4>Execution Set: ${dayNames[simDays.indexOf(simSecretDay)]}</h4><p>The prisoner doesn\'t know. Click "Advance" to start the week.</p>`;
                surpriseMeter.style.display = 'none';
                prisonerThoughtEl.style.display = 'none';
                nextDayBtn.disabled = false;
            } else if (simCurrentDay < 5) {
                const isExecutionDay = simSecretDay === simDays[simCurrentDay];

                if (isExecutionDay) {
                    statusEl.innerHTML = `<h4>EXECUTION DAY: ${dayNames[simCurrentDay]}</h4><p>The executioner arrives at the prisoner\'s cell!</p>`;

                    // Calculate surprise level
                    const daysRemaining = 5 - simCurrentDay;
                    const surpriseLevel = Math.min(100, 50 + (daysRemaining - 1) * 15);
                    document.getElementById('surpriseFill').style.width = surpriseLevel + '%';
                    surpriseMeter.style.display = 'block';

                    document.getElementById('simPrisonerEmoji').textContent = simPrisonerReactions.surprised.emoji;
                    document.getElementById('simPrisonerThoughtText').textContent = simPrisonerReactions.surprised.text;
                    prisonerThoughtEl.style.display = 'block';
                    nextDayBtn.disabled = true;
                } else {
                    statusEl.innerHTML = `<h4>Day ${simCurrentDay + 1}: ${dayNames[simCurrentDay]} Morning</h4><p>The prisoner wakes up. Will the executioner come today?</p>`;

                    const daysRemaining = 5 - simCurrentDay;
                    const expectation = Math.round(100 / daysRemaining);
                    document.getElementById('surpriseFill').style.width = (100 - expectation) + '%';
                    surpriseMeter.style.display = 'block';

                    document.getElementById('simPrisonerEmoji').textContent = simPrisonerReactions.morning[simCurrentDay].emoji;
                    document.getElementById('simPrisonerThoughtText').textContent = simPrisonerReactions.morning[simCurrentDay].text;
                    prisonerThoughtEl.style.display = 'block';
                    nextDayBtn.disabled = false;
                }
            } else {
                if (simSecretDay && simDays.indexOf(simSecretDay) >= 5) {
                    statusEl.innerHTML = '<h4>Week Complete!</h4><p>The prisoner survived the entire week. But... was this possible according to the judge\'s decree?</p>';
                } else {
                    statusEl.innerHTML = '<h4>Simulation Complete</h4><p>The paradox has played out. Reset to try a different day.</p>';
                }
                surpriseMeter.style.display = 'none';
                nextDayBtn.disabled = true;
            }
        }

        document.querySelectorAll('.timeline-day').forEach(day => {
            day.addEventListener('click', () => {
                if (simCurrentDay === -1) {
                    simSecretDay = day.dataset.simDay;
                    updateSimulator();
                }
            });
        });

        document.getElementById('simNextDay').addEventListener('click', () => {
            if (simSecretDay && simCurrentDay < 5) {
                simCurrentDay++;
                updateSimulator();
            }
        });

        document.getElementById('simReset').addEventListener('click', () => {
            simSecretDay = null;
            simCurrentDay = -1;
            updateSimulator();
        });

        // ==================== DECISION TREE ====================
        let treeStep = 0;
        const maxTreeSteps = 7;

        const treeData = [
            { id: 'root', title: 'Judge\'s Decree', text: '"Surprise execution this week"', type: 'root' },
            { id: 'fri', title: 'Friday?', text: 'Last day -> Predictable!', type: 'day', parent: 'root' },
            { id: 'thu', title: 'Thursday?', text: 'Last after Fri eliminated', type: 'day', parent: 'root' },
            { id: 'wed', title: 'Wednesday?', text: 'Last after Thu eliminated', type: 'day', parent: 'root' },
            { id: 'tue', title: 'Tuesday?', text: 'Last after Wed eliminated', type: 'day', parent: 'root' },
            { id: 'mon', title: 'Monday?', text: 'Only day left!', type: 'day', parent: 'root' },
            { id: 'conclusion', title: 'IMPOSSIBLE!', text: 'No day can be a surprise', type: 'conclusion' },
            { id: 'paradox', title: 'BUT WAIT...', text: 'Executioner arrives Wed!', type: 'paradox' }
        ];

        const treeStatusMessages = [
            { title: 'Step 0: Initial State', text: 'The prisoner knows the execution will happen on one of the five weekdays and will be a "surprise."' },
            { title: 'Step 1: Analyzing Friday', text: 'If the prisoner survives until Thursday night, Friday is the only day left. He\'d KNOW it\'s Friday no surprise possible.' },
            { title: 'Step 2: Analyzing Thursday', text: 'With Friday eliminated, Thursday becomes the "last day." Same logic applies Thursday is eliminated.' },
            { title: 'Step 3: Analyzing Wednesday', text: 'The cascade continues. Wednesday is now the last possible day, making it predictable. Eliminated.' },
            { title: 'Step 4: Analyzing Tuesday', text: 'Only Monday and Tuesday remain. By Monday night, the prisoner would know it\'s Tuesday. Eliminated.' },
            { title: 'Step 5: Analyzing Monday', text: 'Monday is the only day left! The prisoner knows right NOW it must be Monday. No surprise. Eliminated!' },
            { title: 'Step 6: Prisoner\'s Conclusion', text: 'Every day has been eliminated by backward induction. The prisoner concludes the execution is IMPOSSIBLE.' },
            { title: 'Step 7: The Paradox Revealed', text: 'Wednesday noon: KNOCK KNOCK! The executioner arrives. The prisoner is GENUINELY SURPRISED his logic made him stop expecting it!' }
        ];

        function renderDecisionTree() {
            const container = document.getElementById('decisionTree');
            container.innerHTML = '';

            // Root level
            const rootLevel = document.createElement('div');
            rootLevel.className = 'tree-level';
            const rootNode = createTreeNode('root', treeStep >= 0);
            rootLevel.appendChild(rootNode);
            container.appendChild(rootLevel);

            // Days level
            if (treeStep >= 1) {
                const daysLevel = document.createElement('div');
                daysLevel.className = 'tree-level';

                const dayIds = ['fri', 'thu', 'wed', 'tue', 'mon'];
                dayIds.forEach((dayId, index) => {
                    if (treeStep >= index + 1) {
                        const node = createTreeNode(dayId, treeStep === index + 1, treeStep > index + 1);
                        daysLevel.appendChild(node);
                    }
                });

                container.appendChild(daysLevel);
            }

            // Conclusion level
            if (treeStep >= 6) {
                const conclusionLevel = document.createElement('div');
                conclusionLevel.className = 'tree-level';
                const conclusionNode = createTreeNode('conclusion', treeStep === 6);
                conclusionLevel.appendChild(conclusionNode);
                container.appendChild(conclusionLevel);
            }

            // Paradox level
            if (treeStep >= 7) {
                const paradoxLevel = document.createElement('div');
                paradoxLevel.className = 'tree-level';
                const paradoxNode = createTreeNode('paradox', true);
                paradoxLevel.appendChild(paradoxNode);
                container.appendChild(paradoxLevel);
            }

            // Update status
            const statusMsg = treeStatusMessages[treeStep];
            document.getElementById('treeStatus').innerHTML = `<h4>${statusMsg.title}</h4><p>${statusMsg.text}</p>`;

            // Update buttons
            document.getElementById('treeStep').style.display = treeStep < 6 ? 'inline-block' : 'none';
            document.getElementById('treeReveal').style.display = treeStep === 6 ? 'inline-block' : 'none';
        }

        function createTreeNode(id, isActive, isEliminated = false) {
            const data = treeData.find(d => d.id === id);
            const node = document.createElement('div');
            node.className = 'tree-node';

            if (data.type === 'root') node.classList.add('root');
            if (data.type === 'conclusion') node.classList.add('conclusion');
            if (data.type === 'paradox') node.classList.add('paradox');
            if (isActive && data.type === 'day') node.classList.add('active');
            if (isEliminated && data.type === 'day') node.classList.add('eliminated');

            node.innerHTML = `
                <div class="tree-node-title">${data.title}</div>
                <div class="tree-node-text">${data.text}</div>
            `;

            return node;
        }

        document.getElementById('treeStep').addEventListener('click', () => {
            if (treeStep < 6) {
                treeStep++;
                renderDecisionTree();
            }
        });

        document.getElementById('treeReveal').addEventListener('click', () => {
            treeStep = 7;
            renderDecisionTree();
        });

        document.getElementById('treeReset').addEventListener('click', () => {
            treeStep = 0;
            renderDecisionTree();
        });

        // Initialize all components
        updateDisplay();
        updateSimulator();
        renderDecisionTree();
    </script>
</body>
</html>
