<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bertrand's Paradox - Three Answers to One Question | Surprising Paradoxes #659</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #0a192f 0%, #112240 50%, #0a192f 100%);
            min-height: 100vh;
            color: #ccd6f6;
            overflow-x: hidden;
        }
        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #64ffda;
            text-decoration: none;
            font-size: 0.9rem;
            z-index: 100;
            padding: 8px 16px;
            background: rgba(0,0,0,0.4);
            border-radius: 20px;
            transition: all 0.3s;
        }
        .back-link:hover { background: rgba(100,255,218,0.2); }

        header {
            text-align: center;
            padding: 60px 20px 30px;
        }
        h1 {
            font-size: 2.8rem;
            background: linear-gradient(135deg, #64ffda, #63b3ed);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        .subtitle {
            color: #8892b0;
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px 40px;
        }

        .hook {
            background: linear-gradient(135deg, rgba(100,255,218,0.1), rgba(99,179,237,0.1));
            border: 2px solid rgba(100,255,218,0.3);
            border-radius: 16px;
            padding: 25px;
            text-align: center;
            margin-bottom: 30px;
        }
        .hook h2 {
            font-size: 1.5rem;
            color: #64ffda;
            margin-bottom: 10px;
        }
        .hook p {
            color: #a8b2d1;
            font-size: 1rem;
        }

        .question-box {
            background: rgba(17,34,64,0.8);
            border-radius: 16px;
            padding: 25px;
            border: 1px solid rgba(100,255,218,0.2);
            margin-bottom: 30px;
            text-align: center;
        }
        .question-box h3 {
            color: #64ffda;
            margin-bottom: 15px;
        }
        .question-box p {
            color: #ccd6f6;
            font-size: 1.1rem;
            line-height: 1.6;
        }
        .question-box .highlight {
            color: #f7df1e;
            font-weight: 600;
        }

        .methods-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .method-card {
            background: rgba(17,34,64,0.8);
            border-radius: 16px;
            padding: 20px;
            border: 2px solid rgba(100,255,218,0.2);
            transition: all 0.3s;
            cursor: pointer;
        }
        .method-card:hover {
            border-color: rgba(100,255,218,0.5);
            transform: translateY(-5px);
        }
        .method-card.active {
            border-color: #64ffda;
            box-shadow: 0 0 30px rgba(100,255,218,0.2);
        }

        .method-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        .method-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
        }
        .method-1 .method-number { background: #ef4444; color: white; }
        .method-2 .method-number { background: #22c55e; color: white; }
        .method-3 .method-number { background: #3b82f6; color: white; }

        .method-title {
            font-size: 1.1rem;
            color: #ccd6f6;
        }

        .method-answer {
            font-size: 2.5rem;
            font-weight: bold;
            text-align: center;
            margin: 15px 0;
        }
        .method-1 .method-answer { color: #ef4444; }
        .method-2 .method-answer { color: #22c55e; }
        .method-3 .method-answer { color: #3b82f6; }

        .method-desc {
            font-size: 0.9rem;
            color: #8892b0;
            text-align: center;
        }

        .simulation-section {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 30px;
        }

        .canvas-container {
            background: rgba(17,34,64,0.8);
            border-radius: 16px;
            padding: 20px;
            border: 1px solid rgba(100,255,218,0.2);
        }

        #mainCanvas {
            width: 100%;
            border-radius: 12px;
            background: #0a192f;
        }

        .controls-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .panel {
            background: rgba(17,34,64,0.8);
            border-radius: 16px;
            padding: 20px;
            border: 1px solid rgba(100,255,218,0.2);
        }
        .panel h3 {
            color: #64ffda;
            font-size: 1rem;
            margin-bottom: 15px;
        }

        .btn-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        .btn:hover { transform: translateY(-2px); }

        .btn-draw {
            background: linear-gradient(135deg, #64ffda, #4fd1c5);
            color: #0a192f;
        }
        .btn-simulate {
            background: linear-gradient(135deg, #f7df1e, #eab308);
            color: #0a192f;
        }
        .btn-clear {
            background: rgba(239,68,68,0.2);
            color: #ef4444;
            border: 1px solid rgba(239,68,68,0.3);
        }

        .stats-display {
            margin-top: 15px;
        }
        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            margin-bottom: 8px;
        }
        .stat-row .label { color: #8892b0; }
        .stat-row .value { font-weight: 600; color: #64ffda; }

        .progress-bar {
            height: 30px;
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
            overflow: hidden;
            margin-top: 15px;
        }
        .progress-fill {
            height: 100%;
            transition: width 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.85rem;
        }
        .method-1 .progress-fill { background: linear-gradient(90deg, #ef4444, #f87171); }
        .method-2 .progress-fill { background: linear-gradient(90deg, #22c55e, #4ade80); }
        .method-3 .progress-fill { background: linear-gradient(90deg, #3b82f6, #60a5fa); }

        .expected-label {
            text-align: center;
            font-size: 0.8rem;
            color: #8892b0;
            margin-top: 5px;
        }

        .explanation {
            margin-top: 30px;
        }
        .explanation-card {
            background: rgba(17,34,64,0.8);
            border-radius: 16px;
            padding: 25px;
            border: 1px solid rgba(100,255,218,0.2);
            margin-bottom: 20px;
        }
        .explanation-card h3 {
            color: #64ffda;
            margin-bottom: 15px;
        }
        .explanation-card p {
            color: #8892b0;
            line-height: 1.8;
            margin-bottom: 12px;
        }

        .method-explanation {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        .method-box {
            padding: 15px;
            border-radius: 10px;
        }
        .method-box.m1 { background: rgba(239,68,68,0.1); border: 1px solid rgba(239,68,68,0.3); }
        .method-box.m2 { background: rgba(34,197,94,0.1); border: 1px solid rgba(34,197,94,0.3); }
        .method-box.m3 { background: rgba(59,130,246,0.1); border: 1px solid rgba(59,130,246,0.3); }
        .method-box h4 { margin-bottom: 8px; }
        .method-box.m1 h4 { color: #ef4444; }
        .method-box.m2 h4 { color: #22c55e; }
        .method-box.m3 h4 { color: #3b82f6; }
        .method-box p { font-size: 0.85rem; }

        .jaynes-box {
            background: linear-gradient(135deg, rgba(247,223,30,0.1), rgba(234,179,8,0.1));
            border: 1px solid rgba(247,223,30,0.3);
            border-radius: 12px;
            padding: 20px;
            margin-top: 15px;
        }
        .jaynes-box h4 {
            color: #f7df1e;
            margin-bottom: 10px;
        }

        @media (max-width: 1000px) {
            .methods-grid { grid-template-columns: 1fr; }
            .simulation-section { grid-template-columns: 1fr; }
            .method-explanation { grid-template-columns: 1fr; }
            h1 { font-size: 2rem; }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">← Back to Paradoxes</a>

    <header>
        <h1>Bertrand's Paradox</h1>
        <p class="subtitle">One question. Three different correct answers. What does "random" really mean?</p>
    </header>

    <div class="container">
        <div class="hook">
            <h2>THE SAME QUESTION HAS THREE ANSWERS!</h2>
            <p>Draw a random chord in a circle. What's the probability it's longer than the side of an inscribed equilateral triangle? The answer is 1/3... or 1/2... or 1/4. All are correct!</p>
        </div>

        <div class="question-box">
            <h3>Bertrand's Question (1889)</h3>
            <p>Consider a circle with an inscribed equilateral triangle. If we draw a <span class="highlight">"random" chord</span> in the circle, what is the probability that the chord is <span class="highlight">longer than a side of the triangle</span>?</p>
        </div>

        <div class="methods-grid">
            <div class="method-card method-1" data-method="1" onclick="selectMethod(1)">
                <div class="method-header">
                    <div class="method-number">1</div>
                    <div class="method-title">Random Endpoints</div>
                </div>
                <div class="method-answer">P = 1/3</div>
                <div class="method-desc">Pick two random points on the circle's edge</div>
            </div>

            <div class="method-card method-2" data-method="2" onclick="selectMethod(2)">
                <div class="method-header">
                    <div class="method-number">2</div>
                    <div class="method-title">Random Radius</div>
                </div>
                <div class="method-answer">P = 1/2</div>
                <div class="method-desc">Pick a random point on a radius as chord midpoint</div>
            </div>

            <div class="method-card method-3" data-method="3" onclick="selectMethod(3)">
                <div class="method-header">
                    <div class="method-number">3</div>
                    <div class="method-title">Random Midpoint</div>
                </div>
                <div class="method-answer">P = 1/4</div>
                <div class="method-desc">Pick a random point inside circle as chord midpoint</div>
            </div>
        </div>

        <div class="simulation-section">
            <div class="canvas-container">
                <canvas id="mainCanvas" width="600" height="600"></canvas>
            </div>

            <div class="controls-panel">
                <div class="panel method-1" id="currentMethodPanel">
                    <h3>Method <span id="methodNum">1</span>: <span id="methodName">Random Endpoints</span></h3>

                    <div class="btn-group">
                        <button class="btn btn-draw" id="drawOneBtn">Draw One Chord</button>
                        <button class="btn btn-simulate" id="draw100Btn">Draw 100 Chords</button>
                        <button class="btn btn-simulate" id="draw1000Btn">Draw 1000 Chords</button>
                        <button class="btn btn-clear" id="clearBtn">Clear</button>
                    </div>

                    <div class="stats-display">
                        <div class="stat-row">
                            <span class="label">Total Chords</span>
                            <span class="value" id="totalChords">0</span>
                        </div>
                        <div class="stat-row">
                            <span class="label">Longer than side</span>
                            <span class="value" id="longerCount">0</span>
                        </div>
                        <div class="stat-row">
                            <span class="label">Observed Probability</span>
                            <span class="value" id="observedProb">--</span>
                        </div>
                    </div>

                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%">0%</div>
                    </div>
                    <div class="expected-label">Expected: <span id="expectedProb">33.3%</span></div>
                </div>
            </div>
        </div>

        <div class="explanation">
            <div class="explanation-card">
                <h3>Why Three Different Answers?</h3>
                <p>The word "random" is ambiguous! Each method defines a different probability distribution over chords:</p>

                <div class="method-explanation">
                    <div class="method-box m1">
                        <h4>Method 1: Random Endpoints → 1/3</h4>
                        <p>Pick two points uniformly on the circumference. Only 1/3 of the arc produces long chords.</p>
                    </div>
                    <div class="method-box m2">
                        <h4>Method 2: Random Radius → 1/2</h4>
                        <p>Pick a point uniformly on a radius. The inner half produces long chords.</p>
                    </div>
                    <div class="method-box m3">
                        <h4>Method 3: Random Midpoint → 1/4</h4>
                        <p>Pick a point uniformly in the disk. Only the inner circle (1/4 area) produces long chords.</p>
                    </div>
                </div>
            </div>

            <div class="explanation-card">
                <h3>The Resolution</h3>
                <p>Bertrand's paradox is not really a paradox—it's a lesson about precise problem formulation. The question "choose a random chord" is <strong>ill-posed</strong> because it doesn't specify the probability distribution.</p>
                <p>Once you specify HOW chords are selected randomly, the problem has a unique, well-defined answer. The three methods are three different well-posed problems!</p>

                <div class="jaynes-box">
                    <h4>Jaynes' Solution (1973)</h4>
                    <p>Physicist E.T. Jaynes argued that Method 2 (P = 1/2) is the "correct" answer using the Principle of Maximum Entropy. He showed it's the only method that is invariant under scaling, rotation, AND translation—the only one that treats all chords "fairly" regardless of where we place the circle.</p>
                </div>
            </div>

            <div class="explanation-card">
                <h3>Why It Matters</h3>
                <p><strong>Probability Theory:</strong> This paradox helped motivate the rigorous, measure-theoretic foundations of probability developed by Kolmogorov.</p>
                <p><strong>Philosophy:</strong> It shows that "randomness" is not a property of the world, but of our models. We must always specify our probability distribution.</p>
                <p><strong>Applications:</strong> Similar issues arise in Bayesian statistics (choosing priors), Monte Carlo simulation (sampling methods), and physics (ergodic theory).</p>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('mainCanvas');
        const ctx = canvas.getContext('2d');

        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        const radius = 250;
        const triangleSide = radius * Math.sqrt(3); // Side length of inscribed equilateral triangle

        let currentMethod = 1;
        let stats = { total: 0, longer: 0 };
        let chords = [];

        const expectedProbs = { 1: 1/3, 2: 1/2, 3: 1/4 };
        const methodNames = {
            1: 'Random Endpoints',
            2: 'Random Radius',
            3: 'Random Midpoint'
        };

        function selectMethod(method) {
            currentMethod = method;

            // Update UI
            document.querySelectorAll('.method-card').forEach(card => {
                card.classList.toggle('active', parseInt(card.dataset.method) === method);
            });

            const panel = document.getElementById('currentMethodPanel');
            panel.className = `panel method-${method}`;
            document.getElementById('methodNum').textContent = method;
            document.getElementById('methodName').textContent = methodNames[method];
            document.getElementById('expectedProb').textContent = (expectedProbs[method] * 100).toFixed(1) + '%';

            // Clear and redraw
            clearChords();
        }

        function drawBase() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw main circle
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
            ctx.strokeStyle = '#64ffda';
            ctx.lineWidth = 2;
            ctx.stroke();

            // Draw inscribed equilateral triangle
            ctx.beginPath();
            for (let i = 0; i < 3; i++) {
                const angle = (i * 2 * Math.PI / 3) - Math.PI / 2;
                const x = centerX + radius * Math.cos(angle);
                const y = centerY + radius * Math.sin(angle);
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.closePath();
            ctx.strokeStyle = '#f7df1e';
            ctx.lineWidth = 3;
            ctx.stroke();

            // Draw inner circle for Method 3 visualization
            if (currentMethod === 3) {
                ctx.beginPath();
                ctx.arc(centerX, centerY, radius / 2, 0, Math.PI * 2);
                ctx.strokeStyle = 'rgba(59, 130, 246, 0.5)';
                ctx.lineWidth = 2;
                ctx.setLineDash([5, 5]);
                ctx.stroke();
                ctx.setLineDash([]);
            }

            // Draw radius line for Method 2 visualization
            if (currentMethod === 2) {
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.lineTo(centerX + radius, centerY);
                ctx.strokeStyle = 'rgba(34, 197, 94, 0.5)';
                ctx.lineWidth = 2;
                ctx.setLineDash([5, 5]);
                ctx.stroke();
                ctx.setLineDash([]);

                // Mark the midpoint threshold
                ctx.beginPath();
                ctx.arc(centerX + radius / 2, centerY, 5, 0, Math.PI * 2);
                ctx.fillStyle = '#22c55e';
                ctx.fill();
            }
        }

        function generateChord() {
            let x1, y1, x2, y2, midX, midY;

            if (currentMethod === 1) {
                // Random Endpoints: Two random points on circumference
                const angle1 = Math.random() * Math.PI * 2;
                const angle2 = Math.random() * Math.PI * 2;
                x1 = centerX + radius * Math.cos(angle1);
                y1 = centerY + radius * Math.sin(angle1);
                x2 = centerX + radius * Math.cos(angle2);
                y2 = centerY + radius * Math.sin(angle2);
            } else if (currentMethod === 2) {
                // Random Radius: Random point on radius as midpoint
                const radiusAngle = Math.random() * Math.PI * 2;
                const dist = Math.random() * radius;
                midX = centerX + dist * Math.cos(radiusAngle);
                midY = centerY + dist * Math.sin(radiusAngle);

                // Calculate chord endpoints perpendicular to radius
                const chordHalfLength = Math.sqrt(radius * radius - dist * dist);
                const perpAngle = radiusAngle + Math.PI / 2;
                x1 = midX + chordHalfLength * Math.cos(perpAngle);
                y1 = midY + chordHalfLength * Math.sin(perpAngle);
                x2 = midX - chordHalfLength * Math.cos(perpAngle);
                y2 = midY - chordHalfLength * Math.sin(perpAngle);
            } else {
                // Random Midpoint: Random point inside circle as midpoint
                // Use rejection sampling for uniform distribution in disk
                do {
                    midX = centerX + (Math.random() * 2 - 1) * radius;
                    midY = centerY + (Math.random() * 2 - 1) * radius;
                } while ((midX - centerX) ** 2 + (midY - centerY) ** 2 > radius * radius);

                const dist = Math.sqrt((midX - centerX) ** 2 + (midY - centerY) ** 2);
                if (dist === 0) {
                    // Diameter through center
                    x1 = centerX + radius;
                    y1 = centerY;
                    x2 = centerX - radius;
                    y2 = centerY;
                } else {
                    const chordHalfLength = Math.sqrt(radius * radius - dist * dist);
                    const perpAngle = Math.atan2(midY - centerY, midX - centerX) + Math.PI / 2;
                    x1 = midX + chordHalfLength * Math.cos(perpAngle);
                    y1 = midY + chordHalfLength * Math.sin(perpAngle);
                    x2 = midX - chordHalfLength * Math.cos(perpAngle);
                    y2 = midY - chordHalfLength * Math.sin(perpAngle);
                }
            }

            const length = Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2);
            const isLonger = length > triangleSide;

            return { x1, y1, x2, y2, length, isLonger };
        }

        function drawChord(chord) {
            ctx.beginPath();
            ctx.moveTo(chord.x1, chord.y1);
            ctx.lineTo(chord.x2, chord.y2);
            ctx.strokeStyle = chord.isLonger ? 'rgba(34, 197, 94, 0.6)' : 'rgba(239, 68, 68, 0.4)';
            ctx.lineWidth = 1;
            ctx.stroke();
        }

        function addChords(count) {
            for (let i = 0; i < count; i++) {
                const chord = generateChord();
                chords.push(chord);
                stats.total++;
                if (chord.isLonger) stats.longer++;
            }
            redraw();
            updateStats();
        }

        function redraw() {
            drawBase();
            chords.forEach(drawChord);
        }

        function updateStats() {
            document.getElementById('totalChords').textContent = stats.total;
            document.getElementById('longerCount').textContent = stats.longer;

            const prob = stats.total > 0 ? stats.longer / stats.total : 0;
            document.getElementById('observedProb').textContent = stats.total > 0 ? (prob * 100).toFixed(1) + '%' : '--';

            const fill = document.getElementById('progressFill');
            fill.style.width = (prob * 100) + '%';
            fill.textContent = stats.total > 0 ? (prob * 100).toFixed(1) + '%' : '0%';
        }

        function clearChords() {
            chords = [];
            stats = { total: 0, longer: 0 };
            redraw();
            updateStats();
        }

        document.getElementById('drawOneBtn').addEventListener('click', () => addChords(1));
        document.getElementById('draw100Btn').addEventListener('click', () => addChords(100));
        document.getElementById('draw1000Btn').addEventListener('click', () => addChords(1000));
        document.getElementById('clearBtn').addEventListener('click', clearChords);

        // Initialize
        selectMethod(1);
        drawBase();
    </script>
</body>
</html>
