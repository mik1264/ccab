<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verbal Overshadowing - Surprising Paradoxes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #e0e0e0;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 30px 0;
        }

        h1 {
            font-size: 2.4em;
            background: linear-gradient(135deg, #e74c3c, #9b59b6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.3em;
            color: #a0a0a0;
            font-style: italic;
        }

        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #e74c3c;
            text-decoration: none;
            font-size: 1em;
            opacity: 0.8;
            transition: opacity 0.3s;
            z-index: 100;
        }

        .back-link:hover {
            opacity: 1;
        }

        .panel {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .panel h2 {
            color: #e74c3c;
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        .phase-indicator {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .phase-dot {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transition: all 0.3s;
        }

        .phase-dot.active {
            background: linear-gradient(135deg, #e74c3c, #9b59b6);
            transform: scale(1.1);
        }

        .phase-dot.completed {
            background: #4CAF50;
        }

        .intro-content {
            line-height: 1.8;
            font-size: 1.05em;
        }

        .hook {
            font-size: 1.4em;
            color: #e74c3c;
            text-align: center;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .stat-highlight {
            background: rgba(231, 76, 60, 0.2);
            padding: 15px 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #e74c3c;
        }

        /* Face Display */
        .face-container {
            display: flex;
            justify-content: center;
            padding: 40px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            margin: 20px 0;
        }

        .face {
            width: 200px;
            height: 250px;
            background: #f5d5c8;
            border-radius: 50% 50% 45% 45%;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .hair {
            position: absolute;
            width: 220px;
            height: 120px;
            background: #3d2314;
            top: -20px;
            left: -10px;
            border-radius: 50% 50% 0 0;
        }

        .eyes {
            position: absolute;
            top: 90px;
            left: 35px;
            right: 35px;
            display: flex;
            justify-content: space-between;
        }

        .eye {
            width: 35px;
            height: 20px;
            background: white;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
        }

        .pupil {
            width: 15px;
            height: 15px;
            background: #2c1810;
            border-radius: 50%;
            position: absolute;
            top: 3px;
            left: 10px;
        }

        .eyebrow {
            position: absolute;
            width: 40px;
            height: 8px;
            background: #3d2314;
            border-radius: 10px;
            top: 75px;
        }

        .eyebrow.left { left: 30px; transform: rotate(-5deg); }
        .eyebrow.right { right: 30px; transform: rotate(5deg); }

        .nose {
            position: absolute;
            top: 120px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 35px;
            background: #e8c4b8;
            border-radius: 0 0 50% 50%;
        }

        .mouth {
            position: absolute;
            top: 175px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 15px;
            background: #c0392b;
            border-radius: 0 0 25px 25px;
        }

        .countdown-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4em;
            color: #e74c3c;
            border-radius: 15px;
        }

        /* Description Phase */
        .description-area {
            margin: 20px 0;
        }

        .description-area textarea {
            width: 100%;
            height: 150px;
            padding: 15px;
            font-size: 1.1em;
            border: 2px solid #e74c3c;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            resize: none;
        }

        .description-area textarea:focus {
            outline: none;
            box-shadow: 0 0 20px rgba(231, 76, 60, 0.5);
        }

        .filler-task {
            text-align: center;
            padding: 30px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
        }

        .filler-number {
            font-size: 3em;
            color: #3498db;
            margin: 20px 0;
        }

        /* Lineup */
        .lineup-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 20px 0;
        }

        .lineup-option {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
            text-align: center;
        }

        .lineup-option:hover {
            transform: scale(1.02);
            border-color: rgba(231, 76, 60, 0.5);
        }

        .lineup-option.selected {
            border-color: #e74c3c;
            background: rgba(231, 76, 60, 0.2);
        }

        .lineup-face {
            width: 120px;
            height: 150px;
            margin: 0 auto 10px;
            background: #f5d5c8;
            border-radius: 50% 50% 45% 45%;
            position: relative;
        }

        .lineup-face .hair {
            width: 130px;
            height: 70px;
            top: -10px;
            left: -5px;
        }

        .lineup-face .eyes {
            top: 55px;
            left: 20px;
            right: 20px;
        }

        .lineup-face .eye {
            width: 25px;
            height: 14px;
        }

        .lineup-face .pupil {
            width: 10px;
            height: 10px;
            top: 2px;
            left: 7px;
        }

        .lineup-face .eyebrow {
            width: 28px;
            height: 5px;
            top: 45px;
        }

        .lineup-face .eyebrow.left { left: 18px; }
        .lineup-face .eyebrow.right { right: 18px; }

        .lineup-face .nose {
            top: 70px;
            width: 12px;
            height: 22px;
        }

        .lineup-face .mouth {
            top: 105px;
            width: 30px;
            height: 10px;
        }

        .option-number {
            font-size: 1.2em;
            color: #a0a0a0;
            margin-top: 10px;
        }

        /* Results */
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .result-card {
            background: rgba(0, 0, 0, 0.3);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
        }

        .result-card h3 {
            color: #a0a0a0;
            font-size: 0.9em;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .result-value {
            font-size: 2.5em;
            font-weight: bold;
        }

        .result-correct { color: #4CAF50; }
        .result-incorrect { color: #e74c3c; }

        .comparison-chart {
            background: rgba(0, 0, 0, 0.3);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .bar-comparison {
            margin: 20px 0;
        }

        .bar-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .bar-container {
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            overflow: hidden;
        }

        .bar-fill {
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            transition: width 1s ease-out;
        }

        .bar-control {
            background: linear-gradient(90deg, #3498db, #2980b9);
        }

        .bar-verbal {
            background: linear-gradient(90deg, #e74c3c, #c0392b);
        }

        /* Mechanism section */
        .mechanism-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .mechanism-card {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid rgba(231, 76, 60, 0.3);
        }

        .mechanism-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .mechanism-card h4 {
            color: #e74c3c;
            margin-bottom: 8px;
        }

        .mechanism-card p {
            font-size: 0.85em;
            color: #a0a0a0;
        }

        .reference {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-size: 0.9em;
            border-left: 3px solid #9b59b6;
        }

        .btn {
            padding: 15px 40px;
            font-size: 1.2em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .btn-primary {
            background: linear-gradient(135deg, #e74c3c, #9b59b6);
            color: white;
        }

        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .hidden {
            display: none !important;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .timer {
            font-size: 2em;
            text-align: center;
            color: #e74c3c;
            margin: 15px 0;
        }

        .legal-implications {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .legal-card {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 10px;
        }

        .legal-card h4 {
            color: #f39c12;
            margin-bottom: 8px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 15px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #e74c3c, #9b59b6);
            transition: width 0.1s;
        }

        @media (max-width: 600px) {
            h1 { font-size: 1.8em; }
            .lineup-grid { grid-template-columns: repeat(2, 1fr); }
            .lineup-face { width: 100px; height: 130px; }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back to Paradoxes</a>

    <div class="container">
        <header>
            <h1>Verbal Overshadowing</h1>
            <p class="subtitle">When Words Erase What Your Eyes Saw</p>
        </header>

        <div class="phase-indicator">
            <div class="phase-dot active" id="phase1">1</div>
            <div class="phase-dot" id="phase2">2</div>
            <div class="phase-dot" id="phase3">3</div>
            <div class="phase-dot" id="phase4">4</div>
            <div class="phase-dot" id="phase5">5</div>
        </div>

        <!-- PHASE 1: Introduction -->
        <div id="introSection" class="panel fade-in">
            <div class="hook">DESCRIBING A FACE MAKES YOU WORSE AT RECOGNIZING IT!</div>

            <div class="intro-content">
                <p>Here's a deeply counterintuitive finding: if you witness a crime and then <strong>describe the perpetrator's face</strong>, you become <em>significantly worse</em> at picking them out of a lineup.</p>

                <div class="stat-highlight">
                    <strong>Schooler & Engstler-Schooler (1990)</strong> found that participants who described a face correctly identified it only <strong>38% of the time</strong>‚Äîcompared to <strong>64%</strong> for those who did an unrelated task. That's a <strong>27% reduction</strong> in accuracy from simply putting the face into words!
                </div>

                <p>This effect challenges common police practices. Witnesses are routinely asked to describe suspects in detail before viewing lineups‚Äîyet this "helpful" verbalization may actually <em>overwrite</em> their visual memory with an inferior verbal representation.</p>

                <p><strong>Ready to experience it?</strong> You'll see a face briefly, then either describe it OR do a filler task. Finally, you'll try to identify the face from a lineup.</p>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-primary" onclick="startExperiment()">Begin Experiment</button>
            </div>
        </div>

        <!-- PHASE 2: View Face -->
        <div id="viewSection" class="panel hidden">
            <h2>Study Phase: Memorize This Face</h2>
            <p style="text-align: center;">Look carefully at this face. You'll need to identify it later.</p>

            <div class="face-container" id="faceDisplay">
                <div class="face" id="targetFace">
                    <div class="hair" id="targetHair"></div>
                    <div class="eyebrow left" id="targetEyebrowL"></div>
                    <div class="eyebrow right" id="targetEyebrowR"></div>
                    <div class="eyes">
                        <div class="eye"><div class="pupil"></div></div>
                        <div class="eye"><div class="pupil"></div></div>
                    </div>
                    <div class="nose" id="targetNose"></div>
                    <div class="mouth" id="targetMouth"></div>
                </div>
                <div class="countdown-overlay hidden" id="viewCountdown">5</div>
            </div>

            <div class="timer">Time remaining: <span id="viewTime">5</span>s</div>
        </div>

        <!-- PHASE 3: Description OR Filler -->
        <div id="taskSection" class="panel hidden">
            <h2 id="taskTitle">Your Task</h2>

            <!-- Verbal Description Condition -->
            <div id="descriptionTask" class="hidden">
                <p>Describe the face you just saw in as much detail as possible. Include features like hair, eyes, nose, mouth, face shape, and any distinguishing characteristics.</p>

                <div class="description-area">
                    <textarea id="descriptionText" placeholder="Describe the face in detail... (hair color, eye shape, nose size, mouth width, etc.)"></textarea>
                </div>

                <div class="timer">Time remaining: <span id="descTime">60</span>s</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="descProgress" style="width: 100%"></div>
                </div>
            </div>

            <!-- Filler Task Condition -->
            <div id="fillerTask" class="hidden">
                <div class="filler-task">
                    <p>Count backwards from this number by 7s in your head...</p>
                    <div class="filler-number" id="fillerNumber">347</div>
                    <p style="color: #a0a0a0; margin-top: 10px;">This is just a distractor task. Keep counting!</p>
                </div>

                <div class="timer">Time remaining: <span id="fillTime">60</span>s</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="fillProgress" style="width: 100%"></div>
                </div>
            </div>
        </div>

        <!-- PHASE 4: Lineup -->
        <div id="lineupSection" class="panel hidden">
            <h2>Recognition Test: Find the Face</h2>
            <p style="text-align: center;">Which face did you see earlier? Click to select.</p>

            <div class="lineup-grid" id="lineupGrid">
                <!-- Faces will be generated dynamically -->
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <button class="btn btn-primary hidden" id="submitBtn" onclick="submitAnswer()">Confirm Selection</button>
            </div>
        </div>

        <!-- PHASE 5: Results -->
        <div id="resultsSection" class="panel hidden">
            <h2>Your Result</h2>

            <div class="results-grid">
                <div class="result-card">
                    <h3>Your Condition</h3>
                    <div class="result-value" id="conditionResult" style="color: #e74c3c;">Verbal</div>
                </div>
                <div class="result-card">
                    <h3>Your Answer</h3>
                    <div class="result-value" id="answerResult">‚Äî</div>
                </div>
                <div class="result-card">
                    <h3>Correct Face</h3>
                    <div class="result-value" style="color: #3498db;" id="correctResult">‚Äî</div>
                </div>
            </div>

            <div class="comparison-chart">
                <h3 style="color: #e74c3c; margin-bottom: 15px;">The Classic Schooler Study (1990)</h3>

                <div class="bar-comparison">
                    <div class="bar-label">
                        <span>Control Group (filler task)</span>
                        <span>64% correct</span>
                    </div>
                    <div class="bar-container">
                        <div class="bar-fill bar-control" style="width: 64%;">64%</div>
                    </div>
                </div>

                <div class="bar-comparison">
                    <div class="bar-label">
                        <span>Verbal Description Group</span>
                        <span>38% correct</span>
                    </div>
                    <div class="bar-container">
                        <div class="bar-fill bar-verbal" style="width: 38%;">38%</div>
                    </div>
                </div>

                <p style="margin-top: 20px; text-align: center; color: #f39c12; font-size: 1.1em;">
                    <strong>27% reduction in accuracy</strong> from simply describing what you saw!
                </p>
            </div>

            <div id="interpretationBox" class="stat-highlight"></div>
        </div>

        <!-- Science Section -->
        <div id="scienceSection" class="panel hidden">
            <h2>Why Words Hurt Visual Memory</h2>

            <p>Verbal overshadowing challenges our intuition that verbalization should <em>help</em> memory. Several mechanisms explain why it hurts:</p>

            <div class="mechanism-grid">
                <div class="mechanism-card">
                    <div class="mechanism-icon">üîÑ</div>
                    <h4>Recoding Interference</h4>
                    <p>Verbal descriptions create a second, cruder representation that competes with the original visual memory.</p>
                </div>
                <div class="mechanism-card">
                    <div class="mechanism-icon">üìê</div>
                    <h4>Transfer-Inappropriate</h4>
                    <p>Faces are processed holistically; verbal descriptions force featural analysis that disrupts holistic recognition.</p>
                </div>
                <div class="mechanism-card">
                    <div class="mechanism-icon">üéØ</div>
                    <h4>Criterion Shift</h4>
                    <p>Verbalization changes what you look for‚Äîyou seek matching features rather than overall resemblance.</p>
                </div>
                <div class="mechanism-card">
                    <div class="mechanism-icon">üìù</div>
                    <h4>Verbal Poverty</h4>
                    <p>Language lacks the vocabulary to capture subtle facial configurations that distinguish individuals.</p>
                </div>
            </div>

            <div class="stat-highlight" style="border-left-color: #9b59b6;">
                <strong>The effect extends beyond faces:</strong> Schooler found verbal overshadowing for colors, wines, voices, and even insight problem-solving. Putting things into words can impair recognition of many hard-to-verbalize stimuli.
            </div>

            <h3 style="color: #f39c12; margin: 25px 0 15px;">Legal Implications</h3>

            <div class="legal-implications">
                <div class="legal-card">
                    <h4>‚öñÔ∏è Police Lineups</h4>
                    <p>Witnesses routinely describe suspects before lineups‚Äîbut this may contaminate their visual memory and reduce accuracy.</p>
                </div>
                <div class="legal-card">
                    <h4>üë§ Eyewitness Testimony</h4>
                    <p>The more a witness verbally rehearses their description, the more they may rely on the verbal (not visual) memory.</p>
                </div>
                <div class="legal-card">
                    <h4>üé® Composite Sketches</h4>
                    <p>Creating facial composites requires verbalization‚Äîpotentially impairing the witness's original memory.</p>
                </div>
            </div>

            <h3 style="color: #00d4ff; margin: 25px 0 15px;">Key Research</h3>

            <div class="reference">
                <strong>Schooler, J. W., & Engstler-Schooler, T. Y. (1990).</strong> Verbal overshadowing of visual memories: Some things are better left unsaid. <em>Cognitive Psychology, 22</em>(1), 36-71.
            </div>

            <div class="reference">
                <strong>Meissner, C. A., & Brigham, J. C. (2001).</strong> A meta-analysis of the verbal overshadowing effect in face identification. <em>Applied Cognitive Psychology, 15</em>(6), 603-616. Confirmed effect across 29 studies.
            </div>

            <div class="reference">
                <strong>Chin, J. M., & Schooler, J. W. (2008).</strong> Why do words hurt? Content, process, and criterion shift accounts of verbal overshadowing. <em>European Journal of Cognitive Psychology, 20</em>(3), 396-413.
            </div>

            <div class="stat-highlight" style="border-left-color: #4CAF50; margin-top: 25px;">
                <strong>Practical advice:</strong> If you witness something important, avoid describing it in detail until after making an identification. Your visual memory is more accurate than your verbal description of it. Trust your gut feeling‚Äîholistic recognition often beats feature-matching!
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-primary" onclick="resetExperiment()">Try Again (Other Condition)</button>
            </div>
        </div>
    </div>

    <script>
        // Face variation parameters
        const faceVariations = [
            { hair: '#3d2314', hairShape: 'round', nose: 'medium', mouth: 'wide', eyebrows: 'thick' },
            { hair: '#8B4513', hairShape: 'wavy', nose: 'small', mouth: 'thin', eyebrows: 'thin' },
            { hair: '#1a1a1a', hairShape: 'straight', nose: 'large', mouth: 'medium', eyebrows: 'arched' },
            { hair: '#DAA520', hairShape: 'curly', nose: 'medium', mouth: 'wide', eyebrows: 'thin' },
            { hair: '#654321', hairShape: 'round', nose: 'small', mouth: 'thin', eyebrows: 'thick' },
            { hair: '#2F4F4F', hairShape: 'straight', nose: 'large', mouth: 'medium', eyebrows: 'arched' }
        ];

        let targetIndex = 0;
        let condition = 'verbal'; // or 'control'
        let selectedOption = null;
        let experimentRuns = 0;

        function setPhase(phase) {
            for (let i = 1; i <= 5; i++) {
                const dot = document.getElementById('phase' + i);
                dot.classList.remove('active', 'completed');
                if (i < phase) dot.classList.add('completed');
                if (i === phase) dot.classList.add('active');
            }
        }

        function applyFaceStyle(faceEl, variation, isLineup = false) {
            const hair = faceEl.querySelector('.hair') || faceEl.querySelector('[class*="hair"]');
            const nose = faceEl.querySelector('.nose');
            const mouth = faceEl.querySelector('.mouth');
            const eyebrowL = faceEl.querySelector('.eyebrow.left');
            const eyebrowR = faceEl.querySelector('.eyebrow.right');

            if (hair) {
                hair.style.background = variation.hair;
                if (variation.hairShape === 'wavy') {
                    hair.style.borderRadius = '60% 60% 20% 20%';
                } else if (variation.hairShape === 'straight') {
                    hair.style.borderRadius = '30% 30% 0 0';
                } else if (variation.hairShape === 'curly') {
                    hair.style.borderRadius = '70% 70% 30% 30%';
                }
            }

            if (nose) {
                if (variation.nose === 'small') {
                    nose.style.width = isLineup ? '8px' : '14px';
                    nose.style.height = isLineup ? '18px' : '28px';
                } else if (variation.nose === 'large') {
                    nose.style.width = isLineup ? '16px' : '26px';
                    nose.style.height = isLineup ? '26px' : '40px';
                }
            }

            if (mouth) {
                if (variation.mouth === 'thin') {
                    mouth.style.height = isLineup ? '6px' : '10px';
                    mouth.style.width = isLineup ? '24px' : '40px';
                } else if (variation.mouth === 'wide') {
                    mouth.style.height = isLineup ? '12px' : '18px';
                    mouth.style.width = isLineup ? '36px' : '60px';
                }
            }

            if (eyebrowL && eyebrowR) {
                if (variation.eyebrows === 'thin') {
                    eyebrowL.style.height = eyebrowR.style.height = isLineup ? '3px' : '5px';
                } else if (variation.eyebrows === 'thick') {
                    eyebrowL.style.height = eyebrowR.style.height = isLineup ? '7px' : '10px';
                } else if (variation.eyebrows === 'arched') {
                    eyebrowL.style.transform = 'rotate(-15deg)';
                    eyebrowR.style.transform = 'rotate(15deg)';
                }
            }
        }

        function startExperiment() {
            setPhase(2);
            document.getElementById('introSection').classList.add('hidden');
            document.getElementById('viewSection').classList.remove('hidden');
            document.getElementById('viewSection').classList.add('fade-in');

            // Randomly select target face
            targetIndex = Math.floor(Math.random() * faceVariations.length);
            applyFaceStyle(document.getElementById('targetFace'), faceVariations[targetIndex]);

            // Alternate condition each run
            condition = experimentRuns % 2 === 0 ? 'verbal' : 'control';
            experimentRuns++;

            // Start countdown
            let viewTime = 5;
            document.getElementById('viewTime').textContent = viewTime;

            const viewTimer = setInterval(() => {
                viewTime--;
                document.getElementById('viewTime').textContent = viewTime;
                if (viewTime <= 0) {
                    clearInterval(viewTimer);
                    startTask();
                }
            }, 1000);
        }

        function startTask() {
            setPhase(3);
            document.getElementById('viewSection').classList.add('hidden');
            document.getElementById('taskSection').classList.remove('hidden');
            document.getElementById('taskSection').classList.add('fade-in');

            if (condition === 'verbal') {
                document.getElementById('taskTitle').textContent = 'Describe the Face';
                document.getElementById('descriptionTask').classList.remove('hidden');
                document.getElementById('fillerTask').classList.add('hidden');
                runDescriptionTimer();
            } else {
                document.getElementById('taskTitle').textContent = 'Distractor Task';
                document.getElementById('descriptionTask').classList.add('hidden');
                document.getElementById('fillerTask').classList.remove('hidden');
                document.getElementById('fillerNumber').textContent = 300 + Math.floor(Math.random() * 100);
                runFillerTimer();
            }
        }

        function runDescriptionTimer() {
            let timeLeft = 60;
            const timer = setInterval(() => {
                timeLeft--;
                document.getElementById('descTime').textContent = timeLeft;
                document.getElementById('descProgress').style.width = (timeLeft / 60 * 100) + '%';
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    startLineup();
                }
            }, 1000);
        }

        function runFillerTimer() {
            let timeLeft = 60;
            const timer = setInterval(() => {
                timeLeft--;
                document.getElementById('fillTime').textContent = timeLeft;
                document.getElementById('fillProgress').style.width = (timeLeft / 60 * 100) + '%';
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    startLineup();
                }
            }, 1000);
        }

        function startLineup() {
            setPhase(4);
            document.getElementById('taskSection').classList.add('hidden');
            document.getElementById('lineupSection').classList.remove('hidden');
            document.getElementById('lineupSection').classList.add('fade-in');

            // Create lineup with all 6 faces
            const grid = document.getElementById('lineupGrid');
            grid.innerHTML = '';

            // Shuffle order for lineup
            const order = [0, 1, 2, 3, 4, 5].sort(() => Math.random() - 0.5);

            order.forEach((faceIdx, displayIdx) => {
                const option = document.createElement('div');
                option.className = 'lineup-option';
                option.dataset.faceIndex = faceIdx;
                option.onclick = () => selectOption(option);

                option.innerHTML = `
                    <div class="lineup-face">
                        <div class="hair"></div>
                        <div class="eyebrow left"></div>
                        <div class="eyebrow right"></div>
                        <div class="eyes">
                            <div class="eye"><div class="pupil"></div></div>
                            <div class="eye"><div class="pupil"></div></div>
                        </div>
                        <div class="nose"></div>
                        <div class="mouth"></div>
                    </div>
                    <div class="option-number">#${displayIdx + 1}</div>
                `;

                grid.appendChild(option);
                applyFaceStyle(option.querySelector('.lineup-face'), faceVariations[faceIdx], true);
            });

            selectedOption = null;
        }

        function selectOption(option) {
            document.querySelectorAll('.lineup-option').forEach(opt => opt.classList.remove('selected'));
            option.classList.add('selected');
            selectedOption = parseInt(option.dataset.faceIndex);
            document.getElementById('submitBtn').classList.remove('hidden');
        }

        function submitAnswer() {
            setPhase(5);
            document.getElementById('lineupSection').classList.add('hidden');
            document.getElementById('resultsSection').classList.remove('hidden');
            document.getElementById('resultsSection').classList.add('fade-in');

            const correct = selectedOption === targetIndex;

            document.getElementById('conditionResult').textContent = condition === 'verbal' ? 'Verbal Description' : 'Control (Filler)';
            document.getElementById('conditionResult').style.color = condition === 'verbal' ? '#e74c3c' : '#3498db';

            document.getElementById('answerResult').textContent = correct ? '‚úì Correct!' : '‚úó Wrong';
            document.getElementById('answerResult').className = 'result-value ' + (correct ? 'result-correct' : 'result-incorrect');

            document.getElementById('correctResult').textContent = `Face #${targetIndex + 1}`;

            // Interpretation
            let interpretation = '';
            if (condition === 'verbal') {
                if (correct) {
                    interpretation = `<strong>You beat the odds!</strong> Despite describing the face verbally‚Äîwhich typically <em>reduces</em> accuracy by 27%‚Äîyou still identified the correct face. Not everyone shows the effect, but across populations, verbal description consistently impairs face recognition.`;
                } else {
                    interpretation = `<strong>You experienced verbal overshadowing.</strong> By putting the face into words, you may have overwritten your visual memory with an inferior verbal representation. This is exactly what Schooler found: verbalization hurts recognition.`;
                }
            } else {
                if (correct) {
                    interpretation = `<strong>The control condition worked!</strong> By doing an unrelated task instead of describing the face, your visual memory remained intact. Control participants in Schooler's study averaged 64% accuracy‚Äîsignificantly better than the 38% of verbalizers.`;
                } else {
                    interpretation = `<strong>Even without verbalization, face recognition is hard.</strong> You were in the control condition (no description), which typically performs better. Memory for faces is inherently challenging‚Äîthat's why eyewitness testimony is so unreliable.`;
                }
            }

            document.getElementById('interpretationBox').innerHTML = interpretation;

            // Show science section
            setTimeout(() => {
                document.getElementById('scienceSection').classList.remove('hidden');
                document.getElementById('scienceSection').classList.add('fade-in');
            }, 1000);
        }

        function resetExperiment() {
            setPhase(1);
            document.getElementById('resultsSection').classList.add('hidden');
            document.getElementById('scienceSection').classList.add('hidden');
            document.getElementById('introSection').classList.remove('hidden');
            document.getElementById('introSection').classList.add('fade-in');
            document.getElementById('submitBtn').classList.add('hidden');
            selectedOption = null;
        }
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
