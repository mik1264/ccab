<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cherenkov Radiation: The Optical Sonic Boom | Surprising Paradoxes</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #000510 0%, #001030 50%, #000818 100%);
            color: #e0e0e0;
            min-height: 100vh;
            overflow-x: hidden;
        }
        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #66aaff;
            text-decoration: none;
            font-size: 1rem;
            z-index: 100;
            padding: 8px 16px;
            background: rgba(0,0,0,0.5);
            border-radius: 20px;
            transition: all 0.3s ease;
        }
        .back-link:hover {
            background: rgba(50, 100, 200, 0.3);
            transform: translateX(-3px);
        }
        header {
            text-align: center;
            padding: 80px 20px 30px;
        }
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #4488ff, #00ccff, #88eeff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .subtitle {
            color: #6699cc;
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        .demo-section {
            display: grid;
            grid-template-columns: 1fr 320px;
            gap: 30px;
            margin-bottom: 40px;
        }
        @media (max-width: 900px) {
            .demo-section {
                grid-template-columns: 1fr;
            }
        }
        .canvas-container {
            background: linear-gradient(145deg, #000815, #001025);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 40px rgba(0,50,150,0.3);
        }
        canvas {
            display: block;
            width: 100%;
            border-radius: 10px;
        }
        .controls {
            background: linear-gradient(145deg, #001020, #001535);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 40px rgba(0,50,150,0.3);
        }
        .control-group {
            margin-bottom: 20px;
        }
        .control-group label {
            display: block;
            margin-bottom: 8px;
            color: #66aaff;
            font-size: 0.9rem;
        }
        .control-group input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #0a2040;
            outline: none;
            -webkit-appearance: none;
        }
        .control-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: linear-gradient(135deg, #4488ff, #2266cc);
            cursor: pointer;
        }
        .value-display {
            text-align: right;
            font-size: 0.85rem;
            color: #aaa;
            margin-top: 5px;
        }
        .info-panel {
            background: rgba(0, 80, 150, 0.15);
            border: 1px solid rgba(50, 150, 255, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }
        .info-panel h3 {
            color: #4488ff;
            font-size: 0.95rem;
            margin-bottom: 12px;
            border-bottom: 1px solid rgba(50, 150, 255, 0.2);
            padding-bottom: 8px;
        }
        .info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.85rem;
        }
        .info-label { color: #6699cc; }
        .info-value {
            color: #fff;
            font-family: 'Consolas', monospace;
        }
        .info-value.glow {
            color: #88ccff;
            text-shadow: 0 0 8px #4488ff;
        }
        .angle-display {
            text-align: center;
            padding: 15px;
            background: rgba(50, 100, 200, 0.15);
            border-radius: 10px;
            margin-bottom: 15px;
        }
        .angle-display .angle {
            font-size: 2rem;
            font-weight: bold;
            color: #66ccff;
            text-shadow: 0 0 15px rgba(100, 200, 255, 0.5);
        }
        .angle-display .label {
            font-size: 0.8rem;
            color: #6699aa;
            margin-top: 5px;
        }
        button {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            background: linear-gradient(135deg, #2266cc, #1144aa);
            color: white;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 10px;
        }
        button:hover {
            background: linear-gradient(135deg, #3388ee, #2266cc);
            transform: translateY(-2px);
        }
        button.active {
            background: linear-gradient(135deg, #4488ff, #3366dd);
            box-shadow: 0 0 15px rgba(68, 136, 255, 0.4);
        }
        .mode-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        .mode-buttons button {
            flex: 1;
            padding: 10px;
            font-size: 0.85rem;
        }
        .essay {
            background: linear-gradient(145deg, #000815, #001028);
            border-radius: 15px;
            padding: 40px;
            line-height: 1.8;
            box-shadow: 0 10px 40px rgba(0,50,150,0.3);
        }
        .essay h2 {
            color: #4488ff;
            margin: 30px 0 15px;
            font-size: 1.5rem;
        }
        .essay h2:first-child { margin-top: 0; }
        .essay p {
            margin-bottom: 15px;
            color: #c0c8d8;
        }
        .essay strong { color: #88ccff; }
        .essay em { color: #ffcc88; font-style: italic; }
        .highlight-box {
            background: rgba(50, 100, 200, 0.15);
            border-left: 4px solid #4488ff;
            padding: 20px;
            margin: 25px 0;
            border-radius: 0 10px 10px 0;
        }
        .highlight-box.paradox {
            background: rgba(100, 150, 255, 0.1);
            border-left-color: #88ccff;
        }
        .formula {
            text-align: center;
            padding: 20px;
            background: rgba(0, 30, 60, 0.5);
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Times New Roman', serif;
            font-size: 1.3rem;
            color: #88ccff;
        }
        .sources {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #1a3050;
        }
        .sources h3 {
            color: #6699cc;
            margin-bottom: 15px;
        }
        .sources ul {
            list-style: none;
        }
        .sources li {
            margin-bottom: 10px;
        }
        .sources a {
            color: #5588cc;
            text-decoration: none;
        }
        .sources a:hover {
            color: #88ccff;
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">← Back to Paradoxes</a>

    <header>
        <h1>Cherenkov Radiation: The Optical Sonic Boom</h1>
        <p class="subtitle">When particles outrun light itself—the blue glow of nuclear reactors explained</p>
    </header>

    <div class="container">
        <div class="demo-section">
            <div class="canvas-container">
                <canvas id="canvas"></canvas>
            </div>
            <div class="controls">
                <div class="angle-display">
                    <div class="angle" id="angleValue">41.2°</div>
                    <div class="label">Cherenkov Angle (θ)</div>
                </div>

                <div class="info-panel">
                    <h3>Physics</h3>
                    <div class="info-row">
                        <span class="info-label">Particle Speed</span>
                        <span class="info-value glow" id="particleSpeed">0.95c</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Light Speed in Water</span>
                        <span class="info-value" id="lightSpeed">0.75c</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Medium</span>
                        <span class="info-value" id="mediumName">Water</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Refractive Index</span>
                        <span class="info-value" id="refractiveIndex">1.33</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">β = v/c</span>
                        <span class="info-value" id="betaValue">0.950</span>
                    </div>
                </div>

                <div class="control-group">
                    <label>Particle Velocity (fraction of c)</label>
                    <input type="range" id="velocity" min="0.5" max="0.999" value="0.95" step="0.001">
                    <div class="value-display" id="velDisplay">0.95c</div>
                </div>

                <div class="control-group">
                    <label>Medium</label>
                    <select id="medium" style="width: 100%; padding: 10px; border-radius: 5px; background: #0a2040; color: #fff; border: 1px solid #1a4080;">
                        <option value="1.33">Water (n=1.33)</option>
                        <option value="1.52">Glass (n=1.52)</option>
                        <option value="2.42">Diamond (n=2.42)</option>
                        <option value="1.0003">Air (n=1.0003)</option>
                        <option value="1.46">Ice (n=1.46)</option>
                    </select>
                </div>

                <div class="mode-buttons">
                    <button id="waveBtn" class="active">Wave View</button>
                    <button id="reactorBtn">Reactor View</button>
                </div>

                <button id="toggleBtn">⏸ Pause</button>
            </div>
        </div>

        <div class="essay">
            <h2>The Paradox: Faster Than Light?</h2>
            <p>
                Einstein's special relativity tells us nothing can travel faster than the speed of light.
                Yet nuclear reactor pools glow with an eerie blue light precisely <em>because</em>
                particles are traveling faster than light. How can this be?
            </p>

            <div class="highlight-box paradox">
                <strong>The Resolution:</strong> The speed of light in a vacuum (c = 299,792,458 m/s)
                is the cosmic speed limit. But light travels <em>slower</em> in materials like water
                or glass. In water, light moves at only about 0.75c. Particles can exceed this reduced
                speed while still respecting the vacuum speed limit.
            </div>

            <h2>The Optical Sonic Boom</h2>
            <p>
                <strong>Cherenkov radiation</strong> is the electromagnetic equivalent of a sonic boom.
                When a jet breaks the sound barrier, sound waves pile up into a shock cone. Similarly,
                when a charged particle exceeds the local speed of light, the electromagnetic waves
                it generates pile up into a cone of blue light.
            </p>
            <p>
                As the particle moves through the medium, it polarizes nearby atoms. These atoms then
                relax and emit radiation. When the particle travels slower than light, these emissions
                interfere destructively and cancel out. But when the particle is superluminal (faster
                than light in that medium), the waves add constructively along a cone, creating the
                characteristic blue glow.
            </p>

            <div class="formula">
                cos(θ) = c / (n × v) = 1 / (β × n)
            </div>
            <p style="text-align: center; color: #6699aa; font-size: 0.9rem;">
                where θ is the Cherenkov angle, n is the refractive index, v is particle velocity, and β = v/c
            </p>

            <h2>Why Blue?</h2>
            <p>
                Cherenkov radiation is most intense at shorter wavelengths—it follows a 1/λ² intensity
                distribution. This means blue and violet photons dominate the visible spectrum, giving
                the radiation its characteristic ethereal blue glow. The emission continues into the
                ultraviolet, invisible to human eyes.
            </p>
            <p>
                This is fundamentally different from other light sources: incandescent bulbs peak in
                infrared, LEDs have spectral peaks, but Cherenkov radiation is <em>intrinsically blue</em>
                due to its electromagnetic nature.
            </p>

            <div class="highlight-box">
                <strong>Discovery:</strong> Pavel Cherenkov first observed this radiation in 1934
                while studying luminescence under Sergey Vavilov at the Lebedev Institute in Moscow.
                He noticed that water exposed to radioactive sources glowed faintly blue even when
                no fluorescent materials were present. Ilya Frank and Igor Tamm later explained the
                physics. All three shared the 1958 Nobel Prize in Physics.
            </div>

            <h2>In Nuclear Reactors</h2>
            <p>
                The iconic blue glow of nuclear reactor pools comes from Cherenkov radiation. During
                nuclear fission, <strong>beta particles</strong> (high-energy electrons) are ejected
                at speeds approaching 0.99c. In the water surrounding the fuel rods, these electrons
                easily exceed light's speed in water (0.75c), producing the blue glow.
            </p>
            <p>
                The glow persists even after the reactor is shut down because radioactive fission
                products continue to decay, emitting beta particles. It gradually dims as shorter-lived
                isotopes decay away over hours and days.
            </p>

            <h2>Threshold Condition</h2>
            <p>
                Cherenkov radiation only occurs when the particle velocity exceeds c/n, where n is
                the refractive index. For water (n = 1.33), this threshold is about 0.75c. For
                diamond (n = 2.42), the threshold drops to just 0.41c.
            </p>
            <p>
                Below the threshold, no radiation is produced—the waves interfere destructively.
                Above it, the Cherenkov angle increases with velocity, reaching a maximum angle
                determined by the medium's refractive index.
            </p>

            <h2>Applications</h2>
            <p>
                <strong>Particle detectors:</strong> Cherenkov detectors are crucial in particle physics.
                The IceCube Neutrino Observatory at the South Pole uses a cubic kilometer of Antarctic
                ice to detect Cherenkov light from neutrino interactions. The Super-Kamiokande detector
                in Japan uses 50,000 tons of ultrapure water.
            </p>
            <p>
                <strong>Nuclear safeguards:</strong> IAEA inspectors use Digital Cherenkov Viewing
                Devices (DCVDs) to verify spent nuclear fuel in storage pools without physical access.
                The intensity of the blue glow reveals the quantity and age of the radioactive material.
            </p>

            <div class="sources">
                <h3>Sources & Further Reading</h3>
                <ul>
                    <li><a href="https://en.wikipedia.org/wiki/Cherenkov_radiation">Wikipedia: Cherenkov Radiation</a></li>
                    <li><a href="https://www.energy.gov/ne/articles/cherenkov-radiation-explained">U.S. DOE: Cherenkov Radiation Explained</a></li>
                    <li><a href="https://www.iaea.org/newscenter/news/what-is-cherenkov-radiation">IAEA: What is Cherenkov Radiation?</a></li>
                    <li><a href="https://www.britannica.com/science/Cherenkov-radiation">Britannica: Cherenkov Radiation</a></li>
                    <li><a href="http://large.stanford.edu/courses/2014/ph241/alaeian2/">Stanford: Introduction to Cherenkov Radiation</a></li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        // High DPI setup
        const dpr = window.devicePixelRatio || 1;
        const rect = canvas.getBoundingClientRect();
        canvas.width = rect.width * dpr;
        canvas.height = rect.width * 0.7 * dpr;
        canvas.style.height = rect.width * 0.7 + 'px';
        ctx.scale(dpr, dpr);

        const width = rect.width;
        const height = rect.width * 0.7;

        // State
        let time = 0;
        let running = true;
        let viewMode = 'wave'; // 'wave' or 'reactor'
        let particleVelocity = 0.95; // fraction of c
        let refractiveIndex = 1.33;

        // Controls
        const velocitySlider = document.getElementById('velocity');
        const mediumSelect = document.getElementById('medium');
        const toggleBtn = document.getElementById('toggleBtn');
        const waveBtn = document.getElementById('waveBtn');
        const reactorBtn = document.getElementById('reactorBtn');

        velocitySlider.addEventListener('input', e => {
            particleVelocity = parseFloat(e.target.value);
            document.getElementById('velDisplay').textContent = particleVelocity.toFixed(3) + 'c';
            updatePhysics();
        });

        mediumSelect.addEventListener('change', e => {
            refractiveIndex = parseFloat(e.target.value);
            updatePhysics();
        });

        toggleBtn.addEventListener('click', () => {
            running = !running;
            toggleBtn.textContent = running ? '⏸ Pause' : '▶ Play';
        });

        waveBtn.addEventListener('click', () => {
            viewMode = 'wave';
            waveBtn.classList.add('active');
            reactorBtn.classList.remove('active');
        });

        reactorBtn.addEventListener('click', () => {
            viewMode = 'reactor';
            reactorBtn.classList.add('active');
            waveBtn.classList.remove('active');
        });

        function updatePhysics() {
            const lightSpeedInMedium = 1 / refractiveIndex;
            document.getElementById('particleSpeed').textContent = particleVelocity.toFixed(3) + 'c';
            document.getElementById('lightSpeed').textContent = lightSpeedInMedium.toFixed(3) + 'c';
            document.getElementById('refractiveIndex').textContent = refractiveIndex.toFixed(2);
            document.getElementById('betaValue').textContent = particleVelocity.toFixed(3);

            // Update medium name
            const mediumNames = {
                '1.33': 'Water',
                '1.52': 'Glass',
                '2.42': 'Diamond',
                '1.0003': 'Air',
                '1.46': 'Ice'
            };
            document.getElementById('mediumName').textContent = mediumNames[mediumSelect.value] || 'Medium';

            // Calculate Cherenkov angle
            const threshold = 1 / refractiveIndex;
            if (particleVelocity > threshold) {
                const cosTheta = 1 / (particleVelocity * refractiveIndex);
                const theta = Math.acos(cosTheta) * 180 / Math.PI;
                document.getElementById('angleValue').textContent = theta.toFixed(1) + '°';
                document.getElementById('angleValue').style.color = '#66ccff';
            } else {
                document.getElementById('angleValue').textContent = 'No radiation';
                document.getElementById('angleValue').style.color = '#666';
            }
        }

        // Wave visualization
        function drawWaveView() {
            // Water background
            const waterGradient = ctx.createLinearGradient(0, 0, 0, height);
            waterGradient.addColorStop(0, '#001830');
            waterGradient.addColorStop(0.5, '#002040');
            waterGradient.addColorStop(1, '#001525');
            ctx.fillStyle = waterGradient;
            ctx.fillRect(0, 0, width, height);

            // Water caustics effect
            for (let i = 0; i < 20; i++) {
                const x = (Math.sin(time * 0.001 + i * 0.5) + 1) * width / 2;
                const y = (Math.cos(time * 0.0015 + i * 0.7) + 1) * height / 2;
                const gradient = ctx.createRadialGradient(x, y, 0, x, y, 50);
                gradient.addColorStop(0, 'rgba(50, 100, 150, 0.1)');
                gradient.addColorStop(1, 'rgba(50, 100, 150, 0)');
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(x, y, 50, 0, Math.PI * 2);
                ctx.fill();
            }

            const threshold = 1 / refractiveIndex;
            const particleX = width * 0.2 + (time * 0.1 * particleVelocity) % (width * 0.8);
            const particleY = height / 2;

            // Draw wavefronts (Huygens construction)
            if (particleVelocity > threshold) {
                const cosTheta = 1 / (particleVelocity * refractiveIndex);
                const theta = Math.acos(cosTheta);

                ctx.save();

                // Draw multiple wave cones from particle trail
                const trailLength = 20;
                for (let i = 0; i < trailLength; i++) {
                    const trailX = particleX - i * (particleVelocity * 15);
                    if (trailX < 0) continue;

                    const age = i / trailLength;
                    const coneLength = i * 20;

                    // Cherenkov cone
                    ctx.beginPath();
                    ctx.moveTo(trailX, particleY);
                    ctx.lineTo(trailX + coneLength * Math.cos(Math.PI - theta),
                              particleY + coneLength * Math.sin(theta));
                    ctx.lineTo(trailX + coneLength * Math.cos(Math.PI - theta),
                              particleY - coneLength * Math.sin(theta));
                    ctx.closePath();

                    const alpha = (1 - age) * 0.3;
                    ctx.fillStyle = `rgba(100, 180, 255, ${alpha})`;
                    ctx.fill();

                    // Draw circular wavefronts
                    const waveRadius = i * 15 / refractiveIndex;
                    ctx.strokeStyle = `rgba(150, 200, 255, ${(1 - age) * 0.5})`;
                    ctx.lineWidth = 1;
                    ctx.beginPath();
                    ctx.arc(trailX, particleY, waveRadius, -theta, theta);
                    ctx.stroke();
                }

                // Main cone outline
                ctx.strokeStyle = 'rgba(100, 200, 255, 0.8)';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(particleX, particleY);
                ctx.lineTo(0, particleY + particleX * Math.tan(theta));
                ctx.moveTo(particleX, particleY);
                ctx.lineTo(0, particleY - particleX * Math.tan(theta));
                ctx.stroke();

                // Angle arc
                ctx.strokeStyle = '#ffcc44';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.arc(particleX, particleY, 60, Math.PI, Math.PI - theta, true);
                ctx.stroke();

                // Angle label
                const angleDeg = theta * 180 / Math.PI;
                ctx.fillStyle = '#ffcc44';
                ctx.font = '14px Segoe UI';
                ctx.fillText('θ = ' + angleDeg.toFixed(1) + '°', particleX - 80, particleY - 70);

                ctx.restore();
            }

            // Draw particle
            const particleGlow = ctx.createRadialGradient(
                particleX, particleY, 0,
                particleX, particleY, 30
            );
            particleGlow.addColorStop(0, 'rgba(255, 200, 100, 0.8)');
            particleGlow.addColorStop(0.5, 'rgba(255, 150, 50, 0.3)');
            particleGlow.addColorStop(1, 'rgba(255, 100, 0, 0)');
            ctx.fillStyle = particleGlow;
            ctx.beginPath();
            ctx.arc(particleX, particleY, 30, 0, Math.PI * 2);
            ctx.fill();

            ctx.fillStyle = '#fff';
            ctx.beginPath();
            ctx.arc(particleX, particleY, 5, 0, Math.PI * 2);
            ctx.fill();

            // Labels
            ctx.fillStyle = '#6699cc';
            ctx.font = '12px Segoe UI';
            ctx.fillText('Charged Particle (β⁻)', particleX - 45, particleY + 45);

            ctx.fillStyle = particleVelocity > threshold ? '#88ccff' : '#666';
            ctx.fillText(particleVelocity > threshold ? 'v > c/n: Cherenkov radiation!' : 'v < c/n: No radiation',
                        10, height - 20);

            // Velocity arrow
            ctx.strokeStyle = '#ffaa44';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(particleX + 10, particleY);
            ctx.lineTo(particleX + 50, particleY);
            ctx.lineTo(particleX + 40, particleY - 8);
            ctx.moveTo(particleX + 50, particleY);
            ctx.lineTo(particleX + 40, particleY + 8);
            ctx.stroke();

            ctx.fillStyle = '#ffaa44';
            ctx.font = '12px Segoe UI';
            ctx.fillText('v = ' + particleVelocity.toFixed(2) + 'c', particleX + 55, particleY + 4);
        }

        // Reactor pool visualization
        function drawReactorView() {
            // Deep blue water
            const waterGradient = ctx.createLinearGradient(0, 0, 0, height);
            waterGradient.addColorStop(0, '#000820');
            waterGradient.addColorStop(0.3, '#001535');
            waterGradient.addColorStop(1, '#000510');
            ctx.fillStyle = waterGradient;
            ctx.fillRect(0, 0, width, height);

            // Pool tiles pattern
            ctx.strokeStyle = 'rgba(50, 100, 150, 0.2)';
            ctx.lineWidth = 1;
            for (let x = 0; x < width; x += 40) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, height);
                ctx.stroke();
            }
            for (let y = 0; y < height; y += 40) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(width, y);
                ctx.stroke();
            }

            // Fuel assemblies
            const assemblyCount = 5;
            const assemblyWidth = 40;
            const assemblyHeight = 200;
            const startX = (width - assemblyCount * 60) / 2;
            const startY = height - assemblyHeight - 50;

            for (let i = 0; i < assemblyCount; i++) {
                const ax = startX + i * 60;

                // Assembly structure
                ctx.fillStyle = '#1a2530';
                ctx.fillRect(ax, startY, assemblyWidth, assemblyHeight);

                // Fuel rods
                for (let r = 0; r < 4; r++) {
                    ctx.fillStyle = '#252525';
                    ctx.fillRect(ax + 5 + r * 10, startY + 10, 6, assemblyHeight - 20);
                }

                // Cherenkov glow around assembly
                const glowIntensity = 0.3 + 0.2 * Math.sin(time * 0.002 + i);
                const glow = ctx.createRadialGradient(
                    ax + assemblyWidth / 2, startY + assemblyHeight / 2, 0,
                    ax + assemblyWidth / 2, startY + assemblyHeight / 2, 80
                );
                glow.addColorStop(0, `rgba(80, 180, 255, ${glowIntensity})`);
                glow.addColorStop(0.5, `rgba(50, 150, 255, ${glowIntensity * 0.5})`);
                glow.addColorStop(1, 'rgba(30, 100, 200, 0)');
                ctx.fillStyle = glow;
                ctx.fillRect(ax - 40, startY - 40, assemblyWidth + 80, assemblyHeight + 80);
            }

            // Simulated beta particles
            const threshold = 1 / refractiveIndex;
            if (particleVelocity > threshold) {
                const cosTheta = 1 / (particleVelocity * refractiveIndex);
                const theta = Math.acos(cosTheta);

                for (let i = 0; i < 15; i++) {
                    const seed = i * 1234.567;
                    const sourceX = startX + (seed % (assemblyCount * 60));
                    const sourceY = startY + (seed * 1.5) % assemblyHeight;
                    const angle = ((seed * 2.3) % Math.PI) - Math.PI / 2;
                    const progress = ((time * 0.003 + seed) % 1);
                    const distance = progress * 150;

                    const px = sourceX + 20 + Math.cos(angle) * distance;
                    const py = sourceY + Math.sin(angle) * distance;

                    if (py < 0 || py > height || px < 0 || px > width) continue;

                    // Particle trail with Cherenkov cone
                    ctx.save();
                    ctx.translate(px, py);
                    ctx.rotate(angle);

                    // Cone
                    ctx.beginPath();
                    ctx.moveTo(0, 0);
                    ctx.lineTo(-30, -30 * Math.tan(theta));
                    ctx.lineTo(-30, 30 * Math.tan(theta));
                    ctx.closePath();

                    const coneGrad = ctx.createLinearGradient(0, 0, -30, 0);
                    coneGrad.addColorStop(0, 'rgba(100, 180, 255, 0.4)');
                    coneGrad.addColorStop(1, 'rgba(50, 150, 255, 0)');
                    ctx.fillStyle = coneGrad;
                    ctx.fill();

                    // Particle
                    ctx.fillStyle = 'rgba(255, 255, 200, 0.8)';
                    ctx.beginPath();
                    ctx.arc(0, 0, 2, 0, Math.PI * 2);
                    ctx.fill();

                    ctx.restore();
                }
            }

            // Overall blue glow
            const overallGlow = ctx.createRadialGradient(
                width / 2, height * 0.7, 50,
                width / 2, height * 0.7, 300
            );
            overallGlow.addColorStop(0, `rgba(80, 180, 255, ${0.15 + 0.05 * Math.sin(time * 0.001)})`);
            overallGlow.addColorStop(0.5, 'rgba(50, 150, 255, 0.1)');
            overallGlow.addColorStop(1, 'rgba(30, 100, 200, 0)');
            ctx.fillStyle = overallGlow;
            ctx.fillRect(0, 0, width, height);

            // Labels
            ctx.fillStyle = '#6699cc';
            ctx.font = '14px Segoe UI';
            ctx.textAlign = 'center';
            ctx.fillText('Nuclear Reactor Pool - Cherenkov Radiation', width / 2, 30);
            ctx.fillText('Fuel Assemblies', width / 2, height - 20);
            ctx.textAlign = 'left';
        }

        function animate() {
            if (viewMode === 'wave') {
                drawWaveView();
            } else {
                drawReactorView();
            }

            if (running) {
                time += 16;
            }

            requestAnimationFrame(animate);
        }

        // Handle resize
        window.addEventListener('resize', () => {
            const rect = canvas.getBoundingClientRect();
            canvas.width = rect.width * dpr;
            canvas.height = rect.width * 0.7 * dpr;
            canvas.style.height = rect.width * 0.7 + 'px';
            ctx.scale(dpr, dpr);
        });

        updatePhysics();
        animate();
    </script>
</body>
</html>
