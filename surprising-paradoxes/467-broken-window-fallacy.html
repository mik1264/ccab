<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Broken Window Fallacy - What Is Seen and What Is Not Seen</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        header { text-align: center; margin-bottom: 30px; }
        .back-link {
            color: #ff6b6b;
            text-decoration: none;
            margin-bottom: 20px;
            display: inline-block;
        }
        h1 {
            font-size: 2.3rem;
            background: linear-gradient(135deg, #e74c3c, #f39c12, #3498db);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }
        .subtitle {
            font-size: 1rem;
            color: #a0c4ff;
            max-width: 850px;
            margin: 0 auto;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 320px;
            gap: 25px;
            margin-bottom: 30px;
        }
        @media (max-width: 900px) {
            .main-grid { grid-template-columns: 1fr; }
        }

        .panel {
            background: rgba(20, 30, 50, 0.85);
            border-radius: 15px;
            padding: 25px;
        }
        .panel h2 {
            color: #feca57;
            margin-bottom: 15px;
            font-size: 1.2rem;
            text-align: center;
        }

        /* Scene */
        #sceneCanvas {
            width: 100%;
            height: 300px;
            border-radius: 10px;
            background: linear-gradient(180deg, #87CEEB 0%, #87CEEB 60%, #8B4513 60%, #8B4513 100%);
            margin-bottom: 15px;
        }

        /* Phase indicator */
        .phase-indicator {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .phase-step {
            padding: 8px 12px;
            border-radius: 20px;
            background: rgba(100,100,100,0.3);
            color: #888;
            font-size: 0.8rem;
            transition: all 0.3s;
        }
        .phase-step.active {
            background: linear-gradient(135deg, #e74c3c, #f39c12);
            color: white;
        }
        .phase-step.completed {
            background: #27ae60;
            color: white;
        }

        /* Narrative box */
        .narrative-box {
            background: rgba(0,0,0,0.4);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            min-height: 100px;
        }
        .narrative-title {
            color: #feca57;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .narrative-text {
            color: #c0c0c0;
            font-size: 0.95rem;
        }
        .narrative-text strong {
            color: #e74c3c;
        }
        .narrative-text .green {
            color: #2ecc71;
        }
        .narrative-text .blue {
            color: #3498db;
        }

        /* Money flows */
        .money-flow {
            display: flex;
            align-items: center;
            justify-content: space-around;
            margin: 20px 0;
            flex-wrap: wrap;
            gap: 10px;
        }
        .entity-box {
            text-align: center;
            padding: 15px;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            min-width: 100px;
        }
        .entity-icon {
            font-size: 2rem;
            margin-bottom: 5px;
        }
        .entity-name {
            font-size: 0.85rem;
            color: #888;
        }
        .entity-money {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2ecc71;
            margin-top: 5px;
        }
        .flow-arrow {
            font-size: 1.5rem;
            color: #f39c12;
        }

        /* Comparison charts */
        .comparison-section {
            margin-top: 20px;
        }
        .comparison-row {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
        }
        .comparison-label {
            width: 120px;
            color: #888;
            font-size: 0.85rem;
        }
        .comparison-bar {
            flex: 1;
            height: 25px;
            background: rgba(100,100,100,0.2);
            border-radius: 5px;
            margin: 0 10px;
            overflow: hidden;
            position: relative;
        }
        .bar-fill {
            height: 100%;
            border-radius: 5px;
            transition: width 1s ease-out;
        }
        .bar-seen {
            background: linear-gradient(90deg, #27ae60, #2ecc71);
        }
        .bar-unseen {
            background: linear-gradient(90deg, #e74c3c, #c0392b);
            position: absolute;
            top: 0;
            right: 0;
        }
        .comparison-value {
            width: 80px;
            text-align: right;
            font-weight: bold;
            color: #feca57;
        }

        /* Action button */
        .action-btn {
            width: 100%;
            padding: 15px;
            font-size: 1.1rem;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            background: linear-gradient(135deg, #e74c3c, #f39c12);
            color: white;
            font-weight: bold;
            transition: all 0.3s;
        }
        .action-btn:hover {
            transform: translateY(-2px);
        }
        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Side panel */
        .ledger-box {
            background: rgba(0,0,0,0.4);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }
        .ledger-title {
            color: #feca57;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 0.95rem;
            border-bottom: 1px solid rgba(100,100,100,0.3);
            padding-bottom: 8px;
        }
        .ledger-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        .ledger-label {
            color: #888;
        }
        .ledger-value {
            font-weight: bold;
        }
        .ledger-value.positive { color: #2ecc71; }
        .ledger-value.negative { color: #e74c3c; }
        .ledger-total {
            border-top: 1px solid rgba(100,100,100,0.3);
            padding-top: 10px;
            margin-top: 10px;
        }

        /* Quote */
        .quote-box {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            border-left: 3px solid #f39c12;
        }
        .quote-text {
            font-style: italic;
            color: #c0c0c0;
            font-size: 0.9rem;
            margin-bottom: 8px;
        }
        .quote-author {
            color: #888;
            font-size: 0.8rem;
        }

        /* Research section */
        .research-section {
            background: rgba(20, 30, 50, 0.85);
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
        }
        .research-section h2 {
            color: #48dbfb;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        .research-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .research-card {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 20px;
            border-left: 3px solid #48dbfb;
        }
        .research-card h3 {
            color: #feca57;
            margin-bottom: 10px;
            font-size: 1rem;
        }
        .research-card p {
            color: #a0a0a0;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="index.html" class="back-link">‚Üê Back to Gallery</a>
            <h1>The Broken Window Fallacy</h1>
            <p class="subtitle">
                Fr√©d√©ric Bastiat (1850): "There is only one difference between a bad economist and a good one:
                the bad economist confines himself to the visible effect; the good economist takes into account
                both the effect that can be seen and those effects that must be foreseen."
            </p>
        </header>

        <div class="phase-indicator">
            <div class="phase-step active" id="phase1">1. Before</div>
            <div class="phase-step" id="phase2">2. The Break</div>
            <div class="phase-step" id="phase3">3. What Is Seen</div>
            <div class="phase-step" id="phase4">4. What Is NOT Seen</div>
            <div class="phase-step" id="phase5">5. The Truth</div>
        </div>

        <div class="main-grid">
            <div class="panel">
                <h2>üè™ The Baker's Shop</h2>

                <canvas id="sceneCanvas"></canvas>

                <div class="narrative-box">
                    <div class="narrative-title" id="narrativeTitle">Initial State</div>
                    <div class="narrative-text" id="narrativeText">
                        The baker has a shop with a beautiful window and 100 francs in savings.
                        He's planning to buy a new suit from the tailor.
                    </div>
                </div>

                <div class="money-flow" id="moneyFlow" style="display: none;">
                    <!-- Dynamically filled -->
                </div>

                <div class="comparison-section" id="comparisonSection" style="display: none;">
                    <div class="comparison-row">
                        <div class="comparison-label">What Is SEEN</div>
                        <div class="comparison-bar">
                            <div class="bar-fill bar-seen" id="seenBar" style="width: 0%"></div>
                        </div>
                        <div class="comparison-value" id="seenValue">0</div>
                    </div>
                    <div class="comparison-row">
                        <div class="comparison-label">What Is UNSEEN</div>
                        <div class="comparison-bar">
                            <div class="bar-fill bar-unseen" id="unseenBar" style="width: 0%"></div>
                        </div>
                        <div class="comparison-value" id="unseenValue">0</div>
                    </div>
                </div>

                <button class="action-btn" id="actionBtn" onclick="nextPhase()">
                    Continue ‚Üí
                </button>
            </div>

            <div class="panel">
                <h2>üìä Economic Ledger</h2>

                <div class="ledger-box">
                    <div class="ledger-title">Baker's Assets</div>
                    <div class="ledger-row">
                        <span class="ledger-label">Cash</span>
                        <span class="ledger-value positive" id="bakerCash">100 fr</span>
                    </div>
                    <div class="ledger-row">
                        <span class="ledger-label">Window</span>
                        <span class="ledger-value positive" id="bakerWindow">100 fr</span>
                    </div>
                    <div class="ledger-row">
                        <span class="ledger-label">Suit (planned)</span>
                        <span class="ledger-value" id="bakerSuit" style="color: #888;">‚Äî </span>
                    </div>
                    <div class="ledger-row ledger-total">
                        <span class="ledger-label"><strong>Total Wealth</strong></span>
                        <span class="ledger-value positive" id="bakerTotal">200 fr</span>
                    </div>
                </div>

                <div class="ledger-box">
                    <div class="ledger-title">Community Activity</div>
                    <div class="ledger-row">
                        <span class="ledger-label">Glazier income</span>
                        <span class="ledger-value" id="glazierIncome">‚Äî</span>
                    </div>
                    <div class="ledger-row">
                        <span class="ledger-label">Tailor income</span>
                        <span class="ledger-value" id="tailorIncome">‚Äî</span>
                    </div>
                    <div class="ledger-row ledger-total">
                        <span class="ledger-label"><strong>Net Wealth Created</strong></span>
                        <span class="ledger-value" id="netCreated">‚Äî</span>
                    </div>
                </div>

                <div class="ledger-box" id="verdictBox" style="display: none;">
                    <div class="ledger-title" style="color: #e74c3c;">THE FALLACY REVEALED</div>
                    <div style="color: #a0a0a0; font-size: 0.85rem;">
                        Destruction does NOT create wealth. It merely <em>redirects</em> spending
                        while <em>destroying</em> the window's value. The community has
                        <strong style="color: #e74c3c;">less total wealth</strong> than before.
                    </div>
                </div>

                <div class="quote-box">
                    <div class="quote-text">
                        "The bad economist sees only what immediately strikes the eye;
                        the good economist also looks beyond."
                    </div>
                    <div class="quote-author">‚Äî Fr√©d√©ric Bastiat, 1850</div>
                </div>
            </div>
        </div>

        <div class="research-section">
            <h2>What Is Seen and What Is Not Seen</h2>

            <div class="research-grid">
                <div class="research-card">
                    <h3>üìö The Original Essay (1850)</h3>
                    <p>
                        French economist Fr√©d√©ric Bastiat wrote "Ce qu'on voit et ce qu'on ne voit pas"
                        (That Which Is Seen and That Which Is Not Seen) to illustrate the concept of
                        <strong>opportunity cost</strong>. The parable of the broken window has become
                        one of the most famous illustrations in economics education.
                    </p>
                </div>

                <div class="research-card">
                    <h3>üîç The Core Insight</h3>
                    <p>
                        A crowd sees the glazier get paid and concludes "destruction creates jobs!"
                        But they don't see what the baker <em>would have</em> spent that money on‚Äî
                        a new suit, better equipment, savings for growth. The destruction didn't create
                        economic activity; it merely <strong>redirected</strong> it while destroying value.
                    </p>
                </div>

                <div class="research-card">
                    <h3>üí∞ Opportunity Cost</h3>
                    <p>
                        Every choice has an <strong>opportunity cost</strong>‚Äîwhat you give up to make it.
                        The 100 francs spent on the window can no longer buy the suit. The tailor loses
                        a customer. The cloth maker loses a sale. This ripple effect is "unseen"
                        but just as real as the glazier's visible gains.
                    </p>
                </div>

                <div class="research-card">
                    <h3>üèóÔ∏è Modern Examples</h3>
                    <p>
                        <strong>"War is good for the economy"</strong> ‚Äî Same fallacy. We see military production
                        but not the schools, hospitals, and innovations that weren't built.<br>
                        <strong>"Natural disasters boost GDP"</strong> ‚Äî Reconstruction spending is visible;
                        the destroyed homes, lost productivity, and foregone investments are not.
                    </p>
                </div>

                <div class="research-card">
                    <h3>üìâ The GDP Illusion</h3>
                    <p>
                        GDP measures <em>spending</em>, not <em>well-being</em>. If a hurricane destroys
                        a city, reconstruction increases GDP‚Äîbut the community is clearly poorer!
                        Bastiat's insight: accounting for only the "seen" systematically misleads us
                        about true economic welfare.
                    </p>
                </div>

                <div class="research-card">
                    <h3>üìñ Hazlitt's Expansion</h3>
                    <p>
                        Henry Hazlitt's 1946 book <em>Economics in One Lesson</em> expanded Bastiat's insight
                        into an entire economics education: "The art of economics consists in looking not
                        merely at the immediate but at the longer effects of any act or policy; it consists
                        in tracing the consequences of that policy not merely for one group but for all groups."
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('sceneCanvas');
        const ctx = canvas.getContext('2d');
        let width, height;

        let currentPhase = 1;
        let windowBroken = false;
        let animating = false;

        // Resize canvas
        function resizeCanvas() {
            const rect = canvas.getBoundingClientRect();
            width = canvas.width = rect.width * 2;
            height = canvas.height = rect.height * 2;
            ctx.scale(2, 2);
            drawScene();
        }

        function drawScene() {
            const w = width / 2;
            const h = height / 2;

            // Sky
            ctx.fillStyle = '#87CEEB';
            ctx.fillRect(0, 0, w, h * 0.6);

            // Ground
            ctx.fillStyle = '#8B7355';
            ctx.fillRect(0, h * 0.6, w, h * 0.4);

            // Shop building
            const shopX = w * 0.2;
            const shopW = w * 0.4;
            const shopH = h * 0.55;
            const shopY = h * 0.6 - shopH;

            // Building
            ctx.fillStyle = '#D2691E';
            ctx.fillRect(shopX, shopY, shopW, shopH);

            // Roof
            ctx.fillStyle = '#8B4513';
            ctx.beginPath();
            ctx.moveTo(shopX - 10, shopY);
            ctx.lineTo(shopX + shopW / 2, shopY - 30);
            ctx.lineTo(shopX + shopW + 10, shopY);
            ctx.closePath();
            ctx.fill();

            // Window frame
            const winX = shopX + shopW * 0.2;
            const winY = shopY + 30;
            const winW = shopW * 0.6;
            const winH = shopH * 0.5;

            ctx.fillStyle = '#4a3728';
            ctx.fillRect(winX - 5, winY - 5, winW + 10, winH + 10);

            // Window glass
            if (!windowBroken) {
                ctx.fillStyle = 'rgba(135, 206, 235, 0.6)';
                ctx.fillRect(winX, winY, winW, winH);

                // Shine
                ctx.strokeStyle = 'rgba(255,255,255,0.5)';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(winX + 10, winY + 10);
                ctx.lineTo(winX + winW - 30, winY + winH - 30);
                ctx.stroke();
            } else {
                // Broken window
                ctx.fillStyle = 'rgba(50,50,50,0.3)';
                ctx.fillRect(winX, winY, winW, winH);

                // Cracks
                ctx.strokeStyle = '#333';
                ctx.lineWidth = 2;
                const cx = winX + winW / 2;
                const cy = winY + winH / 2;
                for (let i = 0; i < 8; i++) {
                    const angle = (i / 8) * Math.PI * 2;
                    ctx.beginPath();
                    ctx.moveTo(cx, cy);
                    ctx.lineTo(cx + Math.cos(angle) * winW/2, cy + Math.sin(angle) * winH/2);
                    ctx.stroke();
                }

                // Shards on ground
                ctx.fillStyle = 'rgba(135, 206, 235, 0.4)';
                for (let i = 0; i < 10; i++) {
                    const sx = winX + Math.random() * winW;
                    const sy = shopY + shopH + 5 + Math.random() * 10;
                    ctx.beginPath();
                    ctx.moveTo(sx, sy);
                    ctx.lineTo(sx + 5, sy + 3);
                    ctx.lineTo(sx + 2, sy + 8);
                    ctx.closePath();
                    ctx.fill();
                }
            }

            // Door
            ctx.fillStyle = '#654321';
            ctx.fillRect(shopX + shopW * 0.4, shopY + shopH - 60, shopW * 0.2, 60);

            // Sign
            ctx.fillStyle = '#f5f5dc';
            ctx.fillRect(shopX + 10, shopY - 25, shopW - 20, 20);
            ctx.fillStyle = '#333';
            ctx.font = '12px Georgia';
            ctx.textAlign = 'center';
            ctx.fillText('BOULANGERIE', shopX + shopW/2, shopY - 10);

            // Baker
            const bakerX = shopX + shopW + 30;
            drawPerson(bakerX, h * 0.6 - 50, 'üë®‚Äçüç≥', 'Baker');

            // Show different characters based on phase
            if (currentPhase >= 3 && windowBroken) {
                // Glazier
                drawPerson(w * 0.75, h * 0.6 - 50, 'üîß', 'Glazier');
            }

            if (currentPhase >= 4) {
                // Tailor (faded/ghostly)
                ctx.globalAlpha = 0.4;
                drawPerson(w * 0.85, h * 0.6 - 50, 'üßµ', 'Tailor');
                ctx.globalAlpha = 1;

                // X mark over tailor
                ctx.strokeStyle = '#e74c3c';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(w * 0.85 - 15, h * 0.6 - 70);
                ctx.lineTo(w * 0.85 + 15, h * 0.6 - 30);
                ctx.moveTo(w * 0.85 + 15, h * 0.6 - 70);
                ctx.lineTo(w * 0.85 - 15, h * 0.6 - 30);
                ctx.stroke();
            }

            // Kid with rock (phase 2)
            if (currentPhase === 2 && !windowBroken) {
                drawPerson(w * 0.08, h * 0.6 - 30, 'üßí', 'Kid');

                // Rock trajectory
                ctx.strokeStyle = '#888';
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(w * 0.08 + 20, h * 0.6 - 40);
                ctx.quadraticCurveTo(winX - 30, winY - 50, winX + winW/2, winY + winH/2);
                ctx.stroke();
                ctx.setLineDash([]);

                // Rock
                ctx.fillStyle = '#666';
                ctx.beginPath();
                ctx.arc(w * 0.15, h * 0.35, 8, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function drawPerson(x, y, emoji, label) {
            ctx.font = '30px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(emoji, x, y);

            ctx.font = '10px Georgia';
            ctx.fillStyle = '#888';
            ctx.fillText(label, x, y + 20);
        }

        const phases = [
            {
                title: 'Initial State',
                text: 'The baker has a shop with a beautiful window worth <span class="green">100 francs</span> and <span class="green">100 francs</span> in savings. He\'s planning to buy a new suit from the tailor next week.',
                button: 'A Boy Throws a Rock...'
            },
            {
                title: 'The Window Breaks!',
                text: 'CRASH! A careless boy breaks the baker\'s window. The crowd gathers, initially sympathetic... but then someone says: "Well, at least this will <strong>stimulate the economy!</strong>"',
                button: 'Show What Is SEEN'
            },
            {
                title: 'What Is SEEN',
                text: 'The baker pays the glazier <span class="green">100 francs</span> for a new window. The glazier has money to spend! He buys materials, food, maybe goes to the tavern. <strong>Economic activity!</strong> Jobs created! Everyone wins, right?',
                button: 'Reveal What Is NOT Seen'
            },
            {
                title: 'What Is NOT Seen',
                text: 'The baker <strong>would have</strong> bought a suit for <span class="blue">100 francs</span>. Now he can\'t. The tailor loses a sale. The cloth merchant loses an order. The sheep farmer loses demand. This <strong>invisible chain</strong> is just as real‚Äîbut nobody sees it.',
                button: 'The Final Reckoning'
            },
            {
                title: 'THE TRUTH REVEALED',
                text: 'BEFORE: Baker had a window + would get a suit = <span class="green">200 fr of goods</span>.<br>AFTER: Baker has only a window = <span style="color:#e74c3c">100 fr of goods</span>.<br><br>The community lost <strong style="color:#e74c3c">100 francs of real wealth</strong>. Destruction doesn\'t create‚Äîit destroys.',
                button: 'Start Over'
            }
        ];

        function updatePhase() {
            const phase = phases[currentPhase - 1];

            // Update phase indicators
            document.querySelectorAll('.phase-step').forEach((el, i) => {
                el.className = 'phase-step';
                if (i + 1 < currentPhase) el.classList.add('completed');
                if (i + 1 === currentPhase) el.classList.add('active');
            });

            // Update narrative
            document.getElementById('narrativeTitle').textContent = phase.title;
            document.getElementById('narrativeText').innerHTML = phase.text;
            document.getElementById('actionBtn').textContent = phase.button;

            // Update ledger based on phase
            updateLedger();

            // Show money flow for phase 3+
            const moneyFlow = document.getElementById('moneyFlow');
            const comparisonSection = document.getElementById('comparisonSection');

            if (currentPhase >= 3) {
                moneyFlow.style.display = 'flex';
                moneyFlow.innerHTML = `
                    <div class="entity-box">
                        <div class="entity-icon">üë®‚Äçüç≥</div>
                        <div class="entity-name">Baker</div>
                        <div class="entity-money">-100 fr</div>
                    </div>
                    <div class="flow-arrow">‚Üí</div>
                    <div class="entity-box">
                        <div class="entity-icon">üîß</div>
                        <div class="entity-name">Glazier</div>
                        <div class="entity-money">+100 fr</div>
                    </div>
                `;
            }

            if (currentPhase >= 4) {
                moneyFlow.innerHTML += `
                    <div class="flow-arrow" style="color: #e74c3c;">‚úó</div>
                    <div class="entity-box" style="opacity: 0.5;">
                        <div class="entity-icon">üßµ</div>
                        <div class="entity-name">Tailor</div>
                        <div class="entity-money" style="color: #e74c3c;">Lost Sale</div>
                    </div>
                `;
            }

            if (currentPhase >= 4) {
                comparisonSection.style.display = 'block';
                setTimeout(() => {
                    document.getElementById('seenBar').style.width = '50%';
                    document.getElementById('seenValue').textContent = '100 fr';
                    document.getElementById('unseenBar').style.width = '50%';
                    document.getElementById('unseenValue').textContent = '-100 fr';
                }, 100);
            }

            if (currentPhase >= 5) {
                document.getElementById('verdictBox').style.display = 'block';
            }

            drawScene();
        }

        function updateLedger() {
            if (currentPhase === 1) {
                document.getElementById('bakerCash').textContent = '100 fr';
                document.getElementById('bakerWindow').textContent = '100 fr';
                document.getElementById('bakerSuit').textContent = '(planned)';
                document.getElementById('bakerSuit').style.color = '#3498db';
                document.getElementById('bakerTotal').textContent = '200 fr';
                document.getElementById('glazierIncome').textContent = '‚Äî';
                document.getElementById('tailorIncome').textContent = '(expected)';
                document.getElementById('tailorIncome').style.color = '#3498db';
                document.getElementById('netCreated').textContent = '‚Äî';
            } else if (currentPhase === 2) {
                document.getElementById('bakerWindow').textContent = '0 fr';
                document.getElementById('bakerWindow').className = 'ledger-value negative';
                document.getElementById('bakerTotal').textContent = '100 fr';
            } else if (currentPhase === 3) {
                document.getElementById('bakerCash').textContent = '0 fr';
                document.getElementById('bakerCash').className = 'ledger-value negative';
                document.getElementById('bakerWindow').textContent = '100 fr';
                document.getElementById('bakerWindow').className = 'ledger-value positive';
                document.getElementById('bakerSuit').textContent = '‚Äî';
                document.getElementById('bakerSuit').style.color = '#888';
                document.getElementById('glazierIncome').textContent = '+100 fr';
                document.getElementById('glazierIncome').className = 'ledger-value positive';
            } else if (currentPhase >= 4) {
                document.getElementById('tailorIncome').textContent = '0 fr';
                document.getElementById('tailorIncome').className = 'ledger-value negative';
                document.getElementById('netCreated').textContent = '-100 fr';
                document.getElementById('netCreated').className = 'ledger-value negative';
            }
        }

        function nextPhase() {
            if (currentPhase === 2 && !windowBroken) {
                // Break the window with animation
                windowBroken = true;
            }

            currentPhase++;

            if (currentPhase > 5) {
                // Reset
                currentPhase = 1;
                windowBroken = false;
                document.getElementById('moneyFlow').style.display = 'none';
                document.getElementById('comparisonSection').style.display = 'none';
                document.getElementById('verdictBox').style.display = 'none';
                document.getElementById('seenBar').style.width = '0%';
                document.getElementById('unseenBar').style.width = '0%';
            }

            updatePhase();
        }

        // Initialize
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();
        updatePhase();
    </script>
</body>
</html>
