<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Hermann Grid - Ghostly Dots That Vanish When You Look</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            font-size: 2.5em;
            color: #e94560;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            font-size: 1.2em;
            color: #a0a0a0;
            font-style: italic;
        }

        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #e94560;
            text-decoration: none;
            font-size: 1.1em;
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 100;
            background: rgba(26, 26, 46, 0.9);
            padding: 8px 15px;
            border-radius: 20px;
            transition: all 0.3s ease;
        }

        .back-link:hover {
            background: rgba(233, 69, 96, 0.2);
            transform: translateX(-3px);
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        @media (max-width: 900px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        .panel {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .panel h2 {
            color: #e94560;
            margin-bottom: 20px;
            font-size: 1.4em;
        }

        .canvas-container {
            text-align: center;
            margin-bottom: 20px;
        }

        canvas {
            border-radius: 10px;
            cursor: crosshair;
        }

        .controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .control-group label {
            color: #a0a0a0;
            font-size: 0.9em;
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: rgba(255,255,255,0.1);
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #e94560;
            cursor: pointer;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .btn-primary {
            background: linear-gradient(135deg, #e94560, #0f3460);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(233, 69, 96, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #e0e0e0;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .full-width {
            grid-column: 1 / -1;
        }

        .explanation {
            line-height: 1.8;
        }

        .explanation p {
            margin-bottom: 15px;
        }

        .highlight {
            color: #e94560;
            font-weight: bold;
        }

        .history-box {
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid #e94560;
        }

        .history-box h3 {
            color: #e94560;
            margin-bottom: 10px;
        }

        .instruction-box {
            background: rgba(233, 69, 96, 0.15);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border: 1px solid rgba(233, 69, 96, 0.3);
        }

        .science-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .science-card {
            background: rgba(255, 255, 255, 0.08);
            padding: 20px;
            border-radius: 10px;
        }

        .science-card h3 {
            color: #4ecdc4;
            margin-bottom: 10px;
        }

        .dot-counter {
            font-size: 1.5em;
            color: #4ecdc4;
            text-align: center;
            margin-top: 10px;
        }

        .variant-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 15px;
        }

        .fixation-dot {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #e94560;
            border-radius: 50%;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">
        <span>←</span> Back to Paradoxes
    </a>

    <div class="container">
        <header>
            <h1>The Hermann Grid</h1>
            <p class="subtitle">Ghostly dots that vanish when you look at them</p>
        </header>

        <div class="main-content">
            <!-- Classic Hermann Grid -->
            <div class="panel">
                <h2>Classic Hermann Grid</h2>
                <div class="instruction-box">
                    <strong>Instructions:</strong> Look at ANY intersection—the grey dot VANISHES!
                    But in your peripheral vision, ghostly dots appear at ALL other intersections.
                </div>
                <div class="canvas-container">
                    <canvas id="classicCanvas" width="400" height="400"></canvas>
                </div>
                <p class="dot-counter">
                    Phantom dots seen: <span id="phantomCount">∞</span> (but actually: 0)
                </p>
            </div>

            <!-- Scintillating Grid -->
            <div class="panel">
                <h2>Scintillating Grid</h2>
                <div class="instruction-box">
                    <strong>Even more dramatic!</strong> White dots on intersections seem to FLASH black
                    and disappear in waves. The effect intensifies with rapid eye movements!
                </div>
                <div class="canvas-container">
                    <canvas id="scintillatingCanvas" width="400" height="400"></canvas>
                </div>
                <p style="text-align: center; color: #a0a0a0; font-size: 0.9em;">
                    Discovered by Elke Lingelbach (1994). Move your eyes rapidly for maximum effect!
                </p>
            </div>

            <!-- Adjustable Grid -->
            <div class="panel">
                <h2>Customize the Grid</h2>
                <div class="canvas-container">
                    <canvas id="customCanvas" width="400" height="400"></canvas>
                </div>
                <div class="controls">
                    <div class="control-group">
                        <label>Grid Size: <span id="gridSizeValue">5×5</span></label>
                        <input type="range" id="gridSizeSlider" min="3" max="10" value="5" oninput="updateCustomGrid()">
                    </div>
                    <div class="control-group">
                        <label>Line Width: <span id="lineWidthValue">12px</span></label>
                        <input type="range" id="lineWidthSlider" min="5" max="30" value="12" oninput="updateCustomGrid()">
                    </div>
                    <div class="control-group">
                        <label>Square Size: <span id="squareSizeValue">60px</span></label>
                        <input type="range" id="squareSizeSlider" min="30" max="100" value="60" oninput="updateCustomGrid()">
                    </div>
                </div>
                <p style="margin-top: 15px; color: #a0a0a0; font-size: 0.9em;">
                    The illusion works best with specific proportions. Too thin or too wide lines reduce the effect!
                </p>
            </div>

            <!-- Color Variants -->
            <div class="panel">
                <h2>Color Experiments</h2>
                <div class="canvas-container">
                    <canvas id="colorCanvas" width="400" height="400"></canvas>
                </div>
                <div class="variant-buttons">
                    <button class="btn btn-secondary" onclick="setColorScheme('classic')">Classic B&W</button>
                    <button class="btn btn-secondary" onclick="setColorScheme('inverted')">Inverted</button>
                    <button class="btn btn-secondary" onclick="setColorScheme('blue')">Blue</button>
                    <button class="btn btn-secondary" onclick="setColorScheme('red')">Red</button>
                    <button class="btn btn-secondary" onclick="setColorScheme('green')">Green</button>
                </div>
                <p style="text-align: center; color: #a0a0a0; font-size: 0.9em;">
                    The illusion works with ANY high-contrast color combination!
                </p>
            </div>

            <!-- Breaking the Illusion -->
            <div class="panel">
                <h2>Breaking the Illusion</h2>
                <div class="canvas-container">
                    <canvas id="breakCanvas" width="400" height="400"></canvas>
                </div>
                <div class="variant-buttons">
                    <button class="btn btn-secondary" onclick="setBreakMode('normal')">Normal Grid</button>
                    <button class="btn btn-secondary" onclick="setBreakMode('wavy')">Wavy Lines</button>
                    <button class="btn btn-secondary" onclick="setBreakMode('circles')">Rounded</button>
                    <button class="btn btn-secondary" onclick="setBreakMode('dots')">Real Dots</button>
                </div>
                <p style="text-align: center; color: #a0a0a0; font-size: 0.9em;">
                    Making lines wavy or adding actual dots DESTROYS the illusion—proving the phantoms are neural artifacts!
                </p>
            </div>

            <!-- Fixation Demo -->
            <div class="panel">
                <h2>Track Your Gaze</h2>
                <div class="canvas-container" style="position: relative;">
                    <canvas id="trackCanvas" width="400" height="400"></canvas>
                    <div id="fixationDot" class="fixation-dot" style="display: none;"></div>
                </div>
                <div class="variant-buttons">
                    <button class="btn btn-primary" onclick="toggleTracking()">
                        <span id="trackBtn">Start Tracking</span>
                    </button>
                </div>
                <p style="text-align: center; color: #a0a0a0; font-size: 0.9em;">
                    Click to see where you're looking. Notice dots vanish ONLY at fixation point!
                </p>
            </div>

            <!-- Scientific Explanation -->
            <div class="panel full-width">
                <h2>The Neuroscience: Lateral Inhibition</h2>
                <div class="science-grid">
                    <div class="science-card">
                        <h3>Receptive Fields</h3>
                        <p>Each retinal ganglion cell responds to a circular area called a "receptive field."
                        The CENTER is excitatory (light = more signal), while the SURROUND is inhibitory
                        (light = less signal).</p>
                    </div>
                    <div class="science-card">
                        <h3>At Intersections</h3>
                        <p>The white lines stimulate MORE of the inhibitory surround at intersections
                        (4 directions of white vs 2). This extra inhibition makes the intersection
                        appear DARKER—a phantom grey dot!</p>
                    </div>
                    <div class="science-card">
                        <h3>Foveal Exception</h3>
                        <p>Your fovea (center of gaze) has TINY receptive fields that only "see"
                        the intersection itself—not enough surround for inhibition. So the dot
                        vanishes when you look directly at it!</p>
                    </div>
                    <div class="science-card">
                        <h3>Peripheral Vision</h3>
                        <p>Peripheral receptive fields are LARGER, covering both the intersection
                        AND surrounding white bars. Maximum lateral inhibition = maximum phantom dots!</p>
                    </div>
                </div>
            </div>

            <!-- Interactive Explanation -->
            <div class="panel full-width">
                <h2>Visualize Lateral Inhibition</h2>
                <div style="display: flex; gap: 30px; flex-wrap: wrap; justify-content: center; align-items: start;">
                    <div class="canvas-container">
                        <canvas id="inhibitionCanvas" width="500" height="350"></canvas>
                    </div>
                    <div style="max-width: 400px;">
                        <p style="margin-bottom: 15px;">
                            <strong>The diagram shows:</strong>
                        </p>
                        <ul style="line-height: 1.8; margin-left: 20px;">
                            <li><span class="highlight">Left:</span> Receptive field on a LINE (2 white bars in surround)</li>
                            <li><span class="highlight">Right:</span> Receptive field at INTERSECTION (4 white bars)</li>
                            <li>More white in surround = more inhibition = darker perception</li>
                            <li>The intersection receives ~2× the inhibitory input!</li>
                        </ul>
                        <p style="margin-top: 15px; color: #a0a0a0;">
                            This is the same mechanism that creates Mach Bands—the illusion of
                            enhanced edges at luminance boundaries.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Explanation -->
            <div class="panel full-width explanation">
                <h2>The History of the Hermann Grid</h2>
                <p>
                    The <span class="highlight">Hermann Grid Illusion</span> was first reported by
                    <span class="highlight">Ludimar Hermann in 1870</span>, making it one of the
                    oldest documented visual illusions. Hermann noticed ghostly grey spots appearing
                    at the intersections of a grid of black squares separated by white bars.
                </p>
                <p>
                    For over a century, the standard explanation was <span class="highlight">lateral
                    inhibition</span> in retinal ganglion cells. This theory, while elegant, has been
                    challenged by more recent research suggesting that cortical processing also plays
                    a role. The debate continues!
                </p>
                <p>
                    The <span class="highlight">Scintillating Grid</span> variant, discovered by
                    Elke Lingelbach in 1994, adds white dots at each intersection. These dots appear
                    to flash black and vanish in rapid, wave-like patterns—an even more dramatic
                    demonstration of peripheral visual processing.
                </p>

                <div class="history-box">
                    <h3>Why Does This Matter?</h3>
                    <p>
                        The Hermann Grid demonstrates that what we "see" is not reality but a
                        CONSTRUCTION by our visual system. Our brain doesn't just passively
                        receive images—it actively processes, filters, and sometimes invents
                        information. Understanding these illusions helps us design better displays,
                        user interfaces, and even diagnose visual system disorders.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ========== CLASSIC HERMANN GRID ==========
        const classicCanvas = document.getElementById('classicCanvas');
        const classicCtx = classicCanvas.getContext('2d');

        function drawClassicGrid() {
            const width = classicCanvas.width;
            const height = classicCanvas.height;
            const gridSize = 5;
            const lineWidth = 12;
            const squareSize = (width - lineWidth) / gridSize - lineWidth / gridSize;

            classicCtx.fillStyle = '#000000';
            classicCtx.fillRect(0, 0, width, height);

            classicCtx.fillStyle = '#ffffff';
            // Horizontal lines
            for (let i = 0; i <= gridSize; i++) {
                const y = i * (squareSize + lineWidth);
                classicCtx.fillRect(0, y, width, lineWidth);
            }
            // Vertical lines
            for (let i = 0; i <= gridSize; i++) {
                const x = i * (squareSize + lineWidth);
                classicCtx.fillRect(x, 0, lineWidth, height);
            }
        }

        // ========== SCINTILLATING GRID ==========
        const scintillatingCanvas = document.getElementById('scintillatingCanvas');
        const scintillatingCtx = scintillatingCanvas.getContext('2d');

        function drawScintillatingGrid() {
            const width = scintillatingCanvas.width;
            const height = scintillatingCanvas.height;
            const gridSize = 6;
            const lineWidth = 8;
            const spacing = (width - lineWidth) / gridSize;

            // Grey background
            scintillatingCtx.fillStyle = '#404040';
            scintillatingCtx.fillRect(0, 0, width, height);

            // Draw grey lines
            scintillatingCtx.fillStyle = '#808080';
            for (let i = 0; i <= gridSize; i++) {
                const pos = i * spacing;
                scintillatingCtx.fillRect(pos, 0, lineWidth, height);
                scintillatingCtx.fillRect(0, pos, width, lineWidth);
            }

            // White dots at intersections
            scintillatingCtx.fillStyle = '#ffffff';
            for (let i = 0; i <= gridSize; i++) {
                for (let j = 0; j <= gridSize; j++) {
                    const x = i * spacing + lineWidth / 2;
                    const y = j * spacing + lineWidth / 2;
                    scintillatingCtx.beginPath();
                    scintillatingCtx.arc(x, y, 5, 0, Math.PI * 2);
                    scintillatingCtx.fill();
                }
            }
        }

        // ========== CUSTOM GRID ==========
        const customCanvas = document.getElementById('customCanvas');
        const customCtx = customCanvas.getContext('2d');

        function updateCustomGrid() {
            const gridSize = parseInt(document.getElementById('gridSizeSlider').value);
            const lineWidth = parseInt(document.getElementById('lineWidthSlider').value);
            const squareSize = parseInt(document.getElementById('squareSizeSlider').value);

            document.getElementById('gridSizeValue').textContent = `${gridSize}×${gridSize}`;
            document.getElementById('lineWidthValue').textContent = `${lineWidth}px`;
            document.getElementById('squareSizeValue').textContent = `${squareSize}px`;

            const width = customCanvas.width;
            const height = customCanvas.height;

            customCtx.fillStyle = '#000000';
            customCtx.fillRect(0, 0, width, height);

            customCtx.fillStyle = '#ffffff';

            const totalSize = gridSize * squareSize + (gridSize + 1) * lineWidth;
            const offsetX = (width - totalSize) / 2;
            const offsetY = (height - totalSize) / 2;

            // Horizontal lines
            for (let i = 0; i <= gridSize; i++) {
                const y = offsetY + i * (squareSize + lineWidth);
                customCtx.fillRect(offsetX, y, totalSize, lineWidth);
            }
            // Vertical lines
            for (let i = 0; i <= gridSize; i++) {
                const x = offsetX + i * (squareSize + lineWidth);
                customCtx.fillRect(x, offsetY, lineWidth, totalSize);
            }
        }

        // ========== COLOR VARIANTS ==========
        const colorCanvas = document.getElementById('colorCanvas');
        const colorCtx = colorCanvas.getContext('2d');
        let currentColorScheme = 'classic';

        const colorSchemes = {
            classic: { bg: '#000000', lines: '#ffffff' },
            inverted: { bg: '#ffffff', lines: '#000000' },
            blue: { bg: '#001a33', lines: '#4da6ff' },
            red: { bg: '#330000', lines: '#ff4d4d' },
            green: { bg: '#003300', lines: '#4dff4d' }
        };

        function setColorScheme(scheme) {
            currentColorScheme = scheme;
            drawColorGrid();
        }

        function drawColorGrid() {
            const width = colorCanvas.width;
            const height = colorCanvas.height;
            const gridSize = 5;
            const lineWidth = 12;
            const squareSize = (width - lineWidth) / gridSize - lineWidth / gridSize;

            const colors = colorSchemes[currentColorScheme];

            colorCtx.fillStyle = colors.bg;
            colorCtx.fillRect(0, 0, width, height);

            colorCtx.fillStyle = colors.lines;
            for (let i = 0; i <= gridSize; i++) {
                const pos = i * (squareSize + lineWidth);
                colorCtx.fillRect(0, pos, width, lineWidth);
                colorCtx.fillRect(pos, 0, lineWidth, height);
            }
        }

        // ========== BREAKING THE ILLUSION ==========
        const breakCanvas = document.getElementById('breakCanvas');
        const breakCtx = breakCanvas.getContext('2d');
        let breakMode = 'normal';

        function setBreakMode(mode) {
            breakMode = mode;
            drawBreakGrid();
        }

        function drawBreakGrid() {
            const width = breakCanvas.width;
            const height = breakCanvas.height;
            const gridSize = 5;
            const lineWidth = 12;
            const squareSize = (width - lineWidth) / gridSize - lineWidth / gridSize;

            breakCtx.fillStyle = '#000000';
            breakCtx.fillRect(0, 0, width, height);

            breakCtx.fillStyle = '#ffffff';
            breakCtx.strokeStyle = '#ffffff';
            breakCtx.lineWidth = lineWidth;

            if (breakMode === 'normal') {
                for (let i = 0; i <= gridSize; i++) {
                    const pos = i * (squareSize + lineWidth);
                    breakCtx.fillRect(0, pos, width, lineWidth);
                    breakCtx.fillRect(pos, 0, lineWidth, height);
                }
            } else if (breakMode === 'wavy') {
                // Wavy horizontal lines
                for (let i = 0; i <= gridSize; i++) {
                    const baseY = i * (squareSize + lineWidth) + lineWidth / 2;
                    breakCtx.beginPath();
                    for (let x = 0; x <= width; x += 5) {
                        const y = baseY + Math.sin(x * 0.1) * 4;
                        if (x === 0) breakCtx.moveTo(x, y);
                        else breakCtx.lineTo(x, y);
                    }
                    breakCtx.stroke();
                }
                // Wavy vertical lines
                for (let i = 0; i <= gridSize; i++) {
                    const baseX = i * (squareSize + lineWidth) + lineWidth / 2;
                    breakCtx.beginPath();
                    for (let y = 0; y <= height; y += 5) {
                        const x = baseX + Math.sin(y * 0.1) * 4;
                        if (y === 0) breakCtx.moveTo(x, y);
                        else breakCtx.lineTo(x, y);
                    }
                    breakCtx.stroke();
                }
            } else if (breakMode === 'circles') {
                // Grid with rounded intersections
                for (let i = 0; i <= gridSize; i++) {
                    const pos = i * (squareSize + lineWidth);
                    breakCtx.fillRect(0, pos, width, lineWidth);
                    breakCtx.fillRect(pos, 0, lineWidth, height);
                }
                // Add circles at intersections
                for (let i = 0; i <= gridSize; i++) {
                    for (let j = 0; j <= gridSize; j++) {
                        const x = i * (squareSize + lineWidth) + lineWidth / 2;
                        const y = j * (squareSize + lineWidth) + lineWidth / 2;
                        breakCtx.beginPath();
                        breakCtx.arc(x, y, lineWidth, 0, Math.PI * 2);
                        breakCtx.fill();
                    }
                }
            } else if (breakMode === 'dots') {
                // Add ACTUAL grey dots to show contrast
                for (let i = 0; i <= gridSize; i++) {
                    const pos = i * (squareSize + lineWidth);
                    breakCtx.fillRect(0, pos, width, lineWidth);
                    breakCtx.fillRect(pos, 0, lineWidth, height);
                }
                // Grey dots at every intersection
                breakCtx.fillStyle = '#808080';
                for (let i = 0; i <= gridSize; i++) {
                    for (let j = 0; j <= gridSize; j++) {
                        const x = i * (squareSize + lineWidth) + lineWidth / 2;
                        const y = j * (squareSize + lineWidth) + lineWidth / 2;
                        breakCtx.beginPath();
                        breakCtx.arc(x, y, 6, 0, Math.PI * 2);
                        breakCtx.fill();
                    }
                }
            }
        }

        // ========== GAZE TRACKING ==========
        const trackCanvas = document.getElementById('trackCanvas');
        const trackCtx = trackCanvas.getContext('2d');
        const fixationDot = document.getElementById('fixationDot');
        let isTracking = false;

        function drawTrackGrid() {
            const width = trackCanvas.width;
            const height = trackCanvas.height;
            const gridSize = 5;
            const lineWidth = 12;
            const squareSize = (width - lineWidth) / gridSize - lineWidth / gridSize;

            trackCtx.fillStyle = '#000000';
            trackCtx.fillRect(0, 0, width, height);

            trackCtx.fillStyle = '#ffffff';
            for (let i = 0; i <= gridSize; i++) {
                const pos = i * (squareSize + lineWidth);
                trackCtx.fillRect(0, pos, width, lineWidth);
                trackCtx.fillRect(pos, 0, lineWidth, height);
            }
        }

        function toggleTracking() {
            isTracking = !isTracking;
            document.getElementById('trackBtn').textContent = isTracking ? 'Stop Tracking' : 'Start Tracking';
            fixationDot.style.display = isTracking ? 'block' : 'none';
        }

        trackCanvas.addEventListener('mousemove', (e) => {
            if (!isTracking) return;
            const rect = trackCanvas.getBoundingClientRect();
            const x = e.clientX - rect.left - 5;
            const y = e.clientY - rect.top - 5;
            fixationDot.style.left = x + 'px';
            fixationDot.style.top = y + 'px';
        });

        // ========== LATERAL INHIBITION DIAGRAM ==========
        const inhibitionCanvas = document.getElementById('inhibitionCanvas');
        const inhibitionCtx = inhibitionCanvas.getContext('2d');

        function drawInhibitionDiagram() {
            const width = inhibitionCanvas.width;
            const height = inhibitionCanvas.height;

            inhibitionCtx.fillStyle = '#0a0a15';
            inhibitionCtx.fillRect(0, 0, width, height);

            // Left side: receptive field on a line
            const leftX = 120;
            const centerY = 175;

            // Draw simplified grid section (on line)
            inhibitionCtx.fillStyle = '#000000';
            inhibitionCtx.fillRect(leftX - 80, centerY - 60, 160, 120);
            inhibitionCtx.fillStyle = '#ffffff';
            inhibitionCtx.fillRect(leftX - 80, centerY - 10, 160, 20); // horizontal line

            // Draw receptive field circle
            inhibitionCtx.strokeStyle = '#e94560';
            inhibitionCtx.lineWidth = 3;
            inhibitionCtx.beginPath();
            inhibitionCtx.arc(leftX, centerY, 50, 0, Math.PI * 2);
            inhibitionCtx.stroke();

            // Inner circle (excitatory)
            inhibitionCtx.strokeStyle = '#4ecdc4';
            inhibitionCtx.beginPath();
            inhibitionCtx.arc(leftX, centerY, 20, 0, Math.PI * 2);
            inhibitionCtx.stroke();

            // Labels
            inhibitionCtx.fillStyle = '#ffffff';
            inhibitionCtx.font = '14px Georgia';
            inhibitionCtx.textAlign = 'center';
            inhibitionCtx.fillText('ON LINE', leftX, 300);
            inhibitionCtx.fillText('2 white bars in surround', leftX, 320);

            // Right side: receptive field at intersection
            const rightX = 380;

            // Draw simplified grid section (at intersection)
            inhibitionCtx.fillStyle = '#000000';
            inhibitionCtx.fillRect(rightX - 80, centerY - 60, 160, 120);
            inhibitionCtx.fillStyle = '#ffffff';
            inhibitionCtx.fillRect(rightX - 80, centerY - 10, 160, 20); // horizontal
            inhibitionCtx.fillRect(rightX - 10, centerY - 60, 20, 120); // vertical

            // Draw receptive field circle
            inhibitionCtx.strokeStyle = '#e94560';
            inhibitionCtx.lineWidth = 3;
            inhibitionCtx.beginPath();
            inhibitionCtx.arc(rightX, centerY, 50, 0, Math.PI * 2);
            inhibitionCtx.stroke();

            // Inner circle (excitatory)
            inhibitionCtx.strokeStyle = '#4ecdc4';
            inhibitionCtx.beginPath();
            inhibitionCtx.arc(rightX, centerY, 20, 0, Math.PI * 2);
            inhibitionCtx.stroke();

            // Labels
            inhibitionCtx.fillStyle = '#ffffff';
            inhibitionCtx.fillText('AT INTERSECTION', rightX, 300);
            inhibitionCtx.fillText('4 white bars = 2× inhibition!', rightX, 320);

            // Legend
            inhibitionCtx.textAlign = 'left';
            inhibitionCtx.fillStyle = '#4ecdc4';
            inhibitionCtx.fillText('● Center (excitatory)', 20, 30);
            inhibitionCtx.fillStyle = '#e94560';
            inhibitionCtx.fillText('○ Surround (inhibitory)', 20, 50);

            // Arrow showing "darker"
            inhibitionCtx.strokeStyle = '#e94560';
            inhibitionCtx.beginPath();
            inhibitionCtx.moveTo(250, centerY);
            inhibitionCtx.lineTo(280, centerY);
            inhibitionCtx.lineTo(275, centerY - 5);
            inhibitionCtx.moveTo(280, centerY);
            inhibitionCtx.lineTo(275, centerY + 5);
            inhibitionCtx.stroke();

            inhibitionCtx.fillStyle = '#e94560';
            inhibitionCtx.textAlign = 'center';
            inhibitionCtx.fillText('More inhibition', 265, centerY - 20);
            inhibitionCtx.fillText('= darker spot', 265, centerY + 35);
        }

        // Initialize all canvases
        drawClassicGrid();
        drawScintillatingGrid();
        updateCustomGrid();
        drawColorGrid();
        drawBreakGrid();
        drawTrackGrid();
        drawInhibitionDiagram();
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
