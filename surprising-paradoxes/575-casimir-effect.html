<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Casimir Effect: A Force from Nothing | Surprising Paradoxes</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #0a0510 0%, #150820 50%, #0a0515 100%);
            color: #e0e0e0;
            min-height: 100vh;
            overflow-x: hidden;
        }
        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #aa88ff;
            text-decoration: none;
            font-size: 1rem;
            z-index: 100;
            padding: 8px 16px;
            background: rgba(0,0,0,0.5);
            border-radius: 20px;
            transition: all 0.3s ease;
        }
        .back-link:hover {
            background: rgba(150, 100, 255, 0.2);
            transform: translateX(-3px);
        }
        header {
            text-align: center;
            padding: 80px 20px 30px;
        }
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #8866ff, #aa88ff, #ddbbff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .subtitle {
            color: #9988aa;
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        .demo-section {
            display: grid;
            grid-template-columns: 1fr 320px;
            gap: 30px;
            margin-bottom: 40px;
        }
        @media (max-width: 900px) {
            .demo-section {
                grid-template-columns: 1fr;
            }
        }
        .canvas-container {
            background: linear-gradient(145deg, #0a0510, #150820);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 40px rgba(100,50,150,0.2);
        }
        canvas {
            display: block;
            width: 100%;
            border-radius: 10px;
        }
        .controls {
            background: linear-gradient(145deg, #100815, #180c25);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 40px rgba(100,50,150,0.2);
        }
        .control-group {
            margin-bottom: 20px;
        }
        .control-group label {
            display: block;
            margin-bottom: 8px;
            color: #aa88ff;
            font-size: 0.9rem;
        }
        .control-group input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #1a1025;
            outline: none;
            -webkit-appearance: none;
        }
        .control-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: linear-gradient(135deg, #8866ff, #6644cc);
            cursor: pointer;
        }
        .value-display {
            text-align: right;
            font-size: 0.85rem;
            color: #aaa;
            margin-top: 5px;
        }
        .info-panel {
            background: rgba(100, 50, 150, 0.15);
            border: 1px solid rgba(150, 100, 200, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }
        .info-panel h3 {
            color: #aa88ff;
            font-size: 0.95rem;
            margin-bottom: 12px;
            border-bottom: 1px solid rgba(150, 100, 200, 0.2);
            padding-bottom: 8px;
        }
        .info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.85rem;
        }
        .info-label { color: #9988aa; }
        .info-value {
            color: #fff;
            font-family: 'Consolas', monospace;
        }
        .info-value.force { color: #ff88aa; }
        .force-display {
            text-align: center;
            padding: 15px;
            background: rgba(100, 50, 150, 0.2);
            border-radius: 10px;
            margin-bottom: 15px;
        }
        .force-display .force {
            font-size: 1.8rem;
            font-weight: bold;
            color: #ff88cc;
            text-shadow: 0 0 15px rgba(255, 100, 150, 0.5);
        }
        .force-display .label {
            font-size: 0.8rem;
            color: #9988aa;
            margin-top: 5px;
        }
        .mode-indicator {
            text-align: center;
            padding: 10px;
            background: rgba(50, 100, 150, 0.2);
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 0.9rem;
        }
        .mode-indicator .inside { color: #ff8888; }
        .mode-indicator .outside { color: #88ff88; }
        button {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            background: linear-gradient(135deg, #6644cc, #4422aa);
            color: white;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 10px;
        }
        button:hover {
            background: linear-gradient(135deg, #8866ee, #6644cc);
            transform: translateY(-2px);
        }
        button.active {
            background: linear-gradient(135deg, #aa66ff, #8844dd);
            box-shadow: 0 0 15px rgba(150, 100, 255, 0.4);
        }
        .essay {
            background: linear-gradient(145deg, #0a0510, #150820);
            border-radius: 15px;
            padding: 40px;
            line-height: 1.8;
            box-shadow: 0 10px 40px rgba(100,50,150,0.2);
        }
        .essay h2 {
            color: #aa88ff;
            margin: 30px 0 15px;
            font-size: 1.5rem;
        }
        .essay h2:first-child { margin-top: 0; }
        .essay p {
            margin-bottom: 15px;
            color: #c0b8d0;
        }
        .essay strong { color: #ddaaff; }
        .essay em { color: #ffcc88; font-style: italic; }
        .highlight-box {
            background: rgba(100, 50, 150, 0.15);
            border-left: 4px solid #aa88ff;
            padding: 20px;
            margin: 25px 0;
            border-radius: 0 10px 10px 0;
        }
        .highlight-box.paradox {
            background: rgba(150, 80, 180, 0.1);
            border-left-color: #dd88ff;
        }
        .formula {
            text-align: center;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Times New Roman', serif;
            font-size: 1.3rem;
            color: #ddaaff;
        }
        .sources {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #2a1a3a;
        }
        .sources h3 {
            color: #9988aa;
            margin-bottom: 15px;
        }
        .sources ul {
            list-style: none;
        }
        .sources li {
            margin-bottom: 10px;
        }
        .sources a {
            color: #8866bb;
            text-decoration: none;
        }
        .sources a:hover {
            color: #aa88ff;
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">← Back to Paradoxes</a>

    <header>
        <h1>Casimir Effect: A Force from Nothing</h1>
        <p class="subtitle">The quantum vacuum pushes uncharged metal plates together—emptiness isn't empty</p>
    </header>

    <div class="container">
        <div class="demo-section">
            <div class="canvas-container">
                <canvas id="canvas"></canvas>
            </div>
            <div class="controls">
                <div class="force-display">
                    <div class="force" id="forceValue">0.013 N/m²</div>
                    <div class="label">Casimir Force (per unit area)</div>
                </div>

                <div class="mode-indicator">
                    Modes: <span class="inside" id="insideModes">3</span> inside vs
                    <span class="outside" id="outsideModes">∞</span> outside
                </div>

                <div class="info-panel">
                    <h3>Physics</h3>
                    <div class="info-row">
                        <span class="info-label">Plate Separation</span>
                        <span class="info-value" id="separationValue">100 nm</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Force Scaling</span>
                        <span class="info-value">∝ 1/d⁴</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">At 10 nm</span>
                        <span class="info-value force">~1 atm!</span>
                    </div>
                </div>

                <div class="control-group">
                    <label>Plate Separation (nm)</label>
                    <input type="range" id="separation" min="10" max="500" value="100" step="5">
                    <div class="value-display" id="sepDisplay">100 nm</div>
                </div>

                <div class="control-group">
                    <label>Vacuum Fluctuation Intensity</label>
                    <input type="range" id="intensity" min="0.3" max="1.5" value="1" step="0.1">
                    <div class="value-display" id="intDisplay">1.0×</div>
                </div>

                <button id="toggleBtn" class="active">⏸ Pause</button>
                <button id="modesBtn">Show Wave Modes</button>
            </div>
        </div>

        <div class="essay">
            <h2>The Paradox: Something from Nothing</h2>
            <p>
                Take two perfectly flat, uncharged metal plates and place them very close together
                in a perfect vacuum. Classical physics says nothing should happen—there's no charge,
                no electric field, nothing at all between them. Yet <strong>the plates are pushed
                together</strong> by a measurable force.
            </p>

            <div class="highlight-box paradox">
                <strong>The Quantum Reality:</strong> "Empty" space is never truly empty. The quantum
                vacuum seethes with virtual particles and electromagnetic fluctuations, constantly
                appearing and disappearing. These fluctuations create real, measurable forces.
            </div>

            <h2>How It Works: Constrained Vacuum</h2>
            <p>
                In quantum field theory, even empty space contains <em>vacuum fluctuations</em>—
                electromagnetic waves of all possible wavelengths that briefly flicker in and out
                of existence. Outside the plates, waves of any wavelength can exist. But between
                the plates, only certain wavelengths fit—those that form standing waves between
                the conducting surfaces.
            </p>
            <p>
                This is analogous to standing waves on a guitar string: only wavelengths that fit
                an integer number of half-wavelengths can exist. For Casimir plates, this means
                <strong>fewer vacuum modes inside than outside</strong>. The higher mode density
                outside creates a net inward pressure—the vacuum literally pushes the plates together.
            </p>

            <div class="formula">
                F/A = −(π²ℏc) / (240d⁴)
            </div>
            <p style="text-align: center; color: #7766aa; font-size: 0.9rem;">
                Force per unit area scales as the fourth power of distance—incredibly sensitive to separation
            </p>

            <h2>The Numbers: Surprisingly Strong</h2>
            <p>
                At first glance, the Casimir force seems negligible. For plates 100 nanometers apart,
                the pressure is only about 0.01 N/m². But move them to <strong>10 nanometers</strong>
                separation—only 100 atoms across—and the force jumps to roughly <em>one atmosphere</em>
                of pressure. The 1/d⁴ scaling makes the effect explosively strong at nanoscale distances.
            </p>
            <p>
                This force becomes the dominant interaction between uncharged surfaces at submicron
                scales, causing real engineering challenges in micro- and nano-electromechanical systems
                (MEMS/NEMS), where it can cause parts to stick together permanently.
            </p>

            <div class="highlight-box">
                <strong>Discovery:</strong> Dutch physicist Hendrik Casimir predicted this effect in 1948.
                He calculated that the vacuum fluctuation energy between and outside the plates differs,
                and this energy difference manifests as force. The prediction waited nearly 50 years
                for experimental confirmation—Steve Lamoreaux measured it in 1996, agreeing with theory
                to within 5%.
            </div>

            <h2>Repulsive Casimir Effect</h2>
            <p>
                In 1956, Soviet physicist Yevgeny Lifshitz showed that the Casimir effect can be
                <strong>repulsive</strong> with the right combination of materials. By carefully
                choosing dielectric properties, the vacuum can push plates apart instead of together.
            </p>
            <p>
                This was demonstrated experimentally in 2008 by Jeremy Munday and Federico Capasso,
                who achieved repulsion between a gold sphere and silica plate immersed in bromobenzene.
                This opens possibilities for "quantum levitation" in nanotechnology—frictionless
                bearings floating on the quantum vacuum.
            </p>

            <h2>Interpretational Controversy</h2>
            <p>
                The Casimir effect is often cited as proof that vacuum energy is "real." However,
                theoretical physicists debate this interpretation. Robert Jaffe and others have
                shown the effect can be calculated without reference to zero-point energy at all,
                instead viewing it as a relativistic quantum force between charges and currents
                in the conducting plates.
            </p>
            <p>
                This matters for cosmology: if vacuum energy contributes to the cosmological constant
                as naively expected, the predicted energy density exceeds observations by 10¹²⁰—the
                infamous "<em>vacuum catastrophe</em>." The Casimir effect's true origin remains
                philosophically contentious.
            </p>

            <h2>Applications and Implications</h2>
            <p>
                <strong>MEMS stiction:</strong> In microelectromechanical systems, the Casimir force
                can permanently weld components together—a major engineering challenge.
            </p>
            <p>
                <strong>Nanotechnology:</strong> Understanding and controlling quantum vacuum forces
                is essential for atomic-scale manufacturing and manipulation.
            </p>
            <p>
                <strong>Fundamental physics:</strong> The effect probes the quantum nature of the
                vacuum itself and connects to deep questions about the cosmological constant, dark
                energy, and the structure of spacetime.
            </p>

            <div class="sources">
                <h3>Sources & Further Reading</h3>
                <ul>
                    <li><a href="https://en.wikipedia.org/wiki/Casimir_effect">Wikipedia: Casimir Effect</a></li>
                    <li><a href="https://physicsworld.com/a/the-casimir-effect-a-force-from-nothing/">Physics World: A Force from Nothing</a></li>
                    <li><a href="https://www.britannica.com/science/Casimir-effect">Britannica: Casimir Effect</a></li>
                    <li><a href="https://physicstoday.aip.org/features/science-and-technology-of-the-casimir-effect">Physics Today: Science and Technology of the Casimir Effect</a></li>
                    <li><a href="https://math.ucr.edu/home/baez/physics/Quantum/casimir.html">UCR Physics: The Casimir Effect</a></li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        // High DPI setup
        const dpr = window.devicePixelRatio || 1;
        const rect = canvas.getBoundingClientRect();
        canvas.width = rect.width * dpr;
        canvas.height = rect.width * 0.75 * dpr;
        canvas.style.height = rect.width * 0.75 + 'px';
        ctx.scale(dpr, dpr);

        const width = rect.width;
        const height = rect.width * 0.75;

        // State
        let time = 0;
        let running = true;
        let showModes = false;
        let separation = 100; // nm
        let intensity = 1.0;

        // Virtual particles for visualization
        let particles = [];
        const maxParticles = 200;

        // Controls
        const separationSlider = document.getElementById('separation');
        const intensitySlider = document.getElementById('intensity');
        const toggleBtn = document.getElementById('toggleBtn');
        const modesBtn = document.getElementById('modesBtn');

        separationSlider.addEventListener('input', e => {
            separation = parseFloat(e.target.value);
            document.getElementById('sepDisplay').textContent = separation + ' nm';
            updatePhysics();
        });

        intensitySlider.addEventListener('input', e => {
            intensity = parseFloat(e.target.value);
            document.getElementById('intDisplay').textContent = intensity.toFixed(1) + '×';
        });

        toggleBtn.addEventListener('click', () => {
            running = !running;
            toggleBtn.textContent = running ? '⏸ Pause' : '▶ Play';
            toggleBtn.classList.toggle('active', running);
        });

        modesBtn.addEventListener('click', () => {
            showModes = !showModes;
            modesBtn.classList.toggle('active', showModes);
        });

        function updatePhysics() {
            document.getElementById('separationValue').textContent = separation + ' nm';

            // Casimir force formula: F/A = -π²ℏc/(240d⁴)
            // At 100nm, force ≈ 0.013 N/m²
            const d_100 = 100; // reference at 100nm
            const F_100 = 0.013; // N/m² at 100nm
            const force = F_100 * Math.pow(d_100 / separation, 4);

            let forceStr;
            if (force >= 100000) {
                forceStr = (force / 1000).toFixed(0) + ' kN/m²';
            } else if (force >= 1) {
                forceStr = force.toFixed(1) + ' N/m²';
            } else {
                forceStr = force.toFixed(3) + ' N/m²';
            }
            document.getElementById('forceValue').textContent = forceStr;

            // Calculate modes that fit
            const minWavelength = 20; // nm (arbitrary visual minimum)
            const modesInside = Math.max(1, Math.floor(separation / minWavelength));
            document.getElementById('insideModes').textContent = modesInside;
        }

        class VirtualParticle {
            constructor(region) {
                this.region = region; // 'inside', 'left', or 'right'
                this.reset();
            }

            reset() {
                const plateWidth = 20;
                const plateLeft = width * 0.3;
                const plateRight = width * 0.7;
                const gap = (separation / 500) * (plateRight - plateLeft - 2 * plateWidth);
                const gapCenter = width / 2;
                const gapLeft = gapCenter - gap / 2;
                const gapRight = gapCenter + gap / 2;

                if (this.region === 'inside') {
                    this.x = gapLeft + Math.random() * gap;
                    this.y = height * 0.2 + Math.random() * height * 0.6;
                    this.wavelength = 10 + Math.random() * 30; // shorter wavelengths inside
                } else if (this.region === 'left') {
                    this.x = 20 + Math.random() * (gapLeft - 40);
                    this.y = height * 0.15 + Math.random() * height * 0.7;
                    this.wavelength = 10 + Math.random() * 50;
                } else {
                    this.x = gapRight + 20 + Math.random() * (width - gapRight - 40);
                    this.y = height * 0.15 + Math.random() * height * 0.7;
                    this.wavelength = 10 + Math.random() * 50;
                }

                this.vx = (Math.random() - 0.5) * 2;
                this.vy = (Math.random() - 0.5) * 2;
                this.life = Math.random() * 100 + 50;
                this.maxLife = this.life;
                this.size = 2 + Math.random() * 3;
            }

            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.life--;

                if (this.life <= 0) {
                    this.reset();
                }
            }

            draw(ctx) {
                const alpha = Math.min(1, this.life / 30) * intensity * 0.7;
                const hue = this.region === 'inside' ? 280 : 260;
                const sat = this.region === 'inside' ? 60 : 80;

                // Particle with wave-like appearance
                ctx.save();
                ctx.translate(this.x, this.y);

                // Glow
                const gradient = ctx.createRadialGradient(0, 0, 0, 0, 0, this.size * 3);
                gradient.addColorStop(0, `hsla(${hue}, ${sat}%, 70%, ${alpha})`);
                gradient.addColorStop(0.5, `hsla(${hue}, ${sat}%, 50%, ${alpha * 0.5})`);
                gradient.addColorStop(1, `hsla(${hue}, ${sat}%, 30%, 0)`);

                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(0, 0, this.size * 3, 0, Math.PI * 2);
                ctx.fill();

                // Core
                ctx.fillStyle = `hsla(${hue}, 50%, 90%, ${alpha})`;
                ctx.beginPath();
                ctx.arc(0, 0, this.size, 0, Math.PI * 2);
                ctx.fill();

                ctx.restore();
            }
        }

        // Initialize particles
        function initParticles() {
            particles = [];
            for (let i = 0; i < maxParticles * 0.3; i++) {
                particles.push(new VirtualParticle('inside'));
            }
            for (let i = 0; i < maxParticles * 0.35; i++) {
                particles.push(new VirtualParticle('left'));
            }
            for (let i = 0; i < maxParticles * 0.35; i++) {
                particles.push(new VirtualParticle('right'));
            }
        }

        function drawPlates() {
            const plateWidth = 15;
            const plateHeight = height * 0.7;
            const plateY = (height - plateHeight) / 2;

            const gap = (separation / 500) * (width * 0.4);
            const plateLeft = width / 2 - gap / 2 - plateWidth;
            const plateRight = width / 2 + gap / 2;

            // Left plate
            const leftGrad = ctx.createLinearGradient(plateLeft, 0, plateLeft + plateWidth, 0);
            leftGrad.addColorStop(0, '#3a3a4a');
            leftGrad.addColorStop(0.5, '#5a5a6a');
            leftGrad.addColorStop(1, '#4a4a5a');
            ctx.fillStyle = leftGrad;
            ctx.fillRect(plateLeft, plateY, plateWidth, plateHeight);

            // Right plate
            const rightGrad = ctx.createLinearGradient(plateRight, 0, plateRight + plateWidth, 0);
            rightGrad.addColorStop(0, '#4a4a5a');
            rightGrad.addColorStop(0.5, '#5a5a6a');
            rightGrad.addColorStop(1, '#3a3a4a');
            ctx.fillStyle = rightGrad;
            ctx.fillRect(plateRight, plateY, plateWidth, plateHeight);

            // Force arrows
            const arrowY = height / 2;
            const arrowLength = 20 + (500 - separation) / 20;

            ctx.strokeStyle = '#ff88aa';
            ctx.lineWidth = 3;
            ctx.fillStyle = '#ff88aa';

            // Arrow pointing right (toward center) from left
            ctx.beginPath();
            ctx.moveTo(plateLeft - arrowLength - 10, arrowY);
            ctx.lineTo(plateLeft - 10, arrowY);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(plateLeft - 10, arrowY);
            ctx.lineTo(plateLeft - 20, arrowY - 8);
            ctx.lineTo(plateLeft - 20, arrowY + 8);
            ctx.closePath();
            ctx.fill();

            // Arrow pointing left (toward center) from right
            ctx.beginPath();
            ctx.moveTo(plateRight + plateWidth + arrowLength + 10, arrowY);
            ctx.lineTo(plateRight + plateWidth + 10, arrowY);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(plateRight + plateWidth + 10, arrowY);
            ctx.lineTo(plateRight + plateWidth + 20, arrowY - 8);
            ctx.lineTo(plateRight + plateWidth + 20, arrowY + 8);
            ctx.closePath();
            ctx.fill();

            // Labels
            ctx.fillStyle = '#888';
            ctx.font = '12px Segoe UI';
            ctx.textAlign = 'center';
            ctx.fillText('Conducting', plateLeft + plateWidth / 2, plateY - 10);
            ctx.fillText('Plates', plateLeft + plateWidth / 2, plateY - 25);
            ctx.fillText('d = ' + separation + ' nm', width / 2, plateY + plateHeight + 25);

            return { plateLeft, plateRight: plateRight + plateWidth, plateY, plateHeight, gap };
        }

        function drawStandingWaves(plates) {
            if (!showModes) return;

            const { plateLeft, plateRight, plateY, plateHeight, gap } = plates;
            const gapLeft = plateLeft + 15;
            const gapRight = plateRight - 15;
            const gapWidth = gapRight - gapLeft;

            // Draw standing wave modes that fit between plates
            const numModes = Math.min(5, Math.floor(separation / 30));

            for (let n = 1; n <= numModes; n++) {
                const wavelength = (2 * gapWidth) / n;
                const amplitude = 30 / n;

                ctx.strokeStyle = `hsla(${200 + n * 30}, 70%, 60%, 0.6)`;
                ctx.lineWidth = 2;
                ctx.beginPath();

                for (let x = gapLeft; x <= gapRight; x++) {
                    const relX = (x - gapLeft) / gapWidth;
                    const y = plateY + plateHeight / 2 +
                             amplitude * Math.sin(n * Math.PI * relX) *
                             Math.sin(time * 0.05 + n);

                    if (x === gapLeft) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                }
                ctx.stroke();
            }

            // Label
            ctx.fillStyle = '#6699aa';
            ctx.font = '11px Segoe UI';
            ctx.textAlign = 'center';
            ctx.fillText('Standing wave modes (n=1 to ' + numModes + ')', width / 2, plateY + plateHeight / 2 + 50);
        }

        function drawVacuumFluctuations() {
            // Background gradient showing mode density difference
            const gap = (separation / 500) * (width * 0.4);
            const gapLeft = width / 2 - gap / 2;
            const gapRight = width / 2 + gap / 2;

            // Outside regions: more modes (brighter)
            const outsideAlpha = 0.08 * intensity;
            ctx.fillStyle = `rgba(100, 80, 150, ${outsideAlpha})`;
            ctx.fillRect(0, 0, gapLeft - 15, height);
            ctx.fillRect(gapRight + 15, 0, width - gapRight - 15, height);

            // Inside region: fewer modes (darker)
            const insideAlpha = 0.03 * intensity;
            ctx.fillStyle = `rgba(50, 40, 80, ${insideAlpha})`;
            ctx.fillRect(gapLeft, 0, gap, height);

            // Draw particles
            particles.forEach(p => {
                p.update();
                p.draw(ctx);
            });
        }

        function drawLabels() {
            ctx.fillStyle = '#aa88cc';
            ctx.font = '13px Segoe UI';
            ctx.textAlign = 'left';
            ctx.fillText('More vacuum modes', 20, 30);
            ctx.fillText('(higher pressure)', 20, 45);

            ctx.textAlign = 'right';
            ctx.fillText('More vacuum modes', width - 20, 30);
            ctx.fillText('(higher pressure)', width - 20, 45);

            ctx.textAlign = 'center';
            ctx.fillStyle = '#ff88aa';
            ctx.fillText('Fewer modes inside', width / 2, 30);
            ctx.fillText('→ Net inward force', width / 2, 45);
        }

        function animate() {
            // Clear
            ctx.fillStyle = '#0a0510';
            ctx.fillRect(0, 0, width, height);

            // Draw vacuum fluctuations
            drawVacuumFluctuations();

            // Draw plates
            const plates = drawPlates();

            // Draw standing waves if enabled
            drawStandingWaves(plates);

            // Draw labels
            drawLabels();

            if (running) {
                time += 1;
            }

            requestAnimationFrame(animate);
        }

        // Handle resize
        window.addEventListener('resize', () => {
            const rect = canvas.getBoundingClientRect();
            canvas.width = rect.width * dpr;
            canvas.height = rect.width * 0.75 * dpr;
            canvas.style.height = rect.width * 0.75 + 'px';
            ctx.scale(dpr, dpr);
        });

        initParticles();
        updatePhysics();
        animate();
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
