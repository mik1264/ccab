<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Levinthal's Paradox - The Impossible Protein Fold</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #0a0a1a 0%, #1a1a3a 50%, #0a0a2a 100%);
            color: #e0e0e0;
            min-height: 100vh;
            overflow-x: hidden;
        }
        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #ff6b9d;
            text-decoration: none;
            font-size: 0.9rem;
            z-index: 100;
            padding: 8px 16px;
            background: rgba(255,107,157,0.1);
            border-radius: 20px;
            border: 1px solid rgba(255,107,157,0.3);
            transition: all 0.3s;
        }
        .back-link:hover {
            background: rgba(255,107,157,0.2);
            transform: translateX(-3px);
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 80px 20px 40px;
        }
        h1 {
            text-align: center;
            font-size: 2.8rem;
            background: linear-gradient(135deg, #ff6b9d, #c44569, #ff9a56);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            font-size: 1.3rem;
            color: #9090b0;
            margin-bottom: 40px;
            font-style: italic;
        }
        .nobel-badge {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            padding: 15px 25px;
            background: linear-gradient(135deg, rgba(255,215,0,0.2), rgba(255,165,0,0.2));
            border-radius: 30px;
            border: 2px solid #ffd700;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }
        .nobel-badge span {
            font-size: 1.5rem;
        }
        .nobel-badge p {
            color: #ffd700;
            font-weight: 600;
        }
        .intro-box {
            background: rgba(255,107,157,0.1);
            border-left: 4px solid #ff6b9d;
            padding: 25px;
            border-radius: 0 15px 15px 0;
            margin-bottom: 40px;
            line-height: 1.8;
        }
        .intro-box strong {
            color: #ff9a56;
        }
        .big-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #4ecdc4;
            text-align: center;
            margin: 20px 0;
            font-family: monospace;
        }
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        @media (max-width: 800px) {
            .comparison-grid { grid-template-columns: 1fr; }
        }
        .comparison-box {
            background: rgba(255,255,255,0.03);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255,107,157,0.2);
        }
        .comparison-box h3 {
            color: #ff6b9d;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        .comparison-box.bad {
            border-color: rgba(231,76,60,0.4);
        }
        .comparison-box.bad h3 {
            color: #e74c3c;
        }
        .comparison-box.good {
            border-color: rgba(46,204,113,0.4);
        }
        .comparison-box.good h3 {
            color: #2ecc71;
        }
        .funnel-section {
            background: rgba(255,255,255,0.03);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            border: 1px solid rgba(255,107,157,0.2);
        }
        .funnel-title {
            text-align: center;
            font-size: 1.5rem;
            color: #ff6b9d;
            margin-bottom: 20px;
        }
        .canvas-container {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        canvas {
            border-radius: 10px;
            background: #0d0d20;
        }
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        button {
            padding: 12px 25px;
            font-size: 1rem;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }
        .btn-primary {
            background: linear-gradient(135deg, #ff6b9d, #c44569);
            color: white;
        }
        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255,107,157,0.4);
        }
        .btn-secondary {
            background: rgba(78,205,196,0.2);
            color: #4ecdc4;
            border: 2px solid #4ecdc4;
        }
        .btn-random {
            background: rgba(231,76,60,0.2);
            color: #e74c3c;
            border: 2px solid #e74c3c;
        }
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .stat-box {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        .stat-label {
            font-size: 0.85rem;
            color: #9090b0;
            margin-bottom: 5px;
        }
        .stat-value {
            font-size: 1.4rem;
            font-weight: bold;
            color: #4ecdc4;
        }
        .stat-value.random { color: #e74c3c; }
        .stat-value.guided { color: #2ecc71; }
        .explanation-section {
            background: rgba(255,255,255,0.03);
            border-radius: 20px;
            padding: 35px;
            margin-bottom: 40px;
            border: 1px solid rgba(255,107,157,0.2);
        }
        .explanation-section h2 {
            color: #ff6b9d;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }
        .explanation-section h3 {
            color: #ff9a56;
            margin: 25px 0 15px;
            font-size: 1.3rem;
        }
        .explanation-section p {
            line-height: 1.8;
            margin-bottom: 15px;
            color: #c0c0d0;
        }
        .key-insight {
            background: linear-gradient(135deg, rgba(255,107,157,0.15), rgba(196,69,105,0.15));
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
            border-left: 4px solid #ff6b9d;
        }
        .key-insight h4 {
            color: #ff6b9d;
            margin-bottom: 10px;
        }
        .math-box {
            background: rgba(0,0,0,0.4);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-family: 'Times New Roman', serif;
            font-size: 1.2rem;
            margin: 20px 0;
            color: #4ecdc4;
        }
        .timeline {
            position: relative;
            padding-left: 30px;
            margin: 20px 0;
        }
        .timeline::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(to bottom, #e74c3c, #2ecc71);
        }
        .timeline-item {
            position: relative;
            margin-bottom: 20px;
            padding-left: 20px;
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -26px;
            top: 5px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ff6b9d;
        }
        .timeline-item strong {
            color: #ff9a56;
        }
        .amino-chain {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            justify-content: center;
            margin: 20px 0;
        }
        .amino {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: bold;
            color: white;
        }
        .amino.h { background: #e74c3c; }
        .amino.p { background: #3498db; }
        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 15px 0;
            font-size: 0.9rem;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .legend-dot {
            width: 15px;
            height: 15px;
            border-radius: 50%;
        }
        .alphafold-box {
            background: linear-gradient(135deg, rgba(66,133,244,0.2), rgba(52,168,83,0.2));
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
            border: 1px solid rgba(66,133,244,0.4);
        }
        .alphafold-box h4 {
            color: #4285f4;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back to Paradoxes</a>

    <div class="container">
        <h1>Levinthal's Paradox</h1>
        <p class="subtitle">How proteins fold in milliseconds despite astronomical impossibility</p>

        <div class="nobel-badge">
            <span>üèÜ</span>
            <p>Connected to the 2024 Nobel Prize in Chemistry</p>
        </div>

        <div class="intro-box">
            <p>In 1969, molecular biologist <strong>Cyrus Levinthal</strong> posed a devastating question: A protein with just 100 amino acids can assume <strong>10<sup>47</sup> different shapes</strong>. Testing each at nanosecond speed would take <strong>10<sup>27</sup> years</strong> ‚Äî longer than the age of the universe.</p>
            <p>Yet real proteins fold correctly in <strong>milliseconds</strong>. How?</p>
        </div>

        <div class="big-number">
            10<sup>47</sup> possible conformations<br>
            <span style="font-size: 1rem; color: #9090b0;">vs. milliseconds to fold correctly</span>
        </div>

        <div class="comparison-grid">
            <div class="comparison-box bad">
                <h3>‚ùå Random Search</h3>
                <p>If proteins tried each conformation randomly:</p>
                <ul style="margin-left: 20px; line-height: 2;">
                    <li>100 amino acids = 10<sup>47</sup> shapes</li>
                    <li>Testing 1 trillion/second</li>
                    <li>Time needed: <strong>10<sup>27</sup> years</strong></li>
                    <li>Universe age: 1.4 √ó 10<sup>10</sup> years</li>
                </ul>
                <p style="color: #e74c3c; margin-top: 15px; font-weight: bold;">That's 10<sup>17</sup> times longer than the universe has existed!</p>
            </div>
            <div class="comparison-box good">
                <h3>‚úì What Actually Happens</h3>
                <p>Real proteins fold via the energy funnel:</p>
                <ul style="margin-left: 20px; line-height: 2;">
                    <li>Local structures form first</li>
                    <li>Energy guides the search</li>
                    <li>Wrong paths are energetically costly</li>
                    <li>Native state = energy minimum</li>
                </ul>
                <p style="color: #2ecc71; margin-top: 15px; font-weight: bold;">Result: Correct fold in milliseconds to seconds!</p>
            </div>
        </div>

        <div class="funnel-section">
            <h3 class="funnel-title">The Energy Funnel: Watch Proteins Fold</h3>

            <div class="canvas-container">
                <canvas id="funnelCanvas" width="700" height="450"></canvas>
            </div>

            <div class="stats-grid">
                <div class="stat-box">
                    <div class="stat-label">Mode</div>
                    <div class="stat-value" id="modeDisplay">Ready</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Steps Taken</div>
                    <div class="stat-value" id="stepsDisplay">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Energy Level</div>
                    <div class="stat-value" id="energyDisplay">100%</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Progress</div>
                    <div class="stat-value" id="progressDisplay">0%</div>
                </div>
            </div>

            <div class="controls">
                <button class="btn-primary" id="guidedBtn">Guided Folding (Real)</button>
                <button class="btn-random" id="randomBtn">Random Search</button>
                <button class="btn-secondary" id="resetBtn">Reset</button>
            </div>

            <div class="legend">
                <div class="legend-item">
                    <div class="legend-dot" style="background: #2ecc71;"></div>
                    <span>Guided path (milliseconds)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-dot" style="background: #e74c3c;"></div>
                    <span>Random search (forever)</span>
                </div>
            </div>
        </div>

        <div class="explanation-section">
            <h2>The Solution: Energy Landscape Theory</h2>

            <div class="key-insight">
                <h4>The Funnel Hypothesis</h4>
                <p>Protein folding isn't a random search through a flat landscape ‚Äî it's a <strong>guided descent through a funnel</strong>. The funnel's walls are made of energy: wrong conformations are energetically unfavorable, naturally pushing the protein toward the correct native state at the bottom.</p>
            </div>

            <h3>Why the Funnel Works</h3>
            <div class="timeline">
                <div class="timeline-item">
                    <strong>High Entropy Start:</strong> Unfolded protein has high energy and many possible states (wide funnel top)
                </div>
                <div class="timeline-item">
                    <strong>Local Structure Forms:</strong> Small regions fold first, reducing possibilities
                </div>
                <div class="timeline-item">
                    <strong>Energy Bias:</strong> Correct contacts lower energy; wrong ones cost energy
                </div>
                <div class="timeline-item">
                    <strong>Narrowing Path:</strong> Each correct fold reduces remaining options exponentially
                </div>
                <div class="timeline-item">
                    <strong>Native State:</strong> Global energy minimum ‚Äî the only stable endpoint
                </div>
            </div>

            <h3>The Mathematics</h3>
            <div class="math-box">
                Random search time: T = N √ó œÑ where N = 10<sup>47</sup> states, œÑ = 10<sup>-13</sup>s<br>
                T ‚âà 10<sup>34</sup> seconds ‚âà 10<sup>27</sup> years
            </div>

            <div class="math-box">
                Funnel-guided folding: T ‚âà 10<sup>-3</sup> to 10<sup>0</sup> seconds<br>
                <strong>Speedup factor: 10<sup>30</sup> to 10<sup>34</sup> times faster!</strong>
            </div>

            <h3>A Simple Protein Model</h3>
            <p>Consider a 20-amino acid chain with hydrophobic (H) and polar (P) residues:</p>

            <div class="amino-chain" id="aminoChain"></div>

            <div class="legend">
                <div class="legend-item">
                    <div class="legend-dot" style="background: #e74c3c;"></div>
                    <span>Hydrophobic (H) - wants to hide inside</span>
                </div>
                <div class="legend-item">
                    <div class="legend-dot" style="background: #3498db;"></div>
                    <span>Polar (P) - happy on surface</span>
                </div>
            </div>

            <p>The chain naturally folds to hide hydrophobic residues in the core ‚Äî this <strong>hydrophobic collapse</strong> is the main driving force, creating a natural energy funnel!</p>
        </div>

        <div class="explanation-section">
            <h2>The 2024 Nobel Prize: AlphaFold</h2>

            <div class="alphafold-box">
                <h4>DeepMind's AlphaFold Solves the Prediction Problem</h4>
                <p><strong>Demis Hassabis</strong> and <strong>John Jumper</strong> created AlphaFold, an AI that predicts protein structures with near-experimental accuracy.</p>
                <p><strong>David Baker</strong> used similar principles to <em>design</em> entirely new proteins that don't exist in nature.</p>
                <p style="margin-top: 15px;">By October 2024, AlphaFold had been used by <strong>2+ million researchers</strong> in 190 countries. What once took years now takes <strong>minutes</strong>.</p>
            </div>

            <p>Levinthal's paradox was cited on the first page of the Nobel Prize scientific background ‚Äî it perfectly illustrates the scale of the problem that computational methods have now cracked.</p>

            <div class="key-insight">
                <h4>From Paradox to Nobel Prize</h4>
                <p><strong>1969:</strong> Levinthal poses the paradox ‚Äî random folding is impossible</p>
                <p><strong>1990s:</strong> Energy landscape theory explains how nature solves it</p>
                <p><strong>2020:</strong> AlphaFold achieves human-level accuracy in structure prediction</p>
                <p><strong>2024:</strong> Nobel Prize awarded for computational protein science</p>
            </div>

            <h3>Why This Matters</h3>
            <p>Understanding protein folding enables:</p>
            <ul style="margin-left: 30px; line-height: 2;">
                <li><strong>Drug design:</strong> Target proteins with precise molecular fits</li>
                <li><strong>Disease treatment:</strong> Misfolded proteins cause Alzheimer's, Parkinson's</li>
                <li><strong>Synthetic biology:</strong> Design proteins for new functions</li>
                <li><strong>Materials science:</strong> Create novel protein-based materials</li>
            </ul>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('funnelCanvas');
        const ctx = canvas.getContext('2d');

        // State
        let mode = 'ready';
        let particles = [];
        let steps = 0;
        let animationId = null;

        // Funnel parameters
        const funnelTop = 60;
        const funnelBottom = 400;
        const funnelTopWidth = 600;
        const funnelBottomWidth = 40;
        const centerX = canvas.width / 2;

        // Particle class
        class Particle {
            constructor(isGuided) {
                this.isGuided = isGuided;
                this.reset();
            }

            reset() {
                this.y = funnelTop + 20;
                this.x = centerX + (Math.random() - 0.5) * this.getWidth();
                this.vy = 0;
                this.vx = 0;
                this.trail = [];
                this.energy = 100;
                this.finished = false;
            }

            getWidth() {
                const progress = (this.y - funnelTop) / (funnelBottom - funnelTop);
                return funnelTopWidth - progress * (funnelTopWidth - funnelBottomWidth);
            }

            getWallX() {
                const width = this.getWidth();
                return { left: centerX - width/2, right: centerX + width/2 };
            }

            update() {
                if (this.finished) return;

                // Store trail
                if (this.trail.length > 100) this.trail.shift();
                this.trail.push({ x: this.x, y: this.y });

                if (this.isGuided) {
                    // Guided folding: smooth descent with energy-guided path
                    this.vy += 0.15;

                    // Attracted to center (energy minimum)
                    const centerPull = (centerX - this.x) * 0.02;
                    this.vx += centerPull;

                    // Small random perturbation
                    this.vx += (Math.random() - 0.5) * 0.5;

                    // Damping
                    this.vx *= 0.95;
                    this.vy *= 0.98;
                } else {
                    // Random search: chaotic movement
                    this.vx += (Math.random() - 0.5) * 4;
                    this.vy += (Math.random() - 0.5) * 4 + 0.05;

                    this.vx *= 0.9;
                    this.vy *= 0.9;
                }

                this.x += this.vx;
                this.y += this.vy;

                // Wall collision
                const walls = this.getWallX();
                if (this.x < walls.left) {
                    this.x = walls.left;
                    this.vx = Math.abs(this.vx) * 0.5;
                }
                if (this.x > walls.right) {
                    this.x = walls.right;
                    this.vx = -Math.abs(this.vx) * 0.5;
                }

                // Keep in funnel vertically
                if (this.y < funnelTop) {
                    this.y = funnelTop;
                    this.vy = Math.abs(this.vy);
                }

                // Check if reached bottom
                if (this.y >= funnelBottom - 10) {
                    this.y = funnelBottom - 10;
                    this.finished = true;
                }

                // Update energy
                const progress = (this.y - funnelTop) / (funnelBottom - funnelTop);
                this.energy = 100 - progress * 100;
            }

            draw(ctx) {
                // Draw trail
                if (this.trail.length > 1) {
                    ctx.beginPath();
                    ctx.moveTo(this.trail[0].x, this.trail[0].y);
                    for (let i = 1; i < this.trail.length; i++) {
                        ctx.lineTo(this.trail[i].x, this.trail[i].y);
                    }
                    ctx.strokeStyle = this.isGuided
                        ? 'rgba(46,204,113,0.4)'
                        : 'rgba(231,76,60,0.3)';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                }

                // Draw particle
                ctx.beginPath();
                ctx.arc(this.x, this.y, 8, 0, Math.PI * 2);
                ctx.fillStyle = this.isGuided ? '#2ecc71' : '#e74c3c';
                ctx.fill();
                ctx.strokeStyle = 'white';
                ctx.lineWidth = 2;
                ctx.stroke();
            }
        }

        function drawFunnel() {
            // Gradient background for funnel
            const gradient = ctx.createLinearGradient(0, funnelTop, 0, funnelBottom);
            gradient.addColorStop(0, 'rgba(255,107,157,0.1)');
            gradient.addColorStop(0.5, 'rgba(155,89,182,0.15)');
            gradient.addColorStop(1, 'rgba(78,205,196,0.2)');

            ctx.beginPath();
            ctx.moveTo(centerX - funnelTopWidth/2, funnelTop);
            ctx.lineTo(centerX + funnelTopWidth/2, funnelTop);
            ctx.lineTo(centerX + funnelBottomWidth/2, funnelBottom);
            ctx.lineTo(centerX - funnelBottomWidth/2, funnelBottom);
            ctx.closePath();
            ctx.fillStyle = gradient;
            ctx.fill();

            // Funnel outline
            ctx.strokeStyle = 'rgba(255,107,157,0.5)';
            ctx.lineWidth = 2;
            ctx.stroke();

            // Energy level markers
            ctx.fillStyle = 'rgba(255,255,255,0.5)';
            ctx.font = '12px sans-serif';
            ctx.textAlign = 'right';

            for (let i = 0; i <= 4; i++) {
                const y = funnelTop + (funnelBottom - funnelTop) * i / 4;
                const energy = 100 - i * 25;
                ctx.fillText(`${energy}%`, centerX - funnelTopWidth/2 - 10, y + 4);

                // Horizontal guide line
                ctx.strokeStyle = 'rgba(255,255,255,0.1)';
                ctx.lineWidth = 1;
                ctx.beginPath();
                const width = funnelTopWidth - (funnelTopWidth - funnelBottomWidth) * i / 4;
                ctx.moveTo(centerX - width/2, y);
                ctx.lineTo(centerX + width/2, y);
                ctx.stroke();
            }

            // Labels
            ctx.fillStyle = '#ff6b9d';
            ctx.font = 'bold 14px sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('HIGH ENERGY', centerX, funnelTop - 10);
            ctx.fillText('(Many conformations)', centerX, funnelTop + 10);

            ctx.fillStyle = '#4ecdc4';
            ctx.fillText('NATIVE STATE', centerX, funnelBottom + 30);
            ctx.fillText('(Minimum energy)', centerX, funnelBottom + 50);

            // Arrow
            ctx.fillStyle = 'rgba(255,255,255,0.3)';
            ctx.font = '24px sans-serif';
            ctx.fillText('‚Üì', centerX - funnelTopWidth/2 - 30, (funnelTop + funnelBottom) / 2);
            ctx.font = '12px sans-serif';
            ctx.fillText('Free', centerX - funnelTopWidth/2 - 30, (funnelTop + funnelBottom) / 2 - 25);
            ctx.fillText('Energy', centerX - funnelTopWidth/2 - 30, (funnelTop + funnelBottom) / 2 + 25);
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawFunnel();
            particles.forEach(p => p.draw(ctx));
        }

        function animate() {
            steps++;
            particles.forEach(p => p.update());

            // Update displays
            const activeParticle = particles[0];
            if (activeParticle) {
                document.getElementById('stepsDisplay').textContent = steps;
                document.getElementById('energyDisplay').textContent = activeParticle.energy.toFixed(1) + '%';
                const progress = ((funnelBottom - funnelTop - 30) - (activeParticle.y - funnelTop)) / (funnelBottom - funnelTop - 30);
                document.getElementById('progressDisplay').textContent = Math.max(0, (1 - progress) * 100).toFixed(1) + '%';
            }

            draw();

            // Check if finished
            if (particles.length > 0 && particles[0].finished) {
                mode = 'finished';
                document.getElementById('modeDisplay').textContent = 'Folded!';
                document.getElementById('modeDisplay').style.color = '#2ecc71';
                return;
            }

            // Random search: give up after too many steps
            if (!particles[0]?.isGuided && steps > 2000) {
                mode = 'timeout';
                document.getElementById('modeDisplay').textContent = 'Still searching...';
                document.getElementById('modeDisplay').style.color = '#e74c3c';
                return;
            }

            animationId = requestAnimationFrame(animate);
        }

        function startGuided() {
            reset();
            mode = 'guided';
            document.getElementById('modeDisplay').textContent = 'Guided';
            document.getElementById('modeDisplay').style.color = '#2ecc71';
            particles = [new Particle(true)];
            animate();
        }

        function startRandom() {
            reset();
            mode = 'random';
            document.getElementById('modeDisplay').textContent = 'Random';
            document.getElementById('modeDisplay').style.color = '#e74c3c';
            particles = [new Particle(false)];
            animate();
        }

        function reset() {
            if (animationId) cancelAnimationFrame(animationId);
            mode = 'ready';
            steps = 0;
            particles = [];
            document.getElementById('modeDisplay').textContent = 'Ready';
            document.getElementById('modeDisplay').style.color = '#4ecdc4';
            document.getElementById('stepsDisplay').textContent = '0';
            document.getElementById('energyDisplay').textContent = '100%';
            document.getElementById('progressDisplay').textContent = '0%';
            draw();
        }

        // Generate amino acid chain
        function generateAminoChain() {
            const container = document.getElementById('aminoChain');
            const sequence = 'HPHPPHHPHPPHPHHPPHPH'; // HP model sequence

            sequence.split('').forEach((aa, i) => {
                const div = document.createElement('div');
                div.className = `amino ${aa.toLowerCase()}`;
                div.textContent = aa;
                div.title = aa === 'H' ? 'Hydrophobic' : 'Polar';
                container.appendChild(div);
            });
        }

        // Event listeners
        document.getElementById('guidedBtn').addEventListener('click', startGuided);
        document.getElementById('randomBtn').addEventListener('click', startRandom);
        document.getElementById('resetBtn').addEventListener('click', reset);

        // Initialize
        generateAminoChain();
        draw();
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
