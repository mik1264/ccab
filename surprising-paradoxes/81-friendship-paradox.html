<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Friendship Paradox - Your Friends Are More Popular</title>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --social-blue: #3b5998;
            --friend-green: #42b883;
            --popular-gold: #f1c40f;
            --connection-gray: #95a5a6;
            --you-red: #e74c3c;
            --cream: #FEFAE0;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #ecf0f1;
            overflow-x: hidden;
        }

        /* Network background */
        .network-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 20% 30%, rgba(59, 89, 152, 0.1) 0%, transparent 30%),
                radial-gradient(circle at 80% 70%, rgba(66, 184, 131, 0.1) 0%, transparent 30%);
            z-index: 0;
        }

        .organic-back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 100;
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 18px;
            background: rgba(59, 89, 152, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(59, 89, 152, 0.3);
            border-radius: 30px;
            color: var(--social-blue);
            text-decoration: none;
            font-family: 'Nunito', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .organic-back-link:hover {
            background: rgba(59, 89, 152, 0.4);
            transform: translateX(-3px);
        }

        .container {
            position: relative;
            z-index: 10;
            max-width: 1200px;
            margin: 0 auto;
            padding: 80px 20px 40px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-family: 'Lora', serif;
            font-size: 2.8rem;
            background: linear-gradient(135deg, var(--social-blue), var(--friend-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .header .subtitle {
            font-size: 1.2rem;
            color: #bdc3c7;
        }

        .paradox-statement {
            background: linear-gradient(135deg, rgba(59, 89, 152, 0.3), rgba(66, 184, 131, 0.3));
            border: 2px solid var(--social-blue);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            text-align: center;
        }

        .paradox-statement h2 {
            font-family: 'Lora', serif;
            color: var(--popular-gold);
            margin-bottom: 15px;
            font-size: 1.8rem;
        }

        .paradox-statement p {
            font-size: 1.1rem;
            color: #ecf0f1;
            line-height: 1.6;
        }

        .main-panel {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }

        @media (max-width: 900px) {
            .main-panel {
                grid-template-columns: 1fr;
            }
        }

        .graph-panel {
            background: rgba(22, 33, 62, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(59, 89, 152, 0.3);
            border-radius: 20px;
            padding: 20px;
        }

        .graph-panel h2 {
            font-family: 'Lora', serif;
            color: var(--social-blue);
            margin-bottom: 15px;
            text-align: center;
        }

        .canvas-container {
            position: relative;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            overflow: hidden;
        }

        canvas {
            width: 100%;
            height: 450px;
            cursor: pointer;
        }

        .instructions {
            text-align: center;
            padding: 10px;
            color: #bdc3c7;
            font-size: 0.9rem;
        }

        .stats-panel {
            background: rgba(22, 33, 62, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(59, 89, 152, 0.3);
            border-radius: 20px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .stats-panel h2 {
            font-family: 'Lora', serif;
            color: var(--social-blue);
            text-align: center;
        }

        .stat-box {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
        }

        .stat-box.highlight {
            border: 2px solid var(--popular-gold);
            background: rgba(241, 196, 15, 0.1);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
        }

        .stat-value.you { color: var(--you-red); }
        .stat-value.friends { color: var(--friend-green); }
        .stat-value.gold { color: var(--popular-gold); }

        .stat-label {
            font-size: 0.85rem;
            color: #bdc3c7;
            margin-top: 5px;
        }

        .comparison {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            padding: 15px;
            background: rgba(231, 76, 60, 0.1);
            border: 1px solid var(--you-red);
            border-radius: 12px;
        }

        .comparison-arrow {
            font-size: 1.5rem;
        }

        .controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: auto;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 25px;
            font-family: 'Nunito', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--social-blue), #2d4373);
            color: white;
        }

        .btn-primary:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 20px rgba(59, 89, 152, 0.4);
        }

        .btn-secondary {
            background: rgba(59, 89, 152, 0.2);
            color: var(--social-blue);
            border: 1px solid var(--social-blue);
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-top: 15px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85rem;
        }

        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .explanation {
            background: rgba(22, 33, 62, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(59, 89, 152, 0.3);
            border-radius: 20px;
            padding: 30px;
            margin-top: 30px;
        }

        .explanation h2 {
            font-family: 'Lora', serif;
            color: var(--social-blue);
            margin-bottom: 20px;
        }

        .explanation p {
            line-height: 1.8;
            margin-bottom: 15px;
            color: #bdc3c7;
        }

        .highlight {
            color: var(--popular-gold);
            font-weight: 600;
        }

        .paradox-box {
            background: linear-gradient(135deg, rgba(241, 196, 15, 0.15), rgba(59, 89, 152, 0.15));
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border-left: 4px solid var(--popular-gold);
        }

        .paradox-box h3 {
            color: var(--popular-gold);
            margin-bottom: 10px;
        }

        .math-box {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            font-family: 'Courier New', monospace;
        }

        .formula {
            font-size: 1.3rem;
            color: var(--popular-gold);
            margin: 10px 0;
        }

        .applications {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .app-card {
            background: rgba(59, 89, 152, 0.1);
            border: 1px solid rgba(59, 89, 152, 0.3);
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .app-card:hover {
            transform: translateY(-5px);
            border-color: var(--social-blue);
        }

        .app-card h4 {
            color: var(--social-blue);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .app-card p {
            font-size: 0.9rem;
            color: #bdc3c7;
            line-height: 1.6;
        }

        .insight-box {
            background: linear-gradient(135deg, rgba(66, 184, 131, 0.2), rgba(59, 89, 152, 0.2));
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border-left: 4px solid var(--friend-green);
        }

        .insight-box h3 {
            color: var(--friend-green);
            margin-bottom: 10px;
        }

        .network-types {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .network-type {
            padding: 8px 15px;
            background: rgba(59, 89, 152, 0.2);
            border: 1px solid rgba(59, 89, 152, 0.3);
            border-radius: 20px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .network-type:hover, .network-type.active {
            background: var(--social-blue);
            color: white;
        }
    </style>
</head>
<body>
    <div class="network-bg"></div>

    <a href="index.html" class="organic-back-link">
        <span class="back-arrow">‚Üê</span>
        <span class="back-text">Gallery</span>
    </a>

    <div class="container">
        <header class="header">
            <h1>The Friendship Paradox</h1>
            <p class="subtitle">Why your friends are more popular than you</p>
        </header>

        <div class="paradox-statement">
            <h2>On average, your friends have more friends than you do.</h2>
            <p>
                This isn't just about YOU‚Äîit's true for almost EVERYONE in any social network!<br>
                How can everyone's friends be more popular? Click the network to find out.
            </p>
        </div>

        <div class="main-panel">
            <div class="graph-panel">
                <h2>Social Network</h2>
                <div class="canvas-container">
                    <canvas id="networkCanvas"></canvas>
                </div>
                <p class="instructions">Click on any person (node) to select them as "you"</p>

                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-dot" style="background: var(--you-red);"></div>
                        <span>You (selected)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot" style="background: var(--friend-green);"></div>
                        <span>Your friends</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot" style="background: var(--connection-gray);"></div>
                        <span>Others</span>
                    </div>
                </div>

                <div class="network-types">
                    <button class="network-type active" data-type="random">Random Network</button>
                    <button class="network-type" data-type="hub">Hub Network</button>
                    <button class="network-type" data-type="uniform">Uniform Network</button>
                </div>
            </div>

            <div class="stats-panel">
                <h2>Statistics</h2>

                <div class="stat-box">
                    <div class="stat-value you" id="yourFriends">‚Äî</div>
                    <div class="stat-label">Your Friend Count</div>
                </div>

                <div class="stat-box">
                    <div class="stat-value friends" id="friendsAvg">‚Äî</div>
                    <div class="stat-label">Your Friends' Average</div>
                </div>

                <div class="comparison" id="comparison" style="display: none;">
                    <span id="comparisonText">Your friends have more friends!</span>
                </div>

                <div class="stat-box highlight">
                    <div class="stat-value gold" id="paradoxRatio">‚Äî</div>
                    <div class="stat-label">Friends' Avg √∑ Your Count</div>
                </div>

                <div class="stat-box">
                    <div class="stat-value" id="networkAvg" style="color: #bdc3c7;">‚Äî</div>
                    <div class="stat-label">Network Average</div>
                </div>

                <div class="stat-box">
                    <div class="stat-value" id="paradoxPercent" style="color: var(--social-blue);">‚Äî</div>
                    <div class="stat-label">% Experiencing Paradox</div>
                </div>

                <div class="controls">
                    <button class="btn btn-primary" onclick="generateNetwork()">New Random Network</button>
                    <button class="btn btn-secondary" onclick="selectRandom()">Select Random Person</button>
                </div>
            </div>
        </div>

        <div class="explanation">
            <h2>Why Does This Happen?</h2>

            <div class="paradox-box">
                <h3>The Key Insight</h3>
                <p>
                    Popular people (those with many friends) appear in <span class="highlight">many friend lists</span>.
                    Unpopular people appear in <span class="highlight">few friend lists</span>.
                    <br><br>
                    When you calculate "your friends' average," you're sampling people weighted by their popularity.
                    Popular people are <strong>over-represented</strong> in this sample!
                </p>
            </div>

            <p>
                Imagine a simple network: Alice has 100 friends, Bob has 1 friend (Alice).
                Alice's friends average = 1 (just Bob). Bob's friends average = 100 (just Alice).
                Bob experiences the paradox dramatically; Alice slightly less so.
            </p>

            <div class="math-box">
                <p style="color: #bdc3c7;">Let Œº = average friends per person, œÉ¬≤ = variance in friend counts</p>
                <div class="formula">
                    Average friends of friends = Œº + œÉ¬≤/Œº
                </div>
                <p style="color: #bdc3c7; margin-top: 15px;">
                    This is ALWAYS ‚â• Œº, with equality only when œÉ¬≤ = 0 (everyone has the same number of friends)
                </p>
            </div>

            <p>
                The paradox is strongest in networks with <span class="highlight">high variance</span>‚Äîwhere
                some people are much more connected than others. Social networks, the internet, and many
                biological networks have this property.
            </p>

            <div class="insight-box">
                <h3>It's Not Just You</h3>
                <p>
                    In most real social networks, <strong>over 80% of people</strong> have fewer friends than
                    their friends' average! The only exceptions are the most popular individuals‚Äîand even
                    some of them experience the paradox.
                </p>
            </div>

            <h3 style="color: var(--social-blue); margin: 30px 0 20px;">Real-World Applications</h3>

            <div class="applications">
                <div class="app-card">
                    <h4>üíâ Vaccination Strategy</h4>
                    <p>
                        Instead of vaccinating random people, ask random people to name a friend‚Äîthen vaccinate
                        THAT person. This "friendship sampling" targets highly connected individuals who
                        spread disease more!
                    </p>
                </div>

                <div class="app-card">
                    <h4>ü¶† Early Disease Detection</h4>
                    <p>
                        Your friends will likely get sick before you (they're more connected). Monitoring
                        friends of random people can detect outbreaks 2 weeks earlier than random sampling!
                    </p>
                </div>

                <div class="app-card">
                    <h4>üòî Social Media & Mental Health</h4>
                    <p>
                        The paradox makes everyone feel less popular. On Instagram, your followers' average
                        is almost always higher than yours‚Äîcontributing to feelings of inadequacy.
                    </p>
                </div>

                <div class="app-card">
                    <h4>üì¢ Viral Marketing</h4>
                    <p>
                        Want to spread a message? Don't target random users‚Äîtarget friends of random users.
                        This finds influencers without needing to know the network structure!
                    </p>
                </div>
            </div>

            <div class="paradox-box" style="margin-top: 30px; border-left-color: var(--friend-green);">
                <h3 style="color: var(--friend-green);">Discovered by Scott Feld (1991)</h3>
                <p>
                    Sociologist Scott L. Feld published "Why Your Friends Have More Friends Than You Do" in the
                    American Journal of Sociology. The paper explained the mathematical basis for this universal
                    social experience, showing it's not personal‚Äîit's structural.
                </p>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('networkCanvas');
        const ctx = canvas.getContext('2d');

        let nodes = [];
        let edges = [];
        let selectedNode = null;
        let networkType = 'random';

        function resizeCanvas() {
            const dpr = window.devicePixelRatio || 1;
            const rect = canvas.parentElement.getBoundingClientRect();
            canvas.width = rect.width * dpr;
            canvas.height = 450 * dpr;
            ctx.scale(dpr, dpr);
        }

        function generateNetwork() {
            const width = canvas.width / (window.devicePixelRatio || 1);
            const height = 450;
            const numNodes = 30;

            nodes = [];
            edges = [];

            // Generate node positions
            for (let i = 0; i < numNodes; i++) {
                nodes.push({
                    id: i,
                    x: 50 + Math.random() * (width - 100),
                    y: 50 + Math.random() * (height - 100),
                    vx: 0,
                    vy: 0,
                    friends: []
                });
            }

            // Generate edges based on network type
            if (networkType === 'random') {
                // Random network with preferential attachment flavor
                for (let i = 0; i < numNodes; i++) {
                    const numConnections = Math.floor(Math.random() * 5) + 1;
                    for (let j = 0; j < numConnections; j++) {
                        const target = Math.floor(Math.random() * numNodes);
                        if (target !== i && !nodes[i].friends.includes(target)) {
                            nodes[i].friends.push(target);
                            nodes[target].friends.push(i);
                            edges.push([i, target]);
                        }
                    }
                }
            } else if (networkType === 'hub') {
                // Hub network - a few nodes have many connections
                const hubs = [0, 1, 2];
                for (const hub of hubs) {
                    for (let i = 3; i < numNodes; i++) {
                        if (Math.random() < 0.7) {
                            nodes[hub].friends.push(i);
                            nodes[i].friends.push(hub);
                            edges.push([hub, i]);
                        }
                    }
                }
                // Add some random connections
                for (let i = 3; i < numNodes; i++) {
                    if (Math.random() < 0.3) {
                        const target = Math.floor(Math.random() * numNodes);
                        if (target !== i && !nodes[i].friends.includes(target)) {
                            nodes[i].friends.push(target);
                            nodes[target].friends.push(i);
                            edges.push([i, target]);
                        }
                    }
                }
            } else if (networkType === 'uniform') {
                // Uniform network - everyone has similar number of connections
                const k = 4; // Each node connects to k nearest neighbors
                for (let i = 0; i < numNodes; i++) {
                    for (let j = 1; j <= k; j++) {
                        const target = (i + j) % numNodes;
                        if (!nodes[i].friends.includes(target)) {
                            nodes[i].friends.push(target);
                            nodes[target].friends.push(i);
                            edges.push([i, target]);
                        }
                    }
                }
            }

            selectedNode = null;
            applyForceLayout();
            updateStats();
        }

        function applyForceLayout() {
            const width = canvas.width / (window.devicePixelRatio || 1);
            const height = 450;

            // Simple force-directed layout
            for (let iter = 0; iter < 100; iter++) {
                // Repulsion between all nodes
                for (let i = 0; i < nodes.length; i++) {
                    for (let j = i + 1; j < nodes.length; j++) {
                        const dx = nodes[j].x - nodes[i].x;
                        const dy = nodes[j].y - nodes[i].y;
                        const dist = Math.sqrt(dx * dx + dy * dy) || 1;
                        const force = 500 / (dist * dist);

                        nodes[i].vx -= (dx / dist) * force;
                        nodes[i].vy -= (dy / dist) * force;
                        nodes[j].vx += (dx / dist) * force;
                        nodes[j].vy += (dy / dist) * force;
                    }
                }

                // Attraction along edges
                for (const [i, j] of edges) {
                    const dx = nodes[j].x - nodes[i].x;
                    const dy = nodes[j].y - nodes[i].y;
                    const dist = Math.sqrt(dx * dx + dy * dy) || 1;
                    const force = (dist - 80) * 0.01;

                    nodes[i].vx += (dx / dist) * force;
                    nodes[i].vy += (dy / dist) * force;
                    nodes[j].vx -= (dx / dist) * force;
                    nodes[j].vy -= (dy / dist) * force;
                }

                // Center gravity
                for (const node of nodes) {
                    node.vx += (width / 2 - node.x) * 0.001;
                    node.vy += (height / 2 - node.y) * 0.001;
                }

                // Apply velocities with damping
                for (const node of nodes) {
                    node.x += node.vx * 0.5;
                    node.y += node.vy * 0.5;
                    node.vx *= 0.9;
                    node.vy *= 0.9;

                    // Keep in bounds
                    node.x = Math.max(30, Math.min(width - 30, node.x));
                    node.y = Math.max(30, Math.min(height - 30, node.y));
                }
            }

            draw();
        }

        function draw() {
            const width = canvas.width / (window.devicePixelRatio || 1);
            const height = 450;

            ctx.clearRect(0, 0, width, height);

            // Draw edges
            ctx.strokeStyle = 'rgba(149, 165, 166, 0.3)';
            ctx.lineWidth = 1;
            for (const [i, j] of edges) {
                const isHighlighted = selectedNode !== null &&
                    (i === selectedNode || j === selectedNode);

                if (isHighlighted) {
                    ctx.strokeStyle = 'rgba(66, 184, 131, 0.8)';
                    ctx.lineWidth = 2;
                } else {
                    ctx.strokeStyle = 'rgba(149, 165, 166, 0.3)';
                    ctx.lineWidth = 1;
                }

                ctx.beginPath();
                ctx.moveTo(nodes[i].x, nodes[i].y);
                ctx.lineTo(nodes[j].x, nodes[j].y);
                ctx.stroke();
            }

            // Draw nodes
            for (let i = 0; i < nodes.length; i++) {
                const node = nodes[i];
                const friendCount = node.friends.length;
                const radius = 8 + friendCount * 1.5;

                let color = '#95a5a6';
                if (i === selectedNode) {
                    color = '#e74c3c';
                } else if (selectedNode !== null && nodes[selectedNode].friends.includes(i)) {
                    color = '#42b883';
                }

                ctx.beginPath();
                ctx.arc(node.x, node.y, radius, 0, Math.PI * 2);
                ctx.fillStyle = color;
                ctx.fill();
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.5)';
                ctx.lineWidth = 2;
                ctx.stroke();

                // Friend count label
                ctx.fillStyle = 'white';
                ctx.font = 'bold 10px Nunito';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(friendCount, node.x, node.y);
            }
        }

        function updateStats() {
            if (selectedNode === null) {
                document.getElementById('yourFriends').textContent = '‚Äî';
                document.getElementById('friendsAvg').textContent = '‚Äî';
                document.getElementById('paradoxRatio').textContent = '‚Äî';
                document.getElementById('comparison').style.display = 'none';
            } else {
                const you = nodes[selectedNode];
                const yourCount = you.friends.length;

                // Calculate friends' average
                let friendsTotal = 0;
                for (const friendId of you.friends) {
                    friendsTotal += nodes[friendId].friends.length;
                }
                const friendsAvg = yourCount > 0 ? friendsTotal / yourCount : 0;

                document.getElementById('yourFriends').textContent = yourCount;
                document.getElementById('friendsAvg').textContent = friendsAvg.toFixed(1);
                document.getElementById('paradoxRatio').textContent = yourCount > 0 ?
                    (friendsAvg / yourCount).toFixed(2) + 'x' : '‚Äî';

                const comparison = document.getElementById('comparison');
                const compText = document.getElementById('comparisonText');
                comparison.style.display = 'flex';

                if (friendsAvg > yourCount) {
                    comparison.style.borderColor = '#e74c3c';
                    comparison.style.background = 'rgba(231, 76, 60, 0.1)';
                    compText.textContent = 'üòî Your friends have more friends!';
                } else if (friendsAvg < yourCount) {
                    comparison.style.borderColor = '#42b883';
                    comparison.style.background = 'rgba(66, 184, 131, 0.1)';
                    compText.textContent = 'üéâ You\'re more popular than average!';
                } else {
                    comparison.style.borderColor = '#f39c12';
                    comparison.style.background = 'rgba(243, 156, 18, 0.1)';
                    compText.textContent = 'üòê Exactly average!';
                }
            }

            // Network stats
            const totalFriends = nodes.reduce((sum, n) => sum + n.friends.length, 0);
            const networkAvg = totalFriends / nodes.length / 2; // Divide by 2 because edges counted twice
            document.getElementById('networkAvg').textContent = (networkAvg * 2).toFixed(1);

            // Percentage experiencing paradox
            let paradoxCount = 0;
            for (const node of nodes) {
                if (node.friends.length === 0) continue;
                let friendsTotal = 0;
                for (const friendId of node.friends) {
                    friendsTotal += nodes[friendId].friends.length;
                }
                const friendsAvg = friendsTotal / node.friends.length;
                if (friendsAvg > node.friends.length) {
                    paradoxCount++;
                }
            }
            const paradoxPercent = (paradoxCount / nodes.length * 100).toFixed(0);
            document.getElementById('paradoxPercent').textContent = paradoxPercent + '%';
        }

        function selectRandom() {
            selectedNode = Math.floor(Math.random() * nodes.length);
            draw();
            updateStats();
        }

        // Event listeners
        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const dpr = window.devicePixelRatio || 1;
            const x = (e.clientX - rect.left);
            const y = (e.clientY - rect.top);

            // Find clicked node
            for (let i = 0; i < nodes.length; i++) {
                const node = nodes[i];
                const dist = Math.sqrt((node.x - x) ** 2 + (node.y - y) ** 2);
                if (dist < 20) {
                    selectedNode = i;
                    draw();
                    updateStats();
                    return;
                }
            }
        });

        document.querySelectorAll('.network-type').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.network-type').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                networkType = btn.dataset.type;
                generateNetwork();
            });
        });

        window.addEventListener('resize', () => {
            resizeCanvas();
            draw();
        });

        // Initialize
        resizeCanvas();
        generateNetwork();
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
