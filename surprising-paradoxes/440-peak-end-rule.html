<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Peak-End Rule - Surprising Paradoxes #437</title>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --sage: #8A9A5B;
            --moss: #606C38;
            --earth: #DDA15E;
            --cream: #FEFAE0;
            --terracotta: #BC6C25;
            --dark-moss: #3d4423;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #FEFAE0 0%, #F4F1DE 50%, #EDE8D5 100%);
            min-height: 100vh;
            color: var(--dark-moss);
            padding: 20px;
        }
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--moss);
            text-decoration: none;
            font-weight: 500;
            padding: 10px 20px;
            background: rgba(255,255,255,0.6);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            margin-bottom: 20px;
        }
        .back-link:hover { background: rgba(255,255,255,0.9); }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        h1 {
            font-family: 'Lora', serif;
            font-size: 2.2rem;
            color: var(--moss);
            margin-bottom: 10px;
            text-align: center;
        }
        .subtitle {
            text-align: center;
            color: var(--terracotta);
            margin-bottom: 30px;
            font-size: 1.1rem;
        }
        .card {
            background: rgba(255,255,255,0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }
        .experiment-phase { display: none; }
        .experiment-phase.active { display: block; }

        h2 {
            font-family: 'Lora', serif;
            color: var(--moss);
            margin-bottom: 15px;
        }
        p { line-height: 1.7; margin-bottom: 15px; }

        .btn {
            background: var(--moss);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 30px;
            font-size: 1rem;
            cursor: pointer;
            font-family: 'Nunito', sans-serif;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .btn:hover { background: var(--dark-moss); transform: translateY(-2px); }
        .btn:disabled { background: #ccc; cursor: not-allowed; transform: none; }

        .discomfort-display {
            text-align: center;
            padding: 40px;
            background: linear-gradient(135deg, #fee, #fcc);
            border-radius: 20px;
            margin: 20px 0;
            transition: background 0.3s ease;
        }
        .discomfort-level {
            font-size: 4rem;
            font-weight: 700;
            color: #c00;
            margin-bottom: 10px;
        }
        .discomfort-bar {
            height: 30px;
            background: #ddd;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }
        .discomfort-fill {
            height: 100%;
            background: linear-gradient(90deg, #4a4, #c00);
            transition: width 0.3s ease;
        }
        .timer {
            font-size: 1.5rem;
            color: var(--moss);
            font-weight: 600;
        }

        .trial-label {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--terracotta);
            margin-bottom: 15px;
        }

        .choice-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .choice-btn {
            padding: 30px 20px;
            background: rgba(255,255,255,0.8);
            border: 3px solid var(--sage);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        .choice-btn:hover {
            background: rgba(138, 154, 91, 0.2);
            transform: translateY(-3px);
        }
        .choice-btn.selected {
            background: var(--sage);
            color: white;
        }
        .choice-name {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        .choice-desc {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .results-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .result-box {
            padding: 20px;
            background: rgba(255,255,255,0.8);
            border-radius: 15px;
            text-align: center;
        }
        .result-box.chosen {
            background: var(--sage);
            color: white;
        }
        .result-title {
            font-weight: 600;
            margin-bottom: 10px;
        }
        .result-stat {
            font-size: 2rem;
            font-weight: 700;
        }
        .result-label {
            font-size: 0.85rem;
            opacity: 0.8;
        }

        .insight-box {
            background: linear-gradient(135deg, rgba(138, 154, 91, 0.2), rgba(221, 161, 94, 0.2));
            border-left: 4px solid var(--moss);
            padding: 20px;
            border-radius: 0 15px 15px 0;
            margin: 20px 0;
        }

        .essay-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(0,0,0,0.1);
        }
        .essay-section h3 {
            font-family: 'Lora', serif;
            color: var(--moss);
            margin: 20px 0 10px;
        }

        .center { text-align: center; }

        .progress-indicator {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        .progress-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ddd;
        }
        .progress-dot.active { background: var(--moss); }
        .progress-dot.complete { background: var(--sage); }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">← Back to Gallery</a>

    <div class="container">
        <h1>The Peak-End Rule</h1>
        <p class="subtitle">Paradox #440 • Kahneman & Fredrickson, 1993</p>

        <div class="card">
            <!-- Phase 1: Introduction -->
            <div id="phase1" class="experiment-phase active">
                <h2>How We Remember Experiences</h2>
                <p>Here's a puzzle: Would you rather endure 60 seconds of discomfort, or 90 seconds of discomfort?</p>
                <p>The answer seems obvious. But Nobel laureate Daniel Kahneman discovered something strange: people often <strong>choose MORE total pain</strong> if the experience ends better.</p>
                <p>In his famous colonoscopy study (1996), patients who endured a <em>longer</em> procedure—but with a gentler ending—rated it as less painful AND were more likely to return for follow-ups.</p>
                <p><strong>Experience this yourself:</strong> You'll go through two "discomfort" trials. Then choose which one you'd repeat. The results may surprise you.</p>
                <div class="center" style="margin-top: 20px;">
                    <button class="btn" onclick="startExperiment()">Begin Experiment</button>
                </div>
            </div>

            <!-- Phase 2: Trial A -->
            <div id="phase2" class="experiment-phase">
                <div class="trial-label">Trial A</div>
                <div class="progress-indicator">
                    <div class="progress-dot active"></div>
                    <div class="progress-dot"></div>
                </div>
                <p>Watch the discomfort level. The higher it goes, the more unpleasant.</p>
                <div class="discomfort-display" id="displayA">
                    <div class="discomfort-level" id="levelA">0</div>
                    <div>Discomfort Level</div>
                    <div class="discomfort-bar">
                        <div class="discomfort-fill" id="fillA" style="width: 0%"></div>
                    </div>
                    <div class="timer" id="timerA">0s</div>
                </div>
                <p id="statusA" class="center">Get ready...</p>
            </div>

            <!-- Phase 3: Break -->
            <div id="phase3" class="experiment-phase">
                <h2>Trial A Complete</h2>
                <div class="progress-indicator">
                    <div class="progress-dot complete"></div>
                    <div class="progress-dot"></div>
                </div>
                <p>Take a moment. The first trial peaked at a discomfort level of <strong id="peakA">-</strong>.</p>
                <p>Now you'll experience Trial B. Pay attention to how it feels.</p>
                <div class="center" style="margin-top: 20px;">
                    <button class="btn" onclick="startTrialB()">Start Trial B</button>
                </div>
            </div>

            <!-- Phase 4: Trial B -->
            <div id="phase4" class="experiment-phase">
                <div class="trial-label">Trial B</div>
                <div class="progress-indicator">
                    <div class="progress-dot complete"></div>
                    <div class="progress-dot active"></div>
                </div>
                <p>Watch the discomfort level again.</p>
                <div class="discomfort-display" id="displayB">
                    <div class="discomfort-level" id="levelB">0</div>
                    <div>Discomfort Level</div>
                    <div class="discomfort-bar">
                        <div class="discomfort-fill" id="fillB" style="width: 0%"></div>
                    </div>
                    <div class="timer" id="timerB">0s</div>
                </div>
                <p id="statusB" class="center">Get ready...</p>
            </div>

            <!-- Phase 5: Choice -->
            <div id="phase5" class="experiment-phase">
                <h2>Which Would You Repeat?</h2>
                <div class="progress-indicator">
                    <div class="progress-dot complete"></div>
                    <div class="progress-dot complete"></div>
                </div>
                <p>If you <em>had</em> to do one of these trials again, which would you choose?</p>
                <div class="choice-grid">
                    <div class="choice-btn" onclick="selectChoice('A')" id="choiceA">
                        <div class="choice-name">Trial A</div>
                        <div class="choice-desc">The first experience</div>
                    </div>
                    <div class="choice-btn" onclick="selectChoice('B')" id="choiceB">
                        <div class="choice-name">Trial B</div>
                        <div class="choice-desc">The second experience</div>
                    </div>
                </div>
                <div class="center">
                    <button class="btn" id="submitChoice" onclick="showResults()" disabled>Confirm Choice</button>
                </div>
            </div>

            <!-- Phase 6: Results -->
            <div id="phase6" class="experiment-phase">
                <h2>The Peak-End Rule in Action</h2>

                <div class="results-comparison">
                    <div class="result-box" id="resultBoxA">
                        <div class="result-title">Trial A</div>
                        <div class="result-stat" id="totalA">-</div>
                        <div class="result-label">Total discomfort units</div>
                        <div style="margin-top: 10px;">
                            <small>Duration: <span id="durA">-</span>s | Peak: <span id="peakAResult">-</span> | End: <span id="endA">-</span></small>
                        </div>
                    </div>
                    <div class="result-box" id="resultBoxB">
                        <div class="result-title">Trial B</div>
                        <div class="result-stat" id="totalB">-</div>
                        <div class="result-label">Total discomfort units</div>
                        <div style="margin-top: 10px;">
                            <small>Duration: <span id="durB">-</span>s | Peak: <span id="peakBResult">-</span> | End: <span id="endB">-</span></small>
                        </div>
                    </div>
                </div>

                <div class="insight-box" id="resultMessage">
                    <!-- Dynamic message -->
                </div>

                <div class="essay-section">
                    <h3>The Science</h3>
                    <p>The Peak-End Rule, discovered by Barbara Fredrickson and Daniel Kahneman (1993), reveals that we don't evaluate experiences by their total or average. Instead, we remember the <strong>most intense moment (peak)</strong> and the <strong>final moment (end)</strong>.</p>

                    <h3>The Colonoscopy Study</h3>
                    <p>In a landmark 1996 study, Kahneman and Donald Redelmeier tracked real-time pain ratings from colonoscopy patients. They found that memories of pain correlated with peak and end intensity—not duration. A 30-minute procedure could be remembered as less painful than a 10-minute one, if it ended more gently.</p>
                    <p>In a follow-up experiment (2003), they deliberately extended some procedures by leaving the scope in (uncomfortable but not painful) for extra minutes. Result: patients with <em>longer procedures</em> rated them more favorably and were more likely to return for follow-ups.</p>

                    <h3>Duration Neglect</h3>
                    <p>Perhaps most surprising: we largely ignore <strong>how long</strong> an experience lasted. In the "cold water experiment," participants preferred to repeat a 90-second trial (60 seconds at 14°C + 30 seconds at 15°C) over a 60-second trial (just at 14°C). They chose MORE total discomfort because it ended slightly better.</p>

                    <h3>Real-World Implications</h3>
                    <p>This rule shapes how we remember vacations, relationships, medical procedures, and customer experiences. A week-long vacation remembered by its best moment and last day. A 10-year relationship judged by its peaks and how it ended.</p>
                    <p>Smart designers use this: end experiences on a high note. A small gesture at checkout, a gentle landing after turbulence, a sweet treat after a dental procedure. The ending writes the memory.</p>

                    <h3>The Ethical Dilemma</h3>
                    <p>Should doctors extend procedures to create better memories? More total pain, but patients return for needed care. The "experiencing self" suffers more; the "remembering self" judges more kindly. Which self should we serve?</p>
                </div>

                <div class="center" style="margin-top: 20px;">
                    <button class="btn" onclick="resetExperiment()">Try Again</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Trial configurations
        // Trial A: Short, high peak, bad ending
        // Trial B: Longer, same peak, gentler ending (more total discomfort)

        const trialA = {
            duration: 8000, // 8 seconds
            levels: [0, 3, 5, 8, 9, 8, 7, 5] // Ends at 5
        };

        const trialB = {
            duration: 12000, // 12 seconds
            levels: [0, 3, 5, 8, 9, 8, 6, 5, 4, 3, 2, 1] // Same peak, but tapers to 1
        };

        let userChoice = null;
        let trialAData = { peak: 0, end: 0, total: 0 };
        let trialBData = { peak: 0, end: 0, total: 0 };

        function startExperiment() {
            showPhase(2);
            setTimeout(() => runTrial('A'), 1000);
        }

        function runTrial(trial) {
            const config = trial === 'A' ? trialA : trialB;
            const levelEl = document.getElementById('level' + trial);
            const fillEl = document.getElementById('fill' + trial);
            const timerEl = document.getElementById('timer' + trial);
            const statusEl = document.getElementById('status' + trial);
            const displayEl = document.getElementById('display' + trial);

            const data = trial === 'A' ? trialAData : trialBData;
            const stepDuration = config.duration / config.levels.length;
            let step = 0;
            data.total = 0;
            data.peak = 0;

            statusEl.textContent = 'Experiencing...';

            const interval = setInterval(() => {
                const level = config.levels[step];
                levelEl.textContent = level;
                fillEl.style.width = (level * 10) + '%';
                timerEl.textContent = Math.round((step + 1) * stepDuration / 1000) + 's';

                // Update background color based on level
                const intensity = level / 10;
                const r = Math.round(255 - intensity * 50);
                const g = Math.round(238 - intensity * 100);
                const b = Math.round(238 - intensity * 100);
                displayEl.style.background = `linear-gradient(135deg, rgb(${r},${g},${b}), rgb(${r-20},${g-30},${b-30}))`;

                data.total += level;
                if (level > data.peak) data.peak = level;
                data.end = level;

                step++;

                if (step >= config.levels.length) {
                    clearInterval(interval);
                    statusEl.textContent = 'Trial complete!';

                    setTimeout(() => {
                        if (trial === 'A') {
                            document.getElementById('peakA').textContent = data.peak;
                            showPhase(3);
                        } else {
                            showPhase(5);
                        }
                    }, 1000);
                }
            }, stepDuration);
        }

        function startTrialB() {
            showPhase(4);
            setTimeout(() => runTrial('B'), 1000);
        }

        function selectChoice(choice) {
            userChoice = choice;
            document.getElementById('choiceA').classList.toggle('selected', choice === 'A');
            document.getElementById('choiceB').classList.toggle('selected', choice === 'B');
            document.getElementById('submitChoice').disabled = false;
        }

        function showResults() {
            // Calculate totals
            document.getElementById('totalA').textContent = trialAData.total;
            document.getElementById('totalB').textContent = trialBData.total;
            document.getElementById('durA').textContent = trialA.duration / 1000;
            document.getElementById('durB').textContent = trialB.duration / 1000;
            document.getElementById('peakAResult').textContent = trialAData.peak;
            document.getElementById('peakBResult').textContent = trialBData.peak;
            document.getElementById('endA').textContent = trialAData.end;
            document.getElementById('endB').textContent = trialBData.end;

            // Mark chosen
            document.getElementById('resultBoxA').classList.toggle('chosen', userChoice === 'A');
            document.getElementById('resultBoxB').classList.toggle('chosen', userChoice === 'B');

            // Generate message
            const msg = document.getElementById('resultMessage');

            if (userChoice === 'B') {
                msg.innerHTML = `<strong>Classic Peak-End Effect!</strong> You chose Trial B, even though it had <strong>${trialBData.total - trialAData.total} MORE total discomfort</strong> and lasted ${(trialB.duration - trialA.duration) / 1000} seconds longer! But it ended at level ${trialBData.end} vs Trial A's ${trialAData.end}. Your "remembering self" preferred the gentler ending, just like Kahneman's colonoscopy patients. Duration neglect in action—we don't count the seconds, we remember the peaks and endings.`;
            } else {
                msg.innerHTML = `<strong>Interesting!</strong> You chose Trial A, the objectively "better" choice with ${trialAData.total} total discomfort vs ${trialBData.total}. You may have been consciously tracking the duration, or you're less susceptible to the peak-end bias. In Kahneman's studies, most participants chose the longer trial with the gentler ending—showing how powerfully endings shape memory.`;
            }

            showPhase(6);
        }

        function resetExperiment() {
            userChoice = null;
            trialAData = { peak: 0, end: 0, total: 0 };
            trialBData = { peak: 0, end: 0, total: 0 };
            document.getElementById('choiceA').classList.remove('selected');
            document.getElementById('choiceB').classList.remove('selected');
            document.getElementById('submitChoice').disabled = true;
            document.getElementById('levelA').textContent = '0';
            document.getElementById('levelB').textContent = '0';
            document.getElementById('fillA').style.width = '0%';
            document.getElementById('fillB').style.width = '0%';
            document.getElementById('timerA').textContent = '0s';
            document.getElementById('timerB').textContent = '0s';
            showPhase(1);
        }

        function showPhase(num) {
            document.querySelectorAll('.experiment-phase').forEach(p => p.classList.remove('active'));
            document.getElementById('phase' + num).classList.add('active');
        }
    </script>
</body>
</html>
