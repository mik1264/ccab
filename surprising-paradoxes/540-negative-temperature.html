<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Negative Temperature - Hotter Than Infinity</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #0a0a20 0%, #1a0a30 50%, #0a1a30 100%);
            min-height: 100vh;
            color: #e8e0f8;
            line-height: 1.9;
        }

        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            padding: 12px 24px;
            background: rgba(255,100,50,0.15);
            backdrop-filter: blur(10px);
            color: #ff8844;
            text-decoration: none;
            border-radius: 30px;
            font-size: 14px;
            z-index: 1000;
            transition: all 0.3s;
            border: 1px solid rgba(255,100,50,0.3);
        }

        .back-link:hover {
            background: rgba(255,100,50,0.3);
            transform: translateX(-5px);
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 80px 30px 60px;
        }

        header {
            text-align: center;
            margin-bottom: 60px;
        }

        h1 {
            font-size: 3.2rem;
            font-weight: 400;
            background: linear-gradient(135deg, #ff6644, #ffaa44, #ff6644);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 20px;
            letter-spacing: 1px;
        }

        .subtitle {
            font-size: 1.5rem;
            color: #aa88cc;
            font-style: italic;
        }

        .paradox-statement {
            background: linear-gradient(135deg, rgba(255,100,50,0.15) 0%, rgba(255,170,68,0.1) 100%);
            border-left: 4px solid #ff6644;
            padding: 35px 45px;
            margin: 50px 0;
            border-radius: 0 20px 20px 0;
            font-size: 1.35rem;
            text-align: center;
            color: #d8c0e8;
        }

        .paradox-statement strong {
            color: #ffaa44;
        }

        h2 {
            font-size: 1.9rem;
            color: #ff8844;
            margin: 60px 0 30px;
            font-weight: 400;
            border-bottom: 1px solid rgba(255,136,68,0.2);
            padding-bottom: 15px;
        }

        h3 {
            font-size: 1.4rem;
            color: #ffaa44;
            margin: 40px 0 20px;
            font-weight: 400;
        }

        p {
            margin-bottom: 22px;
            color: #c8b0d8;
            font-size: 1.1rem;
        }

        .highlight {
            color: #ffaa44;
            font-weight: 500;
        }

        .hot {
            color: #ff4444;
        }

        .cold {
            color: #44aaff;
        }

        .simulation-container {
            background: rgba(20,10,40,0.6);
            border-radius: 20px;
            padding: 35px;
            margin: 50px 0;
            border: 1px solid rgba(255,136,68,0.2);
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
        }

        .sim-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .sim-title {
            font-size: 1.3rem;
            color: #ff8844;
        }

        .controls {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            align-items: center;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .control-group label {
            font-size: 12px;
            color: #aa88cc;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        input[type="range"] {
            width: 200px;
            height: 8px;
            -webkit-appearance: none;
            background: linear-gradient(90deg, #44aaff, #ffffff, #ff4444, #ff4444);
            border-radius: 4px;
            cursor: pointer;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: #ffaa44;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 15px rgba(255,170,68,0.5);
        }

        button {
            background: rgba(255,136,68,0.2);
            border: 1px solid rgba(255,136,68,0.5);
            color: #ff8844;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            font-family: inherit;
        }

        button:hover {
            background: rgba(255,136,68,0.4);
            transform: translateY(-2px);
        }

        canvas {
            width: 100%;
            border-radius: 12px;
            background: rgba(5,5,15,0.8);
        }

        .temp-display {
            text-align: center;
            margin: 25px 0;
            padding: 20px;
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
        }

        .temp-value {
            font-size: 3.5rem;
            font-family: 'Courier New', monospace;
            font-weight: 300;
        }

        .temp-label {
            font-size: 1rem;
            color: #aa88cc;
            margin-top: 10px;
        }

        .temp-scale {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            padding: 15px;
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .scale-item {
            text-align: center;
            padding: 5px 10px;
        }

        .scale-item.active {
            background: rgba(255,170,68,0.3);
            border-radius: 8px;
        }

        .stats-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-top: 30px;
            padding-top: 25px;
            border-top: 1px solid rgba(255,136,68,0.2);
        }

        .stat {
            text-align: center;
            padding: 15px;
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 300;
            color: #ffaa44;
            font-family: 'Courier New', monospace;
        }

        .stat-label {
            font-size: 11px;
            color: #aa88cc;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 5px;
        }

        .equation-box {
            background: rgba(100,50,150,0.2);
            padding: 25px 35px;
            border-radius: 15px;
            font-family: 'Courier New', monospace;
            text-align: center;
            margin: 30px 0;
            font-size: 1.1rem;
            color: #ff8844;
            border: 1px solid rgba(255,136,68,0.2);
        }

        .insight-box {
            background: linear-gradient(135deg, rgba(68,170,255,0.1) 0%, rgba(100,68,255,0.1) 100%);
            border-left: 4px solid #44aaff;
            padding: 25px 30px;
            margin: 40px 0;
            border-radius: 0 15px 15px 0;
        }

        .insight-box strong {
            color: #44aaff;
        }

        .warning-box {
            background: linear-gradient(135deg, rgba(255,68,68,0.1) 0%, rgba(255,136,68,0.1) 100%);
            border-left: 4px solid #ff4444;
            padding: 25px 30px;
            margin: 40px 0;
            border-radius: 0 15px 15px 0;
        }

        .warning-box strong {
            color: #ff4444;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .comparison-card {
            background: rgba(0,0,0,0.3);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid rgba(255,136,68,0.15);
            text-align: center;
            transition: all 0.3s;
        }

        .comparison-card:hover {
            transform: translateY(-5px);
            border-color: rgba(255,170,68,0.4);
        }

        .comparison-card h4 {
            color: #ff8844;
            margin-bottom: 10px;
            font-weight: 400;
        }

        .comparison-card .temp {
            font-size: 1.5rem;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
        }

        .comparison-card p {
            font-size: 0.9rem;
            color: #a088b8;
            margin: 0;
        }

        .arrow-sequence {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin: 30px 0;
            padding: 25px;
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            flex-wrap: wrap;
        }

        .arrow-item {
            text-align: center;
            padding: 10px 20px;
            border-radius: 10px;
        }

        .arrow {
            font-size: 2rem;
            color: #ffaa44;
        }

        footer {
            text-align: center;
            margin-top: 80px;
            padding: 40px 0;
            border-top: 1px solid rgba(255,136,68,0.2);
            color: #6a5878;
            font-size: 0.9rem;
        }

        footer a {
            color: #ff8844;
            text-decoration: none;
        }

        @media (max-width: 768px) {
            h1 { font-size: 2.2rem; }
            .container { padding: 60px 20px 40px; }
            .simulation-container { padding: 20px; }
            input[type="range"] { width: 150px; }
            .temp-value { font-size: 2.5rem; }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">← Back to Paradoxes</a>

    <div class="container">
        <header>
            <h1>Negative Temperature</h1>
            <p class="subtitle">When systems become hotter than infinitely hot</p>
        </header>

        <div class="paradox-statement">
            <strong>The Paradox:</strong> In certain quantum systems, temperature can go
            <strong>below absolute zero</strong>—and these systems are <strong>hotter</strong>
            than any positive temperature, including infinity.
        </div>

        <h2>The Temperature Scale You Never Learned</h2>

        <p>
            You were taught that absolute zero (0 Kelvin, -273.15°C) is the coldest possible
            temperature—the point where all molecular motion stops. Nothing can be colder.
        </p>

        <p>
            <span class="highlight">That's only half the story.</span>
        </p>

        <p>
            In certain special systems, temperature doesn't just approach zero—it wraps around
            through infinity and becomes <em>negative</em>. And here's the mind-bending part:
            <span class="highlight">negative temperatures are hotter than positive ones.</span>
        </p>

        <div class="arrow-sequence">
            <div class="arrow-item" style="color: #44aaff;">
                <div>+0 K</div>
                <div style="font-size: 0.8rem;">Coldest</div>
            </div>
            <span class="arrow">→</span>
            <div class="arrow-item" style="color: #88aacc;">
                <div>+300 K</div>
                <div style="font-size: 0.8rem;">Room temp</div>
            </div>
            <span class="arrow">→</span>
            <div class="arrow-item" style="color: #ffffff;">
                <div>+∞ K</div>
                <div style="font-size: 0.8rem;">Equal populations</div>
            </div>
            <span class="arrow">→</span>
            <div class="arrow-item" style="color: #ff8844;">
                <div>-∞ K</div>
                <div style="font-size: 0.8rem;">Just past infinity</div>
            </div>
            <span class="arrow">→</span>
            <div class="arrow-item" style="color: #ff4444;">
                <div>-0 K</div>
                <div style="font-size: 0.8rem;">Hottest possible</div>
            </div>
        </div>

        <h2>See It In Action</h2>

        <p>
            The visualization below shows particles distributed across energy levels. At normal
            temperatures, most particles are in low-energy states (Boltzmann distribution).
            As temperature increases, the distribution flattens. At infinite temperature,
            all levels are equally populated. Go beyond—into negative territory—and the
            distribution <em>inverts</em>.
        </p>

        <div class="simulation-container">
            <div class="sim-header">
                <div class="sim-title">Energy Level Population Simulator</div>
                <div class="controls">
                    <div class="control-group">
                        <label>Temperature</label>
                        <input type="range" id="tempSlider" min="0" max="100" value="30">
                    </div>
                    <button id="animateBtn">Animate Heating</button>
                </div>
            </div>

            <div class="temp-display">
                <div class="temp-value" id="tempValue">+300 K</div>
                <div class="temp-label" id="tempDesc">Room Temperature</div>
            </div>

            <canvas id="mainCanvas" height="400"></canvas>

            <div class="stats-panel">
                <div class="stat">
                    <div class="stat-value" id="groundPop">—</div>
                    <div class="stat-label">Ground State %</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="excitedPop">—</div>
                    <div class="stat-label">Excited State %</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="entropy">—</div>
                    <div class="stat-label">Entropy</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="heatFlow">—</div>
                    <div class="stat-label">Heat Flow Direction</div>
                </div>
            </div>
        </div>

        <h2>How Is This Possible?</h2>

        <p>
            Temperature, fundamentally, is defined through entropy: <em>1/T = ∂S/∂E</em>.
            Usually, adding energy increases entropy (more ways to arrange the system).
            Temperature is positive.
        </p>

        <div class="equation-box">
            1/T = ∂S/∂E<br>
            <span style="font-size: 0.9rem; color: #aa88cc;">
                Temperature is the rate of entropy change with energy
            </span>
        </div>

        <p>
            But in systems with a <span class="highlight">maximum energy state</span>
            (bounded energy spectrum), something strange happens. Once you've put most
            particles in the highest energy level, adding MORE energy actually
            <em>decreases</em> entropy—there are fewer possible arrangements.
        </p>

        <div class="insight-box">
            <p><strong>The Key Insight:</strong> When ∂S/∂E becomes negative,
            temperature becomes negative. But 1/T going through zero means T goes
            through ±∞, not through zero. Negative temperatures are on the "other side"
            of infinity.</p>
        </div>

        <h3>Population Inversion</h3>

        <p>
            At positive temperatures, the Boltzmann distribution dictates that lower energy
            states are always more populated. At infinite temperature, all states become
            equally populated. At negative temperatures, <span class="highlight">higher energy
            states are MORE populated than lower ones</span>—a "population inversion."
        </p>

        <p>
            This is why <span class="hot">negative temperature systems are hotter</span>:
            if you bring them in contact with any positive-temperature system, heat flows
            FROM the negative-temperature system TO the positive one. Always.
        </p>

        <h2>Real Examples</h2>

        <div class="comparison-grid">
            <div class="comparison-card">
                <h4>Nuclear Spins (1951)</h4>
                <div class="temp" style="color: #ff4444;">-350 μK</div>
                <p>Purcell & Pound achieved negative temperature in lithium fluoride nuclear spins using magnetic field reversal.</p>
            </div>
            <div class="comparison-card">
                <h4>Lasers</h4>
                <div class="temp" style="color: #ff8844;">Negative T</div>
                <p>Every working laser has a population inversion—more atoms in excited states than ground state. This is a negative temperature condition.</p>
            </div>
            <div class="comparison-card">
                <h4>Ultracold Atoms (2013)</h4>
                <div class="temp" style="color: #ff4444;">-nK</div>
                <p>Munich researchers created negative absolute temperature in an ultracold quantum gas of potassium atoms using optical lattices.</p>
            </div>
        </div>

        <h2>Why Doesn't Everything Explode?</h2>

        <p>
            If negative temperatures are hotter than infinity, why don't these systems
            immediately transfer all their energy to everything around them?
        </p>

        <div class="warning-box">
            <p><strong>The Catch:</strong> Negative temperatures can only exist in systems with
            bounded energy spectra—where there's a maximum possible energy state. Normal matter
            (gases, liquids, solids) has unbounded kinetic energy and can NEVER reach negative
            temperature. Only special quantum systems with discrete, bounded energy levels
            can achieve this.</p>
        </div>

        <p>
            These systems are also inherently <em>unstable</em>. A population inversion wants
            to decay back to normal. In lasers, we maintain it through continuous "pumping."
            In the 2013 experiment, the negative-temperature state lasted only milliseconds.
        </p>

        <h2>The Deeper Meaning</h2>

        <p>
            Negative temperature challenges our intuition about what "hot" and "cold" mean.
            Temperature isn't really about motion or energy—it's about
            <span class="highlight">how eager a system is to give away energy</span>.
        </p>

        <p>
            A positive-temperature system at +300K has most particles in low-energy states.
            It can absorb energy. A negative-temperature system has most particles in
            HIGH-energy states. It desperately wants to shed energy—making it "hotter"
            in the thermodynamic sense that matters.
        </p>

        <div class="paradox-statement">
            "Temperature is not how much energy you have, but how much you want to get rid of it."
        </div>

        <h2>Controversy</h2>

        <p>
            Some physicists argue that negative temperatures are artifacts of using
            Boltzmann's definition of entropy instead of Gibbs'. Under Gibbs' formulation,
            negative temperatures don't exist. The debate continues in the literature.
        </p>

        <p>
            Regardless of interpretation, the <em>phenomena</em> are real: population inversions
            exist, lasers work, and these systems do transfer energy to positive-temperature
            systems when brought into contact.
        </p>

        <footer>
            <p>Part of the <a href="../index.html">CCAB</a> Surprising Paradoxes collection</p>
            <p>Sources: <a href="https://en.wikipedia.org/wiki/Negative_temperature">Wikipedia</a> ·
            <a href="https://en.wikipedia.org/wiki/Population_inversion">Population Inversion</a> ·
            <a href="https://www.desy.de/user/projects/Physics/ParticleAndNuclear/neg_temperature.html">DESY Physics</a></p>
        </footer>
    </div>

    <script>
        const canvas = document.getElementById('mainCanvas');
        const ctx = canvas.getContext('2d');

        // High DPI support
        function setupCanvas() {
            const dpr = window.devicePixelRatio || 1;
            const rect = canvas.getBoundingClientRect();
            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            ctx.scale(dpr, dpr);
            canvas.style.width = rect.width + 'px';
            canvas.style.height = rect.height + 'px';
        }

        // State
        let sliderValue = 30; // 0-100 maps to temperature journey
        let isAnimating = false;
        let animationId = null;

        // Energy levels
        const numLevels = 8;
        const particles = [];
        const numParticles = 200;

        // Initialize particles
        function initParticles() {
            particles.length = 0;
            for (let i = 0; i < numParticles; i++) {
                particles.push({
                    level: 0,
                    x: 0,
                    y: 0,
                    vx: (Math.random() - 0.5) * 2,
                    vy: (Math.random() - 0.5) * 2
                });
            }
        }

        // Get temperature from slider (non-linear mapping)
        function getTemperature(slider) {
            // 0-40: positive temperatures (0K to +∞)
            // 40-60: around infinity (transition)
            // 60-100: negative temperatures (-∞ to -0K)

            if (slider < 40) {
                // Map 0-40 to temperatures from near-zero to very high
                const t = slider / 40;
                return 1 + t * 10000; // 1K to 10001K
            } else if (slider < 60) {
                // Transition through infinity
                const t = (slider - 40) / 20;
                if (t < 0.5) {
                    return 100000 / (0.5 - t); // Approach +∞
                } else {
                    return -100000 / (t - 0.5); // Come from -∞
                }
            } else {
                // Map 60-100 to negative temperatures from very negative to near -0
                const t = (slider - 60) / 40;
                return -(10000 - t * 9999); // -10000K to -1K
            }
        }

        // Get Boltzmann distribution for given temperature
        function getPopulations(temp, numLevels) {
            const pops = [];
            const energyGap = 1; // Arbitrary units
            const kB = 1; // Boltzmann constant in our units

            let total = 0;
            for (let i = 0; i < numLevels; i++) {
                const energy = i * energyGap;
                let pop;

                if (Math.abs(temp) > 50000) {
                    // Near infinity - equal populations
                    pop = 1;
                } else {
                    // Boltzmann: exp(-E/kT)
                    pop = Math.exp(-energy / (kB * temp));
                }

                pops.push(pop);
                total += pop;
            }

            // Normalize
            return pops.map(p => p / total);
        }

        // Distribute particles according to populations
        function distributeParticles(populations) {
            let particleIndex = 0;

            for (let level = 0; level < numLevels; level++) {
                const count = Math.round(populations[level] * numParticles);

                for (let i = 0; i < count && particleIndex < numParticles; i++) {
                    particles[particleIndex].targetLevel = level;
                    particleIndex++;
                }
            }

            // Handle rounding errors
            while (particleIndex < numParticles) {
                particles[particleIndex].targetLevel = 0;
                particleIndex++;
            }
        }

        // Animation
        function animate() {
            const w = canvas.getBoundingClientRect().width;
            const h = canvas.getBoundingClientRect().height;

            // Get temperature and populations
            const temp = getTemperature(sliderValue);
            const populations = getPopulations(temp, numLevels);
            distributeParticles(populations);

            // Clear
            ctx.fillStyle = 'rgba(5, 5, 20, 1)';
            ctx.fillRect(0, 0, w, h);

            // Draw energy levels
            const levelHeight = h / (numLevels + 1);
            const levelWidth = w * 0.6;
            const levelX = (w - levelWidth) / 2;

            for (let i = 0; i < numLevels; i++) {
                const y = h - (i + 1) * levelHeight;

                // Level line
                const intensity = populations[i];
                const hue = 200 + intensity * 160; // Blue to red
                ctx.strokeStyle = `hsla(${hue}, 80%, 50%, 0.5)`;
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(levelX, y);
                ctx.lineTo(levelX + levelWidth, y);
                ctx.stroke();

                // Level label
                ctx.fillStyle = '#aa88cc';
                ctx.font = '12px Courier New';
                ctx.fillText(`E${i}`, levelX - 30, y + 4);

                // Population bar
                const barWidth = levelWidth * populations[i];
                const gradient = ctx.createLinearGradient(levelX, y, levelX + barWidth, y);
                gradient.addColorStop(0, `hsla(${hue}, 80%, 50%, 0.8)`);
                gradient.addColorStop(1, `hsla(${hue}, 80%, 50%, 0.3)`);
                ctx.fillStyle = gradient;
                ctx.fillRect(levelX, y - 15, barWidth, 12);

                // Percentage
                ctx.fillStyle = '#ffffff';
                ctx.font = '11px Courier New';
                ctx.fillText((populations[i] * 100).toFixed(1) + '%', levelX + levelWidth + 10, y + 4);
            }

            // Move particles toward their target levels
            for (let p of particles) {
                const targetY = h - (p.targetLevel + 1) * levelHeight;
                const targetX = levelX + Math.random() * levelWidth;

                // Smooth movement
                if (p.x === 0) p.x = targetX;
                if (p.y === 0) p.y = targetY;

                p.x += (targetX - p.x) * 0.02 + p.vx;
                p.y += (targetY - p.y) * 0.05 + p.vy;

                // Keep in bounds
                p.x = Math.max(levelX, Math.min(levelX + levelWidth, p.x));

                // Draw particle
                const hue = 200 + (p.targetLevel / numLevels) * 160;
                ctx.fillStyle = `hsla(${hue}, 80%, 60%, 0.8)`;
                ctx.beginPath();
                ctx.arc(p.x, p.y, 3, 0, Math.PI * 2);
                ctx.fill();
            }

            // Update temperature display
            updateDisplay(temp, populations);

            // Continue animation
            if (isAnimating) {
                sliderValue += 0.3;
                if (sliderValue > 100) sliderValue = 0;
                document.getElementById('tempSlider').value = sliderValue;
            }

            animationId = requestAnimationFrame(animate);
        }

        function updateDisplay(temp, populations) {
            const tempEl = document.getElementById('tempValue');
            const descEl = document.getElementById('tempDesc');

            let tempStr, desc, color;

            if (temp > 50000) {
                tempStr = '+∞ K';
                desc = 'Infinite Temperature - Equal Populations';
                color = '#ffffff';
            } else if (temp < -50000) {
                tempStr = '-∞ K';
                desc = 'Just Past Infinity';
                color = '#ff8844';
            } else if (temp > 0) {
                if (temp < 100) {
                    tempStr = '+' + temp.toFixed(0) + ' K';
                    desc = 'Near Absolute Zero';
                    color = '#44aaff';
                } else if (temp < 400) {
                    tempStr = '+' + temp.toFixed(0) + ' K';
                    desc = 'Room Temperature Range';
                    color = '#88aacc';
                } else {
                    tempStr = '+' + temp.toFixed(0) + ' K';
                    desc = 'High Temperature';
                    color = '#cccccc';
                }
            } else {
                if (temp > -100) {
                    tempStr = temp.toFixed(0) + ' K';
                    desc = 'Extreme Negative - Hottest Possible!';
                    color = '#ff4444';
                } else {
                    tempStr = temp.toFixed(0) + ' K';
                    desc = 'Negative Temperature - Hotter Than +∞';
                    color = '#ff8844';
                }
            }

            tempEl.textContent = tempStr;
            tempEl.style.color = color;
            descEl.textContent = desc;

            // Stats
            document.getElementById('groundPop').textContent = (populations[0] * 100).toFixed(1) + '%';
            document.getElementById('excitedPop').textContent = (populations[numLevels - 1] * 100).toFixed(1) + '%';

            // Entropy (simplified)
            let entropy = 0;
            for (let p of populations) {
                if (p > 0.001) entropy -= p * Math.log(p);
            }
            document.getElementById('entropy').textContent = entropy.toFixed(2);

            // Heat flow
            if (temp > 0 && temp < 50000) {
                document.getElementById('heatFlow').textContent = '← Absorbs';
                document.getElementById('heatFlow').style.color = '#44aaff';
            } else if (temp < 0) {
                document.getElementById('heatFlow').textContent = 'Emits →';
                document.getElementById('heatFlow').style.color = '#ff4444';
            } else {
                document.getElementById('heatFlow').textContent = 'Neutral';
                document.getElementById('heatFlow').style.color = '#ffffff';
            }
        }

        // Event listeners
        document.getElementById('tempSlider').addEventListener('input', (e) => {
            sliderValue = parseFloat(e.target.value);
            isAnimating = false;
            document.getElementById('animateBtn').textContent = 'Animate Heating';
        });

        document.getElementById('animateBtn').addEventListener('click', () => {
            isAnimating = !isAnimating;
            document.getElementById('animateBtn').textContent = isAnimating ? 'Stop' : 'Animate Heating';
            if (isAnimating && sliderValue > 95) sliderValue = 0;
        });

        window.addEventListener('resize', () => {
            setupCanvas();
        });

        // Initialize
        setupCanvas();
        initParticles();
        animate();
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
