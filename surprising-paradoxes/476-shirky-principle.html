<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Shirky Principle - Surprising Paradoxes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #e8e8e8;
            overflow-x: hidden;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 30px 20px;
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(251, 191, 36, 0.2));
            border-radius: 20px;
            margin-bottom: 30px;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        h1 {
            font-size: 2.5em;
            background: linear-gradient(135deg, #ef4444, #fbbf24);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
        }

        .subtitle {
            font-size: 1.3em;
            color: #fbbf24;
            font-style: italic;
        }

        .intro {
            background: rgba(255, 255, 255, 0.05);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border-left: 4px solid #ef4444;
        }

        .intro p {
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .key-insight {
            background: rgba(239, 68, 68, 0.1);
            padding: 15px;
            border-radius: 10px;
            font-weight: bold;
            color: #fbbf24;
            text-align: center;
            font-size: 1.1em;
        }

        .simulation-container {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sim-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .sim-header h2 {
            color: #fbbf24;
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .industry-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .industry-btn {
            padding: 20px 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            color: #e8e8e8;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .industry-btn:hover {
            border-color: #fbbf24;
            background: rgba(251, 191, 36, 0.1);
        }

        .industry-btn.active {
            border-color: #ef4444;
            background: rgba(239, 68, 68, 0.2);
        }

        .industry-icon {
            font-size: 2em;
            display: block;
            margin-bottom: 10px;
        }

        .industry-name {
            font-size: 0.95em;
        }

        .lifecycle-container {
            position: relative;
            padding: 20px 0;
        }

        .lifecycle-track {
            display: flex;
            justify-content: space-between;
            position: relative;
            margin-bottom: 30px;
        }

        .lifecycle-track::before {
            content: '';
            position: absolute;
            top: 25px;
            left: 50px;
            right: 50px;
            height: 4px;
            background: linear-gradient(90deg, #4ade80, #fbbf24, #ef4444);
            border-radius: 2px;
        }

        .lifecycle-stage {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.3);
            border: 3px solid #888;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 1;
            transition: all 0.5s ease;
            font-size: 1.2em;
        }

        .lifecycle-stage.active {
            border-color: #fbbf24;
            background: rgba(251, 191, 36, 0.3);
            transform: scale(1.2);
        }

        .lifecycle-stage.complete {
            border-color: #4ade80;
            background: rgba(74, 222, 128, 0.3);
        }

        .lifecycle-stage.corrupt {
            border-color: #ef4444;
            background: rgba(239, 68, 68, 0.3);
        }

        .stage-labels {
            display: flex;
            justify-content: space-between;
            text-align: center;
            font-size: 0.8em;
            color: #888;
        }

        .stage-labels span {
            width: 80px;
        }

        .scenario-panel {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
        }

        .scenario-title {
            color: #fbbf24;
            font-size: 1.3em;
            margin-bottom: 15px;
        }

        .scenario-text {
            line-height: 1.8;
            margin-bottom: 20px;
            color: #ccc;
        }

        .metrics-bar {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .metric {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 12px;
            text-align: center;
        }

        .metric-value {
            font-size: 1.8em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .metric-label {
            font-size: 0.85em;
            color: #888;
        }

        .choices {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .choice-btn {
            padding: 18px 20px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.05);
            color: #e8e8e8;
            cursor: pointer;
            text-align: left;
            font-size: 1em;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .choice-btn:hover {
            border-color: #fbbf24;
            background: rgba(251, 191, 36, 0.1);
        }

        .choice-icon {
            font-size: 1.5em;
            min-width: 40px;
            text-align: center;
        }

        .choice-btn.selected-good {
            border-color: #4ade80;
            background: rgba(74, 222, 128, 0.2);
        }

        .choice-btn.selected-bad {
            border-color: #ef4444;
            background: rgba(239, 68, 68, 0.2);
        }

        .result-reveal {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
            display: none;
        }

        .result-reveal.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .case-study {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(239, 68, 68, 0.1));
            border: 2px solid rgba(251, 191, 36, 0.3);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
        }

        .case-study h3 {
            color: #fbbf24;
            font-size: 1.3em;
            margin-bottom: 20px;
        }

        .rat-animation {
            position: relative;
            height: 150px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }

        .rat {
            position: absolute;
            font-size: 2em;
            transition: all 0.5s ease;
        }

        .bounty-counter {
            position: absolute;
            top: 10px;
            right: 15px;
            background: rgba(251, 191, 36, 0.3);
            padding: 10px 15px;
            border-radius: 10px;
            font-weight: bold;
        }

        .rat-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 15px;
        }

        .rat-btn {
            padding: 12px 25px;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .rat-btn.collect {
            background: linear-gradient(135deg, #4ade80, #22c55e);
            color: white;
        }

        .rat-btn.breed {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }

        .insights-panel {
            background: rgba(0, 0, 0, 0.3);
            padding: 25px;
            border-radius: 15px;
            margin-top: 30px;
        }

        .insights-panel h3 {
            color: #fbbf24;
            margin-bottom: 20px;
        }

        .insight-item {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
        }

        .insight-icon {
            font-size: 1.5em;
            min-width: 40px;
            text-align: center;
        }

        .insight-text h4 {
            color: #fbbf24;
            margin-bottom: 5px;
        }

        .insight-text p {
            color: #ccc;
            line-height: 1.6;
        }

        .quote-box {
            background: rgba(0, 0, 0, 0.3);
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
            border-left: 4px solid #fbbf24;
            font-style: italic;
        }

        .quote-author {
            text-align: right;
            color: #fbbf24;
            margin-top: 10px;
            font-style: normal;
        }

        .results-panel {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(251, 191, 36, 0.1));
            border-radius: 20px;
            padding: 30px;
            margin-top: 30px;
            display: none;
        }

        .btn-primary {
            padding: 15px 30px;
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: #1a1a2e;
            border: none;
            border-radius: 12px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 25px auto;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(251, 191, 36, 0.4);
        }

        .back-link {
            display: inline-block;
            color: #fbbf24;
            text-decoration: none;
            margin-bottom: 20px;
            font-size: 1em;
            transition: color 0.3s ease;
        }

        .back-link:hover {
            color: #ef4444;
        }

        .hidden {
            display: none !important;
        }

        @media (max-width: 768px) {
            h1 { font-size: 1.8em; }
            .industry-selector { grid-template-columns: repeat(2, 1fr); }
            .metrics-bar { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">‚Üê Back to Surprising Paradoxes</a>

        <header>
            <h1>The Shirky Principle</h1>
            <p class="subtitle">"Institutions will try to preserve the problem to which they are the solution"</p>
        </header>

        <div class="intro">
            <p>
                <strong>Clay Shirky (2010)</strong> crystallized a disturbing pattern: organizations created to solve
                problems often become dependent on those problems persisting. The tax prep industry lobbies against
                simpler tax filing. Private prisons lobby for longer sentences. Legacy systems prevent innovation.
            </p>
            <p class="key-insight">
                üîÑ THE PARADOX: The more successful an institution becomes at managing a problem,
                the more invested it becomes in ensuring that problem never fully goes away.
            </p>
        </div>

        <div class="simulation-container">
            <div class="sim-header">
                <h2>üèõÔ∏è Run Your Own Institution</h2>
                <p style="color: #888;">Choose an industry and see how incentives shape behavior</p>
            </div>

            <div class="industry-selector">
                <button class="industry-btn" data-industry="healthcare" onclick="selectIndustry('healthcare')">
                    <span class="industry-icon">üíä</span>
                    <span class="industry-name">Healthcare</span>
                </button>
                <button class="industry-btn" data-industry="tax" onclick="selectIndustry('tax')">
                    <span class="industry-icon">üìã</span>
                    <span class="industry-name">Tax Filing</span>
                </button>
                <button class="industry-btn" data-industry="prison" onclick="selectIndustry('prison')">
                    <span class="industry-icon">üèõÔ∏è</span>
                    <span class="industry-name">Private Prisons</span>
                </button>
                <button class="industry-btn" data-industry="consulting" onclick="selectIndustry('consulting')">
                    <span class="industry-icon">üíº</span>
                    <span class="industry-name">Consulting</span>
                </button>
                <button class="industry-btn" data-industry="security" onclick="selectIndustry('security')">
                    <span class="industry-icon">üîí</span>
                    <span class="industry-name">Cybersecurity</span>
                </button>
            </div>

            <div id="simulationArea" class="hidden">
                <div class="lifecycle-container">
                    <div class="lifecycle-track">
                        <div class="lifecycle-stage" id="stage1">üå±</div>
                        <div class="lifecycle-stage" id="stage2">üìà</div>
                        <div class="lifecycle-stage" id="stage3">üèÜ</div>
                        <div class="lifecycle-stage" id="stage4">‚ö†Ô∏è</div>
                        <div class="lifecycle-stage" id="stage5">üîÑ</div>
                    </div>
                    <div class="stage-labels">
                        <span>Founding</span>
                        <span>Growth</span>
                        <span>Dominance</span>
                        <span>Preservation</span>
                        <span>Entrenchment</span>
                    </div>
                </div>

                <div class="metrics-bar">
                    <div class="metric">
                        <div class="metric-value" id="problemSize" style="color: #ef4444;">100</div>
                        <div class="metric-label">Problem Severity</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="revenue" style="color: #4ade80;">$0M</div>
                        <div class="metric-label">Annual Revenue</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="dependency" style="color: #fbbf24;">0%</div>
                        <div class="metric-label">Problem Dependency</div>
                    </div>
                </div>

                <div class="scenario-panel" id="scenarioPanel">
                    <!-- Scenarios inserted here -->
                </div>

                <div class="result-reveal" id="resultReveal">
                    <!-- Results shown here -->
                </div>
            </div>
        </div>

        <div class="case-study">
            <h3>üêÄ The Hanoi Rat Massacre (1902)</h3>
            <p style="color: #ccc; margin-bottom: 15px;">
                French colonial officials in Hanoi offered a bounty for each rat tail brought in,
                hoping to reduce the rodent population. Watch what happened:
            </p>

            <div class="rat-animation" id="ratArena">
                <div class="bounty-counter">Bounties Paid: <span id="bountyCount">0</span></div>
            </div>

            <div class="rat-controls">
                <button class="rat-btn collect" onclick="collectBounty()">üéØ Collect Bounty (Kill Rat)</button>
                <button class="rat-btn breed" onclick="breedRats()">üêÄ Breed Rats for Tails</button>
            </div>

            <p id="ratMessage" style="text-align: center; margin-top: 15px; color: #fbbf24;"></p>

            <div class="result-reveal" id="ratResult">
                <p>
                    <strong style="color: #ef4444;">Historical Result:</strong> Vietnamese residents began
                    <em>breeding rats</em> to collect bounties. The rat population actually INCREASED.
                    The institution (the bounty system) preserved and amplified the very problem it was
                    designed to solve. This is a perfect Shirky Principle example‚Äîwhen your income depends
                    on a problem existing, you have incentive to perpetuate it.
                </p>
            </div>
        </div>

        <div class="insights-panel">
            <h3>üß† Why This Happens</h3>

            <div class="insight-item">
                <div class="insight-icon">üí∞</div>
                <div class="insight-text">
                    <h4>Perverse Incentives</h4>
                    <p>When your revenue depends on a problem existing, solving it completely would be
                    financial suicide. Chronic treatment pays more than cures.</p>
                </div>
            </div>

            <div class="insight-item">
                <div class="insight-icon">üèõÔ∏è</div>
                <div class="insight-text">
                    <h4>Institutional Self-Preservation</h4>
                    <p>Organizations develop self-preservation instincts. Jobs, reputations, and identities
                    become tied to the continued existence of the problem.</p>
                </div>
            </div>

            <div class="insight-item">
                <div class="insight-icon">‚öôÔ∏è</div>
                <div class="insight-text">
                    <h4>Complexity Creep</h4>
                    <p>Solutions become increasingly complex, creating dependency. Simple alternatives
                    are actively resisted‚ÄîTurboTax lobbying against IRS free filing is a prime example.</p>
                </div>
            </div>

            <div class="insight-item">
                <div class="insight-icon">üîç</div>
                <div class="insight-text">
                    <h4>The Cure: Cui Bono?</h4>
                    <p>Always ask: "Who benefits from this problem persisting?" Restructure incentives
                    to reward elimination, not management, of problems.</p>
                </div>
            </div>
        </div>

        <div class="quote-box">
            "Institutions will try to preserve the problem to which they are the solution."
            <div class="quote-author">‚Äî Clay Shirky, as quoted by Kevin Kelly (2010)</div>
        </div>

        <div class="results-panel" id="resultsPanel">
            <h2 style="color: #fbbf24; text-align: center; margin-bottom: 20px;">üìä Your Institution's Evolution</h2>
            <div id="finalAnalysis"></div>
            <button class="btn-primary" onclick="resetSimulation()">Run Another Industry</button>
        </div>
    </div>

    <script>
        const industries = {
            healthcare: {
                name: "HealthCure Pharmaceuticals",
                icon: "üíä",
                stages: [
                    {
                        title: "Year 1: The Founding",
                        text: "You've discovered a treatment for chronic pain that helps millions. Do you pursue:",
                        choices: [
                            { text: "A complete cure that eliminates the need for ongoing treatment", icon: "üíö", type: "solve", problemChange: -40, revenueChange: 50, dependencyChange: 0 },
                            { text: "A daily medication that manages symptoms effectively", icon: "üíä", type: "preserve", problemChange: -10, revenueChange: 100, dependencyChange: 25 }
                        ]
                    },
                    {
                        title: "Year 5: Market Dominance",
                        text: "Your treatment is successful. A competitor develops a cure. Your R&D team says you could also develop it. Do you:",
                        choices: [
                            { text: "Race to develop the cure, even though it ends your revenue stream", icon: "üèÉ", type: "solve", problemChange: -30, revenueChange: -30, dependencyChange: -10 },
                            { text: "Lobby regulators to slow the competitor's approval process", icon: "üìã", type: "preserve", problemChange: 5, revenueChange: 40, dependencyChange: 35 },
                            { text: "Acquire the competitor and shelve their cure", icon: "üíº", type: "preserve", problemChange: 10, revenueChange: 60, dependencyChange: 50 }
                        ]
                    },
                    {
                        title: "Year 10: The Crossroads",
                        text: "Internal research shows prevention programs could eliminate 80% of new cases. Do you:",
                        choices: [
                            { text: "Fund the prevention programs and pivot your business model", icon: "üå±", type: "solve", problemChange: -50, revenueChange: -40, dependencyChange: -30 },
                            { text: "Suppress the research and focus on 'awareness campaigns' that don't reduce cases", icon: "üì¢", type: "preserve", problemChange: 0, revenueChange: 20, dependencyChange: 40 }
                        ]
                    }
                ]
            },
            tax: {
                name: "EasyTax Solutions",
                icon: "üìã",
                stages: [
                    {
                        title: "Year 1: The Opportunity",
                        text: "Tax filing is complex. You create software that simplifies it. The government proposes free filing. Do you:",
                        choices: [
                            { text: "Support the initiative‚Äîsimpler is better for taxpayers", icon: "‚úÖ", type: "solve", problemChange: -40, revenueChange: -50, dependencyChange: 0 },
                            { text: "Lobby against it while claiming you support 'free market solutions'", icon: "üèõÔ∏è", type: "preserve", problemChange: 10, revenueChange: 80, dependencyChange: 40 }
                        ]
                    },
                    {
                        title: "Year 5: Complexity Rising",
                        text: "You've become essential. Congress is considering tax simplification. Your lobbyists report:",
                        choices: [
                            { text: "Support simplification‚Äîit's good for taxpayers", icon: "üìù", type: "solve", problemChange: -30, revenueChange: -40, dependencyChange: -20 },
                            { text: "Lobby for MORE complexity‚Äîjob security!", icon: "üìä", type: "preserve", problemChange: 30, revenueChange: 50, dependencyChange: 60 },
                            { text: "Stay neutral but prepare for either outcome", icon: "‚öñÔ∏è", type: "neutral", problemChange: 0, revenueChange: 10, dependencyChange: 20 }
                        ]
                    },
                    {
                        title: "Year 10: The IRS Direct File",
                        text: "The IRS announces free direct filing like most developed countries. Your revenue is threatened. Do you:",
                        choices: [
                            { text: "Pivot to other services and let taxpayers benefit", icon: "üîÑ", type: "solve", problemChange: -50, revenueChange: -60, dependencyChange: -40 },
                            { text: "Launch massive lobbying campaign and lawsuits", icon: "‚öîÔ∏è", type: "preserve", problemChange: 20, revenueChange: 30, dependencyChange: 80 }
                        ]
                    }
                ]
            },
            prison: {
                name: "SecureCorrections Inc.",
                icon: "üèõÔ∏è",
                stages: [
                    {
                        title: "Year 1: The Contract",
                        text: "You've won a contract to run state prisons more efficiently. You notice recidivism programs cut costs AND crime. Do you:",
                        choices: [
                            { text: "Invest heavily in rehabilitation‚Äîfewer return means less crime", icon: "üìö", type: "solve", problemChange: -30, revenueChange: 20, dependencyChange: 0 },
                            { text: "Focus on cost-cutting instead of rehabilitation", icon: "üí∞", type: "preserve", problemChange: 10, revenueChange: 40, dependencyChange: 30 }
                        ]
                    },
                    {
                        title: "Year 5: Legislative Influence",
                        text: "State legislators are considering sentencing reform that would reduce prison populations. Your shareholders want growth. Do you:",
                        choices: [
                            { text: "Support reform‚Äîless crime is the actual goal", icon: "‚úÖ", type: "solve", problemChange: -40, revenueChange: -30, dependencyChange: -20 },
                            { text: "Lobby for mandatory minimums and 'tough on crime' laws", icon: "‚öñÔ∏è", type: "preserve", problemChange: 30, revenueChange: 60, dependencyChange: 50 },
                            { text: "Stay neutral publicly while privately funding opposition", icon: "üé≠", type: "preserve", problemChange: 20, revenueChange: 40, dependencyChange: 40 }
                        ]
                    },
                    {
                        title: "Year 10: The Occupancy Clause",
                        text: "Your contracts include 90% occupancy guarantees‚Äîstates pay even for empty beds. Decriminalization movements are growing. Do you:",
                        choices: [
                            { text: "Support decriminalization and find new business models", icon: "üå±", type: "solve", problemChange: -50, revenueChange: -50, dependencyChange: -40 },
                            { text: "Enforce occupancy clauses and lobby against reform", icon: "üìã", type: "preserve", problemChange: 10, revenueChange: 20, dependencyChange: 70 }
                        ]
                    }
                ]
            },
            consulting: {
                name: "StrategyPartners LLC",
                icon: "üíº",
                stages: [
                    {
                        title: "Year 1: The First Client",
                        text: "A company hires you to fix their inefficient processes. You could provide training that makes them self-sufficient, or create ongoing dependency. Do you:",
                        choices: [
                            { text: "Train them to solve their own problems going forward", icon: "üìö", type: "solve", problemChange: -50, revenueChange: 30, dependencyChange: 0 },
                            { text: "Create solutions that require your ongoing support", icon: "üîÑ", type: "preserve", problemChange: -10, revenueChange: 80, dependencyChange: 40 }
                        ]
                    },
                    {
                        title: "Year 5: The Recommendation",
                        text: "You've identified that 80% of client issues stem from one simple fix. Publishing this insight would help everyone but reduce billable hours. Do you:",
                        choices: [
                            { text: "Publish the insight‚Äîbuild reputation over revenue", icon: "üìñ", type: "solve", problemChange: -40, revenueChange: -20, dependencyChange: -30 },
                            { text: "Keep it proprietary and sell expensive implementations", icon: "üîí", type: "preserve", problemChange: 0, revenueChange: 50, dependencyChange: 50 }
                        ]
                    },
                    {
                        title: "Year 10: Artificial Complexity",
                        text: "Your firm is now seen as essential. Simple solutions exist but your methodology is complex. A junior analyst suggests simplification. Do you:",
                        choices: [
                            { text: "Embrace simplification‚Äîclients deserve efficient solutions", icon: "‚ú®", type: "solve", problemChange: -30, revenueChange: -40, dependencyChange: -40 },
                            { text: "Maintain complexity‚Äîit justifies premium fees", icon: "üìä", type: "preserve", problemChange: 20, revenueChange: 30, dependencyChange: 60 }
                        ]
                    }
                ]
            },
            security: {
                name: "CyberShield Technologies",
                icon: "üîí",
                stages: [
                    {
                        title: "Year 1: The Vulnerability",
                        text: "You discover a fundamental vulnerability affecting millions. Fixing it would require a one-time update. Do you:",
                        choices: [
                            { text: "Develop a permanent fix and move on to other problems", icon: "üîß", type: "solve", problemChange: -50, revenueChange: 30, dependencyChange: 0 },
                            { text: "Create a monitoring service that detects attacks using this vulnerability", icon: "üëÅÔ∏è", type: "preserve", problemChange: -10, revenueChange: 80, dependencyChange: 35 }
                        ]
                    },
                    {
                        title: "Year 5: The Industry Conference",
                        text: "Security researchers want to publish findings that would eliminate whole categories of attacks. This would shrink your market. Do you:",
                        choices: [
                            { text: "Support open research‚Äîsecurity through transparency", icon: "üìñ", type: "solve", problemChange: -30, revenueChange: -20, dependencyChange: -20 },
                            { text: "Lobby for 'responsible disclosure' rules that slow public knowledge", icon: "ü§´", type: "preserve", problemChange: 10, revenueChange: 40, dependencyChange: 40 },
                            { text: "Quietly fund research into NEW attack vectors", icon: "üî¨", type: "preserve", problemChange: 30, revenueChange: 60, dependencyChange: 60 }
                        ]
                    },
                    {
                        title: "Year 10: Perfect Security?",
                        text: "A new architecture could eliminate 90% of cyber threats. Your entire product line would be obsolete. Do you:",
                        choices: [
                            { text: "Champion the new architecture‚Äîsecurity matters more than profits", icon: "üõ°Ô∏è", type: "solve", problemChange: -60, revenueChange: -60, dependencyChange: -50 },
                            { text: "Publicly support it while privately undermining adoption", icon: "üé≠", type: "preserve", problemChange: 0, revenueChange: 20, dependencyChange: 70 }
                        ]
                    }
                ]
            }
        };

        let currentIndustry = null;
        let currentStage = 0;
        let problem = 100;
        let revenue = 0;
        let dependency = 0;
        let choices = [];
        let ratCount = 5;
        let bountyPaid = 0;
        let breedingDiscovered = false;

        function selectIndustry(id) {
            currentIndustry = industries[id];
            currentStage = 0;
            problem = 100;
            revenue = 0;
            dependency = 0;
            choices = [];

            document.querySelectorAll('.industry-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-industry="${id}"]`).classList.add('active');

            document.getElementById('simulationArea').classList.remove('hidden');
            document.getElementById('resultsPanel').style.display = 'none';

            updateLifecycleStages();
            showScenario();
        }

        function updateLifecycleStages() {
            for (let i = 1; i <= 5; i++) {
                const stage = document.getElementById(`stage${i}`);
                stage.classList.remove('active', 'complete', 'corrupt');
                if (i <= currentStage) {
                    stage.classList.add(dependency > 50 ? 'corrupt' : 'complete');
                } else if (i === currentStage + 1) {
                    stage.classList.add('active');
                }
            }
        }

        function updateMetrics() {
            document.getElementById('problemSize').textContent = Math.max(0, problem);
            document.getElementById('revenue').textContent = `$${revenue}M`;
            document.getElementById('dependency').textContent = `${Math.min(100, dependency)}%`;
        }

        function showScenario() {
            if (currentStage >= currentIndustry.stages.length) {
                showResults();
                return;
            }

            const stage = currentIndustry.stages[currentStage];
            const html = `
                <div class="scenario-title">${stage.title}</div>
                <p class="scenario-text">${stage.text}</p>
                <div class="choices">
                    ${stage.choices.map((choice, i) => `
                        <button class="choice-btn" onclick="makeChoice(${i})">
                            <span class="choice-icon">${choice.icon}</span>
                            <span>${choice.text}</span>
                        </button>
                    `).join('')}
                </div>
            `;
            document.getElementById('scenarioPanel').innerHTML = html;
            document.getElementById('resultReveal').classList.remove('show');
            updateMetrics();
        }

        function makeChoice(index) {
            const stage = currentIndustry.stages[currentStage];
            const choice = stage.choices[index];
            choices.push(choice);

            // Apply effects
            problem += choice.problemChange;
            revenue += choice.revenueChange;
            dependency += choice.dependencyChange;

            // Visual feedback
            const buttons = document.querySelectorAll('.choice-btn');
            buttons.forEach((btn, i) => {
                btn.disabled = true;
                if (i === index) {
                    btn.classList.add(choice.type === 'solve' ? 'selected-good' : 'selected-bad');
                }
            });

            // Show result
            const resultHtml = `
                <p style="color: ${choice.type === 'solve' ? '#4ade80' : '#ef4444'}; margin-bottom: 10px;">
                    <strong>${choice.type === 'solve' ? '‚úì Problem-Solving Choice' : '‚ö† Problem-Preserving Choice'}</strong>
                </p>
                <p style="color: #ccc;">
                    ${choice.type === 'solve'
                        ? 'You chose to address the root cause. Revenue may suffer, but the actual problem decreases.'
                        : 'You chose institutional preservation. Revenue grows, but you become dependent on the problem persisting.'}
                </p>
            `;
            document.getElementById('resultReveal').innerHTML = resultHtml;
            document.getElementById('resultReveal').classList.add('show');

            updateMetrics();

            setTimeout(() => {
                currentStage++;
                updateLifecycleStages();
                showScenario();
            }, 2500);
        }

        function showResults() {
            document.getElementById('resultsPanel').style.display = 'block';

            const solveCount = choices.filter(c => c.type === 'solve').length;
            const preserveCount = choices.filter(c => c.type === 'preserve').length;

            let analysis = '';
            if (solveCount >= preserveCount) {
                analysis = `
                    <div style="text-align: center; margin-bottom: 20px;">
                        <span style="font-size: 3em;">üåü</span>
                        <h3 style="color: #4ade80;">Problem Solver</h3>
                    </div>
                    <p style="color: #ccc; line-height: 1.8;">
                        You resisted the Shirky Principle! You prioritized actually solving problems over
                        institutional self-preservation. Your revenue is lower ($${revenue}M), but the
                        problem severity dropped to ${Math.max(0, problem)}. This is rare‚Äîmost institutions
                        succumb to the incentive to preserve problems.
                    </p>
                `;
            } else if (dependency > 60) {
                analysis = `
                    <div style="text-align: center; margin-bottom: 20px;">
                        <span style="font-size: 3em;">‚ö†Ô∏è</span>
                        <h3 style="color: #ef4444;">Full Entrenchment</h3>
                    </div>
                    <p style="color: #ccc; line-height: 1.8;">
                        Your ${currentIndustry.name} is now fully dependent on the problem persisting.
                        With ${dependency}% problem dependency and $${revenue}M in revenue, you've become
                        exactly what the Shirky Principle describes: an institution that will fight to
                        preserve the problem it was created to solve. The problem severity is now ${problem}.
                    </p>
                `;
            } else {
                analysis = `
                    <div style="text-align: center; margin-bottom: 20px;">
                        <span style="font-size: 3em;">üìä</span>
                        <h3 style="color: #fbbf24;">Moderate Capture</h3>
                    </div>
                    <p style="color: #ccc; line-height: 1.8;">
                        Your institution shows signs of the Shirky Principle. With ${dependency}% problem
                        dependency, you've balanced revenue ($${revenue}M) against actual problem-solving.
                        The problem severity stands at ${problem}. You're not fully captured, but the
                        incentives are pulling you toward preservation over solution.
                    </p>
                `;
            }

            document.getElementById('finalAnalysis').innerHTML = analysis;
        }

        function resetSimulation() {
            document.querySelectorAll('.industry-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById('simulationArea').classList.add('hidden');
            document.getElementById('resultsPanel').style.display = 'none';
        }

        // Rat experiment
        function initRats() {
            const arena = document.getElementById('ratArena');
            arena.innerHTML = '<div class="bounty-counter">Bounties Paid: <span id="bountyCount">0</span></div>';

            for (let i = 0; i < ratCount; i++) {
                addRat();
            }
        }

        function addRat() {
            const arena = document.getElementById('ratArena');
            const rat = document.createElement('div');
            rat.className = 'rat';
            rat.textContent = 'üêÄ';
            rat.style.left = `${Math.random() * 80 + 10}%`;
            rat.style.top = `${Math.random() * 70 + 15}%`;
            arena.appendChild(rat);
        }

        function collectBounty() {
            const rats = document.querySelectorAll('.rat');
            if (rats.length > 0) {
                rats[rats.length - 1].remove();
                bountyPaid++;
                document.getElementById('bountyCount').textContent = bountyPaid;
                document.getElementById('ratMessage').textContent = `+1 bounty collected! (${rats.length - 1} rats remaining)`;

                if (rats.length <= 1) {
                    document.getElementById('ratMessage').textContent = "Rats nearly eliminated! But wait...";
                }
            }
        }

        function breedRats() {
            if (!breedingDiscovered) {
                breedingDiscovered = true;
                document.getElementById('ratResult').classList.add('show');
            }

            for (let i = 0; i < 3; i++) {
                addRat();
            }
            bountyPaid += 3;
            document.getElementById('bountyCount').textContent = bountyPaid;
            document.getElementById('ratMessage').textContent = `+3 rats bred for tails! The bounty system now INCENTIVIZES more rats!`;
        }

        // Initialize
        initRats();
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
