<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Return Trip Effect - Surprising Paradoxes</title>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --sage: #8A9A5B;
            --moss: #606C38;
            --earth: #DDA15E;
            --cream: #FEFAE0;
            --terracotta: #BC6C25;
            --dark-moss: #3d4423;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, var(--cream) 0%, #F4F1DE 50%, #EDE8D5 100%);
            min-height: 100vh;
            padding: 20px;
            color: var(--dark-moss);
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--moss);
            text-decoration: none;
            font-weight: 600;
            margin-bottom: 20px;
            transition: color 0.3s ease;
        }

        .back-link:hover {
            color: var(--terracotta);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            font-family: 'Lora', serif;
            font-size: 2.5rem;
            color: var(--moss);
            margin-bottom: 10px;
            text-align: center;
        }

        .subtitle {
            text-align: center;
            color: var(--dark-moss);
            opacity: 0.8;
            margin-bottom: 30px;
            font-size: 1.1rem;
        }

        .card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
        }

        h2 {
            font-family: 'Lora', serif;
            color: var(--moss);
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        h3 {
            font-family: 'Lora', serif;
            color: var(--terracotta);
            margin: 20px 0 10px;
            font-size: 1.2rem;
        }

        p {
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .highlight {
            background: linear-gradient(120deg, rgba(221, 161, 94, 0.3) 0%, rgba(138, 154, 91, 0.3) 100%);
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: 600;
        }

        /* Trip Animation Container */
        .trip-simulation {
            position: relative;
            width: 100%;
            height: 300px;
            background: linear-gradient(180deg, #87CEEB 0%, #87CEEB 60%, #90EE90 60%, #228B22 100%);
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }

        .road {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 80px;
            background: #444;
        }

        .road-line {
            position: absolute;
            top: 35px;
            height: 10px;
            background: white;
            animation: roadMove 0.5s linear infinite;
        }

        @keyframes roadMove {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100px); }
        }

        .car {
            position: absolute;
            bottom: 25px;
            width: 80px;
            height: 40px;
            transition: left 0.5s ease;
        }

        .car-body {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--terracotta), #e74c3c);
            border-radius: 10px 10px 5px 5px;
            position: relative;
        }

        .car-window {
            position: absolute;
            top: 5px;
            left: 15px;
            right: 15px;
            height: 15px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 5px 5px 0 0;
        }

        .car-wheel {
            position: absolute;
            bottom: -8px;
            width: 16px;
            height: 16px;
            background: #333;
            border-radius: 50%;
            border: 3px solid #666;
        }

        .car-wheel.front { left: 10px; }
        .car-wheel.back { right: 10px; }

        .destination-marker {
            position: absolute;
            bottom: 90px;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--moss);
            background: white;
            padding: 5px 15px;
            border-radius: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }

        .destination-marker.start { left: 20px; }
        .destination-marker.end { right: 20px; }

        .sun {
            position: absolute;
            top: 30px;
            right: 60px;
            width: 60px;
            height: 60px;
            background: #FFD700;
            border-radius: 50%;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.6);
        }

        .cloud {
            position: absolute;
            background: white;
            border-radius: 50px;
            opacity: 0.9;
        }

        .cloud::before, .cloud::after {
            content: '';
            position: absolute;
            background: white;
            border-radius: 50%;
        }

        .cloud-1 {
            top: 40px;
            left: 80px;
            width: 80px;
            height: 30px;
        }
        .cloud-1::before { width: 40px; height: 40px; top: -20px; left: 10px; }
        .cloud-1::after { width: 50px; height: 50px; top: -25px; left: 30px; }

        .cloud-2 {
            top: 60px;
            left: 200px;
            width: 60px;
            height: 25px;
        }
        .cloud-2::before { width: 30px; height: 30px; top: -15px; left: 5px; }
        .cloud-2::after { width: 40px; height: 40px; top: -20px; left: 20px; }

        /* Timer Display */
        .timer-display {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .timer-box {
            text-align: center;
            padding: 20px 30px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            min-width: 150px;
        }

        .timer-value {
            font-size: 2.5rem;
            font-weight: 700;
            font-family: 'Lora', serif;
            color: var(--moss);
        }

        .timer-label {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-top: 5px;
        }

        .timer-perceived {
            font-size: 1.2rem;
            color: var(--terracotta);
            font-weight: 600;
            margin-top: 5px;
        }

        /* Controls */
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-family: 'Nunito', sans-serif;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--moss) 0%, var(--sage) 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(96, 108, 56, 0.4);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Progress Bar */
        .progress-container {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            margin: 15px 0;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--sage), var(--terracotta));
            border-radius: 4px;
            transition: width 0.1s linear;
        }

        /* Phase Indicator */
        .phase-indicator {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }

        .phase {
            padding: 10px 25px;
            border-radius: 20px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .phase.outbound {
            background: rgba(138, 154, 91, 0.2);
            color: var(--moss);
        }

        .phase.return {
            background: rgba(188, 108, 37, 0.2);
            color: var(--terracotta);
        }

        .phase.active {
            transform: scale(1.1);
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.2);
        }

        .phase.outbound.active {
            background: var(--moss);
            color: white;
        }

        .phase.return.active {
            background: var(--terracotta);
            color: white;
        }

        /* Expectation Slider */
        .expectation-section {
            margin: 25px 0;
        }

        .expectation-question {
            font-weight: 600;
            margin-bottom: 15px;
            text-align: center;
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .slider-label {
            font-size: 0.85rem;
            min-width: 80px;
            text-align: center;
        }

        input[type="range"] {
            flex: 1;
            height: 8px;
            border-radius: 4px;
            background: linear-gradient(90deg, var(--sage), var(--terracotta));
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: white;
            border: 3px solid var(--moss);
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        /* Results Display */
        .results-panel {
            background: linear-gradient(135deg, rgba(138, 154, 91, 0.15) 0%, rgba(221, 161, 94, 0.15) 100%);
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
        }

        .result-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .result-row:last-child {
            border-bottom: none;
        }

        .result-label {
            font-weight: 600;
        }

        .result-value {
            color: var(--terracotta);
            font-weight: 700;
        }

        /* Theory Section */
        .theory-flow {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin: 20px 0;
        }

        .theory-step {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
        }

        .step-number {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.5rem;
            color: white;
            flex-shrink: 0;
        }

        .step-number.outbound { background: var(--moss); }
        .step-number.return { background: var(--terracotta); }

        .step-content h4 {
            color: var(--moss);
            margin-bottom: 5px;
        }

        /* Studies Grid */
        .studies-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .study-card {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }

        .study-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .study-title {
            font-family: 'Lora', serif;
            color: var(--moss);
            font-weight: 600;
            margin-bottom: 8px;
        }

        .study-result {
            font-size: 2rem;
            font-weight: 700;
            color: var(--terracotta);
            margin: 10px 0;
        }

        .study-desc {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        /* Message */
        .message {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-weight: 600;
        }

        .message.info {
            background: rgba(138, 154, 91, 0.2);
            color: var(--moss);
        }

        .message.result {
            background: rgba(221, 161, 94, 0.2);
            color: var(--terracotta);
        }

        @media (max-width: 600px) {
            h1 { font-size: 1.8rem; }
            .timer-display { gap: 15px; }
            .timer-box { padding: 15px 20px; min-width: 120px; }
            .timer-value { font-size: 1.8rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">‚Üê Back to Surprising Paradoxes</a>

        <h1>The Return Trip Effect</h1>
        <p class="subtitle">Why Does the Journey Home Always Feel Shorter?</p>

        <div class="card">
            <h2>The Universal Experience</h2>
            <p>
                You're on a road trip to somewhere new. The drive there feels <em>endless</em>.
                But when you head home, somehow the same distance flies by. Hours feel like minutes.
                You check the map, confused‚Äîit's the <span class="highlight">exact same route</span>.
            </p>
            <p>
                Van de Ven, Roy, and van Rijswijk (2011) proved this isn't just imagination:
                participants consistently rated return trips as <span class="highlight">22% shorter</span>
                than outbound trips‚Äîeven when the actual travel time was identical.
            </p>
            <p>
                Most surprisingly, the effect persists <strong>even when you take a completely
                different route home</strong>. Familiarity isn't the cause.
            </p>
        </div>

        <div class="card">
            <h2>Experience the Effect</h2>
            <p>
                You're about to take a virtual trip. Watch the car travel, then estimate
                how long each leg took. The simulation runs for the <strong>exact same duration</strong>
                in both directions, but your perception will tell a different story.
            </p>

            <div class="phase-indicator">
                <div class="phase outbound" id="phaseOutbound">‚Üí Outbound Trip</div>
                <div class="phase return" id="phaseReturn">‚Üê Return Trip</div>
            </div>

            <div class="trip-simulation" id="tripScene">
                <div class="sun"></div>
                <div class="cloud cloud-1"></div>
                <div class="cloud cloud-2"></div>
                <div class="destination-marker start" id="markerStart">üè† HOME</div>
                <div class="destination-marker end" id="markerEnd">üìç DEST</div>
                <div class="road">
                    <div class="road-line" style="left: 0; width: 50px;"></div>
                    <div class="road-line" style="left: 100px; width: 50px;"></div>
                    <div class="road-line" style="left: 200px; width: 50px;"></div>
                    <div class="road-line" style="left: 300px; width: 50px;"></div>
                    <div class="road-line" style="left: 400px; width: 50px;"></div>
                    <div class="road-line" style="left: 500px; width: 50px;"></div>
                    <div class="road-line" style="left: 600px; width: 50px;"></div>
                    <div class="road-line" style="left: 700px; width: 50px;"></div>
                    <div class="road-line" style="left: 800px; width: 50px;"></div>
                </div>
                <div class="car" id="car">
                    <div class="car-body">
                        <div class="car-window"></div>
                        <div class="car-wheel front"></div>
                        <div class="car-wheel back"></div>
                    </div>
                </div>
            </div>

            <div class="progress-container">
                <div class="progress-bar" id="progressBar" style="width: 0%"></div>
            </div>

            <div class="timer-display">
                <div class="timer-box">
                    <div class="timer-value" id="actualTime">0:00</div>
                    <div class="timer-label">Actual Time</div>
                </div>
                <div class="timer-box" id="outboundBox">
                    <div class="timer-value" id="outboundTime">-</div>
                    <div class="timer-label">Outbound Perceived</div>
                    <div class="timer-perceived" id="outboundDiff"></div>
                </div>
                <div class="timer-box" id="returnBox">
                    <div class="timer-value" id="returnTime">-</div>
                    <div class="timer-label">Return Perceived</div>
                    <div class="timer-perceived" id="returnDiff"></div>
                </div>
            </div>

            <div class="expectation-section" id="expectationSection" style="display: none;">
                <div class="expectation-question" id="expectationQuestion">
                    Before starting: How long do you think this trip will take?
                </div>
                <div class="slider-container">
                    <span class="slider-label">Very Short</span>
                    <input type="range" id="expectationSlider" min="1" max="10" value="5">
                    <span class="slider-label">Very Long</span>
                </div>
                <div style="text-align: center; margin-top: 10px;">
                    Your expectation: <strong id="expectationValue">5</strong>/10
                </div>
            </div>

            <div class="controls">
                <button class="btn btn-primary" id="startBtn" onclick="startTrip()">
                    BEGIN OUTBOUND TRIP
                </button>
            </div>

            <div class="message info" id="gameMessage" style="display: none;"></div>

            <div class="results-panel" id="resultsPanel" style="display: none;">
                <h3 style="text-align: center; margin-bottom: 15px;">Your Results</h3>
                <div class="result-row">
                    <span class="result-label">Actual Trip Duration:</span>
                    <span class="result-value" id="resultActual">-</span>
                </div>
                <div class="result-row">
                    <span class="result-label">Outbound Felt Like:</span>
                    <span class="result-value" id="resultOutbound">-</span>
                </div>
                <div class="result-row">
                    <span class="result-label">Return Felt Like:</span>
                    <span class="result-value" id="resultReturn">-</span>
                </div>
                <div class="result-row">
                    <span class="result-label">Perceived Difference:</span>
                    <span class="result-value" id="resultDiff">-</span>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>The Psychology: It's All About Expectations</h2>
            <p>
                The key insight from Van de Ven's research is that the return trip effect
                isn't caused by <strong>familiarity with the route</strong>‚Äîit persists even
                when you take a different path home!
            </p>

            <div class="theory-flow">
                <div class="theory-step">
                    <div class="step-number outbound">1</div>
                    <div class="step-content">
                        <h4>Optimistic Departure</h4>
                        <p>
                            We start journeys with <strong>overly optimistic</strong> expectations.
                            "This won't take long!" But reality disappoints.
                        </p>
                    </div>
                </div>
                <div class="theory-step">
                    <div class="step-number outbound">2</div>
                    <div class="step-content">
                        <h4>Violated Expectations</h4>
                        <p>
                            The outbound trip feels longer because it <strong>exceeds our expectation</strong>.
                            "Wow, that took forever!"
                        </p>
                    </div>
                </div>
                <div class="theory-step">
                    <div class="step-number return">3</div>
                    <div class="step-content">
                        <h4>Pessimistic Return</h4>
                        <p>
                            Based on the "disappointing" outbound experience, we now expect
                            the return to be <strong>just as long</strong>.
                        </p>
                    </div>
                </div>
                <div class="theory-step">
                    <div class="step-number return">4</div>
                    <div class="step-content">
                        <h4>Pleasant Surprise</h4>
                        <p>
                            The return trip <strong>beats our pessimistic expectation</strong>.
                            "That wasn't so bad!" Same time, different perception.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>The Research: Three Studies, One Effect</h2>
            <div class="studies-grid">
                <div class="study-card">
                    <div class="study-icon">üöå</div>
                    <div class="study-title">Study 1: Bus Trip</div>
                    <div class="study-result">22%</div>
                    <div class="study-desc">
                        Participants on a real bus journey rated the return
                        as 22% shorter on average
                    </div>
                </div>
                <div class="study-card">
                    <div class="study-icon">üö¥</div>
                    <div class="study-title">Study 2: Bicycle Trip</div>
                    <div class="study-result">17%</div>
                    <div class="study-desc">
                        Cyclists experienced the effect even when taking
                        a completely different route back
                    </div>
                </div>
                <div class="study-card">
                    <div class="study-icon">üì∫</div>
                    <div class="study-title">Study 3: Video Watching</div>
                    <div class="study-result">19%</div>
                    <div class="study-desc">
                        Effect persists even watching someone ELSE travel‚Äî
                        no physical movement needed!
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>When the Effect Disappears</h2>
            <div class="studies-grid">
                <div class="study-card" style="border: 2px solid var(--terracotta);">
                    <div class="study-icon">üîÑ</div>
                    <div class="study-title">Daily Commutes</div>
                    <div class="study-desc">
                        With repetition, your time expectations become
                        accurate. No surprise = no effect.
                    </div>
                </div>
                <div class="study-card" style="border: 2px solid var(--terracotta);">
                    <div class="study-icon">ü¶∑</div>
                    <div class="study-title">Dreaded Destinations</div>
                    <div class="study-desc">
                        Going somewhere unpleasant (dentist)? You arrive
                        too soon. The return feels longer!
                    </div>
                </div>
                <div class="study-card" style="border: 2px solid var(--terracotta);">
                    <div class="study-icon">‚è±Ô∏è</div>
                    <div class="study-title">Clock-Watching</div>
                    <div class="study-desc">
                        Actively timing yourself overrides subjective
                        perception with objective measurement.
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>The Broader Lesson</h2>
            <p>
                The return trip effect reveals something profound about <span class="highlight">
                how we experience time</span>. Our subjective sense of duration isn't a neutral
                stopwatch‚Äîit's filtered through expectations, emotions, and memory.
            </p>

            <h3>Related Time Illusions</h3>
            <ul style="line-height: 2; padding-left: 20px;">
                <li><strong>Vacation Paradox:</strong> Vacations feel long while living them, short in retrospect</li>
                <li><strong>Waiting Room Effect:</strong> Anticipated time feels longer than equivalent busy time</li>
                <li><strong>Chronostasis:</strong> When you look at a clock, the first second seems to last longer</li>
                <li><strong>Kappa Effect:</strong> Longer distances make time feel longer</li>
            </ul>

            <blockquote style="border-left: 4px solid var(--moss); padding-left: 20px; margin: 20px 0; font-style: italic;">
                "Often we see that people are too optimistic when they start to travel.
                For the return trip, the expectation is likely to be based on the experience
                of the (disappointingly long) initial trip."
                <br><br>
                ‚Äî Niels van de Ven, 2011
            </blockquote>
        </div>

        <div class="card" style="text-align: center; background: linear-gradient(135deg, rgba(138, 154, 91, 0.2) 0%, rgba(221, 161, 94, 0.2) 100%);">
            <h2>The Takeaway</h2>
            <p style="font-size: 1.1rem;">
                The return trip effect isn't about the road‚Äîit's about <strong>your mind</strong>.
                The same objective duration can feel wildly different depending on whether it
                <span class="highlight">exceeds or beats your expectations</span>.
            </p>
            <p style="font-size: 1.1rem; margin-top: 20px;">
                Next time you're on a journey, remember: the trip home <em>will</em> feel shorter.
                Not because you're traveling faster, but because you finally expect the worst‚Äî
                and reality pleasantly surprises you.
            </p>
        </div>
    </div>

    <script>
        // Game state
        let phase = 'waiting'; // waiting, outbound, rating-outbound, return, rating-return, complete
        let tripDuration = 12000; // 12 seconds
        let startTime = 0;
        let elapsedTime = 0;
        let animationId = null;

        let outboundExpectation = 5;
        let returnExpectation = 5;
        let outboundPerceived = 0;
        let returnPerceived = 0;

        const slider = document.getElementById('expectationSlider');
        slider.addEventListener('input', function() {
            document.getElementById('expectationValue').textContent = this.value;
            if (phase === 'waiting') {
                outboundExpectation = parseInt(this.value);
            } else if (phase === 'rating-outbound') {
                outboundPerceived = parseInt(this.value);
            } else if (phase === 'rating-return') {
                returnPerceived = parseInt(this.value);
            }
        });

        function startTrip() {
            if (phase === 'waiting') {
                // Start outbound trip
                phase = 'outbound';
                startTime = Date.now();

                document.getElementById('startBtn').disabled = true;
                document.getElementById('startBtn').textContent = 'TRAVELING...';
                document.getElementById('expectationSection').style.display = 'none';
                document.getElementById('phaseOutbound').classList.add('active');

                // Flip car to face right
                document.getElementById('car').style.transform = 'scaleX(1)';
                document.getElementById('car').style.left = '20px';

                animateTrip('outbound');

            } else if (phase === 'rating-outbound') {
                // Record outbound perception and start return
                outboundPerceived = parseInt(slider.value);

                document.getElementById('outboundTime').textContent = outboundPerceived + '/10';
                updateDiff('outbound');

                phase = 'return';
                startTime = Date.now();

                document.getElementById('startBtn').disabled = true;
                document.getElementById('startBtn').textContent = 'TRAVELING...';
                document.getElementById('expectationSection').style.display = 'none';
                document.getElementById('phaseOutbound').classList.remove('active');
                document.getElementById('phaseReturn').classList.add('active');
                document.getElementById('gameMessage').style.display = 'none';

                // Flip car to face left
                const car = document.getElementById('car');
                const scene = document.getElementById('tripScene');
                car.style.transform = 'scaleX(-1)';
                car.style.left = (scene.offsetWidth - 100) + 'px';

                // Swap markers
                document.getElementById('markerStart').innerHTML = 'üìç DEST';
                document.getElementById('markerEnd').innerHTML = 'üè† HOME';

                animateTrip('return');

            } else if (phase === 'rating-return') {
                // Complete!
                returnPerceived = parseInt(slider.value);

                document.getElementById('returnTime').textContent = returnPerceived + '/10';
                updateDiff('return');

                phase = 'complete';
                document.getElementById('expectationSection').style.display = 'none';
                document.getElementById('gameMessage').style.display = 'none';
                document.getElementById('startBtn').style.display = 'none';

                showResults();
            }
        }

        function animateTrip(direction) {
            const car = document.getElementById('car');
            const scene = document.getElementById('tripScene');
            const progressBar = document.getElementById('progressBar');
            const sceneWidth = scene.offsetWidth;

            function update() {
                const now = Date.now();
                elapsedTime = now - startTime;
                const progress = Math.min(elapsedTime / tripDuration, 1);

                // Update timer
                const secs = Math.floor(elapsedTime / 1000);
                const mins = Math.floor(secs / 60);
                document.getElementById('actualTime').textContent =
                    mins + ':' + (secs % 60).toString().padStart(2, '0');

                // Update progress bar
                progressBar.style.width = (progress * 100) + '%';

                // Move car
                if (direction === 'outbound') {
                    car.style.left = (20 + progress * (sceneWidth - 120)) + 'px';
                } else {
                    car.style.left = ((sceneWidth - 100) - progress * (sceneWidth - 120)) + 'px';
                }

                if (progress < 1) {
                    animationId = requestAnimationFrame(update);
                } else {
                    // Trip complete
                    if (direction === 'outbound') {
                        phase = 'rating-outbound';
                        showRatingPhase('outbound');
                    } else {
                        phase = 'rating-return';
                        showRatingPhase('return');
                    }
                }
            }

            animationId = requestAnimationFrame(update);
        }

        function showRatingPhase(direction) {
            document.getElementById('startBtn').disabled = false;

            if (direction === 'outbound') {
                document.getElementById('expectationQuestion').textContent =
                    'How long did that trip FEEL? (Same scale as before)';
                document.getElementById('startBtn').textContent = 'SUBMIT & START RETURN';
                document.getElementById('gameMessage').textContent =
                    'The outbound trip is complete! Rate how long it felt.';
            } else {
                document.getElementById('expectationQuestion').textContent =
                    'How long did the RETURN trip feel?';
                document.getElementById('startBtn').textContent = 'SEE RESULTS';
                document.getElementById('gameMessage').textContent =
                    'The return trip is complete! Rate how long it felt.';
            }

            slider.value = 5;
            document.getElementById('expectationValue').textContent = '5';
            document.getElementById('expectationSection').style.display = 'block';
            document.getElementById('gameMessage').style.display = 'block';
            document.getElementById('gameMessage').className = 'message info';
        }

        function updateDiff(direction) {
            const baseTime = tripDuration / 1000;
            let perceived, diffEl;

            if (direction === 'outbound') {
                perceived = outboundPerceived;
                diffEl = document.getElementById('outboundDiff');
            } else {
                perceived = returnPerceived;
                diffEl = document.getElementById('returnDiff');
            }

            // Convert 1-10 scale to percentage relative to "5 = accurate"
            const deviation = ((perceived - 5) / 5) * 100;

            if (deviation > 0) {
                diffEl.textContent = `+${Math.round(deviation)}% longer`;
            } else if (deviation < 0) {
                diffEl.textContent = `${Math.round(deviation)}% shorter`;
            } else {
                diffEl.textContent = 'Accurate';
            }
        }

        function showResults() {
            const panel = document.getElementById('resultsPanel');
            panel.style.display = 'block';

            document.getElementById('resultActual').textContent = '12 seconds (both trips)';
            document.getElementById('resultOutbound').textContent = outboundPerceived + '/10 on scale';
            document.getElementById('resultReturn').textContent = returnPerceived + '/10 on scale';

            const diff = outboundPerceived - returnPerceived;
            let diffText;
            if (diff > 0) {
                const pct = Math.round((diff / outboundPerceived) * 100);
                diffText = `Return felt ${pct}% shorter!`;
            } else if (diff < 0) {
                diffText = 'Unusual: Return felt LONGER';
            } else {
                diffText = 'No difference perceived';
            }
            document.getElementById('resultDiff').textContent = diffText;

            // Show interpretation
            const msg = document.getElementById('gameMessage');
            if (diff > 0) {
                msg.textContent = `You experienced the Return Trip Effect! Despite identical travel times, the return felt ${diff} points shorter on your scale.`;
                msg.className = 'message result';
            } else if (diff < 0) {
                msg.textContent = `Interesting! You experienced a reverse effect‚Äîperhaps you were dreading the return?`;
                msg.className = 'message result';
            } else {
                msg.textContent = `You rated both trips identically‚Äîyou may have been consciously timing yourself!`;
                msg.className = 'message info';
            }
            msg.style.display = 'block';
        }

        // Initialize
        document.getElementById('expectationSection').style.display = 'block';
    </script>
</body>
</html>
