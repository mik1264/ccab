<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>675 - Parrondo's Paradox | Surprising Paradoxes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a3e 50%, #2d1b4e 100%);
            color: #e8e8e8;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 20px 0 30px;
        }

        h1 {
            font-size: 2.4rem;
            background: linear-gradient(135deg, #f39c12 0%, #e74c3c 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.1rem;
            color: #a8a8a8;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .main-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 1.4rem;
            color: #f39c12;
            margin-bottom: 20px;
            text-align: center;
        }

        .games-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .game-card {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
            border: 2px solid transparent;
        }

        .game-card.losing { border-color: #e74c3c; }
        .game-card.winning { border-color: #27ae60; }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .game-name {
            font-size: 1.3rem;
            font-weight: bold;
        }

        .game-name.a { color: #3498db; }
        .game-name.b { color: #9b59b6; }
        .game-name.combo { color: #f39c12; }

        .game-status {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
        }

        .game-status.losing {
            background: rgba(231, 76, 60, 0.2);
            color: #e74c3c;
        }

        .game-status.winning {
            background: rgba(39, 174, 96, 0.2);
            color: #27ae60;
        }

        .game-rules {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .game-rules code {
            background: rgba(255, 255, 255, 0.1);
            padding: 2px 6px;
            border-radius: 4px;
            color: #f39c12;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .stat-row:last-child { border-bottom: none; }

        .stat-label { color: #888; }
        .stat-value { font-weight: bold; }
        .stat-value.positive { color: #27ae60; }
        .stat-value.negative { color: #e74c3c; }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        .btn {
            padding: 12px 25px;
            font-size: 1rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #f39c12, #e74c3c);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(243, 156, 18, 0.4);
        }

        .btn-secondary {
            background: rgba(255,255,255,0.1);
            color: #e8e8e8;
            border: 2px solid #f39c12;
        }

        .btn-secondary:hover {
            background: rgba(243, 156, 18, 0.2);
        }

        .btn-game {
            padding: 10px 20px;
            border-radius: 8px;
            border: 2px solid;
            background: transparent;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .btn-game.a {
            border-color: #3498db;
            color: #3498db;
        }

        .btn-game.a:hover {
            background: rgba(52, 152, 219, 0.2);
        }

        .btn-game.b {
            border-color: #9b59b6;
            color: #9b59b6;
        }

        .btn-game.b:hover {
            background: rgba(155, 89, 182, 0.2);
        }

        .canvas-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 15px;
            margin-top: 20px;
        }

        canvas {
            display: block;
            margin: 0 auto;
            border-radius: 8px;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        .legend-color {
            width: 20px;
            height: 4px;
            border-radius: 2px;
        }

        .strategy-selector {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        .strategy-btn {
            padding: 10px 18px;
            border: 2px solid #444;
            background: rgba(0,0,0,0.2);
            color: #888;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }

        .strategy-btn:hover, .strategy-btn.active {
            border-color: #f39c12;
            color: #f39c12;
            background: rgba(243, 156, 18, 0.1);
        }

        .current-state {
            text-align: center;
            padding: 20px;
            background: rgba(0,0,0,0.2);
            border-radius: 12px;
            margin: 20px 0;
        }

        .capital-display {
            font-size: 3rem;
            font-weight: bold;
            margin: 10px 0;
        }

        .capital-display.positive { color: #27ae60; }
        .capital-display.negative { color: #e74c3c; }
        .capital-display.neutral { color: #f39c12; }

        .round-info {
            color: #888;
            font-size: 0.95rem;
        }

        .explanation {
            background: linear-gradient(135deg, rgba(243, 156, 18, 0.1), rgba(231, 76, 60, 0.05));
            border-left: 4px solid #f39c12;
            padding: 20px;
            border-radius: 0 10px 10px 0;
            margin: 25px 0;
        }

        .explanation h3 {
            color: #f39c12;
            margin-bottom: 10px;
        }

        .explanation p {
            color: #ccc;
            line-height: 1.7;
        }

        .coin {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            margin: 10px;
            transition: transform 0.3s;
        }

        .coin.win {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
        }

        .coin.lose {
            background: linear-gradient(135deg, #c0392b, #e74c3c);
            color: white;
        }

        .flip-result {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 15px 0;
            min-height: 80px;
        }

        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #f39c12;
            text-decoration: none;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 5px;
            z-index: 100;
            background: rgba(0,0,0,0.5);
            padding: 8px 15px;
            border-radius: 20px;
        }

        .back-link:hover {
            background: rgba(243, 156, 18, 0.2);
        }

        .applications {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .app-card {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 15px;
        }

        .app-card h4 {
            color: #e74c3c;
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .app-card p {
            color: #a8a8a8;
            font-size: 0.85rem;
            line-height: 1.5;
        }

        @media (max-width: 768px) {
            h1 { font-size: 1.8rem; }
            .games-panel { grid-template-columns: 1fr; }
            .capital-display { font-size: 2rem; }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back to Paradoxes</a>

    <div class="container">
        <header>
            <h1>Parrondo's Paradox</h1>
            <p class="subtitle">Two LOSING games, when combined, create a WINNING strategy!
            Discovered by Spanish physicist Juan Parrondo in 1996, this paradox reveals how
            alternating between two bad choices can somehow produce a good outcome.</p>
        </header>

        <div class="main-section">
            <div class="section-title">The Two Games</div>

            <div class="games-panel">
                <div class="game-card losing">
                    <div class="game-header">
                        <span class="game-name a">Game A</span>
                        <span class="game-status losing">LOSING</span>
                    </div>
                    <div class="game-rules">
                        <strong>Simple biased coin flip:</strong><br>
                        Win with probability <code>0.495</code> (49.5%)<br>
                        Lose with probability <code>0.505</code> (50.5%)<br><br>
                        <em>Slightly worse than fair ‚Äî you slowly lose money.</em>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Expected value per round</span>
                        <span class="stat-value negative">-$0.01</span>
                    </div>
                </div>

                <div class="game-card losing">
                    <div class="game-header">
                        <span class="game-name b">Game B</span>
                        <span class="game-status losing">LOSING</span>
                    </div>
                    <div class="game-rules">
                        <strong>Capital-dependent coin flip:</strong><br>
                        If capital divisible by 3: Win <code>9.5%</code> (terrible!)<br>
                        Otherwise: Win <code>74.5%</code> (great!)<br><br>
                        <em>Seems good, but the bad coin hits at the worst times.</em>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Expected value per round</span>
                        <span class="stat-value negative">-$0.01</span>
                    </div>
                </div>

                <div class="game-card winning">
                    <div class="game-header">
                        <span class="game-name combo">A + B Combined</span>
                        <span class="game-status winning">WINNING!</span>
                    </div>
                    <div class="game-rules">
                        <strong>Alternating strategy (AABB...):</strong><br>
                        Play 2 rounds of A, then 2 rounds of B, repeat.<br><br>
                        <em>Game A disrupts the "divisible by 3" pattern that makes B lose!</em>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Expected value per round</span>
                        <span class="stat-value positive">+$0.015</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-section">
            <div class="section-title">Interactive Simulation</div>

            <div class="current-state">
                <div class="round-info">Round: <span id="round-num">0</span> | Strategy: <span id="current-strategy">None</span></div>
                <div class="capital-display neutral" id="capital">$0</div>
                <div class="flip-result" id="flip-result"></div>
            </div>

            <div class="controls">
                <button class="btn-game a" onclick="playGame('A')">Play Game A</button>
                <button class="btn-game b" onclick="playGame('B')">Play Game B</button>
                <button class="btn btn-secondary" onclick="resetGame()">Reset</button>
            </div>

            <div class="strategy-selector">
                <button class="strategy-btn" onclick="runStrategy('A', 500)">500√ó Game A Only</button>
                <button class="strategy-btn" onclick="runStrategy('B', 500)">500√ó Game B Only</button>
                <button class="strategy-btn active" onclick="runStrategy('AABB', 500)">500√ó AABB Pattern</button>
                <button class="strategy-btn" onclick="runStrategy('ABB', 500)">500√ó ABB Pattern</button>
                <button class="strategy-btn" onclick="runStrategy('random', 500)">500√ó Random A/B</button>
            </div>

            <div class="canvas-container">
                <canvas id="chart" width="700" height="300"></canvas>
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background: #3498db;"></div>
                        <span>Game A Only</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #9b59b6;"></div>
                        <span>Game B Only</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #27ae60;"></div>
                        <span>AABB Combined</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #e74c3c;"></div>
                        <span>Random A/B</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="explanation">
            <h3>Why Does This Work?</h3>
            <p><strong>The Key Insight:</strong> Games A and B are NOT independent when combined!<br><br>
            Game B loses because you tend to land on "divisible by 3" at bad times.
            But Game A (the slightly unfair coin) <em>disrupts this pattern</em>.<br><br>
            When you alternate, Game A shifts your capital away from multiples of 3,
            so when you play Game B, you're more likely to use the GOOD coin (74.5% win rate)!<br><br>
            <strong>This is a Brownian ratchet:</strong> Random fluctuations from A,
            combined with B's asymmetric rules, create directed motion ‚Äî like a ratchet
            that only turns one way despite random forces.</p>
        </div>

        <div class="main-section">
            <div class="section-title">Real-World Applications</div>

            <div class="applications">
                <div class="app-card">
                    <h4>üß¨ Cancer Treatment</h4>
                    <p>Alternating between high-dose and low-dose chemotherapy can be more effective
                    than either approach alone (2025 research by Guan et al.)</p>
                </div>
                <div class="app-card">
                    <h4>ü¶† Biology</h4>
                    <p>Slime molds use similar strategies ‚Äî alternating between growth patterns
                    that are individually suboptimal but together optimize survival.</p>
                </div>
                <div class="app-card">
                    <h4>üìà Finance</h4>
                    <p>Portfolio rebalancing between volatile assets can generate returns
                    even when individual assets are expected to decline.</p>
                </div>
                <div class="app-card">
                    <h4>‚ö° Physics</h4>
                    <p>Brownian ratchets and molecular motors use thermal noise plus
                    asymmetric potentials to create directed motion.</p>
                </div>
            </div>
        </div>

        <div class="explanation">
            <h3>Historical Note</h3>
            <p>Juan Parrondo discovered this paradox in 1996 while studying Brownian ratchets ‚Äî
            theoretical devices that could extract useful work from random thermal motion.
            Richard Feynman had shown such devices couldn't work in thermal equilibrium,
            but Parrondo found that switching between two equilibrium states could produce directed motion.<br><br>
            The paradox has since been proven in physical experiments and found applications
            in biology, game theory, and even quantum computing.</p>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('chart');
        const ctx = canvas.getContext('2d');

        // Game parameters
        const pA = 0.495;  // Game A win probability
        const pB_bad = 0.095;  // Game B win probability when capital % 3 === 0
        const pB_good = 0.745;  // Game B win probability otherwise
        const epsilon = 0.005;

        let capital = 0;
        let round = 0;
        let history = { A: [0], B: [0], AABB: [0], random: [0] };

        function playGameA() {
            return Math.random() < pA ? 1 : -1;
        }

        function playGameB(currentCapital) {
            const prob = (currentCapital % 3 === 0) ? pB_bad : pB_good;
            return Math.random() < prob ? 1 : -1;
        }

        function playGame(game) {
            let result;
            if (game === 'A') {
                result = playGameA();
            } else {
                result = playGameB(capital);
            }

            capital += result;
            round++;

            updateDisplay(game, result);
            drawChart();
        }

        function updateDisplay(game, result) {
            document.getElementById('round-num').textContent = round;
            document.getElementById('current-strategy').textContent = `Game ${game}`;

            const capitalEl = document.getElementById('capital');
            capitalEl.textContent = (capital >= 0 ? '+' : '') + '$' + capital;
            capitalEl.className = 'capital-display ' +
                (capital > 0 ? 'positive' : capital < 0 ? 'negative' : 'neutral');

            const flipResult = document.getElementById('flip-result');
            flipResult.innerHTML = `
                <div class="coin ${result > 0 ? 'win' : 'lose'}">
                    ${result > 0 ? '+$1' : '-$1'}
                </div>
                <span style="color: #888;">Game ${game} ${result > 0 ? 'WON' : 'LOST'}</span>
            `;
        }

        function resetGame() {
            capital = 0;
            round = 0;
            history = { A: [0], B: [0], AABB: [0], random: [0] };

            document.getElementById('round-num').textContent = '0';
            document.getElementById('current-strategy').textContent = 'None';
            document.getElementById('capital').textContent = '$0';
            document.getElementById('capital').className = 'capital-display neutral';
            document.getElementById('flip-result').innerHTML = '';

            drawChart();
        }

        function runStrategy(strategy, rounds) {
            // Reset histories
            history = { A: [0], B: [0], AABB: [0], random: [0] };

            // Run each strategy
            const strategies = ['A', 'B', 'AABB', 'random'];

            strategies.forEach(strat => {
                let cap = 0;
                let patternIndex = 0;

                for (let i = 0; i < rounds; i++) {
                    let result;

                    if (strat === 'A') {
                        result = playGameA();
                    } else if (strat === 'B') {
                        result = Math.random() < ((cap % 3 === 0) ? pB_bad : pB_good) ? 1 : -1;
                    } else if (strat === 'AABB') {
                        const pattern = ['A', 'A', 'B', 'B'];
                        const game = pattern[patternIndex % 4];
                        if (game === 'A') {
                            result = playGameA();
                        } else {
                            result = Math.random() < ((cap % 3 === 0) ? pB_bad : pB_good) ? 1 : -1;
                        }
                        patternIndex++;
                    } else if (strat === 'ABB') {
                        const pattern = ['A', 'B', 'B'];
                        const game = pattern[patternIndex % 3];
                        if (game === 'A') {
                            result = playGameA();
                        } else {
                            result = Math.random() < ((cap % 3 === 0) ? pB_bad : pB_good) ? 1 : -1;
                        }
                        patternIndex++;
                    } else {
                        // Random
                        if (Math.random() < 0.5) {
                            result = playGameA();
                        } else {
                            result = Math.random() < ((cap % 3 === 0) ? pB_bad : pB_good) ? 1 : -1;
                        }
                    }

                    cap += result;
                    history[strat].push(cap);
                }
            });

            // Update display for selected strategy
            document.querySelectorAll('.strategy-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            capital = history[strategy === 'ABB' ? 'AABB' : strategy][rounds];
            round = rounds;
            document.getElementById('round-num').textContent = rounds;
            document.getElementById('current-strategy').textContent = strategy;

            const capitalEl = document.getElementById('capital');
            capitalEl.textContent = (capital >= 0 ? '+' : '') + '$' + capital;
            capitalEl.className = 'capital-display ' +
                (capital > 0 ? 'positive' : capital < 0 ? 'negative' : 'neutral');

            document.getElementById('flip-result').innerHTML =
                `<span style="color: #888;">Simulated ${rounds} rounds of ${strategy}</span>`;

            drawChart();
        }

        function drawChart() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            const padding = 50;
            const width = canvas.width - padding * 2;
            const height = canvas.height - padding * 2;

            // Find data range
            let allValues = [...history.A, ...history.B, ...history.AABB, ...history.random];
            let minVal = Math.min(...allValues);
            let maxVal = Math.max(...allValues);
            const range = Math.max(Math.abs(minVal), Math.abs(maxVal), 10);

            minVal = -range;
            maxVal = range;

            // Draw axes
            ctx.strokeStyle = '#444';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(padding, padding);
            ctx.lineTo(padding, canvas.height - padding);
            ctx.lineTo(canvas.width - padding, canvas.height - padding);
            ctx.stroke();

            // Draw zero line
            const zeroY = padding + height / 2;
            ctx.strokeStyle = '#555';
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(padding, zeroY);
            ctx.lineTo(canvas.width - padding, zeroY);
            ctx.stroke();
            ctx.setLineDash([]);

            // Draw labels
            ctx.fillStyle = '#888';
            ctx.font = '12px sans-serif';
            ctx.textAlign = 'right';
            ctx.fillText('+$' + Math.round(maxVal), padding - 5, padding + 10);
            ctx.fillText('$0', padding - 5, zeroY + 4);
            ctx.fillText('-$' + Math.round(-minVal), padding - 5, canvas.height - padding);

            // Draw lines
            const colors = {
                A: '#3498db',
                B: '#9b59b6',
                AABB: '#27ae60',
                random: '#e74c3c'
            };

            ['A', 'B', 'AABB', 'random'].forEach(key => {
                if (history[key].length < 2) return;

                ctx.strokeStyle = colors[key];
                ctx.lineWidth = 2;
                ctx.beginPath();

                const data = history[key];
                const xStep = width / (data.length - 1);

                data.forEach((val, i) => {
                    const x = padding + i * xStep;
                    const y = padding + height - ((val - minVal) / (maxVal - minVal)) * height;

                    if (i === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                });

                ctx.stroke();
            });

            // Draw final values
            ctx.font = 'bold 11px sans-serif';
            ['A', 'B', 'AABB', 'random'].forEach(key => {
                if (history[key].length < 2) return;
                const finalVal = history[key][history[key].length - 1];
                ctx.fillStyle = colors[key];
                ctx.textAlign = 'left';
                const y = padding + height - ((finalVal - minVal) / (maxVal - minVal)) * height;
                ctx.fillText((finalVal >= 0 ? '+' : '') + finalVal, canvas.width - padding + 5, y + 4);
            });
        }

        // Initialize
        drawChart();
    </script>
</body>
</html>
