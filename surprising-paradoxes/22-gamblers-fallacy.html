<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Gambler's Fallacy | Surprising Paradoxes</title>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --sage: #8A9A5B;
            --moss: #606C38;
            --earth: #DDA15E;
            --cream: #FEFAE0;
            --terracotta: #BC6C25;
            --dark-moss: #3d4423;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, var(--cream) 0%, #F4F1DE 50%, #EDE8D5 100%);
            min-height: 100vh;
            color: var(--dark-moss);
        }

        .organic-shape {
            position: fixed;
            border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
            opacity: 0.1;
            z-index: 0;
            animation: morph 30s ease-in-out infinite;
        }

        .shape-1 { width: 500px; height: 500px; background: var(--sage); top: -150px; right: -150px; }
        .shape-2 { width: 400px; height: 400px; background: var(--earth); bottom: -100px; left: -100px; animation-delay: -15s; }

        @keyframes morph {
            0%, 100% { border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%; }
            50% { border-radius: 50% 50% 33% 67% / 55% 27% 73% 45%; }
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 30px 20px;
            position: relative;
            z-index: 1;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 50px;
            text-decoration: none;
            color: var(--moss);
            font-weight: 600;
            margin-bottom: 20px;
            transition: all 0.3s;
        }

        .back-link:hover { background: var(--moss); color: white; }

        h1 {
            font-family: 'Lora', serif;
            font-size: 2.5rem;
            color: var(--moss);
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.8;
            margin-bottom: 30px;
            max-width: 750px;
            line-height: 1.6;
        }

        .panel {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(138, 154, 91, 0.2);
            margin-bottom: 25px;
        }

        .panel h3 {
            font-family: 'Lora', serif;
            color: var(--moss);
            margin-bottom: 15px;
        }

        .coin-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin: 20px 0;
        }

        .coin {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(145deg, #ffd700, #b8860b);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transition: transform 0.1s;
            cursor: pointer;
        }

        .coin:hover { transform: scale(1.05); }

        .coin.flipping {
            animation: flip 0.5s ease-in-out;
        }

        @keyframes flip {
            0% { transform: rotateY(0deg); }
            50% { transform: rotateY(900deg); }
            100% { transform: rotateY(1800deg); }
        }

        .history {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            justify-content: center;
            max-width: 500px;
            min-height: 40px;
            padding: 10px;
            background: #f5f5f0;
            border-radius: 10px;
        }

        .flip-result {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: 700;
            animation: popIn 0.3s ease;
        }

        .flip-result.H { background: #4CAF50; color: white; }
        .flip-result.T { background: #f44336; color: white; }

        @keyframes popIn {
            0% { transform: scale(0); }
            50% { transform: scale(1.3); }
            100% { transform: scale(1); }
        }

        .streak-alert {
            background: var(--terracotta);
            color: white;
            padding: 15px 25px;
            border-radius: 25px;
            font-weight: 600;
            margin: 20px 0;
            text-align: center;
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .prediction-panel {
            background: var(--cream);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
        }

        .prediction-panel h4 {
            color: var(--moss);
            margin-bottom: 15px;
        }

        .prediction-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .pred-btn {
            padding: 15px 40px;
            border: none;
            border-radius: 30px;
            font-family: 'Nunito', sans-serif;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }

        .pred-btn.heads { background: #4CAF50; color: white; }
        .pred-btn.tails { background: #f44336; color: white; }
        .pred-btn:hover { transform: scale(1.05); }
        .pred-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-box {
            background: #f5f5f0;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--terracotta);
            font-family: 'Lora', serif;
        }

        .stat-label { font-size: 0.85rem; opacity: 0.8; }

        .controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 25px;
            background: var(--moss);
            color: white;
            border: none;
            border-radius: 25px;
            font-family: 'Nunito', sans-serif;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn:hover { background: var(--dark-moss); transform: translateY(-2px); }
        .btn.secondary { background: transparent; border: 2px solid var(--sage); color: var(--moss); }

        .truth-box {
            background: var(--cream);
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid var(--sage);
            margin-top: 20px;
        }

        .truth-box h4 { color: var(--moss); margin-bottom: 10px; font-family: 'Lora', serif; }
        .truth-box p { line-height: 1.7; }

        .essay-section {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(138, 154, 91, 0.2);
            margin-bottom: 25px;
        }

        .essay-section h3 {
            font-family: 'Lora', serif;
            color: var(--moss);
            margin-bottom: 15px;
        }

        .essay-section p { line-height: 1.8; margin-bottom: 15px; }

        .highlight {
            background: var(--earth);
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
        }

        .math-box {
            background: white;
            padding: 15px 20px;
            border-radius: 10px;
            margin: 15px 0;
            font-family: 'Times New Roman', serif;
            font-size: 1.1rem;
            text-align: center;
            border: 1px solid rgba(138, 154, 91, 0.3);
        }

        .examples-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .example-card {
            background: var(--cream);
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid var(--terracotta);
        }

        .example-card h4 { color: var(--moss); margin-bottom: 10px; font-family: 'Lora', serif; }
        .example-card p { font-size: 0.95rem; line-height: 1.6; }
    </style>
</head>
<body>
    <div class="organic-shape shape-1"></div>
    <div class="organic-shape shape-2"></div>

    <div class="container">
        <a href="index.html" class="back-link">
            <span>&larr;</span>
            <span>Back to Surprising</span>
        </a>

        <h1>The Gambler's Fallacy</h1>
        <p class="subtitle">After 10 heads in a row, is tails "due"? Our intuition screams yes, but the coin doesn't remember. Each flip is 50/50, no matter what came before.</p>

        <div class="panel">
            <h3>The Coin Flip Experiment</h3>
            <p style="margin-bottom: 15px;">Click the coin to flip it, or predict the next outcome. Watch how streaks don't change the underlying probability.</p>

            <div class="coin-area">
                <div class="coin" id="coin" title="Click to flip!">ü™ô</div>
                <div id="streakAlert" class="streak-alert" style="display: none;"></div>
            </div>

            <div class="history" id="history">
                <span style="color: #999;">Flip history will appear here...</span>
            </div>

            <div class="prediction-panel">
                <h4>Predict the next flip:</h4>
                <div class="prediction-buttons">
                    <button class="pred-btn heads" id="predictH">Heads</button>
                    <button class="pred-btn tails" id="predictT">Tails</button>
                </div>
                <p id="predictionResult" style="margin-top: 15px; font-weight: 600;"></p>
            </div>

            <div class="stats-grid">
                <div class="stat-box">
                    <div class="stat-value" id="totalFlips">0</div>
                    <div class="stat-label">Total Flips</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="headsCount">0</div>
                    <div class="stat-label">Heads</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="tailsCount">0</div>
                    <div class="stat-label">Tails</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="headsPercent">--</div>
                    <div class="stat-label">Heads %</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="currentStreak">0</div>
                    <div class="stat-label">Current Streak</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="longestStreak">0</div>
                    <div class="stat-label">Longest Streak</div>
                </div>
            </div>

            <div class="controls">
                <button class="btn" id="flip100">Flip 100 Times</button>
                <button class="btn secondary" id="reset">Reset</button>
            </div>

            <div class="truth-box">
                <h4>The Mathematical Truth</h4>
                <p>P(Heads | previous 10 were Heads) = <strong>50%</strong><br>
                P(Heads | previous 10 were Tails) = <strong>50%</strong><br>
                P(Heads | any previous sequence) = <strong>50%</strong></p>
                <p style="margin-top: 10px;">The coin has no memory. Each flip is an <em>independent</em> event.</p>
            </div>
        </div>

        <div class="essay-section">
            <h3>The Monte Carlo Casino Incident (1913)</h3>
            <p>On August 18, 1913, at the Monte Carlo Casino, the roulette ball landed on <span class="highlight">black 26 times in a row</span>. This is extraordinarily unlikely‚Äîabout 1 in 136 million.</p>

            <p>But here's what's fascinating: as the streak continued, gamblers lost <strong>millions of francs</strong> betting against it. After 10 blacks, they bet on red. After 15, they bet more on red. After 20, they desperately piled money on red, convinced it was "due."</p>

            <div class="math-box">
                After 25 blacks, P(26th spin is Red) = still just 18/37 ‚âà 48.6%
            </div>

            <p>The roulette wheel doesn't know or care about its history. The gamblers' intuition that red was "owed" by the universe led to catastrophic losses. This is now called the <strong>Monte Carlo Fallacy</strong>.</p>
        </div>

        <div class="essay-section">
            <h3>Why Our Brains Get This Wrong</h3>
            <p>The gambler's fallacy stems from a cognitive bias called the <span class="highlight">representativeness heuristic</span>. We expect short sequences to "look random"‚Äîto have roughly equal heads and tails.</p>

            <p>A sequence like <strong>HHHHHT</strong> feels more random than <strong>HHHHHH</strong>, even though both are equally likely! Our brains pattern-match against our mental model of "randomness," which is itself wrong.</p>

            <div class="examples-grid">
                <div class="example-card">
                    <h4>üé∞ Casino Design</h4>
                    <p>Casinos display recent roulette results specifically to exploit this fallacy. Showing "12 reds in a row" makes gamblers bet on black‚Äîincreasing the house's expected profit.</p>
                </div>
                <div class="example-card">
                    <h4>üèÄ "Hot Hand" Debate</h4>
                    <p>The inverse fallacy: believing someone "on a hot streak" is more likely to succeed. Research is mixed, but the core statistical principle remains‚Äîpast doesn't guarantee future.</p>
                </div>
                <div class="example-card">
                    <h4>üë∂ Birth Ratios</h4>
                    <p>After three daughters, parents often believe a son is more likely. But biology doesn't "balance out"‚Äîeach pregnancy is roughly 50/50 regardless of previous children.</p>
                </div>
                <div class="example-card">
                    <h4>üìà Stock Markets</h4>
                    <p>"The market has been up for 5 days, it's due for a correction." Past performance doesn't predict future returns for random walks (though markets aren't purely random).</p>
                </div>
            </div>
        </div>

        <div class="essay-section">
            <h3>The Law of Large Numbers (and What It Doesn't Say)</h3>
            <p>People often confuse the gambler's fallacy with the legitimate <span class="highlight">Law of Large Numbers</span>, which states that over many trials, the observed proportion will converge to the true probability.</p>

            <div class="math-box">
                After 1,000,000 fair coin flips, the percentage of heads will be very close to 50%.
            </div>

            <p>But this doesn't happen through "balancing." It happens through <strong>swamping</strong>. If you flip 10 heads in a row, the "extra" 10 heads don't disappear. Rather, after a million flips, those 10 become insignificant compared to the ~500,000 on each side.</p>

            <p>The universe doesn't correct imbalances. It just overwhelms them with more data.</p>
        </div>

        <div class="essay-section">
            <h3>Protecting Yourself</h3>
            <ul style="list-style: none; padding: 0;">
                <li style="padding: 12px 0; border-bottom: 1px solid rgba(138, 154, 91, 0.2);">
                    <strong>üß† Recognize Independence</strong> ‚Äî Ask: "Does this event physically depend on previous events?" Dice, coins, and roulette wheels have no memory.
                </li>
                <li style="padding: 12px 0; border-bottom: 1px solid rgba(138, 154, 91, 0.2);">
                    <strong>üìä Understand the Math</strong> ‚Äî P(HHHHHT) = P(HHHHHH) = (1/2)‚Å∂ = 1/64. Both are equally unlikely before you start.
                </li>
                <li style="padding: 12px 0; border-bottom: 1px solid rgba(138, 154, 91, 0.2);">
                    <strong>üéØ Focus on Expected Value</strong> ‚Äî In gambling, the house edge doesn't change based on history. Every bet has the same negative expectation.
                </li>
                <li style="padding: 12px 0;">
                    <strong>‚ö†Ô∏è Watch for Exploitation</strong> ‚Äî If someone is showing you past outcomes to influence your bets, they're probably exploiting this fallacy.
                </li>
            </ul>
        </div>
    </div>

    <script>
        let history = [];
        let predictions = { correct: 0, total: 0 };
        let currentPrediction = null;
        let longestStreak = 0;

        function getStreak() {
            if (history.length === 0) return { length: 0, type: null };
            let streak = 1;
            const last = history[history.length - 1];
            for (let i = history.length - 2; i >= 0; i--) {
                if (history[i] === last) streak++;
                else break;
            }
            return { length: streak, type: last };
        }

        function flip() {
            const result = Math.random() < 0.5 ? 'H' : 'T';
            history.push(result);

            // Check prediction
            if (currentPrediction !== null) {
                predictions.total++;
                if ((currentPrediction === 'H' && result === 'H') ||
                    (currentPrediction === 'T' && result === 'T')) {
                    predictions.correct++;
                    document.getElementById('predictionResult').textContent =
                        `‚úì Correct! (${predictions.correct}/${predictions.total} = ${(predictions.correct/predictions.total*100).toFixed(1)}%)`;
                    document.getElementById('predictionResult').style.color = '#4CAF50';
                } else {
                    document.getElementById('predictionResult').textContent =
                        `‚úó Wrong! (${predictions.correct}/${predictions.total} = ${(predictions.correct/predictions.total*100).toFixed(1)}%)`;
                    document.getElementById('predictionResult').style.color = '#f44336';
                }
                currentPrediction = null;
            }

            updateDisplay();
            return result;
        }

        function updateDisplay() {
            // History
            const historyEl = document.getElementById('history');
            historyEl.innerHTML = history.slice(-50).map(r =>
                `<div class="flip-result ${r}">${r}</div>`
            ).join('');

            // Stats
            const heads = history.filter(x => x === 'H').length;
            const tails = history.length - heads;
            const streak = getStreak();

            if (streak.length > longestStreak) longestStreak = streak.length;

            document.getElementById('totalFlips').textContent = history.length;
            document.getElementById('headsCount').textContent = heads;
            document.getElementById('tailsCount').textContent = tails;
            document.getElementById('headsPercent').textContent =
                history.length > 0 ? (heads / history.length * 100).toFixed(1) + '%' : '--';
            document.getElementById('currentStreak').textContent =
                streak.length > 0 ? `${streak.length} ${streak.type}` : '0';
            document.getElementById('longestStreak').textContent = longestStreak;

            // Streak alert
            const alertEl = document.getElementById('streakAlert');
            if (streak.length >= 5) {
                alertEl.style.display = 'block';
                alertEl.textContent = `üî• ${streak.length} ${streak.type === 'H' ? 'Heads' : 'Tails'} in a row! Is ${streak.type === 'H' ? 'Tails' : 'Heads'} "due"? (Spoiler: No, still 50%!)`;
            } else {
                alertEl.style.display = 'none';
            }
        }

        // Coin click
        document.getElementById('coin').addEventListener('click', () => {
            const coin = document.getElementById('coin');
            coin.classList.add('flipping');
            setTimeout(() => {
                const result = flip();
                coin.textContent = result === 'H' ? 'ü™ô' : 'üî¥';
                coin.classList.remove('flipping');
            }, 500);
        });

        // Predictions
        document.getElementById('predictH').addEventListener('click', () => {
            currentPrediction = 'H';
            document.getElementById('predictionResult').textContent = 'Predicted Heads. Now flip the coin!';
            document.getElementById('predictionResult').style.color = '#4CAF50';
        });

        document.getElementById('predictT').addEventListener('click', () => {
            currentPrediction = 'T';
            document.getElementById('predictionResult').textContent = 'Predicted Tails. Now flip the coin!';
            document.getElementById('predictionResult').style.color = '#f44336';
        });

        // Flip 100
        document.getElementById('flip100').addEventListener('click', () => {
            for (let i = 0; i < 100; i++) {
                setTimeout(() => flip(), i * 20);
            }
        });

        // Reset
        document.getElementById('reset').addEventListener('click', () => {
            history = [];
            predictions = { correct: 0, total: 0 };
            currentPrediction = null;
            longestStreak = 0;
            document.getElementById('predictionResult').textContent = '';
            document.getElementById('coin').textContent = 'ü™ô';
            updateDisplay();
        });

        updateDisplay();
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
