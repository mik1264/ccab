<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Vacuum Catastrophe - Physics' Worst Prediction | Surprising Paradoxes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: radial-gradient(ellipse at center, #0a0015 0%, #000008 100%);
            color: #e8e0f0;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #9c27b0;
            text-decoration: none;
            font-size: 14px;
            z-index: 1000;
            padding: 8px 16px;
            background: rgba(10, 0, 21, 0.9);
            border-radius: 20px;
            border: 1px solid rgba(156, 39, 176, 0.3);
            transition: all 0.3s ease;
        }

        .back-link:hover {
            background: rgba(156, 39, 176, 0.2);
            border-color: #9c27b0;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 80px 20px 40px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        h1 {
            font-size: 2.5em;
            background: linear-gradient(135deg, #e040fb, #7c4dff, #448aff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #ce93d8;
            font-size: 1.2em;
            font-style: italic;
        }

        .paradox-box {
            background: linear-gradient(135deg, rgba(224, 64, 251, 0.1), rgba(124, 77, 255, 0.1));
            border: 2px solid rgba(224, 64, 251, 0.4);
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
            text-align: center;
        }

        .paradox-box h3 {
            color: #e040fb;
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        .paradox-box p {
            font-size: 1.15em;
            line-height: 1.7;
            color: #e1bee7;
        }

        .huge-number {
            font-size: 1.8em;
            font-weight: bold;
            background: linear-gradient(135deg, #ff5252, #ff4081, #e040fb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: block;
            margin: 15px 0;
        }

        .simulation-area {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 30px;
            margin: 40px 0;
        }

        @media (max-width: 1000px) {
            .simulation-area {
                grid-template-columns: 1fr;
            }
        }

        .canvas-container {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(156, 39, 176, 0.2);
        }

        canvas {
            display: block;
            width: 100%;
            border-radius: 10px;
        }

        .controls {
            background: rgba(10, 0, 21, 0.8);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(156, 39, 176, 0.2);
        }

        .controls h3 {
            color: #9c27b0;
            margin-bottom: 20px;
            font-size: 1.2em;
            border-bottom: 1px solid rgba(156, 39, 176, 0.3);
            padding-bottom: 10px;
        }

        .comparison-box {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .comparison-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(156, 39, 176, 0.1);
        }

        .comparison-row:last-child {
            border-bottom: none;
        }

        .comparison-label {
            color: #ce93d8;
            font-size: 0.9em;
        }

        .comparison-value {
            font-weight: bold;
            font-family: 'Courier New', monospace;
        }

        .comparison-value.observed {
            color: #69f0ae;
        }

        .comparison-value.predicted {
            color: #ff5252;
        }

        .comparison-value.ratio {
            color: #ffab40;
            font-size: 1.1em;
        }

        .slider-group {
            margin-bottom: 20px;
        }

        .slider-group label {
            display: block;
            color: #ce93d8;
            margin-bottom: 8px;
            font-size: 0.95em;
        }

        .slider-group input[type="range"] {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            background: linear-gradient(90deg, #4a148c, #7b1fa2, #9c27b0);
            border-radius: 4px;
            outline: none;
        }

        .slider-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: #e040fb;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(224, 64, 251, 0.5);
        }

        .explanation-panel {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
        }

        .explanation-title {
            color: #e040fb;
            font-size: 0.9em;
            margin-bottom: 8px;
        }

        .explanation-text {
            color: #b39ddb;
            font-size: 0.85em;
            line-height: 1.6;
        }

        .essay {
            background: rgba(10, 0, 21, 0.6);
            border-radius: 15px;
            padding: 40px;
            margin-top: 40px;
            line-height: 1.9;
        }

        .essay h2 {
            color: #9c27b0;
            margin: 30px 0 20px;
            font-size: 1.5em;
        }

        .essay h2:first-child {
            margin-top: 0;
        }

        .essay p {
            margin-bottom: 20px;
            color: #d1c4e9;
            text-align: justify;
        }

        .essay strong {
            color: #e040fb;
        }

        .essay em {
            color: #ce93d8;
            font-style: italic;
        }

        .highlight-stat {
            display: inline-block;
            background: linear-gradient(135deg, rgba(224, 64, 251, 0.2), rgba(124, 77, 255, 0.2));
            padding: 2px 10px;
            border-radius: 4px;
            color: #ea80fc;
            font-weight: bold;
        }

        .scale-comparison {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 30px 0;
        }

        @media (max-width: 768px) {
            .scale-comparison {
                grid-template-columns: 1fr;
            }
        }

        .scale-card {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(156, 39, 176, 0.2);
        }

        .scale-card h4 {
            color: #9c27b0;
            margin-bottom: 10px;
            font-size: 0.95em;
        }

        .scale-card .number {
            font-family: 'Courier New', monospace;
            font-size: 1.3em;
            color: #e040fb;
            margin-bottom: 8px;
        }

        .scale-card p {
            font-size: 0.85em;
            color: #9e9e9e;
            margin: 0;
        }

        .timeline {
            position: relative;
            padding: 20px 0;
            margin: 30px 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 20px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(180deg, #9c27b0, #e040fb, #7c4dff);
        }

        .timeline-item {
            position: relative;
            padding-left: 50px;
            margin-bottom: 25px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: 14px;
            top: 5px;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #e040fb;
            border: 2px solid #0a0015;
        }

        .timeline-year {
            color: #e040fb;
            font-weight: bold;
            font-size: 1.1em;
        }

        .timeline-event {
            color: #b39ddb;
            font-size: 0.9em;
            margin-top: 5px;
        }

        footer {
            text-align: center;
            padding: 40px 20px;
            color: #7b1fa2;
            font-size: 0.9em;
        }

        footer a {
            color: #9c27b0;
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back to Paradoxes</a>

    <div class="container">
        <header>
            <h1>üåå The Vacuum Catastrophe</h1>
            <p class="subtitle">The Worst Prediction in the History of Physics</p>
        </header>

        <div class="paradox-box">
            <h3>‚ö†Ô∏è A 120-Order-of-Magnitude Disaster</h3>
            <p>
                Quantum field theory predicts that empty space should contain enormous energy.
                General relativity tells us this energy should cause the universe to expand.
                When we calculate how much energy should be there versus how much we observe:
            </p>
            <span class="huge-number">10<sup>120</sup> times too large</span>
            <p>
                That's a <strong>1 followed by 120 zeros</strong>. Not 10x, not 1000x, not a million times‚Äî
                but a number larger than all the atoms in the observable universe, <em>squared</em>.
                This is called <strong>"the worst theoretical prediction in the history of physics."</strong>
            </p>
        </div>

        <div class="simulation-area">
            <div class="canvas-container">
                <canvas id="vacuumCanvas"></canvas>
            </div>

            <div class="controls">
                <h3>‚öõÔ∏è The Discrepancy Visualized</h3>

                <div class="comparison-box">
                    <div class="comparison-row">
                        <span class="comparison-label">Observed (Dark Energy)</span>
                        <span class="comparison-value observed" id="observedValue">~10‚Åª‚Åπ J/m¬≥</span>
                    </div>
                    <div class="comparison-row">
                        <span class="comparison-label">QFT Prediction</span>
                        <span class="comparison-value predicted" id="predictedValue">~10¬π¬π¬≥ J/m¬≥</span>
                    </div>
                    <div class="comparison-row">
                        <span class="comparison-label">Discrepancy</span>
                        <span class="comparison-value ratio">10¬π¬≤‚Å∞ √ó</span>
                    </div>
                </div>

                <div class="slider-group">
                    <label>Zoom Level: <span id="zoomValue">Linear</span></label>
                    <input type="range" id="zoomSlider" min="0" max="120" value="0">
                </div>

                <div class="slider-group">
                    <label>Planck Cutoff: <span id="cutoffValue">10¬π‚Åπ GeV</span></label>
                    <input type="range" id="cutoffSlider" min="1" max="19" value="19">
                </div>

                <div class="explanation-panel">
                    <div class="explanation-title">What You're Seeing</div>
                    <div class="explanation-text" id="explanationText">
                        The visualization shows quantum vacuum fluctuations‚Äîvirtual particles
                        constantly appearing and disappearing in "empty" space. Each fluctuation
                        contributes energy. The total should be enormous, but somehow it nearly cancels.
                    </div>
                </div>
            </div>
        </div>

        <div class="essay">
            <h2>Nothing Contains Everything</h2>
            <p>
                What is empty space? To our everyday intuition, it's simply <em>nothing</em>‚Äîthe
                absence of matter, light, and energy. But quantum mechanics tells a different story.
                The <strong>uncertainty principle</strong> forbids perfect emptiness. Even in the
                most perfect vacuum, particles and antiparticles constantly pop into and out of
                existence‚Äîvirtual pairs that borrow energy from the void itself, existing for
                infinitesimal moments before annihilating. This seething quantum foam has energy,
                called <em>zero-point energy</em> or <em>vacuum energy</em>.
            </p>

            <h2>The Calculation That Broke Physics</h2>
            <p>
                When physicists calculate how much energy should be contained in this quantum
                vacuum, using standard quantum field theory, the answer is staggering. Summing
                over all possible fluctuations up to the <strong>Planck scale</strong>
                (the highest energy scale where our theories should apply), the energy density
                comes out to approximately <span class="highlight-stat">10¬π¬π¬≥ joules per cubic meter</span>.
                That's more energy in a cubic meter of "nothing" than in all the stars and galaxies
                we can see.
            </p>

            <div class="scale-comparison">
                <div class="scale-card">
                    <h4>Observed Dark Energy</h4>
                    <div class="number">~6 √ó 10‚Åª¬π‚Å∞ J/m¬≥</div>
                    <p>Measured from cosmic acceleration</p>
                </div>
                <div class="scale-card">
                    <h4>QFT Vacuum Energy</h4>
                    <div class="number">~10¬π¬π¬≥ J/m¬≥</div>
                    <p>Calculated from quantum fluctuations</p>
                </div>
                <div class="scale-card">
                    <h4>Atoms in Universe</h4>
                    <div class="number">~10‚Å∏‚Å∞</div>
                    <p>The discrepancy is larger than this, squared</p>
                </div>
                <div class="scale-card">
                    <h4>Required Cancellation</h4>
                    <div class="number">120 decimal places</div>
                    <p>Fine-tuning beyond comprehension</p>
                </div>
            </div>

            <h2>Why It Matters: Cosmic Expansion</h2>
            <p>
                Vacuum energy isn't just an abstract number. According to <strong>general
                relativity</strong>, energy curves spacetime‚Äîand vacuum energy would curve all of
                spacetime, everywhere, all the time. A positive vacuum energy acts like a
                <em>cosmological constant</em>, causing space itself to expand. If the quantum
                prediction were correct, the universe would have expanded so violently in its
                first moments that no stars, no galaxies, no atoms could ever have formed.
                We wouldn't exist to wonder about it.
            </p>

            <h2>The Mysterious Near-Cancellation</h2>
            <p>
                Something extraordinary is happening. The vacuum energy from quantum fluctuations
                must be almost perfectly canceled by <em>something else</em>‚Äîsome unknown physics
                that subtracts away 120 orders of magnitude worth of energy, leaving only the
                tiny residue we observe as dark energy. This isn't like measuring a temperature
                and being off by a few degrees. It's like predicting a bank balance of
                $1,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000
                and finding you actually have <strong>$1</strong>.
            </p>

            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-year">1916</div>
                    <div class="timeline-event">Walther Nernst first identifies the problem of vacuum energy in physics</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-year">1967</div>
                    <div class="timeline-event">Yakov Zeldovich calculates quantum contributions; discrepancy becomes clear</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-year">1989</div>
                    <div class="timeline-event">Steven Weinberg's "no-boundary" review establishes 120 orders as the crisis</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-year">1998</div>
                    <div class="timeline-event">Discovery of cosmic acceleration‚Äîdark energy is real, but tiny</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-year">Today</div>
                    <div class="timeline-event">No accepted solution. Called "the worst problem of fine-tuning in physics"</div>
                </div>
            </div>

            <h2>The Fine-Tuning Problem</h2>
            <p>
                The vacuum catastrophe is often called the most severe <strong>fine-tuning problem</strong>
                in physics. For the universe to exist as we observe it, the cosmological constant
                must be set to one part in 10¬π¬≤‚Å∞. No known physical principle explains this.
                Proposed solutions range from <em>supersymmetry</em> (which might provide canceling
                contributions) to the <em>anthropic principle</em> (maybe only universes with tiny
                cosmological constants can have observers) to <em>modified gravity theories</em>
                that change how vacuum energy couples to spacetime.
            </p>

            <h2>An Unsolved Mystery</h2>
            <p>
                As of today, there is <strong>no generally accepted explanation</strong> for why
                the quantum vacuum doesn't tear the universe apart. The vacuum catastrophe stands
                as one of the deepest unsolved problems in theoretical physics‚Äîa glaring sign that
                something fundamental is missing from our understanding. When quantum mechanics
                meets general relativity in the arena of empty space itself, the result is a
                contradiction so enormous it defies imagination. The nothing that contains
                everything remains, for now, physics' greatest embarrassment and perhaps its
                greatest clue to new physics.
            </p>
        </div>

        <footer>
            <p>
                Sources:
                <a href="https://en.wikipedia.org/wiki/Cosmological_constant_problem">Wikipedia</a> |
                <a href="https://www.quantamagazine.org/">Quanta Magazine</a> |
                <a href="https://physicscommunication.ie/nothing-matters-how-the-study-of-vacuum-energy-is-proving-catastrophic/">TCD Physics</a>
            </p>
        </footer>
    </div>

    <script>
        const canvas = document.getElementById('vacuumCanvas');
        const ctx = canvas.getContext('2d');
        const dpr = window.devicePixelRatio || 1;

        let zoomLevel = 0;
        let planckCutoff = 19;
        let time = 0;

        // Virtual particles
        let particles = [];

        function resizeCanvas() {
            const rect = canvas.parentElement.getBoundingClientRect();
            const size = rect.width - 40;
            canvas.width = size * dpr;
            canvas.height = size * 0.8 * dpr;
            canvas.style.width = size + 'px';
            canvas.style.height = size * 0.8 + 'px';
            ctx.scale(dpr, dpr);
        }

        resizeCanvas();
        window.addEventListener('resize', () => {
            ctx.setTransform(1, 0, 0, 1, 0, 0);
            resizeCanvas();
        });

        class VirtualParticle {
            constructor(x, y, energy) {
                this.x = x;
                this.y = y;
                this.energy = energy;
                this.life = 0;
                this.maxLife = 20 + Math.random() * 40;
                this.size = 2 + energy * 3;
                this.partner = null;
                this.isAntiparticle = false;
                this.hue = energy > 0.5 ? 280 : 200;
            }

            update() {
                this.life++;
                if (this.partner) {
                    // Move toward partner for annihilation
                    const dx = this.partner.x - this.x;
                    const dy = this.partner.y - this.y;
                    this.x += dx * 0.1;
                    this.y += dy * 0.1;
                }
            }

            draw(ctx) {
                const alpha = Math.sin((this.life / this.maxLife) * Math.PI);
                const currentSize = this.size * alpha;

                // Glow
                const gradient = ctx.createRadialGradient(
                    this.x, this.y, 0,
                    this.x, this.y, currentSize * 3
                );
                gradient.addColorStop(0, `hsla(${this.hue}, 80%, 60%, ${alpha * 0.8})`);
                gradient.addColorStop(0.5, `hsla(${this.hue}, 80%, 50%, ${alpha * 0.3})`);
                gradient.addColorStop(1, `hsla(${this.hue}, 80%, 40%, 0)`);

                ctx.beginPath();
                ctx.arc(this.x, this.y, currentSize * 3, 0, Math.PI * 2);
                ctx.fillStyle = gradient;
                ctx.fill();

                // Core
                ctx.beginPath();
                ctx.arc(this.x, this.y, currentSize, 0, Math.PI * 2);
                ctx.fillStyle = `hsla(${this.hue}, 90%, 70%, ${alpha})`;
                ctx.fill();

                // Antiparticle indicator
                if (this.isAntiparticle) {
                    ctx.strokeStyle = `hsla(${this.hue + 60}, 90%, 80%, ${alpha})`;
                    ctx.lineWidth = 1;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, currentSize + 2, 0, Math.PI * 2);
                    ctx.stroke();
                }
            }

            isDead() {
                return this.life >= this.maxLife;
            }
        }

        function spawnParticlePair(w, h) {
            const x = Math.random() * w;
            const y = Math.random() * h;
            const energy = Math.random();

            // Scale spawn rate with Planck cutoff
            const spawnRate = planckCutoff / 19;

            if (Math.random() < 0.1 * spawnRate) {
                const p1 = new VirtualParticle(x - 5, y, energy);
                const p2 = new VirtualParticle(x + 5, y, energy);
                p2.isAntiparticle = true;
                p2.hue = p1.hue + 60;
                p1.partner = p2;
                p2.partner = p1;

                particles.push(p1, p2);
            }
        }

        function drawEnergyScale(w, h) {
            const barWidth = 40;
            const barX = w - barWidth - 20;
            const barHeight = h - 60;

            // Background
            ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
            ctx.fillRect(barX - 10, 20, barWidth + 20, barHeight + 20);

            // Observed value (tiny sliver at bottom)
            const observedHeight = 5;
            ctx.fillStyle = '#69f0ae';
            ctx.fillRect(barX, 20 + barHeight - observedHeight, barWidth, observedHeight);

            // QFT prediction (would extend far beyond canvas)
            const predictedRatio = Math.min(1, Math.pow(10, zoomLevel - 120));
            const predictedHeight = Math.max(10, barHeight * predictedRatio);

            const gradient = ctx.createLinearGradient(barX, 20 + barHeight - predictedHeight, barX, 20 + barHeight);
            gradient.addColorStop(0, '#ff5252');
            gradient.addColorStop(1, '#e040fb');

            ctx.fillStyle = gradient;
            ctx.fillRect(barX, 20 + barHeight - predictedHeight, barWidth, predictedHeight);

            // Labels
            ctx.fillStyle = '#fff';
            ctx.font = '10px Georgia';
            ctx.textAlign = 'center';

            ctx.fillStyle = '#69f0ae';
            ctx.fillText('Observed', barX + barWidth/2, 20 + barHeight + 15);

            if (predictedHeight > 20) {
                ctx.fillStyle = '#ff5252';
                ctx.fillText('QFT', barX + barWidth/2, 20 + barHeight - predictedHeight - 5);
            }

            // Zoom indicator
            ctx.fillStyle = '#ce93d8';
            ctx.font = '9px Georgia';
            ctx.fillText(`10^${zoomLevel}`, barX + barWidth/2, 15);
        }

        function drawDiscrepancyVisualization(w, h) {
            const centerX = w / 2 - 30;
            const centerY = h / 2;

            // Title
            ctx.fillStyle = '#ce93d8';
            ctx.font = '14px Georgia';
            ctx.textAlign = 'center';
            ctx.fillText('Energy Density Comparison', centerX, 30);

            // Draw observed circle (tiny)
            const observedRadius = 5;
            ctx.beginPath();
            ctx.arc(centerX, centerY, observedRadius, 0, Math.PI * 2);
            ctx.fillStyle = '#69f0ae';
            ctx.fill();

            ctx.fillStyle = '#69f0ae';
            ctx.font = '11px Georgia';
            ctx.fillText('Observed', centerX, centerY + observedRadius + 20);
            ctx.font = '9px Georgia';
            ctx.fillText('(~10‚Åª‚Åπ J/m¬≥)', centerX, centerY + observedRadius + 35);

            // Draw predicted circle (scaled based on zoom)
            // At zoom=0, show it as extending beyond canvas
            // At zoom=120, it equals observed
            const scaleFactor = Math.pow(10, (120 - zoomLevel) / 40);
            const predictedRadius = Math.min(w * 2, observedRadius * scaleFactor);

            if (predictedRadius > observedRadius + 5) {
                ctx.beginPath();
                ctx.arc(centerX, centerY, Math.min(predictedRadius, w/2), 0, Math.PI * 2);
                ctx.strokeStyle = 'rgba(255, 82, 82, 0.5)';
                ctx.lineWidth = 2;
                ctx.setLineDash([5, 5]);
                ctx.stroke();
                ctx.setLineDash([]);

                // Arrow pointing outward
                if (predictedRadius > w/2) {
                    ctx.fillStyle = '#ff5252';
                    ctx.font = '12px Georgia';
                    ctx.fillText('QFT prediction extends', centerX, h - 60);
                    ctx.fillText(`10^${120 - zoomLevel}√ó further...`, centerX, h - 40);
                }
            }
        }

        function draw() {
            const w = canvas.width / dpr;
            const h = canvas.height / dpr;

            // Background - deep space
            ctx.fillStyle = '#0a0015';
            ctx.fillRect(0, 0, w, h);

            // Subtle grid
            ctx.strokeStyle = 'rgba(156, 39, 176, 0.1)';
            ctx.lineWidth = 0.5;
            for (let x = 0; x < w; x += 30) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, h);
                ctx.stroke();
            }
            for (let y = 0; y < h; y += 30) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(w, y);
                ctx.stroke();
            }

            // Spawn virtual particles
            spawnParticlePair(w - 80, h);

            // Update and draw particles
            particles = particles.filter(p => !p.isDead());
            particles.forEach(p => {
                p.update();
                p.draw(ctx);
            });

            // Annihilation flashes
            particles.forEach(p => {
                if (p.partner && p.life > p.maxLife * 0.8) {
                    const midX = (p.x + p.partner.x) / 2;
                    const midY = (p.y + p.partner.y) / 2;
                    const flashSize = 10 * (1 - (p.life - p.maxLife * 0.8) / (p.maxLife * 0.2));

                    ctx.beginPath();
                    ctx.arc(midX, midY, flashSize, 0, Math.PI * 2);
                    ctx.fillStyle = `rgba(255, 255, 255, ${flashSize / 10})`;
                    ctx.fill();
                }
            });

            // Draw scale comparison
            drawEnergyScale(w, h);

            // Draw discrepancy visualization
            drawDiscrepancyVisualization(w, h);

            // Info text
            ctx.fillStyle = 'rgba(206, 147, 216, 0.7)';
            ctx.font = '11px Georgia';
            ctx.textAlign = 'left';
            ctx.fillText('Virtual particle pairs constantly appear and annihilate', 15, h - 20);

            time++;
            requestAnimationFrame(draw);
        }

        // Update explanation text based on zoom
        function updateExplanation() {
            const text = document.getElementById('explanationText');
            if (zoomLevel < 30) {
                text.innerHTML = 'At this scale, the QFT prediction is so large it would extend far beyond the visible universe. The observed value is an invisible speck.';
            } else if (zoomLevel < 80) {
                text.innerHTML = 'Even zooming out by tens of orders of magnitude, the discrepancy remains incomprehensible. No known physics explains this cancellation.';
            } else {
                text.innerHTML = 'Only at 10¬π¬≤‚Å∞√ó zoom do the values become comparable. This level of fine-tuning is called "the worst problem in physics."';
            }
        }

        // Event listeners
        document.getElementById('zoomSlider').addEventListener('input', (e) => {
            zoomLevel = parseInt(e.target.value);
            document.getElementById('zoomValue').textContent =
                zoomLevel === 0 ? 'Linear' : `10^${zoomLevel}`;
            updateExplanation();
        });

        document.getElementById('cutoffSlider').addEventListener('input', (e) => {
            planckCutoff = parseInt(e.target.value);
            document.getElementById('cutoffValue').textContent = `10^${planckCutoff} GeV`;

            // Update predicted value display
            const exponent = 113 - (19 - planckCutoff) * 4;
            document.getElementById('predictedValue').textContent = `~10^${exponent} J/m¬≥`;
        });

        // Initialize
        draw();
    </script>
</body>
</html>
