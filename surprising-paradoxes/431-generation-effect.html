<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Generation Effect | Surprising Paradoxes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #e8e8e8;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding-top: 20px;
        }

        h1 {
            font-size: 2.5em;
            color: #ffd700;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            font-size: 1.3em;
            color: #87ceeb;
            font-style: italic;
        }

        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #87ceeb;
            text-decoration: none;
            font-size: 1em;
            opacity: 0.8;
            transition: opacity 0.3s;
        }

        .back-link:hover {
            opacity: 1;
        }

        .section {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        h2 {
            color: #ffd700;
            margin-bottom: 20px;
            font-size: 1.5em;
            border-bottom: 2px solid rgba(255,215,0,0.3);
            padding-bottom: 10px;
        }

        h3 {
            color: #87ceeb;
            margin: 20px 0 15px 0;
            font-size: 1.2em;
        }

        p {
            line-height: 1.8;
            margin-bottom: 15px;
            color: #d0d0d0;
        }

        .highlight {
            color: #ffd700;
            font-weight: bold;
        }

        /* Experiment Styles */
        .experiment-container {
            text-align: center;
        }

        .phase-indicator {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .phase {
            padding: 10px 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            font-size: 0.9em;
            opacity: 0.5;
            transition: all 0.3s;
        }

        .phase.active {
            opacity: 1;
            background: rgba(255,215,0,0.3);
            color: #ffd700;
        }

        .phase.completed {
            opacity: 0.7;
            background: rgba(0,255,100,0.2);
            color: #90ee90;
        }

        .word-display {
            font-size: 2.5em;
            margin: 40px 0;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
        }

        .cue-word {
            color: #87ceeb;
        }

        .arrow {
            color: #666;
            font-size: 0.8em;
        }

        .target-word {
            color: #90ee90;
        }

        .target-word.generate {
            color: #ffd700;
        }

        .generate-input {
            font-size: 2em;
            padding: 10px 20px;
            width: 200px;
            text-align: center;
            background: rgba(255,255,255,0.1);
            border: 2px solid #ffd700;
            border-radius: 10px;
            color: #ffd700;
            outline: none;
        }

        .generate-input:focus {
            background: rgba(255,215,0,0.1);
        }

        .condition-label {
            font-size: 1em;
            color: #888;
            margin-bottom: 20px;
        }

        .condition-label.read {
            color: #90ee90;
        }

        .condition-label.generate {
            color: #ffd700;
        }

        .hint {
            font-size: 0.9em;
            color: #666;
            margin-top: 10px;
        }

        .btn {
            background: linear-gradient(135deg, #ffd700 0%, #ffaa00 100%);
            color: #1a1a2e;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            margin: 10px;
            transition: all 0.3s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255,215,0,0.4);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn.secondary {
            background: linear-gradient(135deg, #87ceeb 0%, #5fa8d3 100%);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ffd700, #ffaa00);
            border-radius: 4px;
            transition: width 0.3s;
        }

        .progress-text {
            font-size: 0.9em;
            color: #888;
        }

        /* Recall Test Styles */
        .recall-input {
            font-size: 1.5em;
            padding: 15px 25px;
            width: 250px;
            text-align: center;
            background: rgba(255,255,255,0.1);
            border: 2px solid #87ceeb;
            border-radius: 10px;
            color: #fff;
            outline: none;
            margin: 20px 0;
        }

        .recall-feedback {
            font-size: 1.2em;
            margin: 15px 0;
            min-height: 30px;
        }

        .correct {
            color: #90ee90;
        }

        .incorrect {
            color: #ff6b6b;
        }

        /* Results Styles */
        .results-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }

        .result-box {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
        }

        .result-box.read {
            border: 2px solid #90ee90;
        }

        .result-box.generate {
            border: 2px solid #ffd700;
        }

        .result-score {
            font-size: 3.5em;
            font-weight: bold;
            margin: 15px 0;
        }

        .result-box.read .result-score {
            color: #90ee90;
        }

        .result-box.generate .result-score {
            color: #ffd700;
        }

        .result-label {
            font-size: 1.1em;
            color: #888;
        }

        .result-detail {
            font-size: 0.9em;
            color: #666;
            margin-top: 10px;
        }

        .comparison-bar {
            margin: 30px 0;
        }

        .bar-container {
            display: flex;
            height: 50px;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .bar-read {
            background: linear-gradient(90deg, #90ee90, #5fa86a);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #1a1a2e;
            font-weight: bold;
            transition: width 0.5s;
        }

        .bar-generate {
            background: linear-gradient(90deg, #ffd700, #ffaa00);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #1a1a2e;
            font-weight: bold;
            transition: width 0.5s;
        }

        .effect-size {
            font-size: 1.8em;
            color: #ffd700;
            margin: 20px 0;
            padding: 20px;
            background: rgba(255,215,0,0.1);
            border-radius: 10px;
        }

        /* Visualization */
        .brain-visual {
            position: relative;
            width: 300px;
            height: 200px;
            margin: 30px auto;
        }

        .neural-pathway {
            position: absolute;
            width: 4px;
            background: #ffd700;
            border-radius: 2px;
            opacity: 0;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        /* Word List Display */
        .word-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }

        .word-item {
            padding: 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            font-size: 0.9em;
        }

        .word-item.read-item {
            border-left: 3px solid #90ee90;
        }

        .word-item.generate-item {
            border-left: 3px solid #ffd700;
        }

        .word-item .cue {
            color: #888;
        }

        .word-item .target {
            color: #fff;
            font-weight: bold;
        }

        /* Info Cards */
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .info-card {
            background: rgba(255,255,255,0.05);
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid #ffd700;
        }

        .info-card h4 {
            color: #87ceeb;
            margin-bottom: 10px;
        }

        .quote {
            font-style: italic;
            color: #aaa;
            border-left: 3px solid #ffd700;
            padding-left: 15px;
            margin: 20px 0;
        }

        .citation {
            font-size: 0.85em;
            color: #888;
            margin-top: 15px;
        }

        .timer {
            font-size: 3em;
            color: #ffd700;
            margin: 20px 0;
        }

        .distractor-task {
            text-align: center;
            padding: 40px;
        }

        .math-problem {
            font-size: 2em;
            color: #87ceeb;
            margin: 20px 0;
        }

        .math-input {
            font-size: 1.5em;
            padding: 10px 20px;
            width: 150px;
            text-align: center;
            background: rgba(255,255,255,0.1);
            border: 2px solid #87ceeb;
            border-radius: 10px;
            color: #fff;
            outline: none;
        }

        .hidden {
            display: none !important;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 20px rgba(255,215,0,0.3); }
            50% { box-shadow: 0 0 40px rgba(255,215,0,0.6); }
        }

        .glowing {
            animation: glow 2s infinite;
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back to Paradoxes</a>

    <div class="container">
        <header>
            <h1>The Generation Effect</h1>
            <p class="subtitle">Why Creating Beats Consuming for Memory</p>
        </header>

        <!-- Introduction -->
        <div class="section" id="intro-section">
            <h2>The Paradox of Active Memory</h2>
            <p>
                You read a textbook for hours, highlighting passages and reviewing summaries.
                Your classmate barely reads anything‚Äîinstead, they quiz themselves, fill in blanks,
                and generate answers from memory. <span class="highlight">Who remembers more?</span>
            </p>
            <p>
                Counterintuitively, it's often the one who did <em>less</em> reading and <em>more</em> generating.
                This is the <span class="highlight">Generation Effect</span>‚Äîthe remarkable finding that
                information we actively produce is remembered far better than information we passively receive.
            </p>
            <p>
                In their landmark 1978 study, psychologists <strong>Norman Slamecka</strong> and <strong>Peter Graf</strong>
                discovered that when people generate a target word (like completing "wave ‚Üí c__e" to make "cave")
                they remember it significantly better than when they simply read the complete pair ("wave ‚Üí cave").
            </p>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" onclick="startExperiment()">Experience It Yourself</button>
            </div>
        </div>

        <!-- Experiment Section -->
        <div class="section hidden" id="experiment-section">
            <h2>Memory Experiment</h2>

            <div class="phase-indicator">
                <div class="phase" id="phase-study">üìñ Study</div>
                <div class="phase" id="phase-distract">üßÆ Distract</div>
                <div class="phase" id="phase-test">üìù Test</div>
                <div class="phase" id="phase-results">üìä Results</div>
            </div>

            <!-- Study Phase -->
            <div id="study-phase" class="experiment-container">
                <p>You'll see 12 word pairs. For some, you'll simply <span style="color: #90ee90;">READ</span> the pair.
                For others, you'll <span style="color: #ffd700;">GENERATE</span> the target word from a hint.</p>

                <div class="progress-bar">
                    <div class="progress-fill" id="study-progress" style="width: 0%"></div>
                </div>
                <div class="progress-text" id="study-counter">0 of 12</div>

                <div class="condition-label" id="condition-label">Get ready...</div>
                <div class="word-display" id="word-display">
                    <span class="cue-word" id="cue-word"></span>
                    <span class="arrow">‚Üí</span>
                    <span id="target-area"></span>
                </div>
                <div class="hint" id="hint-text"></div>

                <button class="btn" id="next-btn" onclick="nextStudyItem()" disabled>Next</button>
            </div>

            <!-- Distractor Phase -->
            <div id="distract-phase" class="distractor-task hidden">
                <h3>Brief Distraction Task</h3>
                <p>Solve these math problems (this creates a delay before recall)</p>

                <div class="timer" id="distract-timer">30</div>
                <div class="math-problem" id="math-problem"></div>
                <input type="text" class="math-input" id="math-input"
                       onkeypress="checkMath(event)" placeholder="?">
                <div id="math-feedback" style="margin-top: 10px; min-height: 25px;"></div>
                <p class="hint">Press Enter to submit</p>
            </div>

            <!-- Test Phase -->
            <div id="test-phase" class="experiment-container hidden">
                <h3>Recall Test</h3>
                <p>For each cue word, type the target word you learned</p>

                <div class="progress-bar">
                    <div class="progress-fill" id="test-progress" style="width: 0%"></div>
                </div>
                <div class="progress-text" id="test-counter">0 of 12</div>

                <div class="word-display">
                    <span class="cue-word" id="test-cue"></span>
                    <span class="arrow">‚Üí</span>
                    <span class="target-word">?</span>
                </div>

                <input type="text" class="recall-input" id="recall-input"
                       onkeypress="checkRecall(event)" placeholder="Type the word...">
                <div class="recall-feedback" id="recall-feedback"></div>
                <p class="hint">Press Enter to submit (or leave blank if you can't remember)</p>
            </div>

            <!-- Results Phase -->
            <div id="results-phase" class="hidden">
                <h3>Your Results</h3>

                <div class="results-grid">
                    <div class="result-box read">
                        <div class="result-label">READ Condition</div>
                        <div class="result-score" id="read-score">0%</div>
                        <div class="result-detail" id="read-detail">0 of 6 correct</div>
                    </div>
                    <div class="result-box generate">
                        <div class="result-label">GENERATE Condition</div>
                        <div class="result-score" id="generate-score">0%</div>
                        <div class="result-detail" id="generate-detail">0 of 6 correct</div>
                    </div>
                </div>

                <div class="comparison-bar">
                    <p>Memory Performance Comparison:</p>
                    <div class="bar-container">
                        <div class="bar-read" id="bar-read" style="width: 50%;">Read</div>
                        <div class="bar-generate" id="bar-generate" style="width: 50%;">Generate</div>
                    </div>
                </div>

                <div class="effect-size" id="effect-message">
                    Calculating effect...
                </div>

                <div id="word-breakdown" style="margin-top: 30px;">
                    <h4 style="color: #87ceeb; margin-bottom: 15px;">Word-by-Word Breakdown:</h4>
                    <div class="word-list" id="word-results"></div>
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn" onclick="restartExperiment()">Try Again</button>
                    <button class="btn secondary" onclick="showExplanation()">Learn Why</button>
                </div>
            </div>
        </div>

        <!-- Explanation Section -->
        <div class="section hidden" id="explanation-section">
            <h2>Why Generation Enhances Memory</h2>

            <div class="info-grid">
                <div class="info-card">
                    <h4>üß† Deeper Processing</h4>
                    <p>Generating requires semantic processing‚Äîunderstanding meaning,
                    searching memory, making connections. Reading often allows shallow,
                    surface-level processing.</p>
                </div>
                <div class="info-card">
                    <h4>üîó More Connections</h4>
                    <p>When you generate, you activate related concepts, create
                    retrieval pathways, and elaborate on the material in ways
                    passive reading doesn't require.</p>
                </div>
                <div class="info-card">
                    <h4>‚ö° Retrieval Practice</h4>
                    <p>Generation is essentially retrieval practice‚Äîpulling information
                    from memory strengthens the memory trace itself, making future
                    retrieval easier.</p>
                </div>
                <div class="info-card">
                    <h4>üéØ Effortful Encoding</h4>
                    <p>The effort required to generate creates a stronger, more
                    distinctive memory trace. "Desirable difficulties" enhance
                    long-term retention.</p>
                </div>
            </div>

            <h3>The Original Experiment (Slamecka & Graf, 1978)</h3>
            <p>
                In their seminal study, participants studied word pairs using one of two methods:
            </p>
            <ul style="margin: 15px 0; padding-left: 25px; line-height: 2;">
                <li><strong>Read condition:</strong> "RHYME: wave ‚Üí cave" (both words presented)</li>
                <li><strong>Generate condition:</strong> "RHYME: wave ‚Üí c__e" (complete the target)</li>
            </ul>
            <p>
                Across multiple experiments with different semantic relationships (synonyms, antonyms,
                rhymes, categories), generated words were consistently remembered <span class="highlight">10-20%
                better</span> than read words‚Äîeven though participants spent equal time on each.
            </p>

            <div class="quote">
                "The act of generation itself, independent of any extra processing time it might require,
                produces a memorial benefit."
                <div class="citation">‚Äî Slamecka & Graf, 1978</div>
            </div>

            <h3>Practical Applications</h3>
            <div class="info-grid">
                <div class="info-card">
                    <h4>üìö Studying</h4>
                    <p>Use flashcards, practice tests, and fill-in-the-blank exercises
                    instead of rereading. Generate answers before checking them.</p>
                </div>
                <div class="info-card">
                    <h4>üìù Note-Taking</h4>
                    <p>Summarize in your own words rather than copying verbatim.
                    The struggle to generate your own formulation strengthens memory.</p>
                </div>
                <div class="info-card">
                    <h4>üéì Teaching</h4>
                    <p>Design activities that require students to produce information,
                    not just consume it. Active learning leverages the generation effect.</p>
                </div>
                <div class="info-card">
                    <h4>üíº Training</h4>
                    <p>Scenario-based training where learners generate solutions
                    outperforms passive instruction for long-term skill retention.</p>
                </div>
            </div>

            <h3>The Irony</h3>
            <p>
                There's a profound irony in how we often study: we gravitate toward
                <em>easier</em> methods (rereading, highlighting) that feel productive but yield
                poor retention. Meanwhile, <em>harder</em> methods (self-testing, generation) feel
                more effortful and less fluent‚Äîyet produce dramatically better learning.
            </p>
            <p>
                Our intuitions about learning are often backwards. The generation effect reveals
                that <span class="highlight">struggle is the price of remembering</span>.
            </p>

            <div class="citation" style="margin-top: 30px; padding: 20px; background: rgba(255,255,255,0.03); border-radius: 10px;">
                <strong>Key References:</strong><br>
                ‚Ä¢ Slamecka, N. J., & Graf, P. (1978). The generation effect: Delineation of a phenomenon.
                <em>Journal of Experimental Psychology: Human Learning and Memory, 4</em>(6), 592‚Äì604.<br>
                ‚Ä¢ Craik, F. I. M., & Lockhart, R. S. (1972). Levels of processing: A framework for memory research.
                <em>Journal of Verbal Learning and Verbal Behavior, 11</em>(6), 671‚Äì684.<br>
                ‚Ä¢ Bertsch, S., et al. (2007). The generation effect: A meta-analytic review.
                <em>Memory & Cognition, 35</em>(2), 201‚Äì210.
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" onclick="restartExperiment()">Try the Experiment Again</button>
            </div>
        </div>
    </div>

    <script>
        // Word pairs for the experiment
        const allPairs = [
            // Rhyme pairs
            { cue: "MOON", target: "SPOON", hint: "SP___", relationship: "rhyme" },
            { cue: "LIGHT", target: "NIGHT", hint: "N____", relationship: "rhyme" },
            { cue: "TREE", target: "FREE", hint: "F___", relationship: "rhyme" },
            { cue: "KING", target: "RING", hint: "R___", relationship: "rhyme" },
            { cue: "SAND", target: "HAND", hint: "H___", relationship: "rhyme" },
            { cue: "BOAT", target: "COAT", hint: "C___", relationship: "rhyme" },
            // Opposite pairs
            { cue: "HOT", target: "COLD", hint: "C___", relationship: "opposite" },
            { cue: "DARK", target: "LIGHT", hint: "L____", relationship: "opposite" },
            { cue: "TALL", target: "SHORT", hint: "SH___", relationship: "opposite" },
            { cue: "FAST", target: "SLOW", hint: "SL__", relationship: "opposite" },
            { cue: "YOUNG", target: "OLD", hint: "O__", relationship: "opposite" },
            { cue: "HARD", target: "SOFT", hint: "S___", relationship: "opposite" },
        ];

        let experimentPairs = [];
        let currentIndex = 0;
        let studyPhaseComplete = false;
        let testResults = { read: [], generate: [] };
        let testOrder = [];
        let currentTestIndex = 0;

        // Shuffle array
        function shuffle(array) {
            const arr = [...array];
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        }

        function startExperiment() {
            document.getElementById('intro-section').classList.add('hidden');
            document.getElementById('experiment-section').classList.remove('hidden');
            document.getElementById('explanation-section').classList.add('hidden');

            // Reset state
            currentIndex = 0;
            studyPhaseComplete = false;
            testResults = { read: [], generate: [] };

            // Shuffle and assign conditions
            const shuffled = shuffle(allPairs);
            experimentPairs = shuffled.map((pair, i) => ({
                ...pair,
                condition: i < 6 ? 'read' : 'generate'
            }));
            experimentPairs = shuffle(experimentPairs); // Shuffle again so conditions are mixed

            // Setup phases
            document.getElementById('phase-study').classList.add('active');
            document.getElementById('phase-distract').classList.remove('active', 'completed');
            document.getElementById('phase-test').classList.remove('active', 'completed');
            document.getElementById('phase-results').classList.remove('active', 'completed');

            // Show study phase
            document.getElementById('study-phase').classList.remove('hidden');
            document.getElementById('distract-phase').classList.add('hidden');
            document.getElementById('test-phase').classList.add('hidden');
            document.getElementById('results-phase').classList.add('hidden');

            showNextStudyItem();
        }

        function showNextStudyItem() {
            if (currentIndex >= experimentPairs.length) {
                startDistractorPhase();
                return;
            }

            const pair = experimentPairs[currentIndex];
            const progress = ((currentIndex) / experimentPairs.length) * 100;

            document.getElementById('study-progress').style.width = progress + '%';
            document.getElementById('study-counter').textContent = `${currentIndex} of ${experimentPairs.length}`;

            document.getElementById('cue-word').textContent = pair.cue;

            const labelEl = document.getElementById('condition-label');
            const targetArea = document.getElementById('target-area');
            const hintText = document.getElementById('hint-text');
            const nextBtn = document.getElementById('next-btn');

            if (pair.condition === 'read') {
                labelEl.textContent = 'üìñ READ this pair:';
                labelEl.className = 'condition-label read';
                targetArea.innerHTML = `<span class="target-word">${pair.target}</span>`;
                hintText.textContent = `(${pair.relationship})`;
                nextBtn.disabled = false;

                // Auto-advance after 3 seconds
                setTimeout(() => {
                    if (!studyPhaseComplete && currentIndex < experimentPairs.length) {
                        nextBtn.disabled = false;
                    }
                }, 2000);
            } else {
                labelEl.textContent = '‚úèÔ∏è GENERATE the word:';
                labelEl.className = 'condition-label generate';
                targetArea.innerHTML = `<input type="text" class="generate-input" id="generate-input"
                    placeholder="${pair.hint}" onkeypress="checkGenerate(event)" autofocus>`;
                hintText.textContent = `Hint: ${pair.relationship} of "${pair.cue}"`;
                nextBtn.disabled = true;

                document.getElementById('generate-input').focus();
            }
        }

        function checkGenerate(event) {
            if (event.key === 'Enter') {
                const input = document.getElementById('generate-input');
                const pair = experimentPairs[currentIndex];

                if (input.value.toUpperCase().trim() === pair.target) {
                    input.style.borderColor = '#90ee90';
                    input.style.color = '#90ee90';
                    document.getElementById('next-btn').disabled = false;

                    // Show correct answer
                    setTimeout(() => {
                        document.getElementById('target-area').innerHTML =
                            `<span class="target-word generate">${pair.target} ‚úì</span>`;
                    }, 500);
                } else {
                    input.style.borderColor = '#ff6b6b';
                    input.value = '';
                    input.placeholder = 'Try again...';

                    // Give hint after wrong attempt
                    setTimeout(() => {
                        input.placeholder = pair.hint;
                    }, 1000);
                }
            }
        }

        function nextStudyItem() {
            currentIndex++;
            showNextStudyItem();
        }

        // Distractor phase
        let distractorTimer;
        let mathProblems = [];
        let currentMathIndex = 0;

        function startDistractorPhase() {
            document.getElementById('phase-study').classList.remove('active');
            document.getElementById('phase-study').classList.add('completed');
            document.getElementById('phase-distract').classList.add('active');

            document.getElementById('study-phase').classList.add('hidden');
            document.getElementById('distract-phase').classList.remove('hidden');

            // Generate math problems
            mathProblems = [];
            for (let i = 0; i < 10; i++) {
                const a = Math.floor(Math.random() * 20) + 5;
                const b = Math.floor(Math.random() * 20) + 5;
                const op = Math.random() > 0.5 ? '+' : '-';
                const answer = op === '+' ? a + b : a - b;
                mathProblems.push({ problem: `${a} ${op} ${b} = ?`, answer });
            }
            currentMathIndex = 0;
            showMathProblem();

            let timeLeft = 30;
            document.getElementById('distract-timer').textContent = timeLeft;

            distractorTimer = setInterval(() => {
                timeLeft--;
                document.getElementById('distract-timer').textContent = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(distractorTimer);
                    startTestPhase();
                }
            }, 1000);
        }

        function showMathProblem() {
            if (currentMathIndex < mathProblems.length) {
                document.getElementById('math-problem').textContent = mathProblems[currentMathIndex].problem;
                document.getElementById('math-input').value = '';
                document.getElementById('math-input').focus();
            }
        }

        function checkMath(event) {
            if (event.key === 'Enter') {
                const input = document.getElementById('math-input');
                const answer = parseInt(input.value);
                const correct = mathProblems[currentMathIndex].answer;

                const feedback = document.getElementById('math-feedback');
                if (answer === correct) {
                    feedback.innerHTML = '<span style="color: #90ee90;">‚úì Correct!</span>';
                } else {
                    feedback.innerHTML = `<span style="color: #ff6b6b;">‚úó Answer: ${correct}</span>`;
                }

                currentMathIndex++;
                setTimeout(showMathProblem, 500);
            }
        }

        // Test phase
        function startTestPhase() {
            clearInterval(distractorTimer);

            document.getElementById('phase-distract').classList.remove('active');
            document.getElementById('phase-distract').classList.add('completed');
            document.getElementById('phase-test').classList.add('active');

            document.getElementById('distract-phase').classList.add('hidden');
            document.getElementById('test-phase').classList.remove('hidden');

            // Randomize test order
            testOrder = shuffle([...Array(experimentPairs.length).keys()]);
            currentTestIndex = 0;

            showNextTestItem();
        }

        function showNextTestItem() {
            if (currentTestIndex >= testOrder.length) {
                showResults();
                return;
            }

            const pairIndex = testOrder[currentTestIndex];
            const pair = experimentPairs[pairIndex];

            const progress = (currentTestIndex / testOrder.length) * 100;
            document.getElementById('test-progress').style.width = progress + '%';
            document.getElementById('test-counter').textContent = `${currentTestIndex} of ${testOrder.length}`;

            document.getElementById('test-cue').textContent = pair.cue;
            document.getElementById('recall-input').value = '';
            document.getElementById('recall-input').focus();
            document.getElementById('recall-feedback').textContent = '';
        }

        function checkRecall(event) {
            if (event.key === 'Enter') {
                const input = document.getElementById('recall-input');
                const pairIndex = testOrder[currentTestIndex];
                const pair = experimentPairs[pairIndex];

                const response = input.value.toUpperCase().trim();
                const correct = response === pair.target;

                // Record result
                const result = {
                    cue: pair.cue,
                    target: pair.target,
                    response: response || '(blank)',
                    correct: correct
                };

                if (pair.condition === 'read') {
                    testResults.read.push(result);
                } else {
                    testResults.generate.push(result);
                }

                // Show feedback
                const feedback = document.getElementById('recall-feedback');
                if (correct) {
                    feedback.innerHTML = `<span class="correct">‚úì Correct!</span>`;
                } else {
                    feedback.innerHTML = `<span class="incorrect">‚úó The answer was: ${pair.target}</span>`;
                }

                currentTestIndex++;
                setTimeout(showNextTestItem, 1000);
            }
        }

        // Results
        function showResults() {
            document.getElementById('phase-test').classList.remove('active');
            document.getElementById('phase-test').classList.add('completed');
            document.getElementById('phase-results').classList.add('active');

            document.getElementById('test-phase').classList.add('hidden');
            document.getElementById('results-phase').classList.remove('hidden');

            const readCorrect = testResults.read.filter(r => r.correct).length;
            const generateCorrect = testResults.generate.filter(r => r.correct).length;

            const readPercent = Math.round((readCorrect / 6) * 100);
            const generatePercent = Math.round((generateCorrect / 6) * 100);

            document.getElementById('read-score').textContent = readPercent + '%';
            document.getElementById('read-detail').textContent = `${readCorrect} of 6 correct`;

            document.getElementById('generate-score').textContent = generatePercent + '%';
            document.getElementById('generate-detail').textContent = `${generateCorrect} of 6 correct`;

            // Comparison bar
            const total = readPercent + generatePercent || 1;
            const readWidth = (readPercent / (readPercent + generatePercent || 1)) * 100 || 50;
            const genWidth = 100 - readWidth;

            document.getElementById('bar-read').style.width = readWidth + '%';
            document.getElementById('bar-generate').style.width = genWidth + '%';

            // Effect message
            const effectEl = document.getElementById('effect-message');
            const diff = generatePercent - readPercent;

            if (diff > 15) {
                effectEl.innerHTML = `üéØ <strong>Strong Generation Effect!</strong><br>
                    You remembered ${diff}% more words that you generated vs. read.`;
            } else if (diff > 0) {
                effectEl.innerHTML = `üìà <strong>Generation Effect Present</strong><br>
                    You remembered ${diff}% more generated words. The effect is real!`;
            } else if (diff === 0) {
                effectEl.innerHTML = `üìä <strong>Equal Performance</strong><br>
                    You scored the same on both. Individual results vary‚Äîthe effect is stronger in group data.`;
            } else {
                effectEl.innerHTML = `üîÑ <strong>Reversed Pattern</strong><br>
                    Sometimes individual results differ from group trends. Try again for more trials!`;
            }

            // Word breakdown
            const wordResultsEl = document.getElementById('word-results');
            wordResultsEl.innerHTML = '';

            testResults.read.forEach(r => {
                wordResultsEl.innerHTML += `
                    <div class="word-item read-item">
                        <span class="cue">${r.cue} ‚Üí</span>
                        <span class="target">${r.target}</span>
                        <span style="color: ${r.correct ? '#90ee90' : '#ff6b6b'}">
                            ${r.correct ? '‚úì' : '‚úó'}
                        </span>
                    </div>
                `;
            });

            testResults.generate.forEach(r => {
                wordResultsEl.innerHTML += `
                    <div class="word-item generate-item">
                        <span class="cue">${r.cue} ‚Üí</span>
                        <span class="target">${r.target}</span>
                        <span style="color: ${r.correct ? '#90ee90' : '#ff6b6b'}">
                            ${r.correct ? '‚úì' : '‚úó'}
                        </span>
                    </div>
                `;
            });
        }

        function restartExperiment() {
            startExperiment();
        }

        function showExplanation() {
            document.getElementById('experiment-section').classList.add('hidden');
            document.getElementById('explanation-section').classList.remove('hidden');
        }
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
