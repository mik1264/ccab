<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Phi Phenomenon - Surprising Paradoxes</title>
    <style>
        :root {
            --sage: #8A9A5B;
            --moss: #606C38;
            --earth: #DDA15E;
            --cream: #FEFAE0;
            --terracotta: #BC6C25;
            --dark-moss: #3d4423;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito', 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, var(--cream) 0%, #F4F1DE 50%, #EDE8D5 100%);
            min-height: 100vh;
            color: var(--dark-moss);
            line-height: 1.6;
        }

        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            text-decoration: none;
            color: var(--moss);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 100;
            background: rgba(255,255,255,0.9);
            padding: 10px 16px;
            border-radius: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .back-link:hover {
            background: var(--moss);
            color: white;
            transform: translateX(-3px);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 80px 20px 40px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        h1 {
            font-family: 'Lora', Georgia, serif;
            font-size: 2.8rem;
            color: var(--moss);
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.2rem;
            color: var(--terracotta);
            font-style: italic;
        }

        .experiment-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .experiment-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .experiment-header h2 {
            font-family: 'Lora', Georgia, serif;
            color: var(--moss);
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .demo-area {
            background: #1a1a2e;
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
        }

        .demo-canvas-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 250px;
            position: relative;
        }

        #phiCanvas {
            border-radius: 10px;
        }

        .speed-indicator {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(0,0,0,0.6);
            color: #4ade80;
            padding: 8px 16px;
            border-radius: 20px;
            font-family: monospace;
            font-size: 0.9rem;
        }

        .mode-indicator {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(0,0,0,0.6);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .demo-selector {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .demo-btn {
            padding: 12px 20px;
            border: 2px solid #ddd;
            border-radius: 25px;
            background: white;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .demo-btn:hover {
            border-color: var(--sage);
            background: #f8fff8;
        }

        .demo-btn.active {
            border-color: var(--moss);
            background: var(--moss);
            color: white;
        }

        .controls {
            display: flex;
            gap: 20px;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .control-group label {
            font-size: 0.85rem;
            color: var(--moss);
            font-weight: 600;
        }

        input[type="range"] {
            width: 150px;
            accent-color: var(--moss);
        }

        .control-value {
            font-family: monospace;
            color: var(--terracotta);
            font-weight: 600;
        }

        .btn-group {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .action-btn.primary {
            background: var(--moss);
            color: white;
        }

        .action-btn.primary:hover {
            background: var(--dark-moss);
            transform: translateY(-2px);
        }

        .action-btn.secondary {
            background: var(--sage);
            color: white;
        }

        .action-btn.secondary:hover {
            background: var(--moss);
        }

        .perception-question {
            background: linear-gradient(135deg, #fff9e6, #fff5d6);
            border: 2px solid var(--earth);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }

        .perception-question h3 {
            color: var(--moss);
            margin-bottom: 15px;
        }

        .perception-options {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .perception-btn {
            padding: 12px 25px;
            border: 2px solid var(--sage);
            border-radius: 25px;
            background: white;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .perception-btn:hover {
            background: var(--sage);
            color: white;
        }

        .perception-btn.selected {
            background: var(--moss);
            border-color: var(--moss);
            color: white;
        }

        .paradox-box {
            background: linear-gradient(135deg, var(--moss) 0%, var(--dark-moss) 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .paradox-box h3 {
            font-size: 1.3rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .paradox-box p {
            opacity: 0.95;
            line-height: 1.7;
        }

        .section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05);
        }

        .section h2 {
            font-family: 'Lora', Georgia, serif;
            color: var(--moss);
            font-size: 1.6rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .types-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .type-card {
            background: linear-gradient(135deg, #f8f9fa, #fff);
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border-left: 4px solid var(--sage);
        }

        .type-card h4 {
            color: var(--terracotta);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .type-card .visual {
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 15px 0;
            gap: 20px;
        }

        .type-card .dot {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--moss);
        }

        .type-card .arrow {
            font-size: 1.5rem;
            color: var(--terracotta);
        }

        .type-card p {
            color: #555;
            font-size: 0.9rem;
        }

        .frequency-chart {
            margin: 25px 0;
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
        }

        .frequency-chart h4 {
            text-align: center;
            color: var(--moss);
            margin-bottom: 20px;
        }

        .chart-bar-container {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .chart-label {
            width: 120px;
            font-size: 0.85rem;
            color: #555;
            font-weight: 600;
        }

        .chart-bar {
            flex: 1;
            height: 30px;
            background: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
        }

        .chart-fill {
            height: 100%;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 10px;
            color: white;
            font-weight: 600;
            font-size: 0.8rem;
        }

        .fill-flicker { background: linear-gradient(90deg, #ef4444, #f87171); }
        .fill-phi { background: linear-gradient(90deg, #8b5cf6, #a78bfa); }
        .fill-beta { background: linear-gradient(90deg, #22c55e, #4ade80); }
        .fill-smooth { background: linear-gradient(90deg, #3b82f6, #60a5fa); }

        .history-section {
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .history-section h2 {
            color: var(--moss);
            margin-bottom: 15px;
        }

        .discovery-story {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            border-left: 4px solid var(--terracotta);
        }

        .discovery-story h4 {
            color: var(--terracotta);
            margin-bottom: 10px;
        }

        .discovery-story p {
            color: #555;
            font-style: italic;
        }

        .timeline {
            position: relative;
            padding-left: 30px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 0;
            bottom: 0;
            width: 3px;
            background: var(--sage);
            border-radius: 3px;
        }

        .timeline-item {
            position: relative;
            margin-bottom: 20px;
            padding-left: 20px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -26px;
            top: 5px;
            width: 14px;
            height: 14px;
            background: var(--terracotta);
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .timeline-year {
            font-weight: 700;
            color: var(--moss);
            font-size: 1.1rem;
        }

        .timeline-text {
            color: #555;
            margin-top: 5px;
        }

        .applications-section {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
        }

        .applications-section h4 {
            color: #92400e;
            margin-bottom: 15px;
        }

        .applications-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
        }

        .application-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .application-item .icon {
            font-size: 2rem;
            margin-bottom: 8px;
        }

        .application-item .name {
            font-weight: 600;
            color: var(--moss);
            font-size: 0.9rem;
        }

        .gestalt-box {
            background: linear-gradient(135deg, #fdf4ff, #fae8ff);
            border: 2px solid #e879f9;
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }

        .gestalt-box h4 {
            color: #86198f;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .gestalt-box p {
            color: #581c87;
        }

        .quote-box {
            background: linear-gradient(135deg, var(--earth), #c9a658);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            margin-top: 30px;
            font-style: italic;
            font-size: 1.1rem;
        }

        .quote-box .attribution {
            margin-top: 15px;
            font-style: normal;
            font-weight: 700;
            opacity: 0.9;
        }

        @media (max-width: 600px) {
            h1 { font-size: 2rem; }
            .container { padding: 70px 15px 30px; }
            .demo-canvas-container { height: 200px; }
            input[type="range"] { width: 120px; }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600;700&family=Nunito:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back to Paradoxes</a>

    <div class="container">
        <header>
            <h1>The Phi Phenomenon</h1>
            <p class="subtitle">The illusion that makes movies, TV, and animation possible</p>
        </header>

        <div class="experiment-container">
            <div class="experiment-header">
                <h2>Experience Apparent Motion</h2>
                <p>Two stationary lights, flashing in sequence ‚Äî yet you see movement</p>
            </div>

            <div class="demo-selector">
                <button class="demo-btn active" data-demo="classic">Classic Phi</button>
                <button class="demo-btn" data-demo="beta">Beta Movement</button>
                <button class="demo-btn" data-demo="reverse">Reverse Phi</button>
                <button class="demo-btn" data-demo="multipoint">Multi-Point</button>
            </div>

            <div class="demo-area">
                <div class="mode-indicator" id="modeIndicator">Classic Phi Phenomenon</div>
                <div class="speed-indicator" id="speedIndicator">100ms</div>
                <div class="demo-canvas-container">
                    <canvas id="phiCanvas" width="700" height="200"></canvas>
                </div>
            </div>

            <div class="controls">
                <div class="control-group">
                    <label>Interval (ms)</label>
                    <input type="range" id="intervalSlider" min="16" max="500" value="100">
                    <span class="control-value" id="intervalValue">100ms</span>
                </div>
                <div class="control-group">
                    <label>Distance</label>
                    <input type="range" id="distanceSlider" min="50" max="300" value="150">
                    <span class="control-value" id="distanceValue">150px</span>
                </div>
                <div class="btn-group">
                    <button class="action-btn primary" id="btnPlay">‚ñ∂ Play</button>
                    <button class="action-btn secondary" id="btnStep">Step</button>
                </div>
            </div>

            <div class="perception-question">
                <h3>What do you perceive?</h3>
                <div class="perception-options">
                    <button class="perception-btn" data-perception="flicker">Two flickering lights</button>
                    <button class="perception-btn" data-perception="motion">One light moving</button>
                    <button class="perception-btn" data-perception="ghost">Ghost-like motion between</button>
                </div>
            </div>
        </div>

        <div class="paradox-box">
            <h3>üé¨ The Paradox</h3>
            <p>
                Nothing is actually moving. There are only two lights, alternating on and off.
                Yet your brain <em>constructs</em> motion that doesn't exist ‚Äî and you cannot
                stop seeing it, even knowing the truth. This "illusory motion" is so compelling
                that it forms the basis of <strong>all cinema, television, animation, and video games</strong>.
                Every movie you've ever watched was just still pictures flickering ‚Äî yet you saw life.
            </p>
        </div>

        <div class="section">
            <h2>üî¨ Types of Apparent Motion</h2>
            <p>Researchers distinguish several related phenomena based on timing and stimulus properties:</p>

            <div class="types-grid">
                <div class="type-card">
                    <h4>Pure Phi (œÜ)</h4>
                    <div class="visual">
                        <div class="dot" style="opacity: 0.3"></div>
                        <span class="arrow">‚ú®</span>
                        <div class="dot" style="opacity: 0.3"></div>
                    </div>
                    <p>At high frequencies, you see "objectless motion" ‚Äî a ghostly something moving between positions, without the dots themselves seeming to move.</p>
                </div>
                <div class="type-card">
                    <h4>Beta Movement (Œ≤)</h4>
                    <div class="visual">
                        <div class="dot"></div>
                        <span class="arrow">‚Üí</span>
                        <div class="dot" style="opacity: 0.3"></div>
                    </div>
                    <p>At optimal timing (~60-200ms), you perceive a single object smoothly traveling from position A to position B. This is what cinema uses.</p>
                </div>
                <div class="type-card">
                    <h4>Reverse Phi</h4>
                    <div class="visual">
                        <div class="dot" style="background: white; border: 2px solid #333;"></div>
                        <span class="arrow">‚Üê</span>
                        <div class="dot" style="background: #333;"></div>
                    </div>
                    <p>When dots have opposite polarity (light/dark), motion is perceived in the <em>opposite</em> direction! Discovered in 1975.</p>
                </div>
                <div class="type-card">
                    <h4>Sigma Movement</h4>
                    <div class="visual">
                        <div class="dot" style="transform: scale(0.7);"></div>
                        <span class="arrow">‚Üî</span>
                        <div class="dot" style="transform: scale(1.3);"></div>
                    </div>
                    <p>Size changes between frames can create an illusion of motion in depth ‚Äî toward or away from you.</p>
                </div>
            </div>

            <div class="frequency-chart">
                <h4>What You See at Different Intervals</h4>
                <div class="chart-bar-container">
                    <span class="chart-label">&lt;30ms</span>
                    <div class="chart-bar">
                        <div class="chart-fill fill-flicker" style="width: 100%;">Simultaneous / Flicker</div>
                    </div>
                </div>
                <div class="chart-bar-container">
                    <span class="chart-label">30-60ms</span>
                    <div class="chart-bar">
                        <div class="chart-fill fill-phi" style="width: 85%;">Pure Phi (ghost motion)</div>
                    </div>
                </div>
                <div class="chart-bar-container">
                    <span class="chart-label">60-200ms</span>
                    <div class="chart-bar">
                        <div class="chart-fill fill-beta" style="width: 100%;">Beta Movement (optimal)</div>
                    </div>
                </div>
                <div class="chart-bar-container">
                    <span class="chart-label">&gt;200ms</span>
                    <div class="chart-bar">
                        <div class="chart-fill fill-smooth" style="width: 70%;">Succession (two separate events)</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="history-section">
            <h2>üìú The Train Journey Discovery</h2>

            <div class="discovery-story">
                <h4>"I was on a train near Frankfurt..."</h4>
                <p>
                    In 1910, psychologist Max Wertheimer noticed something strange about railway signals.
                    Two lights, alternating ‚Äî yet he saw one light moving back and forth. He got off at
                    Frankfurt, bought a toy stroboscope, and began experiments that would give birth to
                    an entirely new school of psychology: Gestalt theory.
                </p>
            </div>

            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-year">1912</div>
                    <div class="timeline-text">Wertheimer publishes "Experimental Studies on the Perception of Motion," describing phi and coining the term. Wolfgang K√∂hler and Kurt Koffka are his test subjects.</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-year">1915</div>
                    <div class="timeline-text">Wertheimer, K√∂hler, and Koffka found the Gestalt psychology movement, arguing the brain perceives wholes before parts.</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-year">1936</div>
                    <div class="timeline-text">Josef Ternus demonstrates that motion perception depends on grouping ‚Äî identical stimuli can produce different perceived motions.</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-year">1975</div>
                    <div class="timeline-text">Anstis & Rogers discover "reverse phi" ‚Äî contrast-reversed stimuli produce motion perception in the opposite direction.</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-year">2008</div>
                    <div class="timeline-text">Researchers identify neural correlates in area MT/V5, showing phi activates motion-detection circuits even without actual motion.</div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üß† Why Does This Happen?</h2>
            <p>Your visual system evolved to detect motion ‚Äî predators, prey, falling objects.
            Rather than waiting for continuous visual input, it <em>predicts</em> motion from sparse cues:</p>

            <ul style="margin: 15px 0 15px 25px; color: #555;">
                <li><strong>Temporal integration</strong> ‚Äî The brain smooths over brief gaps (up to ~100ms) to create continuous experience.</li>
                <li><strong>Motion extrapolation</strong> ‚Äî If something was "here" then "there," the brain assumes it moved between.</li>
                <li><strong>Shortest path assumption</strong> ‚Äî The visual system prefers the simplest motion explanation.</li>
                <li><strong>MT/V5 activation</strong> ‚Äî Brain regions for motion detection fire even for illusory motion.</li>
            </ul>

            <div class="gestalt-box">
                <h4>üîÆ The Gestalt Insight</h4>
                <p>
                    Phi demonstrated that perception is <em>constructed</em>, not passively received. Your brain
                    doesn't just record what's there ‚Äî it actively creates a coherent experience. As the Gestaltists
                    famously put it: <strong>"The whole is different from the sum of its parts."</strong>
                </p>
            </div>

            <div class="applications-section">
                <h4>üé• Technologies Built on Phi</h4>
                <div class="applications-grid">
                    <div class="application-item">
                        <div class="icon">üé¨</div>
                        <div class="name">Cinema (24 fps)</div>
                    </div>
                    <div class="application-item">
                        <div class="icon">üì∫</div>
                        <div class="name">Television (30/60 fps)</div>
                    </div>
                    <div class="application-item">
                        <div class="icon">üéÆ</div>
                        <div class="name">Video Games</div>
                    </div>
                    <div class="application-item">
                        <div class="icon">‚úèÔ∏è</div>
                        <div class="name">Animation</div>
                    </div>
                    <div class="application-item">
                        <div class="icon">üì±</div>
                        <div class="name">Digital Displays</div>
                    </div>
                    <div class="application-item">
                        <div class="icon">üí°</div>
                        <div class="name">LED Signs</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üéØ Try This</h2>
            <ul style="margin: 15px 0 15px 25px; color: #555;">
                <li><strong>Slow it down</strong> ‚Äî At ~300ms, you'll see two separate events instead of motion.</li>
                <li><strong>Speed it up</strong> ‚Äî Below 30ms, the two lights seem to flicker simultaneously.</li>
                <li><strong>Try Reverse Phi</strong> ‚Äî Watch motion go "backwards" when polarity flips!</li>
                <li><strong>Increase distance</strong> ‚Äî Motion persists over surprisingly large gaps.</li>
                <li><strong>Watch a flip book</strong> ‚Äî Same principle, ancient technology.</li>
            </ul>
        </div>

        <div class="quote-box">
            "There are wholes, the behavior of which is not determined by that of their individual elements."
            <div class="attribution">‚Äî Max Wertheimer, 1924</div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('phiCanvas');
        const ctx = canvas.getContext('2d');

        // State
        let demoMode = 'classic';
        let interval = 100;
        let distance = 150;
        let isPlaying = false;
        let currentPosition = 0; // 0 = left, 1 = right
        let animationTimer = null;

        // Responsive canvas
        function resizeCanvas() {
            const container = canvas.parentElement;
            const rect = container.getBoundingClientRect();
            const dpr = window.devicePixelRatio || 1;

            canvas.width = Math.min(700, rect.width - 20) * dpr;
            canvas.height = 200 * dpr;
            canvas.style.width = Math.min(700, rect.width - 20) + 'px';
            canvas.style.height = '200px';

            ctx.scale(dpr, dpr);
            draw();
        }

        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        function getDisplaySize() {
            const dpr = window.devicePixelRatio || 1;
            return {
                width: canvas.width / dpr,
                height: canvas.height / dpr
            };
        }

        // Drawing
        function draw() {
            const { width, height } = getDisplaySize();
            const centerX = width / 2;
            const centerY = height / 2;

            // Clear
            ctx.fillStyle = '#1a1a2e';
            ctx.fillRect(0, 0, width, height);

            const leftX = centerX - distance / 2;
            const rightX = centerX + distance / 2;
            const dotRadius = 25;

            if (demoMode === 'classic' || demoMode === 'beta') {
                // Classic phi / beta movement
                if (currentPosition === 0) {
                    drawGlowingDot(leftX, centerY, dotRadius, '#4ade80');
                    drawDimDot(rightX, centerY, dotRadius);
                } else {
                    drawDimDot(leftX, centerY, dotRadius);
                    drawGlowingDot(rightX, centerY, dotRadius, '#4ade80');
                }
            } else if (demoMode === 'reverse') {
                // Reverse phi - polarity reversal
                if (currentPosition === 0) {
                    drawGlowingDot(leftX, centerY, dotRadius, '#ffffff');
                    drawDimDot(rightX, centerY, dotRadius);
                } else {
                    drawGlowingDot(leftX, centerY, dotRadius, '#333333');
                    drawGlowingDot(rightX, centerY, dotRadius, '#ffffff');
                }
            } else if (demoMode === 'multipoint') {
                // Multi-point apparent motion
                const points = 5;
                const spacing = distance / (points - 1);
                const startX = centerX - distance / 2;

                for (let i = 0; i < points; i++) {
                    const x = startX + i * spacing;
                    if (i === currentPosition % points) {
                        drawGlowingDot(x, centerY, dotRadius * 0.7, '#4ade80');
                    } else {
                        drawDimDot(x, centerY, dotRadius * 0.7);
                    }
                }
            }

            // Position labels
            ctx.fillStyle = 'rgba(255,255,255,0.3)';
            ctx.font = '12px Nunito';
            ctx.textAlign = 'center';
            ctx.fillText('Position A', leftX, centerY + 50);
            ctx.fillText('Position B', rightX, centerY + 50);
        }

        function drawGlowingDot(x, y, radius, color) {
            // Glow
            const gradient = ctx.createRadialGradient(x, y, 0, x, y, radius * 2);
            gradient.addColorStop(0, color);
            gradient.addColorStop(0.5, color + '40');
            gradient.addColorStop(1, 'transparent');
            ctx.fillStyle = gradient;
            ctx.beginPath();
            ctx.arc(x, y, radius * 2, 0, Math.PI * 2);
            ctx.fill();

            // Core
            ctx.fillStyle = color;
            ctx.beginPath();
            ctx.arc(x, y, radius, 0, Math.PI * 2);
            ctx.fill();
        }

        function drawDimDot(x, y, radius) {
            ctx.fillStyle = 'rgba(255,255,255,0.1)';
            ctx.beginPath();
            ctx.arc(x, y, radius, 0, Math.PI * 2);
            ctx.fill();

            ctx.strokeStyle = 'rgba(255,255,255,0.2)';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.arc(x, y, radius, 0, Math.PI * 2);
            ctx.stroke();
        }

        // Animation
        function step() {
            if (demoMode === 'multipoint') {
                currentPosition = (currentPosition + 1) % 5;
            } else {
                currentPosition = 1 - currentPosition;
            }
            draw();
        }

        function startAnimation() {
            if (animationTimer) clearInterval(animationTimer);
            animationTimer = setInterval(step, interval);
            isPlaying = true;
            document.getElementById('btnPlay').textContent = '‚è∏ Pause';
        }

        function stopAnimation() {
            if (animationTimer) {
                clearInterval(animationTimer);
                animationTimer = null;
            }
            isPlaying = false;
            document.getElementById('btnPlay').textContent = '‚ñ∂ Play';
        }

        // Controls
        document.getElementById('btnPlay').addEventListener('click', function() {
            if (isPlaying) {
                stopAnimation();
            } else {
                startAnimation();
            }
        });

        document.getElementById('btnStep').addEventListener('click', function() {
            stopAnimation();
            step();
        });

        document.getElementById('intervalSlider').addEventListener('input', function() {
            interval = parseInt(this.value);
            document.getElementById('intervalValue').textContent = interval + 'ms';
            document.getElementById('speedIndicator').textContent = interval + 'ms';
            if (isPlaying) {
                startAnimation(); // Restart with new interval
            }
        });

        document.getElementById('distanceSlider').addEventListener('input', function() {
            distance = parseInt(this.value);
            document.getElementById('distanceValue').textContent = distance + 'px';
            draw();
        });

        // Demo mode selection
        document.querySelectorAll('.demo-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.demo-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                demoMode = this.dataset.demo;
                currentPosition = 0;

                const modeNames = {
                    'classic': 'Classic Phi Phenomenon',
                    'beta': 'Beta Movement',
                    'reverse': 'Reverse Phi (1975)',
                    'multipoint': 'Multi-Point Motion'
                };
                document.getElementById('modeIndicator').textContent = modeNames[demoMode];
                draw();
            });
        });

        // Perception buttons
        document.querySelectorAll('.perception-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.perception-btn').forEach(b => b.classList.remove('selected'));
                this.classList.add('selected');
            });
        });

        // Initial draw
        draw();
    </script>
</body>
</html>
