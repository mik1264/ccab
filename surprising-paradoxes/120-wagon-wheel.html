<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Wagon Wheel Effect - Surprising Paradoxes</title>
    <style>
        :root {
            --bg-dark: #1a1a2e;
            --wheel-color: #8b4513;
            --spoke-color: #5a3510;
            --accent: #f39c12;
            --forward: #27ae60;
            --backward: #e74c3c;
            --stationary: #3498db;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #2c3e50 0%, #1a1a2e 100%);
            min-height: 100vh;
            color: #e0e0e0;
        }

        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            text-decoration: none;
            color: var(--accent);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 100;
            background: rgba(0,0,0,0.5);
            padding: 10px 15px;
            border-radius: 25px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .back-link:hover {
            transform: translateX(-5px);
            background: var(--accent);
            color: var(--bg-dark);
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 80px 20px 40px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        h1 {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--accent), #e67e22);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.2rem;
            color: #888;
        }

        /* Main Demo */
        .demo-container {
            background: linear-gradient(180deg, #3d566e 0%, #2c3e50 100%);
            border-radius: 30px;
            padding: 40px;
            margin: 30px 0;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }

        .wheels-display {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 30px;
        }

        .wheel-section {
            text-align: center;
        }

        .wheel-section h3 {
            margin-bottom: 15px;
            color: var(--accent);
        }

        .canvas-container {
            background: #1a252f;
            border-radius: 15px;
            padding: 20px;
            display: inline-block;
        }

        canvas {
            display: block;
        }

        /* Controls */
        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }

        .control-group {
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 15px;
        }

        .control-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            color: var(--accent);
        }

        .control-group input[type="range"] {
            width: 100%;
            margin: 10px 0;
            accent-color: var(--accent);
        }

        .control-value {
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
        }

        /* Perception Indicator */
        .perception-box {
            text-align: center;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            font-size: 1.3rem;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .perception-box.forward {
            background: linear-gradient(135deg, var(--forward) 0%, #219a52 100%);
        }

        .perception-box.backward {
            background: linear-gradient(135deg, var(--backward) 0%, #c0392b 100%);
        }

        .perception-box.stationary {
            background: linear-gradient(135deg, var(--stationary) 0%, #2980b9 100%);
        }

        .perception-arrow {
            font-size: 2rem;
            margin-right: 10px;
        }

        /* Explanation */
        .section {
            background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
            padding: 30px;
            border-radius: 20px;
            margin: 30px 0;
        }

        .section h2 {
            color: var(--accent);
            margin-bottom: 20px;
            text-align: center;
        }

        /* Frame-by-frame visualization */
        .frames-demo {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        .frame-box {
            width: 80px;
            height: 80px;
            background: #1a252f;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            border: 2px solid #555;
        }

        .frame-box .spoke {
            position: absolute;
            width: 3px;
            height: 35px;
            background: var(--accent);
            transform-origin: bottom center;
            bottom: 50%;
        }

        .frame-label {
            position: absolute;
            bottom: -25px;
            font-size: 0.8rem;
            color: #888;
        }

        /* Why Cards */
        .why-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .why-card {
            background: rgba(0,0,0,0.3);
            padding: 25px;
            border-radius: 15px;
            border-left: 4px solid var(--accent);
        }

        .why-card h3 {
            color: var(--accent);
            margin-bottom: 10px;
        }

        .why-card p {
            line-height: 1.7;
            color: #aaa;
        }

        /* Real World */
        .examples-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .example-card {
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        .example-card .icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .example-card h4 {
            color: var(--accent);
            margin-bottom: 8px;
        }

        /* Safety Warning */
        .warning-box {
            background: linear-gradient(135deg, rgba(231, 76, 60, 0.2) 0%, rgba(192, 57, 43, 0.2) 100%);
            border: 2px solid var(--backward);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .warning-box h3 {
            color: var(--backward);
            margin-bottom: 10px;
        }

        /* Math Section */
        .math-box {
            background: rgba(0,0,0,0.4);
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            margin: 20px 0;
            text-align: center;
        }

        .math-box .formula {
            font-size: 1.3rem;
            color: var(--accent);
            margin: 10px 0;
        }

        footer {
            text-align: center;
            padding: 30px;
            color: #666;
            font-style: italic;
        }

        @media (max-width: 768px) {
            h1 { font-size: 1.8rem; }
            .wheels-display { grid-template-columns: 1fr; }
            .controls { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">
        <span>‚Üê</span> Back to Paradoxes
    </a>

    <div class="container">
        <header>
            <h1>üé° The Wagon Wheel Effect</h1>
            <p class="subtitle">When forward motion appears to go backward</p>
        </header>

        <div class="demo-container">
            <div class="wheels-display">
                <div class="wheel-section">
                    <h3>üé¨ Sampled View (Camera)</h3>
                    <div class="canvas-container">
                        <canvas id="sampled-wheel" width="200" height="200"></canvas>
                    </div>
                    <p style="margin-top: 10px; color: #888;">What the camera captures</p>
                </div>
                <div class="wheel-section">
                    <h3>üëÅÔ∏è Continuous View (Reality)</h3>
                    <div class="canvas-container">
                        <canvas id="real-wheel" width="200" height="200"></canvas>
                    </div>
                    <p style="margin-top: 10px; color: #888;">What's actually happening</p>
                </div>
            </div>

            <div class="perception-box forward" id="perception">
                <span class="perception-arrow">‚Üí</span>
                <span id="perception-text">Appears to spin FORWARD</span>
            </div>

            <div class="controls">
                <div class="control-group">
                    <label>üîÑ Wheel Speed (RPM)</label>
                    <input type="range" id="speed-slider" min="10" max="500" value="100">
                    <div class="control-value"><span id="speed-value">100</span> RPM</div>
                </div>
                <div class="control-group">
                    <label>üé• Frame Rate (FPS)</label>
                    <input type="range" id="fps-slider" min="5" max="60" value="24">
                    <div class="control-value"><span id="fps-value">24</span> FPS</div>
                </div>
            </div>

            <p style="text-align: center; color: #888; margin-top: 10px;">
                Wheel has <strong>12 spokes</strong> (30¬∞ apart). Adjust speed and frame rate to see the illusion!
            </p>
        </div>

        <div class="section">
            <h2>üìê The Math Behind the Illusion</h2>
            <p style="text-align: center; margin-bottom: 20px;">
                A wheel with <strong>N spokes</strong> has spokes every <strong>360¬∞/N</strong>.
            </p>

            <div class="math-box">
                <p>Degrees per frame = (RPM √ó 360¬∞) / (60 √ó FPS)</p>
                <div class="formula">
                    Œ∏ = (Speed √ó 6) / FPS
                </div>
            </div>

            <div class="why-grid">
                <div class="why-card">
                    <h3>Œ∏ &lt; 30¬∞</h3>
                    <p>Spoke moves less than one spoke-gap. Brain sees <strong>forward motion</strong>.</p>
                </div>
                <div class="why-card">
                    <h3>Œ∏ = 30¬∞</h3>
                    <p>Spoke moves exactly to next spoke's position. Wheel appears <strong>stationary</strong>!</p>
                </div>
                <div class="why-card">
                    <h3>Œ∏ = 33¬∞</h3>
                    <p>Spoke moves 3¬∞ past the next position. Brain interprets this as <strong>3¬∞ backward</strong>!</p>
                </div>
                <div class="why-card">
                    <h3>Œ∏ = 60¬∞</h3>
                    <p>Spoke moves to 2 positions ahead. Appears <strong>stationary</strong> again.</p>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üé¨ Frame-by-Frame Breakdown</h2>
            <p style="text-align: center; margin-bottom: 20px;">
                Watch how a spoke's position changes between frames:
            </p>

            <div class="frames-demo" id="frames-demo">
                <!-- Generated by JavaScript -->
            </div>

            <p style="text-align: center; margin-top: 20px; color: #888;">
                When the spoke moves <em>slightly past</em> the next spoke position,
                your brain takes the "shortest path" interpretation: backward motion.
            </p>
        </div>

        <div class="section">
            <h2>üåç Where You See It</h2>
            <div class="examples-grid">
                <div class="example-card">
                    <div class="icon">üé•</div>
                    <h4>Movies & TV</h4>
                    <p>24-30 FPS cameras create the classic effect with car wheels</p>
                </div>
                <div class="example-card">
                    <div class="icon">üí°</div>
                    <h4>Fluorescent Lights</h4>
                    <p>AC power creates 100-120Hz flicker that strobes rotating objects</p>
                </div>
                <div class="example-card">
                    <div class="icon">ü™©</div>
                    <h4>Nightclubs</h4>
                    <p>Strobe lights make dancers and fans appear to move backwards</p>
                </div>
                <div class="example-card">
                    <div class="icon">üé∏</div>
                    <h4>Guitar Strings</h4>
                    <p>Phone cameras capture vibrating strings in strange wave patterns</p>
                </div>
            </div>
        </div>

        <div class="section">
            <div class="warning-box">
                <h3>‚ö†Ô∏è Industrial Safety Warning</h3>
                <p style="line-height: 1.8;">
                    The wagon wheel effect can make rotating machinery (lathes, drills, fans)
                    appear <strong>stopped or slow</strong> under fluorescent lighting.
                    This is extremely dangerous! Workers may reach into "stationary" equipment
                    that is actually spinning at high speed.
                    <br><br>
                    <strong>Solution:</strong> Use DC lighting or mixed-phase AC in workshops.
                </p>
            </div>
        </div>

        <div class="section">
            <h2>üß† Why Your Brain Does This</h2>
            <p style="line-height: 1.8; text-align: center;">
                Your visual system assumes the <strong>simplest explanation</strong> for motion between frames.
                <br><br>
                If a spoke moved 33¬∞ forward, it <em>could</em> have moved 33¬∞ forward...
                or it could have moved 3¬∞ backward (since all spokes look identical).
                <br><br>
                The brain picks the <strong>smallest motion</strong> that explains the change.
                This is usually correct‚Äîbut fails spectacularly when the sampling rate
                is close to the rotation frequency!
            </p>
        </div>

        <div class="section">
            <h2>üîß Practical Applications</h2>
            <div class="why-grid">
                <div class="why-card">
                    <h3>üöó Engine Timing</h3>
                    <p>Mechanics use strobe lights to make timing marks appear stationary for adjustment.</p>
                </div>
                <div class="why-card">
                    <h3>üéµ Turntables</h3>
                    <p>Vinyl players have strobe dots that appear still at exactly 33‚Öì RPM under AC lighting.</p>
                </div>
                <div class="why-card">
                    <h3>üìä Tachometers</h3>
                    <p>Strobe tachometers measure RPM by finding the frequency that makes objects appear still.</p>
                </div>
            </div>
        </div>

        <footer>
            <p>"The eye sees only what the mind is prepared to comprehend." ‚Äî Robertson Davies</p>
            <p style="margin-top: 10px;">‚Äî Related: Stroboscopic Effect, Temporal Aliasing, Nyquist Theorem</p>
        </footer>
    </div>

    <script>
        const sampledCanvas = document.getElementById('sampled-wheel');
        const realCanvas = document.getElementById('real-wheel');
        const sampledCtx = sampledCanvas.getContext('2d');
        const realCtx = realCanvas.getContext('2d');

        const NUM_SPOKES = 12;
        const SPOKE_ANGLE = 360 / NUM_SPOKES; // 30 degrees

        let wheelSpeed = 100; // RPM
        let frameRate = 24; // FPS
        let realAngle = 0;
        let sampledAngle = 0;
        let lastSampleTime = 0;

        const speedSlider = document.getElementById('speed-slider');
        const fpsSlider = document.getElementById('fps-slider');

        speedSlider.addEventListener('input', function() {
            wheelSpeed = parseInt(this.value);
            document.getElementById('speed-value').textContent = wheelSpeed;
            updatePerception();
            updateFramesDemo();
        });

        fpsSlider.addEventListener('input', function() {
            frameRate = parseInt(this.value);
            document.getElementById('fps-value').textContent = frameRate;
            updatePerception();
            updateFramesDemo();
        });

        function drawWheel(ctx, angle, isReal) {
            const cx = 100;
            const cy = 100;
            const radius = 80;

            ctx.clearRect(0, 0, 200, 200);

            // Draw rim
            ctx.beginPath();
            ctx.arc(cx, cy, radius, 0, Math.PI * 2);
            ctx.strokeStyle = '#8b4513';
            ctx.lineWidth = 8;
            ctx.stroke();

            // Draw hub
            ctx.beginPath();
            ctx.arc(cx, cy, 15, 0, Math.PI * 2);
            ctx.fillStyle = '#5a3510';
            ctx.fill();

            // Draw spokes
            for (let i = 0; i < NUM_SPOKES; i++) {
                const spokeAngle = (angle + i * SPOKE_ANGLE) * Math.PI / 180;
                const x1 = cx + 15 * Math.cos(spokeAngle);
                const y1 = cy + 15 * Math.sin(spokeAngle);
                const x2 = cx + (radius - 4) * Math.cos(spokeAngle);
                const y2 = cy + (radius - 4) * Math.sin(spokeAngle);

                ctx.beginPath();
                ctx.moveTo(x1, y1);
                ctx.lineTo(x2, y2);
                ctx.strokeStyle = isReal ? '#f39c12' : '#e74c3c';
                ctx.lineWidth = 4;
                ctx.stroke();
            }

            // Draw center dot
            ctx.beginPath();
            ctx.arc(cx, cy, 5, 0, Math.PI * 2);
            ctx.fillStyle = '#f39c12';
            ctx.fill();
        }

        function updatePerception() {
            // Calculate degrees per frame
            const degreesPerSecond = wheelSpeed * 6; // RPM to degrees/sec
            const degreesPerFrame = degreesPerSecond / frameRate;

            // Normalize to within one spoke gap
            let apparent = degreesPerFrame % SPOKE_ANGLE;
            if (apparent > SPOKE_ANGLE / 2) {
                apparent = apparent - SPOKE_ANGLE; // Appears backward
            }

            const box = document.getElementById('perception');
            const text = document.getElementById('perception-text');

            if (Math.abs(apparent) < 1) {
                box.className = 'perception-box stationary';
                text.innerHTML = '<span class="perception-arrow">‚è∏</span> Appears STATIONARY';
            } else if (apparent > 0) {
                box.className = 'perception-box forward';
                text.innerHTML = `<span class="perception-arrow">‚Üí</span> Appears to spin FORWARD (${apparent.toFixed(1)}¬∞/frame)`;
            } else {
                box.className = 'perception-box backward';
                text.innerHTML = `<span class="perception-arrow">‚Üê</span> Appears to spin BACKWARD (${apparent.toFixed(1)}¬∞/frame)`;
            }
        }

        function updateFramesDemo() {
            const container = document.getElementById('frames-demo');
            container.innerHTML = '';

            const degreesPerSecond = wheelSpeed * 6;
            const degreesPerFrame = degreesPerSecond / frameRate;

            for (let i = 0; i < 5; i++) {
                const frameDiv = document.createElement('div');
                frameDiv.className = 'frame-box';

                // Draw one spoke at the correct angle
                const angle = (i * degreesPerFrame) % 360;
                const spoke = document.createElement('div');
                spoke.className = 'spoke';
                spoke.style.transform = `rotate(${angle}deg)`;
                frameDiv.appendChild(spoke);

                const label = document.createElement('div');
                label.className = 'frame-label';
                label.textContent = `Frame ${i + 1}`;
                frameDiv.appendChild(label);

                container.appendChild(frameDiv);
            }
        }

        let lastTime = 0;
        let sampleInterval = 1000 / frameRate;
        let timeSinceLastSample = 0;

        function animate(timestamp) {
            if (!lastTime) lastTime = timestamp;
            const deltaTime = timestamp - lastTime;
            lastTime = timestamp;

            // Update real angle continuously
            const degreesPerSecond = wheelSpeed * 6;
            realAngle += (degreesPerSecond * deltaTime) / 1000;
            realAngle = realAngle % 360;

            // Draw real wheel
            drawWheel(realCtx, realAngle, true);

            // Sample at frame rate
            timeSinceLastSample += deltaTime;
            sampleInterval = 1000 / frameRate;

            if (timeSinceLastSample >= sampleInterval) {
                sampledAngle = realAngle;
                timeSinceLastSample = timeSinceLastSample % sampleInterval;
            }

            // Draw sampled wheel
            drawWheel(sampledCtx, sampledAngle, false);

            requestAnimationFrame(animate);
        }

        // Initialize
        updatePerception();
        updateFramesDemo();
        requestAnimationFrame(animate);
    </script>
</body>
</html>
