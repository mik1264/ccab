<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Giffen Paradox - When Higher Prices Increase Demand</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #2a1a0a 0%, #1a0d00 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        header { text-align: center; margin-bottom: 30px; }
        .back-link { color: #d4a574; text-decoration: none; margin-bottom: 20px; display: inline-block; }
        h1 {
            font-size: 2.4rem;
            background: linear-gradient(135deg, #d4a574, #8b4513);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }
        .subtitle { font-size: 1.1rem; color: #c4a484; max-width: 800px; margin: 0 auto; line-height: 1.6; }
        .main-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; }
        .panel {
            background: rgba(60, 40, 20, 0.7);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(212, 165, 116, 0.3);
        }
        .panel h2 { color: #d4a574; font-size: 1.3rem; margin-bottom: 15px; }
        canvas { width: 100%; height: 300px; background: rgba(30, 20, 10, 0.8); border-radius: 10px; }
        .controls { margin: 20px 0; }
        .slider-group { margin: 15px 0; }
        .slider-label { display: flex; justify-content: space-between; color: #c4a484; margin-bottom: 5px; }
        .slider-value { color: #d4a574; font-weight: bold; }
        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: rgba(212, 165, 116, 0.3);
            outline: none;
            -webkit-appearance: none;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #d4a574;
            cursor: pointer;
        }
        .basket-display {
            background: rgba(30, 20, 10, 0.8);
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
        }
        .basket-item { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid rgba(212, 165, 116, 0.2); }
        .basket-item:last-child { border-bottom: none; }
        .item-icon { font-size: 1.5rem; }
        .item-details { flex: 1; margin-left: 15px; }
        .item-name { color: #d4a574; }
        .item-price { color: #c4a484; font-size: 0.9rem; }
        .item-qty { font-size: 1.3rem; font-weight: bold; color: #e0e0e0; }
        .budget-bar {
            height: 30px;
            background: rgba(30, 20, 10, 0.8);
            border-radius: 15px;
            overflow: hidden;
            margin: 15px 0;
        }
        .budget-fill { height: 100%; display: flex; }
        .budget-bread { background: #d4a574; display: flex; align-items: center; justify-content: center; color: #1a0d00; font-weight: bold; }
        .budget-meat { background: #8b4513; display: flex; align-items: center; justify-content: center; color: #fff; font-weight: bold; }
        .insight-box {
            background: linear-gradient(135deg, rgba(212, 165, 116, 0.2), rgba(139, 69, 19, 0.1));
            border-left: 4px solid #d4a574;
            padding: 20px;
            border-radius: 0 10px 10px 0;
            margin: 25px 0;
        }
        .insight-box h3 { color: #d4a574; margin-bottom: 10px; }
        .explanation { background: rgba(60, 40, 20, 0.5); border-radius: 15px; padding: 25px; margin-top: 30px; }
        .explanation h2 { color: #d4a574; margin-bottom: 15px; }
        .explanation p { color: #b4a494; line-height: 1.8; margin-bottom: 15px; }
        .arrow { font-size: 1.5rem; margin: 0 10px; }
        .arrow.up { color: #e74c3c; }
        .arrow.down { color: #2ecc71; }
        .paradox-highlight {
            background: rgba(231, 76, 60, 0.2);
            border: 2px solid rgba(231, 76, 60, 0.5);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
        }
        .paradox-highlight h3 { color: #e74c3c; margin-bottom: 10px; }
        @media (max-width: 900px) { .main-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="index.html" class="back-link">‚Üê Back to Surprising Paradoxes</a>
            <h1>The Giffen Paradox</h1>
            <p class="subtitle">The Law of Demand says: higher prices ‚Üí lower demand. But for "Giffen goods," higher prices lead to HIGHER demand! How can this be?</p>
        </header>

        <div class="main-grid">
            <div class="panel">
                <h2>üìä The Demand Curve</h2>
                <canvas id="demandCanvas"></canvas>
                <div class="paradox-highlight" id="paradoxBox" style="display: none;">
                    <h3>‚ö†Ô∏è PARADOX ACTIVATED!</h3>
                    <p>Bread price ‚Üë ‚Üí Bread demand ‚Üë</p>
                </div>
            </div>
            <div class="panel">
                <h2>üçû The Poor Family's Budget</h2>
                <p style="color: #c4a484; margin-bottom: 15px;">A family has a fixed budget for food. They can buy bread (cheap, filling) or meat (expensive, nutritious).</p>
                
                <div class="controls">
                    <div class="slider-group">
                        <div class="slider-label">
                            <span>Bread Price</span>
                            <span class="slider-value" id="breadPriceLabel">$1.00</span>
                        </div>
                        <input type="range" id="breadPrice" min="50" max="200" value="100">
                    </div>
                    <div class="slider-group">
                        <div class="slider-label">
                            <span>Family Budget</span>
                            <span class="slider-value" id="budgetLabel">$20.00</span>
                        </div>
                        <input type="range" id="budget" min="10" max="40" value="20">
                    </div>
                </div>

                <div class="basket-display">
                    <div class="basket-item">
                        <span class="item-icon">üçû</span>
                        <div class="item-details">
                            <div class="item-name">Bread</div>
                            <div class="item-price" id="breadPriceDisplay">$1.00 each</div>
                        </div>
                        <span class="item-qty" id="breadQty">10</span>
                    </div>
                    <div class="basket-item">
                        <span class="item-icon">ü•©</span>
                        <div class="item-details">
                            <div class="item-name">Meat</div>
                            <div class="item-price">$5.00 each (fixed)</div>
                        </div>
                        <span class="item-qty" id="meatQty">2</span>
                    </div>
                </div>

                <div class="budget-bar">
                    <div class="budget-fill">
                        <div class="budget-bread" id="breadBar" style="width: 50%;">Bread</div>
                        <div class="budget-meat" id="meatBar" style="width: 50%;">Meat</div>
                    </div>
                </div>

                <p style="color: #c4a484; font-size: 0.9rem; text-align: center;">Total spending: $<span id="totalSpend">20.00</span></p>
            </div>
        </div>

        <div class="insight-box">
            <h3>üß† The Mechanism</h3>
            <p>When bread price rises, the family becomes effectively POORER. They can no longer afford meat at all! Since they MUST eat, they buy MORE bread to get enough calories‚Äîeven though bread is now more expensive. The <strong>income effect</strong> (being poorer) overwhelms the <strong>substitution effect</strong> (switching to cheaper goods).</p>
        </div>

        <div class="explanation">
            <h2>Historical Evidence</h2>
            <p><strong>The Irish Potato Famine (1845-1852):</strong> As potato prices rose due to blight, poor Irish families bought MORE potatoes because they could no longer afford meat or other foods. Potatoes were their only affordable source of calories.</p>
            <p><strong>Chinese Rice Studies (2008):</strong> Jensen and Miller provided the first rigorous empirical evidence for Giffen behavior. When rice prices were subsidized (lowered), poor Chinese households actually bought LESS rice‚Äîthey could now afford more variety.</p>
            <p><strong>Requirements for a Giffen Good:</strong></p>
            <ul style="color: #b4a494; margin-left: 20px; line-height: 2;">
                <li>Must be an inferior good (consumed more when poorer)</li>
                <li>Must be a large portion of the consumer's budget</li>
                <li>Must have limited substitutes at that price point</li>
            </ul>
            <p style="margin-top: 15px;"><strong>Named after:</strong> Sir Robert Giffen (1837-1910), Scottish statistician who allegedly observed this during Victorian-era bread shortages. Though the attribution is disputed, the paradox bears his name.</p>
            <p style="font-style: italic; color: #9a8a7a;">The only confirmed exception to the Law of Demand‚Äîproof that economics is messier than textbooks suggest.</p>
        </div>
    </div>

    <script>
        var canvas = document.getElementById('demandCanvas');
        var ctx = canvas.getContext('2d');
        
        var breadPrice = 100;
        var budget = 20;
        var meatPrice = 500;
        
        var demandHistory = [];

        function initCanvas() {
            var dpr = window.devicePixelRatio || 1;
            var rect = canvas.getBoundingClientRect();
            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            ctx.scale(dpr, dpr);
        }

        function calculateBasket() {
            var budgetCents = budget * 100;
            var breadCents = breadPrice;
            
            var minCalories = 2000;
            var breadCalories = 250;
            var meatCalories = 300;
            
            var maxMeat = Math.floor(budgetCents / meatPrice);
            var bestBread = 0;
            var bestMeat = 0;
            var bestUtility = -1;
            
            for (var m = 0; m <= maxMeat; m++) {
                var remaining = budgetCents - m * meatPrice;
                var b = Math.floor(remaining / breadCents);
                var calories = b * breadCalories + m * meatCalories;
                
                if (calories >= minCalories * 0.8) {
                    var utility = Math.log(b + 1) + 2 * Math.log(m + 1);
                    if (utility > bestUtility) {
                        bestUtility = utility;
                        bestBread = b;
                        bestMeat = m;
                    }
                }
            }
            
            if (bestBread === 0 && bestMeat === 0) {
                bestBread = Math.floor(budgetCents / breadCents);
            }
            
            return { bread: bestBread, meat: bestMeat };
        }

        function updateDisplay() {
            var basket = calculateBasket();
            
            document.getElementById('breadPriceLabel').textContent = '$' + (breadPrice / 100).toFixed(2);
            document.getElementById('budgetLabel').textContent = '$' + budget.toFixed(2);
            document.getElementById('breadPriceDisplay').textContent = '$' + (breadPrice / 100).toFixed(2) + ' each';
            document.getElementById('breadQty').textContent = basket.bread;
            document.getElementById('meatQty').textContent = basket.meat;
            
            var breadSpend = basket.bread * breadPrice / 100;
            var meatSpend = basket.meat * meatPrice / 100;
            var total = breadSpend + meatSpend;
            
            document.getElementById('totalSpend').textContent = total.toFixed(2);
            
            var breadPct = (breadSpend / budget) * 100;
            var meatPct = (meatSpend / budget) * 100;
            
            document.getElementById('breadBar').style.width = breadPct + '%';
            document.getElementById('meatBar').style.width = meatPct + '%';
            
            demandHistory.push({ price: breadPrice, qty: basket.bread });
            if (demandHistory.length > 50) demandHistory.shift();
            
            var isGiffen = false;
            if (demandHistory.length >= 2) {
                var prev = demandHistory[demandHistory.length - 2];
                var curr = demandHistory[demandHistory.length - 1];
                if (curr.price > prev.price && curr.qty > prev.qty) {
                    isGiffen = true;
                }
            }
            
            document.getElementById('paradoxBox').style.display = (breadPrice > 120 && basket.meat === 0) ? 'block' : 'none';
            
            drawDemandCurve();
        }

        function drawDemandCurve() {
            var width = canvas.width / (window.devicePixelRatio || 1);
            var height = canvas.height / (window.devicePixelRatio || 1);
            var padding = 50;
            
            ctx.clearRect(0, 0, width, height);
            
            ctx.strokeStyle = 'rgba(212, 165, 116, 0.3)';
            ctx.lineWidth = 1;
            for (var i = 0; i <= 4; i++) {
                var y = padding + i * (height - 2 * padding) / 4;
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(width - padding, y);
                ctx.stroke();
            }
            
            ctx.fillStyle = '#c4a484';
            ctx.font = '12px Georgia';
            ctx.textAlign = 'center';
            ctx.fillText('Quantity of Bread ‚Üí', width / 2, height - 10);
            
            ctx.save();
            ctx.translate(15, height / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('Price ‚Üí', 0, 0);
            ctx.restore();
            
            ctx.strokeStyle = 'rgba(46, 204, 113, 0.5)';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(width - padding, padding);
            ctx.lineTo(padding, height - padding);
            ctx.stroke();
            ctx.setLineDash([]);
            
            ctx.fillStyle = 'rgba(46, 204, 113, 0.3)';
            ctx.font = '10px Georgia';
            ctx.fillText('Normal Good', width - padding - 40, padding + 20);
            
            if (demandHistory.length >= 2) {
                ctx.strokeStyle = '#e74c3c';
                ctx.lineWidth = 3;
                ctx.beginPath();
                
                var minP = 50, maxP = 200;
                var minQ = 0, maxQ = 30;
                
                for (var j = 0; j < demandHistory.length; j++) {
                    var pt = demandHistory[j];
                    var x = padding + (pt.qty / maxQ) * (width - 2 * padding);
                    var y = height - padding - ((pt.price - minP) / (maxP - minP)) * (height - 2 * padding);
                    
                    if (j === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }
                ctx.stroke();
                
                var last = demandHistory[demandHistory.length - 1];
                var lastX = padding + (last.qty / maxQ) * (width - 2 * padding);
                var lastY = height - padding - ((last.price - minP) / (maxP - minP)) * (height - 2 * padding);
                
                ctx.fillStyle = '#d4a574';
                ctx.beginPath();
                ctx.arc(lastX, lastY, 8, 0, Math.PI * 2);
                ctx.fill();
            }
            
            if (breadPrice > 120) {
                ctx.fillStyle = '#e74c3c';
                ctx.font = 'bold 12px Georgia';
                ctx.textAlign = 'left';
                ctx.fillText('GIFFEN ZONE', padding + 10, padding + 30);
            }
        }

        document.getElementById('breadPrice').addEventListener('input', function() {
            breadPrice = parseInt(this.value);
            updateDisplay();
        });

        document.getElementById('budget').addEventListener('input', function() {
            budget = parseInt(this.value);
            updateDisplay();
        });

        window.addEventListener('load', function() {
            initCanvas();
            for (var p = 50; p <= 100; p += 10) {
                breadPrice = p;
                var basket = calculateBasket();
                demandHistory.push({ price: p, qty: basket.bread });
            }
            breadPrice = 100;
            updateDisplay();
        });

        window.addEventListener('resize', function() {
            initCanvas();
            drawDemandCurve();
        });
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
