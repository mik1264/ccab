<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Duration Neglect - Why You'd Choose More Pain</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #e8e8e8;
            line-height: 1.7;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        h1 {
            font-size: 2.8em;
            color: #00b4d8;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            font-size: 1.3em;
            color: #a5b1c2;
            font-style: italic;
        }

        .citation {
            background: rgba(0, 180, 216, 0.1);
            border-left: 4px solid #00b4d8;
            padding: 20px;
            margin: 30px 0;
            border-radius: 0 10px 10px 0;
        }

        .citation-text {
            font-size: 1.2em;
            font-style: italic;
            color: #f8f8f8;
            margin-bottom: 10px;
        }

        .citation-source {
            color: #a5b1c2;
            font-size: 0.9em;
        }

        .intro-section {
            background: rgba(255, 255, 255, 0.05);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 40px;
        }

        .intro-section h2 {
            color: #00b4d8;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .intro-section p {
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .highlight {
            color: #00b4d8;
            font-weight: bold;
        }

        .highlight-warm {
            color: #f77f00;
            font-weight: bold;
        }

        /* Experiment Section */
        .experiment-section {
            background: rgba(255, 255, 255, 0.08);
            padding: 40px;
            border-radius: 20px;
            margin-bottom: 40px;
        }

        .experiment-section h2 {
            color: #00b4d8;
            margin-bottom: 30px;
            text-align: center;
            font-size: 1.8em;
        }

        .experiment-intro {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(0, 180, 216, 0.1);
            border-radius: 10px;
        }

        /* Cold Water Simulation */
        .simulation-container {
            background: rgba(0, 0, 0, 0.3);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .trial-label {
            text-align: center;
            font-size: 1.5em;
            color: #00b4d8;
            margin-bottom: 20px;
        }

        .water-tank {
            width: 100%;
            max-width: 400px;
            height: 200px;
            margin: 0 auto 20px;
            background: linear-gradient(180deg, #0077b6 0%, #023e8a 100%);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
        }

        .water-surface {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 20px;
            background: linear-gradient(180deg, rgba(255,255,255,0.3), transparent);
        }

        .hand-icon {
            position: absolute;
            font-size: 4em;
            left: 50%;
            transform: translateX(-50%);
            top: 50px;
            transition: top 0.5s ease;
        }

        .hand-icon.submerged {
            top: 80px;
            filter: brightness(0.8);
        }

        .temperature-display {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.5);
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 1.3em;
            font-weight: bold;
        }

        .temp-cold { color: #00b4d8; }
        .temp-warm { color: #f77f00; }

        .pain-meter {
            width: 100%;
            max-width: 400px;
            margin: 0 auto 20px;
        }

        .pain-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.9em;
            color: #a5b1c2;
        }

        .pain-bar-container {
            height: 25px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            overflow: hidden;
        }

        .pain-bar {
            height: 100%;
            background: linear-gradient(90deg, #00b4d8, #f77f00, #d62828);
            border-radius: 12px;
            transition: width 0.3s ease;
        }

        .timer-display {
            text-align: center;
            font-size: 2.5em;
            font-weight: bold;
            color: #fff;
            margin-bottom: 20px;
        }

        /* Pain Graph */
        .pain-graph {
            width: 100%;
            max-width: 500px;
            margin: 30px auto;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
        }

        .graph-title {
            text-align: center;
            color: #fff;
            margin-bottom: 15px;
        }

        #painCanvas {
            display: block;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 5px;
        }

        /* Choice Section */
        .choice-section {
            text-align: center;
            padding: 30px;
        }

        .choice-question {
            font-size: 1.4em;
            margin-bottom: 30px;
            color: #fff;
        }

        .choice-buttons {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }

        .choice-btn {
            padding: 25px 40px;
            background: rgba(0, 180, 216, 0.2);
            border: 3px solid #00b4d8;
            border-radius: 15px;
            color: #fff;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .choice-btn:hover {
            background: rgba(0, 180, 216, 0.4);
            transform: translateY(-3px);
        }

        .choice-btn.selected {
            background: #00b4d8;
            color: #1a1a2e;
        }

        .trial-summary {
            margin-top: 10px;
            font-size: 0.9em;
            color: #a5b1c2;
        }

        /* Results Section */
        .results-section {
            display: none;
            background: rgba(255, 255, 255, 0.08);
            padding: 40px;
            border-radius: 20px;
            margin-bottom: 40px;
        }

        .results-section.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .results-section h2 {
            color: #d62828;
            margin-bottom: 30px;
            text-align: center;
            font-size: 1.8em;
        }

        .paradox-reveal {
            background: rgba(214, 40, 40, 0.2);
            border: 2px solid #d62828;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
        }

        .paradox-title {
            font-size: 1.5em;
            color: #d62828;
            margin-bottom: 15px;
        }

        .paradox-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .stat-box {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
        }

        .stat-label {
            font-size: 0.9em;
            color: #a5b1c2;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
        }

        .stat-box.trial-a .stat-value { color: #00b4d8; }
        .stat-box.trial-b .stat-value { color: #f77f00; }

        .your-choice {
            font-size: 1.2em;
            margin-top: 20px;
        }

        .your-choice .chosen {
            color: #00b4d8;
            font-weight: bold;
        }

        .kahneman-comparison {
            background: rgba(0, 180, 216, 0.1);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .kahneman-comparison h3 {
            color: #00b4d8;
            margin-bottom: 15px;
        }

        .comparison-stat {
            font-size: 1.1em;
            margin: 10px 0;
        }

        .comparison-stat strong {
            color: #f77f00;
        }

        /* Research Section */
        .research-section {
            background: rgba(255, 255, 255, 0.05);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 40px;
        }

        .research-section h2 {
            color: #00b4d8;
            margin-bottom: 20px;
            font-size: 1.6em;
        }

        .research-section h3 {
            color: #f77f00;
            margin: 25px 0 15px;
            font-size: 1.3em;
        }

        .study-card {
            display: flex;
            gap: 20px;
            background: rgba(0, 0, 0, 0.2);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .study-icon {
            font-size: 3em;
            flex-shrink: 0;
        }

        .study-content h4 {
            color: #00b4d8;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .study-content p {
            color: #a5b1c2;
            font-size: 0.95em;
        }

        .key-insight {
            background: rgba(247, 127, 0, 0.1);
            border-left: 4px solid #f77f00;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
        }

        .key-insight h4 {
            color: #f77f00;
            margin-bottom: 10px;
        }

        /* Two Selves Section */
        .two-selves {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }

        .self-card {
            background: rgba(0, 0, 0, 0.3);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
        }

        .self-card.experiencing {
            border-top: 4px solid #00b4d8;
        }

        .self-card.remembering {
            border-top: 4px solid #f77f00;
        }

        .self-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .self-card h4 {
            margin-bottom: 10px;
        }

        .self-card.experiencing h4 { color: #00b4d8; }
        .self-card.remembering h4 { color: #f77f00; }

        .self-card p {
            font-size: 0.95em;
            color: #a5b1c2;
        }

        /* Examples Section */
        .examples-section {
            background: rgba(247, 127, 0, 0.1);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 40px;
        }

        .examples-section h2 {
            color: #f77f00;
            margin-bottom: 20px;
            font-size: 1.6em;
        }

        .example-list {
            display: grid;
            gap: 15px;
        }

        .example-item {
            display: flex;
            gap: 15px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }

        .example-icon {
            font-size: 2em;
        }

        .example-content h4 {
            color: #00b4d8;
            margin-bottom: 5px;
        }

        .example-content p {
            font-size: 0.95em;
            color: #a5b1c2;
        }

        /* Buttons */
        .btn {
            padding: 15px 40px;
            font-size: 1.1em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .btn-primary {
            background: linear-gradient(135deg, #00b4d8, #0077b6);
            color: #fff;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 180, 216, 0.4);
        }

        /* Back link */
        .back-link {
            display: inline-block;
            color: #00b4d8;
            text-decoration: none;
            margin-bottom: 20px;
            font-size: 1.1em;
            transition: color 0.3s ease;
        }

        .back-link:hover {
            color: #f77f00;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 600px) {
            h1 { font-size: 2em; }
            .two-selves { grid-template-columns: 1fr; }
            .paradox-stats { grid-template-columns: 1fr; }
            .choice-buttons { flex-direction: column; align-items: center; }
            .container { padding: 20px 15px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">‚Üê Back to Paradoxes</a>

        <header>
            <h1>Duration Neglect</h1>
            <p class="subtitle">Why You'd Choose to Experience MORE Pain</p>
        </header>

        <div class="citation">
            <p class="citation-text">"Nearly 70% of participants chose to repeat the 90-second trial,
            even though it involved 30 extra seconds of discomfort."</p>
            <p class="citation-source">‚Äî Kahneman et al. (1993), "When More Pain Is Preferred to Less"</p>
        </div>

        <div class="intro-section">
            <h2>Your Memory Doesn't Care How Long You Suffered</h2>
            <p>
                In a now-famous experiment, Nobel laureate <span class="highlight">Daniel Kahneman</span>
                discovered something deeply counterintuitive: people will choose to repeat a <em>longer</em>
                painful experience over a shorter one.
            </p>
            <p>
                Participants submerged their hands in painfully cold water (14¬∞C). One trial lasted
                <span class="highlight">60 seconds</span>. The other lasted <span class="highlight-warm">90 seconds</span>
                ‚Äî but in the final 30 seconds, the water was secretly warmed to 15¬∞C (still uncomfortable,
                but less so).
            </p>
            <p>
                When asked which trial to repeat, <span class="highlight-warm">69% chose the longer trial</span>.
                They voluntarily signed up for 50% more discomfort ‚Äî because how it <em>ended</em> mattered
                more than how <em>long</em> it lasted.
            </p>
        </div>

        <!-- Experiment Section -->
        <div class="experiment-section" id="experimentSection">
            <h2>Experience the Cold Water Experiment</h2>
            <div class="experiment-intro">
                <p>You'll experience two simulated trials. Watch the pain level and timer.</p>
                <p>Then choose which trial you'd repeat if you had to do one again.</p>
            </div>

            <div class="simulation-container" id="simulationContainer">
                <div class="trial-label" id="trialLabel">Trial A</div>

                <div class="timer-display" id="timerDisplay">0:00</div>

                <div class="water-tank">
                    <div class="water-surface"></div>
                    <div class="hand-icon" id="handIcon">üñêÔ∏è</div>
                    <div class="temperature-display" id="tempDisplay">
                        <span class="temp-cold">14¬∞C</span>
                    </div>
                </div>

                <div class="pain-meter">
                    <div class="pain-label">
                        <span>Comfortable</span>
                        <span>Pain: <span id="painLevel">0</span>/10</span>
                        <span>Extreme</span>
                    </div>
                    <div class="pain-bar-container">
                        <div class="pain-bar" id="painBar" style="width: 0%"></div>
                    </div>
                </div>

                <div class="pain-graph">
                    <div class="graph-title">Pain Over Time</div>
                    <canvas id="painCanvas" width="460" height="150"></canvas>
                </div>

                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn btn-primary" id="startBtn" onclick="startTrial()">Start Trial A</button>
                </div>
            </div>

            <div class="choice-section" id="choiceSection" style="display: none;">
                <div class="choice-question">
                    If you HAD to repeat one trial, which would you choose?
                </div>
                <div class="choice-buttons">
                    <button class="choice-btn" onclick="makeChoice('A')">
                        Trial A
                        <div class="trial-summary">60 seconds at 14¬∞C</div>
                    </button>
                    <button class="choice-btn" onclick="makeChoice('B')">
                        Trial B
                        <div class="trial-summary">60s at 14¬∞C + 30s at 15¬∞C</div>
                    </button>
                </div>
            </div>
        </div>

        <!-- Results Section -->
        <div class="results-section" id="resultsSection">
            <h2>üé≠ The Duration Neglect Paradox</h2>

            <div class="paradox-reveal">
                <div class="paradox-title" id="paradoxTitle"></div>

                <div class="paradox-stats">
                    <div class="stat-box trial-a">
                        <div class="stat-label">Trial A Total Discomfort</div>
                        <div class="stat-value">60 units</div>
                    </div>
                    <div class="stat-box trial-b">
                        <div class="stat-label">Trial B Total Discomfort</div>
                        <div class="stat-value">80 units</div>
                    </div>
                </div>

                <p style="color: #a5b1c2;">Trial B involves 33% MORE total pain ‚Äî but most people prefer it!</p>

                <div class="your-choice" id="yourChoice"></div>
            </div>

            <div class="kahneman-comparison">
                <h3>Kahneman's Original Findings</h3>
                <p class="comparison-stat">
                    <strong>69%</strong> of participants chose the longer (90-second) trial to repeat
                </p>
                <p class="comparison-stat">
                    Participants rated the longer trial as <strong>less painful overall</strong>
                </p>
                <p class="comparison-stat">
                    Some even reported the longer trial <strong>took less time</strong>
                </p>
                <p class="comparison-stat">
                    The only difference: how it <strong>ended</strong>
                </p>
            </div>

            <button class="btn btn-primary" onclick="restartExperiment()" style="display: block; margin: 0 auto;">
                Try Again
            </button>
        </div>

        <div class="research-section">
            <h2>The Science of Duration Neglect</h2>

            <p>
                Duration neglect is the psychological observation that our judgments of past experiences
                depend very little on how <em>long</em> they lasted. Instead, we evaluate experiences
                based on their <span class="highlight">peak moment</span> and their <span class="highlight-warm">ending</span>.
            </p>

            <div class="study-card">
                <span class="study-icon">üßä</span>
                <div class="study-content">
                    <h4>The Cold Pressor Study (1993)</h4>
                    <p>Participants kept hands in 14¬∞C water for either 60 seconds or 90 seconds (with
                    warming at the end). 69% preferred repeating the longer trial. Total suffering
                    was ignored ‚Äî only the ending mattered.</p>
                </div>
            </div>

            <div class="study-card">
                <span class="study-icon">üè•</span>
                <div class="study-content">
                    <h4>The Colonoscopy Study (2003)</h4>
                    <p>Real patients had their colonoscopy extended by keeping the scope still (less painful)
                    at the end. These patients rated the entire procedure as less unpleasant and were
                    more likely to return for follow-up procedures. More procedure, better memory.</p>
                </div>
            </div>

            <div class="key-insight">
                <h4>Peak-End Rule</h4>
                <p>We judge experiences by averaging two snapshots: the <strong>most intense moment</strong>
                (peak) and the <strong>final moment</strong> (end). Duration gets almost no weight.
                A 10-minute experience and a 2-hour experience can receive the same overall rating
                if their peaks and endings are similar.</p>
            </div>

            <h3>The Two Selves</h3>
            <p>
                Kahneman argues that we have two distinct selves that evaluate our lives differently:
            </p>

            <div class="two-selves">
                <div class="self-card experiencing">
                    <div class="self-icon">‚è±Ô∏è</div>
                    <h4>The Experiencing Self</h4>
                    <p>Lives in the present. Feels every moment of pain. Would absolutely prefer
                    60 seconds of cold over 90 seconds. Duration matters here.</p>
                </div>
                <div class="self-card remembering">
                    <div class="self-icon">üß†</div>
                    <h4>The Remembering Self</h4>
                    <p>Creates stories from memories. Only cares about the peak and the end.
                    Ignores duration. Makes decisions about the future based on flawed memories.</p>
                </div>
            </div>

            <p style="margin-top: 20px;">
                The problem: <span class="highlight-warm">The Remembering Self makes our choices</span>,
                even though the Experiencing Self will bear the consequences. We choose vacations,
                procedures, and relationships based on how we expect to <em>remember</em> them,
                not how we'll <em>experience</em> them.
            </p>
        </div>

        <div class="examples-section">
            <h2>Duration Neglect in Real Life</h2>
            <div class="example-list">
                <div class="example-item">
                    <span class="example-icon">‚úàÔ∏è</span>
                    <div class="example-content">
                        <h4>Vacation Memories</h4>
                        <p>A 1-week vacation with a great final day can be remembered as better than
                        a 2-week vacation with a mediocre ending ‚Äî even though you had twice the experience.</p>
                    </div>
                </div>
                <div class="example-item">
                    <span class="example-icon">üé¨</span>
                    <div class="example-content">
                        <h4>Movies & Stories</h4>
                        <p>A mediocre 2-hour film with a powerful ending is rated higher than a consistently
                        good film with a flat ending. Filmmakers exploit duration neglect.</p>
                    </div>
                </div>
                <div class="example-item">
                    <span class="example-icon">üçΩÔ∏è</span>
                    <div class="example-content">
                        <h4>Restaurant Experiences</h4>
                        <p>The dessert and the check matter more than the appetizers. A botched ending
                        can ruin a great meal. A perfect ending can redeem a flawed one.</p>
                    </div>
                </div>
                <div class="example-item">
                    <span class="example-icon">üíº</span>
                    <div class="example-content">
                        <h4>Job Exits</h4>
                        <p>People remember jobs by how they ended. A bad termination colors 10 years
                        of positive experience. A graceful exit preserves good memories.</p>
                    </div>
                </div>
                <div class="example-item">
                    <span class="example-icon">üíâ</span>
                    <div class="example-content">
                        <h4>Medical Procedures</h4>
                        <p>Doctors can improve patient satisfaction by slightly extending a procedure
                        if it means ending with less discomfort. More treatment, better memory.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="citation">
            <p class="citation-text">"Odd as it may seem, I am my remembering self, and the experiencing self,
            who does my living, is like a stranger to me."</p>
            <p class="citation-source">‚Äî Daniel Kahneman, "Thinking, Fast and Slow" (2011)</p>
        </div>
    </div>

    <script>
        let currentTrial = 'A';
        let trialAComplete = false;
        let trialBComplete = false;
        let timerInterval = null;
        let painData = { A: [], B: [] };

        const trialConfigs = {
            A: {
                duration: 60,
                painProfile: time => 7, // Constant high pain
                tempProfile: time => 14
            },
            B: {
                duration: 90,
                painProfile: time => time < 60 ? 7 : 7 - ((time - 60) / 30) * 4, // Decreases in last 30s
                tempProfile: time => time < 60 ? 14 : 14 + ((time - 60) / 30)
            }
        };

        function startTrial() {
            const config = trialConfigs[currentTrial];
            let elapsed = 0;
            painData[currentTrial] = [];

            document.getElementById('startBtn').style.display = 'none';
            document.getElementById('handIcon').classList.add('submerged');

            // Initialize canvas
            const canvas = document.getElementById('painCanvas');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw axes
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
            ctx.beginPath();
            ctx.moveTo(30, 10);
            ctx.lineTo(30, 130);
            ctx.lineTo(450, 130);
            ctx.stroke();

            // Labels
            ctx.fillStyle = '#a5b1c2';
            ctx.font = '11px Georgia';
            ctx.fillText('10', 8, 15);
            ctx.fillText('0', 12, 130);
            ctx.fillText('Time (seconds)', 200, 148);

            timerInterval = setInterval(() => {
                elapsed++;

                // Update display
                const pain = config.painProfile(elapsed);
                const temp = config.tempProfile(elapsed);

                document.getElementById('timerDisplay').textContent =
                    `${Math.floor(elapsed / 60)}:${(elapsed % 60).toString().padStart(2, '0')}`;
                document.getElementById('painLevel').textContent = pain.toFixed(1);
                document.getElementById('painBar').style.width = (pain * 10) + '%';

                const tempDisplay = document.getElementById('tempDisplay');
                if (temp > 14.5) {
                    tempDisplay.innerHTML = `<span class="temp-warm">${temp.toFixed(1)}¬∞C</span>`;
                } else {
                    tempDisplay.innerHTML = `<span class="temp-cold">${temp.toFixed(1)}¬∞C</span>`;
                }

                // Record pain data
                painData[currentTrial].push(pain);

                // Draw pain graph
                drawPainGraph(ctx, elapsed, config.duration);

                if (elapsed >= config.duration) {
                    endTrial();
                }
            }, 100); // Faster for demo (100ms = 1 simulated second)
        }

        function drawPainGraph(ctx, elapsed, duration) {
            const data = painData[currentTrial];
            const xScale = 400 / duration;
            const yScale = 110 / 10;

            // Clear previous line
            ctx.clearRect(31, 0, 430, 129);

            // Draw line
            ctx.strokeStyle = currentTrial === 'A' ? '#00b4d8' : '#f77f00';
            ctx.lineWidth = 2;
            ctx.beginPath();
            data.forEach((pain, i) => {
                const x = 30 + i * xScale;
                const y = 130 - pain * yScale;
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.stroke();

            // Draw 60s marker for Trial B
            if (currentTrial === 'B' && elapsed > 60) {
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(30 + 60 * xScale, 10);
                ctx.lineTo(30 + 60 * xScale, 130);
                ctx.stroke();
                ctx.setLineDash([]);

                ctx.fillStyle = '#a5b1c2';
                ctx.fillText('60s', 30 + 60 * xScale - 10, 145);
            }
        }

        function endTrial() {
            clearInterval(timerInterval);
            document.getElementById('handIcon').classList.remove('submerged');

            if (currentTrial === 'A') {
                trialAComplete = true;
                currentTrial = 'B';
                document.getElementById('trialLabel').textContent = 'Trial B';
                document.getElementById('startBtn').textContent = 'Start Trial B';
                document.getElementById('startBtn').style.display = 'inline-block';

                // Reset displays
                document.getElementById('timerDisplay').textContent = '0:00';
                document.getElementById('painLevel').textContent = '0';
                document.getElementById('painBar').style.width = '0%';
                document.getElementById('tempDisplay').innerHTML = '<span class="temp-cold">14¬∞C</span>';
            } else {
                trialBComplete = true;
                showChoice();
            }
        }

        function showChoice() {
            document.getElementById('simulationContainer').style.display = 'none';
            document.getElementById('choiceSection').style.display = 'block';
        }

        function makeChoice(choice) {
            document.querySelectorAll('.choice-btn').forEach(btn => btn.classList.remove('selected'));
            event.currentTarget.classList.add('selected');

            setTimeout(() => showResults(choice), 500);
        }

        function showResults(choice) {
            document.getElementById('experimentSection').style.display = 'none';
            document.getElementById('resultsSection').classList.add('show');

            const paradoxTitle = document.getElementById('paradoxTitle');
            const yourChoice = document.getElementById('yourChoice');

            if (choice === 'B') {
                paradoxTitle.textContent = 'üé≠ You Chose MORE Pain!';
                paradoxTitle.style.color = '#d62828';
                yourChoice.innerHTML = `You chose <span class="chosen">Trial B</span> ‚Äî just like 69% of Kahneman's
                    participants! Even though it involved 33% more total discomfort, the better ending
                    made it seem preferable.`;
            } else {
                paradoxTitle.textContent = '‚ú® You Resisted the Illusion!';
                paradoxTitle.style.color = '#00b4d8';
                yourChoice.innerHTML = `You chose <span class="chosen">Trial A</span> ‚Äî the objectively
                    less painful option! You're in the minority who prioritized total suffering
                    over how it ended. Only 31% made this choice in the original study.`;
            }
        }

        function restartExperiment() {
            currentTrial = 'A';
            trialAComplete = false;
            trialBComplete = false;
            painData = { A: [], B: [] };

            document.getElementById('resultsSection').classList.remove('show');
            document.getElementById('experimentSection').style.display = 'block';
            document.getElementById('simulationContainer').style.display = 'block';
            document.getElementById('choiceSection').style.display = 'none';
            document.getElementById('trialLabel').textContent = 'Trial A';
            document.getElementById('startBtn').textContent = 'Start Trial A';
            document.getElementById('startBtn').style.display = 'inline-block';
            document.getElementById('timerDisplay').textContent = '0:00';
            document.getElementById('painLevel').textContent = '0';
            document.getElementById('painBar').style.width = '0%';
            document.getElementById('tempDisplay').innerHTML = '<span class="temp-cold">14¬∞C</span>';

            // Clear canvas
            const canvas = document.getElementById('painCanvas');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            document.querySelectorAll('.choice-btn').forEach(btn => btn.classList.remove('selected'));
        }
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
