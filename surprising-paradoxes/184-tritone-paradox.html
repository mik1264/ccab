<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Tritone Paradox - When Sound Goes Up and Down Simultaneously</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f0f23 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            font-size: 2.4em;
            background: linear-gradient(135deg, #a855f7, #ec4899, #f97316);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.3em;
            color: #aaa;
            font-style: italic;
        }

        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #a855f7;
            text-decoration: none;
            font-size: 1.1em;
            z-index: 100;
            transition: color 0.3s;
        }

        .back-link:hover {
            color: #ec4899;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }

        @media (max-width: 1000px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        .panel {
            background: rgba(30, 30, 50, 0.85);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(168, 85, 247, 0.3);
        }

        .panel h2 {
            color: #a855f7;
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        .panel h3 {
            color: #ec4899;
            margin: 15px 0 10px 0;
            font-size: 1.1em;
        }

        .audio-player {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.2), rgba(236, 72, 153, 0.2));
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            margin-bottom: 20px;
        }

        .play-btn {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(135deg, #a855f7, #ec4899);
            border: none;
            cursor: pointer;
            font-size: 2.5em;
            color: white;
            transition: all 0.3s;
            box-shadow: 0 10px 40px rgba(168, 85, 247, 0.4);
        }

        .play-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 15px 50px rgba(168, 85, 247, 0.6);
        }

        .play-btn:active {
            transform: scale(0.95);
        }

        .play-btn.playing {
            animation: pulse 0.5s ease-in-out infinite alternate;
        }

        @keyframes pulse {
            from { box-shadow: 0 10px 40px rgba(168, 85, 247, 0.4); }
            to { box-shadow: 0 10px 60px rgba(236, 72, 153, 0.6); }
        }

        .play-label {
            margin-top: 15px;
            color: #888;
            font-size: 1.1em;
        }

        .pitch-pairs {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .pitch-btn {
            padding: 15px 10px;
            background: rgba(0,0,0,0.3);
            border: 2px solid rgba(168, 85, 247, 0.3);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            color: #aaa;
            font-size: 0.9em;
        }

        .pitch-btn:hover {
            background: rgba(168, 85, 247, 0.2);
            border-color: #a855f7;
            color: white;
        }

        .pitch-btn.active {
            background: linear-gradient(135deg, #a855f7, #ec4899);
            border-color: transparent;
            color: white;
        }

        .pitch-btn .note {
            font-weight: bold;
            font-size: 1.1em;
        }

        .vote-section {
            margin: 20px 0;
            text-align: center;
        }

        .vote-question {
            font-size: 1.2em;
            color: #a855f7;
            margin-bottom: 15px;
        }

        .vote-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
        }

        .vote-btn {
            padding: 20px 40px;
            font-size: 1.2em;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .vote-btn.up {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: white;
        }

        .vote-btn.down {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }

        .vote-btn:hover {
            transform: scale(1.05);
        }

        .vote-results {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background: rgba(0,0,0,0.4);
            border-radius: 15px;
        }

        .vote-results.show {
            display: block;
        }

        .result-bar {
            height: 40px;
            background: rgba(0,0,0,0.3);
            border-radius: 20px;
            overflow: hidden;
            display: flex;
            margin: 10px 0;
        }

        .result-up {
            background: linear-gradient(90deg, #22c55e, #16a34a);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            transition: width 0.5s;
        }

        .result-down {
            background: linear-gradient(90deg, #ef4444, #dc2626);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            transition: width 0.5s;
        }

        .waveform {
            height: 100px;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            margin: 15px 0;
            position: relative;
            overflow: hidden;
        }

        .wave-line {
            position: absolute;
            height: 2px;
            width: 100%;
            top: 50%;
            transform: translateY(-50%);
        }

        .wave-line.tone1 {
            background: linear-gradient(90deg, transparent, #a855f7, transparent);
            animation: wave1 0.3s linear infinite;
        }

        .wave-line.tone2 {
            background: linear-gradient(90deg, transparent, #ec4899, transparent);
            animation: wave2 0.25s linear infinite;
        }

        @keyframes wave1 {
            0%, 100% { transform: translateY(-50%) scaleY(1); }
            50% { transform: translateY(-50%) scaleY(20); }
        }

        @keyframes wave2 {
            0%, 100% { transform: translateY(-50%) scaleY(1); }
            50% { transform: translateY(-50%) scaleY(15); }
        }

        .waveform.stopped .wave-line {
            animation: none;
            transform: translateY(-50%) scaleY(1);
        }

        .explanation {
            line-height: 1.8;
            color: #ccc;
        }

        .explanation p {
            margin-bottom: 15px;
        }

        .highlight {
            background: rgba(168, 85, 247, 0.2);
            padding: 2px 6px;
            border-radius: 4px;
            color: #a855f7;
        }

        .paradox-box {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(236, 72, 153, 0.1));
            border: 1px solid rgba(168, 85, 247, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .paradox-box h3 {
            color: #a855f7;
            margin-bottom: 10px;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        .pitch-circle {
            width: 250px;
            height: 250px;
            margin: 20px auto;
            position: relative;
            border-radius: 50%;
            background: conic-gradient(
                from 0deg,
                #a855f7, #ec4899, #f97316, #eab308, #22c55e, #06b6d4, #a855f7
            );
            opacity: 0.8;
        }

        .pitch-circle::after {
            content: '';
            position: absolute;
            top: 30px;
            left: 30px;
            right: 30px;
            bottom: 30px;
            background: #1a1a2e;
            border-radius: 50%;
        }

        .pitch-circle .center-label {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1;
            text-align: center;
            color: #888;
            font-size: 0.9em;
        }

        .note-marker {
            position: absolute;
            width: 30px;
            height: 30px;
            background: #fff;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.75em;
            color: #1a1a2e;
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
            z-index: 2;
        }

        .stat-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 15px 0;
        }

        .stat-box {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-box .value {
            font-size: 1.5em;
            font-weight: bold;
            color: #a855f7;
        }

        .stat-box .label {
            font-size: 0.85em;
            color: #888;
            margin-top: 5px;
        }

        .language-map {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 15px 0;
        }

        .region-card {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #a855f7;
        }

        .region-card h4 {
            color: #a855f7;
            margin-bottom: 8px;
        }

        .region-card p {
            color: #aaa;
            font-size: 0.9em;
        }

        .region-card .tendency {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            margin-top: 8px;
        }

        .region-card .tendency.up {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
        }

        .region-card .tendency.down {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        button.btn-secondary {
            padding: 12px 25px;
            font-size: 1em;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            background: linear-gradient(135deg, #ec4899, #f97316);
            color: white;
        }

        button.btn-secondary:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(236, 72, 153, 0.4);
        }

        .arrow-diagram {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            padding: 20px;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            margin: 15px 0;
        }

        .arrow-item {
            text-align: center;
        }

        .arrow-item .arrow {
            font-size: 3em;
        }

        .arrow-item .arrow.up { color: #22c55e; }
        .arrow-item .arrow.down { color: #ef4444; }

        .arrow-item .label {
            font-size: 0.9em;
            color: #888;
            margin-top: 5px;
        }

        .vs-text {
            font-size: 1.5em;
            color: #a855f7;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">← Back to Paradoxes</a>

    <div class="container">
        <header>
            <h1>The Tritone Paradox</h1>
            <p class="subtitle">The same tones go up for some listeners, down for others</p>
        </header>

        <div class="main-grid">
            <!-- Main Audio Player -->
            <div class="panel">
                <h2>Experience the Paradox</h2>

                <div class="audio-player">
                    <button class="play-btn" id="playBtn">▶</button>
                    <div class="play-label" id="playLabel">Click to play a tritone pair</div>
                </div>

                <div class="waveform stopped" id="waveform">
                    <div class="wave-line tone1"></div>
                    <div class="wave-line tone2"></div>
                </div>

                <h3>Try Different Pairs</h3>
                <p style="color: #888; margin-bottom: 10px;">Each pair is separated by exactly half an octave (tritone):</p>

                <div class="pitch-pairs">
                    <button class="pitch-btn active" data-pair="C-Gb">
                        <div class="note">C → F#</div>
                    </button>
                    <button class="pitch-btn" data-pair="Db-G">
                        <div class="note">C# → G</div>
                    </button>
                    <button class="pitch-btn" data-pair="D-Ab">
                        <div class="note">D → G#</div>
                    </button>
                    <button class="pitch-btn" data-pair="Eb-A">
                        <div class="note">D# → A</div>
                    </button>
                    <button class="pitch-btn" data-pair="E-Bb">
                        <div class="note">E → A#</div>
                    </button>
                    <button class="pitch-btn" data-pair="F-B">
                        <div class="note">F → B</div>
                    </button>
                </div>

                <div class="vote-section">
                    <div class="vote-question">Did the pitch go UP or DOWN?</div>
                    <div class="vote-buttons">
                        <button class="vote-btn up" id="voteUp">↑ UP</button>
                        <button class="vote-btn down" id="voteDown">↓ DOWN</button>
                    </div>
                    <div class="vote-results" id="voteResults">
                        <p style="text-align: center; margin-bottom: 10px;">Your perception compared to others:</p>
                        <div class="result-bar">
                            <div class="result-up" id="resultUp" style="width: 50%;">50%</div>
                            <div class="result-down" id="resultDown" style="width: 50%;">50%</div>
                        </div>
                        <p style="text-align: center; color: #888; margin-top: 10px;" id="resultText">
                            About half of listeners hear it going up, half hear it going down!
                        </p>
                    </div>
                </div>
            </div>

            <!-- The Paradox Explained -->
            <div class="panel">
                <h2>What's Happening?</h2>

                <div class="arrow-diagram">
                    <div class="arrow-item">
                        <div class="arrow up">↑</div>
                        <div class="label">Some hear UP</div>
                    </div>
                    <div class="vs-text">vs</div>
                    <div class="arrow-item">
                        <div class="arrow down">↓</div>
                        <div class="label">Others hear DOWN</div>
                    </div>
                </div>

                <div class="explanation">
                    <p>A <span class="highlight">tritone</span> is an interval of exactly half an octave—the most ambiguous distance in music. It's so dissonant it was called "diabolus in musica" (the devil in music) in medieval times.</p>
                    <p>When you hear two tones separated by a tritone, your brain must decide: is the second tone the higher or lower version? <strong>There's no acoustic answer—it's equally both.</strong></p>
                </div>

                <div class="pitch-circle">
                    <div class="center-label">Pitch Class Circle<br>(no octave info)</div>
                    <div class="note-marker" style="top: 5%; left: 50%;">C</div>
                    <div class="note-marker" style="top: 25%; left: 93%;">E</div>
                    <div class="note-marker" style="top: 75%; left: 93%;">G#</div>
                    <div class="note-marker" style="top: 95%; left: 50%;">F#</div>
                    <div class="note-marker" style="top: 75%; left: 7%;">D#</div>
                    <div class="note-marker" style="top: 25%; left: 7%;">A</div>
                </div>

                <p style="color: #888; text-align: center; font-size: 0.9em;">
                    These "Shepard tones" remove octave information, leaving only pitch class.
                </p>
            </div>

            <!-- Why People Differ -->
            <div class="panel">
                <h2>Why Do People Hear It Differently?</h2>

                <div class="paradox-box">
                    <h3>It's Not Random—It's Learned</h3>
                    <p>Your perception correlates strongly with:</p>
                    <ul style="margin-left: 20px; color: #ccc;">
                        <li>The language you grew up speaking</li>
                        <li>The geographical region of your childhood</li>
                        <li>The pitch range of voices you heard most</li>
                    </ul>
                </div>

                <h3>Regional Tendencies</h3>
                <div class="language-map">
                    <div class="region-card">
                        <h4>California, USA</h4>
                        <p>Tend to hear C-F# as descending</p>
                        <span class="tendency down">↓ F# is lower</span>
                    </div>
                    <div class="region-card">
                        <h4>Southern England</h4>
                        <p>Tend to hear C-F# as ascending</p>
                        <span class="tendency up">↑ F# is higher</span>
                    </div>
                    <div class="region-card">
                        <h4>Vietnam</h4>
                        <p>Tonal language speakers show distinct patterns</p>
                        <span class="tendency up">↑ Varies by dialect</span>
                    </div>
                    <div class="region-card">
                        <h4>China (Mandarin)</h4>
                        <p>Perception influenced by tonal speech</p>
                        <span class="tendency down">↓ Complex patterns</span>
                    </div>
                </div>

                <p style="color: #888; margin-top: 15px;">
                    Diana Deutsch discovered that the pitch class you hear as "higher" forms a consistent pattern for each listener, rotating around the circle.
                </p>
            </div>

            <!-- The Science -->
            <div class="panel">
                <h2>The Science Behind It</h2>

                <div class="stat-grid">
                    <div class="stat-box">
                        <div class="value">~50%</div>
                        <div class="label">Hear it as ascending</div>
                    </div>
                    <div class="stat-box">
                        <div class="value">~50%</div>
                        <div class="label">Hear it as descending</div>
                    </div>
                    <div class="stat-box">
                        <div class="value">100%</div>
                        <div class="label">Confident they're right</div>
                    </div>
                </div>

                <h3>Shepard Tones</h3>
                <div class="explanation">
                    <p>The tones used in this paradox are called <span class="highlight">Shepard tones</span>—named after Roger Shepard who invented them. Each "note" is actually multiple octaves played simultaneously with a bell-curve amplitude envelope.</p>
                    <p>This removes octave information, leaving only <em>pitch class</em> (which note, ignoring which octave). C4 and C5 become just "C".</p>
                </div>

                <h3>The Brain's "Pitch Height Template"</h3>
                <p style="color: #aaa;">
                    Your brain has an internal template mapping pitch classes to perceived height. This template—shaped by early language exposure—determines whether F# feels "higher" or "lower" than C. The template is stable within individuals but varies between them.
                </p>
            </div>

            <!-- Implications -->
            <div class="panel full-width">
                <h2>What This Means</h2>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;">
                    <div class="region-card">
                        <h4>Perception is Constructed</h4>
                        <p>Even something as basic as "higher vs lower pitch" isn't objective reality—it's an interpretation shaped by experience. Two people can hear the <em>exact same sound</em> as opposite directions.</p>
                    </div>
                    <div class="region-card">
                        <h4>Language Shapes Hearing</h4>
                        <p>The prosody (melody) of your native language literally rewires how you perceive music. Tonal language speakers show different patterns than non-tonal language speakers.</p>
                    </div>
                    <div class="region-card">
                        <h4>We Assume Agreement</h4>
                        <p>Before this paradox was discovered in 1986, no one imagined that "pitch goes up" could mean different things to different people. How many other "obvious" perceptions are we assuming?</p>
                    </div>
                    <div class="region-card">
                        <h4>Ambiguity is Resolved by Priors</h4>
                        <p>When sensory data is ambiguous (as all data is, to some degree), the brain fills in gaps using learned expectations. The tritone is just an extreme case of what always happens.</p>
                    </div>
                </div>

                <div class="paradox-box" style="margin-top: 25px;">
                    <h3>The Deep Insight</h3>
                    <p>The tritone paradox proves that <strong>there is no "neutral" perception</strong>. Every act of hearing, seeing, or sensing is an interpretation filtered through a lifetime of experience.</p>
                    <p style="margin-top: 10px; color: #a855f7;"><em>"The tritone paradox is a wonderful example of how the same physical stimulus can be perceived in opposite ways, depending on who is doing the perceiving."</em> — Diana Deutsch</p>
                </div>
            </div>
        </div>

        <p style="text-align: center; color: #666; margin-top: 30px; font-size: 0.9em;">
            Discovered by <a href="https://en.wikipedia.org/wiki/Tritone_paradox" style="color: #a855f7;">Diana Deutsch</a> in 1986 at UC San Diego.
        </p>
    </div>

    <script>
        // Audio context
        let audioCtx = null;
        let isPlaying = false;

        // Note frequencies (using Shepard tone approximation)
        const noteFreqs = {
            'C': 261.63,
            'Db': 277.18,
            'D': 293.66,
            'Eb': 311.13,
            'E': 329.63,
            'F': 349.23,
            'Gb': 369.99,
            'G': 392.00,
            'Ab': 415.30,
            'A': 440.00,
            'Bb': 466.16,
            'B': 493.88
        };

        const pairs = {
            'C-Gb': ['C', 'Gb'],
            'Db-G': ['Db', 'G'],
            'D-Ab': ['D', 'Ab'],
            'Eb-A': ['Eb', 'A'],
            'E-Bb': ['E', 'Bb'],
            'F-B': ['F', 'B']
        };

        let currentPair = 'C-Gb';
        let votes = { up: 50, down: 50 };

        function createShepardTone(ctx, baseFreq, startTime, duration) {
            const oscillators = [];
            const gains = [];

            // Create multiple octaves
            for (let octave = -2; octave <= 2; octave++) {
                const freq = baseFreq * Math.pow(2, octave);
                if (freq < 100 || freq > 4000) continue;

                const osc = ctx.createOscillator();
                const gain = ctx.createGain();

                osc.type = 'sine';
                osc.frequency.value = freq;

                // Bell curve amplitude based on frequency
                const logFreq = Math.log2(freq);
                const center = Math.log2(440); // Center around A4
                const sigma = 1.5;
                const amplitude = Math.exp(-Math.pow(logFreq - center, 2) / (2 * sigma * sigma));

                gain.gain.setValueAtTime(0, startTime);
                gain.gain.linearRampToValueAtTime(amplitude * 0.15, startTime + 0.05);
                gain.gain.setValueAtTime(amplitude * 0.15, startTime + duration - 0.05);
                gain.gain.linearRampToValueAtTime(0, startTime + duration);

                osc.connect(gain);
                gain.connect(ctx.destination);

                osc.start(startTime);
                osc.stop(startTime + duration);

                oscillators.push(osc);
                gains.push(gain);
            }

            return { oscillators, gains };
        }

        function playTritone() {
            if (isPlaying) return;

            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }

            isPlaying = true;
            const playBtn = document.getElementById('playBtn');
            const waveform = document.getElementById('waveform');
            playBtn.classList.add('playing');
            playBtn.textContent = '⏸';
            waveform.classList.remove('stopped');

            const [note1, note2] = pairs[currentPair];
            const freq1 = noteFreqs[note1];
            const freq2 = noteFreqs[note2];

            const now = audioCtx.currentTime;
            createShepardTone(audioCtx, freq1, now, 0.8);
            createShepardTone(audioCtx, freq2, now + 1.0, 0.8);

            setTimeout(() => {
                isPlaying = false;
                playBtn.classList.remove('playing');
                playBtn.textContent = '▶';
                waveform.classList.add('stopped');
            }, 2000);
        }

        function vote(direction) {
            // Simulate realistic vote distribution
            const rand = Math.random();
            if (direction === 'up') {
                votes.up = Math.round(45 + rand * 15);
            } else {
                votes.up = Math.round(40 + rand * 15);
            }
            votes.down = 100 - votes.up;

            const results = document.getElementById('voteResults');
            const resultUp = document.getElementById('resultUp');
            const resultDown = document.getElementById('resultDown');
            const resultText = document.getElementById('resultText');

            results.classList.add('show');
            resultUp.style.width = votes.up + '%';
            resultUp.textContent = votes.up + '%';
            resultDown.style.width = votes.down + '%';
            resultDown.textContent = votes.down + '%';

            if (direction === 'up') {
                resultText.innerHTML = `You heard it going <strong style="color: #22c55e;">UP</strong>. About ${votes.up}% of listeners agree with you!`;
            } else {
                resultText.innerHTML = `You heard it going <strong style="color: #ef4444;">DOWN</strong>. About ${votes.down}% of listeners agree with you!`;
            }
        }

        // Event listeners
        document.getElementById('playBtn').addEventListener('click', playTritone);

        document.querySelectorAll('.pitch-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.pitch-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentPair = btn.dataset.pair;
                document.getElementById('voteResults').classList.remove('show');
            });
        });

        document.getElementById('voteUp').addEventListener('click', () => vote('up'));
        document.getElementById('voteDown').addEventListener('click', () => vote('down'));
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
