<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Next-in-Line Effect - Surprising Paradoxes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #e8e8e8;
            min-height: 100vh;
            line-height: 1.8;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .back-link {
            display: inline-block;
            color: #64b5f6;
            text-decoration: none;
            margin-bottom: 30px;
            transition: color 0.3s;
        }

        .back-link:hover {
            color: #90caf9;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #64b5f6, #ce93d8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            font-size: 1.3rem;
            color: #b0bec5;
            margin-bottom: 30px;
            font-style: italic;
        }

        .intro {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border-left: 4px solid #64b5f6;
        }

        .intro p {
            margin-bottom: 15px;
        }

        .experiment-container {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .circle-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 350px;
            position: relative;
            margin: 20px 0;
        }

        .participant {
            position: absolute;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            transition: all 0.3s;
            border: 3px solid transparent;
        }

        .participant.you {
            background: linear-gradient(135deg, #4caf50, #81c784);
            border-color: #a5d6a7;
        }

        .participant.other {
            background: linear-gradient(135deg, #455a64, #607d8b);
        }

        .participant.speaking {
            transform: scale(1.2);
            border-color: #ffeb3b;
            box-shadow: 0 0 30px rgba(255, 235, 59, 0.5);
        }

        .participant-name {
            font-weight: bold;
            font-size: 0.85rem;
        }

        .participant-word {
            font-size: 1rem;
            margin-top: 5px;
            color: #fff;
            font-weight: bold;
            min-height: 20px;
        }

        .center-display {
            position: absolute;
            width: 180px;
            height: 180px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.4);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 15px;
        }

        .center-display .current-word {
            font-size: 2rem;
            font-weight: bold;
            color: #ffeb3b;
            text-transform: uppercase;
        }

        .center-display .instruction {
            font-size: 0.9rem;
            color: #b0bec5;
            margin-top: 10px;
        }

        .btn {
            background: linear-gradient(135deg, #64b5f6, #42a5f5);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
            display: block;
            margin: 20px auto;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(100, 181, 246, 0.4);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn.your-turn {
            background: linear-gradient(135deg, #4caf50, #66bb6a);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.5); }
            50% { box-shadow: 0 0 0 15px rgba(76, 175, 80, 0); }
        }

        .recall-section {
            display: none;
            margin-top: 30px;
        }

        .recall-section.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .recall-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }

        .recall-option {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid transparent;
            border-radius: 10px;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .recall-option:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .recall-option.selected {
            border-color: #64b5f6;
            background: rgba(100, 181, 246, 0.2);
        }

        .results-section {
            display: none;
            margin-top: 30px;
        }

        .results-section.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        .result-chart {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .position-row {
            display: flex;
            align-items: center;
            margin: 10px 0;
            gap: 15px;
        }

        .position-label {
            width: 140px;
            font-size: 0.9rem;
            text-align: right;
        }

        .position-label.critical {
            color: #ef5350;
            font-weight: bold;
        }

        .bar-container {
            flex: 1;
            height: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
            position: relative;
        }

        .bar {
            height: 100%;
            transition: width 1s ease-out;
            display: flex;
            align-items: center;
            padding-left: 10px;
            font-size: 0.85rem;
            font-weight: bold;
        }

        .bar.correct {
            background: linear-gradient(90deg, #4caf50, #81c784);
        }

        .bar.incorrect {
            background: linear-gradient(90deg, #ef5350, #e57373);
        }

        .bar.your-position {
            background: linear-gradient(90deg, #ff9800, #ffb74d);
        }

        .key-finding {
            background: linear-gradient(135deg, rgba(239, 83, 80, 0.2), rgba(239, 83, 80, 0.1));
            border: 2px solid #ef5350;
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            text-align: center;
        }

        .key-finding h3 {
            color: #ef5350;
            margin-bottom: 15px;
        }

        .stat-box {
            display: inline-block;
            background: rgba(0, 0, 0, 0.3);
            padding: 15px 25px;
            border-radius: 10px;
            margin: 10px;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #ffeb3b;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #b0bec5;
        }

        .explanation {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
        }

        .explanation h3 {
            color: #ce93d8;
            margin-bottom: 15px;
        }

        .citation {
            font-style: italic;
            color: #90a4ae;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .round-info {
            text-align: center;
            font-size: 1.1rem;
            color: #b0bec5;
            margin-bottom: 20px;
        }

        .word-sequence {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        .word-chip {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
        }

        .word-chip.shown {
            background: rgba(100, 181, 246, 0.3);
            border: 1px solid #64b5f6;
        }

        .word-chip.current {
            background: rgba(255, 235, 59, 0.3);
            border: 2px solid #ffeb3b;
            animation: pulse 0.5s infinite;
        }

        .word-chip.upcoming {
            background: rgba(255, 255, 255, 0.1);
            color: #78909c;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">‚Üê Back to Surprising Paradoxes</a>

        <h1>The Next-in-Line Effect</h1>
        <p class="subtitle">Malcolm Brenner (1973) - Memory Failure Under Performance Pressure</p>

        <div class="intro">
            <p><strong>You forget what was said RIGHT BEFORE your turn to speak!</strong></p>
            <p>In 1973, psychologist Malcolm Brenner discovered something striking: when people sit in a circle reading words aloud, they show a dramatic memory deficit for words read by others <em>immediately before their own turn</em>.</p>
            <p>The effect persists even when people are told to pay close attention. Your brain is so busy preparing for your upcoming performance that it fails to encode what's happening around you.</p>
        </div>

        <div class="experiment-container">
            <h2 style="text-align: center; margin-bottom: 20px;">Experience the Effect</h2>

            <div id="phase-intro">
                <p style="text-align: center; margin-bottom: 20px;">You're sitting in a circle with 4 other people. Each person will read a word aloud in turn. <strong>You are Person 3</strong> (in green). Try to remember ALL the words!</p>
                <button class="btn" onclick="startExperiment()">Begin Experiment</button>
            </div>

            <div id="phase-round" style="display: none;">
                <div class="round-info">Round <span id="round-number">1</span> of 3</div>

                <div class="circle-container">
                    <div class="participant other" id="p1" style="top: 10px; left: 50%; transform: translateX(-50%);">
                        <div class="participant-name">Person 1</div>
                        <div class="participant-word" id="word1"></div>
                    </div>
                    <div class="participant other" id="p2" style="top: 100px; right: 30px;">
                        <div class="participant-name">Person 2</div>
                        <div class="participant-word" id="word2"></div>
                    </div>
                    <div class="participant you" id="p3" style="bottom: 50px; right: 80px;">
                        <div class="participant-name">YOU</div>
                        <div class="participant-word" id="word3"></div>
                    </div>
                    <div class="participant other" id="p4" style="bottom: 50px; left: 80px;">
                        <div class="participant-name">Person 4</div>
                        <div class="participant-word" id="word4"></div>
                    </div>
                    <div class="participant other" id="p5" style="top: 100px; left: 30px;">
                        <div class="participant-name">Person 5</div>
                        <div class="participant-word" id="word5"></div>
                    </div>

                    <div class="center-display">
                        <div class="current-word" id="center-word">Ready?</div>
                        <div class="instruction" id="center-instruction">Watch and listen...</div>
                    </div>
                </div>

                <button class="btn" id="action-btn" onclick="handleAction()" disabled>Wait...</button>
            </div>

            <div id="phase-recall" class="recall-section">
                <h3 style="text-align: center; margin-bottom: 20px;">Which words did you hear in Round <span id="recall-round">1</span>?</h3>
                <p style="text-align: center; color: #b0bec5;">Click all the words you remember from this round:</p>
                <div class="recall-grid" id="recall-options"></div>
                <button class="btn" onclick="submitRecall()">Submit Recall</button>
            </div>

            <div id="phase-results" class="results-section">
                <h2 style="text-align: center; margin-bottom: 20px;">Your Results</h2>

                <div class="result-chart">
                    <h4 style="margin-bottom: 15px;">Recall Accuracy by Position (relative to YOUR turn)</h4>
                    <div id="results-bars"></div>
                </div>

                <div class="key-finding">
                    <h3>The Critical Finding</h3>
                    <div class="stat-box">
                        <div class="stat-value" id="before-accuracy">0%</div>
                        <div class="stat-label">Right BEFORE your turn</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="other-accuracy">0%</div>
                        <div class="stat-label">Other positions</div>
                    </div>
                    <p style="margin-top: 20px;" id="effect-description"></p>
                </div>

                <div class="explanation">
                    <h3>Why Does This Happen?</h3>
                    <p><strong>Encoding Failure:</strong> Your brain's attention and memory encoding resources are consumed by anticipating your upcoming performance. The information presented just before your turn literally never makes it into long-term memory.</p>
                    <p style="margin-top: 15px;"><strong>Two Mechanisms:</strong></p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>Attention Distraction:</strong> Your cognitive resources shift to preparing what you'll say</li>
                        <li><strong>Retrograde Amnesia:</strong> The anticipatory anxiety disrupts consolidation of recent memories</li>
                    </ul>
                    <p style="margin-top: 15px;"><strong>Real-World Impact:</strong> This affects meetings, classroom discussions, presentations, and any situation where people take turns speaking. The person who just spoke before you? You probably won't remember what they said.</p>

                    <p class="citation">Brenner, M. (1973). "The next-in-line effect." Journal of Verbal Learning and Verbal Behavior, 12(3), 320-323.</p>
                </div>

                <button class="btn" onclick="resetExperiment()">Try Again</button>
            </div>
        </div>
    </div>

    <script>
        // Word lists for each round (5 words per round, one per person)
        const wordLists = [
            ['BRIDGE', 'CANDLE', 'FOREST', 'MARBLE', 'SILVER'],
            ['GARDEN', 'HELMET', 'JUNGLE', 'LANTERN', 'ANCHOR'],
            ['CASTLE', 'DRAGON', 'FALCON', 'GLACIER', 'HARBOR']
        ];

        // Distractor words for recall test
        const distractors = [
            ['WINDOW', 'PLANET', 'COOKIE', 'RIVER'],
            ['BASKET', 'THUNDER', 'COPPER', 'VIOLIN'],
            ['MIRROR', 'PENCIL', 'RABBIT', 'SUNSET']
        ];

        let currentRound = 0;
        let currentPosition = 0;
        let roundWords = [];
        let userRecall = [];
        let allResults = [];
        let isWaitingForUser = false;

        function startExperiment() {
            document.getElementById('phase-intro').style.display = 'none';
            document.getElementById('phase-round').style.display = 'block';
            currentRound = 0;
            allResults = [];
            startRound();
        }

        function startRound() {
            currentPosition = 0;
            roundWords = wordLists[currentRound];
            document.getElementById('round-number').textContent = currentRound + 1;

            // Clear all words
            for (let i = 1; i <= 5; i++) {
                document.getElementById('word' + i).textContent = '';
                document.getElementById('p' + i).classList.remove('speaking');
            }

            document.getElementById('center-word').textContent = 'Ready?';
            document.getElementById('center-instruction').textContent = 'Watch and listen...';
            document.getElementById('action-btn').textContent = 'Wait...';
            document.getElementById('action-btn').disabled = true;
            document.getElementById('action-btn').classList.remove('your-turn');

            setTimeout(() => playWord(), 1500);
        }

        function playWord() {
            if (currentPosition >= 5) {
                // Round complete, go to recall
                setTimeout(() => showRecall(), 1000);
                return;
            }

            // Clear previous speaker
            for (let i = 1; i <= 5; i++) {
                document.getElementById('p' + i).classList.remove('speaking');
            }

            const pNum = currentPosition + 1;
            const word = roundWords[currentPosition];

            document.getElementById('p' + pNum).classList.add('speaking');
            document.getElementById('word' + pNum).textContent = word;
            document.getElementById('center-word').textContent = word;

            if (currentPosition === 2) {
                // User's turn!
                document.getElementById('center-instruction').textContent = 'YOUR TURN! Click to read aloud!';
                document.getElementById('action-btn').textContent = 'Read: "' + word + '"';
                document.getElementById('action-btn').disabled = false;
                document.getElementById('action-btn').classList.add('your-turn');
                isWaitingForUser = true;
            } else {
                document.getElementById('center-instruction').textContent = 'Person ' + pNum + ' reads...';
                document.getElementById('action-btn').textContent = 'Wait...';
                document.getElementById('action-btn').disabled = true;
                document.getElementById('action-btn').classList.remove('your-turn');

                // Auto-advance after delay
                setTimeout(() => {
                    currentPosition++;
                    playWord();
                }, 2000);
            }
        }

        function handleAction() {
            if (!isWaitingForUser) return;

            isWaitingForUser = false;
            document.getElementById('action-btn').classList.remove('your-turn');
            document.getElementById('action-btn').disabled = true;
            document.getElementById('action-btn').textContent = 'Wait...';
            document.getElementById('center-instruction').textContent = 'Good! Continuing...';

            setTimeout(() => {
                currentPosition++;
                playWord();
            }, 1500);
        }

        function showRecall() {
            document.getElementById('phase-round').style.display = 'none';
            document.getElementById('phase-recall').style.display = 'block';
            document.getElementById('phase-recall').classList.add('active');
            document.getElementById('recall-round').textContent = currentRound + 1;

            userRecall = [];

            // Create options (actual words + distractors, shuffled)
            const options = [...roundWords, ...distractors[currentRound]];
            shuffleArray(options);

            const container = document.getElementById('recall-options');
            container.innerHTML = '';

            options.forEach(word => {
                const div = document.createElement('div');
                div.className = 'recall-option';
                div.textContent = word;
                div.onclick = () => toggleRecall(div, word);
                container.appendChild(div);
            });
        }

        function toggleRecall(element, word) {
            if (element.classList.contains('selected')) {
                element.classList.remove('selected');
                userRecall = userRecall.filter(w => w !== word);
            } else {
                element.classList.add('selected');
                userRecall.push(word);
            }
        }

        function submitRecall() {
            // Score this round
            const roundResult = {
                round: currentRound + 1,
                positions: []
            };

            for (let i = 0; i < 5; i++) {
                const word = roundWords[i];
                const recalled = userRecall.includes(word);
                let positionType;

                if (i === 1) positionType = 'before'; // Position 2 = right before user (pos 3)
                else if (i === 2) positionType = 'self';
                else if (i === 3) positionType = 'after';
                else positionType = 'far';

                roundResult.positions.push({
                    position: i + 1,
                    word: word,
                    recalled: recalled,
                    type: positionType
                });
            }

            allResults.push(roundResult);

            document.getElementById('phase-recall').classList.remove('active');
            document.getElementById('phase-recall').style.display = 'none';

            currentRound++;
            if (currentRound < 3) {
                document.getElementById('phase-round').style.display = 'block';
                startRound();
            } else {
                showResults();
            }
        }

        function showResults() {
            document.getElementById('phase-results').style.display = 'block';
            document.getElementById('phase-results').classList.add('active');

            // Aggregate results by position type
            const byPosition = {
                'Position 1 (two before you)': { correct: 0, total: 0 },
                'Position 2 (RIGHT before you)': { correct: 0, total: 0 },
                'Position 3 (YOUR word)': { correct: 0, total: 0 },
                'Position 4 (right after you)': { correct: 0, total: 0 },
                'Position 5 (two after you)': { correct: 0, total: 0 }
            };

            const positionLabels = [
                'Position 1 (two before you)',
                'Position 2 (RIGHT before you)',
                'Position 3 (YOUR word)',
                'Position 4 (right after you)',
                'Position 5 (two after you)'
            ];

            allResults.forEach(round => {
                round.positions.forEach((p, idx) => {
                    const label = positionLabels[idx];
                    byPosition[label].total++;
                    if (p.recalled) byPosition[label].correct++;
                });
            });

            // Create bars
            const container = document.getElementById('results-bars');
            container.innerHTML = '';

            let beforeCorrect = 0, beforeTotal = 0;
            let otherCorrect = 0, otherTotal = 0;

            Object.entries(byPosition).forEach(([label, data], idx) => {
                const pct = data.total > 0 ? Math.round((data.correct / data.total) * 100) : 0;

                const row = document.createElement('div');
                row.className = 'position-row';

                const labelDiv = document.createElement('div');
                labelDiv.className = 'position-label' + (idx === 1 ? ' critical' : '');
                labelDiv.textContent = label;

                const barContainer = document.createElement('div');
                barContainer.className = 'bar-container';

                const bar = document.createElement('div');
                bar.className = 'bar';
                if (pct >= 66) bar.classList.add('correct');
                else if (pct <= 33) bar.classList.add('incorrect');
                else bar.classList.add('your-position');

                bar.style.width = '0%';
                bar.textContent = data.correct + '/' + data.total + ' (' + pct + '%)';

                barContainer.appendChild(bar);
                row.appendChild(labelDiv);
                row.appendChild(barContainer);
                container.appendChild(row);

                // Animate bar
                setTimeout(() => {
                    bar.style.width = Math.max(pct, 15) + '%';
                }, 100 + idx * 200);

                // Track for summary
                if (idx === 1) {
                    beforeCorrect = data.correct;
                    beforeTotal = data.total;
                } else if (idx !== 2) {
                    otherCorrect += data.correct;
                    otherTotal += data.total;
                }
            });

            const beforePct = beforeTotal > 0 ? Math.round((beforeCorrect / beforeTotal) * 100) : 0;
            const otherPct = otherTotal > 0 ? Math.round((otherCorrect / otherTotal) * 100) : 0;

            document.getElementById('before-accuracy').textContent = beforePct + '%';
            document.getElementById('other-accuracy').textContent = otherPct + '%';

            const diff = otherPct - beforePct;
            let description;
            if (diff > 20) {
                description = "You showed a strong next-in-line effect! Your recall for words immediately before your turn was " + diff + " percentage points lower than other positions. Your brain was too busy preparing to speak!";
            } else if (diff > 0) {
                description = "You showed some next-in-line effect. Words before your turn were harder to recall. In Brenner's original study, this deficit was consistent across participants.";
            } else {
                description = "Interesting! You didn't show the typical pattern. Some people can overcome the effect with extra effort, but in Brenner's original study, most participants showed significant deficits for words right before their turn.";
            }
            document.getElementById('effect-description').textContent = description;
        }

        function resetExperiment() {
            document.getElementById('phase-results').classList.remove('active');
            document.getElementById('phase-results').style.display = 'none';
            document.getElementById('phase-intro').style.display = 'block';

            // Clear everything
            for (let i = 1; i <= 5; i++) {
                document.getElementById('word' + i).textContent = '';
                document.getElementById('p' + i).classList.remove('speaking');
            }
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
    </script>
</body>
</html>
