<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arrow's Impossibility Theorem | Surprising Paradoxes</title>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --sage: #8A9A5B;
            --moss: #606C38;
            --earth: #DDA15E;
            --cream: #FEFAE0;
            --terracotta: #BC6C25;
            --dark-moss: #3d4423;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, var(--cream) 0%, #F4F1DE 50%, #EDE8D5 100%);
            min-height: 100vh;
            color: var(--dark-moss);
        }

        .organic-shape {
            position: fixed;
            border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
            opacity: 0.1;
            z-index: 0;
            animation: morph 30s ease-in-out infinite;
        }

        .shape-1 { width: 500px; height: 500px; background: var(--sage); top: -150px; right: -150px; }
        .shape-2 { width: 400px; height: 400px; background: var(--earth); bottom: -100px; left: -100px; animation-delay: -15s; }

        @keyframes morph {
            0%, 100% { border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%; }
            50% { border-radius: 50% 50% 33% 67% / 55% 27% 73% 45%; }
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 30px 20px;
            position: relative;
            z-index: 1;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 50px;
            text-decoration: none;
            color: var(--moss);
            font-weight: 600;
            margin-bottom: 20px;
            transition: all 0.3s;
        }

        .back-link:hover { background: var(--moss); color: white; }

        h1 {
            font-family: 'Lora', serif;
            font-size: 2.5rem;
            color: var(--moss);
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.8;
            margin-bottom: 30px;
            max-width: 750px;
            line-height: 1.6;
        }

        .panel {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(138, 154, 91, 0.2);
            margin-bottom: 25px;
        }

        .panel h3 {
            font-family: 'Lora', serif;
            color: var(--moss);
            margin-bottom: 15px;
        }

        .criteria-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .criterion {
            background: var(--cream);
            padding: 15px;
            border-radius: 12px;
            border-left: 4px solid var(--sage);
            transition: all 0.3s;
        }

        .criterion.violated {
            border-left-color: #c62828;
            background: #ffebee;
        }

        .criterion.satisfied {
            border-left-color: #2e7d32;
            background: #e8f5e9;
        }

        .criterion h4 {
            color: var(--moss);
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        .criterion p {
            font-size: 0.85rem;
            line-height: 1.5;
        }

        .criterion .status {
            margin-top: 10px;
            font-weight: 700;
            font-size: 0.9rem;
        }

        .criterion .status.pass { color: #2e7d32; }
        .criterion .status.fail { color: #c62828; }

        .voters-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .voter-card {
            background: #f5f5f0;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
        }

        .voter-card h4 {
            color: var(--moss);
            margin-bottom: 10px;
        }

        .preference-list {
            list-style: none;
            font-size: 1.1rem;
        }

        .preference-list li {
            padding: 5px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .rank {
            background: var(--sage);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 700;
        }

        .candidate {
            font-size: 1.5rem;
        }

        .methods-tabs {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        .method-tab {
            padding: 10px 20px;
            background: transparent;
            border: 2px solid var(--sage);
            border-radius: 25px;
            font-family: 'Nunito', sans-serif;
            font-weight: 600;
            color: var(--moss);
            cursor: pointer;
            transition: all 0.3s;
        }

        .method-tab:hover, .method-tab.active {
            background: var(--moss);
            color: white;
            border-color: var(--moss);
        }

        .result-box {
            background: var(--cream);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
        }

        .result-box h4 {
            color: var(--moss);
            margin-bottom: 15px;
            font-family: 'Lora', serif;
        }

        .winner-display {
            font-size: 3rem;
            margin-bottom: 10px;
        }

        .winner-name {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--terracotta);
        }

        .result-explanation {
            margin-top: 15px;
            font-size: 0.95rem;
            line-height: 1.6;
            text-align: left;
            background: white;
            padding: 15px;
            border-radius: 10px;
        }

        .controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            margin: 20px 0;
        }

        .btn {
            padding: 12px 25px;
            background: var(--moss);
            color: white;
            border: none;
            border-radius: 25px;
            font-family: 'Nunito', sans-serif;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn:hover { background: var(--dark-moss); transform: translateY(-2px); }
        .btn.secondary { background: transparent; border: 2px solid var(--sage); color: var(--moss); }

        .essay-section {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(138, 154, 91, 0.2);
            margin-bottom: 25px;
        }

        .essay-section h3 {
            font-family: 'Lora', serif;
            color: var(--moss);
            margin-bottom: 15px;
        }

        .essay-section p { line-height: 1.8; margin-bottom: 15px; }

        .highlight {
            background: var(--earth);
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
        }

        .math-box {
            background: white;
            padding: 15px 20px;
            border-radius: 10px;
            margin: 15px 0;
            font-family: 'Times New Roman', serif;
            font-size: 1.1rem;
            text-align: center;
            border: 1px solid rgba(138, 154, 91, 0.3);
        }

        .cycle-viz {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .cycle-item {
            font-size: 2rem;
        }

        .cycle-arrow {
            font-size: 1.5rem;
            color: var(--terracotta);
        }

        .paradox-alert {
            background: #fff3e0;
            border: 2px solid var(--earth);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
        }

        .paradox-alert h4 {
            color: var(--terracotta);
            margin-bottom: 10px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        th, td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid rgba(138, 154, 91, 0.2);
        }

        th {
            background: var(--sage);
            color: white;
            font-weight: 600;
        }

        .scenario-select {
            padding: 10px 15px;
            border: 2px solid var(--sage);
            border-radius: 10px;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            background: white;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="organic-shape shape-1"></div>
    <div class="organic-shape shape-2"></div>

    <div class="container">
        <a href="index.html" class="back-link">
            <span>&larr;</span>
            <span>Back to Surprising</span>
        </a>

        <h1>Arrow's Impossibility Theorem</h1>
        <p class="subtitle">No voting system can be perfectly fair. Kenneth Arrow proved that when there are 3+ candidates, it's mathematically impossible to satisfy all reasonable fairness criteria. This earned him the 1972 Nobel Prize in Economics.</p>

        <div class="panel">
            <h3>The Four Fairness Criteria</h3>
            <p style="margin-bottom: 15px;">Arrow identified four seemingly reasonable requirements for any voting system:</p>

            <div class="criteria-grid" id="criteriaGrid">
                <div class="criterion" id="crit-universal">
                    <h4>1. Unrestricted Domain</h4>
                    <p>The system must work for ANY possible combination of voter preferences.</p>
                    <div class="status" id="status-universal"></div>
                </div>
                <div class="criterion" id="crit-pareto">
                    <h4>2. Pareto Efficiency</h4>
                    <p>If ALL voters prefer A to B, then society must prefer A to B.</p>
                    <div class="status" id="status-pareto"></div>
                </div>
                <div class="criterion" id="crit-iia">
                    <h4>3. Independence (IIA)</h4>
                    <p>The ranking of A vs B should only depend on how voters rank A and B, not other candidates.</p>
                    <div class="status" id="status-iia"></div>
                </div>
                <div class="criterion" id="crit-dictator">
                    <h4>4. Non-Dictatorship</h4>
                    <p>No single voter should always determine the outcome regardless of others.</p>
                    <div class="status" id="status-dictator"></div>
                </div>
            </div>

            <div class="paradox-alert">
                <h4>‚ö†Ô∏è Arrow's Theorem</h4>
                <p>It is <strong>mathematically impossible</strong> for any voting system to satisfy all four criteria when there are 3+ candidates. Every system must violate at least one!</p>
            </div>
        </div>

        <div class="panel">
            <h3>Interactive Voting Simulation</h3>
            <p style="margin-bottom: 15px;">Choose a scenario and voting method to see which criteria get violated:</p>

            <div class="controls">
                <select class="scenario-select" id="scenarioSelect">
                    <option value="condorcet">Condorcet Cycle (Rock-Paper-Scissors)</option>
                    <option value="spoiler">Spoiler Effect</option>
                    <option value="consensus">Clear Consensus</option>
                    <option value="close">Close Race</option>
                </select>
            </div>

            <div class="voters-section" id="votersSection"></div>

            <h4 style="margin: 20px 0 10px; color: var(--moss);">Choose Voting Method:</h4>
            <div class="methods-tabs">
                <button class="method-tab active" data-method="plurality">Plurality</button>
                <button class="method-tab" data-method="borda">Borda Count</button>
                <button class="method-tab" data-method="irv">Ranked Choice (IRV)</button>
                <button class="method-tab" data-method="condorcet">Condorcet</button>
            </div>

            <div class="result-box" id="resultBox">
                <h4>Winner</h4>
                <div class="winner-display" id="winnerEmoji">üèÜ</div>
                <div class="winner-name" id="winnerName">--</div>
                <div class="result-explanation" id="resultExplanation"></div>
            </div>
        </div>

        <div class="essay-section">
            <h3>The Condorcet Paradox: Democracy's Cycle</h3>
            <p>Before Arrow's theorem, the Marquis de Condorcet discovered a disturbing possibility: <span class="highlight">collective preferences can be cyclic</span>, even when individual preferences are not.</p>

            <p>Imagine three voters ranking three candidates:</p>

            <table>
                <tr><th>Voter 1</th><th>Voter 2</th><th>Voter 3</th></tr>
                <tr><td>üçé &gt; üçä &gt; üçã</td><td>üçä &gt; üçã &gt; üçé</td><td>üçã &gt; üçé &gt; üçä</td></tr>
            </table>

            <p>Now let's count pairwise preferences:</p>
            <ul style="margin-left: 20px;">
                <li>üçé vs üçä: Apple wins 2-1 (Voters 1 & 3 prefer Apple)</li>
                <li>üçä vs üçã: Orange wins 2-1 (Voters 1 & 2 prefer Orange)</li>
                <li>üçã vs üçé: Lemon wins 2-1 (Voters 2 & 3 prefer Lemon)</li>
            </ul>

            <div class="cycle-viz">
                <span class="cycle-item">üçé</span>
                <span class="cycle-arrow">beats</span>
                <span class="cycle-item">üçä</span>
                <span class="cycle-arrow">beats</span>
                <span class="cycle-item">üçã</span>
                <span class="cycle-arrow">beats</span>
                <span class="cycle-item">üçé</span>
            </div>

            <p>Like rock-paper-scissors, there's <strong>no clear winner</strong>! Every candidate loses to one other candidate. This is called a <strong>Condorcet cycle</strong>.</p>
        </div>

        <div class="essay-section">
            <h3>How Each System Fails</h3>

            <div class="criteria-grid">
                <div class="criterion">
                    <h4>Plurality (First Past The Post)</h4>
                    <p>Violates <strong>IIA</strong>: Adding a third candidate can change the winner between the original two (spoiler effect). Bush vs Gore vs Nader in 2000.</p>
                </div>
                <div class="criterion">
                    <h4>Borda Count</h4>
                    <p>Violates <strong>IIA</strong>: The ranking of A vs B can change when a "clone" of C enters the race, even if nobody changes their A-vs-B preference.</p>
                </div>
                <div class="criterion">
                    <h4>Ranked Choice (IRV)</h4>
                    <p>Violates <strong>IIA</strong> and <strong>Monotonicity</strong>: A candidate can lose by gaining more support! Also suffers from spoiler effects.</p>
                </div>
                <div class="criterion">
                    <h4>Dictatorship</h4>
                    <p>Satisfies IIA and Pareto, but obviously violates <strong>Non-Dictatorship</strong>. Arrow proved this is the ONLY system that satisfies the other three!</p>
                </div>
            </div>
        </div>

        <div class="essay-section">
            <h3>Real-World Implications</h3>
            <p>Arrow's theorem isn't just mathematical curiosity‚Äîit has profound implications:</p>

            <ul style="list-style: none; padding: 0;">
                <li style="padding: 12px 0; border-bottom: 1px solid rgba(138, 154, 91, 0.2);">
                    <strong>üó≥Ô∏è Electoral Systems</strong> ‚Äî No voting reform can create a "perfect" system. Plurality, ranked choice, approval voting‚Äîall have fundamental flaws.
                </li>
                <li style="padding: 12px 0; border-bottom: 1px solid rgba(138, 154, 91, 0.2);">
                    <strong>üèõÔ∏è Legislatures</strong> ‚Äî Agenda control matters enormously. The order in which options are voted on can determine the outcome.
                </li>
                <li style="padding: 12px 0; border-bottom: 1px solid rgba(138, 154, 91, 0.2);">
                    <strong>üìä Social Choice</strong> ‚Äî "The will of the people" is often an incoherent concept. Different aggregation methods give different "wills."
                </li>
                <li style="padding: 12px 0;">
                    <strong>ü§ñ AI Alignment</strong> ‚Äî How do we aggregate human preferences for AI systems? Arrow's theorem says there's no perfect method.
                </li>
            </ul>
        </div>

        <div class="essay-section">
            <h3>Escaping the Impossibility</h3>
            <p>While we can't satisfy all criteria, we can make trade-offs:</p>

            <div class="math-box">
                Gibbard-Satterthwaite Theorem: Any non-dictatorial voting system with 3+ candidates is susceptible to strategic voting.
            </div>

            <p><strong>Possible escapes:</strong></p>
            <ul style="margin-left: 20px; margin-top: 10px;">
                <li><strong>Domain Restriction:</strong> If preferences are "single-peaked" (voters agree on a left-right spectrum), Condorcet methods work.</li>
                <li><strong>Randomization:</strong> Random ballot selection satisfies some criteria probabilistically.</li>
                <li><strong>Approval/Score Voting:</strong> Avoids ranked preferences, escaping some issues (but not all).</li>
                <li><strong>Accept Imperfection:</strong> Choose the system that minimizes the violations you care most about.</li>
            </ul>
        </div>
    </div>

    <script>
        const candidates = ['üçé', 'üçä', 'üçã'];
        const candidateNames = { 'üçé': 'Apple', 'üçä': 'Orange', 'üçã': 'Lemon' };

        const scenarios = {
            condorcet: {
                name: 'Condorcet Cycle',
                voters: [
                    { name: 'Group A (35%)', prefs: ['üçé', 'üçä', 'üçã'], count: 35 },
                    { name: 'Group B (33%)', prefs: ['üçä', 'üçã', 'üçé'], count: 33 },
                    { name: 'Group C (32%)', prefs: ['üçã', 'üçé', 'üçä'], count: 32 }
                ]
            },
            spoiler: {
                name: 'Spoiler Effect',
                voters: [
                    { name: 'Group A (40%)', prefs: ['üçé', 'üçä', 'üçã'], count: 40 },
                    { name: 'Group B (35%)', prefs: ['üçä', 'üçé', 'üçã'], count: 35 },
                    { name: 'Group C (25%)', prefs: ['üçã', 'üçä', 'üçé'], count: 25 }
                ]
            },
            consensus: {
                name: 'Clear Consensus',
                voters: [
                    { name: 'Group A (50%)', prefs: ['üçé', 'üçä', 'üçã'], count: 50 },
                    { name: 'Group B (30%)', prefs: ['üçé', 'üçã', 'üçä'], count: 30 },
                    { name: 'Group C (20%)', prefs: ['üçä', 'üçé', 'üçã'], count: 20 }
                ]
            },
            close: {
                name: 'Close Race',
                voters: [
                    { name: 'Group A (34%)', prefs: ['üçé', 'üçã', 'üçä'], count: 34 },
                    { name: 'Group B (33%)', prefs: ['üçä', 'üçé', 'üçã'], count: 33 },
                    { name: 'Group C (33%)', prefs: ['üçã', 'üçä', 'üçé'], count: 33 }
                ]
            }
        };

        let currentScenario = 'condorcet';
        let currentMethod = 'plurality';

        function renderVoters() {
            const section = document.getElementById('votersSection');
            const scenario = scenarios[currentScenario];

            section.innerHTML = scenario.voters.map(v => `
                <div class="voter-card">
                    <h4>${v.name}</h4>
                    <ul class="preference-list">
                        ${v.prefs.map((p, i) => `
                            <li><span class="rank">${i + 1}</span><span class="candidate">${p}</span></li>
                        `).join('')}
                    </ul>
                </div>
            `).join('');
        }

        function plurality(voters) {
            const counts = { 'üçé': 0, 'üçä': 0, 'üçã': 0 };
            voters.forEach(v => counts[v.prefs[0]] += v.count);
            const winner = Object.entries(counts).sort((a, b) => b[1] - a[1])[0];
            return {
                winner: winner[0],
                explanation: `First-place votes: üçé=${counts['üçé']}%, üçä=${counts['üçä']}%, üçã=${counts['üçã']}%. ${winner[0]} wins with the most first-place votes.`,
                details: counts
            };
        }

        function borda(voters) {
            const points = { 'üçé': 0, 'üçä': 0, 'üçã': 0 };
            voters.forEach(v => {
                v.prefs.forEach((p, i) => {
                    points[p] += (2 - i) * v.count; // 2 points for 1st, 1 for 2nd, 0 for 3rd
                });
            });
            const winner = Object.entries(points).sort((a, b) => b[1] - a[1])[0];
            return {
                winner: winner[0],
                explanation: `Borda points (2-1-0): üçé=${points['üçé']}, üçä=${points['üçä']}, üçã=${points['üçã']}. ${winner[0]} wins with the highest score.`,
                details: points
            };
        }

        function irv(voters) {
            let remaining = ['üçé', 'üçä', 'üçã'];
            let votersCopy = voters.map(v => ({ ...v, prefs: [...v.prefs] }));
            let rounds = [];

            while (remaining.length > 1) {
                const counts = {};
                remaining.forEach(c => counts[c] = 0);

                votersCopy.forEach(v => {
                    const topChoice = v.prefs.find(p => remaining.includes(p));
                    if (topChoice) counts[topChoice] += v.count;
                });

                rounds.push({ ...counts });

                const sorted = Object.entries(counts).sort((a, b) => a[1] - b[1]);
                if (sorted[0][1] > 50) break;

                const eliminated = sorted[0][0];
                remaining = remaining.filter(c => c !== eliminated);
            }

            const winner = remaining[0];
            return {
                winner,
                explanation: `After ${rounds.length} round(s) of elimination, ${winner} wins. Last round: ${remaining.map(c => `${c}=${rounds[rounds.length-1][c]}%`).join(', ')}`,
                details: rounds
            };
        }

        function condorcetMethod(voters) {
            const pairwise = {};
            candidates.forEach(a => {
                candidates.forEach(b => {
                    if (a !== b) {
                        let aVotes = 0;
                        voters.forEach(v => {
                            if (v.prefs.indexOf(a) < v.prefs.indexOf(b)) {
                                aVotes += v.count;
                            }
                        });
                        pairwise[`${a}>${b}`] = aVotes;
                    }
                });
            });

            // Find Condorcet winner (beats all others head-to-head)
            for (const c of candidates) {
                const others = candidates.filter(x => x !== c);
                const beatsAll = others.every(o => pairwise[`${c}>${o}`] > 50);
                if (beatsAll) {
                    return {
                        winner: c,
                        explanation: `${c} is the Condorcet winner‚Äîbeats every other candidate head-to-head.`,
                        details: pairwise,
                        isCycle: false
                    };
                }
            }

            // No Condorcet winner - there's a cycle
            return {
                winner: 'üîÑ',
                explanation: `No Condorcet winner exists! There's a cycle: ${candidates[0]} beats ${candidates[1]} (${pairwise[`${candidates[0]}>${candidates[1]}`]}%), ${candidates[1]} beats ${candidates[2]} (${pairwise[`${candidates[1]}>${candidates[2]}`]}%), ${candidates[2]} beats ${candidates[0]} (${pairwise[`${candidates[2]}>${candidates[0]}`]}%).`,
                details: pairwise,
                isCycle: true
            };
        }

        function runElection() {
            const scenario = scenarios[currentScenario];
            let result;

            switch (currentMethod) {
                case 'plurality':
                    result = plurality(scenario.voters);
                    break;
                case 'borda':
                    result = borda(scenario.voters);
                    break;
                case 'irv':
                    result = irv(scenario.voters);
                    break;
                case 'condorcet':
                    result = condorcetMethod(scenario.voters);
                    break;
            }

            document.getElementById('winnerEmoji').textContent = result.winner;
            document.getElementById('winnerName').textContent =
                result.winner === 'üîÑ' ? 'CYCLE - No Winner!' : candidateNames[result.winner];
            document.getElementById('resultExplanation').textContent = result.explanation;

            // Update criteria statuses
            updateCriteria(result);
        }

        function updateCriteria(result) {
            // Reset all
            document.querySelectorAll('.criterion').forEach(c => {
                c.classList.remove('satisfied', 'violated');
            });
            document.querySelectorAll('.status').forEach(s => s.textContent = '');

            // Universal domain - always satisfied by these methods
            document.getElementById('crit-universal').classList.add('satisfied');
            document.getElementById('status-universal').textContent = '‚úì Satisfied';
            document.getElementById('status-universal').className = 'status pass';

            // Non-dictatorship - always satisfied by these methods
            document.getElementById('crit-dictator').classList.add('satisfied');
            document.getElementById('status-dictator').textContent = '‚úì Satisfied';
            document.getElementById('status-dictator').className = 'status pass';

            // Pareto - almost always satisfied
            document.getElementById('crit-pareto').classList.add('satisfied');
            document.getElementById('status-pareto').textContent = '‚úì Satisfied';
            document.getElementById('status-pareto').className = 'status pass';

            // IIA - violated by plurality, borda, IRV in spoiler scenarios
            if (currentScenario === 'spoiler' && currentMethod !== 'condorcet') {
                document.getElementById('crit-iia').classList.add('violated');
                document.getElementById('status-iia').textContent = '‚úó VIOLATED (spoiler effect)';
                document.getElementById('status-iia').className = 'status fail';
            } else if (currentScenario === 'condorcet' && result.isCycle) {
                document.getElementById('crit-iia').classList.add('violated');
                document.getElementById('status-iia').textContent = '‚úó VIOLATED (cycle exists)';
                document.getElementById('status-iia').className = 'status fail';
            } else {
                document.getElementById('crit-iia').classList.add('satisfied');
                document.getElementById('status-iia').textContent = '‚úì Satisfied (in this case)';
                document.getElementById('status-iia').className = 'status pass';
            }
        }

        // Event listeners
        document.getElementById('scenarioSelect').addEventListener('change', (e) => {
            currentScenario = e.target.value;
            renderVoters();
            runElection();
        });

        document.querySelectorAll('.method-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.method-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                currentMethod = tab.dataset.method;
                runElection();
            });
        });

        // Initialize
        renderVoters();
        runElection();
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
