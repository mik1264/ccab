<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Monty Hall Problem - Should You Switch?</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #e8e8f8;
            line-height: 1.8;
        }

        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            padding: 12px 24px;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            color: #f4a261;
            text-decoration: none;
            border-radius: 30px;
            font-size: 14px;
            z-index: 1000;
            transition: all 0.3s;
            border: 1px solid rgba(244,162,97,0.3);
        }

        .back-link:hover {
            background: rgba(244,162,97,0.2);
            transform: translateX(-5px);
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 80px 30px 60px;
        }

        header {
            text-align: center;
            margin-bottom: 50px;
        }

        h1 {
            font-size: 2.8rem;
            font-weight: 400;
            color: #f4a261;
            margin-bottom: 20px;
            letter-spacing: 2px;
        }

        .subtitle {
            font-size: 1.4rem;
            color: #a8b2d1;
            font-style: italic;
        }

        .paradox-statement {
            background: linear-gradient(135deg, rgba(244,162,97,0.15) 0%, rgba(255,215,0,0.1) 100%);
            border-left: 4px solid #f4a261;
            padding: 30px 40px;
            margin: 40px 0;
            border-radius: 0 20px 20px 0;
            font-size: 1.25rem;
            text-align: center;
        }

        h2 {
            font-size: 1.8rem;
            color: #f4a261;
            margin: 50px 0 25px;
            font-weight: 400;
        }

        p {
            margin-bottom: 20px;
            color: #c8d0e8;
        }

        .highlight {
            color: #ffd700;
            font-weight: 600;
        }

        .orange {
            color: #f4a261;
            font-weight: 600;
        }

        .simulation-container {
            background: rgba(0,0,0,0.4);
            border-radius: 20px;
            padding: 30px;
            margin: 40px 0;
            border: 1px solid rgba(244,162,97,0.2);
        }

        .sim-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .sim-title {
            font-size: 1.4rem;
            color: #f4a261;
        }

        .controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #f4a261 0%, #e76f51 100%);
            color: white;
        }

        .btn-secondary {
            background: rgba(255,255,255,0.1);
            color: #a8b2d1;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(244,162,97,0.3);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .game-stage {
            text-align: center;
            margin-bottom: 30px;
        }

        .doors-container {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 40px 0;
            flex-wrap: wrap;
        }

        .door {
            width: 150px;
            height: 220px;
            background: linear-gradient(180deg, #8b4513 0%, #654321 100%);
            border-radius: 10px 10px 0 0;
            border: 4px solid #5d3a1a;
            position: relative;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .door:hover:not(.disabled) {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(0,0,0,0.4);
        }

        .door.selected {
            box-shadow: 0 0 0 4px #f4a261, 0 10px 30px rgba(244,162,97,0.4);
        }

        .door.opened {
            background: linear-gradient(180deg, #2a2a4a 0%, #1a1a3a 100%);
            border-color: #3a3a5a;
        }

        .door.disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }

        .door-number {
            position: absolute;
            top: -40px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.5rem;
            font-weight: 700;
            color: #f4a261;
        }

        .door-handle {
            width: 12px;
            height: 30px;
            background: #c9a227;
            border-radius: 3px;
            position: absolute;
            right: 20px;
        }

        .door-content {
            font-size: 4rem;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .door.opened .door-content {
            opacity: 1;
        }

        .game-message {
            font-size: 1.3rem;
            color: #f4a261;
            margin: 20px 0;
            min-height: 40px;
        }

        .choice-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }

        .choice-btn {
            padding: 15px 40px;
            font-size: 1.1rem;
            border-radius: 30px;
            border: 2px solid #f4a261;
            background: transparent;
            color: #f4a261;
            cursor: pointer;
            transition: all 0.3s;
        }

        .choice-btn:hover {
            background: #f4a261;
            color: #1a1a2e;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 30px;
        }

        .stat-box {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: #f4a261;
            font-family: 'Courier New', monospace;
        }

        .stat-label {
            font-size: 0.85rem;
            color: #8892b0;
            margin-top: 5px;
        }

        .stat-value.green { color: #4ecdc4; }
        .stat-value.red { color: #e94560; }

        .explanation-box {
            background: rgba(255,215,0,0.1);
            border: 1px solid rgba(255,215,0,0.3);
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
        }

        .explanation-box h3 {
            color: #ffd700;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .probability-visual {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .prob-column {
            text-align: center;
        }

        .prob-bar-container {
            width: 80px;
            height: 200px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            position: relative;
            margin: 10px auto;
            overflow: hidden;
        }

        .prob-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            border-radius: 0 0 10px 10px;
            transition: height 0.5s ease;
        }

        .prob-bar.stay {
            background: linear-gradient(180deg, #e94560, #c42d4b);
        }

        .prob-bar.switch {
            background: linear-gradient(180deg, #4ecdc4, #2ec4b6);
        }

        .prob-label {
            font-size: 1.2rem;
            font-weight: 700;
            margin-top: 10px;
        }

        .history-box {
            background: rgba(78,205,196,0.1);
            border: 1px solid rgba(78,205,196,0.3);
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
        }

        .history-box h3 {
            color: #4ecdc4;
            margin-bottom: 15px;
        }

        .auto-sim-container {
            text-align: center;
            margin: 30px 0;
        }

        .auto-sim-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        footer {
            text-align: center;
            margin-top: 60px;
            padding-top: 40px;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: #5a6a8a;
        }

        footer a {
            color: #f4a261;
            text-decoration: none;
        }

        @media (max-width: 768px) {
            h1 { font-size: 2rem; }
            .door { width: 100px; height: 160px; }
            .door-content { font-size: 3rem; }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back to Gallery</a>

    <div class="container">
        <header>
            <h1>üö™ The Monty Hall Problem</h1>
            <p class="subtitle">The game show puzzle that divided mathematicians</p>
        </header>

        <div class="paradox-statement">
            <strong>The Paradox:</strong> After Monty reveals a goat, switching doors gives you a
            <span class="highlight">2/3 chance</span> of winning the car‚Äîtwice as good as staying!
        </div>

        <h2>The Setup</h2>
        <p>
            You're on a game show. Before you are three doors. Behind one door is a brand new car.
            Behind the other two are goats. You pick a door‚Äîsay, Door 1.
        </p>
        <p>
            The host, Monty Hall, who knows what's behind each door, opens another door‚Äîsay, Door 3‚Äîrevealing
            a goat. He then asks: <span class="orange">"Would you like to switch to Door 2?"</span>
        </p>
        <p>
            Should you switch? Most people say it doesn't matter‚Äîit's 50/50 now, right?
            <span class="orange">Wrong.</span> You should <em>always</em> switch. Switching wins 2/3 of the time!
        </p>

        <div class="simulation-container">
            <div class="sim-header">
                <div class="sim-title">üéÆ Play the Game</div>
                <div class="controls">
                    <button class="btn btn-secondary" id="reset-game">New Game</button>
                </div>
            </div>

            <div class="game-stage">
                <p class="game-message" id="game-message">Choose a door!</p>
            </div>

            <div class="doors-container">
                <div class="door" data-door="1">
                    <span class="door-number">Door 1</span>
                    <div class="door-handle"></div>
                    <span class="door-content" id="content-1"></span>
                </div>
                <div class="door" data-door="2">
                    <span class="door-number">Door 2</span>
                    <div class="door-handle"></div>
                    <span class="door-content" id="content-2"></span>
                </div>
                <div class="door" data-door="3">
                    <span class="door-number">Door 3</span>
                    <div class="door-handle"></div>
                    <span class="door-content" id="content-3"></span>
                </div>
            </div>

            <div class="choice-buttons" id="choice-buttons" style="display: none;">
                <button class="choice-btn" id="stay-btn">Stay with my choice</button>
                <button class="choice-btn" id="switch-btn">Switch doors</button>
            </div>

            <div class="stats-grid">
                <div class="stat-box">
                    <div class="stat-value" id="games-played">0</div>
                    <div class="stat-label">Games Played</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value green" id="switch-wins">0</div>
                    <div class="stat-label">Switch Wins</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value red" id="stay-wins">0</div>
                    <div class="stat-label">Stay Wins</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value green" id="switch-rate">0%</div>
                    <div class="stat-label">Switch Win Rate</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value red" id="stay-rate">0%</div>
                    <div class="stat-label">Stay Win Rate</div>
                </div>
            </div>

            <div class="auto-sim-container">
                <h3 style="color: #f4a261; margin-bottom: 15px;">Run Automated Simulation</h3>
                <div class="auto-sim-controls">
                    <button class="btn btn-primary" id="run-100">Run 100 Games</button>
                    <button class="btn btn-primary" id="run-1000">Run 1,000 Games</button>
                    <button class="btn btn-secondary" id="reset-stats">Reset Stats</button>
                </div>
            </div>

            <div class="probability-visual">
                <div class="prob-column">
                    <div class="prob-bar-container">
                        <div class="prob-bar stay" id="stay-bar" style="height: 33.3%;"></div>
                    </div>
                    <div class="prob-label" style="color: #e94560;">STAY</div>
                    <div id="stay-theory">33.3%</div>
                </div>
                <div class="prob-column">
                    <div class="prob-bar-container">
                        <div class="prob-bar switch" id="switch-bar" style="height: 66.6%;"></div>
                    </div>
                    <div class="prob-label" style="color: #4ecdc4;">SWITCH</div>
                    <div id="switch-theory">66.7%</div>
                </div>
            </div>
        </div>

        <div class="explanation-box">
            <h3>üß† Why Does This Work?</h3>
            <p>
                The key insight is that <span class="highlight">Monty's action provides information</span>.
                When you first choose, you have a 1/3 chance of picking the car and a 2/3 chance of picking a goat.
            </p>
            <p>
                <strong>If you picked the car (1/3 chance):</strong> Monty can open either goat door. Switching loses.
            </p>
            <p>
                <strong>If you picked a goat (2/3 chance):</strong> Monty MUST open the other goat door.
                The car is behind the remaining door. Switching wins!
            </p>
            <p>
                Since you're more likely to have initially picked a goat (2/3), switching is more likely to
                win you the car. Monty's forced move concentrates all that 2/3 probability onto a single door.
            </p>
        </div>

        <h2>The Controversy</h2>
        <p>
            When Marilyn vos Savant published this puzzle and its solution in her Parade magazine column in 1990,
            she received over 10,000 letters‚Äîmany from mathematicians and PhDs‚Äîinsisting she was wrong.
        </p>
        <p>
            Even the legendary Paul Erd≈ës didn't believe the answer until he was shown a computer simulation.
            The problem is now a famous example of how <span class="orange">human intuition fails at probability</span>.
        </p>

        <div class="history-box">
            <h3>üé¨ The Real Monty Hall</h3>
            <p>
                The problem is named after Monty Hall, the host of the TV game show "Let's Make a Deal"
                (1963-1991). While the show inspired the puzzle, the actual game show rules were different
                and more complex.
            </p>
            <p>
                The mathematical puzzle was formalized by Steve Selvin in 1975 in The American Statistician,
                but became famous through Marilyn vos Savant's column in 1990.
            </p>
        </div>

        <h2>Key Assumptions</h2>
        <p>
            The solution depends on these crucial assumptions:
        </p>
        <p>
            ‚Ä¢ Monty <strong>always</strong> opens a door with a goat<br>
            ‚Ä¢ Monty <strong>always</strong> offers you the chance to switch<br>
            ‚Ä¢ Monty <strong>knows</strong> where the car is and never reveals it<br>
            ‚Ä¢ Monty <strong>never</strong> opens your initially chosen door
        </p>
        <p>
            If any of these assumptions change, the probabilities can change too!
        </p>

        <footer>
            <p>
                Named after Monty Hall, host of "Let's Make a Deal" ¬∑
                <a href="https://en.wikipedia.org/wiki/Monty_Hall_problem" target="_blank">Learn more on Wikipedia</a>
            </p>
            <p style="margin-top: 15px; font-size: 0.9rem;">
                Sources:
                <a href="https://brilliant.org/wiki/monty-hall-problem/" target="_blank">Brilliant.org</a> ¬∑
                <a href="https://statisticsbyjim.com/fun/monty-hall-problem/" target="_blank">Statistics By Jim</a>
            </p>
        </footer>
    </div>

    <script>
        // Game state
        let carPosition;
        let playerChoice = null;
        let montyOpened = null;
        let gamePhase = 'choose'; // choose, decide, ended

        // Stats
        let stats = {
            gamesPlayed: 0,
            switchWins: 0,
            stayWins: 0,
            switchGames: 0,
            stayGames: 0
        };

        const doors = document.querySelectorAll('.door');
        const gameMessage = document.getElementById('game-message');
        const choiceButtons = document.getElementById('choice-buttons');

        function resetGame() {
            // Place car randomly
            carPosition = Math.floor(Math.random() * 3) + 1;

            // Reset state
            playerChoice = null;
            montyOpened = null;
            gamePhase = 'choose';

            // Reset doors
            doors.forEach(door => {
                door.classList.remove('selected', 'opened', 'disabled');
                const num = door.dataset.door;
                document.getElementById(`content-${num}`).textContent = '';
            });

            choiceButtons.style.display = 'none';
            gameMessage.textContent = 'Choose a door!';
        }

        function montyReveals() {
            // Monty opens a door with a goat that isn't player's choice
            const possibleDoors = [1, 2, 3].filter(d => d !== playerChoice && d !== carPosition);
            montyOpened = possibleDoors[Math.floor(Math.random() * possibleDoors.length)];

            // Show the goat
            const doorEl = document.querySelector(`[data-door="${montyOpened}"]`);
            doorEl.classList.add('opened', 'disabled');
            document.getElementById(`content-${montyOpened}`).textContent = 'üêê';

            gameMessage.textContent = `Monty opens Door ${montyOpened}... It's a goat! Do you want to switch?`;
            choiceButtons.style.display = 'flex';
            gamePhase = 'decide';
        }

        function endGame(switched) {
            gamePhase = 'ended';
            choiceButtons.style.display = 'none';

            const finalChoice = switched ?
                [1, 2, 3].find(d => d !== playerChoice && d !== montyOpened) :
                playerChoice;

            // Reveal all doors
            doors.forEach(door => {
                const num = parseInt(door.dataset.door);
                door.classList.add('opened');
                if (num === carPosition) {
                    document.getElementById(`content-${num}`).textContent = 'üöó';
                } else {
                    document.getElementById(`content-${num}`).textContent = 'üêê';
                }
            });

            // Update stats
            stats.gamesPlayed++;
            const won = finalChoice === carPosition;

            if (switched) {
                stats.switchGames++;
                if (won) stats.switchWins++;
            } else {
                stats.stayGames++;
                if (won) stats.stayWins++;
            }

            updateStats();

            if (won) {
                gameMessage.innerHTML = `üéâ <span style="color: #4ecdc4;">YOU WON THE CAR!</span> (You ${switched ? 'switched' : 'stayed'})`;
            } else {
                gameMessage.innerHTML = `üòî <span style="color: #e94560;">Sorry, it was a goat!</span> (You ${switched ? 'switched' : 'stayed'})`;
            }
        }

        function updateStats() {
            document.getElementById('games-played').textContent = stats.gamesPlayed;
            document.getElementById('switch-wins').textContent = stats.switchWins;
            document.getElementById('stay-wins').textContent = stats.stayWins;

            const switchRate = stats.switchGames > 0 ?
                ((stats.switchWins / stats.switchGames) * 100).toFixed(1) : 0;
            const stayRate = stats.stayGames > 0 ?
                ((stats.stayWins / stats.stayGames) * 100).toFixed(1) : 0;

            document.getElementById('switch-rate').textContent = switchRate + '%';
            document.getElementById('stay-rate').textContent = stayRate + '%';

            // Update visual bars
            document.getElementById('switch-bar').style.height =
                (stats.switchGames > 0 ? (stats.switchWins / stats.switchGames) * 100 : 66.6) + '%';
            document.getElementById('stay-bar').style.height =
                (stats.stayGames > 0 ? (stats.stayWins / stats.stayGames) * 100 : 33.3) + '%';

            document.getElementById('switch-theory').textContent =
                stats.switchGames > 0 ? switchRate + '%' : '66.7%';
            document.getElementById('stay-theory').textContent =
                stats.stayGames > 0 ? stayRate + '%' : '33.3%';
        }

        function simulateGames(n) {
            for (let i = 0; i < n; i++) {
                const car = Math.floor(Math.random() * 3);
                const choice = Math.floor(Math.random() * 3);

                // Monty opens a goat door
                const goatDoors = [0, 1, 2].filter(d => d !== choice && d !== car);
                const montyDoor = goatDoors[Math.floor(Math.random() * goatDoors.length)];

                // Switch strategy
                const switchChoice = [0, 1, 2].find(d => d !== choice && d !== montyDoor);
                const switchWin = switchChoice === car;

                // Stay strategy
                const stayWin = choice === car;

                stats.gamesPlayed++;
                stats.switchGames++;
                stats.stayGames++;
                if (switchWin) stats.switchWins++;
                if (stayWin) stats.stayWins++;
            }
            updateStats();
        }

        // Event listeners
        doors.forEach(door => {
            door.addEventListener('click', function() {
                if (gamePhase !== 'choose') return;
                if (this.classList.contains('disabled')) return;

                // Deselect others
                doors.forEach(d => d.classList.remove('selected'));

                // Select this door
                playerChoice = parseInt(this.dataset.door);
                this.classList.add('selected');

                gameMessage.textContent = `You chose Door ${playerChoice}. Let's see what Monty does...`;

                // Monty reveals after a short delay
                setTimeout(montyReveals, 1000);
            });
        });

        document.getElementById('stay-btn').addEventListener('click', () => endGame(false));
        document.getElementById('switch-btn').addEventListener('click', () => endGame(true));
        document.getElementById('reset-game').addEventListener('click', resetGame);

        document.getElementById('run-100').addEventListener('click', () => simulateGames(100));
        document.getElementById('run-1000').addEventListener('click', () => simulateGames(1000));
        document.getElementById('reset-stats').addEventListener('click', () => {
            stats = { gamesPlayed: 0, switchWins: 0, stayWins: 0, switchGames: 0, stayGames: 0 };
            updateStats();
        });

        // Initialize
        resetGame();
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
