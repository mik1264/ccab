<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Rashomon Effect - Surprising Paradoxes - CCAB</title>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --sage: #8A9A5B;
            --moss: #606C38;
            --earth: #DDA15E;
            --cream: #FEFAE0;
            --terracotta: #BC6C25;
            --dark-moss: #3d4423;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #FEFAE0 0%, #F4F1DE 50%, #EDE8D5 100%);
            min-height: 100vh;
            color: var(--dark-moss);
            line-height: 1.7;
        }
        .organic-shape {
            position: fixed;
            border-radius: 60% 40% 50% 50% / 50% 60% 40% 50%;
            opacity: 0.12;
            z-index: 0;
            animation: morph 30s ease-in-out infinite;
        }
        .shape-1 {
            width: 600px;
            height: 600px;
            background: linear-gradient(135deg, var(--sage), var(--moss));
            top: -200px;
            right: -150px;
        }
        .shape-2 {
            width: 500px;
            height: 500px;
            background: linear-gradient(135deg, var(--earth), var(--terracotta));
            bottom: -150px;
            left: -150px;
            animation-delay: -15s;
        }
        @keyframes morph {
            0%, 100% { border-radius: 60% 40% 50% 50% / 50% 60% 40% 50%; }
            25% { border-radius: 50% 60% 40% 50% / 40% 50% 60% 50%; }
            50% { border-radius: 40% 50% 60% 50% / 50% 40% 50% 60%; }
            75% { border-radius: 50% 40% 50% 60% / 60% 50% 40% 50%; }
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px 80px;
            position: relative;
            z-index: 1;
        }
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--moss);
            text-decoration: none;
            font-weight: 500;
            margin-bottom: 30px;
            padding: 10px 20px;
            background: rgba(255,255,255,0.6);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            transition: all 0.3s ease;
        }
        .back-link:hover {
            background: rgba(255,255,255,0.9);
            transform: translateX(-5px);
        }
        h1 {
            font-family: 'Lora', serif;
            font-size: 2.8rem;
            font-weight: 600;
            color: var(--moss);
            margin-bottom: 20px;
            line-height: 1.2;
        }
        .subtitle {
            font-size: 1.3rem;
            color: var(--terracotta);
            margin-bottom: 40px;
            font-weight: 500;
        }
        .badge {
            display: inline-block;
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            color: white;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 25px;
        }
        .card {
            background: rgba(255,255,255,0.7);
            backdrop-filter: blur(15px);
            border-radius: 24px;
            padding: 35px;
            margin-bottom: 35px;
            border: 1px solid rgba(138,154,91,0.2);
            box-shadow: 0 10px 40px rgba(0,0,0,0.08);
        }
        .card h2 {
            font-family: 'Lora', serif;
            font-size: 1.6rem;
            color: var(--moss);
            margin-bottom: 20px;
        }
        .card p {
            color: #555;
            margin-bottom: 18px;
        }
        .card p:last-child { margin-bottom: 0; }
        .highlight {
            background: linear-gradient(120deg, rgba(155,89,182,0.2) 0%, rgba(155,89,182,0.1) 100%);
            padding: 3px 8px;
            border-radius: 4px;
            font-weight: 600;
            color: #8e44ad;
        }

        /* Scene container */
        .scene-container {
            background: linear-gradient(180deg, #1a1a2e 0%, #16213e 100%);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 35px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.2);
        }
        .scene-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }
        .scene-title {
            color: #fff;
            font-family: 'Lora', serif;
            font-size: 1.3rem;
        }
        .controls {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }
        .btn {
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-family: 'Nunito', sans-serif;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(155,89,182,0.4);
        }
        .btn.active {
            box-shadow: 0 0 20px rgba(155,89,182,0.6);
        }
        #sceneCanvas {
            display: block;
            width: 100%;
            border-radius: 12px;
            background: #0a0a15;
        }

        /* Witness tabs */
        .witness-tabs {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 20px;
        }
        .witness-tab {
            background: rgba(255,255,255,0.08);
            border: 2px solid transparent;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .witness-tab:hover {
            background: rgba(255,255,255,0.15);
        }
        .witness-tab.active {
            border-color: #9b59b6;
            background: rgba(155,89,182,0.2);
        }
        .witness-icon {
            font-size: 2rem;
            margin-bottom: 8px;
        }
        .witness-name {
            color: #fff;
            font-weight: 600;
            font-size: 0.9rem;
        }
        .witness-role {
            color: rgba(255,255,255,0.6);
            font-size: 0.75rem;
            margin-top: 4px;
        }

        /* Testimony panel */
        .testimony-panel {
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
            padding: 25px;
            margin-top: 20px;
            min-height: 200px;
        }
        .testimony-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .testimony-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
        }
        .testimony-info h3 {
            color: #fff;
            font-size: 1.2rem;
            margin-bottom: 4px;
        }
        .testimony-info p {
            color: rgba(255,255,255,0.6);
            font-size: 0.85rem;
        }
        .testimony-text {
            color: rgba(255,255,255,0.9);
            font-style: italic;
            line-height: 1.8;
            font-size: 1.05rem;
        }
        .testimony-text::before { content: '"'; }
        .testimony-text::after { content: '"'; }

        /* Key claims comparison */
        .claims-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        .claim-item {
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            padding: 15px;
        }
        .claim-label {
            color: rgba(255,255,255,0.5);
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }
        .claim-value {
            color: #fff;
            font-weight: 600;
        }

        /* Statistics */
        .stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }
        .stat-card {
            background: rgba(155,89,182,0.1);
            border: 1px solid rgba(155,89,182,0.3);
            border-radius: 16px;
            padding: 25px;
            text-align: center;
        }
        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: #9b59b6;
            font-family: 'Lora', serif;
        }
        .stat-label {
            color: #666;
            font-size: 0.9rem;
            margin-top: 8px;
        }

        /* Quote */
        .quote {
            border-left: 4px solid #9b59b6;
            padding-left: 25px;
            margin: 25px 0;
            font-style: italic;
            color: #666;
        }
        .quote-author {
            font-style: normal;
            font-weight: 600;
            color: var(--moss);
            margin-top: 10px;
        }

        /* Memory test */
        .memory-test {
            background: linear-gradient(135deg, rgba(155,89,182,0.15) 0%, rgba(142,68,173,0.1) 100%);
            border: 2px solid #9b59b6;
            border-radius: 16px;
            padding: 25px;
            margin: 25px 0;
        }
        .memory-test h3 {
            color: #8e44ad;
            font-family: 'Lora', serif;
            margin-bottom: 15px;
        }
        .question {
            margin-bottom: 20px;
        }
        .question-text {
            color: #555;
            margin-bottom: 12px;
            font-weight: 600;
        }
        .options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }
        .option {
            background: rgba(255,255,255,0.6);
            border: 2px solid transparent;
            border-radius: 10px;
            padding: 12px 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 0.95rem;
        }
        .option:hover {
            background: rgba(255,255,255,0.9);
            border-color: #9b59b6;
        }
        .option.selected {
            background: #9b59b6;
            color: white;
            border-color: #9b59b6;
        }
        .option.correct {
            background: #27ae60;
            color: white;
            border-color: #27ae60;
        }
        .option.wrong {
            background: #e74c3c;
            color: white;
            border-color: #e74c3c;
        }
        .test-results {
            background: rgba(0,0,0,0.05);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            text-align: center;
            display: none;
        }
        .score-display {
            font-size: 2rem;
            font-weight: 700;
            color: #9b59b6;
        }

        /* Film strip */
        .film-info {
            display: flex;
            align-items: center;
            gap: 25px;
            background: rgba(0,0,0,0.03);
            border-radius: 16px;
            padding: 20px;
            margin-top: 20px;
        }
        .film-poster {
            width: 120px;
            height: 180px;
            background: linear-gradient(135deg, #2c3e50, #1a252f);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #fff;
            text-align: center;
            padding: 15px;
            font-family: 'Lora', serif;
        }
        .film-poster .year { font-size: 0.8rem; opacity: 0.7; }
        .film-poster .title { font-size: 1.5rem; font-weight: 600; margin: 10px 0; }
        .film-poster .director { font-size: 0.75rem; opacity: 0.7; }
        .film-details h4 {
            color: var(--moss);
            margin-bottom: 10px;
        }
        .film-details p {
            color: #555;
            font-size: 0.95rem;
        }

        /* Insight box */
        .insight-box {
            background: linear-gradient(135deg, rgba(138,154,91,0.15) 0%, rgba(96,108,56,0.1) 100%);
            border: 2px solid var(--sage);
            border-radius: 16px;
            padding: 25px;
            margin: 25px 0;
        }
        .insight-box h3 {
            color: var(--moss);
            font-family: 'Lora', serif;
            margin-bottom: 12px;
        }

        .footer {
            text-align: center;
            padding-top: 30px;
            color: #888;
            font-size: 0.85rem;
        }
        .footer a { color: var(--moss); }

        @media (max-width: 700px) {
            h1 { font-size: 2rem; }
            .card { padding: 25px; }
            .witness-tabs { grid-template-columns: repeat(2, 1fr); }
            .claims-grid { grid-template-columns: 1fr; }
            .options { grid-template-columns: 1fr; }
            .film-info { flex-direction: column; text-align: center; }
        }
    </style>
</head>
<body>
    <div class="organic-shape shape-1"></div>
    <div class="organic-shape shape-2"></div>

    <main class="container">
        <a href="index.html" class="back-link">← Back to Paradoxes</a>

        <span class="badge">Epistemology & Memory</span>
        <h1>The Rashomon Effect</h1>
        <p class="subtitle">Four witnesses, one event, four completely different truths. Who do you believe when everyone is telling their honest version?</p>

        <!-- Interactive Scene -->
        <div class="scene-container">
            <div class="scene-header">
                <h2 class="scene-title">The Incident at the Park</h2>
                <div class="controls">
                    <button class="btn" id="playBtn">Watch the Event</button>
                </div>
            </div>

            <canvas id="sceneCanvas" width="800" height="350"></canvas>

            <div class="witness-tabs">
                <div class="witness-tab" data-witness="0">
                    <div class="witness-icon">&#128100;</div>
                    <div class="witness-name">The Jogger</div>
                    <div class="witness-role">Passing by</div>
                </div>
                <div class="witness-tab" data-witness="1">
                    <div class="witness-icon">&#128116;</div>
                    <div class="witness-name">The Elder</div>
                    <div class="witness-role">On the bench</div>
                </div>
                <div class="witness-tab" data-witness="2">
                    <div class="witness-icon">&#128113;</div>
                    <div class="witness-name">The Mother</div>
                    <div class="witness-role">With child</div>
                </div>
                <div class="witness-tab" data-witness="3">
                    <div class="witness-icon">&#128110;</div>
                    <div class="witness-name">The Vendor</div>
                    <div class="witness-role">At the cart</div>
                </div>
            </div>

            <div class="testimony-panel" id="testimonyPanel">
                <p style="color: rgba(255,255,255,0.5); text-align: center; padding: 40px;">
                    Watch the event, then select a witness to hear their testimony...
                </p>
            </div>
        </div>

        <!-- Comparison panel -->
        <div class="card" id="comparisonCard" style="display: none;">
            <h2>Four Truths, One Event</h2>
            <p>All four witnesses are being <strong>completely honest</strong>. None are lying. Yet their accounts are irreconcilable:</p>

            <table style="width: 100%; margin-top: 20px; border-collapse: collapse; font-size: 0.9rem;">
                <thead>
                    <tr style="border-bottom: 2px solid var(--sage);">
                        <th style="text-align: left; padding: 12px; color: var(--moss);">Detail</th>
                        <th style="padding: 12px; color: #e74c3c;">Jogger</th>
                        <th style="padding: 12px; color: #3498db;">Elder</th>
                        <th style="padding: 12px; color: #27ae60;">Mother</th>
                        <th style="padding: 12px; color: #f39c12;">Vendor</th>
                    </tr>
                </thead>
                <tbody id="comparisonTable">
                </tbody>
            </table>
        </div>

        <!-- The Paradox -->
        <div class="card">
            <h2>What Is the Rashomon Effect?</h2>
            <p>The Rashomon Effect describes how different people can interpret the <span class="highlight">same event in completely different—and often contradictory—ways</span>, with each person genuinely believing their version is accurate.</p>
            <p>Unlike deliberate deception, this phenomenon arises from the subjective nature of human cognition. Our memories are not video recordings—they are <strong>reconstructed narratives</strong> shaped by our perspective, emotions, biases, and subsequent experiences.</p>
            <p>The effect challenges the very notion of a single "objective truth" and has profound implications for eyewitness testimony, journalism, historical accounts, and interpersonal conflicts.</p>
        </div>

        <!-- Origin -->
        <div class="card">
            <h2>Origin: Kurosawa's Masterpiece</h2>
            <div class="film-info">
                <div class="film-poster">
                    <span class="year">1950</span>
                    <span class="title">Rashomon</span>
                    <span class="director">Akira Kurosawa</span>
                </div>
                <div class="film-details">
                    <h4>The Film That Named the Phenomenon</h4>
                    <p>In Kurosawa's groundbreaking film, a samurai is murdered in a forest. Four witnesses—a bandit, the samurai's wife, the samurai's ghost (through a medium), and a woodcutter—each provide completely different accounts of what happened. Each version makes the narrator look better or serves their psychological needs. The audience never learns what "really" happened.</p>
                    <p style="margin-top: 10px;">The film won the Golden Lion at Venice and introduced Japanese cinema to Western audiences, but its lasting legacy is this psychological concept that now appears in fields from law to neuroscience.</p>
                </div>
            </div>
        </div>

        <!-- Statistics -->
        <div class="card">
            <h2>The Science of Unreliable Memory</h2>
            <p>The Rashomon Effect isn't just a literary device—it's backed by decades of memory research:</p>

            <div class="stat-grid">
                <div class="stat-card">
                    <div class="stat-number">75%</div>
                    <div class="stat-label">DNA exonerations involved faulty eyewitness testimony</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">1 in 3</div>
                    <div class="stat-label">eyewitnesses make erroneous identifications</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">34%</div>
                    <div class="stat-label">accuracy when witnesses discuss events together (vs 79% alone)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">0</div>
                    <div class="stat-label">correlation between confidence and accuracy</div>
                </div>
            </div>

            <div class="quote">
                "Memory distortion often happens unconsciously. Witnesses truly believe their version of events, no matter how inaccurate they may be."
                <div class="quote-author">— American Psychological Association</div>
            </div>
        </div>

        <!-- Memory Test -->
        <div class="card">
            <h2>Test Your Memory</h2>
            <p>You watched the park scene above. Without re-watching, answer these questions:</p>

            <div class="memory-test">
                <h3>How Much Did You Actually See?</h3>
                <div id="memoryQuestions"></div>
                <button class="btn" id="checkAnswersBtn" style="margin-top: 20px;">Check My Answers</button>
                <div class="test-results" id="testResults">
                    <div class="score-display" id="scoreDisplay"></div>
                    <p id="resultMessage" style="margin-top: 10px;"></p>
                </div>
            </div>
        </div>

        <!-- Why It Happens -->
        <div class="card">
            <h2>Why Memories Diverge</h2>

            <div class="insight-box">
                <h3>Perspective & Attention</h3>
                <p>Each witness literally saw different parts of the scene. The jogger was moving; the elder was seated; the mother was watching her child. We can only attend to a fraction of what's happening, and we fill gaps unconsciously.</p>
            </div>

            <div class="insight-box">
                <h3>Emotional State</h3>
                <p>Stress and strong emotions can both enhance and distort memory. The mother's fear for her child made her hyperfocused on the threatening figure but blind to context.</p>
            </div>

            <div class="insight-box">
                <h3>Prior Beliefs & Schemas</h3>
                <p>We interpret ambiguous information through our existing mental frameworks. The elder, who reads newspapers about crime, saw a mugger. The vendor, familiar with the park, saw regulars having a dispute.</p>
            </div>

            <div class="insight-box">
                <h3>Post-Event Information</h3>
                <p>Memories continue to be reconstructed after the event. Hearing others' versions, reading news reports, or being asked leading questions can permanently alter what we "remember."</p>
            </div>
        </div>

        <!-- Applications -->
        <div class="card">
            <h2>Real-World Implications</h2>

            <p><strong>Legal System:</strong> Eyewitness testimony is persuasive but unreliable. Courts increasingly require corroboration and expert testimony about memory limitations.</p>

            <p><strong>Journalism:</strong> Responsible reporting acknowledges multiple perspectives rather than claiming a single "truth." The Rashomon Effect is why good journalists interview many sources.</p>

            <p><strong>Workplace Conflicts:</strong> When colleagues disagree about what happened in a meeting, both may be honestly reporting their experience. Understanding this can reduce accusations of bad faith.</p>

            <p><strong>Historical Accounts:</strong> History is written by survivors, each with their perspective. Oral histories collected decades later show substantial Rashomon effects.</p>

            <p><strong>AI Research:</strong> Even AI systems exhibit Rashomon-like effects when different models give different but internally consistent explanations for the same data.</p>
        </div>

        <div class="footer">
            <p>Sources: <a href="https://en.wikipedia.org/wiki/Rashomon_effect" target="_blank">Wikipedia</a>,
            <a href="https://nobaproject.com/modules/eyewitness-testimony-and-memory-biases" target="_blank">Noba Project</a>,
            <a href="https://cjc.utppublishing.com/doi/10.22230/cjc.2016v41n2a3068" target="_blank">Canadian Journal of Communication</a></p>
            <p style="margin-top: 10px;">Part of <a href="../index.html">CCAB</a> &middot; Surprising Paradoxes Collection</p>
        </div>
    </main>

    <script>
        const canvas = document.getElementById('sceneCanvas');
        const ctx = canvas.getContext('2d');

        // High DPI
        const dpr = window.devicePixelRatio || 1;
        const rect = canvas.getBoundingClientRect();
        canvas.width = rect.width * dpr;
        canvas.height = rect.height * dpr;
        ctx.scale(dpr, dpr);
        canvas.style.width = rect.width + 'px';
        canvas.style.height = rect.height + 'px';

        const W = rect.width;
        const H = rect.height;

        // Scene state
        let animationTime = 0;
        let isPlaying = false;
        let hasWatched = false;
        let selectedWitness = -1;

        // Characters
        const characters = {
            person1: { x: 150, y: H - 100, color: '#3498db', label: 'Blue' },
            person2: { x: 600, y: H - 100, color: '#e74c3c', label: 'Red' },
            jogger: { x: -50, y: H - 80, color: '#f39c12' },
            elder: { x: 100, y: H - 120, color: '#95a5a6' },
            mother: { x: 500, y: H - 90, color: '#9b59b6' },
            child: { x: 520, y: H - 70, color: '#e91e63' },
            vendor: { x: 700, y: H - 100, color: '#27ae60' }
        };

        // What "actually" happened (for the memory test)
        const actualEvents = {
            wallet: 'dropped', // person1 dropped wallet
            firstToMove: 'person2', // person2 moved first toward wallet
            shoutedFirst: 'person1', // person1 shouted
            physicalContact: 'push', // there was a push
            endResult: 'person1 left', // person1 walked away
            hatColor: 'red', // person2 had red hat
            benchLocation: 'left', // bench was on left
            cartColor: 'green' // vendor cart was green
        };

        // Witness testimonies
        const testimonies = [
            {
                name: 'The Jogger',
                role: 'Was running past when the incident occurred',
                avatar: '&#128100;',
                color: '#e74c3c',
                text: "I was jogging through the park when I heard shouting. I looked over and saw the guy in blue—clearly aggressive—confronting someone. The blue guy was waving his arms, really threatening. The other person backed away, looking scared. Then the blue guy shoved him hard! I didn't stop because, honestly, I didn't want to get involved. Definitely looked like the guy in blue started it.",
                claims: {
                    aggressor: 'Person in blue',
                    action: 'Threatening gestures, then shoved',
                    mood: 'Blue was aggressive',
                    outcome: 'Red person was victim'
                }
            },
            {
                name: 'The Elder',
                role: 'Was sitting on the park bench reading',
                avatar: '&#128116;',
                color: '#3498db',
                text: "I saw the whole thing from my bench. The man in red was acting suspiciously—kept looking around nervously. When the blue fellow walked by, the red one grabbed at him! Looked like an attempted mugging to me. The blue gentleman defended himself, pushed the attacker away. Good for him. These parks aren't safe anymore. The red one ran off when he realized his victim would fight back.",
                claims: {
                    aggressor: 'Person in red',
                    action: 'Grabbed at blue person, attempted mugging',
                    mood: 'Red was nervous/suspicious',
                    outcome: 'Blue defended himself'
                }
            },
            {
                name: 'The Mother',
                role: 'Was watching her child play nearby',
                avatar: '&#128113;',
                color: '#27ae60',
                text: "I was keeping an eye on my daughter when those two men started arguing. I immediately grabbed her and moved away—you never know these days. It escalated so fast! Both were shouting, pointing fingers. I think one pushed the other, I'm not sure which, I was focused on getting my child to safety. It was terrifying. They both looked equally angry to me.",
                claims: {
                    aggressor: 'Both equally aggressive',
                    action: 'Mutual argument, both shouting',
                    mood: 'Both angry',
                    outcome: 'Unclear who started it'
                }
            },
            {
                name: 'The Vendor',
                role: 'Was at his hot dog cart watching',
                avatar: '&#128110;',
                color: '#f39c12',
                text: "Oh, those two? They're regulars, actually. The blue guy dropped his wallet, and red picked it up. Blue thought red was stealing it, started accusing him. Red got offended—he was just trying to help! It was all a misunderstanding. They pushed each other once, then blue grabbed his wallet and stormed off. Happens more than you'd think. People jump to conclusions.",
                claims: {
                    aggressor: 'Neither—misunderstanding',
                    action: 'Dropped wallet, false accusation',
                    mood: 'Confused, then offended',
                    outcome: 'Resolved, both left'
                }
            }
        ];

        // Memory test questions
        const memoryQuestions = [
            {
                question: "What happened to start the incident?",
                options: ["Someone dropped something", "Someone bumped into another", "An argument started randomly", "Someone asked for directions"],
                correct: 0
            },
            {
                question: "Who moved first toward the other person?",
                options: ["The person in blue", "The person in red", "They both moved at once", "Neither moved"],
                correct: 1
            },
            {
                question: "Was there physical contact?",
                options: ["Yes, a push", "Yes, a punch", "No physical contact", "Just pointing/gesturing"],
                correct: 0
            },
            {
                question: "Where was the elderly person sitting?",
                options: ["Left side of scene", "Right side of scene", "Center of scene", "Standing, not sitting"],
                correct: 0
            },
            {
                question: "What color was the vendor's cart?",
                options: ["Green", "Red", "Blue", "Yellow"],
                correct: 0
            }
        ];

        // Draw scene
        function drawScene(t) {
            // Background - park
            ctx.fillStyle = '#1a2a3a';
            ctx.fillRect(0, 0, W, H);

            // Sky gradient
            const skyGrad = ctx.createLinearGradient(0, 0, 0, H * 0.6);
            skyGrad.addColorStop(0, '#2c3e50');
            skyGrad.addColorStop(1, '#34495e');
            ctx.fillStyle = skyGrad;
            ctx.fillRect(0, 0, W, H * 0.6);

            // Ground
            ctx.fillStyle = '#27ae60';
            ctx.fillRect(0, H * 0.6, W, H * 0.4);

            // Path
            ctx.fillStyle = '#7f8c8d';
            ctx.fillRect(0, H - 50, W, 30);

            // Trees
            drawTree(50, H * 0.5);
            drawTree(W - 80, H * 0.5);
            drawTree(W / 2 - 150, H * 0.45);
            drawTree(W / 2 + 180, H * 0.48);

            // Bench (left side)
            ctx.fillStyle = '#8b4513';
            ctx.fillRect(70, H - 130, 80, 10);
            ctx.fillRect(75, H - 130, 10, 30);
            ctx.fillRect(135, H - 130, 10, 30);
            ctx.fillStyle = '#654321';
            ctx.fillRect(70, H - 145, 80, 15);

            // Vendor cart (right side, green)
            ctx.fillStyle = '#27ae60';
            ctx.fillRect(680, H - 130, 60, 50);
            ctx.fillStyle = '#1e8449';
            ctx.fillRect(680, H - 145, 60, 15);
            ctx.fillStyle = '#333';
            ctx.beginPath();
            ctx.arc(690, H - 80, 8, 0, Math.PI * 2);
            ctx.arc(730, H - 80, 8, 0, Math.PI * 2);
            ctx.fill();

            // Animate based on time
            const phase = t / 3000; // 3 second animation

            // Person positions based on animation
            let p1x = 150 + Math.max(0, (phase - 0.1)) * 200;
            let p2x = 600 - Math.max(0, (phase - 0.2)) * 150;

            if (phase > 0.5) {
                // Confrontation position
                p1x = 350;
                p2x = 420;
            }

            if (phase > 0.7) {
                // Push animation
                p2x = 420 + (phase - 0.7) * 100;
            }

            if (phase > 0.85) {
                // Person 1 leaves
                p1x = 350 - (phase - 0.85) * 500;
            }

            // Draw person 1 (blue)
            if (p1x > -50) {
                drawPerson(p1x, H - 100, '#3498db', false);
            }

            // Draw person 2 (red with hat)
            drawPerson(p2x, H - 100, '#e74c3c', true);

            // Draw jogger
            const jogX = -50 + (phase * 900);
            if (jogX < W + 50) {
                drawJogger(jogX, H - 80);
            }

            // Draw elder on bench
            drawSeatedPerson(110, H - 150, '#95a5a6');

            // Draw mother and child
            drawPerson(500, H - 90, '#9b59b6', false, true);
            drawChild(520, H - 70, '#e91e63');

            // Draw vendor
            drawPerson(700, H - 100, '#f39c12', false);

            // Wallet on ground (dropped at phase 0.1)
            if (phase > 0.1 && phase < 0.7) {
                ctx.fillStyle = '#8b4513';
                ctx.fillRect(280, H - 55, 25, 15);
            }

            // Exclamation marks during confrontation
            if (phase > 0.4 && phase < 0.8) {
                ctx.fillStyle = '#fff';
                ctx.font = 'bold 20px Arial';
                ctx.fillText('!', p1x + 5, H - 150);
                ctx.fillText('!', p2x + 5, H - 150);
            }

            // Labels
            ctx.fillStyle = 'rgba(255,255,255,0.6)';
            ctx.font = '10px Nunito';
            ctx.textAlign = 'center';
            ctx.fillText('Jogger', jogX, H - 95);
            ctx.fillText('Elder', 110, H - 165);
            ctx.fillText('Mother', 510, H - 105);
            ctx.fillText('Vendor', 700, H - 115);
        }

        function drawTree(x, y) {
            ctx.fillStyle = '#5d4037';
            ctx.fillRect(x - 8, y, 16, 60);
            ctx.fillStyle = '#2e7d32';
            ctx.beginPath();
            ctx.arc(x, y - 20, 40, 0, Math.PI * 2);
            ctx.fill();
        }

        function drawPerson(x, y, color, hasHat = false, isSmall = false) {
            const scale = isSmall ? 0.8 : 1;

            // Body
            ctx.fillStyle = color;
            ctx.fillRect(x - 10 * scale, y - 40 * scale, 20 * scale, 35 * scale);

            // Head
            ctx.fillStyle = '#ffd699';
            ctx.beginPath();
            ctx.arc(x, y - 50 * scale, 12 * scale, 0, Math.PI * 2);
            ctx.fill();

            // Hat (for red person)
            if (hasHat) {
                ctx.fillStyle = '#c0392b';
                ctx.beginPath();
                ctx.arc(x, y - 58 * scale, 10 * scale, Math.PI, 0);
                ctx.fill();
                ctx.fillRect(x - 14 * scale, y - 60 * scale, 28 * scale, 5 * scale);
            }

            // Legs
            ctx.fillStyle = '#2c3e50';
            ctx.fillRect(x - 8 * scale, y - 5 * scale, 6 * scale, 20 * scale);
            ctx.fillRect(x + 2 * scale, y - 5 * scale, 6 * scale, 20 * scale);
        }

        function drawChild(x, y, color) {
            ctx.fillStyle = color;
            ctx.fillRect(x - 6, y - 25, 12, 20);
            ctx.fillStyle = '#ffd699';
            ctx.beginPath();
            ctx.arc(x, y - 32, 8, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillStyle = '#2c3e50';
            ctx.fillRect(x - 5, y - 5, 4, 12);
            ctx.fillRect(x + 1, y - 5, 4, 12);
        }

        function drawSeatedPerson(x, y, color) {
            ctx.fillStyle = color;
            ctx.fillRect(x - 10, y, 20, 25);
            ctx.fillStyle = '#e0e0e0';
            ctx.beginPath();
            ctx.arc(x, y - 10, 10, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillStyle = '#2c3e50';
            ctx.fillRect(x - 10, y + 20, 25, 10);
        }

        function drawJogger(x, y) {
            // Running pose
            ctx.fillStyle = '#f39c12';
            ctx.fillRect(x - 8, y - 35, 16, 30);
            ctx.fillStyle = '#ffd699';
            ctx.beginPath();
            ctx.arc(x, y - 42, 9, 0, Math.PI * 2);
            ctx.fill();
            // Legs in running position
            ctx.fillStyle = '#2c3e50';
            ctx.save();
            ctx.translate(x, y - 5);
            ctx.rotate(Math.sin(Date.now() / 100) * 0.3);
            ctx.fillRect(-4, 0, 5, 18);
            ctx.restore();
            ctx.save();
            ctx.translate(x, y - 5);
            ctx.rotate(-Math.sin(Date.now() / 100) * 0.3);
            ctx.fillRect(-1, 0, 5, 18);
            ctx.restore();
        }

        // Animation loop
        let animFrame;
        function animate() {
            if (isPlaying) {
                animationTime += 16;
                if (animationTime > 3000) {
                    animationTime = 3000;
                    isPlaying = false;
                    hasWatched = true;
                    document.getElementById('playBtn').textContent = 'Replay Event';
                    document.getElementById('comparisonCard').style.display = 'block';
                    renderComparison();
                }
            }

            drawScene(animationTime);
            animFrame = requestAnimationFrame(animate);
        }

        // Event handlers
        document.getElementById('playBtn').addEventListener('click', function() {
            if (!isPlaying) {
                animationTime = 0;
                isPlaying = true;
                this.textContent = 'Watching...';
            }
        });

        // Witness tabs
        document.querySelectorAll('.witness-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                const witnessIndex = parseInt(this.dataset.witness);
                selectedWitness = witnessIndex;

                // Update active state
                document.querySelectorAll('.witness-tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');

                // Show testimony
                const testimony = testimonies[witnessIndex];
                const panel = document.getElementById('testimonyPanel');

                panel.innerHTML = `
                    <div class="testimony-header">
                        <div class="testimony-avatar" style="background: ${testimony.color};">${testimony.avatar}</div>
                        <div class="testimony-info">
                            <h3>${testimony.name}</h3>
                            <p>${testimony.role}</p>
                        </div>
                    </div>
                    <div class="testimony-text">${testimony.text}</div>
                    <div class="claims-grid">
                        <div class="claim-item">
                            <div class="claim-label">Who Started It</div>
                            <div class="claim-value">${testimony.claims.aggressor}</div>
                        </div>
                        <div class="claim-item">
                            <div class="claim-label">What Happened</div>
                            <div class="claim-value">${testimony.claims.action}</div>
                        </div>
                        <div class="claim-item">
                            <div class="claim-label">Their Read</div>
                            <div class="claim-value">${testimony.claims.mood}</div>
                        </div>
                        <div class="claim-item">
                            <div class="claim-label">Conclusion</div>
                            <div class="claim-value">${testimony.claims.outcome}</div>
                        </div>
                    </div>
                `;
            });
        });

        // Comparison table
        function renderComparison() {
            const details = [
                { label: 'Aggressor', values: ['Blue', 'Red', 'Both', 'Neither'] },
                { label: 'First Action', values: ['Blue threatened', 'Red grabbed', 'Both argued', 'Wallet dropped'] },
                { label: 'Victim', values: ['Red', 'Blue', 'Child at risk', 'Misunderstanding'] },
                { label: 'Conclusion', values: ['Blue is guilty', 'Red is guilty', 'Both guilty', 'Accident'] }
            ];

            const tbody = document.getElementById('comparisonTable');
            tbody.innerHTML = details.map(d => `
                <tr style="border-bottom: 1px solid rgba(138,154,91,0.2);">
                    <td style="padding: 12px; font-weight: 600;">${d.label}</td>
                    <td style="padding: 12px; text-align: center; color: #e74c3c;">${d.values[0]}</td>
                    <td style="padding: 12px; text-align: center; color: #3498db;">${d.values[1]}</td>
                    <td style="padding: 12px; text-align: center; color: #27ae60;">${d.values[2]}</td>
                    <td style="padding: 12px; text-align: center; color: #f39c12;">${d.values[3]}</td>
                </tr>
            `).join('');
        }

        // Memory test
        function renderMemoryTest() {
            const container = document.getElementById('memoryQuestions');
            container.innerHTML = memoryQuestions.map((q, i) => `
                <div class="question" data-question="${i}">
                    <div class="question-text">${i + 1}. ${q.question}</div>
                    <div class="options">
                        ${q.options.map((opt, j) => `
                            <div class="option" data-option="${j}">${opt}</div>
                        `).join('')}
                    </div>
                </div>
            `).join('');

            // Add click handlers
            container.querySelectorAll('.option').forEach(opt => {
                opt.addEventListener('click', function() {
                    const question = this.closest('.question');
                    question.querySelectorAll('.option').forEach(o => o.classList.remove('selected'));
                    this.classList.add('selected');
                });
            });
        }

        document.getElementById('checkAnswersBtn').addEventListener('click', function() {
            let correct = 0;
            const questions = document.querySelectorAll('.question');

            questions.forEach((q, i) => {
                const selected = q.querySelector('.option.selected');
                const correctIndex = memoryQuestions[i].correct;

                q.querySelectorAll('.option').forEach((opt, j) => {
                    if (j === correctIndex) {
                        opt.classList.add('correct');
                    } else if (opt.classList.contains('selected')) {
                        opt.classList.add('wrong');
                    }
                });

                if (selected && parseInt(selected.dataset.option) === correctIndex) {
                    correct++;
                }
            });

            const results = document.getElementById('testResults');
            const score = document.getElementById('scoreDisplay');
            const message = document.getElementById('resultMessage');

            score.textContent = `${correct}/${memoryQuestions.length}`;

            if (correct === memoryQuestions.length) {
                message.textContent = "Perfect! You have excellent observational memory—or you watched very carefully.";
            } else if (correct >= 3) {
                message.textContent = "Good recall! But notice how even small details can be misremembered.";
            } else {
                message.textContent = "This is typical! Most people misremember several details, even immediately after watching. This is why eyewitness testimony is unreliable.";
            }

            results.style.display = 'block';
            this.style.display = 'none';
        });

        // Initialize
        renderMemoryTest();
        animate();
    </script>
</body>
</html>
