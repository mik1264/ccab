<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Survivorship Bias - Abraham Wald's Brilliant Insight | Surprising Paradoxes</title>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #e8e8e8;
            min-height: 100vh;
            line-height: 1.7;
        }

        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            color: rgba(255,255,255,0.7);
            text-decoration: none;
            font-size: 0.95rem;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            background: rgba(255,255,255,0.1);
            border-radius: 25px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .back-link:hover {
            background: rgba(255,255,255,0.2);
            color: white;
        }

        header {
            text-align: center;
            padding: 80px 20px 40px;
        }

        h1 {
            font-family: 'Lora', serif;
            font-size: 2.8rem;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #f39c12, #e74c3c);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            font-size: 1.2rem;
            color: rgba(255,255,255,0.7);
            max-width: 700px;
            margin: 0 auto;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 20px 60px;
        }

        .section {
            background: rgba(255,255,255,0.05);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
        }

        h2 {
            font-family: 'Lora', serif;
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #f39c12;
        }

        h3 {
            font-family: 'Lora', serif;
            font-size: 1.3rem;
            margin: 25px 0 15px;
            color: #3498db;
        }

        p {
            margin-bottom: 15px;
            color: rgba(255,255,255,0.85);
        }

        /* Plane Visualization */
        .plane-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin: 30px auto;
        }

        #planeCanvas {
            width: 100%;
            border-radius: 15px;
            cursor: crosshair;
        }

        .plane-instructions {
            text-align: center;
            padding: 15px;
            background: rgba(231,76,60,0.2);
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid rgba(231,76,60,0.3);
        }

        .plane-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(243,156,18,0.4);
        }

        .btn-secondary {
            background: rgba(255,255,255,0.1);
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
        }

        .btn-secondary:hover {
            background: rgba(255,255,255,0.2);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(39,174,96,0.4);
        }

        /* Results Panel */
        .results-panel {
            background: rgba(39,174,96,0.2);
            border-radius: 15px;
            padding: 25px;
            margin-top: 25px;
            border: 1px solid rgba(39,174,96,0.3);
            display: none;
        }

        .results-panel.wrong {
            background: rgba(231,76,60,0.2);
            border-color: rgba(231,76,60,0.3);
        }

        .results-panel.revealed {
            display: block;
        }

        .results-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Armor placement indicator */
        .armor-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .armor-stat {
            text-align: center;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
        }

        .armor-stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #f39c12;
        }

        .armor-stat-label {
            font-size: 0.85rem;
            color: rgba(255,255,255,0.6);
            margin-top: 5px;
        }

        /* Startup Graveyard */
        .startup-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 8px;
            margin: 30px 0;
        }

        .startup-icon {
            width: 100%;
            aspect-ratio: 1;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .startup-icon.alive {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
        }

        .startup-icon.dead {
            background: rgba(231,76,60,0.3);
            opacity: 0.3;
        }

        .startup-icon.dead.revealed {
            opacity: 1;
            background: rgba(231,76,60,0.6);
        }

        .startup-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }

        .startup-stats {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 25px;
            padding: 20px;
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
        }

        .startup-stat {
            text-align: center;
        }

        .startup-stat-value {
            font-size: 2rem;
            font-weight: 700;
        }

        .startup-stat-value.green { color: #2ecc71; }
        .startup-stat-value.red { color: #e74c3c; }
        .startup-stat-value.orange { color: #f39c12; }

        /* Fund Returns Chart */
        #fundChart {
            width: 100%;
            height: 300px;
            margin: 30px 0;
        }

        .fund-legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 15px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        /* Quote Box */
        .quote-box {
            background: linear-gradient(135deg, rgba(52,152,219,0.2), rgba(155,89,182,0.2));
            border-left: 4px solid #3498db;
            padding: 25px 30px;
            margin: 30px 0;
            border-radius: 0 15px 15px 0;
            font-style: italic;
        }

        .quote-author {
            margin-top: 15px;
            font-style: normal;
            font-weight: 600;
            color: #3498db;
        }

        /* History Section */
        .history-image {
            float: right;
            margin: 0 0 20px 30px;
            max-width: 200px;
            text-align: center;
        }

        .history-image img {
            width: 100%;
            border-radius: 10px;
            border: 3px solid rgba(255,255,255,0.2);
        }

        .history-image .caption {
            font-size: 0.85rem;
            color: rgba(255,255,255,0.6);
            margin-top: 10px;
        }

        /* Impact List */
        .impact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .impact-card {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .impact-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .impact-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #f39c12;
        }

        .impact-desc {
            font-size: 0.9rem;
            color: rgba(255,255,255,0.7);
        }

        @media (max-width: 768px) {
            h1 { font-size: 2rem; }
            .section { padding: 25px; }
            .startup-grid { grid-template-columns: repeat(5, 1fr); }
            .history-image {
                float: none;
                margin: 0 auto 20px;
            }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">
        <span>‚Üê</span>
        <span>Back to Paradoxes</span>
    </a>

    <header>
        <h1>Survivorship Bias</h1>
        <p class="subtitle">The bullets that killed planes didn't leave holes on returning aircraft. Abraham Wald saw what others missed.</p>
    </header>

    <div class="container">
        <!-- Interactive Plane Section -->
        <div class="section">
            <h2>üõ©Ô∏è The WWII Armor Problem</h2>
            <p>It's 1943. Allied bombers are being shot down over Germany at alarming rates. The Navy needs to add armor‚Äîbut armor is heavy. Where should it go?</p>

            <div class="plane-instructions">
                <strong>YOUR MISSION:</strong> Click on the plane to add armor where you think it's needed most. Look at where the returning planes have been hit (red dots) and protect those areas!
            </div>

            <div class="plane-container">
                <canvas id="planeCanvas" width="600" height="400"></canvas>
            </div>

            <div class="armor-stats">
                <div class="armor-stat">
                    <div class="armor-stat-value" id="fuselageArmor">0</div>
                    <div class="armor-stat-label">Fuselage Armor</div>
                </div>
                <div class="armor-stat">
                    <div class="armor-stat-value" id="wingArmor">0</div>
                    <div class="armor-stat-label">Wing Armor</div>
                </div>
                <div class="armor-stat">
                    <div class="armor-stat-value" id="engineArmor">0</div>
                    <div class="armor-stat-label">Engine Armor</div>
                </div>
                <div class="armor-stat">
                    <div class="armor-stat-value" id="cockpitArmor">0</div>
                    <div class="armor-stat-label">Cockpit Armor</div>
                </div>
            </div>

            <div class="plane-controls">
                <button class="btn btn-primary" onclick="revealInsight()">Reveal Wald's Insight</button>
                <button class="btn btn-secondary" onclick="resetPlane()">Reset</button>
            </div>

            <div class="results-panel" id="resultsPanel">
                <div class="results-title" id="resultsTitle">
                    <span id="resultsIcon">üí°</span>
                    <span id="resultsTitleText">Wald's Counterintuitive Insight</span>
                </div>
                <p id="resultsText"></p>
            </div>
        </div>

        <!-- The Story -->
        <div class="section">
            <h2>üìú The Brilliant Mathematician</h2>

            <p>In 1943, the <strong>Statistical Research Group (SRG)</strong>‚Äîa classified program at Columbia University‚Äîassembled America's brightest statisticians to help win the war. Among them was <strong>Abraham Wald</strong>, a Hungarian-Jewish mathematician who had fled Nazi persecution.</p>

            <p>The military presented a problem: returning bombers showed damage concentrated on the <strong>fuselage</strong> and <strong>wings</strong>. The engines? Almost untouched. The obvious solution: reinforce the fuselage and wings where the damage was.</p>

            <div class="quote-box">
                "You're looking at the wrong data. These planes came back. You need to armor the places where the returning planes are NOT hit."
                <div class="quote-author">‚Äî Abraham Wald's insight</div>
            </div>

            <h3>The Missing Data</h3>
            <p>Wald recognized what everyone else missed: <strong>the data was only from survivors</strong>. Planes hit in the engines, fuel systems, and cockpit didn't return‚Äîthey were lying at the bottom of the English Channel or in German fields.</p>

            <p>The "clean" areas on returning planes weren't safe‚Äîthey were <strong>fatal</strong>. A plane can fly home with holes in its fuselage, but a single bullet in the engine means it never returns.</p>

            <p>The military listened. They armored the engines, fuel systems, and cockpits. <strong>Bomber survival rates increased dramatically</strong>, and Wald's insight continued influencing aircraft design through the Vietnam War.</p>
        </div>

        <!-- Startup Visualization -->
        <div class="section">
            <h2>üöÄ The Startup Graveyard</h2>
            <p>We celebrate Zuckerberg, Musk, and Bezos. We study their habits, read their biographies, and copy their strategies. But for every unicorn, there are <strong>thousands of identical failures</strong> we never hear about.</p>

            <p>Below are 100 startups. Only <strong>10 survived</strong>. When we only see the survivors, we develop dangerously wrong ideas about what leads to success.</p>

            <div class="startup-grid" id="startupGrid"></div>

            <div class="startup-controls">
                <button class="btn btn-primary" onclick="revealGraveyard()">Reveal the Graveyard</button>
                <button class="btn btn-secondary" onclick="resetStartups()">Reset</button>
            </div>

            <div class="startup-stats">
                <div class="startup-stat">
                    <div class="startup-stat-value green" id="survivorCount">10</div>
                    <div class="startup-stat-label">Survivors (visible)</div>
                </div>
                <div class="startup-stat">
                    <div class="startup-stat-value red" id="failedCount">??</div>
                    <div class="startup-stat-label">Failed (hidden)</div>
                </div>
                <div class="startup-stat">
                    <div class="startup-stat-value orange" id="failRate">??%</div>
                    <div class="startup-stat-label">Actual Fail Rate</div>
                </div>
            </div>
        </div>

        <!-- Mutual Fund Chart -->
        <div class="section">
            <h2>üìä The Mutual Fund Illusion</h2>
            <p>Mutual fund advertisements boast impressive returns. But they only show <strong>funds that still exist</strong>. Failed funds are quietly dissolved and vanish from the records.</p>

            <canvas id="fundChart"></canvas>

            <div class="fund-legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: #2ecc71;"></div>
                    <span>Survivors Only: 12% avg</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #e74c3c;"></div>
                    <span>Including Failed: 6% avg</span>
                </div>
            </div>

            <p style="margin-top: 20px;">Research by Morningstar found that including defunct funds <strong>reduces 10-year returns by approximately 1% annually</strong>. Over decades, this compounds into massive wealth differences. That "market-beating" fund manager? Their competitors who failed worse are invisible.</p>
        </div>

        <!-- Modern Examples -->
        <div class="section">
            <h2>üîç Survivorship Bias Is Everywhere</h2>

            <div class="impact-grid">
                <div class="impact-card">
                    <div class="impact-icon">üéµ</div>
                    <div class="impact-title">Music Was Better Before</div>
                    <div class="impact-desc">We only remember hits from the 70s. The thousands of terrible songs didn't survive. Today's bad music will be forgotten too.</div>
                </div>
                <div class="impact-card">
                    <div class="impact-icon">üèõÔ∏è</div>
                    <div class="impact-title">Ancient Architecture</div>
                    <div class="impact-desc">"They don't build 'em like they used to!" We only see buildings that lasted 2000 years‚Äînot the millions that crumbled.</div>
                </div>
                <div class="impact-card">
                    <div class="impact-icon">üéì</div>
                    <div class="impact-title">College Dropouts</div>
                    <div class="impact-desc">Gates, Zuckerberg, and Jobs dropped out and became billionaires. Millions of dropouts working minimum wage don't get TED talks.</div>
                </div>
                <div class="impact-card">
                    <div class="impact-icon">üê±</div>
                    <div class="impact-title">High-Rise Syndrome</div>
                    <div class="impact-desc">Cats falling from higher floors have lower injury rates‚Äîbecause we only count cats that survived to reach the vet.</div>
                </div>
                <div class="impact-card">
                    <div class="impact-icon">üìö</div>
                    <div class="impact-title">Self-Help Books</div>
                    <div class="impact-desc">Bestselling authors share "secrets" to success. The thousands who followed identical advice and failed don't write books.</div>
                </div>
                <div class="impact-card">
                    <div class="impact-icon">üè•</div>
                    <div class="impact-title">Medical Studies</div>
                    <div class="impact-desc">Early trial dropouts often had bad reactions. If only survivors complete studies, treatments look safer than they are.</div>
                </div>
            </div>
        </div>

        <!-- How to Fight It -->
        <div class="section">
            <h2>üõ°Ô∏è Armor Against the Bias</h2>

            <h3>1. Ask "Where Are the Missing?"</h3>
            <p>For every success story, ask: "How many tried the same thing and failed?" If you can't find failures, your data is incomplete.</p>

            <h3>2. Seek Disconfirming Evidence</h3>
            <p>Don't just study successful people or companies. Study failures intentionally. What did they do wrong? What did they do <em>the same</em> as successes?</p>

            <h3>3. Demand Base Rates</h3>
            <p>Before copying a strategy, ask: "What percentage of people using this strategy succeed?" A 10% success rate means 90% failure rate.</p>

            <h3>4. Be Suspicious of "Secrets"</h3>
            <p>If success had a simple formula, everyone would follow it. The very existence of a "secret" suggests survivorship bias is hiding the failures.</p>

            <div class="quote-box">
                "The dead don't write histories. The failed don't give TED talks. The bankrupt don't write business books. What you see is systematically different from what exists."
                <div class="quote-author">‚Äî The Core Lesson</div>
            </div>
        </div>

        <!-- Abraham Wald's Legacy -->
        <div class="section">
            <h2>üèÜ Abraham Wald's Legacy</h2>
            <p>Wald's insight saved countless lives during WWII, but his impact extends far beyond. His work on <strong>sequential analysis</strong> revolutionized quality control in manufacturing. His statistical methods influenced everything from clinical trials to economic policy.</p>

            <p>Tragically, Wald died in 1950 when his plane crashed during a trip to India‚Äîan ironic end for the man who taught us how planes should be armored. He was 48 years old.</p>

            <p>His lesson endures: <strong>the data you can see is shaped by what's missing</strong>. The holes in returning bombers told a story‚Äîbut it was the planes that never returned that held the truth.</p>

            <p>Next time you see a successful person, a thriving company, or an impressive statistic, remember Wald's question: <em>What's not here, and why?</em></p>
        </div>
    </div>

    <script>
        // === WWII PLANE VISUALIZATION ===
        const canvas = document.getElementById('planeCanvas');
        const ctx = canvas.getContext('2d');

        // High DPI support
        const dpr = window.devicePixelRatio || 1;
        const rect = canvas.getBoundingClientRect();
        canvas.width = rect.width * dpr;
        canvas.height = rect.height * dpr;
        ctx.scale(dpr, dpr);
        canvas.style.width = rect.width + 'px';
        canvas.style.height = rect.height + 'px';

        const W = rect.width;
        const H = rect.height;

        // Plane regions (approximate hitboxes)
        const regions = {
            fuselage: { x: W*0.3, y: H*0.35, w: W*0.4, h: H*0.3 },
            leftWing: { x: W*0.15, y: H*0.4, w: W*0.2, h: H*0.2 },
            rightWing: { x: W*0.65, y: H*0.4, w: W*0.2, h: H*0.2 },
            leftEngine: { x: W*0.2, y: H*0.42, w: W*0.1, h: H*0.15 },
            rightEngine: { x: W*0.7, y: H*0.42, w: W*0.1, h: H*0.15 },
            cockpit: { x: W*0.62, y: H*0.4, w: W*0.1, h: H*0.12 },
            tail: { x: W*0.1, y: H*0.35, w: W*0.12, h: H*0.25 }
        };

        // Bullet holes (on fuselage and wings - areas that survived)
        const bulletHoles = [];
        const numHoles = 25;

        // Generate bullet holes on "safe" areas
        function generateBulletHoles() {
            bulletHoles.length = 0;
            // Fuselage holes
            for (let i = 0; i < 12; i++) {
                bulletHoles.push({
                    x: regions.fuselage.x + Math.random() * regions.fuselage.w,
                    y: regions.fuselage.y + Math.random() * regions.fuselage.h
                });
            }
            // Wing holes
            for (let i = 0; i < 6; i++) {
                bulletHoles.push({
                    x: regions.leftWing.x + Math.random() * regions.leftWing.w,
                    y: regions.leftWing.y + Math.random() * regions.leftWing.h
                });
            }
            for (let i = 0; i < 6; i++) {
                bulletHoles.push({
                    x: regions.rightWing.x + Math.random() * regions.rightWing.w,
                    y: regions.rightWing.y + Math.random() * regions.rightWing.h
                });
            }
            // Tail
            for (let i = 0; i < 3; i++) {
                bulletHoles.push({
                    x: regions.tail.x + Math.random() * regions.tail.w,
                    y: regions.tail.y + Math.random() * regions.tail.h
                });
            }
        }

        // Armor placements
        let armorPlacements = [];
        let revealed = false;

        function drawPlane() {
            ctx.clearRect(0, 0, W, H);

            // Sky gradient
            const skyGrad = ctx.createLinearGradient(0, 0, 0, H);
            skyGrad.addColorStop(0, '#1a1a2e');
            skyGrad.addColorStop(1, '#16213e');
            ctx.fillStyle = skyGrad;
            ctx.fillRect(0, 0, W, H);

            // Draw bomber silhouette
            ctx.save();
            ctx.translate(W/2, H/2);

            // Main fuselage
            ctx.fillStyle = '#4a5568';
            ctx.beginPath();
            ctx.ellipse(0, 0, W*0.22, H*0.12, 0, 0, Math.PI * 2);
            ctx.fill();

            // Wings
            ctx.fillStyle = '#3d4852';
            ctx.beginPath();
            ctx.moveTo(-W*0.05, 0);
            ctx.lineTo(-W*0.35, H*0.08);
            ctx.lineTo(-W*0.35, -H*0.08);
            ctx.closePath();
            ctx.fill();

            ctx.beginPath();
            ctx.moveTo(W*0.05, 0);
            ctx.lineTo(W*0.35, H*0.08);
            ctx.lineTo(W*0.35, -H*0.08);
            ctx.closePath();
            ctx.fill();

            // Tail
            ctx.beginPath();
            ctx.moveTo(-W*0.22, 0);
            ctx.lineTo(-W*0.32, H*0.15);
            ctx.lineTo(-W*0.32, -H*0.15);
            ctx.closePath();
            ctx.fill();

            // Engines (highlighted if revealed)
            const engineColor = revealed ? 'rgba(39,174,96,0.6)' : '#2d3748';
            ctx.fillStyle = engineColor;
            ctx.beginPath();
            ctx.ellipse(-W*0.18, 0, W*0.04, H*0.06, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.beginPath();
            ctx.ellipse(W*0.18, 0, W*0.04, H*0.06, 0, 0, Math.PI * 2);
            ctx.fill();

            // Cockpit (highlighted if revealed)
            const cockpitColor = revealed ? 'rgba(39,174,96,0.6)' : '#5a6c7d';
            ctx.fillStyle = cockpitColor;
            ctx.beginPath();
            ctx.ellipse(W*0.18, 0, W*0.04, H*0.05, 0, 0, Math.PI * 2);
            ctx.fill();

            ctx.restore();

            // Draw bullet holes
            bulletHoles.forEach(hole => {
                ctx.beginPath();
                ctx.arc(hole.x, hole.y, 5, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(231,76,60,0.8)';
                ctx.fill();
                ctx.strokeStyle = '#c0392b';
                ctx.lineWidth = 2;
                ctx.stroke();
            });

            // Draw armor placements
            armorPlacements.forEach(armor => {
                ctx.beginPath();
                ctx.arc(armor.x, armor.y, 12, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(52,152,219,0.5)';
                ctx.fill();
                ctx.strokeStyle = '#3498db';
                ctx.lineWidth = 3;
                ctx.stroke();

                // Shield icon
                ctx.fillStyle = '#fff';
                ctx.font = '12px sans-serif';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText('üõ°Ô∏è', armor.x, armor.y);
            });

            // Draw "ARMOR HERE" labels if revealed
            if (revealed) {
                ctx.fillStyle = '#2ecc71';
                ctx.font = 'bold 14px Nunito';
                ctx.textAlign = 'center';

                // Engine labels
                ctx.fillText('ARMOR HERE!', W*0.32, H*0.7);
                ctx.fillText('ARMOR HERE!', W*0.68, H*0.7);
                ctx.fillText('ARMOR HERE!', W*0.68, H*0.25);

                // Draw arrows to engines/cockpit
                ctx.strokeStyle = '#2ecc71';
                ctx.lineWidth = 2;
                ctx.setLineDash([5, 5]);

                // Left engine arrow
                ctx.beginPath();
                ctx.moveTo(W*0.32, H*0.65);
                ctx.lineTo(W*0.32, H*0.55);
                ctx.stroke();

                // Right engine arrow
                ctx.beginPath();
                ctx.moveTo(W*0.68, H*0.65);
                ctx.lineTo(W*0.68, H*0.55);
                ctx.stroke();

                // Cockpit arrow
                ctx.beginPath();
                ctx.moveTo(W*0.68, H*0.3);
                ctx.lineTo(W*0.68, H*0.4);
                ctx.stroke();

                ctx.setLineDash([]);
            }
        }

        // Click to add armor
        canvas.addEventListener('click', (e) => {
            if (revealed) return;

            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            armorPlacements.push({ x, y });
            updateArmorStats();
            drawPlane();
        });

        function updateArmorStats() {
            let fuselage = 0, wing = 0, engine = 0, cockpit = 0;

            armorPlacements.forEach(armor => {
                const cx = W/2, cy = H/2;
                const rx = armor.x - cx, ry = armor.y - cy;

                // Check regions (simplified)
                if (Math.abs(rx) < W*0.08 && Math.abs(ry) < H*0.08) {
                    fuselage++;
                } else if (Math.abs(rx - W*0.18) < W*0.05 || Math.abs(rx + W*0.18) < W*0.05) {
                    engine++;
                } else if (rx > W*0.15 && Math.abs(ry) < H*0.06) {
                    cockpit++;
                } else {
                    wing++;
                }
            });

            document.getElementById('fuselageArmor').textContent = fuselage;
            document.getElementById('wingArmor').textContent = wing;
            document.getElementById('engineArmor').textContent = engine;
            document.getElementById('cockpitArmor').textContent = cockpit;
        }

        function revealInsight() {
            revealed = true;
            drawPlane();

            const panel = document.getElementById('resultsPanel');
            panel.classList.add('revealed');

            // Check if user armored engines/cockpit
            let engine = parseInt(document.getElementById('engineArmor').textContent);
            let cockpit = parseInt(document.getElementById('cockpitArmor').textContent);
            let fuselage = parseInt(document.getElementById('fuselageArmor').textContent);
            let wing = parseInt(document.getElementById('wingArmor').textContent);

            if (engine + cockpit > fuselage + wing) {
                panel.classList.remove('wrong');
                document.getElementById('resultsIcon').textContent = 'üéØ';
                document.getElementById('resultsTitleText').textContent = 'You Think Like Wald!';
                document.getElementById('resultsText').textContent =
                    "Impressive! You armored the areas WITHOUT bullet holes. These clean areas on returning planes mark where hits are FATAL‚Äîplanes hit there never made it back. You avoided survivorship bias and focused on the missing data.";
            } else {
                panel.classList.add('wrong');
                document.getElementById('resultsIcon').textContent = '‚ö†Ô∏è';
                document.getElementById('resultsTitleText').textContent = 'You Fell Into the Trap';
                document.getElementById('resultsText').textContent =
                    "Like the Navy researchers, you armored where the bullet holes ARE. But these are survival wounds! Planes hit in these areas made it home. The clean spots‚Äîengines and cockpit‚Äîare where hits are FATAL. Those planes are at the bottom of the ocean, not in your data.";
            }
        }

        function resetPlane() {
            revealed = false;
            armorPlacements = [];
            document.getElementById('fuselageArmor').textContent = '0';
            document.getElementById('wingArmor').textContent = '0';
            document.getElementById('engineArmor').textContent = '0';
            document.getElementById('cockpitArmor').textContent = '0';
            document.getElementById('resultsPanel').classList.remove('revealed', 'wrong');
            generateBulletHoles();
            drawPlane();
        }

        // === STARTUP GRAVEYARD ===
        const startupGrid = document.getElementById('startupGrid');
        let graveyardRevealed = false;

        function initStartups() {
            startupGrid.innerHTML = '';
            const survivors = [3, 17, 28, 42, 55, 61, 74, 83, 91, 99];

            for (let i = 0; i < 100; i++) {
                const div = document.createElement('div');
                div.className = 'startup-icon';

                if (survivors.includes(i)) {
                    div.classList.add('alive');
                    div.textContent = 'üöÄ';
                } else {
                    div.classList.add('dead');
                    div.textContent = 'üíÄ';
                    if (!graveyardRevealed) {
                        div.style.visibility = 'hidden';
                    }
                }

                startupGrid.appendChild(div);
            }

            document.getElementById('failedCount').textContent = graveyardRevealed ? '90' : '??';
            document.getElementById('failRate').textContent = graveyardRevealed ? '90%' : '??%';
        }

        function revealGraveyard() {
            graveyardRevealed = true;
            const deadOnes = document.querySelectorAll('.startup-icon.dead');

            deadOnes.forEach((el, i) => {
                setTimeout(() => {
                    el.style.visibility = 'visible';
                    el.classList.add('revealed');
                }, i * 30);
            });

            document.getElementById('failedCount').textContent = '90';
            document.getElementById('failRate').textContent = '90%';
        }

        function resetStartups() {
            graveyardRevealed = false;
            initStartups();
        }

        // === FUND CHART ===
        function drawFundChart() {
            const chart = document.getElementById('fundChart');
            const ctxChart = chart.getContext('2d');

            const dpr = window.devicePixelRatio || 1;
            const rect = chart.getBoundingClientRect();
            chart.width = rect.width * dpr;
            chart.height = rect.height * dpr;
            ctxChart.scale(dpr, dpr);
            chart.style.width = rect.width + 'px';
            chart.style.height = rect.height + 'px';

            const cW = rect.width;
            const cH = rect.height;
            const padding = 50;

            // Background
            ctxChart.fillStyle = 'rgba(0,0,0,0.2)';
            ctxChart.fillRect(0, 0, cW, cH);

            // Data
            const years = ['2015', '2016', '2017', '2018', '2019', '2020', '2021', '2022', '2023', '2024'];
            const survivorsReturns = [100, 115, 128, 122, 145, 160, 195, 180, 210, 240]; // 12% avg CAGR
            const allReturns = [100, 108, 115, 108, 120, 128, 145, 135, 150, 165]; // 6% avg CAGR

            const maxVal = 260;
            const minVal = 90;

            const chartW = cW - padding * 2;
            const chartH = cH - padding * 2;

            // Axes
            ctxChart.strokeStyle = 'rgba(255,255,255,0.3)';
            ctxChart.lineWidth = 1;
            ctxChart.beginPath();
            ctxChart.moveTo(padding, padding);
            ctxChart.lineTo(padding, cH - padding);
            ctxChart.lineTo(cW - padding, cH - padding);
            ctxChart.stroke();

            // Y-axis labels
            ctxChart.fillStyle = 'rgba(255,255,255,0.6)';
            ctxChart.font = '12px Nunito';
            ctxChart.textAlign = 'right';
            for (let i = 0; i <= 4; i++) {
                const val = minVal + (maxVal - minVal) * (i / 4);
                const y = cH - padding - (i / 4) * chartH;
                ctxChart.fillText('$' + Math.round(val), padding - 10, y + 4);
            }

            // X-axis labels
            ctxChart.textAlign = 'center';
            years.forEach((year, i) => {
                const x = padding + (i / (years.length - 1)) * chartW;
                ctxChart.fillText(year, x, cH - padding + 20);
            });

            // Draw lines
            function drawLine(data, color) {
                ctxChart.beginPath();
                ctxChart.strokeStyle = color;
                ctxChart.lineWidth = 3;

                data.forEach((val, i) => {
                    const x = padding + (i / (data.length - 1)) * chartW;
                    const y = cH - padding - ((val - minVal) / (maxVal - minVal)) * chartH;

                    if (i === 0) ctxChart.moveTo(x, y);
                    else ctxChart.lineTo(x, y);
                });

                ctxChart.stroke();
            }

            drawLine(allReturns, '#e74c3c');
            drawLine(survivorsReturns, '#2ecc71');

            // End labels
            ctxChart.font = 'bold 14px Nunito';
            ctxChart.textAlign = 'left';

            const survivorEndY = cH - padding - ((survivorsReturns[9] - minVal) / (maxVal - minVal)) * chartH;
            const allEndY = cH - padding - ((allReturns[9] - minVal) / (maxVal - minVal)) * chartH;

            ctxChart.fillStyle = '#2ecc71';
            ctxChart.fillText('$240 (+140%)', cW - padding + 10, survivorEndY);

            ctxChart.fillStyle = '#e74c3c';
            ctxChart.fillText('$165 (+65%)', cW - padding + 10, allEndY);
        }

        // Initialize
        generateBulletHoles();
        drawPlane();
        initStartups();
        drawFundChart();

        // Resize handling
        window.addEventListener('resize', () => {
            drawFundChart();
        });
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
