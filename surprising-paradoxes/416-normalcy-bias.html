<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Normalcy Bias - Surprising Paradoxes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1a0a0a 0%, #2d1f1f 50%, #1a1a2e 100%);
            min-height: 100vh;
            color: #e8e8e8;
            line-height: 1.8;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        header {
            text-align: center;
            margin-bottom: 50px;
        }

        h1 {
            font-size: 2.8em;
            color: #ff6b6b;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            font-size: 1.3em;
            color: #a8a8a8;
            font-style: italic;
        }

        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #ff6b6b;
            text-decoration: none;
            font-size: 1.1em;
            opacity: 0.8;
            transition: opacity 0.3s;
            z-index: 100;
        }

        .back-link:hover {
            opacity: 1;
        }

        section {
            background: rgba(255,255,255,0.05);
            border-radius: 20px;
            padding: 35px;
            margin-bottom: 35px;
            border: 1px solid rgba(255,107,107,0.2);
        }

        h2 {
            color: #ff6b6b;
            font-size: 1.8em;
            margin-bottom: 20px;
            border-bottom: 2px solid rgba(255,107,107,0.3);
            padding-bottom: 10px;
        }

        h3 {
            color: #ff8f8f;
            font-size: 1.3em;
            margin: 25px 0 15px 0;
        }

        p {
            margin-bottom: 15px;
            text-align: justify;
        }

        .warning-banner {
            background: linear-gradient(135deg, rgba(255,107,107,0.2), rgba(255,150,150,0.1));
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            margin: 25px 0;
            border: 2px solid rgba(255,107,107,0.4);
        }

        .warning-stat {
            font-size: 3em;
            font-weight: bold;
            color: #ff6b6b;
        }

        .warning-label {
            font-size: 1.1em;
            color: #ccc;
            margin-top: 10px;
        }

        .highlight {
            background: linear-gradient(135deg, rgba(255,107,107,0.2), rgba(255,150,150,0.1));
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #ff6b6b;
            margin: 20px 0;
        }

        /* Evacuation Simulation */
        .simulation-area {
            background: rgba(0,0,0,0.4);
            border-radius: 15px;
            padding: 30px;
            margin: 25px 0;
        }

        .office-scene {
            position: relative;
            width: 100%;
            height: 300px;
            background: linear-gradient(to bottom, #2a2a3a 0%, #1a1a2a 100%);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .alarm-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .alarm-off {
            background: rgba(100,100,100,0.5);
            color: #888;
        }

        .alarm-on {
            background: rgba(255,107,107,0.8);
            color: white;
            animation: alarmFlash 0.5s ease-in-out infinite;
        }

        @keyframes alarmFlash {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .person {
            position: absolute;
            font-size: 2.5em;
            transition: all 0.5s ease;
        }

        .person-you {
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
        }

        .colleague {
            opacity: 0.8;
        }

        .person-status {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.4em;
            white-space: nowrap;
            color: #aaa;
        }

        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
        }

        .evacuate-btn {
            background: linear-gradient(135deg, #4ecca3, #44b48c);
            color: white;
        }

        .wait-btn {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            color: #1a1a2e;
        }

        .check-btn {
            background: linear-gradient(135deg, #4a90d9, #357abd);
            color: white;
        }

        .action-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .timer-display {
            text-align: center;
            margin: 20px 0;
        }

        .timer {
            font-size: 3em;
            font-weight: bold;
            color: #ff6b6b;
            font-family: 'Courier New', monospace;
        }

        .timer-label {
            color: #888;
            margin-top: 5px;
        }

        .result-panel {
            background: rgba(0,0,0,0.5);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            text-align: center;
        }

        .result-panel.success {
            border: 2px solid #4ecca3;
        }

        .result-panel.delayed {
            border: 2px solid #ffc107;
        }

        .result-panel.danger {
            border: 2px solid #ff6b6b;
        }

        .hidden {
            display: none !important;
        }

        /* Processing Demo */
        .brain-demo {
            text-align: center;
            padding: 30px;
        }

        .brain-icon {
            font-size: 5em;
            margin-bottom: 20px;
        }

        .processing-bar {
            width: 100%;
            max-width: 400px;
            height: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            margin: 0 auto 20px;
            overflow: hidden;
        }

        .processing-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #ffc107, #4ecca3);
            border-radius: 10px;
            width: 0%;
            transition: width 10s linear;
        }

        .processing-text {
            font-size: 1.2em;
            color: #ff8f8f;
        }

        /* Milling Behavior */
        .milling-demo {
            text-align: center;
            padding: 20px;
        }

        .sources-count {
            font-size: 4em;
            font-weight: bold;
            color: #ff6b6b;
        }

        .sources-grid {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .source-icon {
            font-size: 2.5em;
            padding: 15px;
            background: rgba(255,255,255,0.08);
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .source-icon:hover {
            background: rgba(255,255,255,0.15);
        }

        .source-icon.checked {
            border-color: #4ecca3;
            background: rgba(78,204,163,0.2);
        }

        /* Statistics */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .stat-card {
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            border: 1px solid rgba(255,107,107,0.2);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #ff6b6b;
        }

        .stat-label {
            color: #aaa;
            font-size: 0.95em;
            margin-top: 10px;
        }

        /* Disaster Examples */
        .disaster-timeline {
            position: relative;
            padding-left: 30px;
            margin: 25px 0;
        }

        .disaster-timeline::before {
            content: '';
            position: absolute;
            left: 10px;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(180deg, #ff6b6b, #ff8f8f);
        }

        .disaster-item {
            position: relative;
            padding: 15px 0 15px 15px;
            margin-bottom: 15px;
        }

        .disaster-item::before {
            content: '‚ö†Ô∏è';
            position: absolute;
            left: -26px;
            top: 15px;
            font-size: 1.2em;
        }

        .disaster-year {
            color: #ff6b6b;
            font-weight: bold;
            font-size: 1.1em;
        }

        .disaster-name {
            color: #ff8f8f;
            font-weight: bold;
            margin: 5px 0;
        }

        .disaster-desc {
            color: #aaa;
            font-size: 0.95em;
        }

        /* Three Phases */
        .phases-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 25px 0;
            flex-wrap: wrap;
        }

        .phase-card {
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
            padding: 25px 20px;
            text-align: center;
            flex: 1;
            min-width: 180px;
            max-width: 250px;
            border-top: 3px solid;
        }

        .phase-1 { border-color: #ff6b6b; }
        .phase-2 { border-color: #ffc107; }
        .phase-3 { border-color: #4ecca3; }

        .phase-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .phase-name {
            font-weight: bold;
            margin-bottom: 10px;
        }

        .phase-1 .phase-name { color: #ff6b6b; }
        .phase-2 .phase-name { color: #ffc107; }
        .phase-3 .phase-name { color: #4ecca3; }

        .phase-desc {
            font-size: 0.9em;
            color: #aaa;
        }

        .quote {
            font-style: italic;
            border-left: 3px solid #ff6b6b;
            padding-left: 20px;
            margin: 20px 0;
            color: #ccc;
        }

        .quote-author {
            color: #ff6b6b;
            margin-top: 10px;
            font-style: normal;
        }

        .insight-box {
            background: linear-gradient(135deg, rgba(78,204,163,0.2), rgba(255,107,107,0.1));
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid #4ecca3;
        }

        .btn {
            padding: 12px 30px;
            background: linear-gradient(135deg, #ff6b6b, #ff8f8f);
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255,107,107,0.4);
        }

        .citation {
            font-size: 0.9em;
            color: #888;
            font-style: italic;
            margin-top: 10px;
        }

        @media (max-width: 600px) {
            h1 { font-size: 2em; }
            .container { padding: 20px 15px; }
            section { padding: 20px; }
            .office-scene { height: 250px; }
            .phases-container { flex-direction: column; align-items: center; }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back to Paradoxes</a>

    <div class="container">
        <header>
            <h1>üö® The Normalcy Bias</h1>
            <p class="subtitle">"It can't happen here. It won't happen to me."</p>
        </header>

        <section>
            <div class="warning-banner">
                <div class="warning-stat">80%</div>
                <div class="warning-label">of people display normalcy bias during a disaster</div>
            </div>

            <p>When disaster strikes, most people don't panic. They don't run screaming. They don't immediately evacuate. Instead, they freeze‚Äîcaught in a cognitive trap that makes them underestimate danger and delay action.</p>

            <div class="highlight">
                <p><strong>The Normalcy Bias:</strong> A cognitive bias that leads people to disbelieve or minimize threat warnings. We underestimate both the likelihood of a disaster and its potential effects, because our brain assumes things will continue as they always have.</p>
            </div>

            <p>Disaster movies get it wrong. In real emergencies, people don't evacuate immediately while screaming and flailing. They mill around, check with others, seek confirmation‚Äîoften until it's too late.</p>
        </section>

        <section>
            <h2>The 8-10 Second Freeze</h2>

            <p>Research shows that even when the brain is calm, it takes <strong>8-10 seconds</strong> to process new, unexpected information. During a crisis, this delay can be fatal.</p>

            <div class="brain-demo">
                <div class="brain-icon">üß†</div>
                <button class="btn" id="start-processing" onclick="startProcessing()">Simulate New Information</button>
                <div class="processing-bar" id="processing-bar" style="display: none;">
                    <div class="processing-fill" id="processing-fill"></div>
                </div>
                <div class="processing-text" id="processing-text"></div>
            </div>

            <p>During these crucial seconds, the brain is trying to categorize the new information, compare it to past experiences, and decide if this is really happening. Often, it concludes: "This can't be real."</p>
        </section>

        <section>
            <h2>The Milling Behavior</h2>

            <p>Sociologist Thomas Drabek discovered that when told to evacuate, most people check with <strong>four or more sources</strong> before deciding what to do. This "milling" behavior is universal in disasters.</p>

            <div class="milling-demo">
                <p style="color: #ff8f8f; margin-bottom: 20px;">üö® FIRE ALARM SOUNDS ‚Äî What do you do?</p>

                <p style="margin-bottom: 15px;">Click the sources you'd check before evacuating:</p>

                <div class="sources-grid">
                    <div class="source-icon" onclick="toggleSource(this)" title="Check with colleague">üë§</div>
                    <div class="source-icon" onclick="toggleSource(this)" title="Look out window">ü™ü</div>
                    <div class="source-icon" onclick="toggleSource(this)" title="Check phone">üì±</div>
                    <div class="source-icon" onclick="toggleSource(this)" title="Ask another person">üë•</div>
                    <div class="source-icon" onclick="toggleSource(this)" title="Check hallway">üö™</div>
                    <div class="source-icon" onclick="toggleSource(this)" title="Wait for announcement">üì¢</div>
                </div>

                <p style="margin-top: 20px;">Sources checked: <span class="sources-count" id="sources-count">0</span></p>
                <p style="color: #888; font-size: 0.9em;" id="milling-result"></p>
            </div>

            <div class="insight-box">
                <p><strong>The 9/11 Finding:</strong> At least 70% of World Trade Center survivors spoke with others before evacuating. In the South Tower, after the first plane hit the North Tower, a standard announcement told tenants to stay put‚Äîand many did, even with smoke visible next door.</p>
            </div>
        </section>

        <section>
            <h2>Experience the Simulation</h2>

            <p>You're in an office. An alarm sounds. Your colleagues don't seem worried. What do you do?</p>

            <div class="simulation-area">
                <div class="office-scene" id="office-scene">
                    <div class="alarm-indicator alarm-off" id="alarm-indicator">ALARM: OFF</div>

                    <!-- Colleagues -->
                    <div class="person colleague" id="colleague1" style="left: 20%; top: 30%;">
                        üë®‚Äçüíº
                        <span class="person-status" id="status1">Working...</span>
                    </div>
                    <div class="person colleague" id="colleague2" style="left: 75%; top: 35%;">
                        üë©‚Äçüíº
                        <span class="person-status" id="status2">On phone...</span>
                    </div>
                    <div class="person colleague" id="colleague3" style="left: 30%; top: 70%;">
                        üë®‚Äçüíª
                        <span class="person-status" id="status3">Typing...</span>
                    </div>
                    <div class="person colleague" id="colleague4" style="left: 65%; top: 65%;">
                        üë©‚Äçüíª
                        <span class="person-status" id="status4">Reading...</span>
                    </div>

                    <!-- You -->
                    <div class="person person-you" id="you">
                        üßç
                        <span class="person-status" id="your-status">You</span>
                    </div>
                </div>

                <div class="timer-display" id="timer-display" style="display: none;">
                    <div class="timer" id="timer">60</div>
                    <div class="timer-label">Seconds until situation becomes critical</div>
                </div>

                <div class="action-buttons" id="action-buttons">
                    <button class="action-btn" id="start-sim-btn" onclick="startSimulation()">Start Simulation</button>
                </div>

                <div class="action-buttons hidden" id="sim-actions">
                    <button class="action-btn evacuate-btn" onclick="evacuate()">üèÉ Evacuate NOW</button>
                    <button class="action-btn wait-btn" onclick="waitMore()">‚è≥ Wait & See</button>
                    <button class="action-btn check-btn" onclick="checkOthers()">‚ùì Ask Colleague</button>
                </div>

                <div class="result-panel hidden" id="result-panel"></div>
            </div>
        </section>

        <section>
            <h2>The Three Phases of Disaster Response</h2>

            <p>Amanda Ripley, in <em>The Unthinkable: Who Survives When Disaster Strikes</em>, identifies the common pattern:</p>

            <div class="phases-container">
                <div class="phase-card phase-1">
                    <div class="phase-icon">üôà</div>
                    <div class="phase-name">DENIAL</div>
                    <div class="phase-desc">The brain struggles to accept the situation. "This isn't happening." People continue normal activities.</div>
                </div>

                <div class="phase-card phase-2">
                    <div class="phase-icon">ü§î</div>
                    <div class="phase-name">DELIBERATION</div>
                    <div class="phase-desc">Seeking confirmation. Checking with others. "Is this real? What should I do?" This phase takes critical time.</div>
                </div>

                <div class="phase-card phase-3">
                    <div class="phase-icon">üèÉ</div>
                    <div class="phase-name">DECISIVE MOMENT</div>
                    <div class="phase-desc">Action finally occurs‚Äîeither evacuation or a fatal delay. Often triggered by seeing others act.</div>
                </div>
            </div>

            <div class="quote">
                "Disaster movies get it all wrong. When you and others are warned of danger, you don't evacuate immediately while screaming and flailing your arms."
                <div class="quote-author">‚Äî David McRaney</div>
            </div>
        </section>

        <section>
            <h2>Historical Examples</h2>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">165</div>
                    <div class="stat-label">Deaths at Beverly Hills Supper Club (1977) ‚Äî many delayed evacuation</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">70%</div>
                    <div class="stat-label">of 9/11 survivors spoke with others before evacuating</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">1000s</div>
                    <div class="stat-label">refused to leave New Orleans before Hurricane Katrina</div>
                </div>
            </div>

            <div class="disaster-timeline">
                <div class="disaster-item">
                    <div class="disaster-year">1912 ‚Äî RMS Titanic</div>
                    <div class="disaster-name">The Unsinkable Ship</div>
                    <div class="disaster-desc">Officers made insufficient evacuation preparations, possibly because they underestimated the odds of worst-case scenarios. Passengers lingered on deck while lifeboats left half-full.</div>
                </div>

                <div class="disaster-item">
                    <div class="disaster-year">1977 ‚Äî Beverly Hills Supper Club</div>
                    <div class="disaster-name">The Cabaret Room Fire</div>
                    <div class="disaster-desc">When busboy Walter Bailey interrupted the show to order evacuation, the audience of ~1,000 had very little time. Many didn't believe the warning was real‚Äîthe show had just been entertaining.</div>
                </div>

                <div class="disaster-item">
                    <div class="disaster-year">2001 ‚Äî World Trade Center</div>
                    <div class="disaster-name">September 11 Attacks</div>
                    <div class="disaster-desc">After the first plane hit Tower 1, South Tower tenants were told to stay put. Many did. People gathered belongings, finished emails, made calls‚Äîeven as smoke billowed from next door.</div>
                </div>

                <div class="disaster-item">
                    <div class="disaster-year">2005 ‚Äî Hurricane Katrina</div>
                    <div class="disaster-name">New Orleans</div>
                    <div class="disaster-desc">Despite mandatory evacuation orders and days of warning, thousands remained. "We've survived hurricanes before." Many had‚Äîbut not a Category 5 direct hit.</div>
                </div>
            </div>
        </section>

        <section>
            <h2>Why Does This Happen?</h2>

            <h3>1. Pattern Matching Failure</h3>
            <p>Our brains rely on past experience to interpret the present. If you've heard fire alarms that were always false alarms, your brain categorizes the next one the same way‚Äîeven when it's real.</p>

            <h3>2. Social Proof</h3>
            <p>We look to others for cues. If colleagues aren't panicking, we conclude there's no reason to panic. This conformity bias reinforces normalcy bias‚Äînobody wants to be the alarmist who overreacts to nothing.</p>

            <h3>3. Optimism Bias</h3>
            <p>We systematically overestimate our likelihood of positive outcomes and underestimate negative ones. "Bad things happen to other people, not me."</p>

            <h3>4. Cognitive Load</h3>
            <p>Processing a genuine emergency requires abandoning your current mental model of reality and constructing a new one. This takes time and energy the brain resists spending.</p>

            <div class="highlight">
                <p><strong>First Responders' Term:</strong> Emergency professionals call normalcy bias "negative panic"‚Äîthe opposite of Hollywood hysteria. It's not running and screaming; it's standing frozen, unable to act.</p>
            </div>
        </section>

        <section>
            <h2>Breaking the Bias</h2>

            <p>Understanding normalcy bias is the first step to overcoming it. Emergency preparedness experts recommend:</p>

            <ul style="margin: 20px 0 20px 30px; color: #ccc;">
                <li><strong>Pre-plan responses:</strong> Decide NOW what you'll do when an alarm sounds. Remove the need for deliberation.</li>
                <li><strong>Run mental simulations:</strong> Regularly imagine emergency scenarios. When the real thing happens, your brain has a template.</li>
                <li><strong>Be the first mover:</strong> If you start evacuating, others will follow. Social proof works both ways.</li>
                <li><strong>Ignore the crowd:</strong> Train yourself to act on warnings, not on what others are doing.</li>
                <li><strong>Accept uncertainty:</strong> You may feel foolish if it's a false alarm. That's okay. The cost of unnecessary evacuation is far less than the cost of being wrong.</li>
            </ul>

            <div class="insight-box">
                <p><strong>The Survivor's Edge:</strong> People who survive disasters often report that something "snapped" them out of the freeze‚Äîa specific trigger like seeing flames, hearing a crash, or one person yelling "GO!" Being that person, or training yourself to recognize triggers, can be life-saving.</p>
            </div>
        </section>

        <section>
            <h2>Research Background</h2>

            <p>The term "normalcy bias" emerged from disaster psychology research studying why people fail to evacuate despite clear warnings. Related concepts include "analysis paralysis" and the "ostrich effect."</p>

            <h3>Key Research</h3>

            <p><strong>Thomas Drabek (2001):</strong> Documented the "milling" behavior where evacuees check with 4+ sources before acting. Found this pattern consistent across disaster types.</p>

            <p><strong>Amanda Ripley (2008):</strong> <em>The Unthinkable</em> synthesized survivor interviews and research, identifying the denial-deliberation-decision phases.</p>

            <p><strong>CDC WTC Evacuation Study (2003):</strong> Analyzed the evacuation of ~13,000-15,000 people from the World Trade Center towers, documenting delays and decision-making patterns.</p>

            <div class="quote">
                "Normalcy bias is often factored into fatality predictions in everything from ship sinkings to stadium evacuations."
                <div class="quote-author">‚Äî David McRaney</div>
            </div>

            <p class="citation">Ripley, A. (2008). The Unthinkable: Who Survives When Disaster Strikes‚Äîand Why. Crown Publishers.</p>
        </section>
    </div>

    <script>
        // Processing Demo
        function startProcessing() {
            document.getElementById('start-processing').style.display = 'none';
            document.getElementById('processing-bar').style.display = 'block';
            document.getElementById('processing-text').textContent = 'Processing new information...';

            setTimeout(() => {
                document.getElementById('processing-fill').style.width = '100%';
            }, 100);

            // Progress messages
            setTimeout(() => {
                document.getElementById('processing-text').textContent = 'Is this real? Comparing to past experiences...';
            }, 2000);

            setTimeout(() => {
                document.getElementById('processing-text').textContent = 'This doesn\'t match my mental model...';
            }, 4000);

            setTimeout(() => {
                document.getElementById('processing-text').textContent = 'Maybe it\'s a false alarm?';
            }, 6000);

            setTimeout(() => {
                document.getElementById('processing-text').textContent = 'Wait, this might actually be serious...';
            }, 8000);

            setTimeout(() => {
                document.getElementById('processing-text').textContent = '‚úì Information processed. 10 seconds elapsed.';
                document.getElementById('processing-text').style.color = '#4ecca3';
            }, 10000);
        }

        // Milling Demo
        let sourcesChecked = 0;

        function toggleSource(element) {
            element.classList.toggle('checked');
            sourcesChecked = document.querySelectorAll('.source-icon.checked').length;
            document.getElementById('sources-count').textContent = sourcesChecked;

            const result = document.getElementById('milling-result');
            if (sourcesChecked >= 4) {
                result.textContent = 'You\'ve matched the typical milling behavior: 4+ sources before deciding. In a real emergency, this delay could be fatal.';
                result.style.color = '#ff6b6b';
            } else if (sourcesChecked >= 2) {
                result.textContent = 'Getting closer to the typical 4 sources people check before evacuating...';
                result.style.color = '#ffc107';
            } else {
                result.textContent = '';
            }
        }

        // Evacuation Simulation
        let simTimer = null;
        let timeLeft = 60;
        let checksPerformed = 0;

        function startSimulation() {
            document.getElementById('start-sim-btn').classList.add('hidden');
            document.getElementById('sim-actions').classList.remove('hidden');
            document.getElementById('timer-display').style.display = 'block';
            document.getElementById('alarm-indicator').className = 'alarm-indicator alarm-on';
            document.getElementById('alarm-indicator').textContent = 'üö® ALARM: ACTIVE';

            timeLeft = 60;
            checksPerformed = 0;

            simTimer = setInterval(() => {
                timeLeft--;
                document.getElementById('timer').textContent = timeLeft;

                if (timeLeft <= 20) {
                    document.getElementById('timer').style.color = '#ff6b6b';
                    // Update colleague statuses
                    document.getElementById('status1').textContent = 'Still working...';
                    document.getElementById('status2').textContent = 'On call...';
                }

                if (timeLeft <= 10) {
                    // Some colleagues start to notice
                    document.getElementById('status3').textContent = 'Looking around...';
                }

                if (timeLeft <= 0) {
                    clearInterval(simTimer);
                    showResult('danger', 'CRITICAL: You waited too long. In a real emergency, exits may now be blocked.');
                }
            }, 1000);
        }

        function evacuate() {
            clearInterval(simTimer);
            const escaped = timeLeft;

            if (escaped >= 40) {
                showResult('success', `EXCELLENT! You evacuated immediately with ${escaped} seconds to spare. You overcame the normalcy bias.`);
            } else if (escaped >= 20) {
                showResult('delayed', `CLOSE CALL. You evacuated with ${escaped} seconds remaining. The delay was risky but you made it.`);
            } else {
                showResult('danger', `DANGEROUS. With only ${escaped} seconds left, you barely escaped. Many wouldn't have.`);
            }
        }

        function waitMore() {
            if (timeLeft > 30) {
                timeLeft -= 10;
                document.getElementById('timer').textContent = timeLeft;

                // Update colleague behavior
                const statuses = ['Still typing...', 'Ignoring alarm...', 'Laughing it off...', 'Back to work...'];
                document.querySelectorAll('.person-status').forEach((status, i) => {
                    if (i < 4) status.textContent = statuses[i];
                });
            } else {
                showResult('danger', 'You waited for social cues that never came. Now it may be too late.');
            }
        }

        function checkOthers() {
            checksPerformed++;

            if (checksPerformed === 1) {
                document.getElementById('status1').textContent = '"Probably false alarm"';
            } else if (checksPerformed === 2) {
                document.getElementById('status2').textContent = '"I\'m staying put"';
            } else if (checksPerformed === 3) {
                document.getElementById('status3').textContent = '"Let\'s wait and see"';
            } else if (checksPerformed >= 4) {
                document.getElementById('status4').textContent = '"Nobody else is leaving..."';
                showResult('delayed', `You checked with ${checksPerformed} colleagues‚Äîmatching the "milling" pattern. Each check cost precious seconds. In many disasters, this confirmation-seeking is what kills people.`);
            }

            timeLeft -= 8;
            if (timeLeft < 0) timeLeft = 0;
            document.getElementById('timer').textContent = timeLeft;
        }

        function showResult(type, message) {
            clearInterval(simTimer);
            document.getElementById('sim-actions').classList.add('hidden');
            const panel = document.getElementById('result-panel');
            panel.classList.remove('hidden', 'success', 'delayed', 'danger');
            panel.classList.add(type);
            panel.innerHTML = `<p style="font-size: 1.1em;">${message}</p><button class="btn" style="margin-top: 15px;" onclick="resetSimulation()">Try Again</button>`;
        }

        function resetSimulation() {
            document.getElementById('result-panel').classList.add('hidden');
            document.getElementById('start-sim-btn').classList.remove('hidden');
            document.getElementById('timer-display').style.display = 'none';
            document.getElementById('alarm-indicator').className = 'alarm-indicator alarm-off';
            document.getElementById('alarm-indicator').textContent = 'ALARM: OFF';
            document.getElementById('timer').style.color = '#ff6b6b';

            // Reset statuses
            document.getElementById('status1').textContent = 'Working...';
            document.getElementById('status2').textContent = 'On phone...';
            document.getElementById('status3').textContent = 'Typing...';
            document.getElementById('status4').textContent = 'Reading...';
        }
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
