<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The DRM Paradigm - Surprising Paradoxes</title>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --sage: #8A9A5B;
            --moss: #606C38;
            --earth: #DDA15E;
            --cream: #FEFAE0;
            --terracotta: #BC6C25;
            --dark-moss: #3d4423;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, var(--cream) 0%, #F4F1DE 50%, #EDE8D5 100%);
            min-height: 100vh;
            color: var(--dark-moss);
            line-height: 1.7;
        }

        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--moss);
            text-decoration: none;
            font-weight: 600;
            padding: 10px 20px;
            background: rgba(255,255,255,0.8);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            transition: all 0.3s ease;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .back-link:hover {
            background: var(--moss);
            color: white;
            transform: translateX(-5px);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 80px 20px 40px;
        }

        h1 {
            font-family: 'Lora', serif;
            font-size: 2.8rem;
            color: var(--moss);
            margin-bottom: 10px;
            text-align: center;
        }

        .subtitle {
            text-align: center;
            color: var(--terracotta);
            font-size: 1.2rem;
            margin-bottom: 40px;
            font-weight: 500;
        }

        .intro-card {
            background: rgba(255,255,255,0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }

        .intro-card h2 {
            font-family: 'Lora', serif;
            color: var(--moss);
            margin-bottom: 15px;
        }

        .experiment-phase {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .experiment-phase.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .btn {
            display: inline-block;
            padding: 15px 35px;
            background: var(--moss);
            color: white;
            border: none;
            border-radius: 30px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            font-family: 'Nunito', sans-serif;
        }

        .btn:hover {
            background: var(--dark-moss);
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(96, 108, 56, 0.3);
        }

        .btn-secondary {
            background: var(--terracotta);
        }

        .btn-secondary:hover {
            background: #a55a1f;
        }

        .word-display {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border-radius: 20px;
            padding: 60px 40px;
            text-align: center;
            margin: 30px 0;
        }

        .current-word {
            font-size: 3.5rem;
            font-weight: 700;
            color: white;
            letter-spacing: 2px;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .word-counter {
            color: rgba(255,255,255,0.5);
            margin-top: 20px;
            font-size: 1.1rem;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255,255,255,0.2);
            border-radius: 3px;
            margin-top: 25px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--earth);
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .recognition-test {
            background: rgba(255,255,255,0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
        }

        .test-word {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--moss);
            text-align: center;
            margin: 30px 0;
        }

        .confidence-section {
            text-align: center;
            margin: 30px 0;
        }

        .confidence-label {
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--dark-moss);
        }

        .response-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 25px 0;
        }

        .response-btn {
            padding: 15px 30px;
            border: 2px solid var(--moss);
            background: transparent;
            color: var(--moss);
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Nunito', sans-serif;
        }

        .response-btn:hover {
            background: var(--moss);
            color: white;
        }

        .response-btn.yes {
            border-color: var(--moss);
        }

        .response-btn.no {
            border-color: var(--terracotta);
            color: var(--terracotta);
        }

        .response-btn.no:hover {
            background: var(--terracotta);
            color: white;
        }

        .results-card {
            background: linear-gradient(135deg, var(--moss) 0%, var(--dark-moss) 100%);
            color: white;
            border-radius: 20px;
            padding: 40px;
            margin: 30px 0;
            text-align: center;
        }

        .results-card h2 {
            font-family: 'Lora', serif;
            font-size: 2rem;
            margin-bottom: 20px;
        }

        .stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            margin: 25px 0;
        }

        .stat-box {
            background: rgba(255,255,255,0.15);
            padding: 20px 15px;
            border-radius: 15px;
            text-align: center;
        }

        .stat-number {
            font-size: 2.2rem;
            font-weight: 700;
        }

        .stat-label {
            font-size: 0.85rem;
            opacity: 0.9;
            margin-top: 5px;
        }

        .lure-reveal {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a5a 100%);
            color: white;
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
        }

        .lure-reveal h3 {
            font-size: 1.3rem;
            margin-bottom: 10px;
        }

        .lure-word {
            font-size: 2rem;
            font-weight: 700;
            margin: 10px 0;
        }

        .science-section {
            background: rgba(255,255,255,0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
        }

        .science-section h3 {
            font-family: 'Lora', serif;
            color: var(--moss);
            margin-bottom: 15px;
        }

        blockquote {
            border-left: 4px solid var(--earth);
            padding-left: 20px;
            margin: 20px 0;
            font-style: italic;
            color: var(--terracotta);
        }

        .word-list-example {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }

        .example-word {
            background: var(--sage);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .critical-lure {
            background: #ff6b6b;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .list-indicator {
            text-align: center;
            color: var(--terracotta);
            font-weight: 600;
            margin-bottom: 15px;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .distractor-section {
            background: rgba(255,255,255,0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            text-align: center;
        }

        .countdown-display {
            font-size: 4rem;
            font-weight: 700;
            color: var(--moss);
            margin: 30px 0;
        }

        .math-problem {
            font-size: 2rem;
            font-weight: 600;
            color: var(--dark-moss);
            margin: 20px 0;
        }

        .math-input {
            font-size: 1.5rem;
            padding: 15px 25px;
            border: 2px solid var(--moss);
            border-radius: 12px;
            width: 150px;
            text-align: center;
            font-family: 'Nunito', sans-serif;
        }

        .comparison-chart {
            background: rgba(255,255,255,0.5);
            border-radius: 15px;
            padding: 20px;
            margin: 25px 0;
        }

        .bar-chart {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .bar-row {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .bar-label {
            width: 140px;
            font-weight: 600;
            font-size: 0.9rem;
            text-align: right;
        }

        .bar-container {
            flex: 1;
            height: 30px;
            background: rgba(138, 154, 91, 0.2);
            border-radius: 15px;
            overflow: hidden;
            position: relative;
        }

        .bar-fill {
            height: 100%;
            border-radius: 15px;
            transition: width 1s ease;
        }

        .bar-value {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-weight: 700;
            font-size: 0.9rem;
        }

        @media (max-width: 600px) {
            h1 { font-size: 2rem; }
            .current-word { font-size: 2.5rem; }
            .test-word { font-size: 2rem; }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">
        <span>←</span> Back to Paradoxes
    </a>

    <div class="container">
        <h1>The DRM Paradigm</h1>
        <p class="subtitle">False Memories You're About to Create</p>

        <!-- Phase 1: Introduction -->
        <div id="phase1" class="experiment-phase active">
            <div class="intro-card">
                <h2>You Will Remember Words That Were Never Shown</h2>
                <p>In 1995, psychologists Henry Roediger and Kathleen McDermott revived a technique from James Deese's 1959 research that reliably creates <strong>false memories</strong>.</p>
                <p>Here's how it works: You'll see a list of related words. Later, when tested, you'll confidently "remember" seeing a word that <strong>was never presented</strong>.</p>
                <p>This isn't a trick—it's how your brain's semantic memory actually works. And you <strong>can't stop it</strong>, even knowing what's coming.</p>
            </div>

            <div class="science-section">
                <h3>Example: The "SLEEP" List</h3>
                <p>Subjects study these 15 words:</p>
                <div class="word-list-example">
                    <span class="example-word">bed</span>
                    <span class="example-word">rest</span>
                    <span class="example-word">awake</span>
                    <span class="example-word">tired</span>
                    <span class="example-word">dream</span>
                    <span class="example-word">wake</span>
                    <span class="example-word">snooze</span>
                    <span class="example-word">blanket</span>
                    <span class="example-word">doze</span>
                    <span class="example-word">slumber</span>
                    <span class="example-word">snore</span>
                    <span class="example-word">nap</span>
                    <span class="example-word">peace</span>
                    <span class="example-word">yawn</span>
                    <span class="example-word">drowsy</span>
                </div>
                <p>Then on a recognition test, they see:</p>
                <div class="word-list-example">
                    <span class="example-word">bed</span>
                    <span class="example-word">tired</span>
                    <span class="example-word critical-lure">SLEEP</span>
                    <span class="example-word">blanket</span>
                </div>
                <p><strong>Result:</strong> 40-50% of subjects confidently claim they remember seeing "SLEEP" — even though it was never presented.</p>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" onclick="startExperiment()">Begin the Experiment</button>
                <p style="margin-top: 15px; color: var(--terracotta);">You'll study 3 word lists, then be tested</p>
            </div>
        </div>

        <!-- Phase 2: Word Presentation -->
        <div id="phase2" class="experiment-phase">
            <div class="list-indicator">List <span id="listNumber">1</span> of 3</div>
            <div class="word-display">
                <div class="current-word" id="currentWord">Ready...</div>
                <div class="word-counter">Word <span id="wordCount">0</span> of 12</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
            </div>
            <div class="intro-card" style="text-align: center;">
                <p>Focus on each word. Try to remember them all.</p>
            </div>
        </div>

        <!-- Phase 3: Distractor Task -->
        <div id="phase3" class="experiment-phase">
            <div class="distractor-section">
                <h2 style="font-family: 'Lora', serif; color: var(--moss); margin-bottom: 20px;">Distractor Task</h2>
                <p>Complete these math problems before the memory test:</p>
                <div class="countdown-display" id="distractorCountdown">30</div>
                <div class="math-problem" id="mathProblem">7 × 8 = ?</div>
                <input type="number" class="math-input" id="mathInput" placeholder="?" autofocus>
                <div style="margin-top: 15px;">
                    <button class="btn btn-secondary" onclick="checkMath()">Submit</button>
                </div>
                <p id="mathFeedback" style="margin-top: 15px; font-weight: 600;"></p>
            </div>
        </div>

        <!-- Phase 4: Recognition Test -->
        <div id="phase4" class="experiment-phase">
            <div class="recognition-test">
                <h2 style="font-family: 'Lora', serif; color: var(--moss); text-align: center; margin-bottom: 10px;">Recognition Test</h2>
                <p style="text-align: center; margin-bottom: 20px;">Did you see this word in any of the lists?</p>
                <div class="test-word" id="testWord">WORD</div>
                <div class="response-buttons">
                    <button class="response-btn yes" onclick="recordResponse('yes', 'high')">Yes, definitely</button>
                    <button class="response-btn yes" onclick="recordResponse('yes', 'low')">Yes, maybe</button>
                    <button class="response-btn no" onclick="recordResponse('no', 'low')">No, maybe not</button>
                    <button class="response-btn no" onclick="recordResponse('no', 'high')">No, definitely</button>
                </div>
                <div class="word-counter" style="text-align: center; color: var(--terracotta);">
                    Question <span id="testCount">1</span> of <span id="testTotal">24</span>
                </div>
            </div>
        </div>

        <!-- Phase 5: Results -->
        <div id="phase5" class="experiment-phase">
            <div class="results-card">
                <h2>Your Results</h2>
                <p id="resultsSummary"></p>
                <div class="stat-grid">
                    <div class="stat-box">
                        <div class="stat-number" id="hitRate">?</div>
                        <div class="stat-label">Hit Rate (Correct "Yes")</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number" id="falseAlarmRate">?</div>
                        <div class="stat-label">False Alarm Rate</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number" id="lureRate">?</div>
                        <div class="stat-label">Critical Lure Rate</div>
                    </div>
                </div>
            </div>

            <div id="lureReveal" class="lure-reveal" style="display: none;">
                <h3>You "Remembered" Words That Were Never Shown:</h3>
                <div id="lureList"></div>
            </div>

            <div class="science-section">
                <h3>Your Results vs. Classic Research</h3>
                <div class="comparison-chart">
                    <div class="bar-chart">
                        <div class="bar-row">
                            <div class="bar-label">Your Lure Rate:</div>
                            <div class="bar-container">
                                <div class="bar-fill" id="yourLureBar" style="background: var(--terracotta); width: 0%"></div>
                                <span class="bar-value" id="yourLureValue">0%</span>
                            </div>
                        </div>
                        <div class="bar-row">
                            <div class="bar-label">Roediger & McDermott (1995):</div>
                            <div class="bar-container">
                                <div class="bar-fill" style="background: var(--moss); width: 40%"></div>
                                <span class="bar-value">40%</span>
                            </div>
                        </div>
                        <div class="bar-row">
                            <div class="bar-label">High Confidence Lures:</div>
                            <div class="bar-container">
                                <div class="bar-fill" id="highConfBar" style="background: var(--earth); width: 0%"></div>
                                <span class="bar-value" id="highConfValue">0%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="science-section">
                <h3>Why Does This Happen?</h3>
                <p>Your memory doesn't store words individually—it stores them in <strong>semantic networks</strong>. When you encode "bed, rest, awake, tired, dream...", you're activating a cluster of interconnected concepts.</p>
                <p>The critical lure ("SLEEP") is the <strong>hub of that network</strong>. It gets activated so strongly by all its associates that your brain can't distinguish between:</p>
                <ul style="margin: 15px 0; padding-left: 25px;">
                    <li>Words you actually saw</li>
                    <li>Words you strongly thought about</li>
                </ul>
                <blockquote>
                    "False recall can exceed 50%, and false recognition can approximate hit rates for correctly studied list items."
                    <br><br>— Roediger & McDermott, 1995
                </blockquote>
            </div>

            <div class="science-section">
                <h3>Real-World Implications</h3>
                <p>The DRM paradigm has profound implications for:</p>
                <ul style="margin: 15px 0; padding-left: 25px;">
                    <li><strong>Eyewitness testimony</strong>: Witnesses confidently "remember" details that fit the narrative but never happened</li>
                    <li><strong>Therapy and recovered memories</strong>: Vivid "memories" can be constructed from suggestion</li>
                    <li><strong>Everyday memory</strong>: You regularly remember events that are composites of actual and inferred information</li>
                </ul>
                <p>Even <strong>warnings about the effect</strong> don't fully protect people from creating false memories.</p>
            </div>

            <div class="btn-group">
                <button class="btn" onclick="resetExperiment()">Try Again</button>
            </div>
        </div>
    </div>

    <script>
        // DRM Word Lists (from Roediger & McDermott, 1995)
        const wordLists = [
            {
                lure: 'SLEEP',
                words: ['bed', 'rest', 'awake', 'tired', 'dream', 'wake', 'snooze', 'blanket', 'doze', 'slumber', 'snore', 'nap']
            },
            {
                lure: 'SWEET',
                words: ['sour', 'candy', 'sugar', 'bitter', 'good', 'taste', 'tooth', 'nice', 'honey', 'soda', 'chocolate', 'heart']
            },
            {
                lure: 'DOCTOR',
                words: ['nurse', 'sick', 'lawyer', 'medicine', 'health', 'hospital', 'dentist', 'physician', 'ill', 'patient', 'office', 'stethoscope']
            }
        ];

        let currentList = 0;
        let currentWord = 0;
        let wordInterval = null;
        let testWords = [];
        let testIndex = 0;
        let responses = [];
        let distractorInterval = null;
        let distractorTime = 30;
        let mathProblems = [];
        let currentMath = 0;

        function startExperiment() {
            currentList = 0;
            currentWord = 0;
            responses = [];
            testWords = [];
            showPhase(2);
            presentList();
        }

        function presentList() {
            document.getElementById('listNumber').textContent = currentList + 1;
            document.getElementById('wordCount').textContent = '0';
            document.getElementById('progressFill').style.width = '0%';
            document.getElementById('currentWord').textContent = 'Get ready...';

            setTimeout(() => {
                currentWord = 0;
                showNextWord();
            }, 1500);
        }

        function showNextWord() {
            const list = wordLists[currentList];

            if (currentWord >= list.words.length) {
                // List complete
                currentList++;
                if (currentList < wordLists.length) {
                    setTimeout(() => {
                        document.getElementById('currentWord').textContent = 'Next list...';
                        setTimeout(presentList, 1500);
                    }, 500);
                } else {
                    // All lists done, start distractor
                    startDistractor();
                }
                return;
            }

            const word = list.words[currentWord].toUpperCase();
            document.getElementById('currentWord').textContent = word;
            document.getElementById('wordCount').textContent = currentWord + 1;
            document.getElementById('progressFill').style.width =
                ((currentWord + 1) / list.words.length * 100) + '%';

            currentWord++;
            setTimeout(showNextWord, 1500);
        }

        function startDistractor() {
            showPhase(3);
            distractorTime = 30;
            generateMathProblems();
            currentMath = 0;
            showMathProblem();

            distractorInterval = setInterval(() => {
                distractorTime--;
                document.getElementById('distractorCountdown').textContent = distractorTime;
                if (distractorTime <= 0) {
                    clearInterval(distractorInterval);
                    prepareTest();
                }
            }, 1000);
        }

        function generateMathProblems() {
            mathProblems = [];
            for (let i = 0; i < 15; i++) {
                const a = Math.floor(Math.random() * 9) + 2;
                const b = Math.floor(Math.random() * 9) + 2;
                mathProblems.push({ problem: `${a} × ${b} = ?`, answer: a * b });
            }
        }

        function showMathProblem() {
            if (currentMath < mathProblems.length) {
                document.getElementById('mathProblem').textContent = mathProblems[currentMath].problem;
                document.getElementById('mathInput').value = '';
                document.getElementById('mathFeedback').textContent = '';
                document.getElementById('mathInput').focus();
            }
        }

        function checkMath() {
            const input = parseInt(document.getElementById('mathInput').value);
            const correct = mathProblems[currentMath].answer;

            if (input === correct) {
                document.getElementById('mathFeedback').textContent = 'Correct!';
                document.getElementById('mathFeedback').style.color = 'var(--moss)';
            } else {
                document.getElementById('mathFeedback').textContent = 'Incorrect, moving on...';
                document.getElementById('mathFeedback').style.color = 'var(--terracotta)';
            }

            currentMath++;
            setTimeout(showMathProblem, 800);
        }

        function prepareTest() {
            // Build test list: 4 targets + 1 lure + 3 distractors per list
            testWords = [];

            wordLists.forEach((list, idx) => {
                // 4 random targets from each list
                const shuffled = [...list.words].sort(() => Math.random() - 0.5);
                for (let i = 0; i < 4; i++) {
                    testWords.push({ word: shuffled[i].toUpperCase(), type: 'target', list: idx });
                }
                // The critical lure
                testWords.push({ word: list.lure, type: 'lure', list: idx });
                // 3 unrelated distractors
            });

            // Add unrelated distractors
            const distractors = ['CHAIR', 'WINDOW', 'PENCIL', 'RIVER', 'MOUNTAIN', 'JACKET', 'PHONE', 'GARDEN', 'KITCHEN'];
            const shuffledD = distractors.sort(() => Math.random() - 0.5);
            for (let i = 0; i < 9; i++) {
                testWords.push({ word: shuffledD[i], type: 'distractor', list: -1 });
            }

            // Shuffle test order
            testWords.sort(() => Math.random() - 0.5);

            testIndex = 0;
            responses = [];
            document.getElementById('testTotal').textContent = testWords.length;
            showPhase(4);
            showTestWord();
        }

        function showTestWord() {
            document.getElementById('testWord').textContent = testWords[testIndex].word;
            document.getElementById('testCount').textContent = testIndex + 1;
        }

        function recordResponse(answer, confidence) {
            responses.push({
                word: testWords[testIndex].word,
                type: testWords[testIndex].type,
                answer: answer,
                confidence: confidence
            });

            testIndex++;
            if (testIndex < testWords.length) {
                showTestWord();
            } else {
                showResults();
            }
        }

        function showResults() {
            // Calculate stats
            const targets = responses.filter(r => r.type === 'target');
            const lures = responses.filter(r => r.type === 'lure');
            const distractors = responses.filter(r => r.type === 'distractor');

            const hitRate = Math.round(targets.filter(r => r.answer === 'yes').length / targets.length * 100);
            const falseAlarmRate = Math.round(distractors.filter(r => r.answer === 'yes').length / distractors.length * 100);
            const lureRate = Math.round(lures.filter(r => r.answer === 'yes').length / lures.length * 100);
            const highConfLure = Math.round(lures.filter(r => r.answer === 'yes' && r.confidence === 'high').length / lures.length * 100);

            document.getElementById('hitRate').textContent = hitRate + '%';
            document.getElementById('falseAlarmRate').textContent = falseAlarmRate + '%';
            document.getElementById('lureRate').textContent = lureRate + '%';

            // Summary
            const lureFalse = lures.filter(r => r.answer === 'yes');
            if (lureFalse.length > 0) {
                document.getElementById('resultsSummary').textContent =
                    `You falsely "remembered" ${lureFalse.length} of 3 critical lure words that were NEVER presented.`;

                // Show lure reveal
                document.getElementById('lureReveal').style.display = 'block';
                const lureListEl = document.getElementById('lureList');
                lureListEl.innerHTML = lureFalse.map(l =>
                    `<div class="lure-word">${l.word} ${l.confidence === 'high' ? '(high confidence!)' : ''}</div>`
                ).join('');
            } else {
                document.getElementById('resultsSummary').textContent =
                    `Impressive! You didn't fall for any critical lures. You're in the minority—only ~50% resist all lures.`;
            }

            // Update comparison chart
            setTimeout(() => {
                document.getElementById('yourLureBar').style.width = lureRate + '%';
                document.getElementById('yourLureValue').textContent = lureRate + '%';
                document.getElementById('highConfBar').style.width = highConfLure + '%';
                document.getElementById('highConfValue').textContent = highConfLure + '%';
            }, 500);

            showPhase(5);
        }

        function showPhase(num) {
            document.querySelectorAll('.experiment-phase').forEach(p => p.classList.remove('active'));
            document.getElementById('phase' + num).classList.add('active');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function resetExperiment() {
            currentList = 0;
            currentWord = 0;
            testIndex = 0;
            responses = [];
            testWords = [];
            if (distractorInterval) clearInterval(distractorInterval);
            showPhase(1);
        }

        // Handle enter key for math input
        document.getElementById('mathInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkMath();
            }
        });
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
