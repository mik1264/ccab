<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Moses Illusion - Semantic Distortions You Won't Notice</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #e8e8e8;
            line-height: 1.7;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        h1 {
            font-size: 2.8em;
            color: #e94560;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            font-size: 1.3em;
            color: #a5b1c2;
            font-style: italic;
        }

        .citation {
            background: rgba(233, 69, 96, 0.1);
            border-left: 4px solid #e94560;
            padding: 20px;
            margin: 30px 0;
            border-radius: 0 10px 10px 0;
        }

        .citation-text {
            font-size: 1.2em;
            font-style: italic;
            color: #f8f8f8;
            margin-bottom: 10px;
        }

        .citation-source {
            color: #a5b1c2;
            font-size: 0.9em;
        }

        .intro-section {
            background: rgba(255, 255, 255, 0.05);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 40px;
        }

        .intro-section h2 {
            color: #e94560;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .intro-section p {
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .highlight {
            color: #e94560;
            font-weight: bold;
        }

        /* Quiz Section */
        .quiz-section {
            background: rgba(255, 255, 255, 0.08);
            padding: 40px;
            border-radius: 20px;
            margin-bottom: 40px;
        }

        .quiz-section h2 {
            color: #4ecca3;
            margin-bottom: 30px;
            text-align: center;
            font-size: 1.8em;
        }

        .quiz-intro {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(78, 204, 163, 0.1);
            border-radius: 10px;
        }

        .quiz-progress {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 30px;
        }

        .progress-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .progress-dot.current {
            background: #4ecca3;
            transform: scale(1.3);
        }

        .progress-dot.answered {
            background: #e94560;
        }

        .progress-dot.detected {
            background: #4ecca3;
        }

        .question-card {
            background: rgba(0, 0, 0, 0.3);
            padding: 40px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }

        .question-number {
            font-size: 0.9em;
            color: #a5b1c2;
            margin-bottom: 10px;
        }

        .question-text {
            font-size: 1.5em;
            line-height: 1.6;
            margin-bottom: 30px;
            color: #fff;
        }

        .distorted-word {
            color: inherit;
            /* The distortion is NOT visually highlighted - that's the point! */
        }

        .answer-input-container {
            margin-bottom: 20px;
        }

        .answer-input {
            width: 100%;
            max-width: 400px;
            padding: 15px 20px;
            font-size: 1.2em;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            text-align: center;
            outline: none;
            transition: all 0.3s ease;
        }

        .answer-input:focus {
            border-color: #4ecca3;
            background: rgba(255, 255, 255, 0.15);
        }

        .answer-input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 15px 40px;
            font-size: 1.1em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4ecca3, #38b88a);
            color: #1a1a2e;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(78, 204, 163, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .btn-detect {
            background: linear-gradient(135deg, #e94560, #c73e54);
            color: #fff;
        }

        .btn-detect:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(233, 69, 96, 0.4);
        }

        .feedback {
            margin-top: 30px;
            padding: 25px;
            border-radius: 15px;
            display: none;
        }

        .feedback.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .feedback.fell-for-it {
            background: rgba(233, 69, 96, 0.2);
            border: 2px solid #e94560;
        }

        .feedback.detected {
            background: rgba(78, 204, 163, 0.2);
            border: 2px solid #4ecca3;
        }

        .feedback h3 {
            font-size: 1.4em;
            margin-bottom: 15px;
        }

        .feedback.fell-for-it h3 {
            color: #e94560;
        }

        .feedback.detected h3 {
            color: #4ecca3;
        }

        .correction {
            font-size: 1.1em;
            margin-bottom: 15px;
        }

        .wrong-word {
            color: #e94560;
            text-decoration: line-through;
        }

        .right-word {
            color: #4ecca3;
            font-weight: bold;
        }

        .similarity-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            margin-top: 10px;
        }

        .similarity-high {
            background: #e94560;
            color: #fff;
        }

        .similarity-medium {
            background: #f39c12;
            color: #1a1a2e;
        }

        .similarity-low {
            background: #4ecca3;
            color: #1a1a2e;
        }

        /* Results Section */
        .results-section {
            display: none;
            background: rgba(255, 255, 255, 0.08);
            padding: 40px;
            border-radius: 20px;
            margin-bottom: 40px;
        }

        .results-section.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .results-section h2 {
            color: #e94560;
            margin-bottom: 30px;
            text-align: center;
            font-size: 1.8em;
        }

        .overall-score {
            text-align: center;
            padding: 30px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .score-number {
            font-size: 4em;
            font-weight: bold;
            color: #e94560;
        }

        .score-label {
            font-size: 1.2em;
            color: #a5b1c2;
        }

        .score-interpretation {
            margin-top: 15px;
            font-size: 1.1em;
            color: #fff;
        }

        .breakdown-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .breakdown-card {
            background: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .breakdown-card h4 {
            font-size: 0.9em;
            color: #a5b1c2;
            margin-bottom: 10px;
        }

        .breakdown-stat {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .breakdown-card.high .breakdown-stat { color: #e94560; }
        .breakdown-card.medium .breakdown-stat { color: #f39c12; }
        .breakdown-card.low .breakdown-stat { color: #4ecca3; }

        .breakdown-detail {
            font-size: 0.9em;
            color: #a5b1c2;
        }

        /* Chart */
        .chart-container {
            background: rgba(0, 0, 0, 0.3);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .chart-title {
            text-align: center;
            color: #fff;
            margin-bottom: 20px;
            font-size: 1.2em;
        }

        .bar-chart {
            display: flex;
            justify-content: space-around;
            align-items: flex-end;
            height: 200px;
            padding: 20px 0;
        }

        .bar-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
        }

        .bar {
            width: 60px;
            border-radius: 5px 5px 0 0;
            transition: height 1s ease;
            position: relative;
        }

        .bar-high {
            background: linear-gradient(180deg, #e94560, #c73e54);
        }

        .bar-medium {
            background: linear-gradient(180deg, #f39c12, #d68910);
        }

        .bar-low {
            background: linear-gradient(180deg, #4ecca3, #38b88a);
        }

        .bar-label {
            margin-top: 10px;
            font-size: 0.9em;
            color: #a5b1c2;
            text-align: center;
        }

        .bar-value {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-weight: bold;
            color: #fff;
        }

        /* Research Section */
        .research-section {
            background: rgba(255, 255, 255, 0.05);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 40px;
        }

        .research-section h2 {
            color: #4ecca3;
            margin-bottom: 20px;
            font-size: 1.6em;
        }

        .research-section h3 {
            color: #e94560;
            margin: 25px 0 15px;
            font-size: 1.3em;
        }

        .semantic-network {
            background: rgba(0, 0, 0, 0.3);
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
        }

        .network-title {
            text-align: center;
            color: #fff;
            margin-bottom: 20px;
        }

        #networkCanvas {
            display: block;
            margin: 0 auto;
            border-radius: 10px;
        }

        .key-findings {
            display: grid;
            gap: 15px;
            margin: 20px 0;
        }

        .finding {
            display: flex;
            gap: 15px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }

        .finding-icon {
            font-size: 1.5em;
            color: #e94560;
        }

        .finding-text {
            flex: 1;
        }

        /* Mechanism Section */
        .mechanism-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .mechanism-card {
            background: rgba(0, 0, 0, 0.3);
            padding: 25px;
            border-radius: 15px;
            border-left: 4px solid #e94560;
        }

        .mechanism-card h4 {
            color: #e94560;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .mechanism-card p {
            font-size: 0.95em;
            color: #a5b1c2;
        }

        /* Real World Examples */
        .examples-section {
            background: rgba(233, 69, 96, 0.1);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 40px;
        }

        .examples-section h2 {
            color: #e94560;
            margin-bottom: 20px;
            font-size: 1.6em;
        }

        .example-list {
            display: grid;
            gap: 15px;
        }

        .example-item {
            display: flex;
            gap: 15px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }

        .example-icon {
            font-size: 2em;
        }

        .example-content h4 {
            color: #4ecca3;
            margin-bottom: 5px;
        }

        .example-content p {
            font-size: 0.95em;
            color: #a5b1c2;
        }

        /* Debiasing */
        .debiasing-section {
            background: rgba(78, 204, 163, 0.1);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 40px;
        }

        .debiasing-section h2 {
            color: #4ecca3;
            margin-bottom: 20px;
            font-size: 1.6em;
        }

        .strategy-list {
            display: grid;
            gap: 15px;
        }

        .strategy-item {
            display: flex;
            gap: 15px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }

        .strategy-number {
            width: 40px;
            height: 40px;
            background: #4ecca3;
            color: #1a1a2e;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        .strategy-content h4 {
            color: #fff;
            margin-bottom: 5px;
        }

        .strategy-content p {
            font-size: 0.95em;
            color: #a5b1c2;
        }

        /* Back link */
        .back-link {
            display: inline-block;
            color: #4ecca3;
            text-decoration: none;
            margin-bottom: 20px;
            font-size: 1.1em;
            transition: color 0.3s ease;
        }

        .back-link:hover {
            color: #e94560;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 600px) {
            h1 { font-size: 2em; }
            .question-text { font-size: 1.2em; }
            .bar { width: 40px; }
            .container { padding: 20px 15px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">‚Üê Back to Paradoxes</a>

        <header>
            <h1>The Moses Illusion</h1>
            <p class="subtitle">Why You Don't Notice Obvious Errors in What You Read</p>
        </header>

        <div class="citation">
            <p class="citation-text">"How many animals of each kind did Moses take on the Ark?"</p>
            <p class="citation-source">‚Äî Most people answer "two" without noticing it was <em>Noah</em>, not Moses</p>
        </div>

        <div class="intro-section">
            <h2>Your Knowledge Doesn't Protect You</h2>
            <p>
                In 1981, psychologists <span class="highlight">Thomas Erickson and Mark Mattson</span> discovered something
                troubling: people routinely answer questions containing obvious factual errors ‚Äî even when they
                <em>know</em> the correct information.
            </p>
            <p>
                When asked "How many animals of each kind did Moses take on the Ark?", <span class="highlight">over 50%
                of participants</span> answer "two" without noticing the error. Everyone knows Moses didn't build the
                Ark ‚Äî Noah did. But our brains don't catch the mistake.
            </p>
            <p>
                This is the <span class="highlight">Moses Illusion</span>: a demonstration that having knowledge and
                <em>using</em> knowledge are not the same thing. Your semantic memory is not automatically fact-checked
                against incoming information.
            </p>
        </div>

        <div class="quiz-section">
            <h2>Test Your Distortion Detection</h2>
            <div class="quiz-intro">
                <p>You'll see 12 questions. Some contain factual distortions, some don't.</p>
                <p>Answer normally OR click "This is wrong!" if you spot an error.</p>
            </div>

            <div class="quiz-progress" id="progressDots"></div>

            <div class="question-card" id="questionCard">
                <div class="question-number" id="questionNumber">Question 1 of 12</div>
                <div class="question-text" id="questionText">Loading question...</div>

                <div class="answer-input-container">
                    <input type="text" class="answer-input" id="answerInput" placeholder="Type your answer...">
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary" id="submitBtn" onclick="submitAnswer()">Submit Answer</button>
                    <button class="btn btn-detect" id="detectBtn" onclick="detectDistortion()">
                        üö® This is Wrong!
                    </button>
                </div>

                <div class="feedback" id="feedback">
                    <h3 id="feedbackTitle"></h3>
                    <p class="correction" id="feedbackCorrection"></p>
                    <p id="feedbackExplanation"></p>
                    <span class="similarity-badge" id="similarityBadge"></span>
                </div>
            </div>

            <div class="action-buttons" id="nextContainer" style="display: none;">
                <button class="btn btn-primary" onclick="nextQuestion()">Next Question ‚Üí</button>
            </div>
        </div>

        <div class="results-section" id="resultsSection">
            <h2>Your Results</h2>

            <div class="overall-score">
                <div class="score-number" id="scoreNumber">0/0</div>
                <div class="score-label">distortions you fell for</div>
                <div class="score-interpretation" id="scoreInterpretation"></div>
            </div>

            <div class="breakdown-grid" id="breakdownGrid"></div>

            <div class="chart-container">
                <div class="chart-title">Detection Rate by Semantic Similarity</div>
                <div class="bar-chart" id="barChart"></div>
            </div>

            <button class="btn btn-primary" onclick="restartQuiz()" style="display: block; margin: 20px auto;">
                Try Again
            </button>
        </div>

        <div class="research-section">
            <h2>The Science of Semantic Illusions</h2>

            <p>
                Erickson and Mattson's groundbreaking 1981 study revealed that the Moses Illusion isn't about
                carelessness or ignorance ‚Äî it's about how our brains process meaning.
            </p>

            <h3>Why "Moses" Works But "Nixon" Doesn't</h3>
            <p>
                The key is <span class="highlight">semantic similarity</span>. Moses and Noah share many features
                in our mental representation: both are Biblical figures, both received divine messages, both are
                associated with water/flooding, both have similar phonological patterns (two syllables, same vowel stress).
            </p>

            <div class="semantic-network">
                <div class="network-title">Semantic Network: Why Similar Names Slip By</div>
                <canvas id="networkCanvas" width="600" height="350"></canvas>
            </div>

            <p>
                When researchers replaced "Moses" with "Nixon" ‚Äî a name with no semantic connection to biblical
                arks ‚Äî <span class="highlight">the illusion disappeared entirely</span>. Nobody tries to answer
                "How many animals did Nixon take on the Ark?"
            </p>

            <h3>Key Research Findings</h3>
            <div class="key-findings">
                <div class="finding">
                    <span class="finding-icon">üìä</span>
                    <div class="finding-text">
                        <strong>52.3% illusion rate</strong> ‚Äî More than half of participants fell for Moses-type distortions
                        even when warned that some questions might be distorted.
                    </div>
                </div>
                <div class="finding">
                    <span class="finding-icon">üé§</span>
                    <div class="finding-text">
                        <strong>Reading aloud doesn't help</strong> ‚Äî The illusion persists even when participants
                        must read questions out loud, ruling out simple skimming.
                    </div>
                </div>
                <div class="finding">
                    <span class="finding-icon">üéì</span>
                    <div class="finding-text">
                        <strong>Expertise reduces but doesn't eliminate</strong> ‚Äî Biology grad students still fall for
                        "Water contains two atoms of helium..." even though they know better.
                    </div>
                </div>
                <div class="finding">
                    <span class="finding-icon">‚úèÔ∏è</span>
                    <div class="finding-text">
                        <strong>Bolding errors doesn't work</strong> ‚Äî Even when the distorted word is bolded and
                        underlined, many participants still miss it.
                    </div>
                </div>
            </div>

            <h3>Why Does This Happen?</h3>
            <div class="mechanism-cards">
                <div class="mechanism-card">
                    <h4>Partial Matching</h4>
                    <p>Your brain matches incoming words to concepts based on features, not exact identity.
                    "Moses" activates enough "Biblical-patriarch-water-story" features to pass.</p>
                </div>
                <div class="mechanism-card">
                    <h4>Good-Enough Processing</h4>
                    <p>We don't fully parse every sentence. We extract "good enough" meaning and move on.
                    Detailed fact-checking is computationally expensive.</p>
                </div>
                <div class="mechanism-card">
                    <h4>Knowledge Neglect</h4>
                    <p>Having knowledge stored in memory doesn't mean it's automatically consulted.
                    Recognition and recall are separate processes.</p>
                </div>
                <div class="mechanism-card">
                    <h4>Predictive Processing</h4>
                    <p>The brain predicts upcoming content. "Biblical ark story" primes related concepts,
                    making Moses feel "right enough" to pass through.</p>
                </div>
            </div>
        </div>

        <div class="examples-section">
            <h2>Real-World Implications</h2>
            <div class="example-list">
                <div class="example-item">
                    <span class="example-icon">üì∞</span>
                    <div class="example-content">
                        <h4>Misinformation Spread</h4>
                        <p>False claims that share features with true claims slip past our mental fact-checkers.
                        "Scientists at Harvard found..." activates trust even if the claim is fabricated.</p>
                    </div>
                </div>
                <div class="example-item">
                    <span class="example-icon">‚öñÔ∏è</span>
                    <div class="example-content">
                        <h4>Legal Testimony</h4>
                        <p>Leading questions with subtle distortions can alter witness memories.
                        "Did you see THE broken headlight?" vs "Did you see A broken headlight?" changes recall.</p>
                    </div>
                </div>
                <div class="example-item">
                    <span class="example-icon">üìö</span>
                    <div class="example-content">
                        <h4>Education & Learning</h4>
                        <p>Textbook errors that use semantically similar terms often go unnoticed by students
                        AND teachers, propagating misconceptions.</p>
                    </div>
                </div>
                <div class="example-item">
                    <span class="example-icon">üó≥Ô∏è</span>
                    <div class="example-content">
                        <h4>Political Discourse</h4>
                        <p>Politicians can make false claims using language patterns that match true statements.
                        The semantic similarity helps falsehoods "feel right."</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="debiasing-section">
            <h2>How to Catch More Errors</h2>
            <div class="strategy-list">
                <div class="strategy-item">
                    <span class="strategy-number">1</span>
                    <div class="strategy-content">
                        <h4>Slow Down for Key Claims</h4>
                        <p>When reading important information, deliberately pause and ask: "Who specifically?
                        What exactly? Where precisely?" Force your brain to match specifics, not features.</p>
                    </div>
                </div>
                <div class="strategy-item">
                    <span class="strategy-number">2</span>
                    <div class="strategy-content">
                        <h4>Read Adversarially</h4>
                        <p>Assume the text contains errors. This mindset activates more careful processing.
                        Proofreaders use this technique professionally.</p>
                    </div>
                </div>
                <div class="strategy-item">
                    <span class="strategy-number">3</span>
                    <div class="strategy-content">
                        <h4>Verbalize Names and Numbers</h4>
                        <p>When you encounter proper nouns or statistics, mentally (or vocally) repeat them.
                        This forces deeper encoding and comparison with stored knowledge.</p>
                    </div>
                </div>
                <div class="strategy-item">
                    <span class="strategy-number">4</span>
                    <div class="strategy-content">
                        <h4>Build Domain Expertise</h4>
                        <p>Experts catch more errors in their field ‚Äî not perfectly, but better. Deep knowledge
                        creates more precise semantic categories that reject impostors.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="citation">
            <p class="citation-text">"The Moses Illusion demonstrates that we often do not notice incorrect information
            in what we read, even when we possess the relevant knowledge to detect the error."</p>
            <p class="citation-source">‚Äî Park & Reder (2004), Cambridge Handbook of Thinking and Reasoning</p>
        </div>
    </div>

    <script>
        // Quiz questions with varying semantic similarity levels
        const questions = [
            // High similarity (likely to fall for)
            {
                text: "How many animals of each kind did Moses take on the Ark?",
                distortion: true,
                wrong: "Moses",
                right: "Noah",
                similarity: "high",
                explanation: "Moses and Noah share many semantic features: Biblical patriarchs, divine communication, water-related stories."
            },
            {
                text: "In what country was the ancient Egyptian city of Cairo founded?",
                distortion: false,
                similarity: "none",
                explanation: "This is a correctly formed question ‚Äî Cairo is indeed in Egypt."
            },
            {
                text: "How many pairs of chromosomes does a healthy dog cell contain?",
                distortion: false,
                similarity: "none",
                explanation: "Correct question ‚Äî dogs have 39 pairs of chromosomes."
            },
            {
                text: "What was the name of the ship that Columbus sailed on to discover the Americas?",
                distortion: true,
                wrong: "Columbus",
                right: "Columbus (but he had THREE ships)",
                similarity: "medium",
                explanation: "The phrasing suggests one ship, but Columbus had three: Ni√±a, Pinta, and Santa Mar√≠a."
            },
            // High similarity
            {
                text: "In the Biblical story, what did Adam eat from the Tree of Wisdom?",
                distortion: true,
                wrong: "Wisdom",
                right: "Knowledge",
                similarity: "high",
                explanation: "It was the 'Tree of Knowledge of Good and Evil' ‚Äî wisdom and knowledge share semantic overlap."
            },
            // Medium similarity
            {
                text: "What was the nationality of the first person to set foot on Mars, Neil Armstrong?",
                distortion: true,
                wrong: "Mars",
                right: "the Moon",
                similarity: "medium",
                explanation: "Armstrong walked on the Moon, not Mars. Both are celestial bodies we've sent missions to."
            },
            // Control - no distortion
            {
                text: "What is the capital city of France?",
                distortion: false,
                similarity: "none",
                explanation: "This is a correctly formed question ‚Äî Paris is the capital of France."
            },
            // High similarity
            {
                text: "How many continents are on Earth according to the model used by the United Nations?",
                distortion: false,
                similarity: "none",
                explanation: "Correct question ‚Äî the UN recognizes 7 continents."
            },
            // Medium similarity
            {
                text: "In which sport did Michael Jordan win multiple Wimbledon titles?",
                distortion: true,
                wrong: "Michael Jordan",
                right: "Michael Jordan never played tennis",
                similarity: "low",
                explanation: "Jordan was a basketball player, not tennis. But 'Michael' + 'sports champion' has some overlap."
            },
            // High similarity
            {
                text: "Water is made up of two atoms of helium and one atom of what?",
                distortion: true,
                wrong: "helium",
                right: "hydrogen",
                similarity: "high",
                explanation: "Helium and hydrogen share phonological similarity (both start with 'h') and are both light elements."
            },
            // Low similarity - should catch
            {
                text: "Where should the survivors of an airplane crash be buried?",
                distortion: true,
                wrong: "survivors",
                right: "Survivors don't need to be buried!",
                similarity: "low",
                explanation: "The word 'survivors' contradicts 'buried' ‚Äî but crash contexts prime death-related processing."
            },
            // Control
            {
                text: "How many days are in a leap year?",
                distortion: false,
                similarity: "none",
                explanation: "Correct question ‚Äî a leap year has 366 days."
            }
        ];

        let currentQuestion = 0;
        let results = {
            high: { total: 0, detected: 0 },
            medium: { total: 0, detected: 0 },
            low: { total: 0, detected: 0 },
            none: { total: 0, detected: 0 },
            fellFor: 0,
            totalDistortions: 0
        };

        // Shuffle questions
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Initialize
        function initQuiz() {
            shuffleArray(questions);
            currentQuestion = 0;
            results = {
                high: { total: 0, detected: 0 },
                medium: { total: 0, detected: 0 },
                low: { total: 0, detected: 0 },
                none: { total: 0, detected: 0 },
                fellFor: 0,
                totalDistortions: 0
            };

            // Count distortions by type
            questions.forEach(q => {
                if (q.distortion) {
                    results[q.similarity].total++;
                    results.totalDistortions++;
                }
            });

            // Create progress dots
            const dotsContainer = document.getElementById('progressDots');
            dotsContainer.innerHTML = '';
            for (let i = 0; i < questions.length; i++) {
                const dot = document.createElement('div');
                dot.className = 'progress-dot';
                if (i === 0) dot.classList.add('current');
                dotsContainer.appendChild(dot);
            }

            displayQuestion();
        }

        function displayQuestion() {
            const q = questions[currentQuestion];
            document.getElementById('questionNumber').textContent = `Question ${currentQuestion + 1} of ${questions.length}`;
            document.getElementById('questionText').textContent = q.text;
            document.getElementById('answerInput').value = '';
            document.getElementById('feedback').classList.remove('show', 'fell-for-it', 'detected');
            document.getElementById('nextContainer').style.display = 'none';
            document.getElementById('submitBtn').style.display = 'inline-block';
            document.getElementById('detectBtn').style.display = 'inline-block';
            document.getElementById('answerInput').disabled = false;
            document.getElementById('answerInput').focus();

            // Update progress dots
            const dots = document.querySelectorAll('.progress-dot');
            dots.forEach((dot, i) => {
                dot.classList.remove('current');
                if (i === currentQuestion) dot.classList.add('current');
            });
        }

        function submitAnswer() {
            const q = questions[currentQuestion];
            const feedback = document.getElementById('feedback');
            const answer = document.getElementById('answerInput').value.trim();

            if (!answer && q.distortion) {
                // Empty answer on distorted question - might have noticed but not clicked
            }

            document.getElementById('submitBtn').style.display = 'none';
            document.getElementById('detectBtn').style.display = 'none';
            document.getElementById('answerInput').disabled = true;

            if (q.distortion) {
                // They fell for it
                results.fellFor++;
                feedback.classList.add('fell-for-it', 'show');
                document.getElementById('feedbackTitle').textContent = "You Fell For It! üé≠";
                document.getElementById('feedbackCorrection').innerHTML =
                    `The question contained an error: "<span class="wrong-word">${q.wrong}</span>" should be "<span class="right-word">${q.right}</span>"`;

                // Mark dot as "fell for it"
                const dots = document.querySelectorAll('.progress-dot');
                dots[currentQuestion].classList.add('answered');
            } else {
                // Correctly answered a non-distorted question
                feedback.classList.add('detected', 'show');
                document.getElementById('feedbackTitle').textContent = "Correct! ‚úì";
                document.getElementById('feedbackCorrection').textContent = "This question had no distortion.";

                const dots = document.querySelectorAll('.progress-dot');
                dots[currentQuestion].classList.add('detected');
            }

            document.getElementById('feedbackExplanation').textContent = q.explanation;

            const badge = document.getElementById('similarityBadge');
            if (q.distortion) {
                badge.textContent = `${q.similarity.charAt(0).toUpperCase() + q.similarity.slice(1)} Semantic Similarity`;
                badge.className = `similarity-badge similarity-${q.similarity}`;
                badge.style.display = 'inline-block';
            } else {
                badge.style.display = 'none';
            }

            document.getElementById('nextContainer').style.display = 'flex';
        }

        function detectDistortion() {
            const q = questions[currentQuestion];
            const feedback = document.getElementById('feedback');

            document.getElementById('submitBtn').style.display = 'none';
            document.getElementById('detectBtn').style.display = 'none';
            document.getElementById('answerInput').disabled = true;

            if (q.distortion) {
                // Correctly detected!
                results[q.similarity].detected++;
                feedback.classList.add('detected', 'show');
                document.getElementById('feedbackTitle').textContent = "Sharp Eye! üëÅÔ∏è";
                document.getElementById('feedbackCorrection').innerHTML =
                    `You caught it! "<span class="wrong-word">${q.wrong}</span>" should be "<span class="right-word">${q.right}</span>"`;

                const dots = document.querySelectorAll('.progress-dot');
                dots[currentQuestion].classList.add('detected');
            } else {
                // False alarm
                feedback.classList.add('fell-for-it', 'show');
                document.getElementById('feedbackTitle').textContent = "False Alarm! üö´";
                document.getElementById('feedbackCorrection').textContent = "This question was actually correct.";

                const dots = document.querySelectorAll('.progress-dot');
                dots[currentQuestion].classList.add('answered');
            }

            document.getElementById('feedbackExplanation').textContent = q.explanation;

            const badge = document.getElementById('similarityBadge');
            if (q.distortion) {
                badge.textContent = `${q.similarity.charAt(0).toUpperCase() + q.similarity.slice(1)} Semantic Similarity`;
                badge.className = `similarity-badge similarity-${q.similarity}`;
                badge.style.display = 'inline-block';
            } else {
                badge.style.display = 'none';
            }

            document.getElementById('nextContainer').style.display = 'flex';
        }

        function nextQuestion() {
            currentQuestion++;
            if (currentQuestion >= questions.length) {
                showResults();
            } else {
                displayQuestion();
            }
        }

        function showResults() {
            document.querySelector('.quiz-section').style.display = 'none';
            const resultsSection = document.getElementById('resultsSection');
            resultsSection.classList.add('show');

            // Overall score
            document.getElementById('scoreNumber').textContent = `${results.fellFor}/${results.totalDistortions}`;

            const percentage = results.totalDistortions > 0 ?
                Math.round((results.fellFor / results.totalDistortions) * 100) : 0;

            let interpretation = "";
            if (percentage >= 70) {
                interpretation = "You're highly susceptible ‚Äî this is completely normal! The Moses Illusion affects almost everyone.";
            } else if (percentage >= 40) {
                interpretation = "Moderate susceptibility ‚Äî you caught some but missed others. Typical performance.";
            } else if (percentage > 0) {
                interpretation = "Good detection rate! You're more vigilant than most, though still not immune.";
            } else {
                interpretation = "Perfect detection! Impressive ‚Äî but rare. Were you reading extra carefully?";
            }
            document.getElementById('scoreInterpretation').textContent = interpretation;

            // Breakdown by similarity
            const breakdownGrid = document.getElementById('breakdownGrid');
            breakdownGrid.innerHTML = '';

            const categories = [
                { key: 'high', label: 'High Similarity', color: 'high' },
                { key: 'medium', label: 'Medium Similarity', color: 'medium' },
                { key: 'low', label: 'Low Similarity', color: 'low' }
            ];

            categories.forEach(cat => {
                if (results[cat.key].total > 0) {
                    const missed = results[cat.key].total - results[cat.key].detected;
                    const card = document.createElement('div');
                    card.className = `breakdown-card ${cat.color}`;
                    card.innerHTML = `
                        <h4>${cat.label}</h4>
                        <div class="breakdown-stat">${missed}/${results[cat.key].total}</div>
                        <div class="breakdown-detail">distortions missed</div>
                    `;
                    breakdownGrid.appendChild(card);
                }
            });

            // Bar chart
            const barChart = document.getElementById('barChart');
            barChart.innerHTML = '';

            categories.forEach(cat => {
                if (results[cat.key].total > 0) {
                    const detectionRate = Math.round((results[cat.key].detected / results[cat.key].total) * 100);
                    const group = document.createElement('div');
                    group.className = 'bar-group';
                    group.innerHTML = `
                        <div class="bar bar-${cat.color}" style="height: ${Math.max(detectionRate, 5)}px;">
                            <span class="bar-value">${detectionRate}%</span>
                        </div>
                        <div class="bar-label">${cat.label}</div>
                    `;
                    barChart.appendChild(group);
                }
            });
        }

        function restartQuiz() {
            document.getElementById('resultsSection').classList.remove('show');
            document.querySelector('.quiz-section').style.display = 'block';
            initQuiz();
        }

        // Semantic Network Visualization
        function drawSemanticNetwork() {
            const canvas = document.getElementById('networkCanvas');
            const ctx = canvas.getContext('2d');

            // Nodes
            const nodes = [
                { x: 300, y: 60, label: 'Noah', color: '#4ecca3', r: 35 },
                { x: 150, y: 150, label: 'Moses', color: '#e94560', r: 30 },
                { x: 450, y: 150, label: 'Adam', color: '#f39c12', r: 28 },
                { x: 80, y: 280, label: 'Nixon', color: '#a5b1c2', r: 25 },
                { x: 300, y: 180, label: 'Biblical\nFigure', color: '#8b9dc3', r: 40 },
                { x: 500, y: 280, label: 'Divine\nMessage', color: '#8b9dc3', r: 35 },
                { x: 200, y: 300, label: 'Water\nStory', color: '#8b9dc3', r: 35 },
                { x: 400, y: 50, label: 'Ark', color: '#8b9dc3', r: 30 }
            ];

            // Connections (thicker = stronger semantic link)
            const connections = [
                { from: 0, to: 4, strength: 3 }, // Noah - Biblical
                { from: 0, to: 6, strength: 3 }, // Noah - Water
                { from: 0, to: 7, strength: 3 }, // Noah - Ark
                { from: 0, to: 5, strength: 2 }, // Noah - Divine
                { from: 1, to: 4, strength: 3 }, // Moses - Biblical
                { from: 1, to: 5, strength: 3 }, // Moses - Divine
                { from: 1, to: 6, strength: 2 }, // Moses - Water (Red Sea)
                { from: 2, to: 4, strength: 3 }, // Adam - Biblical
                { from: 2, to: 5, strength: 2 }, // Adam - Divine
                // Nixon has no connections to biblical network
            ];

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw connections
            connections.forEach(conn => {
                const from = nodes[conn.from];
                const to = nodes[conn.to];
                ctx.beginPath();
                ctx.moveTo(from.x, from.y);
                ctx.lineTo(to.x, to.y);
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.2)';
                ctx.lineWidth = conn.strength;
                ctx.stroke();
            });

            // Draw nodes
            nodes.forEach(node => {
                // Glow
                ctx.beginPath();
                ctx.arc(node.x, node.y, node.r + 5, 0, Math.PI * 2);
                ctx.fillStyle = node.color + '33';
                ctx.fill();

                // Node
                ctx.beginPath();
                ctx.arc(node.x, node.y, node.r, 0, Math.PI * 2);
                ctx.fillStyle = node.color;
                ctx.fill();

                // Label
                ctx.fillStyle = '#fff';
                ctx.font = 'bold 11px Georgia';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                const lines = node.label.split('\n');
                lines.forEach((line, i) => {
                    ctx.fillText(line, node.x, node.y + (i - (lines.length-1)/2) * 12);
                });
            });

            // Legend
            ctx.font = '12px Georgia';
            ctx.fillStyle = '#a5b1c2';
            ctx.textAlign = 'left';
            ctx.fillText('‚Ä¢ Green: Correct answer', 30, 330);
            ctx.fillText('‚Ä¢ Red: High similarity impostor', 200, 330);
            ctx.fillText('‚Ä¢ Orange: Medium similarity', 400, 330);
        }

        // Handle Enter key
        document.getElementById('answerInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                submitAnswer();
            }
        });

        // Initialize
        initQuiz();
        drawSemanticNetwork();
    </script>
</body>
</html>
