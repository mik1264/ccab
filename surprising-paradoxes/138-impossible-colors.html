<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Impossible Colors - Surprising Paradoxes</title>
    <style>
        :root {
            --sage: #8A9A5B;
            --moss: #606C38;
            --earth: #DDA15E;
            --cream: #FEFAE0;
            --terracotta: #BC6C25;
            --dark-moss: #3d4423;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito', 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, var(--cream) 0%, #F4F1DE 50%, #EDE8D5 100%);
            min-height: 100vh;
            color: var(--dark-moss);
            line-height: 1.6;
        }

        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            text-decoration: none;
            color: var(--moss);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 100;
            background: rgba(255,255,255,0.9);
            padding: 10px 16px;
            border-radius: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .back-link:hover {
            background: var(--moss);
            color: white;
            transform: translateX(-3px);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 80px 20px 40px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        h1 {
            font-family: 'Lora', Georgia, serif;
            font-size: 2.8rem;
            color: var(--moss);
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.2rem;
            color: var(--terracotta);
            font-style: italic;
        }

        .experiment-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .experiment-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .experiment-header h2 {
            font-family: 'Lora', Georgia, serif;
            color: var(--moss);
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .color-pair-selector {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .pair-btn {
            padding: 12px 24px;
            border: 3px solid #ddd;
            border-radius: 30px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .pair-btn:hover {
            transform: translateY(-2px);
        }

        .pair-btn.active {
            border-color: var(--moss);
            background: var(--moss);
            color: white;
        }

        .pair-btn.red-green {
            background: linear-gradient(90deg, #ff0000 0%, #ff0000 48%, #00ff00 52%, #00ff00 100%);
            color: white;
            text-shadow: 0 1px 3px rgba(0,0,0,0.5);
        }

        .pair-btn.red-green.active {
            box-shadow: 0 0 0 4px var(--moss);
        }

        .pair-btn.blue-yellow {
            background: linear-gradient(90deg, #0000ff 0%, #0000ff 48%, #ffff00 52%, #ffff00 100%);
            color: white;
            text-shadow: 0 1px 3px rgba(0,0,0,0.5);
        }

        .pair-btn.blue-yellow.active {
            box-shadow: 0 0 0 4px var(--moss);
        }

        .viewing-area {
            background: #1a1a1a;
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 25px;
            min-height: 350px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .color-squares {
            display: flex;
            gap: 0;
            margin-bottom: 20px;
        }

        .color-square {
            width: 180px;
            height: 180px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .crosshair {
            font-size: 2.5rem;
            font-weight: bold;
            color: white;
            text-shadow: 0 0 10px rgba(0,0,0,0.8), 0 0 20px rgba(0,0,0,0.5);
            user-select: none;
        }

        .left-square {
            background: #ff0000;
            border-radius: 10px 0 0 10px;
        }

        .right-square {
            background: #00ff00;
            border-radius: 0 10px 10px 0;
        }

        .instruction-text {
            color: #aaa;
            text-align: center;
            font-size: 0.95rem;
            max-width: 400px;
        }

        .instruction-text strong {
            color: #fff;
        }

        .mode-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .mode-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--sage);
            color: white;
        }

        .mode-btn:hover {
            background: var(--moss);
        }

        .mode-btn.active {
            background: var(--terracotta);
        }

        .size-control {
            display: flex;
            align-items: center;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
        }

        .size-control label {
            color: var(--moss);
            font-weight: 600;
        }

        .size-control input[type="range"] {
            width: 150px;
            accent-color: var(--moss);
        }

        .size-value {
            font-family: monospace;
            color: var(--terracotta);
            min-width: 50px;
        }

        .tips-box {
            background: linear-gradient(135deg, #fff9e6, #fff5d6);
            border: 2px solid var(--earth);
            border-radius: 15px;
            padding: 20px;
        }

        .tips-box h3 {
            color: var(--moss);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tips-box ol {
            margin-left: 25px;
            color: #555;
        }

        .tips-box li {
            margin-bottom: 10px;
        }

        .paradox-box {
            background: linear-gradient(135deg, var(--moss) 0%, var(--dark-moss) 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .paradox-box h3 {
            font-size: 1.3rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .paradox-box p {
            opacity: 0.95;
            line-height: 1.7;
        }

        .section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05);
        }

        .section h2 {
            font-family: 'Lora', Georgia, serif;
            color: var(--moss);
            font-size: 1.6rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .opponent-diagram {
            display: flex;
            justify-content: center;
            gap: 40px;
            flex-wrap: wrap;
            margin: 25px 0;
        }

        .opponent-channel {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
            min-width: 200px;
        }

        .opponent-channel h4 {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: var(--moss);
        }

        .color-bar {
            height: 40px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 15px;
            color: white;
            font-weight: 700;
            font-size: 0.9rem;
            text-shadow: 0 1px 3px rgba(0,0,0,0.3);
            margin-bottom: 10px;
        }

        .rg-bar {
            background: linear-gradient(90deg, #ff0000, #888, #00ff00);
        }

        .by-bar {
            background: linear-gradient(90deg, #0000ff, #888, #ffff00);
        }

        .bw-bar {
            background: linear-gradient(90deg, #000, #888, #fff);
        }

        .channel-desc {
            font-size: 0.85rem;
            color: #666;
        }

        .impossible-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .impossible-card {
            background: linear-gradient(135deg, #f8f9fa, #fff);
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }

        .impossible-card h4 {
            color: var(--terracotta);
            margin-bottom: 10px;
        }

        .color-swatch {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin: 15px auto;
            border: 4px solid white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .swatch-reddish-green {
            background: linear-gradient(45deg, #ff0000 0%, #ff0000 25%, #888800 50%, #00ff00 75%, #00ff00 100%);
            animation: shimmer 3s ease-in-out infinite;
        }

        .swatch-yellowish-blue {
            background: linear-gradient(45deg, #ffff00 0%, #ffff00 25%, #888888 50%, #0000ff 75%, #0000ff 100%);
            animation: shimmer 3s ease-in-out infinite;
            animation-delay: -1.5s;
        }

        .swatch-stygian-blue {
            background: radial-gradient(circle, #000033 0%, #000011 50%, #000000 100%);
            box-shadow: 0 4px 15px rgba(0,0,100,0.4), inset 0 0 30px rgba(0,0,100,0.3);
        }

        .swatch-self-luminous {
            background: radial-gradient(circle, #ff6600 0%, #cc3300 50%, #661100 100%);
            box-shadow: 0 0 20px rgba(255,100,0,0.5), 0 0 40px rgba(255,100,0,0.3);
        }

        @keyframes shimmer {
            0%, 100% { filter: hue-rotate(0deg); }
            50% { filter: hue-rotate(20deg); }
        }

        .impossible-card p {
            color: #555;
            font-size: 0.9rem;
        }

        .history-section {
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .history-section h2 {
            color: var(--moss);
            margin-bottom: 15px;
        }

        .timeline {
            position: relative;
            padding-left: 30px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 0;
            bottom: 0;
            width: 3px;
            background: var(--sage);
            border-radius: 3px;
        }

        .timeline-item {
            position: relative;
            margin-bottom: 20px;
            padding-left: 20px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -26px;
            top: 5px;
            width: 14px;
            height: 14px;
            background: var(--terracotta);
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .timeline-year {
            font-weight: 700;
            color: var(--moss);
            font-size: 1.1rem;
        }

        .timeline-text {
            color: #555;
            margin-top: 5px;
        }

        .controversy-box {
            background: linear-gradient(135deg, #fef2f2, #fee2e2);
            border: 2px solid #fca5a5;
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }

        .controversy-box h4 {
            color: #dc2626;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .controversy-box p {
            color: #7f1d1d;
            font-size: 0.95rem;
        }

        .quote-box {
            background: linear-gradient(135deg, var(--earth), #c9a658);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            margin-top: 30px;
            font-style: italic;
            font-size: 1.1rem;
        }

        .quote-box .attribution {
            margin-top: 15px;
            font-style: normal;
            font-weight: 700;
            opacity: 0.9;
        }

        .report-section {
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
            border: 2px solid var(--sage);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }

        .report-section h4 {
            color: var(--moss);
            margin-bottom: 15px;
        }

        .report-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .report-btn {
            padding: 10px 20px;
            border: 2px solid var(--sage);
            border-radius: 20px;
            background: white;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .report-btn:hover {
            background: var(--sage);
            color: white;
        }

        .report-btn.selected {
            background: var(--moss);
            border-color: var(--moss);
            color: white;
        }

        .results-display {
            margin-top: 15px;
            padding: 15px;
            background: white;
            border-radius: 10px;
            display: none;
        }

        .results-display.visible {
            display: block;
        }

        .result-bar {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }

        .result-label {
            width: 120px;
            font-size: 0.85rem;
            color: #555;
        }

        .result-fill {
            height: 20px;
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .result-pct {
            margin-left: 10px;
            font-weight: 600;
            color: var(--moss);
        }

        @media (max-width: 600px) {
            h1 { font-size: 2rem; }
            .container { padding: 70px 15px 30px; }
            .color-square { width: 130px; height: 130px; }
            .crosshair { font-size: 2rem; }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600;700&family=Nunito:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back to Paradoxes</a>

    <div class="container">
        <header>
            <h1>Impossible Colors</h1>
            <p class="subtitle">Colors your brain says can't exist‚Äîbut might</p>
        </header>

        <div class="experiment-container">
            <div class="experiment-header">
                <h2>Try to See the Impossible</h2>
                <p>Cross your eyes to overlap the two + signs. Hold your gaze steady...</p>
            </div>

            <div class="color-pair-selector">
                <button class="pair-btn red-green active" id="btnRedGreen">Red-Green</button>
                <button class="pair-btn blue-yellow" id="btnBlueYellow">Blue-Yellow</button>
            </div>

            <div class="viewing-area" id="viewingArea">
                <div class="color-squares" id="colorSquares">
                    <div class="color-square left-square" id="leftSquare">
                        <span class="crosshair">+</span>
                    </div>
                    <div class="color-square right-square" id="rightSquare">
                        <span class="crosshair">+</span>
                    </div>
                </div>
                <p class="instruction-text">
                    <strong>Cross your eyes</strong> until the two + signs overlap into one.<br>
                    Hold for 10-30 seconds. What color appears where they merge?
                </p>
            </div>

            <div class="mode-controls">
                <button class="mode-btn active" id="btnStatic">Static</button>
                <button class="mode-btn" id="btnFlicker">Flickering</button>
                <button class="mode-btn" id="btnStripes">Vertical Stripes</button>
            </div>

            <div class="size-control">
                <label>Square Size:</label>
                <input type="range" id="sizeSlider" min="80" max="250" value="180">
                <span class="size-value" id="sizeValue">180px</span>
            </div>

            <div class="tips-box">
                <h3>üéØ Tips for Success</h3>
                <ol>
                    <li><strong>Relax your eyes</strong> ‚Äî don't strain. Let them naturally cross.</li>
                    <li><strong>Use a finger or pencil</strong> held between you and the screen. Focus on it, then lower it while keeping the crosses aligned.</li>
                    <li><strong>Be patient</strong> ‚Äî it may take 10-30 seconds for the impossible color to appear.</li>
                    <li><strong>Try different sizes</strong> ‚Äî smaller squares require less eye crossing.</li>
                    <li>If you have red-green color deficiency, try the <strong>blue-yellow pair</strong> instead.</li>
                    <li>You may see <strong>flickering, rivalry, or shimmer</strong> before (or instead of) a stable impossible color.</li>
                </ol>
            </div>

            <div class="report-section">
                <h4>What did you see?</h4>
                <div class="report-options">
                    <button class="report-btn" data-result="impossible">A new, indescribable color!</button>
                    <button class="report-btn" data-result="rivalry">Colors flickering/competing</button>
                    <button class="report-btn" data-result="blend">A muddy blend (brown/gray)</button>
                    <button class="report-btn" data-result="nothing">Couldn't cross my eyes</button>
                </div>
                <div class="results-display" id="resultsDisplay">
                    <div class="result-bar">
                        <span class="result-label">Impossible color</span>
                        <div class="result-fill" id="fillImpossible" style="width: 23%; background: linear-gradient(90deg, #ff0000, #00ff00);"></div>
                        <span class="result-pct" id="pctImpossible">23%</span>
                    </div>
                    <div class="result-bar">
                        <span class="result-label">Color rivalry</span>
                        <div class="result-fill" id="fillRivalry" style="width: 45%; background: var(--terracotta);"></div>
                        <span class="result-pct" id="pctRivalry">45%</span>
                    </div>
                    <div class="result-bar">
                        <span class="result-label">Muddy blend</span>
                        <div class="result-fill" id="fillBlend" style="width: 22%; background: #888;"></div>
                        <span class="result-pct" id="pctBlend">22%</span>
                    </div>
                    <div class="result-bar">
                        <span class="result-label">Couldn't do it</span>
                        <div class="result-fill" id="fillNothing" style="width: 10%; background: #ccc;"></div>
                        <span class="result-pct" id="pctNothing">10%</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="paradox-box">
            <h3>üé® The Paradox</h3>
            <p>
                Your visual system uses <em>opponent processing</em>: neurons that fire for red are
                <strong>inhibited</strong> by green, and vice versa. Same for blue and yellow. This means
                "reddish-green" should be <em>neurologically impossible</em>‚Äîlike seeing a square circle.
                Yet under special conditions, some people report seeing exactly that: a color that is
                simultaneously red AND green, or yellow AND blue. A color that <em>shouldn't exist</em>.
            </p>
        </div>

        <div class="section">
            <h2>üß† The Opponent Process Theory</h2>
            <p>Ewald Hering proposed in 1892 that color vision works through three opponent channels:</p>

            <div class="opponent-diagram">
                <div class="opponent-channel">
                    <h4>Red ‚Üî Green</h4>
                    <div class="color-bar rg-bar">
                        <span>Red</span>
                        <span>Green</span>
                    </div>
                    <p class="channel-desc">Same neurons, opposite signals. Can't fire for both!</p>
                </div>
                <div class="opponent-channel">
                    <h4>Blue ‚Üî Yellow</h4>
                    <div class="color-bar by-bar">
                        <span>Blue</span>
                        <span>Yellow</span>
                    </div>
                    <p class="channel-desc">Yellow excites, blue inhibits. Mutually exclusive.</p>
                </div>
                <div class="opponent-channel">
                    <h4>Black ‚Üî White</h4>
                    <div class="color-bar bw-bar">
                        <span>Dark</span>
                        <span>Light</span>
                    </div>
                    <p class="channel-desc">Luminance channel. Allows "impossible" Stygian colors.</p>
                </div>
            </div>

            <p style="margin-top: 20px; color: #555;">
                This is why you can easily imagine "reddish-yellow" (orange) or "bluish-red" (purple)‚Äîthose
                aren't opponent pairs. But "reddish-green"? Your brain's wiring says <em>no</em>.
            </p>
        </div>

        <div class="section">
            <h2>üåà Types of Impossible Colors</h2>
            <div class="impossible-grid">
                <div class="impossible-card">
                    <h4>Reddish Green</h4>
                    <div class="color-swatch swatch-reddish-green"></div>
                    <p>A color that is simultaneously red and green‚Äîreported in eye-tracking experiments.</p>
                </div>
                <div class="impossible-card">
                    <h4>Yellowish Blue</h4>
                    <div class="color-swatch swatch-yellowish-blue"></div>
                    <p>Both yellow and blue at once. The other "forbidden" opponent pair.</p>
                </div>
                <div class="impossible-card">
                    <h4>Stygian Blue</h4>
                    <div class="color-swatch swatch-stygian-blue"></div>
                    <p>A blue darker than black. Created via afterimages‚Äîimpossibly dark yet saturated.</p>
                </div>
                <div class="impossible-card">
                    <h4>Self-Luminous Red</h4>
                    <div class="color-swatch swatch-self-luminous"></div>
                    <p>A red that seems to glow from within, brighter than white. Chimerical afterimage.</p>
                </div>
            </div>
        </div>

        <div class="history-section">
            <h2>üìú History of the Discovery</h2>
            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-year">1892</div>
                    <div class="timeline-text">Ewald Hering proposes opponent process theory, predicting that some color combinations are neurologically "forbidden."</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-year">1983</div>
                    <div class="timeline-text">Hewitt Crane and Thomas Piantanida use eye-tracking to stabilize red-green boundaries on the retina. Subjects report seeing "reddish greens" and "yellowish blues."</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-year">2001</div>
                    <div class="timeline-text">Billock & Tsou replicate the experiments, confirming that some subjects perceive forbidden colors when opponent edges are stabilized.</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-year">2006</div>
                    <div class="timeline-text">Hsieh & Tse challenge the findings, arguing the perceived colors may be normal intermediate hues, not truly "impossible."</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-year">2025</div>
                    <div class="timeline-text">A new color "olo" is created by selectively stimulating only M-cones with a retinal laser‚Äîan unprecedented blue-green saturation.</div>
                </div>
            </div>

            <div class="controversy-box">
                <h4>‚ö†Ô∏è Scientific Controversy</h4>
                <p>
                    Not all researchers agree these colors exist. Critics argue subjects may be seeing
                    normal intermediate colors (like olive or tan) and mislabeling them as "impossible."
                    The subjective nature of color experience makes this debate extremely difficult to resolve.
                </p>
            </div>
        </div>

        <div class="section">
            <h2>üî¨ Why This Matters</h2>
            <p>Impossible colors reveal deep truths about perception:</p>
            <ul style="margin: 15px 0 15px 25px; color: #555;">
                <li><strong>Color is constructed</strong> ‚Äî What you "see" is your brain's interpretation, not reality.</li>
                <li><strong>Opponent processing isn't absolute</strong> ‚Äî The neural wiring has some flexibility.</li>
                <li><strong>Subjective experience is hard to study</strong> ‚Äî How do you prove someone saw a color that "can't exist"?</li>
                <li><strong>Evolution shaped our limits</strong> ‚Äî We don't see all possible colors, just useful ones.</li>
            </ul>
        </div>

        <div class="quote-box">
            "The limits of my language mean the limits of my world."
            <div class="attribution">‚Äî Ludwig Wittgenstein</div>
            <p style="margin-top: 10px; font-size: 0.9rem; font-style: normal; opacity: 0.8;">
                (But what about colors we can see but cannot name?)
            </p>
        </div>
    </div>

    <script>
        // State
        let colorPair = 'red-green';
        let displayMode = 'static';
        let squareSize = 180;
        let flickerInterval = null;

        // Results tracking (simulated community data)
        let results = {
            impossible: 23,
            rivalry: 45,
            blend: 22,
            nothing: 10
        };

        // Elements
        const leftSquare = document.getElementById('leftSquare');
        const rightSquare = document.getElementById('rightSquare');
        const colorSquares = document.getElementById('colorSquares');
        const viewingArea = document.getElementById('viewingArea');

        // Color pair selection
        document.getElementById('btnRedGreen').addEventListener('click', function() {
            colorPair = 'red-green';
            updateColorPair();
            updatePairButtons();
        });

        document.getElementById('btnBlueYellow').addEventListener('click', function() {
            colorPair = 'blue-yellow';
            updateColorPair();
            updatePairButtons();
        });

        function updatePairButtons() {
            document.querySelectorAll('.pair-btn').forEach(btn => btn.classList.remove('active'));
            if (colorPair === 'red-green') {
                document.getElementById('btnRedGreen').classList.add('active');
            } else {
                document.getElementById('btnBlueYellow').classList.add('active');
            }
        }

        function updateColorPair() {
            stopFlicker();
            if (colorPair === 'red-green') {
                leftSquare.style.background = '#ff0000';
                rightSquare.style.background = '#00ff00';
            } else {
                leftSquare.style.background = '#0000ff';
                rightSquare.style.background = '#ffff00';
            }
            if (displayMode === 'flicker') {
                startFlicker();
            } else if (displayMode === 'stripes') {
                applyStripes();
            }
        }

        // Display mode
        document.getElementById('btnStatic').addEventListener('click', function() {
            displayMode = 'static';
            updateModeButtons();
            stopFlicker();
            updateColorPair();
        });

        document.getElementById('btnFlicker').addEventListener('click', function() {
            displayMode = 'flicker';
            updateModeButtons();
            startFlicker();
        });

        document.getElementById('btnStripes').addEventListener('click', function() {
            displayMode = 'stripes';
            updateModeButtons();
            stopFlicker();
            applyStripes();
        });

        function updateModeButtons() {
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            if (displayMode === 'static') {
                document.getElementById('btnStatic').classList.add('active');
            } else if (displayMode === 'flicker') {
                document.getElementById('btnFlicker').classList.add('active');
            } else {
                document.getElementById('btnStripes').classList.add('active');
            }
        }

        function startFlicker() {
            stopFlicker();
            let toggle = false;
            flickerInterval = setInterval(() => {
                if (colorPair === 'red-green') {
                    leftSquare.style.background = toggle ? '#00ff00' : '#ff0000';
                    rightSquare.style.background = toggle ? '#ff0000' : '#00ff00';
                } else {
                    leftSquare.style.background = toggle ? '#ffff00' : '#0000ff';
                    rightSquare.style.background = toggle ? '#0000ff' : '#ffff00';
                }
                toggle = !toggle;
            }, 500);
        }

        function stopFlicker() {
            if (flickerInterval) {
                clearInterval(flickerInterval);
                flickerInterval = null;
            }
        }

        function applyStripes() {
            if (colorPair === 'red-green') {
                leftSquare.style.background = 'repeating-linear-gradient(90deg, #ff0000, #ff0000 10px, #00ff00 10px, #00ff00 20px)';
                rightSquare.style.background = 'repeating-linear-gradient(90deg, #00ff00, #00ff00 10px, #ff0000 10px, #ff0000 20px)';
            } else {
                leftSquare.style.background = 'repeating-linear-gradient(90deg, #0000ff, #0000ff 10px, #ffff00 10px, #ffff00 20px)';
                rightSquare.style.background = 'repeating-linear-gradient(90deg, #ffff00, #ffff00 10px, #0000ff 10px, #0000ff 20px)';
            }
        }

        // Size control
        document.getElementById('sizeSlider').addEventListener('input', function() {
            squareSize = parseInt(this.value);
            document.getElementById('sizeValue').textContent = squareSize + 'px';
            leftSquare.style.width = squareSize + 'px';
            leftSquare.style.height = squareSize + 'px';
            rightSquare.style.width = squareSize + 'px';
            rightSquare.style.height = squareSize + 'px';
        });

        // Results reporting
        document.querySelectorAll('.report-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.report-btn').forEach(b => b.classList.remove('selected'));
                this.classList.add('selected');

                const result = this.dataset.result;
                results[result]++;
                updateResults();
                document.getElementById('resultsDisplay').classList.add('visible');
            });
        });

        function updateResults() {
            const total = results.impossible + results.rivalry + results.blend + results.nothing;

            const pctImpossible = Math.round((results.impossible / total) * 100);
            const pctRivalry = Math.round((results.rivalry / total) * 100);
            const pctBlend = Math.round((results.blend / total) * 100);
            const pctNothing = Math.round((results.nothing / total) * 100);

            document.getElementById('fillImpossible').style.width = pctImpossible + '%';
            document.getElementById('pctImpossible').textContent = pctImpossible + '%';

            document.getElementById('fillRivalry').style.width = pctRivalry + '%';
            document.getElementById('pctRivalry').textContent = pctRivalry + '%';

            document.getElementById('fillBlend').style.width = pctBlend + '%';
            document.getElementById('pctBlend').textContent = pctBlend + '%';

            document.getElementById('fillNothing').style.width = pctNothing + '%';
            document.getElementById('pctNothing').textContent = pctNothing + '%';
        }
    </script>
</body>
</html>
