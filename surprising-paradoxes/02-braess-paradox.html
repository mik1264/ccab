<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Braess's Paradox - When Adding Roads Makes Traffic Worse</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #0d1b2a 0%, #1b263b 50%, #415a77 100%);
            min-height: 100vh;
            color: #e8e8f8;
            line-height: 1.8;
        }

        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            padding: 12px 24px;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            color: #ff6b6b;
            text-decoration: none;
            border-radius: 30px;
            font-size: 14px;
            z-index: 1000;
            transition: all 0.3s;
            border: 1px solid rgba(255,107,107,0.3);
        }

        .back-link:hover {
            background: rgba(255,107,107,0.2);
            transform: translateX(-5px);
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 80px 30px 60px;
        }

        header {
            text-align: center;
            margin-bottom: 50px;
        }

        h1 {
            font-size: 2.8rem;
            font-weight: 400;
            color: #ff6b6b;
            margin-bottom: 20px;
            letter-spacing: 2px;
        }

        .subtitle {
            font-size: 1.4rem;
            color: #a8b2d1;
            font-style: italic;
        }

        .paradox-statement {
            background: linear-gradient(135deg, rgba(255,107,107,0.15) 0%, rgba(255,215,0,0.1) 100%);
            border-left: 4px solid #ff6b6b;
            padding: 30px 40px;
            margin: 40px 0;
            border-radius: 0 20px 20px 0;
            font-size: 1.25rem;
            text-align: center;
        }

        h2 {
            font-size: 1.8rem;
            color: #ff6b6b;
            margin: 50px 0 25px;
            font-weight: 400;
        }

        p {
            margin-bottom: 20px;
            color: #c8d0e8;
        }

        .highlight {
            color: #ffd700;
            font-weight: 600;
        }

        .simulation-container {
            background: rgba(0,0,0,0.4);
            border-radius: 20px;
            padding: 30px;
            margin: 40px 0;
            border: 1px solid rgba(255,107,107,0.2);
        }

        .sim-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .sim-title {
            font-size: 1.4rem;
            color: #ff6b6b;
        }

        .controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 25px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a5a 100%);
            color: white;
        }

        .btn-secondary {
            background: rgba(255,255,255,0.1);
            color: #a8b2d1;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255,107,107,0.3);
        }

        .toggle-btn {
            padding: 10px 25px;
            background: rgba(255,107,107,0.2);
            border: 2px solid #ff6b6b;
            color: #ff6b6b;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            transition: all 0.3s;
        }

        .toggle-btn.active {
            background: #ff6b6b;
            color: white;
        }

        #canvas-container {
            position: relative;
            width: 100%;
            display: flex;
            justify-content: center;
        }

        #canvas {
            background: #0a1628;
            border-radius: 15px;
            max-width: 100%;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-top: 25px;
        }

        .stat-box {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: #ff6b6b;
            font-family: 'Courier New', monospace;
        }

        .stat-value.better { color: #4ecdc4; }
        .stat-value.worse { color: #ff6b6b; }

        .stat-label {
            font-size: 0.85rem;
            color: #8892b0;
            margin-top: 8px;
        }

        .comparison {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 30px;
            align-items: center;
            margin-top: 30px;
            padding: 25px;
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
        }

        .scenario {
            text-align: center;
        }

        .scenario-title {
            font-size: 1.1rem;
            color: #8892b0;
            margin-bottom: 10px;
        }

        .scenario-value {
            font-size: 2.5rem;
            font-weight: 700;
            font-family: 'Courier New', monospace;
        }

        .vs {
            font-size: 1.5rem;
            color: #415a77;
            font-weight: 700;
        }

        .verdict {
            text-align: center;
            margin-top: 20px;
            padding: 20px;
            border-radius: 15px;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .verdict.paradox {
            background: rgba(255,107,107,0.2);
            border: 2px solid #ff6b6b;
            color: #ff6b6b;
        }

        .verdict.normal {
            background: rgba(78,205,196,0.2);
            border: 2px solid #4ecdc4;
            color: #4ecdc4;
        }

        .explanation-box {
            background: rgba(255,215,0,0.1);
            border: 1px solid rgba(255,215,0,0.3);
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
        }

        .explanation-box h3 {
            color: #ffd700;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .real-world {
            background: rgba(78,205,196,0.1);
            border: 1px solid rgba(78,205,196,0.3);
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
        }

        .real-world h3 {
            color: #4ecdc4;
            margin-bottom: 15px;
        }

        .example-list {
            list-style: none;
        }

        .example-list li {
            padding: 12px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }

        .example-list li:last-child {
            border-bottom: none;
        }

        .example-icon {
            font-size: 1.5rem;
        }

        .math-box {
            background: rgba(0,0,0,0.4);
            border-radius: 12px;
            padding: 20px;
            font-family: 'Courier New', monospace;
            margin: 20px 0;
            overflow-x: auto;
        }

        .math-formula {
            color: #ffd700;
            font-size: 1.1rem;
            text-align: center;
        }

        footer {
            text-align: center;
            margin-top: 60px;
            padding-top: 40px;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: #5a6a8a;
        }

        footer a {
            color: #ff6b6b;
            text-decoration: none;
        }

        @media (max-width: 768px) {
            h1 { font-size: 2rem; }
            .comparison { grid-template-columns: 1fr; gap: 20px; }
            .vs { display: none; }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back to Gallery</a>

    <div class="container">
        <header>
            <h1>üöó Braess's Paradox</h1>
            <p class="subtitle">Why adding a road can make everyone's commute worse</p>
        </header>

        <div class="paradox-statement">
            <strong>The Paradox:</strong> In a traffic network where each driver selfishly chooses the fastest route,
            <span class="highlight">adding a new road can increase travel time for everyone</span>.
        </div>

        <h2>The Counterintuitive Truth</h2>
        <p>
            Imagine you're a city planner. Traffic is congested. The obvious solution? Build more roads!
            But mathematician Dietrich Braess discovered in 1968 that this intuition can be <em>catastrophically wrong</em>.
        </p>
        <p>
            When each driver optimizes for their own benefit (a <span class="highlight">Nash equilibrium</span>),
            adding a tempting shortcut can create a situation where <em>everyone</em> is worse off‚Äîyet no individual
            can improve their situation by changing routes.
        </p>

        <div class="simulation-container">
            <div class="sim-header">
                <div class="sim-title">üö¶ Interactive Traffic Simulation</div>
                <div class="controls">
                    <button class="toggle-btn" id="toggle-shortcut">Add Shortcut</button>
                    <button class="btn btn-secondary" id="reset-btn">Reset</button>
                </div>
            </div>

            <div id="canvas-container">
                <canvas id="canvas" width="700" height="450"></canvas>
            </div>

            <div class="stats-grid">
                <div class="stat-box">
                    <div class="stat-value" id="avg-time">0.0</div>
                    <div class="stat-label">Avg Travel Time (min)</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="cars-arrived">0</div>
                    <div class="stat-label">Cars Completed</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="route-split">50/50</div>
                    <div class="stat-label">Route Distribution</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="shortcut-status">OFF</div>
                    <div class="stat-label">Shortcut Road</div>
                </div>
            </div>

            <div class="comparison">
                <div class="scenario">
                    <div class="scenario-title">Without Shortcut</div>
                    <div class="scenario-value" id="time-without" style="color: #4ecdc4;">--</div>
                </div>
                <div class="vs">VS</div>
                <div class="scenario">
                    <div class="scenario-title">With Shortcut</div>
                    <div class="scenario-value" id="time-with" style="color: #ff6b6b;">--</div>
                </div>
            </div>

            <div class="verdict" id="verdict" style="display: none;"></div>
        </div>

        <div class="explanation-box">
            <h3>üß† Why Does This Happen?</h3>
            <p>The paradox arises from the conflict between <strong>individual rationality</strong> and <strong>collective good</strong>:</p>
            <p>
                <strong>Without the shortcut:</strong> Traffic naturally splits between two routes. Each route has a
                congestion-dependent segment and a fixed-time segment. The equilibrium keeps everyone at ~65 minutes.
            </p>
            <p>
                <strong>With the shortcut:</strong> The shortcut is so fast that <em>everyone</em> wants to use it.
                But to reach it, everyone takes the same congested road. Then everyone takes another congested road.
                Result: ~80 minutes for everyone‚Äîand no one can do better by switching!
            </p>
            <div class="math-box">
                <div class="math-formula">
                    Nash Equilibrium ‚â† Social Optimum
                </div>
            </div>
        </div>

        <h2>The Classic Network</h2>
        <p>
            Consider 4000 drivers going from Start to End. There are two routes:
        </p>
        <p>
            <strong>Top Route:</strong> Congested road (time = cars/100) ‚Üí Fast highway (fixed 45 min)<br>
            <strong>Bottom Route:</strong> Fast highway (fixed 45 min) ‚Üí Congested road (time = cars/100)
        </p>
        <p>
            Without a shortcut, traffic splits evenly: 2000 cars each way. Everyone takes 65 minutes (20 + 45).
        </p>
        <p>
            <strong>Now add a shortcut</strong> between the two congested roads. It's almost instant (1 minute).
            Surely this helps? <span class="highlight">No!</span> Everyone now takes: Congested ‚Üí Shortcut ‚Üí Congested.
            With 4000 cars on each congested road: 40 + 1 + 40 = <strong>81 minutes</strong>.
        </p>

        <div class="real-world">
            <h3>üåç Real-World Examples</h3>
            <ul class="example-list">
                <li>
                    <span class="example-icon">üá∞üá∑</span>
                    <div>
                        <strong>Seoul, South Korea (2003):</strong> When the Cheonggye Expressway was demolished,
                        traffic in the area <em>improved</em>. The road had been attracting too many cars to the area.
                    </div>
                </li>
                <li>
                    <span class="example-icon">üá©üá™</span>
                    <div>
                        <strong>Stuttgart, Germany (1969):</strong> A new road was built but traffic got worse.
                        Officials had to close the new section to restore normal flow.
                    </div>
                </li>
                <li>
                    <span class="example-icon">üá∫üá∏</span>
                    <div>
                        <strong>New York City (1990):</strong> Closing 42nd Street for Earth Day reduced
                        congestion. This led to permanent pedestrian plazas at Times Square.
                    </div>
                </li>
                <li>
                    <span class="example-icon">‚ö°</span>
                    <div>
                        <strong>Power Grids:</strong> The paradox applies to electrical networks too.
                        Adding transmission lines can sometimes reduce overall efficiency.
                    </div>
                </li>
            </ul>
        </div>

        <h2>Beyond Traffic</h2>
        <p>
            Braess's Paradox appears wherever selfish agents share resources:
        </p>
        <p>
            <strong>üèÄ Sports:</strong> Adding a star player can hurt team performance if everyone over-relies on them.<br>
            <strong>üíª Networks:</strong> Adding bandwidth can slow down internet traffic under certain routing protocols.<br>
            <strong>üß¨ Biology:</strong> Opening new pathways in metabolic networks can reduce overall efficiency.<br>
            <strong>üí∞ Economics:</strong> Adding a trading option can make all traders worse off.
        </p>

        <div class="explanation-box">
            <h3>üí° The Deeper Lesson</h3>
            <p>
                When individuals optimize selfishly, the collective outcome can be worse than if everyone cooperated.
                This is why traffic engineers, network designers, and economists must think about
                <span class="highlight">system-level effects</span>, not just individual incentives.
            </p>
            <p>
                The paradox teaches us: <em>more is not always better</em>. Sometimes the best solution
                is to <strong>remove</strong> options, forcing coordination where selfishness would fail.
            </p>
        </div>

        <footer>
            <p>
                Discovered by Dietrich Braess (1968) ¬∑
                <a href="https://en.wikipedia.org/wiki/Braess's_paradox" target="_blank">Learn more on Wikipedia</a>
            </p>
            <p style="margin-top: 15px; font-size: 0.9rem;">
                Sources:
                <a href="https://brilliant.org/wiki/braess-paradox/" target="_blank">Brilliant.org</a> ¬∑
                <a href="https://blogs.cornell.edu/info2040/2021/09/15/braesss-paradox-in-real-life-improving-traffic-by-removing-roads/" target="_blank">Cornell Networks Blog</a>
            </p>
        </footer>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        // State
        let shortcutEnabled = false;
        let cars = [];
        let carsArrived = 0;
        let totalTravelTime = 0;
        let topRouteCars = 0;
        let bottomRouteCars = 0;
        let shortcutCars = 0;
        let timeWithoutShortcut = null;
        let timeWithShortcut = null;
        let simulationTime = 0;

        // Network nodes
        const nodes = {
            start: { x: 80, y: 225 },
            topMid: { x: 350, y: 100 },
            bottomMid: { x: 350, y: 350 },
            end: { x: 620, y: 225 }
        };

        // Road definitions
        const roads = {
            startToTop: { from: 'start', to: 'topMid', congested: true, label: 'T/100 min' },
            startToBottom: { from: 'start', to: 'bottomMid', congested: false, label: '45 min' },
            topToEnd: { from: 'topMid', to: 'end', congested: false, label: '45 min' },
            bottomToEnd: { from: 'bottomMid', to: 'end', congested: true, label: 'T/100 min' },
            shortcut: { from: 'topMid', to: 'bottomMid', congested: false, label: '1 min', isShortcut: true }
        };

        // Car class
        class Car {
            constructor() {
                this.x = nodes.start.x;
                this.y = nodes.start.y;
                this.route = this.chooseRoute();
                this.routeIndex = 0;
                this.progress = 0;
                this.startTime = simulationTime;
                this.color = this.route.includes('shortcut') ? '#ff6b6b' :
                             this.route[0] === 'startToTop' ? '#4ecdc4' : '#ffd700';
            }

            chooseRoute() {
                if (shortcutEnabled) {
                    // With shortcut, Nash equilibrium: almost everyone uses it
                    const r = Math.random();
                    if (r < 0.85) {
                        shortcutCars++;
                        return ['startToTop', 'shortcut', 'bottomToEnd'];
                    } else if (r < 0.925) {
                        topRouteCars++;
                        return ['startToTop', 'topToEnd'];
                    } else {
                        bottomRouteCars++;
                        return ['startToBottom', 'bottomToEnd'];
                    }
                } else {
                    // Without shortcut, traffic splits evenly
                    if (Math.random() < 0.5) {
                        topRouteCars++;
                        return ['startToTop', 'topToEnd'];
                    } else {
                        bottomRouteCars++;
                        return ['startToBottom', 'bottomToEnd'];
                    }
                }
            }

            getSegmentSpeed(roadName) {
                const road = roads[roadName];
                if (road.isShortcut) return 0.03; // Very fast
                if (road.congested) {
                    // Speed decreases with traffic
                    const traffic = cars.filter(c =>
                        c.route[c.routeIndex] === roadName && c !== this
                    ).length;
                    return Math.max(0.003, 0.02 - traffic * 0.0003);
                }
                return 0.012; // Fixed highway speed
            }

            update() {
                if (this.routeIndex >= this.route.length) return true; // Arrived

                const speed = this.getSegmentSpeed(this.route[this.routeIndex]);
                this.progress += speed;

                if (this.progress >= 1) {
                    this.progress = 0;
                    this.routeIndex++;
                    if (this.routeIndex >= this.route.length) {
                        return true; // Arrived
                    }
                }

                // Update position
                const roadName = this.route[this.routeIndex];
                const road = roads[roadName];
                const from = nodes[road.from];
                const to = nodes[road.to];
                this.x = from.x + (to.x - from.x) * this.progress;
                this.y = from.y + (to.y - from.y) * this.progress;

                return false;
            }

            draw() {
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, 5, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function drawNetwork() {
            ctx.fillStyle = '#0a1628';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw roads
            ctx.lineWidth = 8;
            ctx.lineCap = 'round';

            // Helper to draw road
            function drawRoad(road, color, dashed = false) {
                const from = nodes[road.from];
                const to = nodes[road.to];
                ctx.strokeStyle = color;
                ctx.setLineDash(dashed ? [10, 10] : []);
                ctx.beginPath();
                ctx.moveTo(from.x, from.y);
                ctx.lineTo(to.x, to.y);
                ctx.stroke();
                ctx.setLineDash([]);

                // Label
                const midX = (from.x + to.x) / 2;
                const midY = (from.y + to.y) / 2;
                ctx.fillStyle = 'rgba(255,255,255,0.7)';
                ctx.font = '12px Georgia';
                ctx.textAlign = 'center';
                const offset = road.isShortcut ? -15 : (from.y < to.y ? -15 : 15);
                ctx.fillText(road.label, midX, midY + offset);
            }

            // Draw main roads
            drawRoad(roads.startToTop, '#ff6b6b'); // Congested = red
            drawRoad(roads.startToBottom, '#4ecdc4'); // Highway = teal
            drawRoad(roads.topToEnd, '#4ecdc4');
            drawRoad(roads.bottomToEnd, '#ff6b6b');

            // Draw shortcut if enabled
            if (shortcutEnabled) {
                drawRoad(roads.shortcut, '#ffd700');
            } else {
                // Show where shortcut would be (dashed)
                ctx.globalAlpha = 0.3;
                drawRoad(roads.shortcut, '#ffd700', true);
                ctx.globalAlpha = 1;
            }

            // Draw nodes
            function drawNode(name, label) {
                const node = nodes[name];
                ctx.fillStyle = '#1b263b';
                ctx.strokeStyle = '#778da9';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.arc(node.x, node.y, 25, 0, Math.PI * 2);
                ctx.fill();
                ctx.stroke();

                ctx.fillStyle = '#e0e1dd';
                ctx.font = 'bold 14px Georgia';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(label, node.x, node.y);
            }

            drawNode('start', 'START');
            drawNode('topMid', 'A');
            drawNode('bottomMid', 'B');
            drawNode('end', 'END');

            // Legend
            ctx.font = '11px Georgia';
            ctx.textAlign = 'left';
            ctx.fillStyle = '#ff6b6b';
            ctx.fillRect(20, 410, 15, 15);
            ctx.fillStyle = '#e0e1dd';
            ctx.fillText('Congested (time depends on traffic)', 40, 422);

            ctx.fillStyle = '#4ecdc4';
            ctx.fillRect(280, 410, 15, 15);
            ctx.fillStyle = '#e0e1dd';
            ctx.fillText('Highway (fixed time)', 300, 422);

            if (shortcutEnabled) {
                ctx.fillStyle = '#ffd700';
                ctx.fillRect(480, 410, 15, 15);
                ctx.fillStyle = '#e0e1dd';
                ctx.fillText('Shortcut (1 min)', 500, 422);
            }
        }

        function spawnCar() {
            if (cars.length < 60) { // Cap for performance
                cars.push(new Car());
            }
        }

        function updateStats() {
            const avgTime = carsArrived > 0 ? (totalTravelTime / carsArrived).toFixed(1) : '0.0';
            document.getElementById('avg-time').textContent = avgTime;
            document.getElementById('cars-arrived').textContent = carsArrived;

            const total = topRouteCars + bottomRouteCars + shortcutCars;
            if (total > 0) {
                if (shortcutEnabled) {
                    const pct = Math.round(shortcutCars / total * 100);
                    document.getElementById('route-split').textContent = `${pct}% shortcut`;
                } else {
                    const topPct = Math.round(topRouteCars / total * 100);
                    document.getElementById('route-split').textContent = `${topPct}/${100-topPct}`;
                }
            }

            document.getElementById('shortcut-status').textContent = shortcutEnabled ? 'ON' : 'OFF';
            document.getElementById('shortcut-status').className = 'stat-value ' + (shortcutEnabled ? 'worse' : 'better');

            // Update comparison
            if (carsArrived > 20) {
                if (!shortcutEnabled && timeWithoutShortcut === null) {
                    timeWithoutShortcut = parseFloat(avgTime);
                    document.getElementById('time-without').textContent = avgTime + ' min';
                }
                if (shortcutEnabled && timeWithShortcut === null) {
                    timeWithShortcut = parseFloat(avgTime);
                    document.getElementById('time-with').textContent = avgTime + ' min';
                }

                // Show verdict
                if (timeWithoutShortcut !== null && timeWithShortcut !== null) {
                    const verdict = document.getElementById('verdict');
                    verdict.style.display = 'block';
                    if (timeWithShortcut > timeWithoutShortcut) {
                        verdict.className = 'verdict paradox';
                        verdict.innerHTML = `üö® PARADOX CONFIRMED! Adding the shortcut made travel ${(timeWithShortcut - timeWithoutShortcut).toFixed(1)} minutes SLOWER!`;
                    } else {
                        verdict.className = 'verdict normal';
                        verdict.textContent = 'The shortcut helped in this case.';
                    }
                }
            }

            // Color the avg time
            const avgEl = document.getElementById('avg-time');
            if (shortcutEnabled && parseFloat(avgTime) > 65) {
                avgEl.className = 'stat-value worse';
            } else {
                avgEl.className = 'stat-value better';
            }
        }

        function animate() {
            simulationTime++;

            // Spawn new cars periodically
            if (simulationTime % 15 === 0) {
                spawnCar();
            }

            // Update cars
            cars = cars.filter(car => {
                const arrived = car.update();
                if (arrived) {
                    carsArrived++;
                    totalTravelTime += (simulationTime - car.startTime) / 60; // Convert to "minutes"
                    return false;
                }
                return true;
            });

            // Draw
            drawNetwork();
            cars.forEach(car => car.draw());
            updateStats();

            requestAnimationFrame(animate);
        }

        // Toggle shortcut
        document.getElementById('toggle-shortcut').addEventListener('click', function() {
            shortcutEnabled = !shortcutEnabled;
            this.textContent = shortcutEnabled ? 'Remove Shortcut' : 'Add Shortcut';
            this.classList.toggle('active', shortcutEnabled);

            // Reset counters for fair comparison
            if (shortcutEnabled) {
                timeWithShortcut = null;
            } else {
                timeWithoutShortcut = null;
            }
            carsArrived = 0;
            totalTravelTime = 0;
            topRouteCars = 0;
            bottomRouteCars = 0;
            shortcutCars = 0;
            cars = [];
        });

        // Reset
        document.getElementById('reset-btn').addEventListener('click', function() {
            cars = [];
            carsArrived = 0;
            totalTravelTime = 0;
            topRouteCars = 0;
            bottomRouteCars = 0;
            shortcutCars = 0;
            simulationTime = 0;
            timeWithoutShortcut = null;
            timeWithShortcut = null;
            document.getElementById('time-without').textContent = '--';
            document.getElementById('time-with').textContent = '--';
            document.getElementById('verdict').style.display = 'none';
            shortcutEnabled = false;
            document.getElementById('toggle-shortcut').textContent = 'Add Shortcut';
            document.getElementById('toggle-shortcut').classList.remove('active');
        });

        window.reset = function() { document.getElementById('reset-btn').click(); };

        // Start
        animate();
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
