<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weber-Fechner Law - Why You Can't Tell 100 from 101</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1a3040 0%, #0f2030 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1000px; margin: 0 auto; }
        header { text-align: center; margin-bottom: 30px; }
        .back-link { color: #3498db; text-decoration: none; margin-bottom: 20px; display: inline-block; }
        h1 {
            font-size: 2.4rem;
            background: linear-gradient(135deg, #3498db, #9b59b6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }
        .subtitle { font-size: 1.1rem; color: #7090b0; max-width: 800px; margin: 0 auto; line-height: 1.6; }
        .experiment-container {
            background: rgba(40, 60, 80, 0.7);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
        }
        .experiment-container h2 { color: #3498db; margin-bottom: 20px; text-align: center; }
        .candle-demo {
            background: rgba(30, 45, 60, 0.8);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
        }
        .candle-row {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            gap: 3px;
            margin: 20px 0;
            min-height: 80px;
        }
        .candle {
            width: 8px;
            background: linear-gradient(to top, #f39c12, #f1c40f);
            border-radius: 2px 2px 0 0;
            position: relative;
        }
        .candle::before {
            content: '';
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 6px;
            height: 8px;
            background: radial-gradient(ellipse at center, #fff 0%, #ffa500 50%, transparent 70%);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
        }
        .comparison-boxes {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 25px 0;
        }
        .compare-box {
            background: rgba(30, 45, 60, 0.8);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }
        .compare-box h3 { color: #3498db; margin-bottom: 15px; }
        .candle-count {
            font-size: 2.5rem;
            font-weight: bold;
            color: #f39c12;
            margin: 10px 0;
        }
        .slider-section {
            margin: 25px 0;
            text-align: center;
        }
        .slider-label { color: #7090b0; margin-bottom: 10px; }
        .base-slider {
            width: 80%;
            margin: 15px 0;
            -webkit-appearance: none;
            height: 8px;
            border-radius: 4px;
            background: rgba(52, 152, 219, 0.3);
        }
        .base-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: #3498db;
            cursor: pointer;
        }
        .question-box {
            background: rgba(52, 152, 219, 0.15);
            border: 2px solid rgba(52, 152, 219, 0.4);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        .question-box h4 { color: #3498db; margin-bottom: 15px; }
        .answer-btns {
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        .answer-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-family: inherit;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        .answer-btn.yes {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            color: #1a3040;
        }
        .answer-btn.no {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }
        .answer-btn:hover { transform: scale(1.05); }
        .answer-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .formula-box {
            background: rgba(30, 45, 60, 0.8);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            margin: 25px 0;
        }
        .formula {
            font-size: 1.5rem;
            color: #3498db;
            font-family: 'Times New Roman', serif;
            margin: 15px 0;
        }
        .formula-explanation { color: #7090b0; font-size: 0.95rem; line-height: 1.6; }
        .jnd-display {
            font-size: 2rem;
            font-weight: bold;
            color: #3498db;
            margin: 15px 0;
        }
        .perception-curve {
            background: rgba(30, 45, 60, 0.8);
            border-radius: 12px;
            padding: 20px;
            margin: 25px 0;
        }
        .perception-curve h3 { color: #3498db; margin-bottom: 15px; text-align: center; }
        .curve-canvas {
            width: 100%;
            height: 250px;
            background: rgba(20, 35, 50, 0.8);
            border-radius: 8px;
        }
        .price-demo {
            background: rgba(30, 45, 60, 0.8);
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
        }
        .price-demo h3 { color: #3498db; margin-bottom: 20px; text-align: center; }
        .price-scenarios {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        .price-card {
            background: rgba(52, 152, 219, 0.1);
            border: 1px solid rgba(52, 152, 219, 0.3);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }
        .price-card .original { color: #7090b0; text-decoration: line-through; }
        .price-card .sale { font-size: 1.8rem; color: #2ecc71; font-weight: bold; }
        .price-card .savings { color: #e74c3c; margin-top: 10px; }
        .price-card .feel { color: #f39c12; font-style: italic; margin-top: 10px; }
        .results-section { display: none; margin-top: 30px; }
        .results-section.visible { display: block; }
        .reveal-box {
            background: rgba(52, 152, 219, 0.15);
            border: 2px solid rgba(52, 152, 219, 0.4);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
        }
        .reveal-box h3 { color: #3498db; margin-bottom: 15px; text-align: center; }
        .reveal-box p { color: #7090b0; line-height: 1.7; }
        .case-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin: 30px 0; }
        .case-card {
            background: rgba(40, 60, 80, 0.7);
            border-radius: 12px;
            padding: 20px;
            border-left: 4px solid #3498db;
        }
        .case-card h3 { color: #3498db; margin-bottom: 12px; }
        .case-card p { color: #7090b0; font-size: 0.95rem; line-height: 1.6; }
        .insight-box {
            background: linear-gradient(135deg, rgba(52, 152, 219, 0.2), rgba(155, 89, 182, 0.1));
            border-left: 4px solid #3498db;
            padding: 20px;
            border-radius: 0 12px 12px 0;
            margin: 25px 0;
        }
        .insight-box h3 { color: #3498db; margin-bottom: 10px; }
        .explanation { background: rgba(40, 60, 80, 0.5); border-radius: 15px; padding: 25px; margin-top: 30px; }
        .explanation h2 { color: #3498db; margin-bottom: 15px; }
        .explanation p { color: #7090b0; line-height: 1.8; margin-bottom: 15px; }
        .test-counter {
            text-align: center;
            margin: 20px 0;
            color: #7090b0;
        }
        @media (max-width: 600px) {
            .comparison-boxes, .price-scenarios { grid-template-columns: 1fr; }
            .answer-btns { flex-direction: column; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="index.html" class="back-link">‚Üê Back to Surprising Paradoxes</a>
            <h1>The Weber-Fechner Law</h1>
            <p class="subtitle">You can easily tell 1 candle from 2 candles. But can you tell 100 from 101? Perception scales LOGARITHMICALLY with stimulus intensity. A $1 discount feels huge on a $5 item, trivial on a $500 item. The same absolute change feels completely different depending on the baseline!</p>
        </header>

        <div class="experiment-container">
            <h2>üïØÔ∏è The Candle Test</h2>
            <p style="text-align: center; color: #7090b0; margin-bottom: 25px;">Can you tell the difference between these two groups of candles?</p>

            <div class="comparison-boxes">
                <div class="compare-box">
                    <h3>Group A</h3>
                    <div class="candle-row" id="candlesA"></div>
                    <div class="candle-count" id="countA">?</div>
                </div>
                <div class="compare-box">
                    <h3>Group B</h3>
                    <div class="candle-row" id="candlesB"></div>
                    <div class="candle-count" id="countB">?</div>
                </div>
            </div>

            <div class="question-box" id="questionBox">
                <h4>Can you tell which group has more candles?</h4>
                <div class="answer-btns">
                    <button class="answer-btn yes" id="yesBtn">Yes, I can tell! üëÅÔ∏è</button>
                    <button class="answer-btn no" id="noBtn">No, they look the same ü§∑</button>
                </div>
            </div>

            <div class="test-counter">
                Round <span id="round">1</span> of 6 | Base: <span id="baseDisplay">2</span> candles + <span id="diffDisplay">1</span>
            </div>

            <div class="slider-section">
                <div class="slider-label">Adjust the BASE number of candles:</div>
                <input type="range" class="base-slider" id="baseSlider" min="2" max="100" value="2">
                <div class="jnd-display">Just Noticeable Difference: <span id="jndValue">1</span> candle(s)</div>
            </div>

            <div class="formula-box">
                <div style="color: #7090b0; margin-bottom: 10px;">Weber's Law:</div>
                <div class="formula">ŒîS / S = k</div>
                <div class="formula-explanation">
                    The Just Noticeable Difference (ŒîS) is proportional to the starting stimulus (S).<br>
                    k ‚âà 0.02 for light, 0.04 for weight, 0.1 for sound intensity
                </div>
            </div>

            <div class="results-section" id="resultsSection">
                <div class="reveal-box">
                    <h3>üìä Your Perception Results</h3>
                    <p id="resultsSummary"></p>
                </div>
            </div>
        </div>

        <div class="perception-curve">
            <h3>The Logarithmic Perception Curve</h3>
            <canvas id="curveCanvas" class="curve-canvas"></canvas>
            <p style="text-align: center; color: #7090b0; margin-top: 15px; font-size: 0.9rem;">
                Perceived intensity grows logarithmically, not linearly. Each doubling of stimulus adds the same perceived increment.
            </p>
        </div>

        <div class="price-demo">
            <h3>üí∞ The $1 Discount Illusion</h3>
            <p style="text-align: center; color: #7090b0; margin-bottom: 20px;">Same $1 savings‚Äîcompletely different feelings!</p>
            <div class="price-scenarios">
                <div class="price-card">
                    <div>Coffee</div>
                    <div class="original">$5.00</div>
                    <div class="sale">$4.00</div>
                    <div class="savings">Save $1 (20%)</div>
                    <div class="feel">"Great deal!"</div>
                </div>
                <div class="price-card">
                    <div>Shirt</div>
                    <div class="original">$50.00</div>
                    <div class="sale">$49.00</div>
                    <div class="savings">Save $1 (2%)</div>
                    <div class="feel">"Meh."</div>
                </div>
                <div class="price-card">
                    <div>Laptop</div>
                    <div class="original">$1,000.00</div>
                    <div class="sale">$999.00</div>
                    <div class="savings">Save $1 (0.1%)</div>
                    <div class="feel">"Who cares?"</div>
                </div>
                <div class="price-card">
                    <div>Car</div>
                    <div class="original">$30,000.00</div>
                    <div class="sale">$29,999.00</div>
                    <div class="savings">Save $1 (0.003%)</div>
                    <div class="feel">"Insulting."</div>
                </div>
            </div>
        </div>

        <div class="case-cards">
            <div class="case-card">
                <h3>üí° Light Perception</h3>
                <p>Weber constant k ‚âà 0.02. You need ~2% more light to notice a difference. In a dark room, one candle is obvious. In daylight, you can't tell if one extra bulb is on.</p>
            </div>
            <div class="case-card">
                <h3>‚öñÔ∏è Weight Discrimination</h3>
                <p>Weber constant k ‚âà 0.04. You can tell 1kg from 1.04kg, but not 25kg from 25.04kg. Lifting 1 more pound on 10 lbs is obvious; on 100 lbs, imperceptible.</p>
            </div>
            <div class="case-card">
                <h3>üîä Sound Intensity</h3>
                <p>Weber constant k ‚âà 0.1 for loudness. Decibels ARE logarithmic precisely because of this‚Äîdoubling the sound energy adds ~3dB, which is the just-noticeable difference.</p>
            </div>
            <div class="case-card">
                <h3>üí∏ Salary Raises</h3>
                <p>A $5,000 raise feels huge at $30,000 salary (17%). The same raise at $200,000 salary (2.5%) feels insulting. Percentage matters more than absolute amount.</p>
            </div>
        </div>

        <div class="insight-box">
            <h3>üß† Why Perception Is Logarithmic</h3>
            <p><strong>Compression for range:</strong> The world has enormous dynamic range (sun is 10 billion times brighter than starlight). Logarithmic perception compresses this into a manageable scale.<br><br>
            <strong>Relative changes matter:</strong> Evolutionarily, a 10% change in danger was equally important whether you faced 1 predator or 100. Absolute differences are less meaningful than proportional ones.<br><br>
            <strong>Efficient encoding:</strong> The nervous system can't represent infinite range linearly. Logarithmic encoding extracts maximum information with limited neurons.</p>
        </div>

        <div class="explanation">
            <h2>The Science</h2>
            <p><strong>Ernst Weber</strong> (1834) discovered that the just-noticeable difference in sensation is proportional to the original stimulus. <strong>Gustav Fechner</strong> (1860) formalized this into ŒîS/S = k (Weber's Law) and derived S = c √ó log(I) (Fechner's Law).</p>
            <p><strong>The paradox:</strong> We experience the world as if differences are absolute, but our perception is fundamentally relative. The "same" change feels completely different depending on context. This is why a 1-star improvement on a 2-star restaurant is huge, but on a 4-star restaurant is minor.</p>
            <p><strong>Modern refinements:</strong> Steven's Power Law (1957) improved on Weber-Fechner for some modalities. But the core insight remains: perception is nonlinear, compressive, and context-dependent.</p>
            <p style="font-style: italic; color: #506070;">The world changes linearly. Your perception of it doesn't.</p>
        </div>
    </div>

    <script>
        var round = 0;
        var maxRounds = 6;
        var testCases = [
            { base: 2, diff: 1 },    // Easy: 2 vs 3
            { base: 5, diff: 1 },    // Easy: 5 vs 6
            { base: 10, diff: 1 },   // Medium: 10 vs 11
            { base: 25, diff: 1 },   // Hard: 25 vs 26
            { base: 50, diff: 1 },   // Very hard: 50 vs 51
            { base: 100, diff: 1 }   // Impossible: 100 vs 101
        ];
        var results = [];

        var candlesA = document.getElementById('candlesA');
        var candlesB = document.getElementById('candlesB');
        var countA = document.getElementById('countA');
        var countB = document.getElementById('countB');
        var roundDisplay = document.getElementById('round');
        var baseDisplay = document.getElementById('baseDisplay');
        var diffDisplay = document.getElementById('diffDisplay');

        function renderCandles(container, count) {
            container.innerHTML = '';
            var candleHeight = Math.max(15, 60 - count * 0.4);
            var candleWidth = Math.max(3, 8 - count * 0.05);
            for (var i = 0; i < count; i++) {
                var candle = document.createElement('div');
                candle.className = 'candle';
                candle.style.height = candleHeight + 'px';
                candle.style.width = candleWidth + 'px';
                container.appendChild(candle);
            }
        }

        function loadRound() {
            if (round >= maxRounds) {
                showResults();
                return;
            }

            var test = testCases[round];
            var aCount = test.base;
            var bCount = test.base + test.diff;

            // Randomly swap which side has more
            if (Math.random() > 0.5) {
                var temp = aCount;
                aCount = bCount;
                bCount = temp;
            }

            renderCandles(candlesA, aCount);
            renderCandles(candlesB, bCount);
            countA.textContent = '?';
            countB.textContent = '?';
            roundDisplay.textContent = round + 1;
            baseDisplay.textContent = test.base;
            diffDisplay.textContent = test.diff;

            // Store correct answer
            testCases[round].groupAHasMore = aCount > bCount;
            testCases[round].aCount = aCount;
            testCases[round].bCount = bCount;
        }

        function answer(couldTell) {
            var test = testCases[round];
            countA.textContent = test.aCount;
            countB.textContent = test.bCount;

            results.push({
                base: test.base,
                couldTell: couldTell,
                weberRatio: test.diff / test.base
            });

            setTimeout(function() {
                round++;
                loadRound();
            }, 1500);
        }

        document.getElementById('yesBtn').addEventListener('click', function() {
            answer(true);
        });

        document.getElementById('noBtn').addEventListener('click', function() {
            answer(false);
        });

        function showResults() {
            document.getElementById('questionBox').style.display = 'none';

            var couldTellCount = results.filter(function(r) { return r.couldTell; }).length;
            var threshold = results.find(function(r) { return !r.couldTell; });

            var summary = 'You correctly identified differences in ' + couldTellCount + ' out of ' + maxRounds + ' tests. ';

            if (threshold) {
                summary += 'Your perception threshold was around ' + (threshold.weberRatio * 100).toFixed(0) + '% difference (at ' + threshold.base + ' candles). ';
            }

            summary += 'The Weber-Fechner Law predicts exactly this: as the base stimulus increases, you need proportionally larger changes to notice a difference. The same 1-candle difference that was obvious at 2 candles becomes invisible at 100!';

            document.getElementById('resultsSummary').textContent = summary;
            document.getElementById('resultsSection').classList.add('visible');
        }

        // Interactive slider
        var baseSlider = document.getElementById('baseSlider');
        var jndValue = document.getElementById('jndValue');

        baseSlider.addEventListener('input', function() {
            var base = parseInt(this.value);
            // Weber constant for vision is about 0.02-0.08
            // For counting, it's higher, around 0.1-0.15
            var k = 0.10;
            var jnd = Math.ceil(base * k);
            jndValue.textContent = jnd;
        });

        // Draw the perception curve
        function drawCurve() {
            var canvas = document.getElementById('curveCanvas');
            var ctx = canvas.getContext('2d');

            // Set canvas size
            canvas.width = canvas.offsetWidth * 2;
            canvas.height = canvas.offsetHeight * 2;
            ctx.scale(2, 2);
            var width = canvas.offsetWidth;
            var height = canvas.offsetHeight;

            // Clear
            ctx.fillStyle = 'rgba(20, 35, 50, 0.8)';
            ctx.fillRect(0, 0, width, height);

            var padding = 40;
            var graphWidth = width - padding * 2;
            var graphHeight = height - padding * 2;

            // Draw axes
            ctx.strokeStyle = '#7090b0';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(padding, padding);
            ctx.lineTo(padding, height - padding);
            ctx.lineTo(width - padding, height - padding);
            ctx.stroke();

            // Axis labels
            ctx.fillStyle = '#7090b0';
            ctx.font = '12px Georgia';
            ctx.textAlign = 'center';
            ctx.fillText('Physical Stimulus Intensity', width / 2, height - 10);
            ctx.save();
            ctx.translate(15, height / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('Perceived Intensity', 0, 0);
            ctx.restore();

            // Draw linear line (what we might expect)
            ctx.strokeStyle = 'rgba(231, 76, 60, 0.5)';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(padding, height - padding);
            ctx.lineTo(width - padding, padding);
            ctx.stroke();
            ctx.setLineDash([]);

            // Draw logarithmic curve (actual perception)
            ctx.strokeStyle = '#3498db';
            ctx.lineWidth = 3;
            ctx.beginPath();
            for (var i = 0; i <= 100; i++) {
                var x = padding + (i / 100) * graphWidth;
                // Log curve: y = log(x+1) normalized
                var stimulus = (i / 100) * 100 + 1;
                var perception = Math.log(stimulus) / Math.log(101);
                var y = height - padding - perception * graphHeight;

                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.stroke();

            // Legend
            ctx.font = '11px Georgia';
            ctx.fillStyle = '#e74c3c';
            ctx.fillText('Expected (linear)', width - 80, padding + 20);
            ctx.fillStyle = '#3498db';
            ctx.fillText('Actual (log)', width - 80, padding + 35);
        }

        // Initialize
        loadRound();
        drawCurve();

        window.addEventListener('resize', drawCurve);
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
