<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>699 - Simpson's Paradox | Surprising Paradoxes | CCAB</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #e8e8e8;
            padding: 20px;
        }
        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #64b5f6;
            text-decoration: none;
            font-size: 14px;
            opacity: 0.8;
            z-index: 100;
        }
        .back-link:hover { opacity: 1; }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding-top: 40px;
        }
        h1 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #f39c12, #e74c3c);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .subtitle {
            text-align: center;
            color: #aaa;
            font-size: 1.1rem;
            margin-bottom: 30px;
        }
        .paradox-statement {
            background: rgba(231, 76, 60, 0.15);
            border: 1px solid rgba(231, 76, 60, 0.3);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            text-align: center;
        }
        .paradox-statement h2 {
            color: #e74c3c;
            font-size: 1.5rem;
            margin-bottom: 15px;
        }
        .paradox-statement p {
            font-size: 1.2rem;
            line-height: 1.6;
        }
        .tabs {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        .tab {
            padding: 12px 24px;
            background: rgba(255,255,255,0.1);
            border: none;
            border-radius: 25px;
            color: #e8e8e8;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        .tab:hover { background: rgba(255,255,255,0.2); }
        .tab.active {
            background: linear-gradient(135deg, #f39c12, #e74c3c);
            color: white;
        }
        .example-panel {
            display: none;
            background: rgba(255,255,255,0.05);
            border-radius: 16px;
            padding: 30px;
        }
        .example-panel.active { display: block; }
        .example-title {
            font-size: 1.4rem;
            color: #f39c12;
            margin-bottom: 20px;
            text-align: center;
        }
        .view-toggle {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 25px;
        }
        .toggle-btn {
            padding: 10px 25px;
            background: rgba(100, 181, 246, 0.2);
            border: 2px solid #64b5f6;
            border-radius: 25px;
            color: #64b5f6;
            cursor: pointer;
            font-size: 0.95rem;
            transition: all 0.3s ease;
        }
        .toggle-btn:hover { background: rgba(100, 181, 246, 0.3); }
        .toggle-btn.active {
            background: #64b5f6;
            color: #1a1a2e;
        }
        .visualization {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            justify-content: center;
            margin-bottom: 30px;
        }
        .data-group {
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
            padding: 20px;
            min-width: 280px;
            text-align: center;
        }
        .data-group h3 {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: #64b5f6;
        }
        .bar-container {
            display: flex;
            gap: 20px;
            justify-content: center;
            align-items: flex-end;
            height: 200px;
            margin-bottom: 15px;
        }
        .bar-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .bar {
            width: 60px;
            border-radius: 6px 6px 0 0;
            transition: height 0.8s ease;
            position: relative;
        }
        .bar-a { background: linear-gradient(180deg, #2ecc71, #27ae60); }
        .bar-b { background: linear-gradient(180deg, #e74c3c, #c0392b); }
        .bar-label {
            margin-top: 8px;
            font-size: 0.9rem;
            color: #aaa;
        }
        .bar-value {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-weight: bold;
            font-size: 0.95rem;
        }
        .verdict {
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: bold;
            display: inline-block;
        }
        .verdict.a-wins {
            background: rgba(46, 204, 113, 0.2);
            color: #2ecc71;
        }
        .verdict.b-wins {
            background: rgba(231, 76, 60, 0.2);
            color: #e74c3c;
        }
        .aggregate-note {
            background: rgba(243, 156, 18, 0.15);
            border: 1px solid rgba(243, 156, 18, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            text-align: center;
        }
        .aggregate-note h4 {
            color: #f39c12;
            margin-bottom: 8px;
        }
        .explanation {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 25px;
            margin-top: 25px;
        }
        .explanation h4 {
            color: #f39c12;
            margin-bottom: 15px;
        }
        .explanation p {
            line-height: 1.7;
            margin-bottom: 12px;
        }
        .confounder {
            color: #e74c3c;
            font-weight: bold;
        }
        .numbers-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        .numbers-table th, .numbers-table td {
            padding: 12px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .numbers-table th {
            background: rgba(100, 181, 246, 0.2);
            color: #64b5f6;
        }
        .numbers-table tr:nth-child(even) {
            background: rgba(255,255,255,0.02);
        }
        .highlight-cell {
            background: rgba(243, 156, 18, 0.2) !important;
            font-weight: bold;
        }
        .history {
            background: rgba(155, 89, 182, 0.1);
            border-left: 4px solid #9b59b6;
            padding: 20px;
            margin-top: 30px;
            border-radius: 0 12px 12px 0;
        }
        .history h4 {
            color: #9b59b6;
            margin-bottom: 10px;
        }
        @media (max-width: 768px) {
            h1 { font-size: 1.8rem; }
            .data-group { min-width: 100%; }
            .bar-container { height: 150px; }
            .bar { width: 50px; }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back to Paradoxes</a>

    <div class="container">
        <h1>Simpson's Paradox</h1>
        <p class="subtitle">Edward Simpson (1951) ‚Ä¢ Colin Blyth coined the name (1972)</p>

        <div class="paradox-statement">
            <h2>The Paradox</h2>
            <p>A trend that appears in <strong>every subgroup</strong> of data can <strong>reverse</strong> when the groups are combined!</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showExample('berkeley')">UC Berkeley (1973)</button>
            <button class="tab" onclick="showExample('kidney')">Kidney Stones</button>
            <button class="tab" onclick="showExample('interactive')">Build Your Own</button>
        </div>

        <!-- UC Berkeley Example -->
        <div id="berkeley" class="example-panel active">
            <h3 class="example-title">UC Berkeley Gender Bias Case (1973)</h3>

            <div class="view-toggle">
                <button class="toggle-btn active" onclick="toggleView('berkeley', 'aggregate')">Aggregate View</button>
                <button class="toggle-btn" onclick="toggleView('berkeley', 'department')">By Department</button>
            </div>

            <div id="berkeley-aggregate" class="visualization">
                <div class="data-group">
                    <h3>Graduate Admissions Overall</h3>
                    <div class="bar-container">
                        <div class="bar-wrapper">
                            <div class="bar bar-a" style="height: 176px;">
                                <span class="bar-value">44%</span>
                            </div>
                            <span class="bar-label">Men</span>
                        </div>
                        <div class="bar-wrapper">
                            <div class="bar bar-b" style="height: 140px;">
                                <span class="bar-value">35%</span>
                            </div>
                            <span class="bar-label">Women</span>
                        </div>
                    </div>
                    <div class="verdict b-wins">‚ö†Ô∏è Gender Bias Against Women?</div>
                </div>
            </div>

            <div id="berkeley-department" class="visualization" style="display: none;">
                <div class="data-group">
                    <h3>Department A</h3>
                    <div class="bar-container">
                        <div class="bar-wrapper">
                            <div class="bar bar-a" style="height: 124px;">
                                <span class="bar-value">62%</span>
                            </div>
                            <span class="bar-label">Men</span>
                        </div>
                        <div class="bar-wrapper">
                            <div class="bar bar-b" style="height: 164px;">
                                <span class="bar-value">82%</span>
                            </div>
                            <span class="bar-label">Women</span>
                        </div>
                    </div>
                    <div class="verdict a-wins">‚úì Women Favored</div>
                </div>
                <div class="data-group">
                    <h3>Department B</h3>
                    <div class="bar-container">
                        <div class="bar-wrapper">
                            <div class="bar bar-a" style="height: 126px;">
                                <span class="bar-value">63%</span>
                            </div>
                            <span class="bar-label">Men</span>
                        </div>
                        <div class="bar-wrapper">
                            <div class="bar bar-b" style="height: 136px;">
                                <span class="bar-value">68%</span>
                            </div>
                            <span class="bar-label">Women</span>
                        </div>
                    </div>
                    <div class="verdict a-wins">‚úì Women Favored</div>
                </div>
                <div class="data-group">
                    <h3>Department C</h3>
                    <div class="bar-container">
                        <div class="bar-wrapper">
                            <div class="bar bar-a" style="height: 74px;">
                                <span class="bar-value">37%</span>
                            </div>
                            <span class="bar-label">Men</span>
                        </div>
                        <div class="bar-wrapper">
                            <div class="bar bar-b" style="height: 68px;">
                                <span class="bar-value">34%</span>
                            </div>
                            <span class="bar-label">Women</span>
                        </div>
                    </div>
                    <div class="verdict b-wins">‚âà Nearly Equal</div>
                </div>
                <div class="data-group">
                    <h3>Department D</h3>
                    <div class="bar-container">
                        <div class="bar-wrapper">
                            <div class="bar bar-a" style="height: 66px;">
                                <span class="bar-value">33%</span>
                            </div>
                            <span class="bar-label">Men</span>
                        </div>
                        <div class="bar-wrapper">
                            <div class="bar bar-b" style="height: 70px;">
                                <span class="bar-value">35%</span>
                            </div>
                            <span class="bar-label">Women</span>
                        </div>
                    </div>
                    <div class="verdict a-wins">‚úì Women Favored</div>
                </div>
                <div class="data-group">
                    <h3>Department E</h3>
                    <div class="bar-container">
                        <div class="bar-wrapper">
                            <div class="bar bar-a" style="height: 56px;">
                                <span class="bar-value">28%</span>
                            </div>
                            <span class="bar-label">Men</span>
                        </div>
                        <div class="bar-wrapper">
                            <div class="bar bar-b" style="height: 50px;">
                                <span class="bar-value">25%</span>
                            </div>
                            <span class="bar-label">Women</span>
                        </div>
                    </div>
                    <div class="verdict b-wins">‚âà Nearly Equal</div>
                </div>
                <div class="data-group">
                    <h3>Department F</h3>
                    <div class="bar-container">
                        <div class="bar-wrapper">
                            <div class="bar bar-a" style="height: 12px;">
                                <span class="bar-value">6%</span>
                            </div>
                            <span class="bar-label">Men</span>
                        </div>
                        <div class="bar-wrapper">
                            <div class="bar bar-b" style="height: 14px;">
                                <span class="bar-value">7%</span>
                            </div>
                            <span class="bar-label">Women</span>
                        </div>
                    </div>
                    <div class="verdict a-wins">‚úì Women Favored</div>
                </div>
            </div>

            <div class="aggregate-note" id="berkeley-note">
                <h4>The Reversal!</h4>
                <p>In 4 out of 6 departments, <strong>women had HIGHER acceptance rates</strong> than men!</p>
            </div>

            <div class="explanation">
                <h4>What's the Confounder?</h4>
                <p>The <span class="confounder">confounding variable</span> was <strong>department choice</strong>:</p>
                <p>‚Ä¢ Women disproportionately applied to competitive departments (English, Art History) with low acceptance rates (6-35%)</p>
                <p>‚Ä¢ Men disproportionately applied to less competitive departments (Engineering) with high acceptance rates (60-80%)</p>
                <p>The aggregate data wasn't measuring "gender bias" ‚Äî it was measuring <strong>student preferences</strong>! The weighted average of rejections from hard departments dragged down the female average, creating a statistical illusion.</p>
            </div>
        </div>

        <!-- Kidney Stone Example -->
        <div id="kidney" class="example-panel">
            <h3 class="example-title">Kidney Stone Treatment Study</h3>

            <div class="view-toggle">
                <button class="toggle-btn active" onclick="toggleView('kidney', 'aggregate')">Aggregate View</button>
                <button class="toggle-btn" onclick="toggleView('kidney', 'segmented')">By Stone Size</button>
            </div>

            <div id="kidney-aggregate" class="visualization">
                <div class="data-group">
                    <h3>Overall Success Rate</h3>
                    <div class="bar-container">
                        <div class="bar-wrapper">
                            <div class="bar bar-a" style="height: 156px;">
                                <span class="bar-value">78%</span>
                            </div>
                            <span class="bar-label">Surgery (A)</span>
                        </div>
                        <div class="bar-wrapper">
                            <div class="bar bar-b" style="height: 166px;">
                                <span class="bar-value">83%</span>
                            </div>
                            <span class="bar-label">Non-invasive (B)</span>
                        </div>
                    </div>
                    <div class="verdict b-wins">Treatment B Looks Better!</div>
                </div>
            </div>

            <div id="kidney-segmented" class="visualization" style="display: none;">
                <div class="data-group">
                    <h3>Small Stones</h3>
                    <div class="bar-container">
                        <div class="bar-wrapper">
                            <div class="bar bar-a" style="height: 186px;">
                                <span class="bar-value">93%</span>
                            </div>
                            <span class="bar-label">Surgery (A)</span>
                        </div>
                        <div class="bar-wrapper">
                            <div class="bar bar-b" style="height: 174px;">
                                <span class="bar-value">87%</span>
                            </div>
                            <span class="bar-label">Non-invasive (B)</span>
                        </div>
                    </div>
                    <div class="verdict a-wins">‚úì Surgery (A) Better!</div>
                </div>
                <div class="data-group">
                    <h3>Large Stones</h3>
                    <div class="bar-container">
                        <div class="bar-wrapper">
                            <div class="bar bar-a" style="height: 146px;">
                                <span class="bar-value">73%</span>
                            </div>
                            <span class="bar-label">Surgery (A)</span>
                        </div>
                        <div class="bar-wrapper">
                            <div class="bar bar-b" style="height: 138px;">
                                <span class="bar-value">69%</span>
                            </div>
                            <span class="bar-label">Non-invasive (B)</span>
                        </div>
                    </div>
                    <div class="verdict a-wins">‚úì Surgery (A) Better!</div>
                </div>
            </div>

            <table class="numbers-table">
                <tr>
                    <th></th>
                    <th>Surgery (A)</th>
                    <th>Non-invasive (B)</th>
                </tr>
                <tr>
                    <td><strong>Small Stones</strong></td>
                    <td>81/87 = <strong>93%</strong></td>
                    <td>234/270 = <strong>87%</strong></td>
                </tr>
                <tr>
                    <td><strong>Large Stones</strong></td>
                    <td>192/263 = <strong>73%</strong></td>
                    <td>55/80 = <strong>69%</strong></td>
                </tr>
                <tr class="highlight-cell">
                    <td><strong>Overall</strong></td>
                    <td>273/350 = <strong>78%</strong></td>
                    <td>289/350 = <strong>83%</strong></td>
                </tr>
            </table>

            <div class="explanation">
                <h4>What's the Confounder?</h4>
                <p>The <span class="confounder">confounding variable</span> was <strong>case severity</strong>:</p>
                <p>‚Ä¢ Surgery (A) was primarily used for <em>difficult</em> large stone cases (263 large vs 87 small)</p>
                <p>‚Ä¢ Non-invasive (B) was primarily used for <em>easy</em> small stone cases (270 small vs 80 large)</p>
                <p>Surgery looked worse overall because it was given the hardest cases! When you compare apples to apples (same stone size), surgery wins in both categories.</p>
                <p><strong>Clinical takeaway:</strong> If you needed treatment, you'd want Surgery (A) ‚Äî the "worse" looking option in aggregate data!</p>
            </div>
        </div>

        <!-- Interactive Example -->
        <div id="interactive" class="example-panel">
            <h3 class="example-title">Build Your Own Simpson's Paradox</h3>

            <div style="display: flex; flex-wrap: wrap; gap: 30px; justify-content: center; margin-bottom: 30px;">
                <div class="data-group">
                    <h3>Group 1 (Easy Cases)</h3>
                    <div style="margin: 15px 0;">
                        <label>Treatment A: <input type="number" id="g1a-success" value="90" min="0" max="100" style="width:60px"> / <input type="number" id="g1a-total" value="100" min="1" max="500" style="width:60px"></label>
                    </div>
                    <div style="margin: 15px 0;">
                        <label>Treatment B: <input type="number" id="g1b-success" value="80" min="0" max="100" style="width:60px"> / <input type="number" id="g1b-total" value="400" min="1" max="500" style="width:60px"></label>
                    </div>
                </div>
                <div class="data-group">
                    <h3>Group 2 (Hard Cases)</h3>
                    <div style="margin: 15px 0;">
                        <label>Treatment A: <input type="number" id="g2a-success" value="30" min="0" max="100" style="width:60px"> / <input type="number" id="g2a-total" value="400" min="1" max="500" style="width:60px"></label>
                    </div>
                    <div style="margin: 15px 0;">
                        <label>Treatment B: <input type="number" id="g2b-success" value="20" min="0" max="100" style="width:60px"> / <input type="number" id="g2b-total" value="100" min="1" max="500" style="width:60px"></label>
                    </div>
                </div>
            </div>

            <button onclick="calculateParadox()" style="display:block; margin: 0 auto 30px; padding: 15px 40px; font-size: 1.1rem; background: linear-gradient(135deg, #f39c12, #e74c3c); border: none; border-radius: 30px; color: white; cursor: pointer;">Calculate Results</button>

            <div id="results" style="display: none;">
                <div class="visualization">
                    <div class="data-group">
                        <h3>Group 1 Success Rates</h3>
                        <div class="bar-container">
                            <div class="bar-wrapper">
                                <div class="bar bar-a" id="g1a-bar" style="height: 0px;">
                                    <span class="bar-value" id="g1a-pct">0%</span>
                                </div>
                                <span class="bar-label">A</span>
                            </div>
                            <div class="bar-wrapper">
                                <div class="bar bar-b" id="g1b-bar" style="height: 0px;">
                                    <span class="bar-value" id="g1b-pct">0%</span>
                                </div>
                                <span class="bar-label">B</span>
                            </div>
                        </div>
                        <div class="verdict" id="g1-verdict"></div>
                    </div>
                    <div class="data-group">
                        <h3>Group 2 Success Rates</h3>
                        <div class="bar-container">
                            <div class="bar-wrapper">
                                <div class="bar bar-a" id="g2a-bar" style="height: 0px;">
                                    <span class="bar-value" id="g2a-pct">0%</span>
                                </div>
                                <span class="bar-label">A</span>
                            </div>
                            <div class="bar-wrapper">
                                <div class="bar bar-b" id="g2b-bar" style="height: 0px;">
                                    <span class="bar-value" id="g2b-pct">0%</span>
                                </div>
                                <span class="bar-label">B</span>
                            </div>
                        </div>
                        <div class="verdict" id="g2-verdict"></div>
                    </div>
                    <div class="data-group">
                        <h3>Overall (Combined)</h3>
                        <div class="bar-container">
                            <div class="bar-wrapper">
                                <div class="bar bar-a" id="oa-bar" style="height: 0px;">
                                    <span class="bar-value" id="oa-pct">0%</span>
                                </div>
                                <span class="bar-label">A</span>
                            </div>
                            <div class="bar-wrapper">
                                <div class="bar bar-b" id="ob-bar" style="height: 0px;">
                                    <span class="bar-value" id="ob-pct">0%</span>
                                </div>
                                <span class="bar-label">B</span>
                            </div>
                        </div>
                        <div class="verdict" id="overall-verdict"></div>
                    </div>
                </div>
                <div id="paradox-detected" class="aggregate-note" style="display: none;">
                    <h4>üéâ Simpson's Paradox Detected!</h4>
                    <p>The winner reverses when you combine the groups!</p>
                </div>
            </div>
        </div>

        <div class="history">
            <h4>Historical Note</h4>
            <p>Edward Simpson described this phenomenon in 1951, though Karl Pearson (1899) and Udny Yule (1903) had noted similar effects earlier. Colin Blyth coined the name "Simpson's Paradox" in 1972. The UC Berkeley case became famous after a 1975 Science paper by Peter Bickel, Eugene Hammel, and J.W. O'Connell showed how aggregation hid the truth.</p>
        </div>
    </div>

    <script>
        function showExample(id) {
            document.querySelectorAll('.example-panel').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            event.target.classList.add('active');
        }

        function toggleView(example, view) {
            const parent = document.getElementById(example);
            parent.querySelectorAll('.toggle-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');

            if (example === 'berkeley') {
                document.getElementById('berkeley-aggregate').style.display = view === 'aggregate' ? 'flex' : 'none';
                document.getElementById('berkeley-department').style.display = view === 'department' ? 'flex' : 'none';
                document.getElementById('berkeley-note').style.display = view === 'department' ? 'block' : 'none';
            } else if (example === 'kidney') {
                document.getElementById('kidney-aggregate').style.display = view === 'aggregate' ? 'flex' : 'none';
                document.getElementById('kidney-segmented').style.display = view === 'segmented' ? 'flex' : 'none';
            }
        }

        function calculateParadox() {
            const g1aS = parseInt(document.getElementById('g1a-success').value) || 0;
            const g1aT = parseInt(document.getElementById('g1a-total').value) || 1;
            const g1bS = parseInt(document.getElementById('g1b-success').value) || 0;
            const g1bT = parseInt(document.getElementById('g1b-total').value) || 1;
            const g2aS = parseInt(document.getElementById('g2a-success').value) || 0;
            const g2aT = parseInt(document.getElementById('g2a-total').value) || 1;
            const g2bS = parseInt(document.getElementById('g2b-success').value) || 0;
            const g2bT = parseInt(document.getElementById('g2b-total').value) || 1;

            const g1aP = (g1aS / g1aT) * 100;
            const g1bP = (g1bS / g1bT) * 100;
            const g2aP = (g2aS / g2aT) * 100;
            const g2bP = (g2bS / g2bT) * 100;
            const oaP = ((g1aS + g2aS) / (g1aT + g2aT)) * 100;
            const obP = ((g1bS + g2bS) / (g1bT + g2bT)) * 100;

            document.getElementById('results').style.display = 'block';

            setTimeout(() => {
                document.getElementById('g1a-bar').style.height = (g1aP * 2) + 'px';
                document.getElementById('g1b-bar').style.height = (g1bP * 2) + 'px';
                document.getElementById('g2a-bar').style.height = (g2aP * 2) + 'px';
                document.getElementById('g2b-bar').style.height = (g2bP * 2) + 'px';
                document.getElementById('oa-bar').style.height = (oaP * 2) + 'px';
                document.getElementById('ob-bar').style.height = (obP * 2) + 'px';
            }, 50);

            document.getElementById('g1a-pct').textContent = g1aP.toFixed(1) + '%';
            document.getElementById('g1b-pct').textContent = g1bP.toFixed(1) + '%';
            document.getElementById('g2a-pct').textContent = g2aP.toFixed(1) + '%';
            document.getElementById('g2b-pct').textContent = g2bP.toFixed(1) + '%';
            document.getElementById('oa-pct').textContent = oaP.toFixed(1) + '%';
            document.getElementById('ob-pct').textContent = obP.toFixed(1) + '%';

            const g1Winner = g1aP > g1bP ? 'A' : 'B';
            const g2Winner = g2aP > g2bP ? 'A' : 'B';
            const overallWinner = oaP > obP ? 'A' : 'B';

            setVerdict('g1-verdict', g1Winner);
            setVerdict('g2-verdict', g2Winner);
            setVerdict('overall-verdict', overallWinner);

            const paradox = (g1Winner === g2Winner) && (g1Winner !== overallWinner);
            document.getElementById('paradox-detected').style.display = paradox ? 'block' : 'none';
        }

        function setVerdict(id, winner) {
            const el = document.getElementById(id);
            el.textContent = winner + ' wins!';
            el.className = 'verdict ' + (winner === 'A' ? 'a-wins' : 'b-wins');
        }

        // Initialize with default values
        document.getElementById('berkeley-note').style.display = 'none';
    </script>
</body>
</html>
