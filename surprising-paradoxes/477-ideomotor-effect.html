<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Ideomotor Effect - Your Thoughts Move You</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1a0a1a 0%, #2d1b2d 50%, #1a1a2e 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        header { text-align: center; margin-bottom: 30px; }
        .back-link {
            color: #ff6b6b;
            text-decoration: none;
            margin-bottom: 20px;
            display: inline-block;
        }
        h1 {
            font-size: 2.3rem;
            background: linear-gradient(135deg, #9b59b6, #8e44ad, #6c3483);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }
        .subtitle {
            font-size: 1rem;
            color: #bb99cc;
            max-width: 850px;
            margin: 0 auto;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 320px;
            gap: 25px;
            margin-bottom: 30px;
        }
        @media (max-width: 900px) {
            .main-grid { grid-template-columns: 1fr; }
        }

        .panel {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .demo-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        .tab-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 8px;
            background: rgba(155,89,182,0.2);
            color: #bb99cc;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        .tab-btn.active {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            color: #fff;
        }

        /* Ouija Board */
        .ouija-container {
            position: relative;
            width: 100%;
            aspect-ratio: 1.3;
            background: linear-gradient(135deg, #8B4513 0%, #654321 50%, #4a3520 100%);
            border-radius: 15px;
            overflow: hidden;
            cursor: none;
            user-select: none;
        }
        #ouijaCanvas {
            width: 100%;
            height: 100%;
        }

        /* Pendulum */
        .pendulum-container {
            position: relative;
            width: 100%;
            aspect-ratio: 1;
            background: radial-gradient(ellipse at center, #2a2a4a 0%, #1a1a2e 100%);
            border-radius: 15px;
            overflow: hidden;
            display: none;
        }
        #pendulumCanvas {
            width: 100%;
            height: 100%;
        }

        /* Chevreul */
        .chevreul-container {
            position: relative;
            width: 100%;
            aspect-ratio: 1.2;
            background: #f5f5dc;
            border-radius: 15px;
            overflow: hidden;
            display: none;
        }
        #chevreulCanvas {
            width: 100%;
            height: 100%;
        }

        .instructions {
            margin-top: 15px;
            padding: 15px;
            background: rgba(155,89,182,0.15);
            border-radius: 10px;
            border-left: 3px solid #9b59b6;
        }
        .instructions h4 {
            color: #9b59b6;
            margin-bottom: 8px;
        }
        .instructions p {
            font-size: 0.9rem;
            color: #bb99cc;
        }

        .message-display {
            margin-top: 15px;
            padding: 15px;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            text-align: center;
            min-height: 60px;
        }
        .message-display h4 {
            color: #9b59b6;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        .spelled-message {
            font-size: 1.4rem;
            color: #ffeaa7;
            letter-spacing: 3px;
            font-family: 'Courier New', monospace;
        }

        .btn {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95rem;
            margin-bottom: 10px;
            transition: all 0.3s;
        }
        .btn-primary {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            color: #fff;
        }
        .btn-secondary {
            background: rgba(255,255,255,0.1);
            color: #bb99cc;
        }
        .btn:hover { transform: translateY(-2px); opacity: 0.9; }

        .blindfold-mode {
            background: #000;
        }
        .blindfold-mode .ouija-container {
            background: #000;
        }
        .blindfold-overlay {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 1.2rem;
            z-index: 10;
            pointer-events: none;
        }

        .psychology-box {
            background: linear-gradient(135deg, rgba(155,89,182,0.15), rgba(142,68,173,0.08));
            border: 1px solid rgba(155,89,182,0.3);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }
        .psychology-box h4 {
            color: #9b59b6;
            margin-bottom: 10px;
        }
        .stat-row {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            margin-bottom: 5px;
        }
        .stat-value { color: #ffeaa7; }

        .reveal-box {
            background: rgba(231,76,60,0.2);
            border: 1px solid rgba(231,76,60,0.4);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            display: none;
        }
        .reveal-box h4 {
            color: #e74c3c;
            margin-bottom: 8px;
        }
        .reveal-box p {
            font-size: 0.85rem;
            color: #f5b7b1;
        }

        .research-section {
            background: rgba(255,255,255,0.03);
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            border: 1px solid rgba(255,255,255,0.08);
        }
        .research-section h2 {
            color: #9b59b6;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }
        .research-section h3 {
            color: #bb99cc;
            margin: 20px 0 10px;
            font-size: 1.15rem;
        }
        .research-section p {
            margin-bottom: 12px;
            color: #c0c0c0;
        }
        .key-point {
            background: rgba(155,89,182,0.15);
            border-left: 3px solid #9b59b6;
            padding: 12px 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        .quote {
            font-style: italic;
            border-left: 3px solid #bb99cc;
            padding-left: 15px;
            margin: 15px 0;
            color: #a0a0a0;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="index.html" class="back-link">‚Üê Back to Surprising Paradoxes</a>
            <h1>The Ideomotor Effect</h1>
            <p class="subtitle">Your thoughts create unconscious movements. This explains Ouija boards, pendulums, and dowsing rods‚Äîthey're not supernatural, but they <em>are</em> revealing your own hidden expectations!</p>
        </header>

        <div class="main-grid">
            <div class="panel" id="demoPanel">
                <div class="demo-tabs">
                    <button class="tab-btn active" data-demo="ouija">Ouija Board</button>
                    <button class="tab-btn" data-demo="pendulum">Pendulum</button>
                    <button class="tab-btn" data-demo="chevreul">Chevreul's Test</button>
                </div>

                <div class="ouija-container" id="ouijaDemo">
                    <canvas id="ouijaCanvas"></canvas>
                    <div class="blindfold-overlay" id="blindfoldOverlay" style="display: none;">
                        üôà BLINDFOLDED - Keep moving the cursor!
                    </div>
                </div>

                <div class="pendulum-container" id="pendulumDemo">
                    <canvas id="pendulumCanvas"></canvas>
                </div>

                <div class="chevreul-container" id="chevreulDemo">
                    <canvas id="chevreulCanvas"></canvas>
                </div>

                <div class="instructions" id="instructions">
                    <h4>üìã Ouija Board Demo</h4>
                    <p>Move your cursor over the board. The planchette follows with a delay‚Äîamplifying tiny movements you don't consciously control. Think of a letter... notice how it drifts that way?</p>
                </div>

                <div class="message-display">
                    <h4>MESSAGE SPELLED</h4>
                    <div class="spelled-message" id="spelledMessage">_</div>
                </div>
            </div>

            <div class="panel">
                <h3 style="color: #9b59b6; margin-bottom: 15px;">The Experiment</h3>

                <button class="btn btn-primary" id="blindfoldBtn">
                    üëÅÔ∏è Enable Blindfold Mode
                </button>
                <button class="btn btn-secondary" id="clearMessage">
                    Clear Message
                </button>
                <button class="btn btn-secondary" id="resetDemo">
                    Reset Demo
                </button>

                <div class="psychology-box">
                    <h4>Live Tracking</h4>
                    <div class="stat-row">
                        <span>Cursor micro-movements:</span>
                        <span class="stat-value" id="microMovements">0</span>
                    </div>
                    <div class="stat-row">
                        <span>Planchette drift:</span>
                        <span class="stat-value" id="planchetteDrift">0 px</span>
                    </div>
                    <div class="stat-row">
                        <span>Unconscious bias detected:</span>
                        <span class="stat-value" id="biasDirection">None</span>
                    </div>
                    <div class="stat-row">
                        <span>Letters selected:</span>
                        <span class="stat-value" id="letterCount">0</span>
                    </div>
                </div>

                <div class="reveal-box" id="revealBox">
                    <h4>üî¨ Blindfold Results</h4>
                    <p id="revealText">When you can't see the board, the planchette moves to random positions‚Äîproving you were unconsciously guiding it all along!</p>
                </div>

                <div class="psychology-box" style="margin-top: 15px;">
                    <h4>Why This Happens</h4>
                    <p style="font-size: 0.85rem; color: #bb99cc; margin-bottom: 10px;">
                        William Carpenter (1852) discovered that <strong>thoughts create tiny muscular movements</strong> without conscious intention.
                    </p>
                    <p style="font-size: 0.85rem; color: #bb99cc;">
                        The Ouija planchette <strong>amplifies</strong> these movements. Multiple users create a "feedback loop" where everyone unconsciously pushes toward expected answers.
                    </p>
                </div>

                <div class="psychology-box">
                    <h4>Famous Debunking</h4>
                    <ul style="font-size: 0.85rem; color: #bb99cc; margin-left: 15px;">
                        <li><strong>Michael Faraday (1853):</strong> Table-turning is ideomotor</li>
                        <li><strong>William James:</strong> Automatic writing experiments</li>
                        <li><strong>Ray Hyman:</strong> Dowsing rod analysis</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="research-section">
            <h2>The Science of Unconscious Movement</h2>

            <p>In 1852, physician William Benjamin Carpenter coined the term "ideomotor" to describe a remarkable phenomenon: our thoughts can produce physical movements <em>without any conscious intention</em>. This discovery explains a vast array of seemingly supernatural experiences.</p>

            <h3>Carpenter's Revolutionary Insight</h3>

            <p>Carpenter observed that when we strongly expect or imagine a movement, our muscles make tiny preparatory contractions. These micro-movements are below our conscious awareness, but instruments like Ouija planchettes, pendulums, and dowsing rods <strong>amplify</strong> them into visible motion.</p>

            <div class="key-point">
                <strong>The Core Mechanism:</strong> Ideo (thought) + Motor (movement) = Unconscious muscular responses to mental expectations. When you think "the pendulum will swing left," your hand makes imperceptible movements that cause exactly that outcome‚Äîwithout you realizing you're doing it.
            </div>

            <h3>The Ouija Board Proof</h3>

            <p>The most compelling evidence comes from blindfold experiments:</p>
            <ul style="margin: 10px 0 10px 30px; color: #c0c0c0;">
                <li>When Ouija board users are blindfolded, the planchette produces gibberish</li>
                <li>If the board is secretly rotated 180¬∞, users spell nonsense while believing they're getting messages</li>
                <li>The "spirits" never provide information the users don't already know</li>
            </ul>

            <div class="quote">
                "Honest, intelligent people can unconsciously engage in muscular activity that is consistent with their expectations. They genuinely believe the movements are externally caused."<br>
                ‚Äî Ray Hyman, psychologist
            </div>

            <h3>Chevreul's Pendulum (1833)</h3>

            <p>French chemist Michel Chevreul conducted one of the first scientific investigations. He noticed that a pendulum he held would swing in the direction he was <em>looking</em>. When he closed his eyes or placed a glass barrier to block his view of the pendulum's movement, the swinging stopped!</p>

            <p>This proved the movement came from his own hand, not any external force. Chevreul's experiment remains a classic demonstration used in psychology courses today.</p>

            <h3>How Facilitated Communication Was Debunked</h3>

            <p>In the 1990s, "facilitated communication" claimed to help nonverbal individuals type messages. Facilitators held patients' hands over keyboards. Double-blind tests revealed a troubling truth: when facilitators and patients were shown <em>different</em> pictures, the typed answers matched what the <strong>facilitator</strong> saw, not the patient.</p>

            <p>Well-meaning facilitators were unconsciously guiding hands to type their own expectations‚Äîa tragic ideomotor effect.</p>

            <h3>Dowsing and "Water Witching"</h3>

            <p>Dowsing rods amplify ideomotor movements. Controlled studies consistently show that dowsers perform no better than chance when the location of water or targets is unknown to them. The rods move based on the dowser's expectations and environmental cues‚Äînot hidden water.</p>

            <div class="key-point">
                <strong>The Amplification Factor:</strong> A Y-shaped dowsing rod in "tension position" is mechanically unstable. Tiny hand tremors get amplified into dramatic swings. The dowser feels no conscious effort‚Äîyet their muscles are doing all the work.
            </div>

            <h3>Why People Resist This Explanation</h3>

            <p>The ideomotor effect is difficult to accept because:</p>
            <ul style="margin: 10px 0 10px 30px; color: #c0c0c0;">
                <li><strong>No sense of agency:</strong> We don't <em>feel</em> like we're causing the movement</li>
                <li><strong>Emotional investment:</strong> People want to believe they're contacting spirits</li>
                <li><strong>Confirmation bias:</strong> Hits are remembered, misses forgotten</li>
                <li><strong>Social pressure:</strong> Group Ouija sessions create mutual expectation</li>
            </ul>

            <h3>Modern Research: The Ouija Goes to the Lab</h3>

            <p>A 2012 study at the University of British Columbia found that Ouija board users could answer questions <strong>more accurately</strong> than when consciously guessing‚Äîbut only for information they already knew unconsciously. The ideomotor response tapped into implicit memory that conscious recall couldn't access!</p>

            <p>This suggests the effect isn't just about suggestion‚Äîit may reveal genuine cognitive processes operating below awareness.</p>

            <h3>Try It Yourself: Chevreul's Pendulum</h3>

            <p>Tie a small weight (a ring works perfectly) to a string about 12 inches long. Hold the string steady and look at the weight. <em>Think</em> about the pendulum swinging in a circle. Watch what happens.</p>

            <p>Now close your eyes completely and hold your arm as still as possible. Open your eyes after 30 seconds. The pendulum will have stopped or moved randomly‚Äîproving your visual expectations were driving it.</p>
        </div>
    </div>

    <script>
        // Canvas setups
        const ouijaCanvas = document.getElementById('ouijaCanvas');
        const pendulumCanvas = document.getElementById('pendulumCanvas');
        const chevreulCanvas = document.getElementById('chevreulCanvas');
        const ouijaCtx = ouijaCanvas.getContext('2d');
        const pendulumCtx = pendulumCanvas.getContext('2d');
        const chevreulCtx = chevreulCanvas.getContext('2d');

        let currentDemo = 'ouija';
        let blindfoldMode = false;
        let spelledMessage = '';
        let microMovementCount = 0;
        let letterCount = 0;
        let lastLetterTime = 0;

        // Ouija state
        let planchetteX, planchetteY;
        let targetX, targetY;
        let mouseX = 0, mouseY = 0;
        let lastMouseX = 0, lastMouseY = 0;
        let hoveredLetter = null;
        let hoverTime = 0;

        // Ouija board letters
        const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        let letterPositions = [];

        // Pendulum state
        let pendulumAngle = 0;
        let pendulumVelocity = 0;
        let pendulumBias = { x: 0, y: 0 };

        // Chevreul state
        let chevreulAngle = 0;
        let chevreulVelocity = 0;
        let lookingDirection = null;

        function resizeCanvases() {
            const containers = [
                { canvas: ouijaCanvas, container: document.querySelector('.ouija-container') },
                { canvas: pendulumCanvas, container: document.querySelector('.pendulum-container') },
                { canvas: chevreulCanvas, container: document.querySelector('.chevreul-container') }
            ];

            for (let { canvas, container } of containers) {
                const rect = container.getBoundingClientRect();
                canvas.width = rect.width;
                canvas.height = rect.height;
            }

            // Initialize planchette position
            planchetteX = ouijaCanvas.width / 2;
            planchetteY = ouijaCanvas.height / 2;
            targetX = planchetteX;
            targetY = planchetteY;

            // Calculate letter positions
            calculateLetterPositions();
        }

        function calculateLetterPositions() {
            letterPositions = [];
            const w = ouijaCanvas.width;
            const h = ouijaCanvas.height;
            const marginX = w * 0.08;
            const marginY = h * 0.18;

            // First row: A-M (13 letters)
            for (let i = 0; i < 13; i++) {
                letterPositions.push({
                    letter: letters[i],
                    x: marginX + (i / 12) * (w - 2 * marginX),
                    y: marginY + h * 0.25
                });
            }

            // Second row: N-Z (13 letters)
            for (let i = 13; i < 26; i++) {
                letterPositions.push({
                    letter: letters[i],
                    x: marginX + ((i - 13) / 12) * (w - 2 * marginX),
                    y: marginY + h * 0.45
                });
            }

            // Numbers 0-9
            for (let i = 0; i <= 9; i++) {
                letterPositions.push({
                    letter: String(i),
                    x: marginX * 1.5 + (i / 9) * (w - 3 * marginX),
                    y: marginY + h * 0.65
                });
            }

            // YES, NO, GOODBYE
            letterPositions.push({ letter: 'YES', x: w * 0.2, y: h * 0.1 });
            letterPositions.push({ letter: 'NO', x: w * 0.8, y: h * 0.1 });
            letterPositions.push({ letter: 'GOODBYE', x: w * 0.5, y: h * 0.88 });
        }

        function drawOuijaBoard() {
            const w = ouijaCanvas.width;
            const h = ouijaCanvas.height;

            // Background
            const bgGrad = ouijaCtx.createLinearGradient(0, 0, w, h);
            bgGrad.addColorStop(0, '#8B4513');
            bgGrad.addColorStop(0.5, '#654321');
            bgGrad.addColorStop(1, '#4a3520');
            ouijaCtx.fillStyle = bgGrad;
            ouijaCtx.fillRect(0, 0, w, h);

            // Wood grain lines
            ouijaCtx.strokeStyle = 'rgba(0,0,0,0.1)';
            ouijaCtx.lineWidth = 1;
            for (let i = 0; i < h; i += 8) {
                ouijaCtx.beginPath();
                ouijaCtx.moveTo(0, i + Math.sin(i * 0.1) * 3);
                ouijaCtx.lineTo(w, i + Math.sin(i * 0.1 + 2) * 3);
                ouijaCtx.stroke();
            }

            // Draw decorative corners
            ouijaCtx.fillStyle = '#d4af37';
            ouijaCtx.font = `${w * 0.04}px serif`;
            ouijaCtx.textAlign = 'center';

            // Sun and moon
            ouijaCtx.fillText('‚òÄ', w * 0.12, h * 0.15);
            ouijaCtx.fillText('‚òΩ', w * 0.88, h * 0.15);

            // Draw letters
            ouijaCtx.font = `bold ${w * 0.045}px 'Times New Roman', serif`;

            for (let pos of letterPositions) {
                const isHovered = hoveredLetter === pos.letter;

                if (isHovered) {
                    // Glow effect
                    ouijaCtx.shadowColor = '#ffeaa7';
                    ouijaCtx.shadowBlur = 20;
                    ouijaCtx.fillStyle = '#ffeaa7';
                } else {
                    ouijaCtx.shadowBlur = 0;
                    ouijaCtx.fillStyle = '#d4af37';
                }

                if (pos.letter === 'GOODBYE') {
                    ouijaCtx.font = `bold ${w * 0.035}px 'Times New Roman', serif`;
                } else if (pos.letter === 'YES' || pos.letter === 'NO') {
                    ouijaCtx.font = `bold ${w * 0.04}px 'Times New Roman', serif`;
                } else {
                    ouijaCtx.font = `bold ${w * 0.045}px 'Times New Roman', serif`;
                }

                ouijaCtx.fillText(pos.letter, pos.x, pos.y);
            }

            ouijaCtx.shadowBlur = 0;

            // Draw planchette
            drawPlanchette(ouijaCtx, planchetteX, planchetteY, w * 0.12);
        }

        function drawPlanchette(ctx, x, y, size) {
            ctx.save();
            ctx.translate(x, y);

            // Planchette body (teardrop shape)
            ctx.fillStyle = '#2c1810';
            ctx.strokeStyle = '#8B4513';
            ctx.lineWidth = 3;

            ctx.beginPath();
            ctx.moveTo(0, -size * 0.6);
            ctx.bezierCurveTo(size * 0.5, -size * 0.3, size * 0.4, size * 0.4, 0, size * 0.5);
            ctx.bezierCurveTo(-size * 0.4, size * 0.4, -size * 0.5, -size * 0.3, 0, -size * 0.6);
            ctx.fill();
            ctx.stroke();

            // Glass window (circle)
            ctx.fillStyle = 'rgba(200, 220, 240, 0.3)';
            ctx.strokeStyle = '#8B4513';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.arc(0, 0, size * 0.2, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();

            // Cross-hair in window
            ctx.strokeStyle = 'rgba(139, 69, 19, 0.5)';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(-size * 0.15, 0);
            ctx.lineTo(size * 0.15, 0);
            ctx.moveTo(0, -size * 0.15);
            ctx.lineTo(0, size * 0.15);
            ctx.stroke();

            ctx.restore();
        }

        function updateOuija() {
            // Track micro-movements
            const dx = mouseX - lastMouseX;
            const dy = mouseY - lastMouseY;
            const moveDist = Math.sqrt(dx * dx + dy * dy);

            if (moveDist > 0.5 && moveDist < 50) {
                microMovementCount++;
            }

            lastMouseX = mouseX;
            lastMouseY = mouseY;

            // Planchette follows with lag (amplifying micro-movements)
            if (!blindfoldMode) {
                targetX = mouseX;
                targetY = mouseY;
            } else {
                // In blindfold mode, drift randomly
                targetX += (Math.random() - 0.5) * 5;
                targetY += (Math.random() - 0.5) * 5;

                // Keep in bounds
                targetX = Math.max(50, Math.min(ouijaCanvas.width - 50, targetX));
                targetY = Math.max(50, Math.min(ouijaCanvas.height - 50, targetY));
            }

            // Smooth following with amplification
            const followSpeed = 0.03;
            planchetteX += (targetX - planchetteX) * followSpeed;
            planchetteY += (targetY - planchetteY) * followSpeed;

            // Add tiny drift (ideomotor simulation)
            planchetteX += (Math.random() - 0.5) * 0.5;
            planchetteY += (Math.random() - 0.5) * 0.5;

            // Check which letter is under planchette
            hoveredLetter = null;
            for (let pos of letterPositions) {
                const dist = Math.sqrt((planchetteX - pos.x) ** 2 + (planchetteY - pos.y) ** 2);
                const threshold = pos.letter.length > 1 ? 40 : 25;

                if (dist < threshold) {
                    hoveredLetter = pos.letter;
                    hoverTime++;

                    // Select letter after hovering for a moment
                    if (hoverTime > 60 && Date.now() - lastLetterTime > 800) {
                        if (pos.letter === 'GOODBYE') {
                            spelledMessage = '';
                        } else if (pos.letter !== 'YES' && pos.letter !== 'NO') {
                            spelledMessage += pos.letter;
                            letterCount++;
                        }
                        lastLetterTime = Date.now();
                        hoverTime = 0;
                        updateMessageDisplay();
                    }
                    break;
                }
            }

            if (!hoveredLetter) {
                hoverTime = 0;
            }

            // Update stats
            updateStats();
        }

        function drawPendulum() {
            const w = pendulumCanvas.width;
            const h = pendulumCanvas.height;
            const cx = w / 2;
            const anchorY = 30;
            const length = h * 0.6;

            // Background
            pendulumCtx.fillStyle = '#1a1a2e';
            pendulumCtx.fillRect(0, 0, w, h);

            // Draw guide circle
            pendulumCtx.strokeStyle = 'rgba(155, 89, 182, 0.3)';
            pendulumCtx.lineWidth = 2;
            pendulumCtx.setLineDash([5, 5]);
            pendulumCtx.beginPath();
            pendulumCtx.arc(cx, anchorY + length, length * 0.3, 0, Math.PI * 2);
            pendulumCtx.stroke();
            pendulumCtx.setLineDash([]);

            // Direction labels
            pendulumCtx.fillStyle = 'rgba(155, 89, 182, 0.6)';
            pendulumCtx.font = '14px sans-serif';
            pendulumCtx.textAlign = 'center';
            pendulumCtx.fillText('‚Üê LEFT', cx - length * 0.4, h * 0.85);
            pendulumCtx.fillText('RIGHT ‚Üí', cx + length * 0.4, h * 0.85);
            pendulumCtx.fillText('CIRCLE', cx, h * 0.95);

            // Calculate bob position
            const bobX = cx + Math.sin(pendulumAngle) * length;
            const bobY = anchorY + Math.cos(pendulumAngle) * length;

            // Draw string
            pendulumCtx.strokeStyle = '#888';
            pendulumCtx.lineWidth = 2;
            pendulumCtx.beginPath();
            pendulumCtx.moveTo(cx, anchorY);
            pendulumCtx.lineTo(bobX, bobY);
            pendulumCtx.stroke();

            // Draw anchor
            pendulumCtx.fillStyle = '#555';
            pendulumCtx.beginPath();
            pendulumCtx.arc(cx, anchorY, 8, 0, Math.PI * 2);
            pendulumCtx.fill();

            // Draw bob (crystal/weight)
            const bobGrad = pendulumCtx.createRadialGradient(bobX - 5, bobY - 5, 0, bobX, bobY, 20);
            bobGrad.addColorStop(0, '#e0d0ff');
            bobGrad.addColorStop(0.5, '#9b59b6');
            bobGrad.addColorStop(1, '#6c3483');
            pendulumCtx.fillStyle = bobGrad;
            pendulumCtx.beginPath();
            pendulumCtx.arc(bobX, bobY, 15, 0, Math.PI * 2);
            pendulumCtx.fill();

            // Highlight
            pendulumCtx.fillStyle = 'rgba(255,255,255,0.4)';
            pendulumCtx.beginPath();
            pendulumCtx.arc(bobX - 4, bobY - 4, 5, 0, Math.PI * 2);
            pendulumCtx.fill();

            // Instructions
            pendulumCtx.fillStyle = '#bb99cc';
            pendulumCtx.font = '12px sans-serif';
            pendulumCtx.fillText('Move cursor left/right to "think" about direction', cx, 20);
        }

        function updatePendulum() {
            // Bias based on mouse position
            const w = pendulumCanvas.width;
            const biasStrength = (mouseX - w / 2) / (w / 2) * 0.0003;

            // Apply ideomotor "drift" based on where user is looking/thinking
            pendulumVelocity += biasStrength;

            // Damping
            pendulumVelocity *= 0.995;

            // Update angle
            pendulumAngle += pendulumVelocity;

            // Gravity restoration (weak)
            pendulumVelocity -= Math.sin(pendulumAngle) * 0.0001;
        }

        function drawChevreul() {
            const w = chevreulCanvas.width;
            const h = chevreulCanvas.height;

            // Cream paper background
            chevreulCtx.fillStyle = '#f5f5dc';
            chevreulCtx.fillRect(0, 0, w, h);

            // Grid lines
            chevreulCtx.strokeStyle = 'rgba(0,0,0,0.1)';
            chevreulCtx.lineWidth = 1;
            for (let x = 0; x < w; x += 40) {
                chevreulCtx.beginPath();
                chevreulCtx.moveTo(x, 0);
                chevreulCtx.lineTo(x, h);
                chevreulCtx.stroke();
            }
            for (let y = 0; y < h; y += 40) {
                chevreulCtx.beginPath();
                chevreulCtx.moveTo(0, y);
                chevreulCtx.lineTo(w, y);
                chevreulCtx.stroke();
            }

            // Center cross
            chevreulCtx.strokeStyle = 'rgba(0,0,0,0.3)';
            chevreulCtx.lineWidth = 2;
            const cx = w / 2;
            const cy = h / 2;
            chevreulCtx.beginPath();
            chevreulCtx.moveTo(cx - 100, cy);
            chevreulCtx.lineTo(cx + 100, cy);
            chevreulCtx.moveTo(cx, cy - 100);
            chevreulCtx.lineTo(cx, cy + 100);
            chevreulCtx.stroke();

            // Labels
            chevreulCtx.fillStyle = '#333';
            chevreulCtx.font = 'bold 14px sans-serif';
            chevreulCtx.textAlign = 'center';
            chevreulCtx.fillText('HORIZONTAL', cx, cy + 130);
            chevreulCtx.save();
            chevreulCtx.translate(cx - 130, cy);
            chevreulCtx.rotate(-Math.PI / 2);
            chevreulCtx.fillText('VERTICAL', 0, 0);
            chevreulCtx.restore();

            // Pendulum trace (showing drift)
            const anchorY = 30;
            const length = h * 0.35;
            const bobX = cx + Math.sin(chevreulAngle) * length;
            const bobY = anchorY + length;

            // String
            chevreulCtx.strokeStyle = '#333';
            chevreulCtx.lineWidth = 1;
            chevreulCtx.beginPath();
            chevreulCtx.moveTo(cx, anchorY);
            chevreulCtx.lineTo(bobX, bobY);
            chevreulCtx.stroke();

            // Bob
            chevreulCtx.fillStyle = '#8e44ad';
            chevreulCtx.beginPath();
            chevreulCtx.arc(bobX, bobY, 12, 0, Math.PI * 2);
            chevreulCtx.fill();

            // Direction indicator based on mouse quadrant
            const mx = mouseX - cx;
            const my = mouseY - cy;
            let direction = '';
            if (Math.abs(mx) > Math.abs(my)) {
                direction = mx > 0 ? '‚Üí LOOKING RIGHT' : '‚Üê LOOKING LEFT';
            } else {
                direction = my > 0 ? '‚Üì LOOKING DOWN' : '‚Üë LOOKING UP';
            }

            chevreulCtx.fillStyle = '#9b59b6';
            chevreulCtx.font = '16px sans-serif';
            chevreulCtx.fillText(direction, cx, h - 20);
            chevreulCtx.font = '12px sans-serif';
            chevreulCtx.fillStyle = '#666';
            chevreulCtx.fillText("Chevreul's discovery: The pendulum swings toward where you LOOK", cx, h - 5);
        }

        function updateChevreul() {
            const w = chevreulCanvas.width;
            const h = chevreulCanvas.height;
            const cx = w / 2;
            const cy = h / 2;

            // Direction of gaze influences pendulum
            const mx = mouseX - cx;
            const biasStrength = mx / (w / 2) * 0.0005;

            chevreulVelocity += biasStrength;
            chevreulVelocity *= 0.99;
            chevreulAngle += chevreulVelocity;

            // Limit swing
            if (Math.abs(chevreulAngle) > 0.5) {
                chevreulAngle = Math.sign(chevreulAngle) * 0.5;
                chevreulVelocity *= -0.5;
            }
        }

        function updateMessageDisplay() {
            const display = document.getElementById('spelledMessage');
            display.textContent = spelledMessage || '_';
        }

        function updateStats() {
            document.getElementById('microMovements').textContent = microMovementCount;
            document.getElementById('planchetteDrift').textContent =
                Math.round(Math.sqrt((planchetteX - targetX) ** 2 + (planchetteY - targetY) ** 2)) + ' px';
            document.getElementById('letterCount').textContent = letterCount;

            // Detect bias direction
            const driftX = planchetteX - ouijaCanvas.width / 2;
            const driftY = planchetteY - ouijaCanvas.height / 2;
            let bias = 'None';
            if (Math.abs(driftX) > 50 || Math.abs(driftY) > 50) {
                if (Math.abs(driftX) > Math.abs(driftY)) {
                    bias = driftX > 0 ? 'Right ‚Üí' : '‚Üê Left';
                } else {
                    bias = driftY > 0 ? 'Down ‚Üì' : '‚Üë Up';
                }
            }
            document.getElementById('biasDirection').textContent = bias;
        }

        function animate() {
            if (currentDemo === 'ouija') {
                updateOuija();
                drawOuijaBoard();
            } else if (currentDemo === 'pendulum') {
                updatePendulum();
                drawPendulum();
            } else if (currentDemo === 'chevreul') {
                updateChevreul();
                drawChevreul();
            }

            requestAnimationFrame(animate);
        }

        // Event listeners
        document.querySelector('.ouija-container').addEventListener('mousemove', (e) => {
            const rect = ouijaCanvas.getBoundingClientRect();
            mouseX = e.clientX - rect.left;
            mouseY = e.clientY - rect.top;
        });

        document.querySelector('.pendulum-container').addEventListener('mousemove', (e) => {
            const rect = pendulumCanvas.getBoundingClientRect();
            mouseX = e.clientX - rect.left;
            mouseY = e.clientY - rect.top;
        });

        document.querySelector('.chevreul-container').addEventListener('mousemove', (e) => {
            const rect = chevreulCanvas.getBoundingClientRect();
            mouseX = e.clientX - rect.left;
            mouseY = e.clientY - rect.top;
        });

        // Tab switching
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');

                currentDemo = this.dataset.demo;

                document.getElementById('ouijaDemo').style.display = currentDemo === 'ouija' ? 'block' : 'none';
                document.getElementById('pendulumDemo').style.display = currentDemo === 'pendulum' ? 'block' : 'none';
                document.getElementById('chevreulDemo').style.display = currentDemo === 'chevreul' ? 'block' : 'none';

                // Update instructions
                const instructions = document.getElementById('instructions');
                if (currentDemo === 'ouija') {
                    instructions.innerHTML = `<h4>üìã Ouija Board Demo</h4>
                        <p>Move your cursor over the board. The planchette follows with a delay‚Äîamplifying tiny movements you don't consciously control. Think of a letter... notice how it drifts that way?</p>`;
                } else if (currentDemo === 'pendulum') {
                    instructions.innerHTML = `<h4>üìã Pendulum Demo</h4>
                        <p>Move your cursor left or right while "thinking" about which direction the pendulum should swing. Watch how your expectations create the movement!</p>`;
                } else if (currentDemo === 'chevreul') {
                    instructions.innerHTML = `<h4>üìã Chevreul's Pendulum (1833)</h4>
                        <p>Move your cursor to different parts of the grid. The pendulum swings toward where you're "looking"‚Äîproving that visual attention creates unconscious muscle movements!</p>`;
                }

                resizeCanvases();
            });
        });

        // Blindfold mode
        document.getElementById('blindfoldBtn').addEventListener('click', function() {
            blindfoldMode = !blindfoldMode;
            this.textContent = blindfoldMode ? 'üëÅÔ∏è Disable Blindfold' : 'üëÅÔ∏è Enable Blindfold Mode';

            const overlay = document.getElementById('blindfoldOverlay');
            const panel = document.getElementById('demoPanel');
            const revealBox = document.getElementById('revealBox');

            if (blindfoldMode) {
                overlay.style.display = 'flex';
                panel.classList.add('blindfold-mode');
                revealBox.style.display = 'block';
                revealBox.querySelector('#revealText').textContent =
                    'Blindfold ON! Keep moving your cursor. The planchette is now drifting randomly‚Äîwithout your visual guidance, it can\'t find meaningful letters.';
            } else {
                overlay.style.display = 'none';
                panel.classList.remove('blindfold-mode');
                revealBox.querySelector('#revealText').textContent =
                    'Blindfold OFF. Notice how much more "purposeful" the movement feels now? That\'s your unconscious taking over again!';
            }
        });

        document.getElementById('clearMessage').addEventListener('click', () => {
            spelledMessage = '';
            letterCount = 0;
            updateMessageDisplay();
        });

        document.getElementById('resetDemo').addEventListener('click', () => {
            spelledMessage = '';
            letterCount = 0;
            microMovementCount = 0;
            planchetteX = ouijaCanvas.width / 2;
            planchetteY = ouijaCanvas.height / 2;
            targetX = planchetteX;
            targetY = planchetteY;
            pendulumAngle = 0;
            pendulumVelocity = 0;
            chevreulAngle = 0;
            chevreulVelocity = 0;
            updateMessageDisplay();
            updateStats();
        });

        // Initialize
        window.addEventListener('resize', resizeCanvases);
        resizeCanvases();
        animate();
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
