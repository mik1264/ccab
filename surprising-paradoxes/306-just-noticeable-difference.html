<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Just Noticeable Difference (JND) | Surprising Paradoxes</title>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --sage: #8A9A5B;
            --moss: #606C38;
            --earth: #DDA15E;
            --cream: #FEFAE0;
            --terracotta: #BC6C25;
            --dark-moss: #283618;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, var(--cream) 0%, #f4f1de 50%, #ede8d5 100%);
            min-height: 100vh;
            color: var(--dark-moss);
            line-height: 1.7;
        }

        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            text-decoration: none;
            color: var(--moss);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 100;
            background: rgba(255,255,255,0.9);
            padding: 10px 16px;
            border-radius: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .back-link:hover {
            transform: translateX(-3px);
            background: white;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 80px 20px 60px;
        }

        header {
            text-align: center;
            margin-bottom: 50px;
        }

        h1 {
            font-family: 'Lora', serif;
            font-size: 2.8rem;
            color: var(--moss);
            margin-bottom: 15px;
        }

        .subtitle {
            font-size: 1.3rem;
            color: var(--sage);
            font-style: italic;
        }

        .intro-card {
            background: rgba(255,255,255,0.8);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 35px;
            margin-bottom: 40px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .intro-card p {
            font-size: 1.1rem;
            margin-bottom: 15px;
        }

        .formula-box {
            background: linear-gradient(135deg, var(--moss), var(--dark-moss));
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin: 25px 0;
        }

        .formula {
            font-family: 'Lora', serif;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .formula-label {
            font-size: 1rem;
            opacity: 0.9;
        }

        /* === EXPERIMENT SECTION === */
        .experiment-section {
            background: rgba(255,255,255,0.85);
            border-radius: 20px;
            padding: 35px;
            margin-bottom: 40px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .experiment-section h2 {
            font-family: 'Lora', serif;
            font-size: 1.8rem;
            color: var(--moss);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .experiment-icon {
            font-size: 1.5rem;
        }

        .experiment-intro {
            margin-bottom: 25px;
            color: #555;
        }

        /* Brightness Experiment */
        .brightness-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
        }

        .circles-row {
            display: flex;
            gap: 60px;
            justify-content: center;
        }

        .circle-wrapper {
            text-align: center;
        }

        .brightness-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            border: 4px solid transparent;
        }

        .brightness-circle:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .brightness-circle.selected {
            border-color: var(--terracotta);
        }

        .circle-label {
            margin-top: 12px;
            font-weight: 600;
            color: var(--moss);
        }

        .brightness-controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .base-brightness-control {
            display: flex;
            align-items: center;
            gap: 15px;
            background: rgba(96, 108, 56, 0.1);
            padding: 15px 25px;
            border-radius: 30px;
        }

        .base-brightness-control label {
            font-weight: 600;
            color: var(--moss);
        }

        .base-slider {
            width: 200px;
            accent-color: var(--moss);
        }

        .brightness-btn {
            padding: 12px 30px;
            font-size: 1rem;
            font-weight: 600;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .brightness-btn.primary {
            background: linear-gradient(135deg, var(--moss), var(--dark-moss));
            color: white;
        }

        .brightness-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(96, 108, 56, 0.4);
        }

        .brightness-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .brightness-feedback {
            font-size: 1.1rem;
            padding: 15px 25px;
            border-radius: 12px;
            text-align: center;
            min-height: 50px;
        }

        .brightness-feedback.correct {
            background: rgba(39, 174, 96, 0.15);
            color: #1e8449;
        }

        .brightness-feedback.incorrect {
            background: rgba(231, 76, 60, 0.15);
            color: #c0392b;
        }

        .brightness-feedback.same {
            background: rgba(52, 152, 219, 0.15);
            color: #2980b9;
        }

        /* Results Display */
        .results-box {
            background: linear-gradient(135deg, rgba(138, 154, 91, 0.15), rgba(221, 161, 94, 0.15));
            border-radius: 15px;
            padding: 25px;
            margin-top: 25px;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            text-align: center;
        }

        .result-item {
            padding: 15px;
            background: rgba(255,255,255,0.7);
            border-radius: 10px;
        }

        .result-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--moss);
        }

        .result-label {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
        }

        /* Weber Fraction Chart */
        .weber-chart-container {
            margin-top: 30px;
        }

        .weber-chart {
            width: 100%;
            height: 250px;
            background: white;
            border-radius: 15px;
            border: 1px solid rgba(96, 108, 56, 0.2);
        }

        /* Sound Experiment */
        .sound-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 25px;
        }

        .sound-buttons {
            display: flex;
            gap: 30px;
        }

        .sound-btn {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 4px solid var(--moss);
            background: linear-gradient(135deg, var(--cream), white);
            cursor: pointer;
            font-size: 2.5rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .sound-btn:hover {
            transform: scale(1.08);
            box-shadow: 0 8px 25px rgba(96, 108, 56, 0.3);
        }

        .sound-btn.playing {
            background: linear-gradient(135deg, var(--moss), var(--sage));
            color: white;
            animation: pulse 0.5s ease infinite alternate;
        }

        @keyframes pulse {
            from { transform: scale(1); }
            to { transform: scale(1.05); }
        }

        .sound-choice-btns {
            display: flex;
            gap: 20px;
        }

        .choice-btn {
            padding: 15px 40px;
            font-size: 1.1rem;
            font-weight: 600;
            border: 3px solid var(--moss);
            background: white;
            color: var(--moss);
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .choice-btn:hover {
            background: var(--moss);
            color: white;
        }

        .choice-btn.selected {
            background: var(--terracotta);
            border-color: var(--terracotta);
            color: white;
        }

        /* Weight Experiment */
        .weight-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 25px;
        }

        .weights-row {
            display: flex;
            gap: 80px;
            justify-content: center;
        }

        .weight-wrapper {
            text-align: center;
            cursor: pointer;
        }

        .weight-visual {
            width: 100px;
            height: 100px;
            background: linear-gradient(145deg, #666, #333);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            font-weight: 700;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
            position: relative;
        }

        .weight-visual::after {
            content: '';
            position: absolute;
            top: 5px;
            left: 10%;
            width: 80%;
            height: 30%;
            background: linear-gradient(180deg, rgba(255,255,255,0.3), transparent);
            border-radius: 10px 10px 50% 50%;
        }

        .weight-wrapper:hover .weight-visual {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.4);
        }

        .weight-wrapper.selected .weight-visual {
            outline: 4px solid var(--terracotta);
            outline-offset: 4px;
        }

        .weight-label {
            margin-top: 15px;
            font-weight: 600;
            color: var(--moss);
        }

        .weight-grams {
            font-size: 0.9rem;
            color: #888;
        }

        /* Explanation Sections */
        .explanation-section {
            background: rgba(255,255,255,0.8);
            border-radius: 20px;
            padding: 35px;
            margin-bottom: 40px;
        }

        .explanation-section h2 {
            font-family: 'Lora', serif;
            font-size: 1.8rem;
            color: var(--moss);
            margin-bottom: 20px;
        }

        .applications-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .application-card {
            background: linear-gradient(135deg, rgba(96, 108, 56, 0.1), rgba(138, 154, 91, 0.1));
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        .application-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .application-card h4 {
            color: var(--moss);
            margin-bottom: 8px;
        }

        .application-card p {
            font-size: 0.9rem;
            color: #666;
        }

        /* Timeline */
        .timeline {
            margin-top: 30px;
            position: relative;
            padding-left: 30px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(180deg, var(--moss), var(--sage));
            border-radius: 2px;
        }

        .timeline-item {
            position: relative;
            margin-bottom: 25px;
            padding-left: 25px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -25px;
            top: 5px;
            width: 15px;
            height: 15px;
            background: var(--earth);
            border-radius: 50%;
            border: 3px solid white;
        }

        .timeline-year {
            font-weight: 700;
            color: var(--terracotta);
        }

        /* Weber Fractions Table */
        .fractions-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .fractions-table th,
        .fractions-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid rgba(96, 108, 56, 0.2);
        }

        .fractions-table th {
            background: rgba(96, 108, 56, 0.1);
            font-weight: 600;
            color: var(--moss);
        }

        .fractions-table tr:hover {
            background: rgba(96, 108, 56, 0.05);
        }

        .fraction-value {
            font-family: 'Lora', serif;
            font-weight: 600;
            color: var(--terracotta);
        }

        /* Fechner Section */
        .fechner-box {
            background: linear-gradient(135deg, var(--earth), var(--terracotta));
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-top: 30px;
        }

        .fechner-box h3 {
            font-family: 'Lora', serif;
            font-size: 1.4rem;
            margin-bottom: 15px;
        }

        .fechner-formula {
            font-family: 'Lora', serif;
            font-size: 2rem;
            text-align: center;
            margin: 20px 0;
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
        }

        @media (max-width: 768px) {
            h1 { font-size: 2rem; }
            .formula { font-size: 1.8rem; }
            .circles-row, .weights-row, .sound-buttons {
                flex-direction: column;
                gap: 30px;
                align-items: center;
            }
            .results-grid { grid-template-columns: 1fr; }
            .applications-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back to Paradoxes</a>

    <div class="container">
        <header>
            <h1>Weber's Law</h1>
            <p class="subtitle">The Just Noticeable Difference</p>
        </header>

        <div class="intro-card">
            <p>
                <strong>Can you tell if this weight is heavier?</strong> It depends on what you're already holding.
                In 1834, German physiologist <strong>Ernst Heinrich Weber</strong> discovered a profound truth about
                human perception: the smallest difference you can detect between two stimuli isn't a fixed amount‚Äîit's
                a constant <em>ratio</em> of the original stimulus.
            </p>
            <div class="formula-box">
                <div class="formula">ŒîI / I = k</div>
                <div class="formula-label">
                    ŒîI = Just Noticeable Difference &nbsp;|&nbsp; I = Stimulus Intensity &nbsp;|&nbsp; k = Weber Fraction (constant)
                </div>
            </div>
            <p>
                Lifting 100g vs 102g? You'll notice. But 1000g vs 1002g? Impossible to tell apart‚Äîeven though both
                have the same 2g difference. You'd need about 1020g to notice a change. This isn't a bug in human
                perception; it's a feature that helps us navigate a world of vastly different intensities.
            </p>
        </div>

        <!-- Brightness Experiment -->
        <div class="experiment-section">
            <h2><span class="experiment-icon">üí°</span> Experiment 1: Brightness Discrimination</h2>
            <p class="experiment-intro">
                Click on the circle that appears <strong>brighter</strong>. As you succeed, the difference will get smaller,
                approaching your Just Noticeable Difference (JND). The Weber fraction for brightness is approximately 0.08 (8%).
            </p>

            <div class="brightness-container">
                <div class="base-brightness-control">
                    <label>Base Brightness:</label>
                    <input type="range" id="baseBrightness" class="base-slider" min="20" max="80" value="50">
                    <span id="baseBrightnessVal">50%</span>
                </div>

                <div class="circles-row">
                    <div class="circle-wrapper">
                        <div class="brightness-circle" id="circleA" onclick="selectCircle('A')"></div>
                        <div class="circle-label">Circle A</div>
                    </div>
                    <div class="circle-wrapper">
                        <div class="brightness-circle" id="circleB" onclick="selectCircle('B')"></div>
                        <div class="circle-label">Circle B</div>
                    </div>
                </div>

                <div class="brightness-feedback" id="brightnessFeedback"></div>

                <div class="brightness-controls">
                    <button class="brightness-btn primary" id="startBrightnessBtn" onclick="startBrightnessTest()">
                        Start Test
                    </button>
                </div>

                <div class="results-box" id="brightnessResults" style="display: none;">
                    <div class="results-grid">
                        <div class="result-item">
                            <div class="result-value" id="brightnessTrials">0</div>
                            <div class="result-label">Trials</div>
                        </div>
                        <div class="result-item">
                            <div class="result-value" id="brightnessJND">-</div>
                            <div class="result-label">Your JND</div>
                        </div>
                        <div class="result-item">
                            <div class="result-value" id="brightnessWeber">-</div>
                            <div class="result-label">Weber Fraction</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sound Experiment -->
        <div class="experiment-section">
            <h2><span class="experiment-icon">üîä</span> Experiment 2: Loudness Discrimination</h2>
            <p class="experiment-intro">
                Listen to both sounds by clicking the buttons, then choose which one is <strong>louder</strong>.
                The Weber fraction for loudness is approximately 0.05 (5%)‚Äîwe're quite sensitive to volume changes!
            </p>

            <div class="sound-container">
                <div class="sound-buttons">
                    <button class="sound-btn" id="soundA" onclick="playSound('A')">üîà</button>
                    <button class="sound-btn" id="soundB" onclick="playSound('B')">üîà</button>
                </div>

                <div class="sound-choice-btns" id="soundChoiceBtns" style="display: none;">
                    <button class="choice-btn" onclick="chooseLouder('A')">Sound A is Louder</button>
                    <button class="choice-btn" onclick="chooseLouder('B')">Sound B is Louder</button>
                    <button class="choice-btn" onclick="chooseLouder('same')">Can't Tell</button>
                </div>

                <div class="brightness-feedback" id="soundFeedback"></div>

                <button class="brightness-btn primary" id="startSoundBtn" onclick="startSoundTest()">
                    Start Sound Test
                </button>

                <div class="results-box" id="soundResults" style="display: none;">
                    <div class="results-grid">
                        <div class="result-item">
                            <div class="result-value" id="soundTrials">0</div>
                            <div class="result-label">Trials</div>
                        </div>
                        <div class="result-item">
                            <div class="result-value" id="soundJND">-</div>
                            <div class="result-label">Your JND (dB)</div>
                        </div>
                        <div class="result-item">
                            <div class="result-value" id="soundWeber">-</div>
                            <div class="result-label">Weber Fraction</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Weight Experiment -->
        <div class="experiment-section">
            <h2><span class="experiment-icon">‚öñÔ∏è</span> Experiment 3: Weight Discrimination</h2>
            <p class="experiment-intro">
                Imagine lifting these weights. Click on the one you think is <strong>heavier</strong>.
                Weber's original experiments were on weight‚Äîhe found a fraction of about 0.02 (2%), meaning
                you need a 2% difference to notice a weight change.
            </p>

            <div class="weight-container">
                <div class="weights-row">
                    <div class="weight-wrapper" id="weightWrapperA" onclick="selectWeight('A')">
                        <div class="weight-visual" id="weightA">A</div>
                        <div class="weight-label">Weight A</div>
                        <div class="weight-grams" id="weightGramsA"></div>
                    </div>
                    <div class="weight-wrapper" id="weightWrapperB" onclick="selectWeight('B')">
                        <div class="weight-visual" id="weightB">B</div>
                        <div class="weight-label">Weight B</div>
                        <div class="weight-grams" id="weightGramsB"></div>
                    </div>
                </div>

                <div class="brightness-feedback" id="weightFeedback"></div>

                <button class="brightness-btn primary" id="startWeightBtn" onclick="startWeightTest()">
                    Start Weight Test
                </button>

                <div class="results-box" id="weightResults" style="display: none;">
                    <div class="results-grid">
                        <div class="result-item">
                            <div class="result-value" id="weightTrials">0</div>
                            <div class="result-label">Trials</div>
                        </div>
                        <div class="result-item">
                            <div class="result-value" id="weightJND">-</div>
                            <div class="result-label">Your JND (g)</div>
                        </div>
                        <div class="result-item">
                            <div class="result-value" id="weightWeber">-</div>
                            <div class="result-label">Weber Fraction</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Weber Fractions -->
        <div class="explanation-section">
            <h2>Weber Fractions Across the Senses</h2>
            <p>
                Different senses have different Weber fractions, revealing how finely tuned each sensory system is.
                Lower fractions mean greater sensitivity to small changes.
            </p>

            <table class="fractions-table">
                <thead>
                    <tr>
                        <th>Sense / Stimulus</th>
                        <th>Weber Fraction</th>
                        <th>What This Means</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>‚ö° Electric Shock</td>
                        <td class="fraction-value">0.01 (1%)</td>
                        <td>Extremely sensitive‚Äîsurvival advantage!</td>
                    </tr>
                    <tr>
                        <td>‚öñÔ∏è Lifted Weight</td>
                        <td class="fraction-value">0.02 (2%)</td>
                        <td>We evolved to detect load changes while carrying</td>
                    </tr>
                    <tr>
                        <td>üìè Line Length</td>
                        <td class="fraction-value">0.03 (3%)</td>
                        <td>Visual system is highly calibrated</td>
                    </tr>
                    <tr>
                        <td>üîä Sound Intensity</td>
                        <td class="fraction-value">0.05 (5%)</td>
                        <td>Useful for locating sounds, detecting threats</td>
                    </tr>
                    <tr>
                        <td>üí° Brightness</td>
                        <td class="fraction-value">0.08 (8%)</td>
                        <td>Moderate sensitivity to light changes</td>
                    </tr>
                    <tr>
                        <td>üßÇ Saltiness</td>
                        <td class="fraction-value">0.08 (8%)</td>
                        <td>Taste is less precise than other senses</td>
                    </tr>
                    <tr>
                        <td>üéµ Pitch (Frequency)</td>
                        <td class="fraction-value">0.003 (0.3%)</td>
                        <td>Incredibly precise‚Äîenables music perception</td>
                    </tr>
                </tbody>
            </table>

            <div class="fechner-box">
                <h3>Fechner's Extension: The Logarithmic Law</h3>
                <p>
                    In 1860, Gustav Fechner extended Weber's work to derive a fundamental law of psychophysics:
                    <strong>perceived intensity is proportional to the logarithm of stimulus intensity</strong>.
                </p>
                <div class="fechner-formula">S = k ¬∑ log(I)</div>
                <p>
                    This explains why we use decibels for sound (logarithmic scale), why camera f-stops double
                    light geometrically, and why our perception of money isn't linear‚Äîthe jump from $10 to $100
                    feels similar to $100 to $1,000.
                </p>
            </div>
        </div>

        <!-- History -->
        <div class="explanation-section">
            <h2>A Brief History</h2>
            <div class="timeline">
                <div class="timeline-item">
                    <span class="timeline-year">1834</span> ‚Äì Ernst Heinrich Weber publishes his weight-lifting experiments,
                    discovering the constant ratio principle.
                </div>
                <div class="timeline-item">
                    <span class="timeline-year">1851</span> ‚Äì Weber publishes <em>Der Tastsinn und das Gemeingef√ºhl</em>,
                    formalizing his findings on touch and proprioception.
                </div>
                <div class="timeline-item">
                    <span class="timeline-year">1860</span> ‚Äì Gustav Fechner publishes <em>Elemente der Psychophysik</em>,
                    deriving the logarithmic law and establishing psychophysics as a field.
                </div>
                <div class="timeline-item">
                    <span class="timeline-year">1957</span> ‚Äì S. S. Stevens proposes the Power Law as an alternative,
                    finding that some sensory modalities follow exponential rather than logarithmic relationships.
                </div>
                <div class="timeline-item">
                    <span class="timeline-year">Today</span> ‚Äì Weber's Law remains foundational in psychophysics,
                    neuroscience, UX design, and economics (prospect theory).
                </div>
            </div>
        </div>

        <!-- Applications -->
        <div class="explanation-section">
            <h2>Real-World Applications</h2>
            <p>
                Weber's Law isn't just academic‚Äîit shapes how products are designed, prices are set, and interfaces are built.
            </p>

            <div class="applications-grid">
                <div class="application-card">
                    <div class="application-icon">üí∞</div>
                    <h4>Pricing Strategy</h4>
                    <p>A $5 discount on a $20 item feels significant; on a $500 item, it's negligible. Marketers use JND to set "meaningful" discounts.</p>
                </div>
                <div class="application-card">
                    <div class="application-icon">üì¶</div>
                    <h4>Product Sizing</h4>
                    <p>Companies shrink package sizes just below the JND‚Äîthe infamous "shrinkflation"‚Äîso consumers don't notice.</p>
                </div>
                <div class="application-card">
                    <div class="application-icon">üé®</div>
                    <h4>UI/UX Design</h4>
                    <p>Progress bars, loading indicators, and animation speeds are calibrated to JND for smooth, perceptible feedback.</p>
                </div>
                <div class="application-card">
                    <div class="application-icon">üéπ</div>
                    <h4>Audio Engineering</h4>
                    <p>Decibel scales and audio compression algorithms are based on the logarithmic nature of loudness perception.</p>
                </div>
                <div class="application-card">
                    <div class="application-icon">üì∏</div>
                    <h4>Photography</h4>
                    <p>F-stops on cameras follow geometric progression because our perception of light is logarithmic.</p>
                </div>
                <div class="application-card">
                    <div class="application-icon">üß†</div>
                    <h4>Neuroscience</h4>
                    <p>Weber's Law emerges from how neurons encode stimulus intensity through firing rates.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // === BRIGHTNESS EXPERIMENT ===
        let brightnessState = {
            testing: false,
            baseLevel: 50,
            difference: 20,
            brighterSide: null,
            trials: 0,
            correct: 0,
            jndHistory: [],
            selected: null
        };

        const baseBrightnessSlider = document.getElementById('baseBrightness');
        baseBrightnessSlider.addEventListener('input', () => {
            brightnessState.baseLevel = parseInt(baseBrightnessSlider.value);
            document.getElementById('baseBrightnessVal').textContent = brightnessState.baseLevel + '%';
        });

        function updateCircles() {
            const base = brightnessState.baseLevel;
            const diff = brightnessState.difference;
            const brighter = base + diff;

            brightnessState.brighterSide = Math.random() < 0.5 ? 'A' : 'B';

            const circleA = document.getElementById('circleA');
            const circleB = document.getElementById('circleB');

            if (brightnessState.brighterSide === 'A') {
                circleA.style.background = `hsl(45, 100%, ${brighter}%)`;
                circleB.style.background = `hsl(45, 100%, ${base}%)`;
            } else {
                circleA.style.background = `hsl(45, 100%, ${base}%)`;
                circleB.style.background = `hsl(45, 100%, ${brighter}%)`;
            }

            circleA.classList.remove('selected');
            circleB.classList.remove('selected');
            brightnessState.selected = null;
        }

        function selectCircle(side) {
            if (!brightnessState.testing) return;

            brightnessState.selected = side;
            document.getElementById('circleA').classList.toggle('selected', side === 'A');
            document.getElementById('circleB').classList.toggle('selected', side === 'B');

            checkBrightnessAnswer();
        }

        function checkBrightnessAnswer() {
            if (!brightnessState.selected) return;

            brightnessState.trials++;
            const feedback = document.getElementById('brightnessFeedback');

            if (brightnessState.selected === brightnessState.brighterSide) {
                brightnessState.correct++;
                feedback.textContent = '‚úì Correct! The difference was ' + brightnessState.difference.toFixed(1) + '%';
                feedback.className = 'brightness-feedback correct';

                // Reduce difference (converging on JND)
                brightnessState.difference *= 0.85;
                if (brightnessState.difference < 0.5) brightnessState.difference = 0.5;
            } else {
                feedback.textContent = '‚úó Wrong. Circle ' + brightnessState.brighterSide + ' was brighter.';
                feedback.className = 'brightness-feedback incorrect';

                // Increase difference
                brightnessState.difference *= 1.3;
                if (brightnessState.difference > 40) brightnessState.difference = 40;
            }

            brightnessState.jndHistory.push(brightnessState.difference);

            // Update results
            document.getElementById('brightnessResults').style.display = 'block';
            document.getElementById('brightnessTrials').textContent = brightnessState.trials;

            // Estimate JND from recent trials
            if (brightnessState.jndHistory.length >= 5) {
                const recent = brightnessState.jndHistory.slice(-5);
                const avgJND = recent.reduce((a, b) => a + b, 0) / recent.length;
                document.getElementById('brightnessJND').textContent = avgJND.toFixed(1) + '%';
                document.getElementById('brightnessWeber').textContent = (avgJND / brightnessState.baseLevel).toFixed(3);
            }

            // Next trial after delay
            setTimeout(() => {
                if (brightnessState.trials < 20) {
                    updateCircles();
                    feedback.textContent = 'Which circle is brighter?';
                    feedback.className = 'brightness-feedback';
                } else {
                    feedback.textContent = 'Test complete! Your JND is shown above.';
                    feedback.className = 'brightness-feedback same';
                    brightnessState.testing = false;
                    document.getElementById('startBrightnessBtn').textContent = 'Try Again';
                    document.getElementById('startBrightnessBtn').disabled = false;
                }
            }, 1000);
        }

        function startBrightnessTest() {
            brightnessState = {
                testing: true,
                baseLevel: parseInt(baseBrightnessSlider.value),
                difference: 20,
                brighterSide: null,
                trials: 0,
                correct: 0,
                jndHistory: [],
                selected: null
            };

            document.getElementById('startBrightnessBtn').disabled = true;
            document.getElementById('brightnessFeedback').textContent = 'Which circle is brighter?';
            document.getElementById('brightnessFeedback').className = 'brightness-feedback';

            updateCircles();
        }

        // === SOUND EXPERIMENT ===
        let audioContext = null;
        let soundState = {
            testing: false,
            baseVolume: 0.3,
            difference: 0.15,
            louderSide: null,
            trials: 0,
            jndHistory: [],
            heardA: false,
            heardB: false
        };

        function initAudio() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
        }

        function playTone(volume, duration = 500) {
            initAudio();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            oscillator.type = 'sine';
            oscillator.frequency.value = 440;
            gainNode.gain.value = volume;

            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            oscillator.start();

            // Fade out
            gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + duration / 1000);
            oscillator.stop(audioContext.currentTime + duration / 1000);
        }

        function playSound(side) {
            if (!soundState.testing) return;

            const btn = document.getElementById('sound' + side);
            btn.classList.add('playing');
            setTimeout(() => btn.classList.remove('playing'), 500);

            let volume;
            if (side === 'A') {
                volume = soundState.louderSide === 'A' ?
                    soundState.baseVolume + soundState.difference : soundState.baseVolume;
                soundState.heardA = true;
            } else {
                volume = soundState.louderSide === 'B' ?
                    soundState.baseVolume + soundState.difference : soundState.baseVolume;
                soundState.heardB = true;
            }

            playTone(volume);

            // Show choice buttons after hearing both
            if (soundState.heardA && soundState.heardB) {
                document.getElementById('soundChoiceBtns').style.display = 'flex';
            }
        }

        function chooseLouder(choice) {
            if (!soundState.testing) return;

            soundState.trials++;
            const feedback = document.getElementById('soundFeedback');

            const correct = choice === soundState.louderSide;
            const cantTell = choice === 'same';

            if (correct) {
                feedback.textContent = '‚úì Correct! The difference was ' + (soundState.difference * 100).toFixed(1) + '%';
                feedback.className = 'brightness-feedback correct';
                soundState.difference *= 0.85;
                if (soundState.difference < 0.01) soundState.difference = 0.01;
            } else if (cantTell) {
                feedback.textContent = 'Sound ' + soundState.louderSide + ' was louder. Difference: ' +
                    (soundState.difference * 100).toFixed(1) + '%';
                feedback.className = 'brightness-feedback same';
            } else {
                feedback.textContent = '‚úó Sound ' + soundState.louderSide + ' was actually louder.';
                feedback.className = 'brightness-feedback incorrect';
                soundState.difference *= 1.3;
                if (soundState.difference > 0.5) soundState.difference = 0.5;
            }

            soundState.jndHistory.push(soundState.difference);

            // Update results
            document.getElementById('soundResults').style.display = 'block';
            document.getElementById('soundTrials').textContent = soundState.trials;

            if (soundState.jndHistory.length >= 3) {
                const recent = soundState.jndHistory.slice(-3);
                const avgJND = recent.reduce((a, b) => a + b, 0) / recent.length;
                const dbJND = 20 * Math.log10((soundState.baseVolume + avgJND) / soundState.baseVolume);
                document.getElementById('soundJND').textContent = dbJND.toFixed(2);
                document.getElementById('soundWeber').textContent = (avgJND / soundState.baseVolume).toFixed(3);
            }

            // Next trial
            setTimeout(() => {
                document.getElementById('soundChoiceBtns').style.display = 'none';
                if (soundState.trials < 15) {
                    soundState.louderSide = Math.random() < 0.5 ? 'A' : 'B';
                    soundState.heardA = false;
                    soundState.heardB = false;
                    feedback.textContent = 'Listen to both sounds, then choose which is louder.';
                    feedback.className = 'brightness-feedback';
                } else {
                    feedback.textContent = 'Test complete! Your JND is shown above.';
                    feedback.className = 'brightness-feedback same';
                    soundState.testing = false;
                    document.getElementById('startSoundBtn').textContent = 'Try Again';
                    document.getElementById('startSoundBtn').disabled = false;
                }
            }, 1200);
        }

        function startSoundTest() {
            initAudio();

            soundState = {
                testing: true,
                baseVolume: 0.3,
                difference: 0.15,
                louderSide: Math.random() < 0.5 ? 'A' : 'B',
                trials: 0,
                jndHistory: [],
                heardA: false,
                heardB: false
            };

            document.getElementById('startSoundBtn').disabled = true;
            document.getElementById('soundFeedback').textContent = 'Listen to both sounds, then choose which is louder.';
            document.getElementById('soundFeedback').className = 'brightness-feedback';
            document.getElementById('soundChoiceBtns').style.display = 'none';
        }

        // === WEIGHT EXPERIMENT ===
        let weightState = {
            testing: false,
            baseWeight: 500,
            difference: 50,
            heavierSide: null,
            trials: 0,
            jndHistory: []
        };

        function updateWeights() {
            const base = weightState.baseWeight;
            const diff = weightState.difference;

            weightState.heavierSide = Math.random() < 0.5 ? 'A' : 'B';

            const weightA = weightState.heavierSide === 'A' ? base + diff : base;
            const weightB = weightState.heavierSide === 'B' ? base + diff : base;

            document.getElementById('weightGramsA').textContent = '(' + weightA + 'g)';
            document.getElementById('weightGramsB').textContent = '(' + weightB + 'g)';

            // Visual scaling based on weight
            const scaleA = 0.8 + (weightA / 1000) * 0.4;
            const scaleB = 0.8 + (weightB / 1000) * 0.4;
            document.getElementById('weightA').style.transform = `scale(${scaleA})`;
            document.getElementById('weightB').style.transform = `scale(${scaleB})`;

            document.getElementById('weightWrapperA').classList.remove('selected');
            document.getElementById('weightWrapperB').classList.remove('selected');
        }

        function selectWeight(side) {
            if (!weightState.testing) return;

            document.getElementById('weightWrapperA').classList.toggle('selected', side === 'A');
            document.getElementById('weightWrapperB').classList.toggle('selected', side === 'B');

            weightState.trials++;
            const feedback = document.getElementById('weightFeedback');

            if (side === weightState.heavierSide) {
                feedback.textContent = '‚úì Correct! The difference was ' + weightState.difference + 'g';
                feedback.className = 'brightness-feedback correct';
                weightState.difference *= 0.8;
                if (weightState.difference < 2) weightState.difference = 2;
            } else {
                feedback.textContent = '‚úó Wrong. Weight ' + weightState.heavierSide + ' was heavier.';
                feedback.className = 'brightness-feedback incorrect';
                weightState.difference *= 1.4;
                if (weightState.difference > 150) weightState.difference = 150;
            }

            weightState.jndHistory.push(weightState.difference);

            // Update results
            document.getElementById('weightResults').style.display = 'block';
            document.getElementById('weightTrials').textContent = weightState.trials;

            if (weightState.jndHistory.length >= 3) {
                const recent = weightState.jndHistory.slice(-3);
                const avgJND = recent.reduce((a, b) => a + b, 0) / recent.length;
                document.getElementById('weightJND').textContent = avgJND.toFixed(0);
                document.getElementById('weightWeber').textContent = (avgJND / weightState.baseWeight).toFixed(3);
            }

            // Next trial
            setTimeout(() => {
                if (weightState.trials < 15) {
                    updateWeights();
                    feedback.textContent = 'Which weight is heavier?';
                    feedback.className = 'brightness-feedback';
                } else {
                    feedback.textContent = 'Test complete! Your JND is shown above.';
                    feedback.className = 'brightness-feedback same';
                    weightState.testing = false;
                    document.getElementById('startWeightBtn').textContent = 'Try Again';
                    document.getElementById('startWeightBtn').disabled = false;
                }
            }, 1000);
        }

        function startWeightTest() {
            weightState = {
                testing: true,
                baseWeight: 500,
                difference: 50,
                heavierSide: null,
                trials: 0,
                jndHistory: []
            };

            document.getElementById('startWeightBtn').disabled = true;
            document.getElementById('weightFeedback').textContent = 'Which weight is heavier? (Imagine lifting them)';
            document.getElementById('weightFeedback').className = 'brightness-feedback';

            updateWeights();
        }

        // Initialize
        document.getElementById('circleA').style.background = 'hsl(45, 100%, 50%)';
        document.getElementById('circleB').style.background = 'hsl(45, 100%, 50%)';
        document.getElementById('weightGramsA').textContent = '(500g)';
        document.getElementById('weightGramsB').textContent = '(500g)';
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
