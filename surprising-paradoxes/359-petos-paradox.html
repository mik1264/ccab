<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Peto's Paradox - Why Don't Elephants Get Cancer?</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #e0e0e0;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            font-size: 2.2rem;
            background: linear-gradient(135deg, #7fdbda, #38ef7d);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #aaa;
            font-size: 1.1rem;
        }

        .paradox-statement {
            background: rgba(127, 219, 218, 0.1);
            border-left: 4px solid #7fdbda;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
        }

        .paradox-statement h2 {
            color: #7fdbda;
            margin-bottom: 10px;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        @media (max-width: 900px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        .panel {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .panel h3 {
            color: #38ef7d;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .species-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .species-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid transparent;
            color: #e0e0e0;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }

        .species-btn:hover {
            background: rgba(127, 219, 218, 0.2);
        }

        .species-btn.active {
            border-color: #7fdbda;
            background: rgba(127, 219, 218, 0.2);
        }

        .species-emoji {
            font-size: 1.3rem;
            margin-right: 5px;
        }

        #speciesInfo {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 10px;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-label {
            color: #aaa;
        }

        .stat-value {
            color: #7fdbda;
            font-weight: bold;
        }

        .expected-vs-actual {
            margin-top: 15px;
            padding: 15px;
            background: rgba(255, 100, 100, 0.1);
            border-radius: 10px;
            border: 1px solid rgba(255, 100, 100, 0.3);
        }

        .expected-vs-actual.paradox-resolved {
            background: rgba(56, 239, 125, 0.1);
            border-color: rgba(56, 239, 125, 0.3);
        }

        canvas {
            width: 100%;
            height: 300px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
        }

        #cellCanvas {
            height: 200px;
        }

        .p53-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }

        .p53-box {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .p53-box h4 {
            color: #aaa;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .p53-count {
            font-size: 2rem;
            font-weight: bold;
            color: #38ef7d;
        }

        .gene-icons {
            margin-top: 10px;
            font-size: 1.2rem;
            letter-spacing: 2px;
        }

        .key-insight {
            background: linear-gradient(135deg, rgba(56, 239, 125, 0.2), rgba(127, 219, 218, 0.2));
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: center;
        }

        .key-insight h3 {
            color: #38ef7d;
            margin-bottom: 10px;
        }

        .simulation-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .sim-btn {
            background: linear-gradient(135deg, #7fdbda, #38ef7d);
            border: none;
            color: #1a1a2e;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s;
        }

        .sim-btn:hover {
            transform: scale(1.05);
        }

        .timeline {
            margin-top: 20px;
        }

        .timeline-item {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }

        .timeline-year {
            background: #7fdbda;
            color: #1a1a2e;
            padding: 5px 10px;
            border-radius: 5px;
            font-weight: bold;
            min-width: 60px;
            text-align: center;
        }

        .timeline-content {
            flex: 1;
        }

        .timeline-content strong {
            color: #38ef7d;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        .research-box {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
        }

        .research-box h4 {
            color: #7fdbda;
            margin-bottom: 10px;
        }

        .back-link {
            display: inline-block;
            color: #7fdbda;
            text-decoration: none;
            margin-bottom: 20px;
            font-size: 0.9rem;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        .mutation-counter {
            font-size: 1.5rem;
            text-align: center;
            margin: 10px 0;
        }

        .mutation-counter span {
            color: #ff6b6b;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">‚Üê Back to Paradoxes</a>

        <header>
            <h1>üêò Peto's Paradox</h1>
            <p class="subtitle">Why Elephants Almost Never Get Cancer</p>
        </header>

        <div class="paradox-statement">
            <h2>The Paradox</h2>
            <p>Elephants have <strong>100√ó more cells</strong> than humans, and each cell division is a chance for cancer-causing mutations. By this logic, virtually ALL elephants should die of cancer. But only <strong>~5%</strong> do‚Äîcompared to <strong>~20%</strong> of humans! The more cells you have, the LESS cancer you get? That's backwards!</p>
        </div>

        <div class="main-grid">
            <div class="panel">
                <h3>üî¨ Species Comparison</h3>
                <div class="species-selector">
                    <button class="species-btn active" onclick="selectSpecies('mouse')">
                        <span class="species-emoji">üê≠</span>Mouse
                    </button>
                    <button class="species-btn" onclick="selectSpecies('human')">
                        <span class="species-emoji">üßë</span>Human
                    </button>
                    <button class="species-btn" onclick="selectSpecies('elephant')">
                        <span class="species-emoji">üêò</span>Elephant
                    </button>
                    <button class="species-btn" onclick="selectSpecies('whale')">
                        <span class="species-emoji">üêã</span>Blue Whale
                    </button>
                </div>

                <div id="speciesInfo">
                    <!-- Filled by JS -->
                </div>
            </div>

            <div class="panel">
                <h3>üìä Expected vs Actual Cancer Rates</h3>
                <canvas id="chartCanvas"></canvas>
            </div>

            <div class="panel">
                <h3>üß¨ The p53 Solution</h3>
                <p>In 2015, Joshua Schiffman discovered elephants have <strong>20 copies</strong> of the p53 tumor suppressor gene. Humans have just 2!</p>

                <div class="p53-comparison">
                    <div class="p53-box">
                        <h4>Human p53 Genes</h4>
                        <div class="p53-count">2</div>
                        <div class="gene-icons">üß¨üß¨</div>
                    </div>
                    <div class="p53-box">
                        <h4>Elephant p53 Genes</h4>
                        <div class="p53-count">20</div>
                        <div class="gene-icons" id="elephantGenes"></div>
                    </div>
                </div>

                <div class="research-box">
                    <h4>How It Works</h4>
                    <p>When DNA damage is detected, p53 triggers cell death (apoptosis). Elephant cells are <strong>2√ó more likely</strong> to self-destruct rather than become cancerous. More p53 = more checkpoints = fewer mutations survive.</p>
                </div>
            </div>

            <div class="panel">
                <h3>‚ö° Mutation Simulation</h3>
                <p>Watch cells divide and mutate. Larger animals have more divisions = more mutation opportunities!</p>

                <div class="simulation-controls">
                    <button class="sim-btn" onclick="runSimulation('mouse')">üê≠ Mouse Cells</button>
                    <button class="sim-btn" onclick="runSimulation('elephant')">üêò Elephant Cells</button>
                </div>

                <canvas id="cellCanvas"></canvas>
                <div class="mutation-counter" id="mutationCounter">
                    Mutations detected: <span>0</span>
                </div>
            </div>

            <div class="panel full-width">
                <h3>üìÖ Discovery Timeline</h3>
                <div class="timeline">
                    <div class="timeline-item">
                        <div class="timeline-year">1977</div>
                        <div class="timeline-content">
                            <strong>Richard Peto</strong> first describes the paradox: larger animals don't have proportionally higher cancer rates despite more cells.
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-year">2015</div>
                        <div class="timeline-content">
                            <strong>Schiffman et al.</strong> discover elephants have 20 copies of p53. Elephant cells are 2√ó more likely to undergo apoptosis after DNA damage.
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-year">2015</div>
                        <div class="timeline-content">
                            <strong>Lynch et al.</strong> independently confirm findings. Show p53 copies were duplicated in elephant ancestors ~25-30 million years ago.
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-year">2018</div>
                        <div class="timeline-content">
                            <strong>Sulak et al.</strong> identify LIF6, a "zombie gene" in elephants that was reactivated to enhance cancer resistance.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="key-insight">
            <h3>üéØ Key Insight</h3>
            <p>Evolution solved the cancer problem for large animals! Natural selection favored individuals with better tumor suppression‚Äîbecause without it, they'd die before reproducing. The larger the animal, the stronger the evolutionary pressure for anti-cancer mechanisms. <strong>Cancer is a constraint on body size.</strong></p>
        </div>
    </div>

    <script>
        const speciesData = {
            mouse: {
                name: 'Mouse',
                emoji: 'üê≠',
                cells: '3 billion',
                cellsNum: 3e9,
                lifespan: '2-3 years',
                cancerRate: 30,
                p53Copies: 2,
                expectedCancer: 0.08, // baseline
                details: 'Mice have short lifespans and develop cancer frequently. Used extensively in cancer research because of high tumor rates.'
            },
            human: {
                name: 'Human',
                emoji: 'üßë',
                cells: '37 trillion',
                cellsNum: 37e12,
                lifespan: '70-80 years',
                cancerRate: 20,
                p53Copies: 2,
                expectedCancer: 100, // normalized to human
                details: 'About 1 in 5 humans will die from cancer. We have ~12,000√ó more cells than mice but similar cancer rates.'
            },
            elephant: {
                name: 'African Elephant',
                emoji: 'üêò',
                cells: '3.7 quadrillion',
                cellsNum: 3.7e15,
                lifespan: '60-70 years',
                cancerRate: 5,
                p53Copies: 20,
                expectedCancer: 10000, // 100√ó human cells
                details: 'Despite having 100√ó more cells than humans and similar lifespans, elephants rarely get cancer. 20 copies of p53 provide enhanced protection.'
            },
            whale: {
                name: 'Blue Whale',
                emoji: 'üêã',
                cells: '100+ quadrillion',
                cellsNum: 1e17,
                lifespan: '80-90 years',
                cancerRate: 3,
                p53Copies: 'Unknown',
                expectedCancer: 300000, // 3000√ó human cells
                details: 'The largest animals ever to exist. Some blue whales live over 100 years with trillions more cells than elephants, yet cancer is extremely rare.'
            }
        };

        let currentSpecies = 'mouse';

        function selectSpecies(species) {
            currentSpecies = species;

            // Update button states
            document.querySelectorAll('.species-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.closest('.species-btn').classList.add('active');

            updateSpeciesInfo();
            drawChart();
        }

        function updateSpeciesInfo() {
            const data = speciesData[currentSpecies];
            const human = speciesData.human;

            const cellRatio = data.cellsNum / human.cellsNum;
            const expectedRate = cellRatio * human.cancerRate;
            const isParadox = data.cancerRate < expectedRate * 0.5;

            let html = `
                <div class="stat-row">
                    <span class="stat-label">Species</span>
                    <span class="stat-value">${data.emoji} ${data.name}</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Total Cells</span>
                    <span class="stat-value">${data.cells}</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Lifespan</span>
                    <span class="stat-value">${data.lifespan}</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">p53 Gene Copies</span>
                    <span class="stat-value">${data.p53Copies}</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Cancer Mortality</span>
                    <span class="stat-value">${data.cancerRate}%</span>
                </div>

                <div class="expected-vs-actual ${isParadox ? 'paradox-resolved' : ''}">
                    <strong>Cell Count Ratio vs Human:</strong> ${cellRatio.toFixed(1)}√ó<br>
                    <strong>Expected Cancer Rate:</strong> ${Math.min(expectedRate, 100).toFixed(1)}%<br>
                    <strong>Actual Cancer Rate:</strong> ${data.cancerRate}%<br>
                    <strong style="color: ${isParadox ? '#38ef7d' : '#ff6b6b'}">
                        ${isParadox ? 'üß¨ PARADOX! ' + (expectedRate / data.cancerRate).toFixed(0) + '√ó LOWER than expected!' : 'Roughly proportional'}
                    </strong>
                </div>

                <p style="margin-top: 15px; color: #aaa; font-size: 0.9rem;">${data.details}</p>
            `;

            document.getElementById('speciesInfo').innerHTML = html;
        }

        // Chart
        const chartCanvas = document.getElementById('chartCanvas');
        const chartCtx = chartCanvas.getContext('2d');

        function drawChart() {
            const rect = chartCanvas.getBoundingClientRect();
            chartCanvas.width = rect.width * 2;
            chartCanvas.height = 300 * 2;
            chartCtx.scale(2, 2);

            const width = rect.width;
            const height = 300;

            chartCtx.fillStyle = 'rgba(0,0,0,0.3)';
            chartCtx.fillRect(0, 0, width, height);

            const species = ['mouse', 'human', 'elephant', 'whale'];
            const barWidth = width / 6;
            const maxExpected = 100; // Cap at 100% for visualization

            chartCtx.font = '12px sans-serif';
            chartCtx.textAlign = 'center';

            species.forEach((s, i) => {
                const data = speciesData[s];
                const x = 40 + i * (width - 60) / 4;

                // Calculate expected based on cell ratio
                const cellRatio = data.cellsNum / speciesData.human.cellsNum;
                const expected = Math.min(cellRatio * speciesData.human.cancerRate, maxExpected);
                const actual = data.cancerRate;

                // Expected bar (red, capped)
                const expectedHeight = (expected / maxExpected) * (height - 80);
                chartCtx.fillStyle = 'rgba(255, 107, 107, 0.5)';
                chartCtx.fillRect(x - barWidth/2 - 5, height - 40 - expectedHeight, barWidth/2 - 2, expectedHeight);

                // Actual bar (green)
                const actualHeight = (actual / maxExpected) * (height - 80);
                chartCtx.fillStyle = '#38ef7d';
                chartCtx.fillRect(x + 5, height - 40 - actualHeight, barWidth/2 - 2, actualHeight);

                // Labels
                chartCtx.fillStyle = '#e0e0e0';
                chartCtx.fillText(data.emoji, x, height - 20);

                // Highlight current species
                if (s === currentSpecies) {
                    chartCtx.strokeStyle = '#7fdbda';
                    chartCtx.lineWidth = 2;
                    chartCtx.strokeRect(x - barWidth/2 - 10, height - 45 - Math.max(expectedHeight, actualHeight), barWidth + 10, Math.max(expectedHeight, actualHeight) + 10);
                }
            });

            // Legend
            chartCtx.fillStyle = 'rgba(255, 107, 107, 0.5)';
            chartCtx.fillRect(width - 150, 15, 15, 15);
            chartCtx.fillStyle = '#e0e0e0';
            chartCtx.textAlign = 'left';
            chartCtx.fillText('Expected', width - 130, 27);

            chartCtx.fillStyle = '#38ef7d';
            chartCtx.fillRect(width - 150, 35, 15, 15);
            chartCtx.fillStyle = '#e0e0e0';
            chartCtx.fillText('Actual', width - 130, 47);

            // Y-axis
            chartCtx.fillStyle = '#888';
            chartCtx.textAlign = 'right';
            chartCtx.fillText('100%', 30, 50);
            chartCtx.fillText('50%', 30, (height - 40) / 2 + 20);
            chartCtx.fillText('0%', 30, height - 35);
        }

        // Cell simulation
        const cellCanvas = document.getElementById('cellCanvas');
        const cellCtx = cellCanvas.getContext('2d');
        let cells = [];
        let mutations = 0;
        let simRunning = false;
        let simType = '';

        function runSimulation(type) {
            simType = type;
            cells = [];
            mutations = 0;
            simRunning = true;

            const isElephant = type === 'elephant';
            const numCells = isElephant ? 100 : 20; // More cells for elephant

            // Initialize cells
            const rect = cellCanvas.getBoundingClientRect();
            for (let i = 0; i < numCells; i++) {
                cells.push({
                    x: Math.random() * rect.width,
                    y: Math.random() * 200,
                    vx: (Math.random() - 0.5) * 2,
                    vy: (Math.random() - 0.5) * 2,
                    mutated: false,
                    apoptosis: false,
                    p53: isElephant ? 20 : 2
                });
            }

            document.getElementById('mutationCounter').innerHTML = `Mutations detected: <span>0</span>`;
            animateCells();
        }

        function animateCells() {
            if (!simRunning) return;

            const rect = cellCanvas.getBoundingClientRect();
            cellCanvas.width = rect.width * 2;
            cellCanvas.height = 200 * 2;
            cellCtx.scale(2, 2);

            cellCtx.fillStyle = 'rgba(0, 0, 0, 0.3)';
            cellCtx.fillRect(0, 0, rect.width, 200);

            // Update and draw cells
            cells = cells.filter(cell => !cell.apoptosis);

            cells.forEach(cell => {
                // Random mutation chance
                if (!cell.mutated && Math.random() < 0.002) {
                    cell.mutated = true;

                    // p53 response - more copies = more likely to trigger apoptosis
                    const apoptosisChance = cell.p53 === 20 ? 0.9 : 0.45; // Elephant vs mouse
                    if (Math.random() < apoptosisChance) {
                        cell.apoptosis = true;
                    } else {
                        mutations++;
                        document.getElementById('mutationCounter').innerHTML =
                            `Mutations detected: <span>${mutations}</span>`;
                    }
                }

                // Move
                cell.x += cell.vx;
                cell.y += cell.vy;

                // Bounce
                if (cell.x < 10 || cell.x > rect.width - 10) cell.vx *= -1;
                if (cell.y < 10 || cell.y > 190) cell.vy *= -1;

                // Draw
                cellCtx.beginPath();
                cellCtx.arc(cell.x, cell.y, 8, 0, Math.PI * 2);
                cellCtx.fillStyle = cell.mutated ? '#ff6b6b' : '#7fdbda';
                cellCtx.fill();

                // Nucleus
                cellCtx.beginPath();
                cellCtx.arc(cell.x, cell.y, 3, 0, Math.PI * 2);
                cellCtx.fillStyle = cell.mutated ? '#ff0000' : '#38ef7d';
                cellCtx.fill();
            });

            // Show apoptosis flash effect
            if (cells.length > 0) {
                requestAnimationFrame(animateCells);
            } else {
                cellCtx.fillStyle = '#38ef7d';
                cellCtx.font = '16px sans-serif';
                cellCtx.textAlign = 'center';
                cellCtx.fillText('All mutated cells eliminated by p53!', rect.width / 2, 100);
            }
        }

        // Generate elephant gene icons
        function setupGenes() {
            let genes = '';
            for (let i = 0; i < 20; i++) {
                genes += 'üß¨';
            }
            document.getElementById('elephantGenes').textContent = genes;
        }

        // Initialize
        setupGenes();
        updateSpeciesInfo();
        drawChart();

        // Resize handler
        window.addEventListener('resize', () => {
            drawChart();
        });
    </script>
</body>
</html>
