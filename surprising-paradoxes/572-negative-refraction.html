<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Negative Refraction - Light Bends Backwards - Surprising Paradoxes</title>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600;700&family=Nunito:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --sage: #8A9A5B;
            --moss: #606C38;
            --earth: #DDA15E;
            --cream: #FEFAE0;
            --terracotta: #BC6C25;
            --dark-moss: #3d4423;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #0a0a18 0%, #151530 50%, #0a0a18 100%);
            min-height: 100vh;
            color: #e0e0e0;
        }
        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: #f80;
            text-decoration: none;
            font-weight: 500;
            padding: 10px 20px;
            background: rgba(30,20,10,0.8);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            border: 1px solid rgba(255,136,0,0.3);
            transition: all 0.3s ease;
        }
        .back-link:hover {
            background: rgba(50,30,20,0.9);
            transform: translateX(-5px);
        }
        header {
            text-align: center;
            padding: 80px 20px 20px;
        }
        h1 {
            font-family: 'Lora', serif;
            font-size: 2.8rem;
            background: linear-gradient(135deg, #f80, #ff0, #0ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }
        .subtitle {
            color: #fc8;
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto;
        }
        .paradox-highlight {
            background: linear-gradient(135deg, rgba(255,136,0,0.15), rgba(0,255,255,0.15));
            border: 1px solid rgba(255,136,0,0.4);
            border-radius: 15px;
            padding: 25px;
            margin: 30px auto;
            max-width: 800px;
            text-align: center;
        }
        .paradox-highlight h2 {
            font-family: 'Lora', serif;
            color: #0ff;
            font-size: 1.5rem;
            margin-bottom: 10px;
        }
        .paradox-highlight p {
            color: #fec;
            font-size: 1.1rem;
            line-height: 1.6;
        }
        .demo-container {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            padding: 20px;
        }
        .demo-box {
            background: rgba(20,15,30,0.9);
            border-radius: 15px;
            padding: 15px;
            border: 1px solid rgba(255,136,0,0.3);
        }
        .demo-box h3 {
            color: #fc8;
            font-size: 1rem;
            text-align: center;
            margin-bottom: 10px;
        }
        canvas {
            display: block;
            border-radius: 10px;
            background: #030308;
        }
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            padding: 20px;
            max-width: 900px;
            margin: 0 auto;
        }
        .control-group {
            background: rgba(30,20,40,0.8);
            border-radius: 15px;
            padding: 15px;
            border: 1px solid rgba(255,136,0,0.3);
            min-width: 200px;
        }
        .control-group label {
            display: block;
            color: #fc8;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.85rem;
        }
        .control-group input[type="range"] {
            width: 100%;
            margin: 8px 0;
            accent-color: #f80;
        }
        .value-display {
            text-align: center;
            color: #0ff;
            font-family: monospace;
            font-size: 1rem;
        }
        .info-panel {
            background: rgba(20,15,30,0.9);
            border-radius: 15px;
            padding: 20px;
            margin: 20px auto;
            max-width: 700px;
            border: 1px solid rgba(255,136,0,0.3);
        }
        .comparison-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            text-align: center;
        }
        .comparison-item {
            padding: 15px;
            background: rgba(40,30,60,0.5);
            border-radius: 10px;
        }
        .comparison-item.positive { border-left: 3px solid #0f8; }
        .comparison-item.negative { border-left: 3px solid #f80; }
        .comparison-item h4 {
            margin-bottom: 10px;
        }
        .comparison-item.positive h4 { color: #0f8; }
        .comparison-item.negative h4 { color: #f80; }
        .comparison-item p {
            font-size: 0.9rem;
            color: #aaa;
        }
        .essay {
            max-width: 800px;
            margin: 40px auto;
            padding: 0 20px;
        }
        .essay h2 {
            font-family: 'Lora', serif;
            color: #f80;
            font-size: 1.8rem;
            margin: 40px 0 20px;
            border-bottom: 1px solid rgba(255,136,0,0.3);
            padding-bottom: 10px;
        }
        .essay p {
            color: #ccc;
            line-height: 1.8;
            margin-bottom: 20px;
            text-align: justify;
        }
        .essay strong {
            color: #0ff;
        }
        .history-box {
            background: linear-gradient(135deg, rgba(255,136,0,0.1), rgba(0,255,255,0.1));
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border-left: 3px solid #f80;
        }
        .history-box h4 {
            color: #fc8;
            margin-bottom: 10px;
        }
        .formula {
            background: rgba(30,25,50,0.8);
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            text-align: center;
            font-family: 'Times New Roman', serif;
            font-size: 1.3rem;
            color: #adf;
        }
        blockquote {
            border-left: 3px solid #0ff;
            padding-left: 20px;
            margin: 20px 0;
            font-style: italic;
            color: #cef;
        }
        .sources {
            background: rgba(30,20,40,0.5);
            border-radius: 15px;
            padding: 20px;
            margin-top: 40px;
        }
        .sources h3 {
            color: #f80;
            margin-bottom: 15px;
        }
        .sources ul {
            list-style: none;
        }
        .sources li {
            margin: 10px 0;
        }
        .sources a {
            color: #8ff;
            text-decoration: none;
        }
        .sources a:hover {
            text-decoration: underline;
        }
        @media (max-width: 768px) {
            h1 { font-size: 2rem; }
            .demo-container { flex-direction: column; align-items: center; }
            .comparison-row { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">← Back to Paradoxes</a>

    <header>
        <h1>Negative Refraction</h1>
        <p class="subtitle">Materials where light bends the "wrong" way</p>
    </header>

    <div class="paradox-highlight">
        <h2>The Paradox</h2>
        <p>Put a straw in water — it appears bent. We've understood refraction for centuries. But in 2000, scientists created materials where light bends <strong>backwards</strong>. Snell's Law requires a negative angle. The straw would appear to stick straight back at you! Physics turned inside out.</p>
    </div>

    <div class="demo-container">
        <div class="demo-box">
            <h3>Normal Material (n > 0)</h3>
            <canvas id="normalCanvas" width="350" height="350"></canvas>
        </div>
        <div class="demo-box">
            <h3>Metamaterial (n < 0)</h3>
            <canvas id="negativeCanvas" width="350" height="350"></canvas>
        </div>
    </div>

    <div class="controls">
        <div class="control-group">
            <label>Incident Angle</label>
            <input type="range" id="angleSlider" min="10" max="80" value="45">
            <div class="value-display" id="angleValue">45°</div>
        </div>
        <div class="control-group">
            <label>Refractive Index (Right Panel)</label>
            <input type="range" id="indexSlider" min="-30" max="-5" value="-15">
            <div class="value-display" id="indexValue">n = -1.5</div>
        </div>
    </div>

    <div class="info-panel">
        <div class="comparison-row">
            <div class="comparison-item positive">
                <h4>Positive Index (Glass, Water)</h4>
                <p>Light bends toward normal when entering denser medium. Phase velocity and energy flow in same direction.</p>
            </div>
            <div class="comparison-item negative">
                <h4>Negative Index (Metamaterial)</h4>
                <p>Light bends to SAME SIDE as incident beam! Phase velocity and energy flow in opposite directions.</p>
            </div>
        </div>
    </div>

    <div class="essay">
        <h2>The Impossible Material</h2>

        <p>In 1621, Willebrord Snellius described the law of refraction: when light enters a denser medium, it bends toward the perpendicular. For 400 years, every known material followed this rule.</p>

        <p>Then in 1967, Soviet physicist Victor Veselago asked a strange question: what if a material had both negative electric permittivity (ε) AND negative magnetic permeability (μ)? His calculations showed that light would behave bizarrely — refraction would happen on the "wrong" side of the normal.</p>

        <div class="formula">
            n = ±√(εμ)<br>
            <span style="font-size:0.8rem;">When both ε < 0 and μ < 0, convention chooses n < 0</span>
        </div>

        <p>For 33 years, Veselago's paper was a curiosity — no such material existed in nature. Then in 2000, David Smith at UC San Diego created one artificially.</p>

        <div class="history-box">
            <h4>The 2000 Breakthrough</h4>
            <p>Smith's team built structures from tiny copper split-ring resonators and wire arrays. These "metamaterials" had properties determined not by chemistry, but by geometry. At microwave frequencies, they exhibited negative refraction — exactly as Veselago predicted.</p>
        </div>

        <h2>What Actually Happens?</h2>

        <p>In negative-index materials, the phase velocity of light (the speed of the wave crests) points <strong>opposite</strong> to the direction of energy flow. This is called a "backward wave."</p>

        <p>Imagine ocean waves moving toward shore while the energy somehow flows out to sea. It seems impossible, but metamaterials achieve this through carefully designed resonances.</p>

        <blockquote>"It would really be a fundamental paradigm shift — you'd turn light backward, you'd change the Doppler shift, Snell's law, and Cherenkov radiation." — David Smith</blockquote>

        <h2>Consequences of n < 0</h2>

        <p><strong>Reversed Snell's Law:</strong> Light entering a negative-index material bends to the same side as the incident ray. A straw in "negative water" would appear to point back at you.</p>

        <p><strong>Reversed Doppler Effect:</strong> An ambulance approaching would sound lower-pitched, not higher. Moving away would raise the pitch.</p>

        <p><strong>Reversed Cherenkov Radiation:</strong> When particles exceed the phase velocity of light in a medium, they emit Cherenkov radiation — normally in a forward cone. In metamaterials, it points backward.</p>

        <p><strong>Perfect Lenses:</strong> Veselago predicted that a flat slab of n = -1 material could focus light without any curvature — and even beat the diffraction limit!</p>

        <h2>Toward Invisibility</h2>

        <p>Metamaterials enable "transformation optics" — sculpting the flow of light around objects. By gradually varying the refractive index, light can be guided around an object like water around a rock, rendering it invisible.</p>

        <p>Current metamaterials work at narrow frequency bands and millimeter scales. True invisibility across visible light remains science fiction — for now. But the physics is real.</p>

        <h2>Why Nature Doesn't Make These</h2>

        <p>Natural materials can have negative ε (metals at optical frequencies) or negative μ (certain magnetic materials), but never both simultaneously at the same frequency. The resonances required conflict.</p>

        <p>Metamaterials cheat by using structures much smaller than the wavelength of light. The electromagnetic wave "sees" an effective medium with properties no atom could provide. We design the response we want.</p>

        <div class="sources">
            <h3>Sources & Further Reading</h3>
            <ul>
                <li><a href="https://en.wikipedia.org/wiki/Negative-index_metamaterial" target="_blank">Wikipedia: Negative-Index Metamaterial</a></li>
                <li><a href="https://www.sciencedaily.com/releases/2008/08/080811092450.htm" target="_blank">ScienceDaily: New Metamaterials Bend Light Backwards</a></li>
                <li><a href="https://illumin.usc.edu/the-prospects-of-invisibility-cloaks-bending-the-laws-of-light/" target="_blank">USC: The Prospects of Invisibility Cloaks</a></li>
                <li><a href="https://stories.duke.edu/beyond-materials-from-invisibility-cloaks-to-satellite-communications" target="_blank">Duke: From Invisibility Cloaks to Satellite Communications</a></li>
            </ul>
        </div>
    </div>

    <script>
        const normalCanvas = document.getElementById('normalCanvas');
        const negativeCanvas = document.getElementById('negativeCanvas');
        const normalCtx = normalCanvas.getContext('2d');
        const negativeCtx = negativeCanvas.getContext('2d');

        // High DPI
        function setupCanvas(canvas, ctx) {
            const dpr = window.devicePixelRatio || 1;
            const rect = canvas.getBoundingClientRect();
            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            ctx.scale(dpr, dpr);
            canvas.style.width = rect.width + 'px';
            canvas.style.height = rect.height + 'px';
        }

        setupCanvas(normalCanvas, normalCtx);
        setupCanvas(negativeCanvas, negativeCtx);

        const width = 350;
        const height = 350;
        const interfaceY = height / 2;

        let incidentAngle = 45;
        let negativeIndex = -1.5;
        let time = 0;

        // Controls
        document.getElementById('angleSlider').addEventListener('input', (e) => {
            incidentAngle = parseInt(e.target.value);
            document.getElementById('angleValue').textContent = incidentAngle + '°';
        });

        document.getElementById('indexSlider').addEventListener('input', (e) => {
            negativeIndex = parseInt(e.target.value) / 10;
            document.getElementById('indexValue').textContent = 'n = ' + negativeIndex.toFixed(1);
        });

        function calculateRefraction(n1, n2, angle1Deg) {
            const angle1 = angle1Deg * Math.PI / 180;
            const sinAngle2 = (n1 / n2) * Math.sin(angle1);

            if (Math.abs(sinAngle2) > 1) {
                return null; // Total internal reflection
            }

            return Math.asin(sinAngle2) * 180 / Math.PI;
        }

        function drawLightRay(ctx, startX, startY, angle, length, color, wavelength = 20, animate = true) {
            const rad = angle * Math.PI / 180;
            const endX = startX + Math.cos(rad) * length;
            const endY = startY - Math.sin(rad) * length;

            // Draw ray
            ctx.strokeStyle = color;
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(startX, startY);
            ctx.lineTo(endX, endY);
            ctx.stroke();

            // Draw wave crests
            if (animate) {
                const numCrests = Math.floor(length / wavelength);
                const phase = (time * 0.1) % wavelength;

                ctx.fillStyle = color;
                for (let i = 0; i < numCrests; i++) {
                    const dist = (i * wavelength + phase) % length;
                    const cx = startX + Math.cos(rad) * dist;
                    const cy = startY - Math.sin(rad) * dist;
                    ctx.beginPath();
                    ctx.arc(cx, cy, 3, 0, Math.PI * 2);
                    ctx.fill();
                }
            }

            // Arrow head
            ctx.fillStyle = color;
            ctx.beginPath();
            const arrowLen = 10;
            ctx.moveTo(endX, endY);
            ctx.lineTo(endX - arrowLen * Math.cos(rad - 0.3), endY + arrowLen * Math.sin(rad - 0.3));
            ctx.lineTo(endX - arrowLen * Math.cos(rad + 0.3), endY + arrowLen * Math.sin(rad + 0.3));
            ctx.closePath();
            ctx.fill();

            return { endX, endY };
        }

        function drawScene(ctx, n2, isNegative) {
            // Clear
            ctx.fillStyle = '#030308';
            ctx.fillRect(0, 0, width, height);

            // Upper medium (air, n=1)
            ctx.fillStyle = 'rgba(50, 70, 100, 0.3)';
            ctx.fillRect(0, 0, width, interfaceY);

            // Lower medium
            const mediumColor = isNegative ? 'rgba(100, 50, 30, 0.4)' : 'rgba(30, 80, 100, 0.4)';
            ctx.fillStyle = mediumColor;
            ctx.fillRect(0, interfaceY, width, height - interfaceY);

            // Interface line
            ctx.strokeStyle = '#888';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(0, interfaceY);
            ctx.lineTo(width, interfaceY);
            ctx.stroke();

            // Normal line (dashed)
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 1;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(width / 2, 30);
            ctx.lineTo(width / 2, height - 30);
            ctx.stroke();
            ctx.setLineDash([]);

            // Labels
            ctx.fillStyle = '#aaa';
            ctx.font = '12px Nunito';
            ctx.textAlign = 'center';
            ctx.fillText('Air (n = 1)', width / 2, 20);
            ctx.fillText(isNegative ? `Metamaterial (n = ${n2.toFixed(1)})` : `Glass (n = ${n2.toFixed(1)})`, width / 2, height - 10);
            ctx.fillText('Normal', width / 2 + 30, 45);

            // Calculate refraction
            const refractedAngle = calculateRefraction(1, n2, incidentAngle);

            // Draw incident ray
            const incidentLength = 140;
            const startX = width / 2 - Math.cos(incidentAngle * Math.PI / 180) * incidentLength;
            const startY = interfaceY + Math.sin(incidentAngle * Math.PI / 180) * incidentLength;
            drawLightRay(ctx, startX, startY, incidentAngle, incidentLength, '#ffff00', 15);

            // Draw refracted ray
            if (refractedAngle !== null) {
                // In negative index, the angle is on the same side
                let actualAngle;
                if (isNegative) {
                    // Light bends to same side as incident
                    actualAngle = -Math.abs(refractedAngle) - 90;
                } else {
                    // Normal refraction - toward normal
                    actualAngle = -90 + refractedAngle;
                }

                const refractedLength = 120;
                const refractColor = isNegative ? '#ff8800' : '#00ffff';

                ctx.strokeStyle = refractColor;
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(width / 2, interfaceY);

                const endX = width / 2 + Math.cos(actualAngle * Math.PI / 180) * refractedLength;
                const endY = interfaceY - Math.sin(actualAngle * Math.PI / 180) * refractedLength;
                ctx.lineTo(endX, endY);
                ctx.stroke();

                // Wave crests for refracted ray (moving backward in negative index)
                const phase = isNegative ?
                    ((-time * 0.1) % 15 + 15) % 15 :
                    (time * 0.1) % 15;

                ctx.fillStyle = refractColor;
                for (let i = 0; i < 8; i++) {
                    const dist = (i * 15 + phase);
                    if (dist > refractedLength) continue;
                    const cx = width / 2 + Math.cos(actualAngle * Math.PI / 180) * dist;
                    const cy = interfaceY - Math.sin(actualAngle * Math.PI / 180) * dist;
                    ctx.beginPath();
                    ctx.arc(cx, cy, 3, 0, Math.PI * 2);
                    ctx.fill();
                }

                // Arrow
                ctx.fillStyle = refractColor;
                ctx.beginPath();
                ctx.moveTo(endX, endY);
                ctx.lineTo(endX - 10 * Math.cos((actualAngle - 20) * Math.PI / 180),
                    endY + 10 * Math.sin((actualAngle - 20) * Math.PI / 180));
                ctx.lineTo(endX - 10 * Math.cos((actualAngle + 20) * Math.PI / 180),
                    endY + 10 * Math.sin((actualAngle + 20) * Math.PI / 180));
                ctx.closePath();
                ctx.fill();

                // Angle arc
                ctx.strokeStyle = '#888';
                ctx.lineWidth = 1;
                ctx.beginPath();

                // Incident angle arc
                ctx.arc(width / 2, interfaceY, 30, -Math.PI / 2, -(90 - incidentAngle) * Math.PI / 180, true);
                ctx.stroke();

                // Refracted angle arc
                ctx.beginPath();
                if (isNegative) {
                    ctx.arc(width / 2, interfaceY, 25, Math.PI / 2, (90 + Math.abs(refractedAngle)) * Math.PI / 180, true);
                } else {
                    ctx.arc(width / 2, interfaceY, 25, Math.PI / 2, (90 - refractedAngle) * Math.PI / 180, false);
                }
                ctx.stroke();

                // Angle labels
                ctx.fillStyle = '#ff0';
                ctx.font = '11px Nunito';
                ctx.fillText(`θ₁=${incidentAngle}°`, width / 2 + 45, interfaceY - 20);

                ctx.fillStyle = refractColor;
                const refLabel = isNegative ?
                    `θ₂=${-Math.abs(refractedAngle).toFixed(1)}°` :
                    `θ₂=${refractedAngle.toFixed(1)}°`;
                ctx.fillText(refLabel, width / 2 + 45, interfaceY + 30);
            }

            // Draw split-ring resonators for metamaterial
            if (isNegative) {
                ctx.strokeStyle = 'rgba(255, 136, 0, 0.4)';
                ctx.lineWidth = 1;
                for (let row = 0; row < 6; row++) {
                    for (let col = 0; col < 12; col++) {
                        const cx = 30 + col * 25;
                        const cy = interfaceY + 30 + row * 25;
                        if (cy > height - 20) continue;

                        // Split ring
                        ctx.beginPath();
                        ctx.arc(cx, cy, 8, 0.2, Math.PI * 2 - 0.2);
                        ctx.stroke();
                    }
                }
            }
        }

        function animate() {
            time++;

            drawScene(normalCtx, 1.5, false);
            drawScene(negativeCtx, negativeIndex, true);

            requestAnimationFrame(animate);
        }

        animate();
    </script>
</body>
</html>
