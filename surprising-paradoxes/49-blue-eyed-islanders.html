<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Blue-Eyed Islanders - The Common Knowledge Paradox</title>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --ocean-blue: #0077be;
            --deep-blue: #004080;
            --sand: #f4d03f;
            --palm-green: #228b22;
            --sky: #87ceeb;
            --sunset-orange: #ff6b35;
            --eye-blue: #3498db;
            --eye-brown: #8b4513;
            --sage: #8A9A5B;
            --moss: #606C38;
            --cream: #FEFAE0;
            --dark-moss: #3d4423;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(180deg, var(--sky) 0%, #b0e0e6 40%, var(--ocean-blue) 70%, var(--deep-blue) 100%);
            min-height: 100vh;
            color: var(--dark-moss);
            overflow-x: hidden;
        }

        /* Ocean waves */
        .ocean {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 150px;
            background: linear-gradient(180deg, transparent, var(--ocean-blue));
            z-index: 0;
        }

        .wave {
            position: absolute;
            width: 200%;
            height: 100%;
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 120'%3E%3Cpath fill='%230077be' d='M0,60 C150,120 350,0 600,60 C850,120 1050,0 1200,60 L1200,120 L0,120 Z'/%3E%3C/svg%3E") repeat-x;
            animation: wave 8s linear infinite;
        }

        .wave:nth-child(2) {
            opacity: 0.5;
            animation-delay: -4s;
            animation-duration: 12s;
        }

        @keyframes wave {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        /* Palm tree decoration */
        .palm {
            position: fixed;
            font-size: 4rem;
            opacity: 0.3;
            z-index: 0;
        }

        .palm-left { left: 5%; top: 20%; }
        .palm-right { right: 5%; top: 25%; transform: scaleX(-1); }

        .organic-back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 100;
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 20px;
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            text-decoration: none;
            color: var(--moss);
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .organic-back-link:hover {
            background: white;
            transform: translateX(-5px);
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 80px 20px 60px;
            position: relative;
            z-index: 1;
        }

        h1 {
            font-family: 'Lora', serif;
            font-size: 2.8rem;
            text-align: center;
            color: var(--deep-blue);
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(255,255,255,0.5);
        }

        .subtitle {
            text-align: center;
            font-size: 1.3rem;
            color: var(--ocean-blue);
            margin-bottom: 40px;
            font-weight: 500;
        }

        .card {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
        }

        h2 {
            font-family: 'Lora', serif;
            color: var(--deep-blue);
            font-size: 1.6rem;
            margin-bottom: 20px;
        }

        p {
            line-height: 1.8;
            margin-bottom: 15px;
            color: #444;
        }

        .puzzle-box {
            background: linear-gradient(135deg, #e8f4f8, #d0e8f0);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border-left: 4px solid var(--ocean-blue);
        }

        .puzzle-box h3 {
            font-family: 'Lora', serif;
            color: var(--deep-blue);
            margin-bottom: 15px;
        }

        .puzzle-box ul, .puzzle-box ol {
            margin-left: 25px;
            line-height: 2;
        }

        .puzzle-box li {
            margin: 8px 0;
        }

        .highlight {
            background: rgba(52, 152, 219, 0.2);
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: 600;
        }

        /* Island Simulation */
        .simulation-container {
            background: linear-gradient(180deg, var(--sky) 0%, #98d8aa 60%, var(--sand) 100%);
            border-radius: 20px;
            padding: 20px;
            margin: 30px 0;
            position: relative;
            overflow: hidden;
        }

        .island-canvas {
            position: relative;
            min-height: 300px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 10px;
            padding: 20px;
        }

        .islander {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px;
            border-radius: 10px;
            transition: all 0.5s ease;
            background: rgba(255,255,255,0.5);
        }

        .islander.leaving {
            opacity: 0;
            transform: translateY(-50px) scale(0.5);
        }

        .islander-face {
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .islander-eyes {
            display: flex;
            gap: 3px;
        }

        .eye {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 2px solid #333;
        }

        .eye.blue { background: var(--eye-blue); }
        .eye.brown { background: var(--eye-brown); }

        .islander-thought {
            font-size: 0.7rem;
            max-width: 80px;
            text-align: center;
            color: #666;
            margin-top: 5px;
            min-height: 30px;
        }

        .status-panel {
            background: rgba(255,255,255,0.9);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .day-display {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--deep-blue);
        }

        .announcement {
            background: var(--sunset-orange);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            margin: 15px 0;
            font-weight: 600;
            display: none;
        }

        .announcement.visible {
            display: block;
            animation: pulse 2s ease infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .controls-row {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--ocean-blue), var(--deep-blue));
            color: white;
        }

        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(0,119,190,0.4);
        }

        .btn-secondary {
            background: rgba(255,255,255,0.8);
            color: var(--deep-blue);
            border: 2px solid var(--ocean-blue);
        }

        .btn-secondary:hover {
            background: var(--ocean-blue);
            color: white;
        }

        .slider-container {
            background: rgba(255,255,255,0.8);
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
        }

        .slider-container label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--deep-blue);
        }

        .slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--ocean-blue);
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        /* Logic explanation */
        .logic-step {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            border-left: 3px solid var(--ocean-blue);
        }

        .logic-step h4 {
            color: var(--deep-blue);
            margin-bottom: 8px;
        }

        .logic-step p {
            margin-bottom: 0;
            font-size: 0.95rem;
        }

        /* Key insight */
        .key-insight {
            background: linear-gradient(135deg, var(--deep-blue), var(--ocean-blue));
            color: white;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
        }

        .key-insight h3 {
            font-family: 'Lora', serif;
            margin-bottom: 15px;
        }

        .key-insight p {
            color: rgba(255,255,255,0.95);
        }

        /* Common knowledge diagram */
        .knowledge-diagram {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            padding: 20px;
            background: #f0f4f8;
            border-radius: 15px;
            margin: 20px 0;
        }

        .knowledge-level {
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 0.9rem;
            text-align: center;
        }

        .knowledge-level:nth-child(1) { background: #3498db; color: white; }
        .knowledge-level:nth-child(2) { background: #2980b9; color: white; }
        .knowledge-level:nth-child(3) { background: #1f618d; color: white; }
        .knowledge-level:nth-child(4) { background: #154360; color: white; }

        .knowledge-arrow {
            font-size: 1.5rem;
            color: var(--ocean-blue);
        }

        /* Explanation grid */
        .explanation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .explanation-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            border-left: 4px solid var(--ocean-blue);
        }

        .explanation-card h4 {
            font-family: 'Lora', serif;
            color: var(--deep-blue);
            margin-bottom: 10px;
        }

        .explanation-card p {
            color: #555;
            font-size: 0.95rem;
            margin-bottom: 0;
        }

        @media (max-width: 600px) {
            h1 { font-size: 2rem; }
            .subtitle { font-size: 1.1rem; }
            .islander { padding: 5px; }
            .islander-face { font-size: 1.5rem; }
            .eye { width: 8px; height: 8px; }
        }
    </style>
</head>
<body>
    <div class="ocean">
        <div class="wave"></div>
        <div class="wave"></div>
    </div>

    <div class="palm palm-left">&#x1F334;</div>
    <div class="palm palm-right">&#x1F334;</div>

    <a href="index.html" class="organic-back-link">
        <span class="back-arrow">&larr;</span>
        <span class="back-text">Gallery</span>
    </a>

    <div class="container">
        <h1>The Blue-Eyed Islanders</h1>
        <p class="subtitle">A Paradox of Common Knowledge</p>

        <div class="card">
            <h2>The Puzzle</h2>
            <p>This legendary logic puzzle reveals the surprising power of <strong>common knowledge</strong>&mdash;not just what you know, but what you know that others know that you know...</p>

            <div class="puzzle-box">
                <h3>The Setup:</h3>
                <ul>
                    <li>An island has 100 perfect logicians</li>
                    <li>Some have <span class="highlight" style="background: rgba(52,152,219,0.3);">blue eyes</span>, some have <span class="highlight" style="background: rgba(139,69,19,0.3);">brown eyes</span></li>
                    <li>Everyone can see everyone else's eye color, but <strong>no one knows their own</strong></li>
                    <li>There are no mirrors, no reflections, and they never discuss eye color</li>
                    <li><strong>The Rule:</strong> If you ever <em>know</em> your own eye color, you must leave the island at midnight</li>
                </ul>
            </div>

            <div class="puzzle-box">
                <h3>The Event:</h3>
                <p>A visitor arrives and announces to everyone: <strong>"At least one of you has blue eyes."</strong></p>
                <p>The visitor then leaves. What happens?</p>
            </div>

            <p style="font-size: 1.2rem; color: var(--deep-blue); font-weight: 600; text-align: center; margin-top: 20px;">
                If there are N blue-eyed people, they ALL leave on night N.
            </p>
        </div>

        <div class="card">
            <h2>Interactive Simulation</h2>
            <p>Set the number of blue-eyed islanders and watch the logic unfold:</p>

            <div class="simulation-container">
                <div class="slider-container">
                    <label>Number of Blue-Eyed Islanders: <span id="blueCountLabel">3</span></label>
                    <input type="range" class="slider" id="blueCount" min="1" max="7" value="3">
                </div>

                <div class="status-panel">
                    <div class="day-display">Day: <span id="dayNumber">0</span></div>
                    <div class="announcement" id="announcement">
                        &#x1F4E2; "At least one of you has blue eyes!"
                    </div>
                    <div id="statusText" style="margin-top: 10px; color: #666;">
                        Click "Start Simulation" to begin
                    </div>
                </div>

                <div class="island-canvas" id="islandCanvas">
                    <!-- Islanders will be generated here -->
                </div>

                <div class="controls-row">
                    <button class="btn btn-primary" id="startBtn" onclick="startSimulation()">Start Simulation</button>
                    <button class="btn btn-secondary" onclick="nextDay()">Next Day</button>
                    <button class="btn btn-secondary" onclick="resetSimulation()">Reset</button>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>Why Does This Work?</h2>
            <p>The key insight is understanding the difference between <strong>individual knowledge</strong> and <strong>common knowledge</strong>.</p>

            <div class="logic-step">
                <h4>Case: 1 Blue-Eyed Person</h4>
                <p>Alice is the only one with blue eyes. She sees 0 blue eyes. When the visitor says "at least one has blue eyes," Alice immediately knows it must be her. She leaves on <strong>Night 1</strong>.</p>
            </div>

            <div class="logic-step">
                <h4>Case: 2 Blue-Eyed People</h4>
                <p>Alice and Bob both have blue eyes. Alice sees 1 blue eye (Bob's). She thinks: "If I don't have blue eyes, Bob will leave Night 1." Bob reasons the same about Alice. When neither leaves Night 1, both realize: "I must have blue eyes too!" Both leave on <strong>Night 2</strong>.</p>
            </div>

            <div class="logic-step">
                <h4>Case: 3 Blue-Eyed People</h4>
                <p>Alice, Bob, and Carol all have blue eyes. Each sees 2 blue eyes. Alice thinks: "If I don't have blue eyes, Bob and Carol will leave Night 2." When they don't, Alice (and Bob and Carol, by identical reasoning) realizes she has blue eyes. All three leave on <strong>Night 3</strong>.</p>
            </div>

            <div class="logic-step">
                <h4>General Case: N Blue-Eyed People</h4>
                <p>By induction, if there are N blue-eyed people, they all leave on <strong>Night N</strong>.</p>
            </div>
        </div>

        <div class="card">
            <h2>But Wait&mdash;The Paradox!</h2>
            <p>Here's what makes this truly paradoxical:</p>

            <div class="puzzle-box" style="border-left-color: var(--sunset-orange);">
                <h3>The Announcement Seems Useless!</h3>
                <p>If there are 100 blue-eyed people, everyone can already <em>see</em> that at least one person has blue eyes. The visitor's announcement tells them nothing new... or does it?</p>
            </div>

            <p>Before the announcement, everyone <em>individually</em> knew there were blue-eyed people. But:</p>

            <div class="knowledge-diagram">
                <div class="knowledge-level">Everyone knows there are blue eyes</div>
                <div class="knowledge-arrow">&darr;</div>
                <div class="knowledge-level">Everyone knows that everyone knows</div>
                <div class="knowledge-arrow">&darr;</div>
                <div class="knowledge-level">Everyone knows that everyone knows that everyone knows...</div>
                <div class="knowledge-arrow">&darr;</div>
                <div class="knowledge-level">...repeated infinitely = COMMON KNOWLEDGE</div>
            </div>

            <p>The announcement creates this infinite tower of shared knowledge. Before it, the chain broke at some level. After it, everyone can begin the recursive reasoning that leads to the solution.</p>
        </div>

        <div class="key-insight">
            <h3>The Deep Insight</h3>
            <p>Common knowledge is not just knowing something. It's knowing that others know, and knowing that others know that you know, and so on to infinity. This subtle distinction has profound implications:</p>
            <ul style="margin-left: 20px; margin-top: 15px;">
                <li>Coordination requires common knowledge, not just shared knowledge</li>
                <li>A public announcement creates common knowledge; private whispers don't</li>
                <li>This is why "everyone knows" is different from "it is common knowledge"</li>
            </ul>
        </div>

        <div class="card">
            <h2>Real-World Applications</h2>
            <div class="explanation-grid">
                <div class="explanation-card">
                    <h4>Economics & Game Theory</h4>
                    <p>Market crashes can happen when private information becomes common knowledge. Everyone knowing the king has no clothes is different from it being publicly announced.</p>
                </div>
                <div class="explanation-card">
                    <h4>Cryptography</h4>
                    <p>Secure communication protocols must carefully manage what becomes common knowledge between parties. The distinction is crucial for security proofs.</p>
                </div>
                <div class="explanation-card">
                    <h4>Social Coordination</h4>
                    <p>Revolutions often start when oppression becomes common knowledge. Everyone suffering isn't enough&mdash;everyone must know that everyone knows and is ready to act.</p>
                </div>
                <div class="explanation-card">
                    <h4>Distributed Computing</h4>
                    <p>The "Two Generals Problem" shows that common knowledge is impossible to achieve in systems with unreliable communication. This has deep implications for consensus algorithms.</p>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>Variations & Extensions</h2>
            <div class="explanation-grid">
                <div class="explanation-card">
                    <h4>What if someone is wrong?</h4>
                    <p>The puzzle assumes perfect logicians. In reality, one person's mistake would break the chain, and no one might ever leave.</p>
                </div>
                <div class="explanation-card">
                    <h4>What about the brown-eyed people?</h4>
                    <p>They watch and wait. On night N, when all blue-eyed people leave, the brown-eyed ones learn they don't have blue eyes&mdash;but they still don't know if their eyes are brown or some other color!</p>
                </div>
                <div class="explanation-card">
                    <h4>What if the visitor lied?</h4>
                    <p>If there are actually no blue-eyed people, everyone sees 0 blue eyes, so no one can deduce anything, and nothing happens.</p>
                </div>
                <div class="explanation-card">
                    <h4>What if the visitor said "N people have blue eyes"?</h4>
                    <p>Each blue-eyed person sees N-1 blue eyes. On night 1, they'd all know and leave immediately!</p>
                </div>
            </div>
        </div>

        <div class="key-insight">
            <h3>The Mind-Bending Truth</h3>
            <p>A single, seemingly obvious statement&mdash;"at least one of you has blue eyes"&mdash;triggers a cascade of logical deduction that takes exactly N days to complete. The announcement added no new <em>facts</em> that anyone didn't already know, yet it fundamentally changed what everyone could <em>reason</em>.</p>
            <p style="margin-top: 15px;">This is the strange power of common knowledge: the difference between everyone knowing something, and everyone knowing that everyone knows.</p>
        </div>
    </div>

    <script>
        let blueCount = 3;
        let day = 0;
        let simulating = false;
        let islanders = [];
        let simInterval = null;

        const blueCountSlider = document.getElementById('blueCount');
        const islandCanvas = document.getElementById('islandCanvas');
        const dayNumber = document.getElementById('dayNumber');
        const statusText = document.getElementById('statusText');
        const announcement = document.getElementById('announcement');

        function updateBlueCount() {
            blueCount = parseInt(blueCountSlider.value);
            document.getElementById('blueCountLabel').textContent = blueCount;
            resetSimulation();
        }

        blueCountSlider.addEventListener('input', updateBlueCount);

        function createIslanders() {
            islandCanvas.innerHTML = '';
            islanders = [];

            // Create islanders: first N are blue-eyed, rest are brown-eyed
            const total = Math.min(blueCount + 3, 10); // Show some brown-eyed too

            for (let i = 0; i < total; i++) {
                const isBlue = i < blueCount;
                const islander = {
                    id: i,
                    isBlue: isBlue,
                    hasLeft: false,
                    element: null
                };

                const div = document.createElement('div');
                div.className = 'islander';
                div.innerHTML = `
                    <div class="islander-face">&#x1F9D1;</div>
                    <div class="islander-eyes">
                        <div class="eye ${isBlue ? 'blue' : 'brown'}"></div>
                        <div class="eye ${isBlue ? 'blue' : 'brown'}"></div>
                    </div>
                    <div class="islander-thought" id="thought-${i}"></div>
                `;
                islander.element = div;
                islanders.push(islander);
                islandCanvas.appendChild(div);
            }
        }

        function updateThoughts() {
            islanders.forEach((islander, i) => {
                const thought = document.getElementById(`thought-${i}`);
                if (!thought || islander.hasLeft) return;

                if (day === 0) {
                    if (islander.isBlue) {
                        thought.textContent = `I see ${blueCount - 1} blue`;
                    } else {
                        thought.textContent = `I see ${blueCount} blue`;
                    }
                } else if (day < blueCount) {
                    if (islander.isBlue) {
                        thought.textContent = `Still waiting...`;
                    } else {
                        thought.textContent = `Watching...`;
                    }
                } else if (day === blueCount) {
                    if (islander.isBlue) {
                        thought.textContent = `I must have blue eyes!`;
                    } else {
                        thought.textContent = `They're leaving!`;
                    }
                }
            });
        }

        function startSimulation() {
            if (simulating) return;
            simulating = true;
            document.getElementById('startBtn').textContent = 'Simulating...';
            announcement.classList.add('visible');
            statusText.textContent = 'The visitor makes the announcement...';

            setTimeout(() => {
                simInterval = setInterval(() => {
                    nextDay();
                }, 2000);
            }, 1500);
        }

        function nextDay() {
            if (day > blueCount + 1) {
                if (simInterval) clearInterval(simInterval);
                simulating = false;
                document.getElementById('startBtn').textContent = 'Start Simulation';
                return;
            }

            day++;
            dayNumber.textContent = day;

            if (day < blueCount) {
                statusText.textContent = `Night ${day}: No one leaves. Blue-eyed people continue reasoning...`;
            } else if (day === blueCount) {
                statusText.textContent = `Night ${blueCount}: All ${blueCount} blue-eyed people leave!`;

                // Make blue-eyed islanders leave
                islanders.forEach(islander => {
                    if (islander.isBlue) {
                        islander.hasLeft = true;
                        islander.element.classList.add('leaving');
                    }
                });
            } else {
                statusText.textContent = `The puzzle is complete! It took exactly ${blueCount} days.`;
                if (simInterval) clearInterval(simInterval);
                simulating = false;
                document.getElementById('startBtn').textContent = 'Start Simulation';
            }

            updateThoughts();
        }

        function resetSimulation() {
            if (simInterval) clearInterval(simInterval);
            simulating = false;
            day = 0;
            dayNumber.textContent = '0';
            statusText.textContent = 'Click "Start Simulation" to begin';
            announcement.classList.remove('visible');
            document.getElementById('startBtn').textContent = 'Start Simulation';
            createIslanders();
            updateThoughts();
        }

        // Initialize
        createIslanders();
        updateThoughts();
    </script>
</body>
</html>
