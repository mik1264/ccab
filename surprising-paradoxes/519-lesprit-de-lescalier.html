<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L'esprit de l'escalier - Staircase Wit | Surprising Paradoxes</title>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #e8e8e8;
            overflow-x: hidden;
        }

        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #ffd700;
            text-decoration: none;
            font-size: 0.95rem;
            opacity: 0.9;
            z-index: 100;
            transition: opacity 0.3s;
        }

        .back-link:hover {
            opacity: 1;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 60px 20px 40px;
        }

        h1 {
            font-family: 'Lora', serif;
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, #ffd700, #ffb347);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            text-align: center;
            font-size: 1.3rem;
            color: #aaa;
            margin-bottom: 2rem;
            font-style: italic;
        }

        .phase {
            display: none;
        }

        .phase.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .intro-card {
            background: rgba(255,255,255,0.08);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(255,215,0,0.2);
        }

        .diderot-quote {
            font-family: 'Lora', serif;
            font-size: 1.3rem;
            line-height: 1.8;
            color: #ffd700;
            padding: 1.5rem;
            border-left: 4px solid #ffd700;
            margin: 1.5rem 0;
            background: rgba(255,215,0,0.05);
            border-radius: 0 15px 15px 0;
        }

        .diderot-quote cite {
            display: block;
            margin-top: 1rem;
            font-size: 0.9rem;
            color: #888;
            font-style: normal;
        }

        .scenario-intro {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #ccc;
        }

        .btn {
            background: linear-gradient(135deg, #ffd700, #ffb347);
            color: #1a1a2e;
            border: none;
            padding: 15px 40px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 30px;
            cursor: pointer;
            display: block;
            margin: 2rem auto 0;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255,215,0,0.3);
        }

        /* Dinner Party Scene */
        .dinner-scene {
            background: rgba(139,69,19,0.2);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 2px solid rgba(139,69,19,0.4);
        }

        .scene-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 1.5rem;
        }

        .scene-icon {
            font-size: 2.5rem;
        }

        .scene-title {
            font-family: 'Lora', serif;
            font-size: 1.4rem;
            color: #ffd700;
        }

        .scene-subtitle {
            font-size: 0.9rem;
            color: #888;
        }

        .dialogue-bubble {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            position: relative;
        }

        .speaker {
            font-weight: 600;
            color: #ff6b6b;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .speaker-icon {
            font-size: 1.5rem;
        }

        .remark {
            font-size: 1.2rem;
            line-height: 1.6;
            color: #fff;
            font-style: italic;
        }

        .response-area {
            margin-top: 2rem;
        }

        .timer-bar {
            height: 8px;
            background: rgba(255,255,255,0.2);
            border-radius: 4px;
            margin-bottom: 1rem;
            overflow: hidden;
        }

        .timer-fill {
            height: 100%;
            background: linear-gradient(90deg, #4ade80, #fbbf24, #ef4444);
            border-radius: 4px;
            transition: width 0.1s linear;
            width: 100%;
        }

        .timer-fill.urgent {
            animation: pulse 0.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .response-prompt {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 0.5rem;
        }

        .response-prompt .speaker-icon {
            color: #4ade80;
        }

        .response-input {
            width: 100%;
            padding: 15px;
            font-size: 1.1rem;
            font-family: 'Nunito', sans-serif;
            border: 2px solid rgba(255,215,0,0.3);
            border-radius: 15px;
            background: rgba(0,0,0,0.3);
            color: #fff;
            resize: none;
            min-height: 80px;
        }

        .response-input:focus {
            outline: none;
            border-color: #ffd700;
        }

        .response-input::placeholder {
            color: #666;
        }

        .time-remaining {
            text-align: center;
            font-size: 1.5rem;
            color: #ffd700;
            margin-top: 1rem;
        }

        /* Staircase Animation */
        .staircase-scene {
            text-align: center;
            padding: 3rem;
        }

        .staircase-visual {
            position: relative;
            height: 300px;
            margin: 2rem auto;
            max-width: 400px;
        }

        .stairs {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
        }

        .stair {
            background: linear-gradient(180deg, #8b4513, #654321);
            margin-bottom: -5px;
            border-radius: 3px;
        }

        .stair:nth-child(1) { width: 200px; height: 25px; }
        .stair:nth-child(2) { width: 180px; height: 25px; margin-left: 10px; }
        .stair:nth-child(3) { width: 160px; height: 25px; margin-left: 20px; }
        .stair:nth-child(4) { width: 140px; height: 25px; margin-left: 30px; }
        .stair:nth-child(5) { width: 120px; height: 25px; margin-left: 40px; }

        .figure {
            position: absolute;
            font-size: 3rem;
            transition: all 2s ease;
        }

        .figure.top {
            top: 50px;
            left: 50%;
            transform: translateX(-50%);
        }

        .figure.descending {
            top: 180px;
            left: 50%;
            transform: translateX(-50%);
        }

        .thought-bubble {
            position: absolute;
            background: rgba(255,255,255,0.95);
            color: #1a1a2e;
            padding: 15px 20px;
            border-radius: 20px;
            font-size: 1.1rem;
            max-width: 250px;
            opacity: 0;
            transition: opacity 0.5s;
            font-weight: 600;
        }

        .thought-bubble.visible {
            opacity: 1;
        }

        .thought-bubble::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 30px;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 15px solid rgba(255,255,255,0.95);
        }

        .descending-text {
            font-size: 1.3rem;
            color: #ffd700;
            margin-top: 2rem;
            font-style: italic;
        }

        /* Comparison Phase */
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 2rem 0;
        }

        @media (max-width: 700px) {
            .comparison-grid {
                grid-template-columns: 1fr;
            }
        }

        .comparison-card {
            background: rgba(255,255,255,0.08);
            border-radius: 20px;
            padding: 1.5rem;
            border: 2px solid;
        }

        .comparison-card.hasty {
            border-color: rgba(239,68,68,0.4);
        }

        .comparison-card.perfect {
            border-color: rgba(74,222,128,0.4);
        }

        .comparison-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 1rem;
        }

        .comparison-icon {
            font-size: 1.5rem;
        }

        .comparison-title {
            font-weight: 600;
        }

        .comparison-card.hasty .comparison-title { color: #ef4444; }
        .comparison-card.perfect .comparison-title { color: #4ade80; }

        .comparison-timing {
            font-size: 0.85rem;
            color: #888;
            margin-bottom: 1rem;
        }

        .comparison-text {
            font-size: 1.1rem;
            line-height: 1.6;
            color: #fff;
            font-style: italic;
            padding: 1rem;
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
        }

        /* Science Section */
        .science-section {
            background: rgba(255,255,255,0.05);
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .section-title {
            font-family: 'Lora', serif;
            font-size: 1.5rem;
            color: #ffd700;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .brain-diagram {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            margin: 2rem 0;
        }

        .brain-part {
            background: rgba(255,255,255,0.08);
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            width: 180px;
            border: 1px solid rgba(255,215,0,0.2);
        }

        .brain-icon {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .brain-name {
            font-weight: 600;
            color: #ffd700;
            margin-bottom: 0.5rem;
        }

        .brain-desc {
            font-size: 0.85rem;
            color: #aaa;
            line-height: 1.5;
        }

        .process-flow {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin: 2rem 0;
        }

        .process-step {
            background: rgba(255,215,0,0.1);
            border-radius: 10px;
            padding: 12px 20px;
            text-align: center;
        }

        .process-arrow {
            color: #ffd700;
            font-size: 1.5rem;
        }

        /* Cross-Cultural Section */
        .cultures-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .culture-card {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .culture-flag {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .culture-term {
            font-weight: 600;
            color: #ffd700;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }

        .culture-translation {
            font-size: 0.85rem;
            color: #888;
            font-style: italic;
        }

        /* Stats Bar */
        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 3rem;
            flex-wrap: wrap;
            margin: 2rem 0;
            padding: 1.5rem;
            background: rgba(255,215,0,0.1);
            border-radius: 15px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: #ffd700;
        }

        .stat-label {
            font-size: 0.85rem;
            color: #aaa;
        }

        /* Takeaway */
        .takeaway {
            background: linear-gradient(135deg, rgba(255,215,0,0.1), rgba(255,179,71,0.1));
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            border: 1px solid rgba(255,215,0,0.3);
            margin-top: 2rem;
        }

        .takeaway-title {
            font-family: 'Lora', serif;
            font-size: 1.5rem;
            color: #ffd700;
            margin-bottom: 1rem;
        }

        .takeaway-text {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #ccc;
        }

        .highlight {
            color: #ffd700;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back to Gallery</a>

    <div class="container">
        <h1>L'esprit de l'escalier</h1>
        <p class="subtitle">Staircase Wit ‚Äî The Perfect Comeback That Arrives Too Late</p>

        <!-- Phase 1: Introduction -->
        <div class="phase active" id="phase-intro">
            <div class="intro-card">
                <div class="diderot-quote">
                    "A sensitive man, such as myself, overwhelmed by the argument levelled against him, becomes confused and can only think clearly again <em>at the bottom of the stairs.</em>"
                    <cite>‚Äî Denis Diderot, <em>Paradoxe sur le com√©dien</em> (1770‚Äì1778)</cite>
                </div>

                <p class="scenario-intro">
                    You know the feeling. Someone makes a cutting remark at dinner. You freeze. Your mind goes blank.
                    Hours later‚Äîin the car, in the shower, at 3 AM‚Äîthe <span class="highlight">perfect response</span> crystallizes.
                    <br><br>
                    Diderot experienced this at a dinner party hosted by Jacques Necker in 18th-century Paris.
                    Only after descending the grand staircase of the <em>h√¥tel particulier</em> did his wit return.
                    <br><br>
                    <strong>Let's recreate this phenomenon.</strong> You're about to enter an 18th-century salon.
                    Someone will challenge you. You'll have <span class="highlight">10 seconds</span> to respond.
                </p>
            </div>

            <button class="btn" onclick="startScenario()">Enter the Dinner Party</button>
        </div>

        <!-- Phase 2: The Dinner Party Challenge -->
        <div class="phase" id="phase-dinner">
            <div class="dinner-scene">
                <div class="scene-header">
                    <span class="scene-icon">üïØÔ∏è</span>
                    <div>
                        <div class="scene-title">The Salon of Monsieur Necker</div>
                        <div class="scene-subtitle">Paris, 1773</div>
                    </div>
                </div>

                <div class="dialogue-bubble">
                    <div class="speaker">
                        <span class="speaker-icon">üé≠</span>
                        <span id="antagonist-name">The Baron de Holbach</span>
                    </div>
                    <p class="remark" id="challenge-text">
                        "Monsieur, you claim to be a man of reason, yet you defend emotions as the source of genius.
                        Is that not like a sailor praising the storm that will sink his ship?"
                    </p>
                </div>

                <div class="response-area">
                    <div class="timer-bar">
                        <div class="timer-fill" id="timer-fill"></div>
                    </div>
                    <div class="response-prompt">
                        <span class="speaker-icon">üßî</span>
                        <span>Your response:</span>
                    </div>
                    <textarea
                        class="response-input"
                        id="response-input"
                        placeholder="Quick! What do you say? (The room is watching...)"
                        maxlength="300"
                    ></textarea>
                    <div class="time-remaining">
                        <span id="time-display">10</span> seconds remaining
                    </div>
                </div>
            </div>
        </div>

        <!-- Phase 3: Descending the Staircase -->
        <div class="phase" id="phase-staircase">
            <div class="staircase-scene">
                <h2 style="color: #ffd700; font-family: 'Lora', serif; margin-bottom: 1rem;">
                    The Dinner Ends...
                </h2>
                <p style="color: #aaa; margin-bottom: 2rem;">
                    You bid farewell and begin descending the grand staircase.
                </p>

                <div class="staircase-visual">
                    <div class="stairs">
                        <div class="stair"></div>
                        <div class="stair"></div>
                        <div class="stair"></div>
                        <div class="stair"></div>
                        <div class="stair"></div>
                    </div>
                    <div class="figure top" id="figure">üö∂</div>
                    <div class="thought-bubble" id="thought-bubble" style="top: 20px; left: 55%;">
                        üí° Wait... I should have said...
                    </div>
                </div>

                <p class="descending-text" id="descending-text">
                    Your mind clears. The perfect response emerges...
                </p>
            </div>
        </div>

        <!-- Phase 4: The Comparison -->
        <div class="phase" id="phase-comparison">
            <h2 style="text-align: center; color: #ffd700; font-family: 'Lora', serif; margin-bottom: 2rem;">
                The Wit That Came Too Late
            </h2>

            <div class="comparison-grid">
                <div class="comparison-card hasty">
                    <div class="comparison-header">
                        <span class="comparison-icon">‚ö°</span>
                        <span class="comparison-title">What You Said</span>
                    </div>
                    <div class="comparison-timing">Under pressure ‚Ä¢ 10 seconds</div>
                    <div class="comparison-text" id="user-response-display">
                        (Your response will appear here)
                    </div>
                </div>

                <div class="comparison-card perfect">
                    <div class="comparison-header">
                        <span class="comparison-icon">‚ú®</span>
                        <span class="comparison-title">What You Should Have Said</span>
                    </div>
                    <div class="comparison-timing">At the bottom of the stairs ‚Ä¢ Too late</div>
                    <div class="comparison-text" id="perfect-response-display">
                        "Monsieur le Baron, the sailor does not praise the storm‚Äîhe learns to read it.
                        Emotion without reason is chaos; reason without emotion is merely... arithmetic.
                        I prefer to be a navigator of both seas."
                    </div>
                </div>
            </div>

            <button class="btn" onclick="showScience()">Why Does This Happen?</button>
        </div>

        <!-- Phase 5: The Science -->
        <div class="phase" id="phase-science">
            <div class="science-section">
                <h2 class="section-title">
                    <span>üß†</span> The Neuroscience of Staircase Wit
                </h2>

                <div class="brain-diagram">
                    <div class="brain-part">
                        <div class="brain-icon">üîä</div>
                        <div class="brain-name">Phonological Loop</div>
                        <div class="brain-desc">Rehearses verbal information‚Äîeasily overloaded by stress</div>
                    </div>
                    <div class="brain-part">
                        <div class="brain-icon">üéØ</div>
                        <div class="brain-name">Central Executive</div>
                        <div class="brain-desc">Coordinates attention‚Äîhijacked by social anxiety</div>
                    </div>
                    <div class="brain-part">
                        <div class="brain-icon">‚ö°</div>
                        <div class="brain-name">Amygdala</div>
                        <div class="brain-desc">Triggers fight-or-flight‚Äîblocks creative processing</div>
                    </div>
                </div>

                <p style="text-align: center; color: #ccc; margin: 1.5rem 0; line-height: 1.8;">
                    Under social pressure, your working memory (Baddeley's model) becomes <span class="highlight">overloaded</span>.
                    The phonological loop‚Äîessential for verbal fluency‚Äîis vulnerable to stress.
                    <br><br>
                    Only when the threat passes does your brain's <span class="highlight">default mode network</span> activate,
                    allowing creative connections to form.
                </p>

                <h3 style="color: #ffd700; margin: 2rem 0 1rem; text-align: center;">The Processing Delay</h3>

                <div class="process-flow">
                    <div class="process-step">üò∞ Stress Response</div>
                    <span class="process-arrow">‚Üí</span>
                    <div class="process-step">üîí Working Memory Blocked</div>
                    <span class="process-arrow">‚Üí</span>
                    <div class="process-step">üö∂ Threat Removed</div>
                    <span class="process-arrow">‚Üí</span>
                    <div class="process-step">üí≠ Default Mode Activates</div>
                    <span class="process-arrow">‚Üí</span>
                    <div class="process-step">üí° Insight!</div>
                </div>
            </div>

            <div class="science-section">
                <h2 class="section-title">
                    <span>üåç</span> Every Culture Knows This Feeling
                </h2>

                <div class="cultures-grid">
                    <div class="culture-card">
                        <div class="culture-flag">üá´üá∑</div>
                        <div class="culture-term">L'esprit de l'escalier</div>
                        <div class="culture-translation">"Wit of the staircase"</div>
                    </div>
                    <div class="culture-card">
                        <div class="culture-flag">üá©üá™</div>
                        <div class="culture-term">Treppenwitz</div>
                        <div class="culture-translation">"Staircase joke"</div>
                    </div>
                    <div class="culture-card">
                        <div class="culture-flag">üáÆüá±</div>
                        <div class="culture-term">◊ó◊ï◊õ◊û◊î ◊ë◊ì◊ô◊¢◊ë◊ì</div>
                        <div class="culture-translation">"Wisdom after the fact"</div>
                    </div>
                    <div class="culture-card">
                        <div class="culture-flag">üá∑üá∫</div>
                        <div class="culture-term">–ó–∞–¥–Ω–∏–º —É–º–æ–º –∫—Ä–µ–ø–æ–∫</div>
                        <div class="culture-translation">"Strong with hind-mind"</div>
                    </div>
                    <div class="culture-card">
                        <div class="culture-flag">üáØüáµ</div>
                        <div class="culture-term">Âæå„ÅÆÁ•≠„Çä</div>
                        <div class="culture-translation">"After the festival"</div>
                    </div>
                </div>
            </div>

            <div class="stats-bar">
                <div class="stat-item">
                    <div class="stat-value">87%</div>
                    <div class="stat-label">experience this regularly</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">2-4 hrs</div>
                    <div class="stat-label">typical delay for insight</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">250+</div>
                    <div class="stat-label">years since Diderot named it</div>
                </div>
            </div>

            <div class="takeaway">
                <h3 class="takeaway-title">The Paradox of Wit</h3>
                <p class="takeaway-text">
                    Your mind doesn't work on demand. The delay isn't stupidity‚Äîit's <span class="highlight">processing</span>.
                    It's your brain taking the time to understand what was said, what it meant, and finding words that feel true.
                    <br><br>
                    Diderot's observation endures because it captures a universal truth:
                    <br>
                    <span class="highlight">The best words come when we no longer need them.</span>
                </p>
            </div>

            <button class="btn" onclick="tryAgain()">Experience It Again</button>
        </div>
    </div>

    <script>
        const challenges = [
            {
                antagonist: "The Baron de Holbach",
                remark: "Monsieur, you claim to be a man of reason, yet you defend emotions as the source of genius. Is that not like a sailor praising the storm that will sink his ship?",
                perfectResponse: "Monsieur le Baron, the sailor does not praise the storm‚Äîhe learns to read it. Emotion without reason is chaos; reason without emotion is merely... arithmetic. I prefer to be a navigator of both seas."
            },
            {
                antagonist: "The Countess de Beaumont",
                remark: "Your writings suggest everyone should think freely, yet you yourself defer to the opinions of philosophers. Is freedom only for those who agree with you?",
                perfectResponse: "Madame, I defer to philosophers the way a musician defers to harmony‚Äînot because I cannot compose my own melody, but because understanding the rules allows me to break them beautifully."
            },
            {
                antagonist: "Voltaire",
                remark: "You speak of the common man's wisdom, yet the common man cannot read your encyclop√©die. Are you not building a lighthouse for the blind?",
                perfectResponse: "A lighthouse is never built for those who can already see, Monsieur. It guides those still approaching the shore‚Äîand I have great faith in those who will one day read."
            },
            {
                antagonist: "A Young Nobleman",
                remark: "Your philosophy may amuse the salons, but it produces nothing. When has a philosopher ever built a bridge or fed a village?",
                perfectResponse: "The architect's bridge stands upon mathematics, and the farmer's field yields to the calendar. Philosophy builds no bridges‚Äîit teaches men why bridges are worth building."
            }
        ];

        let currentChallenge;
        let timerInterval;
        let timeLeft = 10;
        let userResponse = '';

        function showPhase(phaseId) {
            document.querySelectorAll('.phase').forEach(p => p.classList.remove('active'));
            document.getElementById(phaseId).classList.add('active');
        }

        function startScenario() {
            currentChallenge = challenges[Math.floor(Math.random() * challenges.length)];
            document.getElementById('antagonist-name').textContent = currentChallenge.antagonist;
            document.getElementById('challenge-text').textContent = currentChallenge.remark;
            document.getElementById('perfect-response-display').textContent = currentChallenge.perfectResponse;
            document.getElementById('response-input').value = '';

            showPhase('phase-dinner');
            startTimer();
        }

        function startTimer() {
            timeLeft = 10;
            const timerFill = document.getElementById('timer-fill');
            const timeDisplay = document.getElementById('time-display');
            const input = document.getElementById('response-input');

            input.focus();

            timerInterval = setInterval(() => {
                timeLeft -= 0.1;
                const percent = (timeLeft / 10) * 100;
                timerFill.style.width = percent + '%';
                timeDisplay.textContent = Math.ceil(timeLeft);

                if (timeLeft <= 3) {
                    timerFill.classList.add('urgent');
                }

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    captureResponse();
                }
            }, 100);
        }

        function captureResponse() {
            userResponse = document.getElementById('response-input').value.trim();
            if (!userResponse) {
                userResponse = "[You said nothing. The room waited. You smiled weakly and sipped your wine.]";
            }

            showStaircase();
        }

        function showStaircase() {
            showPhase('phase-staircase');

            const figure = document.getElementById('figure');
            const thought = document.getElementById('thought-bubble');

            setTimeout(() => {
                figure.classList.remove('top');
                figure.classList.add('descending');
            }, 500);

            setTimeout(() => {
                thought.classList.add('visible');
            }, 2000);

            setTimeout(() => {
                showComparison();
            }, 4000);
        }

        function showComparison() {
            document.getElementById('user-response-display').textContent = userResponse;
            showPhase('phase-comparison');
        }

        function showScience() {
            showPhase('phase-science');
        }

        function tryAgain() {
            const figure = document.getElementById('figure');
            const thought = document.getElementById('thought-bubble');
            const timerFill = document.getElementById('timer-fill');

            figure.classList.remove('descending');
            figure.classList.add('top');
            thought.classList.remove('visible');
            timerFill.classList.remove('urgent');
            timerFill.style.width = '100%';

            showPhase('phase-intro');
        }

        // Handle Enter key to submit early
        document.getElementById('response-input').addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                clearInterval(timerInterval);
                captureResponse();
            }
        });
    </script>
</body>
</html>
