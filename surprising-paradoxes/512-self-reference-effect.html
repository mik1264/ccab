<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Self-Reference Effect - Surprising Paradoxes</title>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --sage: #8A9A5B;
            --moss: #606C38;
            --earth: #DDA15E;
            --cream: #FEFAE0;
            --terracotta: #BC6C25;
            --dark-moss: #3d4423;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, var(--cream) 0%, #F4F1DE 50%, #EDE8D5 100%);
            min-height: 100vh;
            padding: 20px;
            color: var(--dark-moss);
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--moss);
            text-decoration: none;
            font-weight: 600;
            margin-bottom: 20px;
            transition: color 0.3s ease;
        }

        .back-link:hover {
            color: var(--terracotta);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            font-family: 'Lora', serif;
            font-size: 2.5rem;
            color: var(--moss);
            margin-bottom: 10px;
            text-align: center;
        }

        .subtitle {
            text-align: center;
            color: var(--dark-moss);
            opacity: 0.8;
            margin-bottom: 30px;
            font-size: 1.1rem;
        }

        .card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
        }

        h2 {
            font-family: 'Lora', serif;
            color: var(--moss);
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        h3 {
            font-family: 'Lora', serif;
            color: var(--terracotta);
            margin: 20px 0 10px;
            font-size: 1.2rem;
        }

        p {
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .highlight {
            background: linear-gradient(120deg, rgba(221, 161, 94, 0.3) 0%, rgba(138, 154, 91, 0.3) 100%);
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: 600;
        }

        /* Experiment Section */
        .experiment-container {
            margin: 25px 0;
        }

        .phase-indicator {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .phase-dot {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
            background: #ccc;
            transition: all 0.3s ease;
        }

        .phase-dot.active {
            background: var(--moss);
            transform: scale(1.2);
        }

        .phase-dot.complete {
            background: var(--sage);
        }

        /* Word Display */
        .word-display {
            text-align: center;
            padding: 40px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 100%);
            border-radius: 20px;
            margin: 20px 0;
        }

        .current-word {
            font-size: 3rem;
            font-weight: 700;
            color: var(--moss);
            font-family: 'Lora', serif;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 4px;
        }

        .encoding-question {
            font-size: 1.2rem;
            color: var(--terracotta);
            margin-bottom: 25px;
            font-weight: 600;
        }

        .encoding-type {
            display: inline-block;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .encoding-type.structural {
            background: rgba(116, 185, 255, 0.3);
            color: #0984e3;
        }

        .encoding-type.phonemic {
            background: rgba(162, 155, 254, 0.3);
            color: #6c5ce7;
        }

        .encoding-type.semantic {
            background: rgba(253, 203, 110, 0.3);
            color: #f39c12;
        }

        .encoding-type.self-reference {
            background: rgba(138, 154, 91, 0.3);
            color: var(--moss);
        }

        /* Buttons */
        .btn-group {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 15px 40px;
            border: none;
            border-radius: 30px;
            font-family: 'Nunito', sans-serif;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-yes {
            background: linear-gradient(135deg, var(--moss) 0%, var(--sage) 100%);
            color: white;
        }

        .btn-no {
            background: linear-gradient(135deg, var(--terracotta) 0%, var(--earth) 100%);
            color: white;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--moss) 0%, var(--sage) 100%);
            color: white;
        }

        /* Progress Bar */
        .progress-container {
            margin: 20px 0;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .progress-track {
            height: 10px;
            background: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--sage), var(--moss));
            border-radius: 5px;
            transition: width 0.3s ease;
        }

        /* Recall Phase */
        .recall-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }

        .recall-word {
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.8);
            border: 2px solid transparent;
            border-radius: 10px;
            text-align: center;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            font-size: 0.9rem;
        }

        .recall-word:hover {
            border-color: var(--sage);
            transform: translateY(-2px);
        }

        .recall-word.selected {
            background: var(--moss);
            color: white;
            border-color: var(--moss);
        }

        .recall-word.correct {
            background: var(--sage);
            color: white;
        }

        .recall-word.wrong {
            background: #e74c3c;
            color: white;
        }

        .recall-word.missed {
            background: rgba(231, 76, 60, 0.2);
            border-color: #e74c3c;
        }

        /* Results */
        .results-panel {
            background: linear-gradient(135deg, rgba(138, 154, 91, 0.15) 0%, rgba(221, 161, 94, 0.15) 100%);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
        }

        .results-chart {
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            height: 200px;
            margin: 25px 0;
            padding: 0 20px;
        }

        .result-bar-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
            max-width: 100px;
        }

        .result-bar {
            width: 60px;
            border-radius: 8px 8px 0 0;
            display: flex;
            align-items: flex-start;
            justify-content: center;
            padding-top: 10px;
            font-weight: 700;
            color: white;
            transition: height 0.8s ease;
        }

        .result-bar.structural { background: linear-gradient(180deg, #74b9ff, #0984e3); }
        .result-bar.phonemic { background: linear-gradient(180deg, #a29bfe, #6c5ce7); }
        .result-bar.semantic { background: linear-gradient(180deg, #fdcb6e, #f39c12); }
        .result-bar.self-ref { background: linear-gradient(180deg, var(--sage), var(--moss)); }

        .result-label {
            margin-top: 10px;
            font-size: 0.8rem;
            text-align: center;
            font-weight: 600;
        }

        /* Depth of Processing Diagram */
        .depth-diagram {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 25px 0;
        }

        .depth-level {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 15px 20px;
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .depth-level:hover {
            transform: translateX(10px);
        }

        .depth-level.structural {
            background: rgba(116, 185, 255, 0.2);
            border-left: 4px solid #0984e3;
        }

        .depth-level.phonemic {
            background: rgba(162, 155, 254, 0.2);
            border-left: 4px solid #6c5ce7;
        }

        .depth-level.semantic {
            background: rgba(253, 203, 110, 0.2);
            border-left: 4px solid #f39c12;
        }

        .depth-level.self-reference {
            background: rgba(138, 154, 91, 0.2);
            border-left: 4px solid var(--moss);
        }

        .depth-icon {
            font-size: 2rem;
            min-width: 50px;
            text-align: center;
        }

        .depth-content h4 {
            margin-bottom: 5px;
            font-family: 'Lora', serif;
        }

        .depth-content p {
            font-size: 0.9rem;
            margin: 0;
            opacity: 0.85;
        }

        .depth-arrow {
            font-size: 1.5rem;
            text-align: center;
            color: var(--moss);
        }

        /* Message */
        .message {
            text-align: center;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            font-size: 1.1rem;
        }

        .message.info {
            background: rgba(138, 154, 91, 0.2);
            color: var(--moss);
        }

        .message.success {
            background: rgba(138, 154, 91, 0.3);
            color: var(--moss);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .stat-box {
            background: rgba(255, 255, 255, 0.8);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--moss);
            font-family: 'Lora', serif;
        }

        .stat-label {
            font-size: 0.85rem;
            opacity: 0.8;
        }

        @media (max-width: 600px) {
            h1 { font-size: 1.8rem; }
            .current-word { font-size: 2rem; }
            .btn { padding: 12px 25px; font-size: 1rem; }
            .result-bar { width: 40px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">‚Üê Back to Surprising Paradoxes</a>

        <h1>The Self-Reference Effect</h1>
        <p class="subtitle">You Remember What Relates to YOU</p>

        <div class="card">
            <h2>The Memory Advantage of "Me"</h2>
            <p>
                Try to remember these words: <em>honest, table, creative, window, ambitious</em>.
                Now imagine being asked: "Does 'honest' describe YOU?" Suddenly, that word
                becomes <span class="highlight">far more memorable</span>.
            </p>
            <p>
                Rogers, Kuiper, and Kirker discovered this in 1977: information encoded in
                relation to the self is remembered <span class="highlight">significantly better</span>
                than information processed in any other way. It's not just about deeper
                processing‚Äîit's about the unique organization of self-knowledge in memory.
            </p>
            <p>
                Your self-concept acts as a <strong>superordinate schema</strong>‚Äîa rich,
                interconnected web of associations that new information can hook onto. When
                something relates to YOU, it gets filed in the best-organized filing system
                your brain has.
            </p>
        </div>

        <div class="card">
            <h2>The Experiment</h2>
            <p>
                You'll see 16 adjectives, each with a different encoding question. Answer
                YES or NO for each word. Then we'll test your memory‚Äîwhich words do you recall?
            </p>

            <div class="experiment-container" id="experimentContainer">
                <div class="phase-indicator" id="phaseIndicator">
                    <div class="phase-dot active" id="phase1">1</div>
                    <div class="phase-dot" id="phase2">2</div>
                    <div class="phase-dot" id="phase3">3</div>
                </div>

                <div id="encodingPhase">
                    <div class="word-display" id="wordDisplay">
                        <div class="encoding-type" id="encodingType">STRUCTURAL</div>
                        <div class="current-word" id="currentWord">BRAVE</div>
                        <div class="encoding-question" id="encodingQuestion">
                            Is this word in UPPERCASE letters?
                        </div>
                        <div class="btn-group">
                            <button class="btn btn-yes" onclick="answer(true)">YES</button>
                            <button class="btn btn-no" onclick="answer(false)">NO</button>
                        </div>
                    </div>

                    <div class="progress-container">
                        <div class="progress-label">
                            <span>Progress</span>
                            <span id="progressText">1 / 16</span>
                        </div>
                        <div class="progress-track">
                            <div class="progress-fill" id="progressFill" style="width: 6.25%"></div>
                        </div>
                    </div>
                </div>

                <div id="distractorPhase" style="display: none;">
                    <div class="message info">
                        <h3>Brief Pause</h3>
                        <p>Count backwards from 100 by 7s for 30 seconds...</p>
                        <p style="font-size: 2rem; margin-top: 20px;" id="countdown">30</p>
                    </div>
                </div>

                <div id="recallPhase" style="display: none;">
                    <h3>Memory Test</h3>
                    <p>Click on all the words you remember seeing in the encoding phase:</p>

                    <div class="recall-grid" id="recallGrid"></div>

                    <div class="btn-group" style="margin-top: 20px;">
                        <button class="btn btn-primary" onclick="submitRecall()">
                            SUBMIT ANSWERS
                        </button>
                    </div>
                </div>

                <div id="resultsPhase" style="display: none;">
                    <div class="results-panel">
                        <h3 style="text-align: center; margin-bottom: 20px;">Your Results</h3>

                        <p style="text-align: center;">
                            Recall rate by encoding type:
                        </p>

                        <div class="results-chart">
                            <div class="result-bar-container">
                                <div class="result-bar structural" id="barStructural" style="height: 0px;">0%</div>
                                <div class="result-label">Structural</div>
                            </div>
                            <div class="result-bar-container">
                                <div class="result-bar phonemic" id="barPhonemic" style="height: 0px;">0%</div>
                                <div class="result-label">Phonemic</div>
                            </div>
                            <div class="result-bar-container">
                                <div class="result-bar semantic" id="barSemantic" style="height: 0px;">0%</div>
                                <div class="result-label">Semantic</div>
                            </div>
                            <div class="result-bar-container">
                                <div class="result-bar self-ref" id="barSelfRef" style="height: 0px;">0%</div>
                                <div class="result-label">Self-Reference</div>
                            </div>
                        </div>

                        <div class="message" id="resultMessage"></div>

                        <div class="stats-grid">
                            <div class="stat-box">
                                <div class="stat-number" id="statTotal">0</div>
                                <div class="stat-label">Words Recalled</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-number" id="statSelfRef">0</div>
                                <div class="stat-label">Self-Reference Recalled</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-number" id="statAdvantage">0%</div>
                                <div class="stat-label">Self-Ref Advantage</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>Depth of Processing</h2>
            <p>
                The original Craik & Tulving (1975) research showed that "deeper" processing
                leads to better memory. Rogers et al. (1977) added self-reference as the
                deepest level of all.
            </p>

            <div class="depth-diagram">
                <div class="depth-level structural">
                    <div class="depth-icon">üëÅÔ∏è</div>
                    <div class="depth-content">
                        <h4>Structural (Shallow)</h4>
                        <p>"Is the word in uppercase?" ‚Äî Only visual features processed</p>
                    </div>
                </div>

                <div class="depth-arrow">‚Üì</div>

                <div class="depth-level phonemic">
                    <div class="depth-icon">üîä</div>
                    <div class="depth-content">
                        <h4>Phonemic (Moderate)</h4>
                        <p>"Does it rhyme with 'love'?" ‚Äî Sound patterns analyzed</p>
                    </div>
                </div>

                <div class="depth-arrow">‚Üì</div>

                <div class="depth-level semantic">
                    <div class="depth-icon">üìñ</div>
                    <div class="depth-content">
                        <h4>Semantic (Deep)</h4>
                        <p>"Is it a positive trait?" ‚Äî Meaning and category considered</p>
                    </div>
                </div>

                <div class="depth-arrow">‚Üì</div>

                <div class="depth-level self-reference">
                    <div class="depth-icon">ü™û</div>
                    <div class="depth-content">
                        <h4>Self-Reference (Deepest)</h4>
                        <p>"Does this describe YOU?" ‚Äî Connected to self-concept</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>Why Does Self-Reference Work?</h2>

            <div class="stats-grid" style="margin-bottom: 25px;">
                <div class="stat-box" style="border: 2px solid var(--sage);">
                    <div style="font-size: 2rem;">üï∏Ô∏è</div>
                    <div class="stat-label" style="margin-top: 10px;">
                        <strong>Rich Associations</strong><br>
                        Your self-concept has more connections than any other schema
                    </div>
                </div>
                <div class="stat-box" style="border: 2px solid var(--sage);">
                    <div style="font-size: 2rem;">üè∑Ô∏è</div>
                    <div class="stat-label" style="margin-top: 10px;">
                        <strong>Organized Structure</strong><br>
                        Self-knowledge is hierarchically organized for easy retrieval
                    </div>
                </div>
                <div class="stat-box" style="border: 2px solid var(--sage);">
                    <div style="font-size: 2rem;">‚ö°</div>
                    <div class="stat-label" style="margin-top: 10px;">
                        <strong>Emotional Engagement</strong><br>
                        Self-relevant info triggers emotional processing
                    </div>
                </div>
                <div class="stat-box" style="border: 2px solid var(--sage);">
                    <div style="font-size: 2rem;">üîÑ</div>
                    <div class="stat-label" style="margin-top: 10px;">
                        <strong>Elaborative Encoding</strong><br>
                        Comparison to self generates many mental pathways
                    </div>
                </div>
            </div>

            <h3>The Self-Enhancement Twist</h3>
            <p>
                Interestingly, words you endorse as <span class="highlight">"like me"</span>
                are remembered even better than words you reject. There's a memory advantage
                for positive self-relevant traits‚Äîyour brain preferentially encodes
                information that supports your self-image.
            </p>
        </div>

        <div class="card">
            <h2>Practical Applications</h2>

            <div class="stats-grid">
                <div class="stat-box">
                    <div style="font-size: 2rem;">üìö</div>
                    <h4 style="margin: 10px 0;">Studying</h4>
                    <p style="font-size: 0.85rem;">"How does this concept relate to my life?"</p>
                </div>
                <div class="stat-box">
                    <div style="font-size: 2rem;">üíº</div>
                    <h4 style="margin: 10px 0;">Marketing</h4>
                    <p style="font-size: 0.85rem;">"Imagine yourself using this product..."</p>
                </div>
                <div class="stat-box">
                    <div style="font-size: 2rem;">üéì</div>
                    <h4 style="margin: 10px 0;">Teaching</h4>
                    <p style="font-size: 0.85rem;">"How would YOU solve this problem?"</p>
                </div>
                <div class="stat-box">
                    <div style="font-size: 2rem;">üíä</div>
                    <h4 style="margin: 10px 0;">Therapy</h4>
                    <p style="font-size: 0.85rem;">Processing experiences through self-narrative</p>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>The Research Legacy</h2>
            <blockquote style="border-left: 4px solid var(--moss); padding-left: 20px; margin: 20px 0; font-style: italic;">
                "Self-reference is a rich and powerful encoding process that appears to
                function as a superordinate schema that is deeply involved in the processing,
                interpretation, and memory of personal information."
                <br><br>
                ‚Äî Rogers, Kuiper & Kirker (1977)
            </blockquote>

            <h3>Key Studies</h3>
            <ul style="line-height: 2; padding-left: 20px;">
                <li><strong>Rogers et al. (1977)</strong>: Original self-reference effect discovery</li>
                <li><strong>Symons & Johnson (1997)</strong>: Meta-analysis confirming robustness</li>
                <li><strong>Klein & Kihlstrom (1986)</strong>: Self vs. other-reference comparison</li>
                <li><strong>Cunningham et al. (2013)</strong>: Neural basis in medial prefrontal cortex</li>
            </ul>
        </div>

        <div class="card" style="text-align: center; background: linear-gradient(135deg, rgba(138, 154, 91, 0.2) 0%, rgba(221, 161, 94, 0.2) 100%);">
            <h2>The Takeaway</h2>
            <p style="font-size: 1.1rem;">
                Your brain has a <strong>built-in VIP pass</strong> for self-relevant
                information. The self-reference effect isn't just about vanity‚Äîit reflects
                the fact that your self-concept is the <span class="highlight">most
                elaborate, well-organized knowledge structure</span> you possess.
            </p>
            <p style="font-size: 1.1rem; margin-top: 20px;">
                Want to remember something better? Ask yourself: <strong>"How does this
                relate to ME?"</strong> That simple question opens the door to your
                brain's most powerful filing system.
            </p>
        </div>
    </div>

    <script>
        // Experiment data
        const words = [
            // Structural (4 words)
            { word: 'BRAVE', type: 'structural', question: 'Is this word in UPPERCASE letters?' },
            { word: 'gentle', type: 'structural', question: 'Is this word in lowercase letters?' },
            { word: 'WITTY', type: 'structural', question: 'Is this word in UPPERCASE letters?' },
            { word: 'calm', type: 'structural', question: 'Is this word in lowercase letters?' },

            // Phonemic (4 words)
            { word: 'KIND', type: 'phonemic', question: 'Does this word rhyme with "mind"?' },
            { word: 'BOLD', type: 'phonemic', question: 'Does this word rhyme with "cold"?' },
            { word: 'SMART', type: 'phonemic', question: 'Does this word rhyme with "heart"?' },
            { word: 'FAIR', type: 'phonemic', question: 'Does this word rhyme with "care"?' },

            // Semantic (4 words)
            { word: 'HONEST', type: 'semantic', question: 'Is this a positive personality trait?' },
            { word: 'CURIOUS', type: 'semantic', question: 'Is this a trait that helps learning?' },
            { word: 'PATIENT', type: 'semantic', question: 'Is this a trait valued in relationships?' },
            { word: 'LOYAL', type: 'semantic', question: 'Is this a trait friends appreciate?' },

            // Self-reference (4 words)
            { word: 'CREATIVE', type: 'self-reference', question: 'Does this word describe YOU?' },
            { word: 'AMBITIOUS', type: 'self-reference', question: 'Does this word describe YOU?' },
            { word: 'THOUGHTFUL', type: 'self-reference', question: 'Does this word describe YOU?' },
            { word: 'CONFIDENT', type: 'self-reference', question: 'Does this word describe YOU?' }
        ];

        // Distractor words for recall
        const distractorWords = [
            'NERVOUS', 'LAZY', 'SHY', 'QUIET', 'ANGRY', 'TIRED', 'PROUD', 'CAREFUL'
        ];

        let currentWordIndex = 0;
        let responses = [];
        let recallSelected = new Set();
        let shuffledWords = [];

        // Shuffle array
        function shuffle(array) {
            const arr = [...array];
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        }

        // Initialize
        shuffledWords = shuffle(words);
        showWord();

        function showWord() {
            if (currentWordIndex >= shuffledWords.length) {
                startDistractor();
                return;
            }

            const word = shuffledWords[currentWordIndex];
            document.getElementById('currentWord').textContent = word.word;
            document.getElementById('encodingQuestion').textContent = word.question;

            const typeEl = document.getElementById('encodingType');
            typeEl.textContent = word.type.toUpperCase().replace('-', ' ');
            typeEl.className = 'encoding-type ' + word.type;

            document.getElementById('progressText').textContent =
                `${currentWordIndex + 1} / ${shuffledWords.length}`;
            document.getElementById('progressFill').style.width =
                `${((currentWordIndex + 1) / shuffledWords.length) * 100}%`;
        }

        function answer(response) {
            responses.push({
                word: shuffledWords[currentWordIndex].word.toUpperCase(),
                type: shuffledWords[currentWordIndex].type,
                answer: response
            });

            currentWordIndex++;
            showWord();
        }

        function startDistractor() {
            document.getElementById('encodingPhase').style.display = 'none';
            document.getElementById('distractorPhase').style.display = 'block';
            document.getElementById('phase1').classList.remove('active');
            document.getElementById('phase1').classList.add('complete');
            document.getElementById('phase2').classList.add('active');

            let countdown = 30;
            const countdownEl = document.getElementById('countdown');

            const timer = setInterval(() => {
                countdown--;
                countdownEl.textContent = countdown;

                if (countdown <= 0) {
                    clearInterval(timer);
                    startRecall();
                }
            }, 1000);
        }

        function startRecall() {
            document.getElementById('distractorPhase').style.display = 'none';
            document.getElementById('recallPhase').style.display = 'block';
            document.getElementById('phase2').classList.remove('active');
            document.getElementById('phase2').classList.add('complete');
            document.getElementById('phase3').classList.add('active');

            // Create recall grid with target words and distractors
            const allWords = [
                ...shuffledWords.map(w => w.word.toUpperCase()),
                ...distractorWords
            ];
            const shuffledAll = shuffle(allWords);

            const grid = document.getElementById('recallGrid');
            grid.innerHTML = '';

            shuffledAll.forEach(word => {
                const div = document.createElement('div');
                div.className = 'recall-word';
                div.textContent = word;
                div.onclick = () => toggleRecall(div, word);
                grid.appendChild(div);
            });
        }

        function toggleRecall(el, word) {
            if (recallSelected.has(word)) {
                recallSelected.delete(word);
                el.classList.remove('selected');
            } else {
                recallSelected.add(word);
                el.classList.add('selected');
            }
        }

        function submitRecall() {
            const targetWords = new Set(shuffledWords.map(w => w.word.toUpperCase()));

            // Calculate results by type
            const results = {
                structural: { correct: 0, total: 0 },
                phonemic: { correct: 0, total: 0 },
                semantic: { correct: 0, total: 0 },
                'self-reference': { correct: 0, total: 0 }
            };

            shuffledWords.forEach(word => {
                const upperWord = word.word.toUpperCase();
                results[word.type].total++;
                if (recallSelected.has(upperWord)) {
                    results[word.type].correct++;
                }
            });

            // Update word styling
            document.querySelectorAll('.recall-word').forEach(el => {
                const word = el.textContent;
                const isTarget = targetWords.has(word);
                const wasSelected = recallSelected.has(word);

                if (isTarget && wasSelected) {
                    el.classList.add('correct');
                } else if (!isTarget && wasSelected) {
                    el.classList.add('wrong');
                } else if (isTarget && !wasSelected) {
                    el.classList.add('missed');
                }
                el.onclick = null;
            });

            // Show results
            showResults(results);
        }

        function showResults(results) {
            document.getElementById('recallPhase').querySelector('.btn-group').style.display = 'none';
            document.getElementById('resultsPhase').style.display = 'block';
            document.getElementById('phase3').classList.remove('active');
            document.getElementById('phase3').classList.add('complete');

            // Calculate percentages
            const pcts = {
                structural: (results.structural.correct / results.structural.total) * 100,
                phonemic: (results.phonemic.correct / results.phonemic.total) * 100,
                semantic: (results.semantic.correct / results.semantic.total) * 100,
                selfRef: (results['self-reference'].correct / results['self-reference'].total) * 100
            };

            // Animate bars
            setTimeout(() => {
                const maxHeight = 150;
                document.getElementById('barStructural').style.height = (pcts.structural / 100 * maxHeight) + 'px';
                document.getElementById('barStructural').textContent = Math.round(pcts.structural) + '%';

                document.getElementById('barPhonemic').style.height = (pcts.phonemic / 100 * maxHeight) + 'px';
                document.getElementById('barPhonemic').textContent = Math.round(pcts.phonemic) + '%';

                document.getElementById('barSemantic').style.height = (pcts.semantic / 100 * maxHeight) + 'px';
                document.getElementById('barSemantic').textContent = Math.round(pcts.semantic) + '%';

                document.getElementById('barSelfRef').style.height = (pcts.selfRef / 100 * maxHeight) + 'px';
                document.getElementById('barSelfRef').textContent = Math.round(pcts.selfRef) + '%';
            }, 100);

            // Stats
            const totalRecalled = results.structural.correct + results.phonemic.correct +
                                  results.semantic.correct + results['self-reference'].correct;

            const avgOther = (pcts.structural + pcts.phonemic + pcts.semantic) / 3;
            const advantage = pcts.selfRef - avgOther;

            document.getElementById('statTotal').textContent = totalRecalled;
            document.getElementById('statSelfRef').textContent = results['self-reference'].correct + '/4';
            document.getElementById('statAdvantage').textContent =
                (advantage >= 0 ? '+' : '') + Math.round(advantage) + '%';

            // Message
            const msgEl = document.getElementById('resultMessage');
            if (pcts.selfRef > avgOther) {
                msgEl.className = 'message success';
                msgEl.innerHTML = `<strong>You demonstrated the Self-Reference Effect!</strong><br>
                    You recalled ${Math.round(pcts.selfRef)}% of self-reference words vs
                    ${Math.round(avgOther)}% average for other types.`;
            } else {
                msgEl.className = 'message info';
                msgEl.innerHTML = `Interesting result! Your self-reference recall was
                    ${Math.round(pcts.selfRef)}%. The effect varies by individual and task conditions.`;
            }
        }
    </script>
</body>
</html>
