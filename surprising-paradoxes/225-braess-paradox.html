<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Braess's Paradox - Adding Roads Makes Traffic Worse</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1a2a3a 0%, #0d1a2a 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        header { text-align: center; margin-bottom: 30px; }
        .back-link { color: #64b5f6; text-decoration: none; margin-bottom: 20px; display: inline-block; }
        h1 {
            font-size: 2.4rem;
            background: linear-gradient(135deg, #ff6b6b, #feca57);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }
        .subtitle { font-size: 1.1rem; color: #90caf9; max-width: 750px; margin: 0 auto; line-height: 1.6; }
        .main-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; }
        .panel {
            background: rgba(30, 50, 70, 0.6);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(100, 180, 246, 0.3);
        }
        .panel h2 { color: #feca57; font-size: 1.3rem; margin-bottom: 15px; }
        canvas { width: 100%; height: 300px; background: rgba(10, 25, 40, 0.6); border-radius: 10px; }
        .controls { display: flex; gap: 15px; margin: 20px 0; justify-content: center; flex-wrap: wrap; }
        .control-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-family: inherit;
            font-size: 1rem;
            transition: all 0.3s;
        }
        .control-btn.primary { background: linear-gradient(135deg, #ff6b6b, #ee5a5a); color: white; }
        .control-btn.secondary { background: rgba(100, 180, 246, 0.3); color: #64b5f6; border: 1px solid rgba(100, 180, 246, 0.5); }
        .control-btn:hover { transform: scale(1.05); }
        .stats-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 20px; }
        .stat-box { background: rgba(10, 25, 40, 0.6); padding: 15px; border-radius: 10px; text-align: center; }
        .stat-value { font-size: 1.6rem; font-weight: bold; color: #feca57; }
        .stat-label { color: #90caf9; font-size: 0.85rem; margin-top: 5px; }
        .comparison { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; }
        .comparison-card {
            background: rgba(10, 25, 40, 0.6);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        .comparison-card.worse { border: 2px solid #ff6b6b; }
        .comparison-card.better { border: 2px solid #4ecdc4; }
        .comparison-value { font-size: 2rem; font-weight: bold; }
        .comparison-card.worse .comparison-value { color: #ff6b6b; }
        .comparison-card.better .comparison-value { color: #4ecdc4; }
        .insight-box {
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.2), rgba(254, 202, 87, 0.1));
            border-left: 4px solid #ff6b6b;
            padding: 20px;
            border-radius: 0 10px 10px 0;
            margin: 25px 0;
        }
        .insight-box h3 { color: #feca57; margin-bottom: 10px; }
        .explanation { background: rgba(30, 50, 70, 0.4); border-radius: 15px; padding: 25px; margin-top: 30px; }
        .explanation h2 { color: #feca57; margin-bottom: 15px; }
        .explanation p { color: #b0cce8; line-height: 1.8; margin-bottom: 15px; }
        @media (max-width: 900px) { .main-grid, .comparison { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="index.html" class="back-link">‚Üê Back to Surprising Paradoxes</a>
            <h1>Braess's Paradox</h1>
            <p class="subtitle">Adding a new road to a traffic network can make EVERYONE's journey slower. Removing roads can speed things up!</p>
        </header>

        <div class="main-grid">
            <div class="panel">
                <h2>üöó WITHOUT the Shortcut</h2>
                <canvas id="canvas1"></canvas>
                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-value" id="time1">45</div>
                        <div class="stat-label">Minutes per Driver</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="route1">50/50</div>
                        <div class="stat-label">Route Split</div>
                    </div>
                </div>
            </div>
            <div class="panel">
                <h2>üõ£Ô∏è WITH the Shortcut</h2>
                <canvas id="canvas2"></canvas>
                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-value" id="time2">65</div>
                        <div class="stat-label">Minutes per Driver</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="route2">100%</div>
                        <div class="stat-label">Use Shortcut</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="controls">
            <button class="control-btn primary" id="runSim">‚ñ∂ Run Simulation</button>
            <button class="control-btn secondary" id="resetSim">‚Üª Reset</button>
        </div>

        <div class="comparison">
            <div class="comparison-card better">
                <div class="comparison-value">45 min</div>
                <div style="color: #4ecdc4;">Without Shortcut</div>
            </div>
            <div class="comparison-card worse">
                <div class="comparison-value">65 min</div>
                <div style="color: #ff6b6b;">With Shortcut (+44%!)</div>
            </div>
        </div>

        <div class="insight-box">
            <h3>ü§Ø The Paradox</h3>
            <p>Each driver rationally chooses the fastest route for THEMSELVES. But when everyone does this, they all crowd onto the shortcut, creating congestion that makes EVERYONE worse off. The Nash equilibrium (where no one can improve by switching) is NOT the social optimum!</p>
        </div>

        <div class="explanation">
            <h2>Real-World Examples</h2>
            <p><strong>New York City, 1990:</strong> When 42nd Street was closed on Earth Day, traffic IMPROVED throughout Manhattan. The expected gridlock never materialized.</p>
            <p><strong>Seoul, South Korea:</strong> Removing the Cheonggye Expressway as part of a river restoration project actually SPED UP traffic in the city.</p>
            <p><strong>Stuttgart, Germany, 1969:</strong> After building new roads, traffic got WORSE until a section was closed again.</p>
            <p>The paradox was discovered by German mathematician Dietrich Braess in 1968. In random networks, adding a road causes Braess's paradox about 50% of the time!</p>
            <p style="font-style: italic; color: #8ab0d0;">The lesson: Individual rationality can lead to collective irrationality. Game theory meets urban planning.</p>
        </div>
    </div>

    <script>
        const canvas1 = document.getElementById('canvas1');
        const canvas2 = document.getElementById('canvas2');
        const ctx1 = canvas1.getContext('2d');
        const ctx2 = canvas2.getContext('2d');

        function initCanvas(canvas) {
            const dpr = window.devicePixelRatio || 1;
            const rect = canvas.getBoundingClientRect();
            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            const ctx = canvas.getContext('2d');
            ctx.scale(dpr, dpr);
            return { width: rect.width, height: rect.height };
        }

        let cars1 = [];
        let cars2 = [];
        let animating = false;

        function drawNetwork(ctx, dims, hasShortcut, cars) {
            const { width, height } = dims;
            const cx = width / 2;
            const cy = height / 2;

            ctx.clearRect(0, 0, width, height);

            // Nodes
            const nodes = {
                S: { x: 50, y: cy },
                A: { x: cx, y: 50 },
                B: { x: cx, y: height - 50 },
                T: { x: width - 50, y: cy }
            };

            // Draw roads
            ctx.strokeStyle = '#4a6a8a';
            ctx.lineWidth = 8;
            ctx.lineCap = 'round';

            // S->A, A->T
            ctx.beginPath();
            ctx.moveTo(nodes.S.x, nodes.S.y);
            ctx.lineTo(nodes.A.x, nodes.A.y);
            ctx.lineTo(nodes.T.x, nodes.T.y);
            ctx.stroke();

            // S->B, B->T
            ctx.beginPath();
            ctx.moveTo(nodes.S.x, nodes.S.y);
            ctx.lineTo(nodes.B.x, nodes.B.y);
            ctx.lineTo(nodes.T.x, nodes.T.y);
            ctx.stroke();

            // Shortcut A->B
            if (hasShortcut) {
                ctx.strokeStyle = '#ff6b6b';
                ctx.beginPath();
                ctx.moveTo(nodes.A.x, nodes.A.y);
                ctx.lineTo(nodes.B.x, nodes.B.y);
                ctx.stroke();

                ctx.fillStyle = '#ff6b6b';
                ctx.font = 'bold 14px Georgia';
                ctx.fillText('SHORTCUT', cx - 40, cy);
            }

            // Draw nodes
            for (const [name, pos] of Object.entries(nodes)) {
                ctx.fillStyle = name === 'S' ? '#4ecdc4' : name === 'T' ? '#feca57' : '#64b5f6';
                ctx.beginPath();
                ctx.arc(pos.x, pos.y, 20, 0, Math.PI * 2);
                ctx.fill();

                ctx.fillStyle = '#1a2a3a';
                ctx.font = 'bold 16px Georgia';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(name, pos.x, pos.y);
            }

            // Draw cars
            for (const car of cars) {
                ctx.fillStyle = '#feca57';
                ctx.beginPath();
                ctx.arc(car.x, car.y, 6, 0, Math.PI * 2);
                ctx.fill();
            }

            // Labels
            ctx.fillStyle = '#90caf9';
            ctx.font = '12px Georgia';
            ctx.textAlign = 'center';
            ctx.fillText('T/100', (nodes.S.x + nodes.A.x) / 2 - 20, (nodes.S.y + nodes.A.y) / 2 - 10);
            ctx.fillText('45 min', (nodes.A.x + nodes.T.x) / 2 + 20, (nodes.A.y + nodes.T.y) / 2 - 10);
            ctx.fillText('45 min', (nodes.S.x + nodes.B.x) / 2 - 20, (nodes.S.y + nodes.B.y) / 2 + 20);
            ctx.fillText('T/100', (nodes.B.x + nodes.T.x) / 2 + 20, (nodes.B.y + nodes.T.y) / 2 + 20);
        }

        function animate() {
            if (!animating) return;

            const dims1 = { width: canvas1.width / (window.devicePixelRatio || 1), height: canvas1.height / (window.devicePixelRatio || 1) };
            const dims2 = { width: canvas2.width / (window.devicePixelRatio || 1), height: canvas2.height / (window.devicePixelRatio || 1) };

            // Update cars
            for (const car of cars1) {
                car.progress += 0.005;
                if (car.progress > 1) car.progress = 0;
            }
            for (const car of cars2) {
                car.progress += 0.003; // Slower due to congestion
                if (car.progress > 1) car.progress = 0;
            }

            drawNetwork(ctx1, dims1, false, cars1);
            drawNetwork(ctx2, dims2, true, cars2);

            requestAnimationFrame(animate);
        }

        function startSimulation() {
            const dims1 = initCanvas(canvas1);
            const dims2 = initCanvas(canvas2);

            const cx = dims1.width / 2;
            const cy = dims1.height / 2;

            // Generate cars for network 1 (split evenly)
            cars1 = [];
            for (let i = 0; i < 10; i++) {
                cars1.push({ x: 50 + i * 20, y: cy, progress: i * 0.1, route: i < 5 ? 'top' : 'bottom' });
            }

            // Generate cars for network 2 (all use shortcut)
            cars2 = [];
            for (let i = 0; i < 10; i++) {
                cars2.push({ x: 50 + i * 15, y: cy, progress: i * 0.1, route: 'shortcut' });
            }

            animating = true;
            animate();
        }

        document.getElementById('runSim').addEventListener('click', startSimulation);
        document.getElementById('resetSim').addEventListener('click', function() {
            animating = false;
            cars1 = [];
            cars2 = [];
            const dims1 = initCanvas(canvas1);
            const dims2 = initCanvas(canvas2);
            drawNetwork(ctx1, dims1, false, []);
            drawNetwork(ctx2, dims2, true, []);
        });

        // Initial draw
        window.addEventListener('load', function() {
            const dims1 = initCanvas(canvas1);
            const dims2 = initCanvas(canvas2);
            drawNetwork(ctx1, dims1, false, []);
            drawNetwork(ctx2, dims2, true, []);
        });
    </script>
</body>
</html>
