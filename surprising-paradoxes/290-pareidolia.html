<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pareidolia - Finding Faces in Random Noise</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        header { text-align: center; margin-bottom: 30px; }
        .back-link {
            color: #fd79a8;
            text-decoration: none;
            margin-bottom: 20px;
            display: inline-block;
        }
        h1 {
            font-size: 2.3rem;
            background: linear-gradient(135deg, #fd79a8, #a29bfe, #74b9ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }
        .subtitle {
            font-size: 1rem;
            color: #a0c4ff;
            max-width: 900px;
            margin: 0 auto;
            line-height: 1.6;
        }
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 25px;
            margin-bottom: 25px;
        }
        @media (max-width: 900px) {
            .main-grid { grid-template-columns: 1fr; }
        }
        .noise-panel {
            background: rgba(20, 30, 50, 0.8);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
        }
        .noise-panel h2 {
            color: #fd79a8;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        #noiseCanvas {
            border-radius: 10px;
            cursor: crosshair;
            max-width: 100%;
        }
        .instruction {
            color: #a0c4ff;
            margin-top: 15px;
            font-size: 0.95rem;
        }
        .face-markers {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
            margin-top: 15px;
        }
        .face-marker {
            background: rgba(253, 121, 168, 0.3);
            border: 1px solid #fd79a8;
            color: #fd79a8;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.85rem;
        }
        .controls-panel {
            background: rgba(20, 30, 50, 0.8);
            border-radius: 15px;
            padding: 20px;
        }
        .controls-panel h3 {
            color: #74b9ff;
            margin-bottom: 15px;
            font-size: 1.1rem;
            border-bottom: 1px solid rgba(116, 185, 255, 0.3);
            padding-bottom: 10px;
        }
        .control-group {
            margin-bottom: 18px;
        }
        .control-group label {
            display: block;
            color: #a0c4ff;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        input[type="range"] {
            width: 100%;
            height: 8px;
            background: #2d3748;
            border-radius: 4px;
            outline: none;
            -webkit-appearance: none;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: linear-gradient(135deg, #fd79a8, #a29bfe);
            border-radius: 50%;
            cursor: pointer;
        }
        .pattern-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-bottom: 15px;
        }
        .pattern-btn {
            padding: 10px;
            background: rgba(116, 185, 255, 0.2);
            border: 1px solid #74b9ff;
            color: #74b9ff;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s;
        }
        .pattern-btn:hover, .pattern-btn.active {
            background: #74b9ff;
            color: #0f3460;
        }
        .action-btn {
            width: 100%;
            padding: 12px;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #fd79a8, #e84393);
            border: none;
            color: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95rem;
            transition: all 0.3s;
        }
        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(253, 121, 168, 0.4);
        }
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }
        .stat-box {
            background: rgba(0,0,0,0.3);
            padding: 12px;
            border-radius: 8px;
            text-align: center;
        }
        .stat-value {
            color: #fd79a8;
            font-size: 1.5rem;
            font-weight: bold;
        }
        .stat-label {
            color: #a0c4ff;
            font-size: 0.75rem;
        }
        .examples-panel {
            background: rgba(20, 30, 50, 0.8);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
        }
        .examples-panel h2 {
            color: #a29bfe;
            text-align: center;
            margin-bottom: 20px;
        }
        .examples-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
        }
        .example-card {
            background: rgba(0,0,0,0.4);
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
        }
        .example-card:hover {
            transform: scale(1.03);
            border: 1px solid #a29bfe;
        }
        .example-image {
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            background: linear-gradient(135deg, #2d3748, #1a202c);
        }
        .example-info {
            padding: 12px;
        }
        .example-info h4 {
            color: #fd79a8;
            font-size: 0.95rem;
            margin-bottom: 5px;
        }
        .example-info p {
            color: #a0c4ff;
            font-size: 0.8rem;
            line-height: 1.4;
        }
        .bottom-panels {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }
        .panel {
            background: rgba(20, 30, 50, 0.8);
            border-radius: 15px;
            padding: 20px;
        }
        .panel h3 {
            color: #fd79a8;
            margin-bottom: 12px;
            font-size: 1.1rem;
        }
        .panel p {
            color: #b0c4de;
            line-height: 1.7;
            font-size: 0.95rem;
            margin-bottom: 12px;
        }
        .key-insight {
            background: linear-gradient(135deg, rgba(253, 121, 168, 0.2), rgba(162, 155, 254, 0.2));
            border-left: 4px solid #a29bfe;
            padding: 15px;
            border-radius: 0 10px 10px 0;
            margin: 15px 0;
        }
        .key-insight strong {
            color: #a29bfe;
        }
        .brain-diagram {
            background: rgba(0,0,0,0.4);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
        }
        #brainCanvas {
            width: 100%;
            max-width: 300px;
            height: 200px;
        }
        .evolution-list {
            list-style: none;
        }
        .evolution-list li {
            padding: 10px 0 10px 30px;
            position: relative;
            color: #b0c4de;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .evolution-list li::before {
            content: "üëÅÔ∏è";
            position: absolute;
            left: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="index.html" class="back-link">‚Üê Back to Paradoxes</a>
            <h1>Pareidolia</h1>
            <p class="subtitle">
                Your brain is a face-detection machine so powerful, it finds faces EVERYWHERE‚Äî
                in clouds, toast, electrical outlets, the Moon, random noise. Click where YOU
                see faces in the static. This isn't a bug; it's a survival feature tuned by
                millions of years of evolution.
            </p>
        </header>

        <div class="main-grid">
            <div class="noise-panel">
                <h2>üëÅÔ∏è Find the Faces</h2>
                <canvas id="noiseCanvas" width="600" height="500"></canvas>
                <p class="instruction">
                    Click anywhere you see a face, figure, or meaningful pattern.
                    There are NO real faces‚Äîbut your brain will find them anyway!
                </p>
                <div class="face-markers" id="faceMarkers"></div>
            </div>

            <div class="controls-panel">
                <h3>‚öôÔ∏è Pattern Controls</h3>

                <div class="pattern-buttons">
                    <button class="pattern-btn active" data-pattern="noise">Random Noise</button>
                    <button class="pattern-btn" data-pattern="clouds">Cloud-like</button>
                    <button class="pattern-btn" data-pattern="marble">Marble</button>
                    <button class="pattern-btn" data-pattern="wood">Wood Grain</button>
                </div>

                <div class="control-group">
                    <label>Noise Scale: <span id="scaleValue">1.0</span></label>
                    <input type="range" id="noiseScale" min="0.5" max="3" step="0.1" value="1">
                </div>

                <div class="control-group">
                    <label>Contrast: <span id="contrastValue">1.0</span></label>
                    <input type="range" id="contrast" min="0.5" max="2" step="0.1" value="1">
                </div>

                <div class="control-group">
                    <label>Blur: <span id="blurValue">0</span></label>
                    <input type="range" id="blur" min="0" max="5" step="1" value="0">
                </div>

                <button class="action-btn" id="regenerateBtn">üîÑ Generate New Pattern</button>
                <button class="action-btn" id="clearBtn">üóëÔ∏è Clear Markers</button>

                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-value" id="facesFound">0</div>
                        <div class="stat-label">Faces Found</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="patternsGenerated">1</div>
                        <div class="stat-label">Patterns Viewed</div>
                    </div>
                </div>

                <h3 style="margin-top: 20px;">üéØ Challenge Mode</h3>
                <button class="action-btn" id="challengeBtn">Start Timed Challenge</button>
                <p id="challengeInfo" style="color: #a0c4ff; font-size: 0.85rem; margin-top: 10px;">
                    Find as many faces as you can in 30 seconds!
                </p>
            </div>
        </div>

        <div class="examples-panel">
            <h2>üåü Famous Pareidolia</h2>
            <div class="examples-grid">
                <div class="example-card">
                    <div class="example-image">üåë</div>
                    <div class="example-info">
                        <h4>The Man in the Moon</h4>
                        <p>Lunar maria form a face visible worldwide‚Äîdifferent cultures see different figures.</p>
                    </div>
                </div>
                <div class="example-card">
                    <div class="example-image">üî¥</div>
                    <div class="example-info">
                        <h4>Face on Mars</h4>
                        <p>1976 Viking photo sparked decades of conspiracy theories. Higher-res images: just a mesa.</p>
                    </div>
                </div>
                <div class="example-card">
                    <div class="example-image">üçû</div>
                    <div class="example-info">
                        <h4>Virgin Mary Toast</h4>
                        <p>Grilled cheese sold for $28,000 on eBay in 2004. Religious pareidolia is universal.</p>
                    </div>
                </div>
                <div class="example-card">
                    <div class="example-image">üîå</div>
                    <div class="example-info">
                        <h4>Surprised Outlets</h4>
                        <p>Electric outlets look shocked! Two eyes and an open mouth‚Äîour brains can't unsee it.</p>
                    </div>
                </div>
                <div class="example-card">
                    <div class="example-image">‚òÅÔ∏è</div>
                    <div class="example-info">
                        <h4>Cloud Animals</h4>
                        <p>Cumulus clouds trigger constant pareidolia‚Äîa universal childhood experience.</p>
                    </div>
                </div>
                <div class="example-card">
                    <div class="example-image">üèîÔ∏è</div>
                    <div class="example-info">
                        <h4>Old Man of the Mountain</h4>
                        <p>New Hampshire's granite profile (1805-2003). Collapsed, but still on state quarter.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="bottom-panels">
            <div class="panel">
                <h3>üß† The Fusiform Face Area</h3>
                <div class="brain-diagram">
                    <canvas id="brainCanvas"></canvas>
                </div>
                <p>
                    Your brain has a specialized region called the <strong>Fusiform Face Area (FFA)</strong>
                    that activates whenever you see anything resembling a face‚Äîreal or imagined.
                </p>
                <p>
                    fMRI studies show the FFA lights up for:
                </p>
                <ul style="color: #b0c4de; margin-left: 20px; margin-bottom: 15px;">
                    <li>Human faces</li>
                    <li>Animal faces</li>
                    <li>Face-like objects (outlets, cars, houses)</li>
                    <li>Random patterns that vaguely resemble faces</li>
                </ul>
                <div class="key-insight">
                    <strong>Speed over Accuracy:</strong> The FFA responds in just 100-170 milliseconds‚Äî
                    faster than conscious thought. It's tuned for false positives: better to see a face
                    that isn't there than miss one that IS there (like a predator).
                </div>
            </div>

            <div class="panel">
                <h3>ü¶Å Evolutionary Origins</h3>
                <ul class="evolution-list">
                    <li>
                        <strong>Predator Detection:</strong> Early humans who spotted lion faces in grass
                        survived. Those who didn't became lunch. Hyperactive face detection = survival.
                    </li>
                    <li>
                        <strong>Social Bonding:</strong> Recognizing faces builds relationships. Infants
                        prefer face-like patterns within HOURS of birth‚Äîit's hardwired.
                    </li>
                    <li>
                        <strong>Reading Intentions:</strong> Is that stranger friendly or hostile? Fast
                        face processing lets you react before it's too late.
                    </li>
                    <li>
                        <strong>Pattern Matching:</strong> Faces are the most important patterns in
                        human life. We evolved to find them EVERYWHERE.
                    </li>
                </ul>
                <div class="key-insight">
                    <strong>The Cost:</strong> We see Jesus on toast, goblins in trees, and aliens on Mars.
                    These "false positives" are a small price for never missing a real face.
                </div>
            </div>

            <div class="panel">
                <h3>üî¨ The Science</h3>
                <p>
                    <strong>Top-Down Processing:</strong> Your brain doesn't just passively receive images‚Äî
                    it actively predicts what it EXPECTS to see. Faces are high on the expectation list.
                </p>
                <p>
                    <strong>Gestalt Principles:</strong> We automatically group features into wholes.
                    Two dots and a line? That's a face. This grouping is automatic and unconscious.
                </p>
                <p>
                    <strong>Low Spatial Frequency:</strong> Pareidolia works best with blurry or
                    low-resolution images. Details would reveal the illusion; ambiguity preserves it.
                </p>
                <p>
                    <strong>Dopamine Connection:</strong> People high in dopamine (creative types,
                    schizophrenia spectrum) experience MORE pareidolia. It correlates with "magical thinking."
                </p>
                <div class="key-insight">
                    <strong>Carl Sagan wrote:</strong> "As infants, we see faces so early that we may be
                    hardwired to recognize them... Those infants who were unable to recognize a face
                    smiled back less, were less likely to win the hearts of their parents, and less
                    likely to prosper."
                </div>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('noiseCanvas');
        const ctx = canvas.getContext('2d');

        let settings = {
            pattern: 'noise',
            scale: 1,
            contrast: 1,
            blur: 0
        };

        let markers = [];
        let facesFound = 0;
        let patternsGenerated = 1;
        let challengeMode = false;
        let challengeTimer = null;

        // Simplex-like noise (simplified)
        function noise2D(x, y) {
            const n = Math.sin(x * 12.9898 + y * 78.233) * 43758.5453;
            return n - Math.floor(n);
        }

        function fractalNoise(x, y, octaves = 4) {
            let value = 0;
            let amplitude = 1;
            let frequency = 1;
            let maxValue = 0;

            for (let i = 0; i < octaves; i++) {
                value += amplitude * noise2D(x * frequency, y * frequency);
                maxValue += amplitude;
                amplitude *= 0.5;
                frequency *= 2;
            }

            return value / maxValue;
        }

        function generateNoise() {
            const imageData = ctx.createImageData(canvas.width, canvas.height);
            const data = imageData.data;
            const scale = settings.scale * 50;

            for (let y = 0; y < canvas.height; y++) {
                for (let x = 0; x < canvas.width; x++) {
                    let value;

                    switch (settings.pattern) {
                        case 'noise':
                            value = fractalNoise(x / scale, y / scale, 6);
                            break;
                        case 'clouds':
                            value = fractalNoise(x / (scale * 2), y / (scale * 2), 8);
                            value = Math.pow(value, 0.7);
                            break;
                        case 'marble':
                            const nx = fractalNoise(x / scale, y / scale, 4) * 2;
                            value = Math.sin(x / 30 + nx * 5) * 0.5 + 0.5;
                            break;
                        case 'wood':
                            const dist = Math.sqrt(Math.pow(x - canvas.width/2, 2) + Math.pow(y - canvas.height/2, 2));
                            const noise = fractalNoise(x / scale, y / scale, 3) * 10;
                            value = Math.sin(dist / 5 + noise) * 0.5 + 0.5;
                            break;
                    }

                    // Apply contrast
                    value = (value - 0.5) * settings.contrast + 0.5;
                    value = Math.max(0, Math.min(1, value));

                    const gray = Math.floor(value * 255);
                    const i = (y * canvas.width + x) * 4;
                    data[i] = gray;
                    data[i + 1] = gray;
                    data[i + 2] = gray;
                    data[i + 3] = 255;
                }
            }

            ctx.putImageData(imageData, 0, 0);

            // Apply blur if needed
            if (settings.blur > 0) {
                ctx.filter = `blur(${settings.blur}px)`;
                ctx.drawImage(canvas, 0, 0);
                ctx.filter = 'none';
            }
        }

        function addMarker(x, y) {
            markers.push({ x, y, id: Date.now() });
            facesFound++;
            updateStats();
            renderMarkers();
        }

        function renderMarkers() {
            // Redraw noise then markers
            generateNoise();

            ctx.strokeStyle = '#fd79a8';
            ctx.lineWidth = 2;

            markers.forEach((m, i) => {
                ctx.beginPath();
                ctx.arc(m.x, m.y, 25, 0, Math.PI * 2);
                ctx.stroke();

                ctx.fillStyle = 'rgba(253, 121, 168, 0.3)';
                ctx.fill();

                ctx.fillStyle = '#fd79a8';
                ctx.font = 'bold 12px Georgia';
                ctx.textAlign = 'center';
                ctx.fillText(i + 1, m.x, m.y + 4);
            });

            // Update marker list
            const container = document.getElementById('faceMarkers');
            container.innerHTML = markers.map((m, i) =>
                `<span class="face-marker">Face ${i + 1}</span>`
            ).join('');
        }

        function updateStats() {
            document.getElementById('facesFound').textContent = facesFound;
            document.getElementById('patternsGenerated').textContent = patternsGenerated;
        }

        function drawBrain() {
            const brainCanvas = document.getElementById('brainCanvas');
            const bctx = brainCanvas.getContext('2d');
            brainCanvas.width = brainCanvas.offsetWidth;
            brainCanvas.height = brainCanvas.offsetHeight;

            const w = brainCanvas.width;
            const h = brainCanvas.height;

            // Brain outline
            bctx.fillStyle = '#2d3748';
            bctx.beginPath();
            bctx.ellipse(w/2, h/2, w*0.4, h*0.4, 0, 0, Math.PI * 2);
            bctx.fill();

            // FFA highlight
            bctx.fillStyle = '#fd79a8';
            bctx.beginPath();
            bctx.ellipse(w*0.35, h*0.55, 20, 15, -0.3, 0, Math.PI * 2);
            bctx.fill();

            // Label
            bctx.fillStyle = '#fff';
            bctx.font = '11px Georgia';
            bctx.textAlign = 'center';
            bctx.fillText('Fusiform Face Area', w*0.35, h*0.75);
            bctx.fillText('(FFA)', w*0.35, h*0.85);

            // Brain folds
            bctx.strokeStyle = '#4a5568';
            bctx.lineWidth = 2;
            for (let i = 0; i < 5; i++) {
                bctx.beginPath();
                const startX = w*0.25 + i*w*0.1;
                bctx.moveTo(startX, h*0.3);
                bctx.quadraticCurveTo(startX + 10, h*0.4, startX, h*0.5);
                bctx.stroke();
            }
        }

        // Event Listeners
        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = (e.clientX - rect.left) * (canvas.width / rect.width);
            const y = (e.clientY - rect.top) * (canvas.height / rect.height);
            addMarker(x, y);
        });

        document.querySelectorAll('.pattern-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.pattern-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                settings.pattern = btn.dataset.pattern;
                markers = [];
                patternsGenerated++;
                generateNoise();
                updateStats();
                document.getElementById('faceMarkers').innerHTML = '';
            });
        });

        ['noiseScale', 'contrast', 'blur'].forEach(id => {
            const input = document.getElementById(id);
            const valueId = id === 'noiseScale' ? 'scale' : id;
            input.addEventListener('input', () => {
                settings[valueId === 'scale' ? 'scale' : id] = parseFloat(input.value);
                document.getElementById(valueId + 'Value').textContent = input.value;
                renderMarkers();
            });
        });

        document.getElementById('regenerateBtn').addEventListener('click', () => {
            markers = [];
            patternsGenerated++;
            // Add randomness
            settings.scale = 0.5 + Math.random() * 2;
            document.getElementById('noiseScale').value = settings.scale;
            document.getElementById('scaleValue').textContent = settings.scale.toFixed(1);
            generateNoise();
            updateStats();
            document.getElementById('faceMarkers').innerHTML = '';
        });

        document.getElementById('clearBtn').addEventListener('click', () => {
            markers = [];
            generateNoise();
            document.getElementById('faceMarkers').innerHTML = '';
        });

        document.getElementById('challengeBtn').addEventListener('click', function() {
            if (challengeMode) return;

            challengeMode = true;
            markers = [];
            facesFound = 0;
            generateNoise();
            updateStats();
            document.getElementById('faceMarkers').innerHTML = '';

            let timeLeft = 30;
            document.getElementById('challengeInfo').textContent = `Time: ${timeLeft}s - GO!`;
            this.disabled = true;

            challengeTimer = setInterval(() => {
                timeLeft--;
                document.getElementById('challengeInfo').textContent = `Time: ${timeLeft}s`;

                if (timeLeft <= 0) {
                    clearInterval(challengeTimer);
                    challengeMode = false;
                    this.disabled = false;
                    document.getElementById('challengeInfo').textContent =
                        `Challenge complete! You found ${facesFound} faces. Average is 8-15.`;
                }
            }, 1000);
        });

        // Initialize
        generateNoise();
        drawBrain();
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
