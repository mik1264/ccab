<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Celtic Knots - Geometric Patterns</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            overflow: hidden;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        canvas {
            display: block;
            background: #2d5016;
        }

        .info-panel {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.85);
            color: white;
            padding: 20px;
            border-radius: 10px;
            max-width: 320px;
            backdrop-filter: blur(10px);
            border: 2px solid #8B7355;
        }

        .info-panel h1 {
            font-size: 24px;
            margin-bottom: 10px;
            color: #DAA520;
        }

        .info-panel p {
            font-size: 14px;
            line-height: 1.6;
            color: #ddd;
            margin-bottom: 10px;
        }

        .controls {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.85);
            color: white;
            padding: 20px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            border: 2px solid #8B7355;
        }

        .control-group {
            margin-bottom: 15px;
        }

        .control-group:last-child {
            margin-bottom: 0;
        }

        .control-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 14px;
            color: #ddd;
        }

        .control-group select {
            width: 200px;
            padding: 5px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 4px;
        }

        .control-group option {
            background: #2d5016;
            color: white;
        }

        .control-group input[type="range"] {
            width: 200px;
        }

        .value-display {
            display: inline-block;
            min-width: 40px;
            text-align: right;
            color: #DAA520;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>

    <div class="info-panel">
        <h1>Celtic Knots</h1>
        <p>Traditional Celtic interlaced patterns with endless knots symbolizing eternity and interconnection. Features the distinctive over-under weaving pattern.</p>
        <p>Inspired by ancient Celtic manuscripts and stone carvings.</p>
    </div>

    <div class="controls">
        <div class="control-group">
            <label>Knot Style:</label>
            <select id="style">
                <option value="square">Square Knot</option>
                <option value="circular">Circular Knot</option>
                <option value="triquetra">Triquetra</option>
                <option value="endless">Endless Knot</option>
            </select>
        </div>
        <div class="control-group">
            <label>
                Complexity: <span class="value-display" id="complexityValue">4</span>
            </label>
            <input type="range" id="complexity" min="3" max="8" value="4">
        </div>
        <div class="control-group">
            <label>
                Line Width: <span class="value-display" id="widthValue">12</span>
            </label>
            <input type="range" id="width" min="6" max="24" value="12">
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        let width = canvas.width = window.innerWidth;
        let height = canvas.height = window.innerHeight;
        let centerX = width / 2;
        let centerY = height / 2;

        window.addEventListener('resize', () => {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            centerX = width / 2;
            centerY = height / 2;
            draw();
        });

        let knotStyle = 'square';
        let complexity = 4;
        let lineWidth = 12;

        document.getElementById('style').addEventListener('change', (e) => {
            knotStyle = e.target.value;
            draw();
        });

        document.getElementById('complexity').addEventListener('input', (e) => {
            complexity = parseInt(e.target.value);
            document.getElementById('complexityValue').textContent = complexity;
            draw();
        });

        document.getElementById('width').addEventListener('input', (e) => {
            lineWidth = parseInt(e.target.value);
            document.getElementById('widthValue').textContent = lineWidth;
            draw();
        });

        function drawWeavingEffect(x1, y1, x2, y2, isOver) {
            const segments = 20;
            const dx = (x2 - x1) / segments;
            const dy = (y2 - y1) / segments;

            for (let i = 0; i < segments; i++) {
                const startX = x1 + dx * i;
                const startY = y1 + dy * i;
                const endX = x1 + dx * (i + 1);
                const endY = y1 + dy * (i + 1);

                // Alternate over/under pattern
                if ((i % 2 === 0) === isOver) {
                    ctx.strokeStyle = '#DAA520';
                } else {
                    ctx.strokeStyle = '#8B7355';
                }

                ctx.beginPath();
                ctx.moveTo(startX, startY);
                ctx.lineTo(endX, endY);
                ctx.stroke();
            }
        }

        function drawSquareKnot() {
            const size = Math.min(width, height) * 0.4;
            const gridSize = complexity;
            const cellSize = size / gridSize;

            ctx.strokeStyle = '#DAA520';
            ctx.lineWidth = lineWidth;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';

            const startX = centerX - size / 2;
            const startY = centerY - size / 2;

            // Draw interlaced square pattern
            for (let i = 0; i <= gridSize; i++) {
                for (let j = 0; j <= gridSize; j++) {
                    const x = startX + i * cellSize;
                    const y = startY + j * cellSize;

                    if (i < gridSize) {
                        // Horizontal lines
                        const nextX = x + cellSize;
                        ctx.globalAlpha = (i + j) % 2 === 0 ? 1 : 0.5;
                        ctx.beginPath();
                        ctx.moveTo(x, y);
                        ctx.lineTo(nextX, y);
                        ctx.stroke();
                    }

                    if (j < gridSize) {
                        // Vertical lines
                        const nextY = y + cellSize;
                        ctx.globalAlpha = (i + j) % 2 === 1 ? 1 : 0.5;
                        ctx.beginPath();
                        ctx.moveTo(x, y);
                        ctx.lineTo(x, nextY);
                        ctx.stroke();
                    }
                }
            }

            ctx.globalAlpha = 1;

            // Draw border
            ctx.strokeStyle = '#8B7355';
            ctx.lineWidth = lineWidth * 1.5;
            ctx.strokeRect(startX, startY, size, size);
        }

        function drawCircularKnot() {
            const radius = Math.min(width, height) * 0.35;
            const numStrands = complexity;

            ctx.strokeStyle = '#DAA520';
            ctx.lineWidth = lineWidth;
            ctx.lineCap = 'round';

            for (let strand = 0; strand < numStrands; strand++) {
                ctx.beginPath();

                for (let i = 0; i <= 360; i += 5) {
                    const angle = (i + strand * 360 / numStrands) * Math.PI / 180;
                    const r = radius + Math.sin(angle * numStrands) * radius * 0.2;
                    const x = centerX + Math.cos(angle) * r;
                    const y = centerY + Math.sin(angle) * r;

                    if (i === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                }

                ctx.closePath();
                ctx.globalAlpha = 0.8 - (strand * 0.1);
                ctx.stroke();
            }

            ctx.globalAlpha = 1;
        }

        function drawTriquetra() {
            const radius = Math.min(width, height) * 0.25;

            ctx.strokeStyle = '#DAA520';
            ctx.lineWidth = lineWidth;
            ctx.lineCap = 'round';
            ctx.fillStyle = 'rgba(218, 165, 32, 0.1)';

            // Draw three interlaced arcs
            for (let i = 0; i < 3; i++) {
                const angle = (i * 120) * Math.PI / 180;
                const cx = centerX + Math.cos(angle) * radius * 0.5;
                const cy = centerY + Math.sin(angle) * radius * 0.5;

                ctx.beginPath();
                ctx.arc(cx, cy, radius, angle + Math.PI / 3, angle + Math.PI);
                ctx.stroke();

                // Add inner curve
                const innerAngle = angle + Math.PI * 2 / 3;
                const icx = centerX + Math.cos(innerAngle) * radius * 0.3;
                const icy = centerY + Math.sin(innerAngle) * radius * 0.3;
                ctx.beginPath();
                ctx.arc(icx, icy, radius * 0.6, innerAngle, innerAngle + Math.PI * 2 / 3);
                ctx.stroke();
            }

            // Draw center circle
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius * 0.2, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();
        }

        function drawEndlessKnot() {
            const size = Math.min(width, height) * 0.35;

            ctx.strokeStyle = '#DAA520';
            ctx.lineWidth = lineWidth;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';

            // Draw complex interlaced pattern
            const points = [];
            const n = complexity * 2;

            for (let i = 0; i < n; i++) {
                const angle = (i * Math.PI * 2) / n;
                const r = size * (0.7 + 0.3 * Math.cos(angle * 2));
                points.push({
                    x: centerX + Math.cos(angle) * r,
                    y: centerY + Math.sin(angle) * r
                });
            }

            // Draw the knot with alternating over/under
            for (let i = 0; i < points.length; i++) {
                const p1 = points[i];
                const p2 = points[(i + 1) % points.length];

                ctx.globalAlpha = i % 2 === 0 ? 1 : 0.6;
                ctx.beginPath();
                ctx.moveTo(p1.x, p1.y);

                // Add curve
                const midX = (p1.x + p2.x) / 2;
                const midY = (p1.y + p2.y) / 2;
                const angle = Math.atan2(p2.y - p1.y, p2.x - p1.x);
                const cpX = midX + Math.cos(angle + Math.PI / 2) * size * 0.1;
                const cpY = midY + Math.sin(angle + Math.PI / 2) * size * 0.1;

                ctx.quadraticCurveTo(cpX, cpY, p2.x, p2.y);
                ctx.stroke();
            }

            ctx.globalAlpha = 1;

            // Draw connection points
            ctx.fillStyle = '#8B7355';
            for (let point of points) {
                ctx.beginPath();
                ctx.arc(point.x, point.y, lineWidth * 0.6, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function draw() {
            // Clear with Celtic green background
            ctx.fillStyle = '#2d5016';
            ctx.fillRect(0, 0, width, height);

            // Add texture
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            for (let i = 0; i < 100; i++) {
                ctx.fillRect(
                    Math.random() * width,
                    Math.random() * height,
                    2, 2
                );
            }

            // Draw selected knot style
            switch (knotStyle) {
                case 'square':
                    drawSquareKnot();
                    break;
                case 'circular':
                    drawCircularKnot();
                    break;
                case 'triquetra':
                    drawTriquetra();
                    break;
                case 'endless':
                    drawEndlessKnot();
                    break;
            }
        }

        draw();
    </script>
</body>
</html>
