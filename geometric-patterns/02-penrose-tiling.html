<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Penrose Tiling - Geometric Patterns</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            overflow: hidden;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        canvas {
            display: block;
            background: #fafafa;
        }

        .info-panel {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px;
            border-radius: 10px;
            max-width: 320px;
            backdrop-filter: blur(10px);
        }

        .info-panel h1 {
            font-size: 24px;
            margin-bottom: 10px;
            color: #FFD700;
        }

        .info-panel p {
            font-size: 14px;
            line-height: 1.6;
            color: #ddd;
            margin-bottom: 10px;
        }

        .controls {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .control-group {
            margin-bottom: 15px;
        }

        .control-group:last-child {
            margin-bottom: 0;
        }

        .control-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 14px;
            color: #ddd;
        }

        .control-group input[type="range"] {
            width: 200px;
        }

        .control-group input[type="checkbox"] {
            margin-right: 5px;
        }

        .value-display {
            display: inline-block;
            min-width: 40px;
            text-align: right;
            color: #FFD700;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>

    <div class="info-panel">
        <h1>Penrose Tiling</h1>
        <p>Aperiodic tiling discovered by mathematician Roger Penrose. These patterns never repeat exactly but tile the plane infinitely with fivefold symmetry.</p>
        <p>Features kites and darts in golden ratio proportions.</p>
    </div>

    <div class="controls">
        <div class="control-group">
            <label>
                Iterations: <span class="value-display" id="iterValue">5</span>
            </label>
            <input type="range" id="iterations" min="3" max="7" value="5">
        </div>
        <div class="control-group">
            <label>
                Scale: <span class="value-display" id="scaleValue">200</span>
            </label>
            <input type="range" id="scale" min="100" max="400" value="200">
        </div>
        <div class="control-group">
            <label>
                <input type="checkbox" id="showOutlines" checked> Show Outlines
            </label>
        </div>
        <div class="control-group">
            <label>
                <input type="checkbox" id="colorByType" checked> Color by Type
            </label>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        let width = canvas.width = window.innerWidth;
        let height = canvas.height = window.innerHeight;

        window.addEventListener('resize', () => {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            generateAndDraw();
        });

        const PHI = (1 + Math.sqrt(5)) / 2; // Golden ratio

        let iterations = 5;
        let scale = 200;
        let showOutlines = true;
        let colorByType = true;

        document.getElementById('iterations').addEventListener('input', (e) => {
            iterations = parseInt(e.target.value);
            document.getElementById('iterValue').textContent = iterations;
            generateAndDraw();
        });

        document.getElementById('scale').addEventListener('input', (e) => {
            scale = parseInt(e.target.value);
            document.getElementById('scaleValue').textContent = scale;
            generateAndDraw();
        });

        document.getElementById('showOutlines').addEventListener('change', (e) => {
            showOutlines = e.target.checked;
            generateAndDraw();
        });

        document.getElementById('colorByType').addEventListener('change', (e) => {
            colorByType = e.target.checked;
            generateAndDraw();
        });

        class Triangle {
            constructor(type, x1, y1, x2, y2, x3, y3) {
                this.type = type; // 0 = kite, 1 = dart
                this.points = [
                    { x: x1, y: y1 },
                    { x: x2, y: y2 },
                    { x: x3, y: y3 }
                ];
            }

            subdivide() {
                const p1 = this.points[0];
                const p2 = this.points[1];
                const p3 = this.points[2];

                if (this.type === 0) {
                    // Subdivide kite (type 0)
                    const px = p1.x + (p2.x - p1.x) / PHI;
                    const py = p1.y + (p2.y - p1.y) / PHI;

                    return [
                        new Triangle(0, p3.x, p3.y, px, py, p2.x, p2.y),
                        new Triangle(1, px, py, p3.x, p3.y, p1.x, p1.y)
                    ];
                } else {
                    // Subdivide dart (type 1)
                    const qx = p1.x + (p3.x - p1.x) / PHI;
                    const qy = p1.y + (p3.y - p1.y) / PHI;

                    return [
                        new Triangle(1, qx, qy, p3.x, p3.y, p2.x, p2.y),
                        new Triangle(0, qx, qy, p2.x, p2.y, p1.x, p1.y)
                    ];
                }
            }

            draw() {
                ctx.beginPath();
                ctx.moveTo(this.points[0].x, this.points[0].y);
                ctx.lineTo(this.points[1].x, this.points[1].y);
                ctx.lineTo(this.points[2].x, this.points[2].y);
                ctx.closePath();

                if (colorByType) {
                    ctx.fillStyle = this.type === 0 ? '#FFD700' : '#FF6B6B';
                } else {
                    ctx.fillStyle = '#E8E8E8';
                }
                ctx.fill();

                if (showOutlines) {
                    ctx.strokeStyle = '#2c3e50';
                    ctx.lineWidth = 1;
                    ctx.stroke();
                }
            }
        }

        function generatePenroseTiling() {
            const centerX = width / 2;
            const centerY = height / 2;

            // Start with 10 triangles in a circle (pentagonal symmetry)
            let triangles = [];
            for (let i = 0; i < 10; i++) {
                const angle = (i * Math.PI * 2) / 10;
                const angle2 = ((i + 1) * Math.PI * 2) / 10;

                const x1 = centerX;
                const y1 = centerY;
                const x2 = centerX + Math.cos(angle) * scale;
                const y2 = centerY + Math.sin(angle) * scale;
                const x3 = centerX + Math.cos(angle2) * scale;
                const y3 = centerY + Math.sin(angle2) * scale;

                triangles.push(new Triangle(i % 2, x1, y1, x2, y2, x3, y3));
            }

            // Subdivide multiple times
            for (let iter = 0; iter < iterations; iter++) {
                const newTriangles = [];
                for (let triangle of triangles) {
                    newTriangles.push(...triangle.subdivide());
                }
                triangles = newTriangles;
            }

            return triangles;
        }

        function generateAndDraw() {
            ctx.fillStyle = '#fafafa';
            ctx.fillRect(0, 0, width, height);

            const triangles = generatePenroseTiling();

            // Draw all triangles
            for (let triangle of triangles) {
                triangle.draw();
            }
        }

        generateAndDraw();
    </script>
</body>
</html>
