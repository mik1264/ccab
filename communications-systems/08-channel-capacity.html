<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Channel Capacity - Shannon's Theorem</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #0a0a1a 0%, #1a1a3e 100%);
            color: #00aaff; min-height: 100vh; padding: 20px;
        }
        .back-link {
            position: fixed; top: 20px; left: 20px; color: #00aaff;
            text-decoration: none; padding: 10px 20px;
            background: rgba(0,170,255,0.1); border: 1px solid #00aaff;
            border-radius: 5px; z-index: 100;
        }
        .container { max-width: 1100px; margin: 60px auto 0; }
        h1 { font-size: 2rem; margin-bottom: 10px; text-align: center; }
        .subtitle { color: #888; margin-bottom: 30px; text-align: center; }
        .formula-box {
            background: rgba(0,0,0,0.5); padding: 25px;
            border-radius: 15px; border: 2px solid #00ffff;
            text-align: center; margin-bottom: 30px;
        }
        .formula { font-size: 1.8rem; color: #00ffff; margin-bottom: 10px; }
        .formula-desc { color: #888; }
        .controls {
            display: grid; grid-template-columns: 1fr 1fr;
            gap: 30px; margin-bottom: 30px;
        }
        .control-panel {
            background: rgba(0,170,255,0.05); padding: 20px;
            border-radius: 15px;
        }
        .control-panel h3 { color: #00ccff; margin-bottom: 15px; }
        .control-group { margin-bottom: 15px; }
        .control-group label { display: block; color: #888; margin-bottom: 8px; }
        input[type="range"] {
            width: 100%; height: 8px; background: rgba(0,170,255,0.2); border-radius: 4px;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none; width: 18px; height: 18px;
            background: #00aaff; border-radius: 50%; cursor: pointer;
        }
        .value { color: #00ffff; font-size: 1rem; margin-top: 5px; }
        .result-box {
            background: rgba(0,255,136,0.1); border: 2px solid #00ff88;
            padding: 20px; border-radius: 15px; text-align: center;
        }
        .result-value { font-size: 2.5rem; color: #00ff88; }
        .result-label { color: #888; }
        .viz-panel {
            background: rgba(0,0,0,0.5); padding: 20px;
            border-radius: 15px; border: 1px solid #00aaff;
            margin-bottom: 20px;
        }
        .viz-panel h3 { color: #00ccff; margin-bottom: 15px; text-align: center; }
        canvas { width: 100%; height: 300px; background: rgba(0,20,40,0.5); border-radius: 10px; }
        .info { background: rgba(0,170,255,0.05); padding: 20px; border-radius: 10px; }
        .info h3 { color: #00ccff; margin-bottom: 10px; }
        .info p { color: #aaa; line-height: 1.6; margin-bottom: 10px; }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">← Back</a>
    <div class="container">
        <h1>Channel Capacity</h1>
        <p class="subtitle">Shannon's fundamental limit on reliable communication</p>

        <div class="formula-box">
            <div class="formula">C = B · log₂(1 + S/N)</div>
            <div class="formula-desc">Channel Capacity = Bandwidth × log₂(1 + Signal-to-Noise Ratio)</div>
        </div>

        <div class="controls">
            <div class="control-panel">
                <h3>Channel Parameters</h3>
                <div class="control-group">
                    <label>Bandwidth (B)</label>
                    <input type="range" id="bandwidth" min="1" max="100" value="20">
                    <div class="value" id="bandwidthVal">20 MHz</div>
                </div>
                <div class="control-group">
                    <label>Signal Power (S)</label>
                    <input type="range" id="signal" min="0.1" max="100" value="10" step="0.1">
                    <div class="value" id="signalVal">10 mW</div>
                </div>
                <div class="control-group">
                    <label>Noise Power (N)</label>
                    <input type="range" id="noise" min="0.1" max="10" value="1" step="0.1">
                    <div class="value" id="noiseVal">1 mW</div>
                </div>
            </div>
            <div class="result-box">
                <div class="result-label">SNR</div>
                <div class="result-value" id="snrResult">10 (10 dB)</div>
                <div style="height:20px"></div>
                <div class="result-label">Maximum Channel Capacity</div>
                <div class="result-value" id="capacityResult">69.2 Mbps</div>
            </div>
        </div>

        <div class="viz-panel">
            <h3>Capacity vs SNR (Fixed Bandwidth)</h3>
            <canvas id="capacityCanvas"></canvas>
        </div>

        <div class="info">
            <h3>Shannon's Channel Capacity Theorem (1948)</h3>
            <p><strong>The Fundamental Limit:</strong> Shannon proved that reliable communication is possible at any rate below C, but impossible above C, regardless of coding scheme.</p>
            <p><strong>Bandwidth Tradeoff:</strong> You can trade bandwidth for SNR. Double the bandwidth = double the capacity. Double the SNR = much less capacity gain.</p>
            <p><strong>Approaching Capacity:</strong> Modern codes (Turbo, LDPC) come within 0.1 dB of Shannon limit!</p>
            <p><strong>Real Examples:</strong></p>
            <p>• Wi-Fi 6: 160 MHz × log₂(1+~30dB) ≈ 1.6 Gbps theoretical</p>
            <p>• 5G NR: 100 MHz × log₂(1+~25dB) ≈ 800 Mbps per antenna</p>
        </div>
    </div>

    <script>
        function resizeCanvas(canvas) {
            const dpr = window.devicePixelRatio || 1;
            const rect = canvas.getBoundingClientRect();
            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            canvas.getContext('2d').scale(dpr, dpr);
        }

        function drawCapacityCurve(canvas, currentBandwidth, currentSNR) {
            const ctx = canvas.getContext('2d');
            const w = canvas.width / (window.devicePixelRatio || 1);
            const h = canvas.height / (window.devicePixelRatio || 1);

            ctx.fillStyle = 'rgba(0,20,40,0.5)';
            ctx.fillRect(0, 0, w, h);

            const padding = 60;
            const plotW = w - 2 * padding;
            const plotH = h - 2 * padding;

            // Draw grid
            ctx.strokeStyle = 'rgba(0,170,255,0.1)';
            ctx.lineWidth = 1;
            for (let i = 0; i <= 10; i++) {
                const x = padding + (i / 10) * plotW;
                const y = padding + (i / 10) * plotH;
                ctx.beginPath();
                ctx.moveTo(x, padding);
                ctx.lineTo(x, h - padding);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(w - padding, y);
                ctx.stroke();
            }

            // Draw axes
            ctx.strokeStyle = 'rgba(0,170,255,0.5)';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(padding, h - padding);
            ctx.lineTo(w - padding, h - padding);
            ctx.moveTo(padding, h - padding);
            ctx.lineTo(padding, padding);
            ctx.stroke();

            // Labels
            ctx.fillStyle = '#888';
            ctx.font = '12px Courier New';
            ctx.fillText('SNR (dB)', w / 2 - 30, h - 10);
            ctx.save();
            ctx.translate(15, h / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('Capacity (Mbps)', -40, 0);
            ctx.restore();

            // SNR axis labels (0 to 40 dB)
            for (let snr = 0; snr <= 40; snr += 10) {
                const x = padding + (snr / 40) * plotW;
                ctx.fillText(snr.toString(), x - 5, h - padding + 20);
            }

            // Draw capacity curves for different bandwidths
            const bandwidths = [10, 20, 40, 80];
            const colors = ['#00ff88', '#00aaff', '#ff6688', '#ffaa00'];

            bandwidths.forEach((bw, idx) => {
                ctx.strokeStyle = colors[idx];
                ctx.lineWidth = bw === currentBandwidth ? 3 : 1.5;
                ctx.globalAlpha = bw === currentBandwidth ? 1 : 0.4;
                ctx.beginPath();

                for (let snrDb = 0; snrDb <= 40; snrDb += 0.5) {
                    const snrLinear = Math.pow(10, snrDb / 10);
                    const capacity = bw * Math.log2(1 + snrLinear);

                    const x = padding + (snrDb / 40) * plotW;
                    const maxCapacity = 80 * Math.log2(1 + 10000); // Max for scale
                    const y = h - padding - (capacity / (bandwidths[3] * 15)) * plotH;

                    if (snrDb === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }
                ctx.stroke();

                // Legend
                ctx.fillStyle = colors[idx];
                ctx.globalAlpha = 1;
                ctx.fillText(`B = ${bw} MHz`, w - 100, padding + 20 + idx * 20);
            });

            ctx.globalAlpha = 1;

            // Mark current operating point
            const snrDb = 10 * Math.log10(currentSNR);
            const currentCapacity = currentBandwidth * Math.log2(1 + currentSNR);
            const pointX = padding + (snrDb / 40) * plotW;
            const pointY = h - padding - (currentCapacity / (bandwidths[3] * 15)) * plotH;

            ctx.fillStyle = '#fff';
            ctx.beginPath();
            ctx.arc(pointX, pointY, 8, 0, 2 * Math.PI);
            ctx.fill();

            ctx.fillStyle = '#00ffff';
            ctx.font = 'bold 12px Courier New';
            ctx.fillText(`${currentCapacity.toFixed(1)} Mbps`, pointX + 15, pointY);
        }

        function update() {
            const bandwidth = parseFloat(document.getElementById('bandwidth').value);
            const signal = parseFloat(document.getElementById('signal').value);
            const noise = parseFloat(document.getElementById('noise').value);

            const snr = signal / noise;
            const snrDb = 10 * Math.log10(snr);
            const capacity = bandwidth * Math.log2(1 + snr);

            document.getElementById('bandwidthVal').textContent = bandwidth + ' MHz';
            document.getElementById('signalVal').textContent = signal.toFixed(1) + ' mW';
            document.getElementById('noiseVal').textContent = noise.toFixed(1) + ' mW';
            document.getElementById('snrResult').textContent =
                `${snr.toFixed(1)} (${snrDb.toFixed(1)} dB)`;
            document.getElementById('capacityResult').textContent =
                capacity > 1000 ? (capacity / 1000).toFixed(2) + ' Gbps' : capacity.toFixed(1) + ' Mbps';

            drawCapacityCurve(document.getElementById('capacityCanvas'), bandwidth, snr);
        }

        function init() {
            resizeCanvas(document.getElementById('capacityCanvas'));
            update();
        }

        ['bandwidth', 'signal', 'noise'].forEach(id => {
            document.getElementById(id).addEventListener('input', update);
        });

        window.addEventListener('resize', init);
        init();

    // Expose for enhance.js keyboard shortcuts
    window.reset = init;
    window.init = init;
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
