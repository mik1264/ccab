<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JUICE - Jupiter Icy Moons Explorer (ESA)</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #0a0a1a; overflow: hidden; font-family: 'Segoe UI', sans-serif; }
        canvas { display: block; }
        .info-panel { position: fixed; top: 20px; left: 20px; background: rgba(10, 20, 40, 0.9); border: 1px solid #3498db; border-radius: 10px; padding: 20px; color: #ecf0f1; max-width: 300px; z-index: 100; }
        .info-panel h1 { font-size: 1.4em; color: #3498db; margin-bottom: 10px; }
        .info-panel p { font-size: 0.85em; line-height: 1.5; color: #bdc3c7; }
        .mission-stats { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 12px; }
        .stat { background: rgba(52, 152, 219, 0.2); padding: 6px; border-radius: 5px; text-align: center; }
        .stat-value { font-size: 1em; color: #3498db; font-weight: bold; }
        .stat-label { font-size: 0.65em; color: #7f8c8d; }
        .controls { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); display: flex; gap: 10px; z-index: 100; }
        .controls button { background: rgba(52, 152, 219, 0.8); border: none; color: white; padding: 10px 20px; border-radius: 5px; cursor: pointer; }
        .controls button.active { background: #27ae60; }
        .back-link { position: fixed; top: 20px; right: 20px; background: rgba(10, 20, 40, 0.9); border: 1px solid #3498db; border-radius: 8px; padding: 10px 15px; color: #3498db; text-decoration: none; z-index: 100; }
        .flyby-indicator { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(52, 152, 219, 0.9); padding: 20px 40px; border-radius: 10px; color: white; font-size: 1.3em; font-weight: bold; opacity: 0; transition: opacity 0.5s; pointer-events: none; z-index: 200; }
        .flyby-indicator.show { opacity: 1; }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <div class="info-panel">
        <h1>üöÄ JUICE üá™üá∫</h1>
        <p>ESA's Jupiter Icy Moons Explorer! Launched April 2023. Uses Earth-Moon, Venus, and Earth gravity assists.</p>
        <p style="margin-top:8px">Will study Ganymede, Europa, and Callisto. First spacecraft to orbit a moon other than Earth's - Ganymede in 2034!</p>
        <div class="mission-stats">
            <div class="stat"><div class="stat-value">2023</div><div class="stat-label">Launch</div></div>
            <div class="stat"><div class="stat-value">ESA</div><div class="stat-label">Agency</div></div>
            <div class="stat"><div class="stat-value">2031</div><div class="stat-label">Jupiter</div></div>
            <div class="stat"><div class="stat-value">2034</div><div class="stat-label">Ganymede Orbit</div></div>
        </div>
    </div>
    <a href="index.html" class="back-link">‚Üê Back</a>
    <div class="controls">
        <button id="playPause" class="active">‚è∏ Pause</button>
        <button id="restart">üîÑ Restart</button>
        <button id="speedDown">üê¢</button>
        <button id="speedUp">üêá</button>
    </div>
    <div class="flyby-indicator" id="flybyIndicator">EVENT!</div>
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let width, height, centerX, centerY, scale;
        function resize() { width = canvas.width = window.innerWidth; height = canvas.height = window.innerHeight; centerX = width / 2; centerY = height / 2; scale = Math.min(width, height) / 15; }
        resize(); window.addEventListener('resize', resize);
        let playing = true, time = 0, speed = 1;
        const planets = [{ name: 'Venus', radius: 0.72, color: '#daa520', size: 5, period: 0.62 }, { name: 'Earth', radius: 1.0, color: '#4169e1', size: 6, period: 1.0 }, { name: 'Mars', radius: 1.52, color: '#cd5c5c', size: 4, period: 1.88 }, { name: 'Jupiter', radius: 5.2, color: '#deb887', size: 12, period: 11.86 }];
        const trajectory = [];
        const dur = 15;
        function genTraj() {
            trajectory.length = 0;
            const lunarE = 0.8, venus = 2.0, earth1 = 3.5, earth2 = 5.0, jupiter = 8;
            let angle = Math.PI;
            // Lunar-Earth flyby
            for (let t = 0; t < lunarE; t += 0.02) { const p = t / lunarE; angle += 0.05; const r = 1.0 + Math.sin(p * Math.PI) * 0.02; trajectory.push({ time: t, x: r * Math.cos(angle), y: r * Math.sin(angle) }); }
            for (let i = 0; i < 8; i++) trajectory.push({ time: lunarE + i * 0.006, x: Math.cos(angle + i * 0.04), y: Math.sin(angle + i * 0.04), gravityAssist: true, planet: 'Earth-Moon' });
            // To Venus
            for (let t = lunarE + 0.05; t < venus; t += 0.02) { const p = (t - lunarE - 0.05) / (venus - lunarE - 0.05); angle += 0.03; const r = 1.0 - p * 0.28; trajectory.push({ time: t, x: r * Math.cos(angle), y: r * Math.sin(angle) }); }
            for (let i = 0; i < 8; i++) trajectory.push({ time: venus + i * 0.006, x: 0.72 * Math.cos(angle + i * 0.04), y: 0.72 * Math.sin(angle + i * 0.04), gravityAssist: true, planet: 'Venus' });
            // To Earth 1
            for (let t = venus + 0.05; t < earth1; t += 0.02) { const p = (t - venus - 0.05) / (earth1 - venus - 0.05); angle += 0.04; const r = 0.72 + p * 0.28; trajectory.push({ time: t, x: r * Math.cos(angle), y: r * Math.sin(angle) }); }
            for (let i = 0; i < 8; i++) trajectory.push({ time: earth1 + i * 0.006, x: Math.cos(angle + i * 0.04), y: Math.sin(angle + i * 0.04), gravityAssist: true, planet: 'Earth (1)' });
            // To Earth 2
            for (let t = earth1 + 0.05; t < earth2; t += 0.02) { const p = (t - earth1 - 0.05) / (earth2 - earth1 - 0.05); angle += 0.06; const r = 1.0 + Math.sin(p * Math.PI) * 0.5; trajectory.push({ time: t, x: r * Math.cos(angle), y: r * Math.sin(angle) }); }
            for (let i = 0; i < 8; i++) trajectory.push({ time: earth2 + i * 0.006, x: Math.cos(angle + i * 0.04), y: Math.sin(angle + i * 0.04), gravityAssist: true, planet: 'Earth (2)' });
            // To Jupiter
            for (let t = earth2 + 0.05; t < jupiter; t += 0.02) { const p = (t - earth2 - 0.05) / (jupiter - earth2 - 0.05); angle += 0.02; const r = 1.0 + p * 4.2; trajectory.push({ time: t, x: r * Math.cos(angle), y: r * Math.sin(angle) }); }
            // Jupiter system
            for (let t = jupiter; t < dur; t += 0.02) { const p = (t - jupiter) / (dur - jupiter); angle += 0.04; const r = 5.2 + Math.sin(p * Math.PI * 6) * 0.3; trajectory.push({ time: t, x: r * Math.cos(angle), y: r * Math.sin(angle), atJupiter: true }); }
        }
        genTraj();
        function draw() {
            ctx.fillStyle = '#0a0a1a'; ctx.fillRect(0, 0, width, height);
            for (let i = 0; i < 150; i++) { ctx.fillStyle = `rgba(255,255,255,${0.3 + Math.sin(time + i) * 0.2})`; ctx.beginPath(); ctx.arc((Math.sin(i * 192) * 0.5 + 0.5) * width, (Math.cos(i * 281) * 0.5 + 0.5) * height, 1, 0, Math.PI * 2); ctx.fill(); }
            const g = ctx.createRadialGradient(centerX, centerY, 0, centerX, centerY, 20);
            g.addColorStop(0, '#fff'); g.addColorStop(0.3, '#ffcc00'); g.addColorStop(1, 'transparent');
            ctx.fillStyle = g; ctx.beginPath(); ctx.arc(centerX, centerY, 20, 0, Math.PI * 2); ctx.fill();
            planets.forEach(p => {
                ctx.strokeStyle = 'rgba(255,255,255,0.1)'; ctx.beginPath(); ctx.arc(centerX, centerY, p.radius * scale, 0, Math.PI * 2); ctx.stroke();
                const mt = (time * 0.2) % dur;
                const a = (mt * 2 * Math.PI / p.period) + p.radius * 10;
                const x = centerX + p.radius * scale * Math.cos(a), y = centerY + p.radius * scale * Math.sin(a);
                ctx.fillStyle = p.color; ctx.beginPath(); ctx.arc(x, y, p.size, 0, Math.PI * 2); ctx.fill();
                if (p.name === 'Jupiter') {
                    const moons = [{d:20,c:'#ffcc00'},{d:28,c:'#d4c4b0'},{d:38,c:'#8b7355'},{d:48,c:'#696969'}];
                    moons.forEach((m,i) => { const ma = time * (0.5-i*0.1); ctx.fillStyle = m.c; ctx.beginPath(); ctx.arc(x + m.d * Math.cos(ma), y + m.d * Math.sin(ma), 2+i*0.3, 0, Math.PI * 2); ctx.fill(); });
                }
                ctx.fillStyle = 'rgba(255,255,255,0.7)'; ctx.font = '9px sans-serif'; ctx.textAlign = 'center'; ctx.fillText(p.name, x, y + p.size + 10);
            });
            const currentTime = (time * 0.2) % dur;
            let idx = 0; for (let i = 0; i < trajectory.length; i++) if (trajectory[i].time <= currentTime) idx = i;
            ctx.beginPath();
            for (let i = 0; i <= idx; i++) { const p = trajectory[i]; const x = centerX + p.x * scale, y = centerY + p.y * scale; if (i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y); }
            ctx.strokeStyle = '#3498db'; ctx.lineWidth = 2; ctx.stroke();
            for (let i = 0; i <= idx; i++) { if (trajectory[i].gravityAssist) { const x = centerX + trajectory[i].x * scale, y = centerY + trajectory[i].y * scale; ctx.fillStyle = 'rgba(241,196,15,0.6)'; ctx.beginPath(); ctx.arc(x, y, 3, 0, Math.PI * 2); ctx.fill(); } }
            if (idx < trajectory.length) {
                const p = trajectory[idx];
                const x = centerX + p.x * scale, y = centerY + p.y * scale;
                ctx.fillStyle = '#3498db'; ctx.beginPath(); ctx.arc(x, y, 5, 0, Math.PI * 2); ctx.fill();
                ctx.font = 'bold 10px sans-serif'; ctx.fillText('JUICE', x + 10, y - 8);
                const ind = document.getElementById('flybyIndicator');
                if (p.gravityAssist) { ind.textContent = `${p.planet} FLYBY!`; ind.classList.add('show'); }
                else if (p.atJupiter) { ind.textContent = 'JUPITER SYSTEM'; ind.classList.add('show'); }
                else ind.classList.remove('show');
            }
        }
        function animate() { if (playing) time += 0.016 * speed; draw(); requestAnimationFrame(animate); }
        document.getElementById('playPause').onclick = function() { playing = !playing; this.textContent = playing ? '‚è∏ Pause' : '‚ñ∂ Play'; this.classList.toggle('active', playing); };
        document.getElementById('restart').onclick = () => time = 0;
        document.getElementById('speedDown').onclick = () => speed = Math.max(0.25, speed * 0.5);
        document.getElementById('speedUp').onclick = () => speed = Math.min(4, speed * 2);
        animate();
    </script>
</body>
</html>
