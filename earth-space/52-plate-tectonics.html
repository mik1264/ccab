<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plate Tectonics - CCAB</title>
    <link rel="stylesheet" href="../assets/css/gallery-standard.css">
    <style>
        body {
            background: #f0f9ff;
            color: #333;
            font-family: system-ui;
            padding: 2rem;
            text-align: center;
        }
        .container { max-width: 1000px; margin: 0 auto; }
        
        .viewport {
            height: 400px;
            background: #bfdbfe; /* Sky */
            border: 4px solid #333;
            border-radius: 8px;
            position: relative;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .mantle {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 150px;
            background: #c2410c; /* Magma */
            z-index: 0;
        }
        
        .plate {
            position: absolute;
            bottom: 150px;
            height: 50px;
            background: #78350f; /* Crust */
            border: 2px solid #451a03;
            transition: left 0.1s linear, transform 0.5s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        
        button {
            padding: 10px 20px;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button.active { background: #1e40af; }
        
        .feature {
            position: absolute;
            bottom: 200px;
            font-size: 2rem;
            transition: all 0.5s;
            opacity: 0;
        }
        
    </style>
</head>
<body>

<div class="container">
    <a href="../index.html" class="gallery-back">‚Üê Back to Gallery</a>
    <h1>Plate Tectonics Boundaries</h1>
    
    <div class="controls">
        <button onclick="setMode('convergent')">Convergent (Collision)</button>
        <button onclick="setMode('divergent')">Divergent (Spreading)</button>
        <button onclick="setMode('transform')">Transform (Sliding)</button>
    </div>
    
    <div class="viewport" id="view">
        <div class="mantle">
            <div style="color:rgba(255,255,255,0.5); padding:10px;">Mantle (Convection Currents)</div>
        </div>
        
        <div id="p1" class="plate" style="width: 400px; left: 50px;">Plate A</div>
        <div id="p2" class="plate" style="width: 400px; left: 450px;">Plate B</div>
        
        <div id="feat-mtn" class="feature" style="left: 420px;">üèîÔ∏è</div>
        <div id="feat-vol" class="feature" style="left: 420px;">üåã</div>
        <div id="feat-quake" class="feature" style="left: 420px;">‚ö°</div>
    </div>
    
    <p id="desc">Select a boundary type to simulate.</p>
</div>

<script>
    const p1 = document.getElementById('p1');
    const p2 = document.getElementById('p2');
    const desc = document.getElementById('desc');
    
    let mode = 'static';
    let p1x = 50;
    let p2x = 450;
    let time = 0;
    
    function setMode(m) {
        mode = m;
        // Reset positions
        p1x = 50;
        p2x = 450;
        p1.style.transform = 'none';
        p2.style.transform = 'none';
        
        document.querySelectorAll('.feature').forEach(f => f.style.opacity = 0);
        
        if (m === 'convergent') desc.textContent = "Convergent: Plates collide. Oceanic crust subducts under continental crust (Volcanoes) or continental crusts crumple (Mountains).";
        if (m === 'divergent') desc.textContent = "Divergent: Plates move apart. Magma rises to fill the gap (Mid-ocean ridges, Rift valleys).";
        if (m === 'transform') desc.textContent = "Transform: Plates slide past each other. Friction builds up stress until it releases (Earthquakes).";
    }
    
    function loop() {
        if (mode === 'convergent') {
            // Move together
            if (p1x < 350) p1x += 0.5;
            if (p2x > 350) p2x -= 0.5; // Overlap at 350
            
            // Subduction visual: P1 goes under P2
            if (p1x > 300) {
                p1.style.transform = 'rotate(10deg) translateY(20px)';
                p2.style.transform = 'rotate(-2deg) translateY(-5px)';
                
                document.getElementById('feat-mtn').style.opacity = 1;
                document.getElementById('feat-mtn').style.bottom = '200px';
            }
        }
        else if (mode === 'divergent') {
            // Move apart
            if (p1x > 0) p1x -= 0.5;
            if (p2x < 550) p2x += 0.5;
            
            // Gap opens
            if (p2x - (p1x + 400) > 20) {
                document.getElementById('feat-vol').style.opacity = 1;
                document.getElementById('feat-vol').style.bottom = '160px'; // Magma rising
            }
        }
        else if (mode === 'transform') {
            // Slide sideways (simulated by shaking or z-index shift? hard in 2D side view)
            // In side view, one moves into screen, one out?
            // Let's visualize stress build up -> snap
            
            // Just move them towards each other but offset in Z?
            // Or wiggle them
            if (time % 100 < 90) {
                // Stuck
                p1.style.transform = `translateX(${Math.random()}px)`;
            } else {
                // Snap (Quake)
                p1.style.transform = `translateX(-10px)`;
                document.getElementById('feat-quake').style.opacity = 1;
                setTimeout(() => document.getElementById('feat-quake').style.opacity = 0, 200);
            }
        }
        
        p1.style.left = p1x + 'px';
        p2.style.left = p2x + 'px';
        
        time++;
        requestAnimationFrame(loop);
    }
    
    requestAnimationFrame(loop);

</script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
