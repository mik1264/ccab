<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chicken Game - Game Theory</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0a0e1a;
            color: #e0e0e0;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .back-link {
            display: inline-block;
            color: #64b5f6;
            text-decoration: none;
            margin-bottom: 20px;
            font-size: 16px;
            transition: color 0.3s;
        }

        .back-link:hover {
            color: #90caf9;
        }

        h1 {
            color: #fff;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .description {
            color: #b0b0b0;
            margin-bottom: 30px;
            line-height: 1.6;
            max-width: 800px;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 20px;
            margin-bottom: 20px;
        }

        .canvas-container {
            background: #151b2b;
            border-radius: 10px;
            padding: 20px;
            border: 1px solid #2a3f5f;
        }

        canvas {
            display: block;
            width: 100%;
            background: #0a0e1a;
            border-radius: 5px;
        }

        .controls-panel {
            background: #151b2b;
            border-radius: 10px;
            padding: 20px;
            border: 1px solid #2a3f5f;
        }

        .payoff-matrix {
            background: #0f1520;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .payoff-matrix h3 {
            color: #64b5f6;
            margin-bottom: 10px;
            font-size: 14px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 10px;
            text-align: center;
            border: 1px solid #2a3f5f;
        }

        th {
            background: #1a2332;
            color: #90caf9;
            font-weight: 600;
        }

        td {
            background: #151b2b;
            color: #e0e0e0;
        }

        .nash-equilibrium {
            background: #1565c0 !important;
        }

        .worst-outcome {
            background: #c62828 !important;
        }

        .choice-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .choice-btn {
            flex: 1;
            padding: 25px 15px;
            background: #1a2332;
            border: 3px solid #2a3f5f;
            border-radius: 8px;
            color: #e0e0e0;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 16px;
            text-align: center;
        }

        .choice-btn:hover {
            border-color: #64b5f6;
        }

        .choice-btn.straight {
            border-color: #f44336;
        }

        .choice-btn.straight:hover {
            background: #c62828;
        }

        .choice-btn.swerve {
            border-color: #ff9800;
        }

        .choice-btn.swerve:hover {
            background: #f57c00;
        }

        .choice-btn .icon {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        button {
            width: 100%;
            padding: 12px;
            background: #1976d2;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: background 0.3s;
            margin-bottom: 10px;
        }

        button:hover {
            background: #1565c0;
        }

        .result-display {
            background: #0f1520;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 15px;
            text-align: center;
        }

        .result-display h3 {
            color: #64b5f6;
            margin-bottom: 10px;
        }

        .result-outcome {
            font-size: 1.5em;
            font-weight: bold;
            margin: 10px 0;
            padding: 15px;
            border-radius: 5px;
        }

        .result-outcome.win {
            background: #2e7d32;
            color: #fff;
        }

        .result-outcome.tie {
            background: #f57c00;
            color: #fff;
        }

        .result-outcome.crash {
            background: #c62828;
            color: #fff;
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .stats-box {
            background: #0f1520;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .stats-box h3 {
            color: #64b5f6;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #2a3f5f;
        }

        .stat-row:last-child {
            border-bottom: none;
        }

        .stat-label {
            color: #b0b0b0;
        }

        .stat-value {
            color: #81c784;
            font-weight: 600;
        }

        .info-box {
            background: #1a2332;
            border-left: 4px solid #64b5f6;
            padding: 15px;
            margin-top: 20px;
            border-radius: 5px;
        }

        .info-box h3 {
            color: #64b5f6;
            margin-bottom: 10px;
        }

        .info-box p {
            line-height: 1.6;
            color: #b0b0b0;
            margin-bottom: 8px;
        }

        @media (max-width: 1200px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">‚Üê Back to Game Theory</a>

        <h1>Chicken Game</h1>
        <p class="description">
            Two drivers race toward each other. Swerve and you're "chicken" (lose face but survive).
            Stay straight and hope the other swerves, or crash if both stay straight. Anti-coordination with dangerous stakes.
        </p>

        <div class="main-grid">
            <div class="canvas-container">
                <canvas id="canvas"></canvas>
            </div>

            <div class="controls-panel">
                <div class="payoff-matrix">
                    <h3>Payoff Matrix</h3>
                    <table>
                        <tr>
                            <th></th>
                            <th>üèéÔ∏è Straight</th>
                            <th>‚Ü™Ô∏è Swerve</th>
                        </tr>
                        <tr>
                            <th>üèéÔ∏è Straight</th>
                            <td class="worst-outcome">-10, -10</td>
                            <td class="nash-equilibrium">7, 2</td>
                        </tr>
                        <tr>
                            <th>‚Ü™Ô∏è Swerve</th>
                            <td class="nash-equilibrium">2, 7</td>
                            <td>5, 5</td>
                        </tr>
                    </table>
                    <p style="margin-top: 10px; font-size: 12px; color: #b0b0b0;">
                        Mixed Strategy: ~56% Straight, ~44% Swerve
                    </p>
                </div>

                <div class="choice-buttons">
                    <button class="choice-btn straight" onclick="makeChoice('straight')">
                        <div class="icon">üèéÔ∏è</div>
                        <div><strong>STRAIGHT</strong></div>
                        <div style="font-size: 0.9em; margin-top: 5px;">Risky, High Reward</div>
                    </button>
                    <button class="choice-btn swerve" onclick="makeChoice('swerve')">
                        <div class="icon">‚Ü™Ô∏è</div>
                        <div><strong>SWERVE</strong></div>
                        <div style="font-size: 0.9em; margin-top: 5px;">Safe, Lower Payoff</div>
                    </button>
                </div>

                <div id="resultDisplay"></div>

                <button onclick="runSimulation()">Run Simulation (100 rounds)</button>
                <button onclick="reset()">Reset</button>

                <div class="stats-box">
                    <h3>Game Statistics</h3>
                    <div class="stat-row">
                        <span class="stat-label">Rounds Played</span>
                        <span class="stat-value" id="roundsPlayed">0</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">You Won</span>
                        <span class="stat-value" id="youWon">0</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">AI Won</span>
                        <span class="stat-value" id="aiWon">0</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Both Swerved</span>
                        <span class="stat-value" id="bothSwerve">0</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">CRASHES</span>
                        <span class="stat-value" id="crashes" style="color: #f44336;">0</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="info-box">
            <h3>About the Chicken Game</h3>
            <p><strong>The Scenario:</strong> Two drivers race directly toward each other on a collision course. Each must decide to swerve or stay straight. The first to swerve is the "chicken" and loses prestige.</p>
            <p><strong>Payoffs:</strong></p>
            <p>‚Ä¢ Both Straight ‚Üí CRASH (-10, -10) - Worst outcome for both</p>
            <p>‚Ä¢ You Straight, They Swerve ‚Üí You WIN (7, 2) - You gain prestige, they lose face</p>
            <p>‚Ä¢ You Swerve, They Straight ‚Üí You LOSE (2, 7) - They gain prestige, you lose face</p>
            <p>‚Ä¢ Both Swerve ‚Üí TIE (5, 5) - Mutual caution, moderate outcome</p>
            <p><strong>Nash Equilibria:</strong> Two pure strategy equilibria where one player swerves and the other goes straight. Also a mixed strategy equilibrium where both randomize (~56% straight).</p>
            <p><strong>Anti-Coordination:</strong> Unlike coordination games, you want to do the OPPOSITE of your opponent. If they swerve, you should go straight. If they go straight, you should swerve.</p>
            <p><strong>Brinkmanship:</strong> The key strategic insight is commitment. If you can credibly commit to going straight (e.g., visibly throw away your steering wheel), you force the opponent to swerve.</p>
            <p><strong>Real Applications:</strong></p>
            <p>‚Ä¢ Nuclear deterrence and arms races (mutually assured destruction)</p>
            <p>‚Ä¢ Labor-management negotiations and strikes</p>
            <p>‚Ä¢ Price wars between competing firms</p>
            <p>‚Ä¢ International crises and territorial disputes</p>
            <p>The Chicken Game models any situation where both parties want to appear tough, but mutual toughness leads to disaster.</p>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        function resizeCanvas() {
            const container = canvas.parentElement;
            canvas.width = container.clientWidth - 40;
            canvas.height = 500;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Game state
        let history = [];
        let stats = {
            rounds: 0,
            youWon: 0,
            aiWon: 0,
            bothSwerve: 0,
            crashes: 0
        };

        // Payoff matrix
        const payoffs = {
            'straight-straight': [-10, -10],
            'straight-swerve': [7, 2],
            'swerve-straight': [2, 7],
            'swerve-swerve': [5, 5]
        };

        // AI uses adaptive strategy
        let aiStraightProb = 0.56;

        function makeChoice(choice) {
            // AI makes decision
            const aiChoice = Math.random() < aiStraightProb ? 'straight' : 'swerve';

            const key = `${choice}-${aiChoice}`;
            const [youPayoff, aiPayoff] = payoffs[key];

            stats.rounds++;

            let outcome;
            if (choice === 'straight' && aiChoice === 'straight') {
                stats.crashes++;
                outcome = 'crash';
                // After crash, AI becomes more cautious
                aiStraightProb = Math.max(0.3, aiStraightProb - 0.1);
            } else if (choice === 'straight' && aiChoice === 'swerve') {
                stats.youWon++;
                outcome = 'youWin';
                // If you win, AI becomes more aggressive
                aiStraightProb = Math.min(0.8, aiStraightProb + 0.05);
            } else if (choice === 'swerve' && aiChoice === 'straight') {
                stats.aiWon++;
                outcome = 'aiWin';
                // If AI wins, it gets more confident
                aiStraightProb = Math.min(0.8, aiStraightProb + 0.05);
            } else {
                stats.bothSwerve++;
                outcome = 'tie';
                // Both cautious - slight increase in aggression
                aiStraightProb = Math.min(0.7, aiStraightProb + 0.02);
            }

            history.push({
                player: choice,
                ai: aiChoice,
                outcome,
                youPayoff,
                aiPayoff
            });

            if (history.length > 50) history.shift();

            showResult(choice, aiChoice, outcome, youPayoff, aiPayoff);
            updateStats();
            draw();
        }

        function showResult(player, ai, outcome, youPayoff, aiPayoff) {
            const resultDiv = document.getElementById('resultDisplay');

            let outcomeText, outcomeClass;
            if (outcome === 'crash') {
                outcomeText = 'üí• CRASH! Both Lose!';
                outcomeClass = 'crash';
            } else if (outcome === 'youWin') {
                outcomeText = 'üèÜ You Win! AI Chickened Out!';
                outcomeClass = 'win';
            } else if (outcome === 'aiWin') {
                outcomeText = 'üò¨ You Chickened Out! AI Wins!';
                outcomeClass = 'tie';
            } else {
                outcomeText = 'ü§ù Both Swerved - Tie';
                outcomeClass = 'tie';
            }

            resultDiv.innerHTML = `
                <div class="result-display">
                    <h3>Round Result</h3>
                    <div style="display: flex; justify-content: space-around; margin: 15px 0;">
                        <div>
                            <div>${player === 'straight' ? 'üèéÔ∏è Straight' : '‚Ü™Ô∏è Swerve'}</div>
                            <div style="font-size: 1.2em; color: #64b5f6; margin-top: 5px;">You: ${youPayoff}</div>
                        </div>
                        <div>
                            <div>${ai === 'straight' ? 'üèéÔ∏è Straight' : '‚Ü™Ô∏è Swerve'}</div>
                            <div style="font-size: 1.2em; color: #90caf9; margin-top: 5px;">AI: ${aiPayoff}</div>
                        </div>
                    </div>
                    <div class="result-outcome ${outcomeClass}">
                        ${outcomeText}
                    </div>
                </div>
            `;
        }

        function runSimulation() {
            aiStraightProb = 0.56;

            for (let i = 0; i < 100; i++) {
                const p1Choice = Math.random() < 0.56 ? 'straight' : 'swerve';
                const p2Choice = Math.random() < 0.56 ? 'straight' : 'swerve';

                const key = `${p1Choice}-${p2Choice}`;
                const [p1Payoff, p2Payoff] = payoffs[key];

                stats.rounds++;

                let outcome;
                if (p1Choice === 'straight' && p2Choice === 'straight') {
                    stats.crashes++;
                    outcome = 'crash';
                } else if (p1Choice === 'straight' && p2Choice === 'swerve') {
                    stats.youWon++;
                    outcome = 'youWin';
                } else if (p1Choice === 'swerve' && p2Choice === 'straight') {
                    stats.aiWon++;
                    outcome = 'aiWin';
                } else {
                    stats.bothSwerve++;
                    outcome = 'tie';
                }

                history.push({
                    player: p1Choice,
                    ai: p2Choice,
                    outcome,
                    youPayoff: p1Payoff,
                    aiPayoff: p2Payoff
                });
            }

            while (history.length > 50) history.shift();

            updateStats();
            draw();
        }

        function updateStats() {
            document.getElementById('roundsPlayed').textContent = stats.rounds;
            document.getElementById('youWon').textContent = stats.youWon;
            document.getElementById('aiWon').textContent = stats.aiWon;
            document.getElementById('bothSwerve').textContent = stats.bothSwerve;
            document.getElementById('crashes').textContent = stats.crashes;
        }

        function reset() {
            history = [];
            stats = {
                rounds: 0,
                youWon: 0,
                aiWon: 0,
                bothSwerve: 0,
                crashes: 0
            };
            aiStraightProb = 0.56;
            document.getElementById('resultDisplay').innerHTML = '';
            updateStats();
            draw();
        }

        function draw() {
            ctx.fillStyle = '#0a0e1a';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            if (history.length === 0) {
                ctx.fillStyle = '#64b5f6';
                ctx.font = '20px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('Choose your strategy to begin', canvas.width / 2, canvas.height / 2);
                return;
            }

            const margin = 60;
            const barWidth = Math.max(10, (canvas.width - margin * 2) / history.length);

            // Title
            ctx.fillStyle = '#64b5f6';
            ctx.font = 'bold 16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Game History (Last 50 Rounds)', canvas.width / 2, 25);

            // Draw outcome bars
            history.forEach((round, i) => {
                const x = margin + i * barWidth;
                const y = 80;

                let color;
                if (round.outcome === 'crash') color = '#f44336';
                else if (round.outcome === 'youWin') color = '#4caf50';
                else if (round.outcome === 'aiWin') color = '#ff9800';
                else color = '#64b5f6';

                ctx.fillStyle = color;
                ctx.fillRect(x, y, barWidth - 2, 40);

                // Player choice
                ctx.fillStyle = round.player === 'straight' ? '#e57373' : '#81c784';
                ctx.fillRect(x, y + 45, barWidth - 2, 10);

                // AI choice
                ctx.fillStyle = round.ai === 'straight' ? '#e57373' : '#81c784';
                ctx.fillRect(x, y + 58, barWidth - 2, 10);
            });

            // Legend
            const legendY = 180;
            ctx.fillStyle = '#e0e0e0';
            ctx.font = '12px Arial';
            ctx.textAlign = 'left';

            ctx.fillStyle = '#f44336';
            ctx.fillRect(margin, legendY, 25, 20);
            ctx.fillStyle = '#e0e0e0';
            ctx.fillText('Crash (-10, -10)', margin + 35, legendY + 14);

            ctx.fillStyle = '#4caf50';
            ctx.fillRect(margin + 180, legendY, 25, 20);
            ctx.fillStyle = '#e0e0e0';
            ctx.fillText('You Win (7, 2)', margin + 215, legendY + 14);

            ctx.fillStyle = '#ff9800';
            ctx.fillRect(margin, legendY + 30, 25, 20);
            ctx.fillStyle = '#e0e0e0';
            ctx.fillText('AI Wins (2, 7)', margin + 35, legendY + 44);

            ctx.fillStyle = '#64b5f6';
            ctx.fillRect(margin + 180, legendY + 30, 25, 20);
            ctx.fillStyle = '#e0e0e0';
            ctx.fillText('Both Swerve (5, 5)', margin + 215, legendY + 44);

            // Draw pie chart of outcomes
            if (stats.rounds > 0) {
                const pieX = canvas.width / 2;
                const pieY = 350;
                const radius = 80;

                const crashAngle = (stats.crashes / stats.rounds) * Math.PI * 2;
                const youWinAngle = (stats.youWon / stats.rounds) * Math.PI * 2;
                const aiWinAngle = (stats.aiWon / stats.rounds) * Math.PI * 2;

                let startAngle = 0;

                // Crashes
                if (stats.crashes > 0) {
                    ctx.fillStyle = '#f44336';
                    ctx.beginPath();
                    ctx.moveTo(pieX, pieY);
                    ctx.arc(pieX, pieY, radius, startAngle, startAngle + crashAngle);
                    ctx.closePath();
                    ctx.fill();
                    startAngle += crashAngle;
                }

                // You Win
                if (stats.youWon > 0) {
                    ctx.fillStyle = '#4caf50';
                    ctx.beginPath();
                    ctx.moveTo(pieX, pieY);
                    ctx.arc(pieX, pieY, radius, startAngle, startAngle + youWinAngle);
                    ctx.closePath();
                    ctx.fill();
                    startAngle += youWinAngle;
                }

                // AI Win
                if (stats.aiWon > 0) {
                    ctx.fillStyle = '#ff9800';
                    ctx.beginPath();
                    ctx.moveTo(pieX, pieY);
                    ctx.arc(pieX, pieY, radius, startAngle, startAngle + aiWinAngle);
                    ctx.closePath();
                    ctx.fill();
                    startAngle += aiWinAngle;
                }

                // Both Swerve
                if (stats.bothSwerve > 0) {
                    ctx.fillStyle = '#64b5f6';
                    ctx.beginPath();
                    ctx.moveTo(pieX, pieY);
                    ctx.arc(pieX, pieY, radius, startAngle, Math.PI * 2);
                    ctx.closePath();
                    ctx.fill();
                }

                // Title
                ctx.fillStyle = '#64b5f6';
                ctx.font = 'bold 14px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('Outcome Distribution', pieX, 260);

                // Percentages
                ctx.fillStyle = '#fff';
                ctx.font = 'bold 11px Arial';
                if (stats.crashes > 0) {
                    const pct = ((stats.crashes / stats.rounds) * 100).toFixed(0);
                    ctx.fillText(pct + '%', pieX - 50, pieY);
                }
            }
        }

        window.makeChoice = makeChoice;
        window.runSimulation = runSimulation;
        window.reset = reset;

        draw();
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
