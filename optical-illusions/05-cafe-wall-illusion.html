<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Café Wall Illusion - Optical Illusions</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #8e44ad 0%, #c0392b 100%);
            color: white;
            overflow: hidden;
        }

        #canvas {
            display: block;
        }

        .info-panel {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            max-width: 350px;
            backdrop-filter: blur(10px);
        }

        h1 {
            font-size: 24px;
            margin-bottom: 10px;
            color: #e74c3c;
        }

        p {
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .instructions {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            font-size: 13px;
        }

        .controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            padding: 15px 25px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        button {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin: 0 5px;
            transition: background 0.3s;
        }

        button:hover {
            background: #c0392b;
        }

        button.active {
            background: #27ae60;
        }

        .slider-group {
            display: inline-block;
            margin: 0 10px;
        }

        label {
            font-size: 12px;
            display: block;
            margin-bottom: 5px;
        }

        input[type="range"] {
            width: 120px;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>

    <div class="info-panel">
        <h1>Café Wall Illusion</h1>
        <p>
            Named after a café wall in Bristol, England, this illusion creates the appearance
            of wedge-shaped mortar lines between rows of tiles, even though the lines are
            perfectly parallel and horizontal.
        </p>
        <p>
            The illusion is caused by the alternating pattern of dark and light tiles, combined
            with the offset between rows. The grey mortar lines appear to tilt, but they're
            actually straight!
        </p>
        <div class="instructions">
            <strong>Instructions:</strong><br>
            • The horizontal lines appear to be tilted or wedge-shaped<br>
            • Toggle "Show Grid Lines" to see the perfectly straight lines<br>
            • Adjust the offset to strengthen or weaken the illusion<br>
            • Try different color schemes to see how contrast affects it
        </div>
    </div>

    <div class="controls">
        <button id="toggleGrid">Show Grid Lines</button>
        <button id="toggleColors">Change Colors</button>
        <div class="slider-group">
            <label>Offset: <span id="offsetValue">50</span>%</label>
            <input type="range" id="offset" min="0" max="100" step="5" value="50">
        </div>
        <div class="slider-group">
            <label>Tile Size: <span id="sizeValue">40</span></label>
            <input type="range" id="tileSize" min="20" max="80" step="5" value="40">
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let showGrid = false;
        let offsetPercent = 50;
        let tileSize = 40;
        let colorScheme = 0;

        const colorSchemes = [
            { dark: '#000000', light: '#ffffff', mortar: '#808080' },
            { dark: '#2c3e50', light: '#ecf0f1', mortar: '#95a5a6' },
            { dark: '#8e44ad', light: '#f39c12', mortar: '#bdc3c7' },
            { dark: '#c0392b', light: '#3498db', mortar: '#7f8c8d' },
            { dark: '#16a085', light: '#f1c40f', mortar: '#95a5a6' }
        ];

        function drawCafeWall() {
            const colors = colorSchemes[colorScheme];

            // Background
            ctx.fillStyle = colors.mortar;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            const mortarWidth = 5;
            const rowHeight = tileSize + mortarWidth;
            const numRows = Math.ceil(canvas.height / rowHeight) + 1;
            const numCols = Math.ceil(canvas.width / tileSize) + 2;

            // Draw the brick pattern
            for (let row = 0; row < numRows; row++) {
                const y = row * rowHeight;
                const offset = (row % 2) * (tileSize * (offsetPercent / 100));

                for (let col = 0; col < numCols; col++) {
                    const x = col * tileSize + offset;
                    const isLight = (col % 2 === 0);

                    ctx.fillStyle = isLight ? colors.light : colors.dark;
                    ctx.fillRect(x, y, tileSize, tileSize);
                }
            }

            // Draw grid lines if enabled (to show they're actually straight)
            if (showGrid) {
                ctx.strokeStyle = '#ff0000';
                ctx.lineWidth = 2;

                for (let row = 0; row <= numRows; row++) {
                    const y = row * rowHeight - mortarWidth / 2;
                    ctx.beginPath();
                    ctx.moveTo(0, y);
                    ctx.lineTo(canvas.width, y);
                    ctx.stroke();
                }

                // Add labels
                ctx.fillStyle = '#ff0000';
                ctx.font = 'bold 14px sans-serif';
                ctx.fillText('← These red lines are perfectly straight →', 20, 30);
            }

            // Draw a subtle demonstration box in the corner
            if (!showGrid) {
                const demoX = canvas.width - 200;
                const demoY = canvas.height - 100;

                ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
                ctx.fillRect(demoX - 10, demoY - 30, 210, 120);

                ctx.strokeStyle = '#00ff00';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(demoX, demoY);
                ctx.lineTo(demoX + 180, demoY);
                ctx.stroke();

                ctx.fillStyle = '#00ff00';
                ctx.font = '12px sans-serif';
                ctx.fillText('This line is straight!', demoX + 10, demoY + 25);
                ctx.fillText('(Toggle grid to verify)', demoX + 5, demoY + 45);
            }
        }

        function animate() {
            drawCafeWall();
            requestAnimationFrame(animate);
        }

        // Controls
        document.getElementById('toggleGrid').addEventListener('click', function() {
            showGrid = !showGrid;
            this.textContent = showGrid ? 'Hide Grid Lines' : 'Show Grid Lines';
            this.classList.toggle('active');
        });

        document.getElementById('toggleColors').addEventListener('click', function() {
            colorScheme = (colorScheme + 1) % colorSchemes.length;
        });

        document.getElementById('offset').addEventListener('input', function() {
            offsetPercent = parseInt(this.value);
            document.getElementById('offsetValue').textContent = offsetPercent;
        });

        document.getElementById('tileSize').addEventListener('input', function() {
            tileSize = parseInt(this.value);
            document.getElementById('sizeValue').textContent = tileSize;
        });

        // Handle resize
        window.addEventListener('resize', function() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        // Start animation
        animate();
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
