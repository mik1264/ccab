<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eden Model - Tumor Growth</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); color: #e0e0e0; font-family: 'Segoe UI', sans-serif; overflow: hidden; }
        #canvas { display: block; background: #000000; }
        .controls { position: fixed; top: 20px; right: 20px; background: rgba(26, 26, 46, 0.95); padding: 20px; border-radius: 10px; min-width: 280px; }
        .info { position: fixed; top: 20px; left: 20px; background: rgba(26, 26, 46, 0.95); padding: 20px; border-radius: 10px; max-width: 300px; }
        h1 { font-size: 1.3em; margin-bottom: 10px; color: #64ffda; }
        h2 { font-size: 1em; margin-bottom: 15px; color: #64ffda; }
        .control-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-size: 0.9em; color: #b0b0b0; }
        input[type="range"] { width: 100%; }
        .value { font-size: 0.85em; color: #64ffda; }
        button { width: 100%; padding: 10px; margin: 10px 0; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background: #764ba2; }
        .info p { font-size: 0.85em; line-height: 1.6; margin-bottom: 10px; color: #c0c0c0; }
    </style>
</head>
<body>
    <div class="info">
        <h1>Eden Model</h1>
        <p>Models tumor growth where cells proliferate at the boundary. All perimeter sites have equal probability - creates compact, nearly circular clusters.</p>
        <p>Used in cancer research to model avascular tumor growth.</p>
    </div>
    <div class="controls">
        <h2>Growth Parameters</h2>
        <div class="control-group">
            <label>Growth Rate: <span class="value" id="rateValue">5</span></label>
            <input type="range" id="rateSlider" min="1" max="20" step="1" value="5">
        </div>
        <button id="resetBtn">Reset</button>
        <button id="pauseBtn">Pause</button>
    </div>
    <canvas id="canvas"></canvas>
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        const centerX = canvas.width / 2, centerY = canvas.height / 2;
        let growthRate = 5, paused = false;
        let cluster = new Set(), perimeter = [];

        function init() {
            cluster = new Set();
            perimeter = [];
            const seed = `${Math.floor(centerX)},${Math.floor(centerY)}`;
            cluster.add(seed);
            ctx.fillStyle = '#000000'; ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#ff6b6b'; ctx.fillRect(centerX - 1, centerY - 1, 3, 3);
            updatePerimeter();
        }

        function updatePerimeter() {
            perimeter = [];
            for (const key of cluster) {
                const [x, y] = key.split(',').map(Number);
                for (const [dx, dy] of [[-1,0], [1,0], [0,-1], [0,1]]) {
                    const nkey = `${x+dx},${y+dy}`;
                    if (!cluster.has(nkey) && !perimeter.some(p => p.key === nkey)) {
                        perimeter.push({ x: x+dx, y: y+dy, key: nkey });
                    }
                }
            }
        }

        function step() {
            if (perimeter.length === 0) return;
            const site = perimeter[Math.floor(Math.random() * perimeter.length)];
            cluster.add(site.key);
            const age = cluster.size / 100;
            const hue = 360 - Math.min(60, age);
            ctx.fillStyle = `hsl(${hue}, 100%, 50%)`;
            ctx.fillRect(site.x, site.y, 2, 2);
            updatePerimeter();
        }

        function animate() {
            if (!paused && cluster.size < 30000) {
                for (let i = 0; i < growthRate; i++) step();
            }
            requestAnimationFrame(animate);
        }

        document.getElementById('rateSlider').addEventListener('input', (e) => {
            growthRate = parseInt(e.target.value);
            document.getElementById('rateValue').textContent = growthRate;
        });
        document.getElementById('resetBtn').addEventListener('click', init);
        document.getElementById('pauseBtn').addEventListener('click', (e) => {
            paused = !paused; e.target.textContent = paused ? 'Resume' : 'Pause';
        });

        init(); animate();
    </script>
</body>
</html>
