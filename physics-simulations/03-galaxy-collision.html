<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Galaxy Collision Simulation</title>
    <style>
        * { margin: 0; padding: 0; }
        body { background: #000; color: #e0e0e0; font-family: sans-serif; overflow: hidden; }
        #canvas { display: block; }
        .info { position: fixed; top: 20px; left: 20px; background: rgba(26, 26, 46, 0.95); padding: 20px; border-radius: 10px; max-width: 300px; }
        h1 { font-size: 1.3em; color: #64ffda; margin-bottom: 10px; }
        p { font-size: 0.85em; color: #c0c0c0; line-height: 1.6; }
        .controls { position: fixed; top: 20px; right: 20px; background: rgba(26, 26, 46, 0.95); padding: 20px; border-radius: 10px; }
        button { padding: 10px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 5px; }
        button:hover { background: #764ba2; }
    </style>
</head>
<body>
    <div class="info">
        <h1>Galaxy Collision</h1>
        <p>Watch two spiral galaxies collide and merge. Tidal forces create spectacular streamers and tails as gravitational interactions reshape both systems.</p>
    </div>
    <div class="controls">
        <button id="resetBtn">Reset</button>
    </div>
    <canvas id="canvas"></canvas>
    <script>
        const canvas = document.getElementById('canvas'), ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        const cx = canvas.width / 2, cy = canvas.height / 2;
        const G = 0.5, dt = 0.01;

        let stars = [];

        function createGalaxy(ox, oy, vx, vy, numStars, color) {
            const centralMass = 100;
            stars.push({ x: ox, y: oy, vx, vy, m: centralMass, color: '#FFFFFF', r: 4 });

            for (let i = 0; i < numStars; i++) {
                const r = Math.sqrt(Math.random()) * 150 + 10;
                const theta = Math.random() * Math.PI * 2;
                const x = ox + r * Math.cos(theta);
                const y = oy + r * Math.sin(theta);
                const v = Math.sqrt(G * centralMass / r) * 0.8;
                const vtan_x = -Math.sin(theta) * v + vx;
                const vtan_y = Math.cos(theta) * v + vy;
                stars.push({ x, y, vx: vtan_x, vy: vtan_y, m: 0.1, color, r: 1.5 });
            }
        }

        function init() {
            stars = [];
            createGalaxy(cx - 200, cy, 0.3, 0, 200, '#4A90E2');
            createGalaxy(cx + 200, cy, -0.3, 0, 200, '#E2574C');
        }

        function step() {
            const acc = stars.map(() => ({ ax: 0, ay: 0 }));
            for (let i = 0; i < stars.length; i++) {
                for (let j = i + 1; j < stars.length; j++) {
                    const dx = stars[j].x - stars[i].x, dy = stars[j].y - stars[i].y;
                    const r2 = dx * dx + dy * dy;
                    if (r2 < 1) continue;
                    const r = Math.sqrt(r2), f = G / r2 / r;
                    const fx = f * dx, fy = f * dy;
                    acc[i].ax += fx * stars[j].m; acc[i].ay += fy * stars[j].m;
                    acc[j].ax -= fx * stars[i].m; acc[j].ay -= fy * stars[i].m;
                }
            }

            stars.forEach((s, i) => {
                s.vx += acc[i].ax * dt; s.vy += acc[i].ay * dt;
                s.x += s.vx * dt; s.y += s.vy * dt;
            });
        }

        function render() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            stars.forEach(s => {
                ctx.fillStyle = s.color;
                ctx.beginPath();
                ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
                ctx.fill();
            });
        }

        function animate() {
            for (let i = 0; i < 2; i++) step();
            render();
            requestAnimationFrame(animate);
        }

        document.getElementById('resetBtn').addEventListener('click', init);
        init(); animate();
    </script>
</body>
</html>
