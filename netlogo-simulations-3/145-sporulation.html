<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sporulation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: #e4e4e4;
            padding: 20px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            font-size: 2rem;
            margin-bottom: 10px;
            color: #ff9800;
        }
        .subtitle {
            text-align: center;
            color: #888;
            margin-bottom: 20px;
        }
        .simulation-area {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 20px;
        }
        .canvas-container {
            background: #0d1117;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }
        canvas {
            display: block;
            width: 100%;
            border-radius: 8px;
        }
        .controls {
            background: #0d1117;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }
        .control-group {
            margin-bottom: 18px;
        }
        .control-group label {
            display: block;
            margin-bottom: 8px;
            color: #ff9800;
            font-weight: 500;
        }
        .control-group input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #333;
            outline: none;
            -webkit-appearance: none;
        }
        .control-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #ff9800;
            cursor: pointer;
        }
        .btn {
            width: 100%;
            padding: 12px;
            margin: 5px 0;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .btn-start {
            background: #ff9800;
            color: #000;
        }
        .btn-start:hover {
            background: #fb8c00;
        }
        .btn-reset {
            background: #333;
            color: #e4e4e4;
        }
        .btn-reset:hover {
            background: #444;
        }
        .btn-stress {
            background: #f44336;
            color: #fff;
        }
        .btn-stress:hover {
            background: #e53935;
        }
        .btn-germinate {
            background: #4caf50;
            color: #fff;
        }
        .btn-germinate:hover {
            background: #43a047;
        }
        .stats {
            background: #1a1a2e;
            border-radius: 8px;
            padding: 12px;
            margin-top: 15px;
        }
        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            border-bottom: 1px solid #333;
        }
        .stat-row:last-child {
            border-bottom: none;
        }
        .stat-label {
            color: #888;
        }
        .stat-value {
            color: #ff9800;
            font-weight: 600;
        }
        .nutrient-bar {
            margin-top: 15px;
            padding: 10px;
            background: #1a1a2e;
            border-radius: 8px;
        }
        .bar-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        .bar-track {
            height: 15px;
            background: #333;
            border-radius: 8px;
            overflow: hidden;
        }
        .bar-fill {
            height: 100%;
            transition: width 0.3s;
        }
        .nutrient-fill {
            background: linear-gradient(90deg, #f44336, #ffeb3b, #4caf50);
        }
        .theory-box {
            background: linear-gradient(135deg, #3d2f1a 0%, #2a1f0d 100%);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid #ff980044;
        }
        .theory-box h3 {
            color: #ff9800;
            margin-bottom: 10px;
        }
        .theory-box p {
            color: #bbb;
            line-height: 1.6;
            font-size: 0.9rem;
        }
        .legend {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.8rem;
        }
        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        .spore-stages {
            margin-top: 15px;
            padding: 10px;
            background: #1a1a2e;
            border-radius: 8px;
        }
        .stage {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 5px 0;
            font-size: 0.85rem;
        }
        .stage-num {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
        }
        .stage-num.active {
            background: #ff9800;
            color: #000;
        }
    
        .explain-btn {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            font-weight: 600;
        }
        .explain-btn:hover {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4);
        }
        .modal-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.9);
            z-index: 10000;
            padding: 20px;
            overflow-y: auto;
        }
        .modal-overlay.active {
            display: flex;
            align-items: flex-start;
            justify-content: center;
        }
        .modal {
            background: linear-gradient(135deg, #1a1a2e 0%, #252542 100%);
            border-radius: 20px;
            padding: 35px;
            max-width: 750px;
            width: 100%;
            margin: 40px auto;
            position: relative;
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5);
        }
        .modal-close {
            position: absolute;
            top: 15px;
            right: 20px;
            background: rgba(255,255,255,0.1);
            border: none;
            color: #888;
            font-size: 24px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        .modal-close:hover {
            color: #fff;
            background: rgba(255,255,255,0.2);
        }
        .modal h2 {
            color: #00d9ff;
            margin-bottom: 25px;
            font-size: 1.6rem;
            padding-right: 50px;
            line-height: 1.3;
        }
        .modal-body {
            color: #d1d5db;
            line-height: 1.9;
            font-size: 1rem;
        }
        .modal-body h3 {
            color: #00ff88;
            margin: 28px 0 14px 0;
            font-size: 1.15rem;
            font-weight: 600;
        }
        .modal-body p {
            margin-bottom: 16px;
        }
        .modal-body ul {
            margin: 12px 0 18px 24px;
        }
        .modal-body li {
            margin-bottom: 10px;
        }
        .modal-body strong {
            color: #00d9ff;
        }
        .modal-body em {
            color: #a5b4fc;
            font-style: italic;
        }
        .modal-body code {
            background: rgba(0,0,0,0.3);
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Fira Code', monospace;
            color: #fbbf24;
            font-size: 0.9em;
        }
        .modal-category {
            margin-top: 24px;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Sporulation</h1>
        <p class="subtitle">Endospore Formation: Asymmetric Division and Coat Synthesis</p>

        <div class="simulation-area">
            <div class="canvas-container">
                <canvas id="simCanvas"></canvas>
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-dot" style="background: #4caf50;"></div>
                        <span>Vegetative</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot" style="background: #2196f3;"></div>
                        <span>Sporulating</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot" style="background: #ff9800;"></div>
                        <span>Endospore</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot" style="background: #9c27b0;"></div>
                        <span>Germinating</span>
                    </div>
                </div>
            </div>

            <div class="controls">
                <div class="control-group">
                    <label>Initial Cells: <span id="cellVal">40</span></label>
                    <input type="range" id="initialCells" min="10" max="100" value="40">
                </div>

                <div class="control-group">
                    <label>Sporulation Threshold: <span id="threshVal">30</span>%</label>
                    <input type="range" id="sporulationThresh" min="10" max="60" value="30">
                </div>

                <div class="control-group">
                    <label>Spore Resistance: <span id="resistVal">0.95</span></label>
                    <input type="range" id="resistance" min="80" max="99" value="95">
                </div>

                <div class="control-group">
                    <label>Coat Synthesis Rate: <span id="coatVal">0.5</span></label>
                    <input type="range" id="coatRate" min="1" max="10" value="5">
                </div>

                <button class="btn btn-start" id="startBtn">Start Simulation</button>
                <button class="btn btn-stress" id="stressBtn">Deplete Nutrients</button>
                <button class="btn btn-germinate" id="germinateBtn">Add Nutrients</button>
                <button class="btn btn-reset" id="resetBtn">Reset</button>
                <button id="explainBtn" class="explain-btn">ðŸ“š Explain This Simulation</button>

                <div class="nutrient-bar">
                    <div class="bar-label">
                        <span>Nutrients</span>
                        <span id="nutrientLevel">100%</span>
                    </div>
                    <div class="bar-track">
                        <div class="bar-fill nutrient-fill" id="nutrientFill" style="width: 100%"></div>
                    </div>
                </div>

                <div class="stats">
                    <div class="stat-row">
                        <span class="stat-label">Generation:</span>
                        <span class="stat-value" id="generation">0</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Vegetative:</span>
                        <span class="stat-value" id="vegetative">0</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Sporulating:</span>
                        <span class="stat-value" id="sporulating">0</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Endospores:</span>
                        <span class="stat-value" id="endospores">0</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Germinating:</span>
                        <span class="stat-value" id="germinating">0</span>
                    </div>
                </div>

                <div class="spore-stages">
                    <strong style="color: #ff9800;">Sporulation Stages:</strong>
                    <div class="stage">
                        <div class="stage-num" id="stage0">0</div>
                        <span>Axial filament formation</span>
                    </div>
                    <div class="stage">
                        <div class="stage-num" id="stage1">I</div>
                        <span>Asymmetric septum</span>
                    </div>
                    <div class="stage">
                        <div class="stage-num" id="stage2">II</div>
                        <span>Forespore engulfment</span>
                    </div>
                    <div class="stage">
                        <div class="stage-num" id="stage3">III</div>
                        <span>Cortex synthesis</span>
                    </div>
                    <div class="stage">
                        <div class="stage-num" id="stage4">IV</div>
                        <span>Coat assembly</span>
                    </div>
                    <div class="stage">
                        <div class="stage-num" id="stage5">V</div>
                        <span>Maturation & release</span>
                    </div>
                </div>

                <div class="theory-box">
                    <h3>Bacterial Endospores</h3>
                    <p>
                        When faced with starvation, <em>Bacillus</em> and <em>Clostridium</em> species
                        undergo sporulation - a developmental program producing highly resistant endospores.
                        The process involves asymmetric cell division, engulfment of the forespore, and
                        synthesis of protective coat layers. Spores can survive extreme heat, radiation,
                        desiccation, and chemicals for centuries.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('simCanvas');
        const ctx = canvas.getContext('2d');

        canvas.width = 900;
        canvas.height = 600;

        let running = false;
        let generation = 0;
        let cells = [];
        let nutrients = 100;

        // Parameters
        let initialCells = 40;
        let sporulationThreshold = 30;
        let sporeResistance = 0.95;
        let coatSynthesisRate = 0.5;

        class Cell {
            constructor(x, y, state = 'vegetative') {
                this.x = x || Math.random() * canvas.width;
                this.y = y || Math.random() * canvas.height;
                this.vx = (Math.random() - 0.5) * 2;
                this.vy = (Math.random() - 0.5) * 2;
                this.width = 18;
                this.height = 8;
                this.angle = Math.random() * Math.PI * 2;
                this.state = state; // vegetative, sporulating, endospore, germinating
                this.sporulationStage = 0; // 0-5 stages
                this.sporulationProgress = 0;
                this.coatThickness = 0;
                this.divisionTimer = 100 + Math.random() * 100;
                this.germinationTimer = 0;
            }

            update() {
                if (this.state === 'vegetative') {
                    // Movement
                    if (Math.random() < 0.05) {
                        this.vx += (Math.random() - 0.5) * 1;
                        this.vy += (Math.random() - 0.5) * 1;
                    }
                    this.vx *= 0.98;
                    this.vy *= 0.98;
                    this.x += this.vx;
                    this.y += this.vy;
                    this.angle += this.vx * 0.05;

                    // Check starvation - initiate sporulation
                    if (nutrients < sporulationThreshold && Math.random() < 0.02) {
                        this.state = 'sporulating';
                        this.sporulationStage = 0;
                        this.sporulationProgress = 0;
                    }

                    // Division when nutrients are available
                    if (nutrients > 50) {
                        this.divisionTimer--;
                    }
                }
                else if (this.state === 'sporulating') {
                    // Slow movement during sporulation
                    this.vx *= 0.95;
                    this.vy *= 0.95;
                    this.x += this.vx * 0.5;
                    this.y += this.vy * 0.5;

                    // Progress through sporulation stages
                    this.sporulationProgress += coatSynthesisRate;

                    if (this.sporulationProgress >= 100) {
                        this.sporulationProgress = 0;
                        this.sporulationStage++;

                        if (this.sporulationStage > 5) {
                            this.state = 'endospore';
                            this.coatThickness = 1;
                        }
                    }
                }
                else if (this.state === 'endospore') {
                    // Dormant - minimal movement (Brownian motion)
                    this.x += (Math.random() - 0.5) * 0.3;
                    this.y += (Math.random() - 0.5) * 0.3;

                    // Check for germination conditions
                    if (nutrients > 60 && Math.random() < 0.01) {
                        this.state = 'germinating';
                        this.germinationTimer = 100;
                    }
                }
                else if (this.state === 'germinating') {
                    this.germinationTimer--;
                    this.coatThickness = Math.max(0, this.coatThickness - 0.02);

                    if (this.germinationTimer <= 0) {
                        this.state = 'vegetative';
                        this.divisionTimer = 50 + Math.random() * 50;
                    }
                }

                // Boundaries
                if (this.x < 20) { this.x = 20; this.vx *= -1; }
                if (this.x > canvas.width - 20) { this.x = canvas.width - 20; this.vx *= -1; }
                if (this.y < 10) { this.y = 10; this.vy *= -1; }
                if (this.y > canvas.height - 10) { this.y = canvas.height - 10; this.vy *= -1; }
            }

            canDivide() {
                return this.state === 'vegetative' && this.divisionTimer <= 0 && nutrients > 30;
            }

            divide() {
                this.divisionTimer = 100 + Math.random() * 100;
                nutrients -= 2;
                return new Cell(
                    this.x + Math.cos(this.angle) * 20,
                    this.y + Math.sin(this.angle) * 20
                );
            }

            draw() {
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.rotate(this.angle);

                if (this.state === 'vegetative') {
                    // Rod-shaped vegetative cell
                    ctx.beginPath();
                    ctx.roundRect(-this.width/2, -this.height/2, this.width, this.height, 4);
                    ctx.fillStyle = '#4caf50';
                    ctx.fill();
                    ctx.strokeStyle = 'rgba(255,255,255,0.3)';
                    ctx.lineWidth = 1;
                    ctx.stroke();
                }
                else if (this.state === 'sporulating') {
                    // Show sporulation progress
                    ctx.beginPath();
                    ctx.roundRect(-this.width/2, -this.height/2, this.width, this.height, 4);
                    ctx.fillStyle = '#2196f3';
                    ctx.fill();

                    // Show forespore developing
                    const sporeSize = 2 + (this.sporulationStage / 5) * 4;
                    const sporeOffset = (this.sporulationStage >= 2) ? -3 : 3;

                    ctx.beginPath();
                    ctx.arc(sporeOffset, 0, sporeSize, 0, Math.PI * 2);

                    if (this.sporulationStage >= 3) {
                        // Cortex and coat forming
                        ctx.fillStyle = '#ff9800';
                    } else {
                        ctx.fillStyle = '#64b5f6';
                    }
                    ctx.fill();

                    // Coat layer
                    if (this.sporulationStage >= 4) {
                        ctx.strokeStyle = '#795548';
                        ctx.lineWidth = 2;
                        ctx.stroke();
                    }
                }
                else if (this.state === 'endospore') {
                    // Mature endospore - oval with thick coat
                    const sporeRadius = 6;

                    // Outer coat
                    ctx.beginPath();
                    ctx.ellipse(0, 0, sporeRadius + 3, sporeRadius + 2, 0, 0, Math.PI * 2);
                    ctx.fillStyle = '#795548';
                    ctx.fill();

                    // Inner cortex
                    ctx.beginPath();
                    ctx.ellipse(0, 0, sporeRadius + 1, sporeRadius, 0, 0, Math.PI * 2);
                    ctx.fillStyle = '#8d6e63';
                    ctx.fill();

                    // Core
                    ctx.beginPath();
                    ctx.ellipse(0, 0, sporeRadius - 2, sporeRadius - 2, 0, 0, Math.PI * 2);
                    ctx.fillStyle = '#ff9800';
                    ctx.fill();

                    // Shine
                    ctx.beginPath();
                    ctx.arc(-2, -2, 2, 0, Math.PI * 2);
                    ctx.fillStyle = 'rgba(255,255,255,0.3)';
                    ctx.fill();
                }
                else if (this.state === 'germinating') {
                    // Germinating spore
                    const progress = 1 - (this.germinationTimer / 100);

                    // Shrinking coat
                    ctx.beginPath();
                    ctx.ellipse(0, 0, 9 - progress * 3, 8 - progress * 3, 0, 0, Math.PI * 2);
                    ctx.fillStyle = `rgba(121, 85, 72, ${1 - progress})`;
                    ctx.fill();

                    // Emerging cell
                    ctx.beginPath();
                    const emerging = progress * this.width;
                    ctx.roundRect(-emerging/2, -this.height/2, emerging, this.height, 4);
                    ctx.fillStyle = '#9c27b0';
                    ctx.fill();

                    // Outgrowth
                    if (progress > 0.5) {
                        ctx.beginPath();
                        ctx.moveTo(emerging/2 - 5, 0);
                        ctx.lineTo(emerging/2 + (progress - 0.5) * 20, 0);
                        ctx.strokeStyle = '#9c27b0';
                        ctx.lineWidth = 4;
                        ctx.stroke();
                    }
                }

                ctx.restore();
            }
        }

        function init() {
            cells = [];
            generation = 0;
            nutrients = 100;

            for (let i = 0; i < initialCells; i++) {
                cells.push(new Cell());
            }

            updateStats();
            draw();
        }

        function update() {
            if (!running) return;

            generation++;

            // Update all cells
            cells.forEach(c => c.update());

            // Handle division
            const newCells = [];
            cells.forEach(c => {
                if (c.canDivide() && cells.length + newCells.length < 200) {
                    newCells.push(c.divide());
                }
            });
            cells.push(...newCells);

            // Nutrient decay from vegetative cells
            const vegetativeCount = cells.filter(c => c.state === 'vegetative').length;
            nutrients = Math.max(0, nutrients - vegetativeCount * 0.02);

            // Natural nutrient regeneration (slow)
            nutrients = Math.min(100, nutrients + 0.01);

            updateStats();
            draw();

            requestAnimationFrame(update);
        }

        function draw() {
            // Background
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, '#0a1510');
            gradient.addColorStop(1, '#051008');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Nutrient visualization
            ctx.fillStyle = `rgba(76, 175, 80, ${nutrients / 500})`;
            for (let i = 0; i < nutrients * 3; i++) {
                const x = (Math.sin(i * 0.5 + generation * 0.005) + 1) * canvas.width / 2;
                const y = (Math.cos(i * 0.7 + generation * 0.005) + 1) * canvas.height / 2;
                ctx.beginPath();
                ctx.arc(x, y, 2, 0, Math.PI * 2);
                ctx.fill();
            }

            // Draw cells
            cells.forEach(c => c.draw());

            // Info overlay
            ctx.fillStyle = 'rgba(0,0,0,0.7)';
            ctx.fillRect(10, 10, 150, 30);
            ctx.font = '12px Arial';
            ctx.fillStyle = nutrients > sporulationThreshold ? '#4caf50' : '#f44336';
            ctx.fillText(`Nutrients: ${nutrients.toFixed(1)}%`, 20, 28);
        }

        function updateStats() {
            const vegetative = cells.filter(c => c.state === 'vegetative').length;
            const sporulating = cells.filter(c => c.state === 'sporulating').length;
            const endospores = cells.filter(c => c.state === 'endospore').length;
            const germinating = cells.filter(c => c.state === 'germinating').length;

            document.getElementById('generation').textContent = generation;
            document.getElementById('vegetative').textContent = vegetative;
            document.getElementById('sporulating').textContent = sporulating;
            document.getElementById('endospores').textContent = endospores;
            document.getElementById('germinating').textContent = germinating;

            document.getElementById('nutrientLevel').textContent = nutrients.toFixed(0) + '%';
            document.getElementById('nutrientFill').style.width = nutrients + '%';

            // Update stage indicators
            const sporulatingCells = cells.filter(c => c.state === 'sporulating');
            let maxStage = -1;
            sporulatingCells.forEach(c => {
                if (c.sporulationStage > maxStage) maxStage = c.sporulationStage;
            });

            for (let i = 0; i <= 5; i++) {
                const el = document.getElementById('stage' + i);
                el.className = 'stage-num' + (i <= maxStage ? ' active' : '');
            }
        }

        // Event listeners
        document.getElementById('startBtn').addEventListener('click', function() {
            running = !running;
            this.textContent = running ? 'Pause' : 'Start Simulation';
            if (running) update();
        });

        document.getElementById('stressBtn').addEventListener('click', function() {
            nutrients = Math.max(5, nutrients - 40);
            document.getElementById('nutrientFill').style.width = nutrients + '%';
            document.getElementById('nutrientLevel').textContent = nutrients.toFixed(0) + '%';
        });

        document.getElementById('germinateBtn').addEventListener('click', function() {
            nutrients = Math.min(100, nutrients + 50);
            document.getElementById('nutrientFill').style.width = nutrients + '%';
            document.getElementById('nutrientLevel').textContent = nutrients.toFixed(0) + '%';
        });

        document.getElementById('resetBtn').addEventListener('click', function() {
            running = false;
            document.getElementById('startBtn').textContent = 'Start Simulation';
            init();
        });

        document.getElementById('initialCells').addEventListener('input', function() {
            initialCells = parseInt(this.value);
            document.getElementById('cellVal').textContent = initialCells;
        });

        document.getElementById('sporulationThresh').addEventListener('input', function() {
            sporulationThreshold = parseInt(this.value);
            document.getElementById('threshVal').textContent = sporulationThreshold;
        });

        document.getElementById('resistance').addEventListener('input', function() {
            sporeResistance = parseInt(this.value) / 100;
            document.getElementById('resistVal').textContent = sporeResistance.toFixed(2);
        });

        document.getElementById('coatRate').addEventListener('input', function() {
            coatSynthesisRate = parseInt(this.value) / 10;
            document.getElementById('coatVal').textContent = coatSynthesisRate.toFixed(1);
        });

        init();
    </script>


    <div id="explainModal" class="modal-overlay">
        <div class="modal">
            <button class="modal-close">&times;</button>
            <h2>ðŸ“Š Sporulation</h2>
            <div class="modal-body">
                <p>Microorganisms form complex communities with emergent behaviors. This simulation models microbial interactions and population dynamics.</p>

                <h3>About This Simulation</h3>
                <p>Build an endospore formation model with asymmetric division and coat synthesis.</p>

                <h3>Key Concepts</h3>
                <ul>
                    <li><strong>Quorum Sensing:</strong> Cell-to-cell communication allowing bacteria to coordinate behavior based on population density.</li>
                    <li><strong>Biofilm Formation:</strong> Surface-attached microbial communities with enhanced resistance to antibiotics and environmental stress.</li>
                    <li><strong>Competition & Cooperation:</strong> Microbes compete for resources while also engaging in metabolic cooperation and cross-feeding.</li>
                    <li><strong>Horizontal Gene Transfer:</strong> Exchange of genetic material between organisms, spreading traits like antibiotic resistance.</li>
                </ul>

                <h3>Why It Matters</h3>
                <p>Microbial ecology informs antibiotic development, fermentation, bioremediation, and microbiome health.</p>

                <h3>How to Explore</h3>
                <ul>
                    <li>Adjust the sliders to modify simulation parameters and observe how the system responds</li>
                    <li>Look for emergent patterns that arise from agent interactions</li>
                    <li>Try extreme parameter values to find phase transitions and tipping points</li>
                    <li>Compare the simulation behavior to real-world phenomena</li>
                </ul>

                <p class="modal-category"><em>Category: Microbiology â€” Exploring microbial systems and cellular processes</em></p>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const modal = document.getElementById('explainModal');
        const explainBtn = document.getElementById('explainBtn');
        if (modal && explainBtn) {
            explainBtn.addEventListener('click', function() {
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            });
            modal.querySelector('.modal-close').addEventListener('click', function() {
                modal.classList.remove('active');
                document.body.style.overflow = '';
            });
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.classList.remove('active');
                    document.body.style.overflow = '';
                }
            });
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && modal.classList.contains('active')) {
                    modal.classList.remove('active');
                    document.body.style.overflow = '';
                }
            });
        }
    });
    </script>

</body>
</html>
