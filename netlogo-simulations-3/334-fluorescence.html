<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fluorescence Spectroscopy</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; background: #1a1a2e; color: #e8e6e1; overflow: hidden; }
        #container { display: flex; height: 100vh; }
        #canvas-container { flex: 1; position: relative; }
        canvas { display: block; width: 100%; height: 100%; }
        #controls { width: 320px; background: rgba(0,0,0,0.8); padding: 20px; overflow-y: auto; }
        h1 { font-size: 1.2rem; margin-bottom: 10px; color: #76ff03; }
        .description { font-size: 0.75rem; color: #888; margin-bottom: 15px; line-height: 1.4; }
        .control-group { margin-bottom: 15px; }
        label { display: block; font-size: 0.8rem; margin-bottom: 5px; color: #aaa; }
        input[type="range"] { width: 100%; }
        select { width: 100%; padding: 5px; background: #333; color: #fff; border: 1px solid #555; border-radius: 3px; }
        button { width: 100%; padding: 10px; margin-bottom: 8px; background: #76ff03; color: #000; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; }
        .stats { background: rgba(255,255,255,0.1); padding: 10px; border-radius: 5px; font-size: 0.75rem; margin-top: 10px; }
        .back-link { position: fixed; top: 10px; left: 10px; padding: 8px 16px; background: rgba(0,0,0,0.7); color: #76ff03; text-decoration: none; border-radius: 6px; font-size: 14px; z-index: 999; }
    
        .explain-btn {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            font-weight: 600;
        }
        .explain-btn:hover {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4);
        }
        .modal-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.9);
            z-index: 10000;
            padding: 20px;
            overflow-y: auto;
        }
        .modal-overlay.active {
            display: flex;
            align-items: flex-start;
            justify-content: center;
        }
        .modal {
            background: linear-gradient(135deg, #1a1a2e 0%, #252542 100%);
            border-radius: 20px;
            padding: 35px;
            max-width: 750px;
            width: 100%;
            margin: 40px auto;
            position: relative;
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5);
        }
        .modal-close {
            position: absolute;
            top: 15px;
            right: 20px;
            background: rgba(255,255,255,0.1);
            border: none;
            color: #888;
            font-size: 24px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        .modal-close:hover {
            color: #fff;
            background: rgba(255,255,255,0.2);
        }
        .modal h2 {
            color: #00d9ff;
            margin-bottom: 25px;
            font-size: 1.6rem;
            padding-right: 50px;
            line-height: 1.3;
        }
        .modal-body {
            color: #d1d5db;
            line-height: 1.9;
            font-size: 1rem;
        }
        .modal-body h3 {
            color: #00ff88;
            margin: 28px 0 14px 0;
            font-size: 1.15rem;
            font-weight: 600;
        }
        .modal-body p {
            margin-bottom: 16px;
        }
        .modal-body ul {
            margin: 12px 0 18px 24px;
        }
        .modal-body li {
            margin-bottom: 10px;
        }
        .modal-body strong {
            color: #00d9ff;
        }
        .modal-body em {
            color: #a5b4fc;
            font-style: italic;
        }
        .modal-body code {
            background: rgba(0,0,0,0.3);
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Fira Code', monospace;
            color: #fbbf24;
            font-size: 0.9em;
        }
        .modal-category {
            margin-top: 24px;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back to Gallery</a>
    <div id="container">
        <div id="canvas-container"><canvas id="canvas"></canvas></div>
        <div id="controls">
            <h1>Fluorescence Spectroscopy</h1>
            <p class="description">Fluorophores absorb light and emit at longer wavelength (Stokes shift). Quantum yield = photons emitted / photons absorbed. Quenching reduces fluorescence through various mechanisms.</p>

            <div class="control-group">
                <label>Fluorophore:</label>
                <select id="fluorophore">
                    <option value="fluorescein">Fluorescein (green)</option>
                    <option value="rhodamine">Rhodamine B (red)</option>
                    <option value="dapi">DAPI (blue)</option>
                    <option value="gfp">GFP</option>
                </select>
            </div>

            <div class="control-group">
                <label>Excitation Œª: <span id="excVal">488</span> nm</label>
                <input type="range" id="excitation" min="300" max="600" value="488">
            </div>

            <div class="control-group">
                <label>Quencher Conc: <span id="quenchVal">0</span> mM</label>
                <input type="range" id="quencher" min="0" max="100" value="0">
            </div>

            <div class="control-group">
                <label>Light Intensity: <span id="intensVal">50</span>%</label>
                <input type="range" id="intensity" min="10" max="100" value="50">
            </div>

            <button id="reset">Reset</button>
                <button id="explainBtn" class="explain-btn">üìö Explain This Simulation</button>
            <button id="excite">Excite Sample</button>

            <div class="stats">
                <div>Quantum Yield: <span id="quantumYield">0.90</span></div>
                <div>Stokes Shift: <span id="stokes">25</span> nm</div>
                <div>Fluorescence: <span id="fluorIntensity">0</span>%</div>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        let width, height;
        let time = 0;

        let fluorophoreType = 'fluorescein';
        let excitationWavelength = 488;
        let quencherConc = 0;
        let lightIntensity = 50;

        let molecules = [];
        let photons = [];
        let emittedPhotons = [];

        const FLUOROPHORES = {
            fluorescein: {
                excMax: 494,
                emMax: 521,
                quantumYield: 0.90,
                excColor: '#00bfff',
                emColor: '#00ff00',
                name: 'Fluorescein'
            },
            rhodamine: {
                excMax: 553,
                emMax: 627,
                quantumYield: 0.70,
                excColor: '#ffff00',
                emColor: '#ff4444',
                name: 'Rhodamine B'
            },
            dapi: {
                excMax: 358,
                emMax: 461,
                quantumYield: 0.58,
                excColor: '#9400d3',
                emColor: '#4169e1',
                name: 'DAPI'
            },
            gfp: {
                excMax: 488,
                emMax: 507,
                quantumYield: 0.79,
                excColor: '#00bfff',
                emColor: '#7fff00',
                name: 'GFP'
            }
        };

        function resize() {
            const container = document.getElementById('canvas-container');
            width = container.clientWidth;
            height = container.clientHeight;
            canvas.width = width;
            canvas.height = height;
        }

        function init() {
            resize();
            time = 0;
            molecules = [];
            photons = [];
            emittedPhotons = [];

            // Create fluorophore molecules
            const sampleX = 200;
            const sampleY = height / 2 - 50;
            const sampleW = 150;
            const sampleH = 100;

            for (let i = 0; i < 30; i++) {
                molecules.push({
                    x: sampleX + 20 + Math.random() * (sampleW - 40),
                    y: sampleY + 20 + Math.random() * (sampleH - 40),
                    excited: false,
                    exciteTime: 0,
                    lifetime: 0
                });
            }

            updateStats();
        }

        function getExcitationEfficiency() {
            const fluor = FLUOROPHORES[fluorophoreType];
            const diff = Math.abs(excitationWavelength - fluor.excMax);
            return Math.exp(-(diff * diff) / (30 * 30));
        }

        function excite() {
            const efficiency = getExcitationEfficiency();
            const fluor = FLUOROPHORES[fluorophoreType];

            // Create excitation photons
            for (let i = 0; i < Math.floor(lightIntensity / 5); i++) {
                photons.push({
                    x: 50,
                    y: height / 2 - 50 + Math.random() * 100,
                    vx: 6,
                    vy: 0,
                    wavelength: excitationWavelength,
                    absorbed: false
                });
            }
        }

        function step() {
            time += 0.016;
            const fluor = FLUOROPHORES[fluorophoreType];
            const efficiency = getExcitationEfficiency();

            // Update excitation photons
            for (let i = photons.length - 1; i >= 0; i--) {
                const p = photons[i];
                p.x += p.vx;

                // Check for absorption by molecules
                if (p.x > 200 && p.x < 350 && !p.absorbed) {
                    for (const mol of molecules) {
                        if (!mol.excited) {
                            const dist = Math.hypot(p.x - mol.x, p.y - mol.y);
                            if (dist < 15 && Math.random() < efficiency * 0.3) {
                                mol.excited = true;
                                mol.exciteTime = time;
                                mol.lifetime = 2 + Math.random() * 3; // ns timescale (simulated)
                                p.absorbed = true;
                                break;
                            }
                        }
                    }
                }

                if (p.x > width - 400 || p.absorbed) {
                    photons.splice(i, 1);
                }
            }

            // Update excited molecules
            const quenchFactor = 1 / (1 + quencherConc * 0.05); // Stern-Volmer
            const effectiveQY = fluor.quantumYield * quenchFactor;

            for (const mol of molecules) {
                if (mol.excited) {
                    const excitedDuration = time - mol.exciteTime;
                    if (excitedDuration > mol.lifetime * 0.1) {
                        mol.excited = false;

                        // Emit photon?
                        if (Math.random() < effectiveQY) {
                            const angle = Math.random() * Math.PI * 2;
                            emittedPhotons.push({
                                x: mol.x,
                                y: mol.y,
                                vx: Math.cos(angle) * 4,
                                vy: Math.sin(angle) * 4,
                                wavelength: fluor.emMax,
                                alpha: 1
                            });
                        }
                    }
                }
            }

            // Update emitted photons
            for (let i = emittedPhotons.length - 1; i >= 0; i--) {
                const p = emittedPhotons[i];
                p.x += p.vx;
                p.y += p.vy;
                p.alpha -= 0.02;

                if (p.alpha <= 0 || p.x < 0 || p.x > width - 300 || p.y < 0 || p.y > height) {
                    emittedPhotons.splice(i, 1);
                }
            }

            updateStats();
        }

        function draw() {
            ctx.fillStyle = '#1a1a2e';
            ctx.fillRect(0, 0, width, height);

            drawSetup();
            drawMolecules();
            drawPhotons();
            drawJablonskiDiagram();
            drawSpectra();
        }

        function drawSetup() {
            const fluor = FLUOROPHORES[fluorophoreType];

            // Light source
            ctx.fillStyle = fluor.excColor;
            ctx.beginPath();
            ctx.arc(40, height / 2, 25, 0, Math.PI * 2);
            ctx.fill();

            ctx.fillStyle = '#aaa';
            ctx.font = '10px sans-serif';
            ctx.fillText('Excitation', 20, height / 2 + 40);
            ctx.fillText(excitationWavelength + ' nm', 22, height / 2 + 52);

            // Filter
            ctx.fillStyle = '#333';
            ctx.fillRect(80, height / 2 - 40, 20, 80);
            ctx.fillStyle = fluor.excColor;
            ctx.globalAlpha = 0.5;
            ctx.fillRect(85, height / 2 - 35, 10, 70);
            ctx.globalAlpha = 1;

            ctx.fillStyle = '#aaa';
            ctx.fillText('Filter', 77, height / 2 + 55);

            // Sample cuvette
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 2;
            ctx.strokeRect(200, height / 2 - 70, 150, 140);

            // Sample solution (fluorescent)
            const glowIntensity = emittedPhotons.length / 50;
            ctx.fillStyle = fluor.emColor;
            ctx.globalAlpha = 0.1 + glowIntensity * 0.3;
            ctx.fillRect(202, height / 2 - 68, 146, 136);
            ctx.globalAlpha = 1;

            // Glow effect
            if (glowIntensity > 0.1) {
                const gradient = ctx.createRadialGradient(275, height / 2, 0, 275, height / 2, 100);
                gradient.addColorStop(0, fluor.emColor);
                gradient.addColorStop(1, 'transparent');
                ctx.globalAlpha = glowIntensity * 0.5;
                ctx.fillStyle = gradient;
                ctx.fillRect(175, height / 2 - 100, 200, 200);
                ctx.globalAlpha = 1;
            }

            // Emission detector (90¬∞)
            ctx.fillStyle = '#333';
            ctx.fillRect(250, height / 2 + 100, 50, 40);
            ctx.fillStyle = '#4caf50';
            ctx.fillRect(255, height / 2 + 105, 40, 30);

            ctx.fillStyle = '#aaa';
            ctx.fillText('Detector', 250, height / 2 + 155);

            // Arrow showing 90¬∞ detection
            ctx.strokeStyle = fluor.emColor;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(275, height / 2 + 70);
            ctx.lineTo(275, height / 2 + 100);
            ctx.stroke();
            ctx.setLineDash([]);

            // Title
            ctx.fillStyle = '#76ff03';
            ctx.font = '14px sans-serif';
            ctx.fillText('Fluorescence Spectroscopy', 100, 40);
        }

        function drawMolecules() {
            const fluor = FLUOROPHORES[fluorophoreType];

            for (const mol of molecules) {
                if (mol.excited) {
                    // Excited state - pulsing glow
                    const pulse = 0.5 + 0.5 * Math.sin(time * 20);
                    ctx.fillStyle = fluor.emColor;
                    ctx.globalAlpha = 0.5 + pulse * 0.5;
                    ctx.beginPath();
                    ctx.arc(mol.x, mol.y, 8 + pulse * 4, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.globalAlpha = 1;
                } else {
                    // Ground state
                    ctx.fillStyle = '#666';
                    ctx.beginPath();
                    ctx.arc(mol.x, mol.y, 5, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
        }

        function drawPhotons() {
            const fluor = FLUOROPHORES[fluorophoreType];

            // Excitation photons
            for (const p of photons) {
                ctx.fillStyle = fluor.excColor;
                ctx.beginPath();
                ctx.arc(p.x, p.y, 4, 0, Math.PI * 2);
                ctx.fill();
            }

            // Emitted photons
            for (const p of emittedPhotons) {
                ctx.fillStyle = fluor.emColor;
                ctx.globalAlpha = p.alpha;
                ctx.beginPath();
                ctx.arc(p.x, p.y, 5, 0, Math.PI * 2);
                ctx.fill();

                // Trail
                ctx.strokeStyle = fluor.emColor;
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(p.x, p.y);
                ctx.lineTo(p.x - p.vx * 5, p.y - p.vy * 5);
                ctx.stroke();
            }
            ctx.globalAlpha = 1;
        }

        function drawJablonskiDiagram() {
            const diagX = width - 280;
            const diagY = 80;
            const diagW = 180;
            const diagH = 180;

            ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
            ctx.fillRect(diagX - 10, diagY - 20, diagW + 20, diagH + 40);

            ctx.fillStyle = '#fff';
            ctx.font = '11px sans-serif';
            ctx.fillText('Jablonski Diagram', diagX, diagY - 5);

            const fluor = FLUOROPHORES[fluorophoreType];

            // S0 ground state
            ctx.strokeStyle = '#4caf50';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(diagX + 20, diagY + diagH - 20);
            ctx.lineTo(diagX + 80, diagY + diagH - 20);
            ctx.stroke();
            ctx.fillStyle = '#4caf50';
            ctx.font = '10px sans-serif';
            ctx.fillText('S‚ÇÄ', diagX + 85, diagY + diagH - 15);

            // S1 excited state
            ctx.strokeStyle = '#ff9800';
            ctx.beginPath();
            ctx.moveTo(diagX + 20, diagY + 40);
            ctx.lineTo(diagX + 80, diagY + 40);
            ctx.stroke();
            ctx.fillStyle = '#ff9800';
            ctx.fillText('S‚ÇÅ', diagX + 85, diagY + 45);

            // Vibrational levels
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 1;
            for (let i = 1; i <= 3; i++) {
                ctx.beginPath();
                ctx.moveTo(diagX + 25, diagY + 40 + i * 15);
                ctx.lineTo(diagX + 75, diagY + 40 + i * 15);
                ctx.stroke();
            }

            // Absorption arrow
            ctx.strokeStyle = fluor.excColor;
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(diagX + 35, diagY + diagH - 20);
            ctx.lineTo(diagX + 35, diagY + 40);
            ctx.stroke();
            ctx.fillStyle = fluor.excColor;
            ctx.beginPath();
            ctx.moveTo(diagX + 30, diagY + 50);
            ctx.lineTo(diagX + 35, diagY + 40);
            ctx.lineTo(diagX + 40, diagY + 50);
            ctx.closePath();
            ctx.fill();
            ctx.fillText('Abs', diagX + 5, diagY + 80);

            // Internal conversion (wavy)
            ctx.strokeStyle = '#888';
            ctx.lineWidth = 1;
            ctx.setLineDash([2, 2]);
            ctx.beginPath();
            ctx.moveTo(diagX + 50, diagY + 40);
            ctx.lineTo(diagX + 50, diagY + 55);
            ctx.stroke();
            ctx.setLineDash([]);
            ctx.fillStyle = '#888';
            ctx.font = '8px sans-serif';
            ctx.fillText('IC', diagX + 55, diagY + 50);

            // Fluorescence arrow
            ctx.strokeStyle = fluor.emColor;
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(diagX + 65, diagY + 55);
            ctx.lineTo(diagX + 65, diagY + diagH - 20);
            ctx.stroke();
            ctx.fillStyle = fluor.emColor;
            ctx.beginPath();
            ctx.moveTo(diagX + 60, diagY + diagH - 30);
            ctx.lineTo(diagX + 65, diagY + diagH - 20);
            ctx.lineTo(diagX + 70, diagY + diagH - 30);
            ctx.closePath();
            ctx.fill();
            ctx.fillText('Fluor', diagX + 72, diagY + 120);

            // Stokes shift annotation
            ctx.fillStyle = '#aaa';
            ctx.font = '9px sans-serif';
            const stokes = fluor.emMax - fluor.excMax;
            ctx.fillText(`Stokes: ${stokes} nm`, diagX + 20, diagY + diagH + 15);
        }

        function drawSpectra() {
            const plotX = 100;
            const plotY = height - 180;
            const plotW = width - 450;
            const plotH = 120;

            const fluor = FLUOROPHORES[fluorophoreType];

            ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
            ctx.fillRect(plotX - 10, plotY - 20, plotW + 20, plotH + 50);

            ctx.fillStyle = '#fff';
            ctx.font = '11px sans-serif';
            ctx.fillText('Excitation & Emission Spectra', plotX, plotY - 5);

            // Axes
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(plotX, plotY);
            ctx.lineTo(plotX, plotY + plotH);
            ctx.lineTo(plotX + plotW, plotY + plotH);
            ctx.stroke();

            // Excitation spectrum
            ctx.strokeStyle = fluor.excColor;
            ctx.lineWidth = 2;
            ctx.beginPath();
            for (let lambda = 300; lambda <= 650; lambda += 2) {
                const diff = lambda - fluor.excMax;
                const intensity = Math.exp(-(diff * diff) / (25 * 25));
                const x = plotX + ((lambda - 300) / 350) * plotW;
                const y = plotY + plotH - intensity * (plotH - 10);
                if (lambda === 300) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.stroke();

            // Emission spectrum
            ctx.strokeStyle = fluor.emColor;
            ctx.beginPath();
            for (let lambda = 300; lambda <= 650; lambda += 2) {
                const diff = lambda - fluor.emMax;
                const intensity = Math.exp(-(diff * diff) / (30 * 30));
                const x = plotX + ((lambda - 300) / 350) * plotW;
                const y = plotY + plotH - intensity * (plotH - 10);
                if (lambda === 300) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.stroke();

            // Current excitation wavelength marker
            const excX = plotX + ((excitationWavelength - 300) / 350) * plotW;
            ctx.strokeStyle = '#fff';
            ctx.setLineDash([3, 3]);
            ctx.beginPath();
            ctx.moveTo(excX, plotY);
            ctx.lineTo(excX, plotY + plotH);
            ctx.stroke();
            ctx.setLineDash([]);

            // Legend
            ctx.fillStyle = fluor.excColor;
            ctx.fillRect(plotX + plotW - 100, plotY + 5, 15, 10);
            ctx.fillStyle = '#fff';
            ctx.font = '9px sans-serif';
            ctx.fillText('Excitation', plotX + plotW - 80, plotY + 13);

            ctx.fillStyle = fluor.emColor;
            ctx.fillRect(plotX + plotW - 100, plotY + 20, 15, 10);
            ctx.fillText('Emission', plotX + plotW - 80, plotY + 28);

            // Axis label
            ctx.fillStyle = '#888';
            ctx.fillText('Wavelength (nm)', plotX + plotW / 2 - 30, plotY + plotH + 20);
        }

        function updateStats() {
            const fluor = FLUOROPHORES[fluorophoreType];
            const quenchFactor = 1 / (1 + quencherConc * 0.05);
            const effectiveQY = fluor.quantumYield * quenchFactor;
            const efficiency = getExcitationEfficiency();
            const fluorIntensity = efficiency * effectiveQY * lightIntensity / 100;

            document.getElementById('quantumYield').textContent = effectiveQY.toFixed(2);
            document.getElementById('stokes').textContent = fluor.emMax - fluor.excMax;
            document.getElementById('fluorIntensity').textContent = (fluorIntensity * 100).toFixed(1);
        }

        function animate() {
            step();
            draw();
            requestAnimationFrame(animate);
        }

        document.getElementById('fluorophore').addEventListener('change', e => {
            fluorophoreType = e.target.value;
            const fluor = FLUOROPHORES[fluorophoreType];
            document.getElementById('excitation').value = fluor.excMax;
            excitationWavelength = fluor.excMax;
            document.getElementById('excVal').textContent = excitationWavelength;
            init();
        });

        document.getElementById('excitation').addEventListener('input', e => {
            excitationWavelength = parseInt(e.target.value);
            document.getElementById('excVal').textContent = excitationWavelength;
        });

        document.getElementById('quencher').addEventListener('input', e => {
            quencherConc = parseInt(e.target.value);
            document.getElementById('quenchVal').textContent = quencherConc;
        });

        document.getElementById('intensity').addEventListener('input', e => {
            lightIntensity = parseInt(e.target.value);
            document.getElementById('intensVal').textContent = lightIntensity;
        });

        document.getElementById('reset').addEventListener('click', init);
        document.getElementById('excite').addEventListener('click', excite);

        window.addEventListener('resize', init);

        init();
        animate();
    </script>


    <div id="explainModal" class="modal-overlay">
        <div class="modal">
            <button class="modal-close">&times;</button>
            <h2>üìä Fluorescence</h2>
            <div class="modal-body">
                <p>Chemical reactions transform matter through bond breaking and formation. This simulation models reaction kinetics and molecular dynamics.</p>

                <h3>About This Simulation</h3>
                <p>Implement a fluorophore excitation and emission model with quenching.</p>

                <h3>Key Concepts</h3>
                <ul>
                    <li><strong>Reaction Kinetics:</strong> The rates at which reactions proceed, determined by activation energies and molecular collisions.</li>
                    <li><strong>Equilibrium:</strong> Dynamic balance where forward and reverse reactions occur at equal rates, governed by thermodynamics.</li>
                    <li><strong>Catalysis:</strong> Acceleration of reactions by providing alternative pathways with lower activation energy.</li>
                    <li><strong>Molecular Recognition:</strong> Specific binding between molecules based on complementary shapes and chemical properties.</li>
                </ul>

                <h3>Why It Matters</h3>
                <p>Understanding chemistry is essential for drug development, industrial processes, and environmental protection.</p>

                <h3>How to Explore</h3>
                <ul>
                    <li>Adjust the sliders to modify simulation parameters and observe how the system responds</li>
                    <li>Look for emergent patterns that arise from agent interactions</li>
                    <li>Try extreme parameter values to find phase transitions and tipping points</li>
                    <li>Compare the simulation behavior to real-world phenomena</li>
                </ul>

                <p class="modal-category"><em>Category: Chemistry ‚Äî Exploring chemical reactions and molecular interactions</em></p>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const modal = document.getElementById('explainModal');
        const explainBtn = document.getElementById('explainBtn');
        if (modal && explainBtn) {
            explainBtn.addEventListener('click', function() {
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            });
            modal.querySelector('.modal-close').addEventListener('click', function() {
                modal.classList.remove('active');
                document.body.style.overflow = '';
            });
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.classList.remove('active');
                    document.body.style.overflow = '';
                }
            });
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && modal.classList.contains('active')) {
                    modal.classList.remove('active');
                    document.body.style.overflow = '';
                }
            });
        }
    });
    </script>

</body>
</html>
