<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fourier Circle Drawing</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            overflow: hidden;
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        canvas {
            display: block;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let time = 0;
        const pathX = [];
        const pathY = [];

        // Fourier coefficients for X and Y
        const fourierX = [
            { amp: 100, freq: 1, phase: 0 },
            { amp: 30, freq: 3, phase: Math.PI / 4 },
            { amp: 20, freq: 5, phase: Math.PI / 2 },
            { amp: 10, freq: 7, phase: 0 }
        ];

        const fourierY = [
            { amp: 100, freq: 1, phase: Math.PI / 2 },
            { amp: 40, freq: 2, phase: 0 },
            { amp: 15, freq: 4, phase: Math.PI / 3 },
            { amp: 10, freq: 6, phase: 0 }
        ];

        function drawFourierSeries(x, y, coeffs, isVertical) {
            let posX = x;
            let posY = y;

            for (let i = 0; i < coeffs.length; i++) {
                const prevX = posX;
                const prevY = posY;

                const coeff = coeffs[i];
                const angle = coeff.freq * time + coeff.phase;

                if (isVertical) {
                    posX += coeff.amp * Math.cos(angle);
                    posY += coeff.amp * Math.sin(angle);
                } else {
                    posX += coeff.amp * Math.cos(angle);
                    posY += coeff.amp * Math.sin(angle);
                }

                // Draw circle
                const hue = (i / coeffs.length) * 180 + (isVertical ? 180 : 0);
                ctx.strokeStyle = `hsla(${hue}, 70%, 60%, 0.3)`;
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.arc(prevX, prevY, coeff.amp, 0, Math.PI * 2);
                ctx.stroke();

                // Draw radius
                ctx.strokeStyle = `hsl(${hue}, 70%, 60%)`;
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(prevX, prevY);
                ctx.lineTo(posX, posY);
                ctx.stroke();

                // Draw point
                ctx.fillStyle = '#fff';
                ctx.beginPath();
                ctx.arc(posX, posY, 3, 0, Math.PI * 2);
                ctx.fill();
            }

            return { x: posX, y: posY };
        }

        function animate() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            const startX = canvas.width / 4;
            const startY = canvas.height / 4;

            // Draw X component
            const xResult = drawFourierSeries(startX, canvas.height / 2, fourierX, false);

            // Draw Y component
            const yResult = drawFourierSeries(canvas.width / 2, startY, fourierY, true);

            // Draw guide lines
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.2)';
            ctx.lineWidth = 1;
            ctx.setLineDash([5, 5]);

            ctx.beginPath();
            ctx.moveTo(xResult.x, xResult.y);
            ctx.lineTo(xResult.x, canvas.height - 100);
            ctx.stroke();

            ctx.beginPath();
            ctx.moveTo(yResult.x, yResult.y);
            ctx.lineTo(canvas.width - 100, yResult.y);
            ctx.stroke();

            ctx.setLineDash([]);

            // Draw the actual point
            const finalX = xResult.x;
            const finalY = yResult.y;

            ctx.fillStyle = '#00ffff';
            ctx.beginPath();
            ctx.arc(finalX, finalY, 6, 0, Math.PI * 2);
            ctx.fill();

            // Add to path
            pathX.push(finalX);
            pathY.push(finalY);

            // Draw path
            ctx.strokeStyle = '#00ff88';
            ctx.lineWidth = 3;
            ctx.beginPath();
            for (let i = 0; i < pathX.length; i++) {
                if (i === 0) {
                    ctx.moveTo(pathX[i], pathY[i]);
                } else {
                    ctx.lineTo(pathX[i], pathY[i]);
                }
            }
            ctx.stroke();

            // Limit path length
            if (pathX.length > 500) {
                pathX.shift();
                pathY.shift();
            }

            time += 0.03;

            requestAnimationFrame(animate);
        }

        animate();
    </script>
</body>
</html>
