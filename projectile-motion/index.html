<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projectile Motion</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(to bottom, #1a2a3a 0%, #2a3a4a 50%, #3a4a3a 100%);
            overflow: hidden;
        }

        #canvas {
            display: block;
        }

        .controls {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(26, 42, 58, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid rgba(100, 200, 150, 0.3);
            z-index: 100;
            min-width: 260px;
            color: #e0e0e0;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }

        h1 {
            font-size: 1.3em;
            margin-bottom: 5px;
            color: #64c896;
        }

        .subtitle {
            font-size: 0.8em;
            color: #888;
            margin-bottom: 15px;
        }

        .control-group {
            margin-bottom: 12px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.85em;
            color: #aaa;
        }

        input[type="range"] {
            width: 100%;
            -webkit-appearance: none;
            height: 8px;
            padding: 0;
            background: rgba(50, 80, 70, 0.8);
            border-radius: 4px;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: #64c896;
            border-radius: 50%;
            cursor: pointer;
        }

        .btn-row {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        button {
            flex: 1;
            padding: 12px;
            background: linear-gradient(135deg, #2a8060, #64c896);
            border: none;
            border-radius: 6px;
            color: #fff;
            font-weight: 600;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(100, 200, 150, 0.4);
        }

        .equations {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(26, 42, 58, 0.95);
            backdrop-filter: blur(10px);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(100, 200, 150, 0.3);
            color: #e0e0e0;
            font-family: 'Segoe UI', sans-serif;
        }

        .equations h3 {
            color: #64c896;
            margin-bottom: 10px;
        }

        .formula {
            font-family: 'Georgia', serif;
            color: #fff;
            margin: 5px 0;
            font-size: 0.9em;
        }

        .info {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(26, 42, 58, 0.95);
            backdrop-filter: blur(10px);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(100, 200, 150, 0.3);
            font-size: 0.85em;
            color: #aaa;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            margin: 3px 0;
            gap: 15px;
        }

        .info-value {
            color: #64c896;
            font-family: 'Consolas', monospace;
        }

        .back-link {
            position: fixed;
            bottom: 20px;
            right: 20px;
            color: #64c896;
            text-decoration: none;
            padding: 10px 20px;
            background: rgba(26, 42, 58, 0.95);
            border-radius: 8px;
            border: 1px solid rgba(100, 200, 150, 0.3);
            font-family: 'Segoe UI', sans-serif;
            transition: all 0.3s;
        }

        .back-link:hover {
            background: rgba(100, 200, 150, 0.1);
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>

    <div class="controls">
        <h1>üéØ Projectile Motion</h1>
        <p class="subtitle">Parabolic Trajectory</p>

        <div class="control-group">
            <label>Launch Angle: <span id="angleValue">45</span>¬∞</label>
            <input type="range" id="angle" min="5" max="85" value="45">
        </div>

        <div class="control-group">
            <label>Initial Velocity: <span id="velValue">50</span> m/s</label>
            <input type="range" id="velocity" min="10" max="100" value="50">
        </div>

        <div class="control-group">
            <label>Gravity: <span id="gravValue">9.8</span> m/s¬≤</label>
            <input type="range" id="gravity" min="1" max="20" step="0.1" value="9.8">
        </div>

        <div class="control-group">
            <label>Air Resistance: <span id="dragValue">0.00</span></label>
            <input type="range" id="drag" min="0" max="0.05" step="0.001" value="0">
        </div>

        <div class="btn-row">
            <button onclick="launch()">üöÄ Launch!</button>
        </div>
        <div class="btn-row" style="margin-top: 10px;">
            <button onclick="clearTrails()">Clear Trails</button>
            <button onclick="multiLaunch()">Multi-Angle</button>
        </div>
    </div>

    <div class="equations">
        <h3>Kinematic Equations</h3>
        <div class="formula">x(t) = v‚ÇÄ cos(Œ∏) ¬∑ t</div>
        <div class="formula">y(t) = v‚ÇÄ sin(Œ∏) ¬∑ t - ¬Ωgt¬≤</div>
        <div class="formula" style="margin-top: 10px; color: #64c896;">Range = v‚ÇÄ¬≤ sin(2Œ∏) / g</div>
    </div>

    <div class="info">
        <div class="info-row">
            <span>Max Height:</span>
            <span class="info-value" id="maxHeight">0 m</span>
        </div>
        <div class="info-row">
            <span>Range:</span>
            <span class="info-value" id="range">0 m</span>
        </div>
        <div class="info-row">
            <span>Time of Flight:</span>
            <span class="info-value" id="flightTime">0 s</span>
        </div>
        <div class="info-row">
            <span>Current Speed:</span>
            <span class="info-value" id="speed">0 m/s</span>
        </div>
    </div>

    <a href="../index.html" class="back-link">‚Üê Back to Gallery</a>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        let launchAngle = 45;
        let initialVelocity = 50;
        let gravity = 9.8;
        let dragCoeff = 0;

        const scale = 5; // pixels per meter
        let groundY;
        let launchX, launchY;

        let projectiles = [];
        let trails = [];

        class Projectile {
            constructor(angle, velocity, color = '#64c896') {
                const rad = angle * Math.PI / 180;
                this.x = 0;
                this.y = 0;
                this.vx = velocity * Math.cos(rad);
                this.vy = velocity * Math.sin(rad);
                this.trail = [];
                this.color = color;
                this.active = true;
                this.maxHeight = 0;
                this.time = 0;
            }

            update(dt) {
                if (!this.active) return;

                this.time += dt;

                // Air resistance
                if (dragCoeff > 0) {
                    const speed = Math.sqrt(this.vx * this.vx + this.vy * this.vy);
                    const dragX = -dragCoeff * this.vx * speed;
                    const dragY = -dragCoeff * this.vy * speed;
                    this.vx += dragX * dt;
                    this.vy += dragY * dt;
                }

                // Gravity
                this.vy -= gravity * dt;

                // Update position
                this.x += this.vx * dt;
                this.y += this.vy * dt;

                // Track max height
                if (this.y > this.maxHeight) {
                    this.maxHeight = this.y;
                }

                // Add to trail
                this.trail.push({ x: this.x, y: this.y });
                if (this.trail.length > 500) this.trail.shift();

                // Check ground collision
                if (this.y <= 0 && this.vy < 0) {
                    this.y = 0;
                    this.active = false;

                    // Store final trail
                    trails.push({
                        points: [...this.trail],
                        color: this.color,
                        maxHeight: this.maxHeight,
                        range: this.x,
                        time: this.time
                    });
                }
            }

            draw() {
                // Draw trail
                if (this.trail.length > 1) {
                    ctx.beginPath();
                    ctx.moveTo(launchX + this.trail[0].x * scale, groundY - this.trail[0].y * scale);
                    for (let i = 1; i < this.trail.length; i++) {
                        ctx.lineTo(launchX + this.trail[i].x * scale, groundY - this.trail[i].y * scale);
                    }
                    ctx.strokeStyle = this.color;
                    ctx.lineWidth = 2;
                    ctx.stroke();
                }

                // Draw projectile
                if (this.active) {
                    const px = launchX + this.x * scale;
                    const py = groundY - this.y * scale;

                    // Glow
                    const gradient = ctx.createRadialGradient(px, py, 0, px, py, 15);
                    gradient.addColorStop(0, this.color);
                    gradient.addColorStop(1, 'transparent');
                    ctx.fillStyle = gradient;
                    ctx.beginPath();
                    ctx.arc(px, py, 15, 0, Math.PI * 2);
                    ctx.fill();

                    // Ball
                    ctx.fillStyle = this.color;
                    ctx.beginPath();
                    ctx.arc(px, py, 8, 0, Math.PI * 2);
                    ctx.fill();

                    // Velocity vector
                    ctx.strokeStyle = 'rgba(255,255,255,0.5)';
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.moveTo(px, py);
                    ctx.lineTo(px + this.vx * 0.8, py - this.vy * 0.8);
                    ctx.stroke();
                }
            }
        }

        function resize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            groundY = canvas.height - 80;
            launchX = 100;
            launchY = groundY;
        }

        function launch() {
            projectiles.push(new Projectile(launchAngle, initialVelocity));
        }

        function multiLaunch() {
            const colors = ['#64c896', '#c86464', '#6496c8', '#c8c864', '#c864c8'];
            for (let i = 0; i < 5; i++) {
                const angle = 15 + i * 15; // 15, 30, 45, 60, 75 degrees
                projectiles.push(new Projectile(angle, initialVelocity, colors[i]));
            }
        }

        function clearTrails() {
            trails = [];
            projectiles = [];
        }

        function drawGround() {
            // Sky gradient already in CSS

            // Ground
            ctx.fillStyle = '#2a4a3a';
            ctx.fillRect(0, groundY, canvas.width, canvas.height - groundY);

            // Grass line
            ctx.strokeStyle = '#64c896';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(0, groundY);
            ctx.lineTo(canvas.width, groundY);
            ctx.stroke();

            // Distance markers
            ctx.fillStyle = '#888';
            ctx.font = '12px sans-serif';
            for (let d = 0; d <= 200; d += 20) {
                const x = launchX + d * scale;
                if (x > canvas.width) break;

                ctx.beginPath();
                ctx.moveTo(x, groundY);
                ctx.lineTo(x, groundY + 10);
                ctx.strokeStyle = '#666';
                ctx.lineWidth = 1;
                ctx.stroke();

                ctx.fillText(d + 'm', x - 10, groundY + 25);
            }

            // Height markers
            for (let h = 20; h <= 100; h += 20) {
                const y = groundY - h * scale;
                if (y < 0) break;

                ctx.beginPath();
                ctx.moveTo(launchX - 10, y);
                ctx.lineTo(launchX, y);
                ctx.stroke();

                ctx.fillText(h + 'm', launchX - 40, y + 4);
            }

            // Launch angle indicator
            ctx.save();
            ctx.translate(launchX, groundY);

            ctx.strokeStyle = 'rgba(100, 200, 150, 0.3)';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.arc(0, 0, 50, 0, -launchAngle * Math.PI / 180, true);
            ctx.stroke();

            const rad = launchAngle * Math.PI / 180;
            ctx.strokeStyle = '#64c896';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(0, 0);
            ctx.lineTo(Math.cos(rad) * 80, -Math.sin(rad) * 80);
            ctx.stroke();

            // Arrow head
            ctx.fillStyle = '#64c896';
            ctx.beginPath();
            ctx.moveTo(Math.cos(rad) * 80, -Math.sin(rad) * 80);
            ctx.lineTo(Math.cos(rad - 0.2) * 70, -Math.sin(rad - 0.2) * 70);
            ctx.lineTo(Math.cos(rad + 0.2) * 70, -Math.sin(rad + 0.2) * 70);
            ctx.closePath();
            ctx.fill();

            ctx.restore();

            // Launcher base
            ctx.fillStyle = '#444';
            ctx.fillRect(launchX - 15, groundY - 10, 30, 20);
        }

        function drawStoredTrails() {
            for (const trail of trails) {
                if (trail.points.length > 1) {
                    ctx.beginPath();
                    ctx.moveTo(launchX + trail.points[0].x * scale, groundY - trail.points[0].y * scale);
                    for (let i = 1; i < trail.points.length; i++) {
                        ctx.lineTo(launchX + trail.points[i].x * scale, groundY - trail.points[i].y * scale);
                    }
                    ctx.strokeStyle = trail.color + '60';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                }
            }
        }

        function updateInfo() {
            // Get active projectile or most recent trail
            let maxH = 0, range = 0, time = 0, speed = 0;

            const active = projectiles.find(p => p.active);
            if (active) {
                maxH = active.maxHeight;
                range = active.x;
                time = active.time;
                speed = Math.sqrt(active.vx * active.vx + active.vy * active.vy);
            } else if (trails.length > 0) {
                const last = trails[trails.length - 1];
                maxH = last.maxHeight;
                range = last.range;
                time = last.time;
            }

            document.getElementById('maxHeight').textContent = maxH.toFixed(1) + ' m';
            document.getElementById('range').textContent = range.toFixed(1) + ' m';
            document.getElementById('flightTime').textContent = time.toFixed(2) + ' s';
            document.getElementById('speed').textContent = speed.toFixed(1) + ' m/s';
        }

        // UI handlers
        document.getElementById('angle').addEventListener('input', (e) => {
            launchAngle = parseFloat(e.target.value);
            document.getElementById('angleValue').textContent = launchAngle;
        });

        document.getElementById('velocity').addEventListener('input', (e) => {
            initialVelocity = parseFloat(e.target.value);
            document.getElementById('velValue').textContent = initialVelocity;
        });

        document.getElementById('gravity').addEventListener('input', (e) => {
            gravity = parseFloat(e.target.value);
            document.getElementById('gravValue').textContent = gravity.toFixed(1);
        });

        document.getElementById('drag').addEventListener('input', (e) => {
            dragCoeff = parseFloat(e.target.value);
            document.getElementById('dragValue').textContent = dragCoeff.toFixed(3);
        });

        let lastTime = performance.now();

        function animate() {
            const now = performance.now();
            const dt = Math.min((now - lastTime) / 1000, 0.05);
            lastTime = now;

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            drawGround();
            drawStoredTrails();

            for (const p of projectiles) {
                p.update(dt);
                p.draw();
            }

            // Remove inactive projectiles (keep last one for stats)
            projectiles = projectiles.filter((p, i) => p.active || i === projectiles.length - 1);

            updateInfo();

            requestAnimationFrame(animate);
        }

        // Initialize
        window.reset = clearTrails;
        window.addEventListener('resize', resize);
        resize();
        animate();
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
