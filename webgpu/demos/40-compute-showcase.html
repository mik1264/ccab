<!DOCTYPE html><html><head><meta charset="UTF-8"><title>WebGPU Compute Shader Showcase</title><style>body{margin:0;background:linear-gradient(135deg,#667eea 0%,#764ba2 50%,#f093fb 100%);display:flex;justify-content:center;align-items:center;font-family:Arial,sans-serif}canvas{display:block;border-radius:10px;box-shadow:0 20px 60px rgba(0,0,0,0.3)}</style></head><body><canvas id="c" width="1024" height="1024"></canvas><script>async function init(){if(!navigator.gpu){alert('WebGPU not supported');return}const adapter=await navigator.gpu.requestAdapter();const device=await adapter.requestDevice();const canvas=document.getElementById('c');const context=canvas.getContext('webgpu');const format=navigator.gpu.getPreferredCanvasFormat();context.configure({device,format});const shader=`@group(0)@binding(0)var outputTex:texture_storage_2d<rgba8unorm,write>;@group(0)@binding(1)var<uniform>params:vec4<f32>;fn hash(p:vec2<f32>)->vec2<f32>{var p2=fract(p*vec2<f32>(123.34,456.21));p2+=dot(p2,p2+45.32);return fract(vec2<f32>(p2.x*p2.y,p2.x+p2.y));}fn noise(p:vec2<f32>)->f32{let i=floor(p);let f=fract(p);let u=f*f*(3.0-2.0*f);let a=hash(i);let b=hash(i+vec2<f32>(1.0,0.0));let c=hash(i+vec2<f32>(0.0,1.0));let d=hash(i+vec2<f32>(1.0,1.0));return mix(mix(dot(a,f),dot(b,f-vec2<f32>(1.0,0.0)),u.x),mix(dot(c,f-vec2<f32>(0.0,1.0)),dot(d,f-vec2<f32>(1.0,1.0)),u.x),u.y);}fn fbm(p:vec2<f32>)->f32{var value=0.0;var amplitude=0.5;var frequency=1.0;for(var i=0;i<6;i++){value+=amplitude*noise(p*frequency);frequency*=2.0;amplitude*=0.5;}return value;}fn palette(t:f32)->vec3<f32>{let a=vec3<f32>(0.5,0.5,0.5);let b=vec3<f32>(0.5,0.5,0.5);let c=vec3<f32>(1.0,1.0,1.0);let d=vec3<f32>(0.0,0.33,0.67);return a+b*cos(6.28318*(c*t+d));}@compute @workgroup_size(8,8)fn main(@builtin(global_invocation_id)id:vec3<u32>){let coords=vec2<i32>(id.xy);if(coords.x>=1024||coords.y>=1024){return;}let uv=(vec2<f32>(coords)-512.0)/512.0;let time=params.x;var p=uv*3.0;p+=vec2<f32>(time*0.1,time*0.05);var color=vec3<f32>(0.0);for(var i=0;i<3;i++){p=p*2.0+vec2<f32>(sin(time*0.3),cos(time*0.2));let n=fbm(p+f32(i)*0.5);color+=palette(n+time*0.1+f32(i)*0.3)*0.4;}let dist=length(uv);color*=1.0-dist*0.3;color+=vec3<f32>(0.1,0.2,0.3)*pow(max(0.0,1.0-dist),3.0);let vignette=smoothstep(1.0,0.3,dist);color*=vignette;textureStore(outputTex,coords,vec4<f32>(pow(color,vec3<f32>(1.0/2.2)),1.0));}`;const renderShader=`@group(0)@binding(0)var tex:texture_2d<f32>;@vertex fn vs(@builtin(vertex_index)i:u32)->@builtin(position)vec4<f32>{var pos=array(vec2(-1.0,-1.0),vec2(1.0,-1.0),vec2(-1.0,1.0),vec2(1.0,-1.0),vec2(1.0,1.0),vec2(-1.0,1.0));return vec4<f32>(pos[i],0.0,1.0);}@fragment fn fs(@builtin(position)pos:vec4<f32>)->@location(0)vec4<f32>{return textureLoad(tex,vec2<i32>(pos.xy),0);}`;const texture=device.createTexture({size:[1024,1024],format:'rgba8unorm',usage:GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.TEXTURE_BINDING});const paramsBuffer=device.createBuffer({size:16,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});const computePipeline=device.createComputePipeline({layout:'auto',compute:{module:device.createShaderModule({code:shader}),entryPoint:'main'}});const renderPipeline=device.createRenderPipeline({layout:'auto',vertex:{module:device.createShaderModule({code:renderShader}),entryPoint:'vs'},fragment:{module:device.createShaderModule({code:renderShader}),entryPoint:'fs',targets:[{format}]}});let time=0;function frame(){time+=0.016;device.queue.writeBuffer(paramsBuffer,0,new Float32Array([time,0,0,0]));const computeBG=device.createBindGroup({layout:computePipeline.getBindGroupLayout(0),entries:[{binding:0,resource:texture.createView()},{binding:1,resource:{buffer:paramsBuffer}}]});const renderBG=device.createBindGroup({layout:renderPipeline.getBindGroupLayout(0),entries:[{binding:0,resource:texture.createView()}]});const encoder=device.createCommandEncoder();const compute=encoder.beginComputePass();compute.setPipeline(computePipeline);compute.setBindGroup(0,computeBG);compute.dispatchWorkgroups(128,128);compute.end();const render=encoder.beginRenderPass({colorAttachments:[{view:context.getCurrentTexture().createView(),loadOp:'clear',storeOp:'store'}]});render.setPipeline(renderPipeline);render.setBindGroup(0,renderBG);render.draw(6);render.end();device.queue.submit([encoder.finish()]);requestAnimationFrame(frame);}frame();}init();</script></body></html>
