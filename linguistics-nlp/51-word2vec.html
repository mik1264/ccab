<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word2Vec Explorer</title>
    <style>
        body { margin: 0; font-family: sans-serif; overflow: hidden; background: #fff; }
        canvas { display: block; }
        .search-box { position: absolute; top: 20px; left: 20px; }
        input { padding: 10px; font-size: 16px; border: 1px solid #ccc; border-radius: 4px; }
    </style>
</head>
<body>
    <div class="search-box">
        <input type="text" id="search" placeholder="Search word...">
    </div>
    <canvas id="canvas"></canvas>
    
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        
        // Mock Embeddings (PCA reduced to 2D)
        const words = [
            {w: "king", x: 0.8, y: 0.7, c: "royalty"},
            {w: "queen", x: 0.82, y: 0.75, c: "royalty"},
            {w: "man", x: 0.6, y: 0.6, c: "gender"},
            {w: "woman", x: 0.62, y: 0.65, c: "gender"},
            {w: "apple", x: 0.2, y: 0.3, c: "food"},
            {w: "orange", x: 0.22, y: 0.32, c: "food"},
            {w: "juice", x: 0.25, y: 0.35, c: "food"},
            {w: "computer", x: -0.5, y: -0.2, c: "tech"},
            {w: "keyboard", x: -0.55, y: -0.25, c: "tech"},
            {w: "mouse", x: -0.52, y: -0.28, c: "tech"}
        ];

        let width, height;
        let transform = { x: 0, y: 0, k: 1 };
        let dragStart = null;

        function resize() {
            width = window.innerWidth;
            height = window.innerHeight;
            canvas.width = width;
            canvas.height = height;
            draw();
        }
        window.addEventListener('resize', resize);

        function toScreen(x, y) {
            return {
                x: width/2 + x * 300 * transform.k + transform.x,
                y: height/2 - y * 300 * transform.k + transform.y
            };
        }

        function draw() {
            ctx.fillStyle = '#fff';
            ctx.fillRect(0, 0, width, height);
            
            // Draw axes
            const center = toScreen(0,0);
            ctx.strokeStyle = '#eee';
            ctx.beginPath();
            ctx.moveTo(0, center.y); ctx.lineTo(width, center.y);
            ctx.moveTo(center.x, 0); ctx.lineTo(center.x, height);
            ctx.stroke();

            // Draw Analogy Line (King -> Queen)
            const k = toScreen(0.8, 0.7);
            const q = toScreen(0.82, 0.75);
            ctx.strokeStyle = '#ddd';
            ctx.beginPath();
            ctx.moveTo(k.x, k.y);
            ctx.lineTo(q.x, q.y);
            ctx.stroke();

            words.forEach(word => {
                const p = toScreen(word.x, word.y);
                
                ctx.fillStyle = getColor(word.c);
                ctx.beginPath();
                ctx.arc(p.x, p.y, 5, 0, Math.PI*2);
                ctx.fill();
                
                ctx.fillStyle = '#333';
                ctx.font = '12px Arial';
                ctx.fillText(word.w, p.x + 8, p.y + 4);
            });
        }

        function getColor(cat) {
            const map = { 'royalty': '#e11d48', 'gender': '#2563eb', 'food': '#16a34a', 'tech': '#9333ea' };
            return map[cat] || '#666';
        }

        // Pan/Zoom
        canvas.addEventListener('mousedown', e => dragStart = {x: e.clientX - transform.x, y: e.clientY - transform.y});
        canvas.addEventListener('mousemove', e => {
            if(dragStart) {
                transform.x = e.clientX - dragStart.x;
                transform.y = e.clientY - dragStart.y;
                draw();
            }
        });
        canvas.addEventListener('mouseup', () => dragStart = null);
        canvas.addEventListener('wheel', e => {
            e.preventDefault();
            transform.k *= e.deltaY > 0 ? 0.9 : 1.1;
            draw();
        });

        // Search highlight
        document.getElementById('search').addEventListener('input', e => {
            const term = e.target.value.toLowerCase();
            words.forEach(w => w.highlight = w.w.includes(term));
            draw();
        });

        resize();
    </script>
</body>
</html>
