<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hexagon Pack - Satisfying Animations - CCAB</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #0a0e1a;
            overflow: hidden;
        }
        canvas { display: block; }
        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            padding: 10px 20px;
            background: rgba(254, 250, 224, 0.9);
            color: #606C38;
            text-decoration: none;
            border-radius: 25px;
            font-family: 'Segoe UI', sans-serif;
            font-weight: 600;
            font-size: 14px;
            z-index: 1000;
            transition: all 0.3s ease;
            border: 2px solid rgba(138, 154, 91, 0.3);
        }
        .back-link:hover {
            background: #FEFAE0;
            transform: translateX(-5px);
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back</a>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <script>
        // Hexagon Pack - Satisfying hexagonal tessellation with wave animation

        const LOOP_DURATION = 8000; // 8 second loop
        let hexSize = 40;
        let hexagons = [];
        let startTime;

        class Hexagon {
            constructor(x, y, row, col) {
                this.x = x;
                this.y = y;
                this.row = row;
                this.col = col;
                this.baseSize = hexSize;
                this.currentSize = hexSize;
                this.rotation = 0;
                // Calculate distance from center for wave effect
                this.distFromCenter = 0;
                // Base hue based on position
                this.baseHue = (row * 10 + col * 15) % 360;
            }

            updateDistFromCenter(centerX, centerY) {
                this.distFromCenter = dist(this.x, this.y, centerX, centerY);
            }

            update(time, maxDist) {
                // Normalized time 0-1
                const t = (time % LOOP_DURATION) / LOOP_DURATION;

                // Wave travels outward from center
                const wavePhase = (this.distFromCenter / maxDist) * TWO_PI;
                const wave = sin(t * TWO_PI * 2 - wavePhase);

                // Size pulsing with wave
                this.currentSize = this.baseSize * (0.8 + 0.3 * (wave * 0.5 + 0.5));

                // Subtle rotation
                this.rotation = wave * 0.15;

                // Hue shift with wave
                this.hue = (this.baseHue + wave * 30 + t * 60) % 360;

                // Brightness based on wave
                this.brightness = 70 + wave * 20;
            }

            draw() {
                push();
                translate(this.x, this.y);
                rotate(this.rotation);

                // Draw hexagon
                const s = this.currentSize;

                // Glow
                noStroke();
                for (let r = s + 15; r > s; r -= 3) {
                    fill(this.hue, 60, this.brightness, map(r, s + 15, s, 0, 15));
                    this.drawHexShape(r * 0.95);
                }

                // Main hexagon
                fill(this.hue, 50, this.brightness);
                stroke(this.hue, 40, this.brightness + 15);
                strokeWeight(1.5);
                this.drawHexShape(s * 0.9);

                // Inner highlight
                fill(this.hue, 30, this.brightness + 20, 50);
                noStroke();
                this.drawHexShape(s * 0.5);

                pop();
            }

            drawHexShape(size) {
                beginShape();
                for (let i = 0; i < 6; i++) {
                    const angle = (PI / 3) * i - PI / 6;
                    vertex(cos(angle) * size, sin(angle) * size);
                }
                endShape(CLOSE);
            }
        }

        function createHexGrid() {
            hexagons = [];
            const h = hexSize * sqrt(3);
            const w = hexSize * 2;

            // Calculate grid bounds
            const cols = ceil(width / (w * 0.75)) + 2;
            const rows = ceil(height / h) + 2;

            // Offset to center the grid
            const offsetX = -(cols * w * 0.75 - width) / 2;
            const offsetY = -(rows * h - height) / 2;

            for (let row = -1; row < rows; row++) {
                for (let col = -1; col < cols; col++) {
                    const x = col * w * 0.75 + offsetX;
                    const y = row * h + (col % 2 === 0 ? 0 : h / 2) + offsetY;
                    hexagons.push(new Hexagon(x, y, row, col));
                }
            }

            // Update distance from center for all hexagons
            const centerX = width / 2;
            const centerY = height / 2;
            let maxDist = 0;
            for (let hex of hexagons) {
                hex.updateDistFromCenter(centerX, centerY);
                if (hex.distFromCenter > maxDist) {
                    maxDist = hex.distFromCenter;
                }
            }
            return maxDist;
        }

        let maxDist;

        function setup() {
            createCanvas(windowWidth, windowHeight);
            colorMode(HSB, 360, 100, 100, 100);
            startTime = millis();

            // Adjust hex size based on screen
            hexSize = min(width, height) / 20;

            maxDist = createHexGrid();
        }

        function draw() {
            background(230, 30, 12);

            const time = millis() - startTime;

            // Update and draw all hexagons
            for (let hex of hexagons) {
                hex.update(time, maxDist);
            }

            // Draw in order for proper overlapping
            for (let hex of hexagons) {
                hex.draw();
            }
        }

        function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
            hexSize = min(width, height) / 20;
            maxDist = createHexGrid();
        }
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
