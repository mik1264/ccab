<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pendulum Wave - Satisfying Animations - CCAB</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #0a0e1a;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        canvas { display: block; }
        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            padding: 10px 20px;
            background: rgba(254, 250, 224, 0.9);
            color: #606C38;
            text-decoration: none;
            border-radius: 25px;
            font-family: 'Segoe UI', sans-serif;
            font-weight: 600;
            font-size: 14px;
            z-index: 1000;
            transition: all 0.3s ease;
            border: 2px solid rgba(138, 154, 91, 0.3);
        }
        .back-link:hover {
            background: #FEFAE0;
            transform: translateX(-5px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        #loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #DDA15E;
            font-family: 'Segoe UI', sans-serif;
            text-align: center;
            z-index: 1000;
        }
        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255,255,255,0.1);
            border-top-color: #DDA15E;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back</a>
    <div id="loading">
        <div class="spinner"></div>
        <p>Loading...</p>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <script>
        // Pendulum Wave - A mesmerizing demonstration of harmonic motion
        // Multiple pendulums with slightly different periods create beautiful wave patterns

        const NUM_PENDULUMS = 15;
        const LOOP_DURATION = 60000; // 60 seconds for full cycle
        const BASE_OSCILLATIONS = 51; // Base number of oscillations in cycle

        let pendulums = [];
        let pivotY;
        let startTime;

        class Pendulum {
            constructor(index, total) {
                this.index = index;
                // Each pendulum completes a different number of oscillations
                // Creating the wave effect when they go in and out of phase
                this.oscillations = BASE_OSCILLATIONS + index;
                this.period = LOOP_DURATION / this.oscillations;
                this.maxAngle = PI / 4; // 45 degrees max swing

                // Colors: rainbow gradient
                this.hue = map(index, 0, total - 1, 0, 300);

                // Calculate length based on period (T = 2*PI*sqrt(L/g))
                // Normalized for visual appeal
                this.length = map(index, 0, total - 1, 150, 350);
            }

            update(time) {
                // Simple harmonic motion
                const phase = (time % this.period) / this.period;
                this.angle = this.maxAngle * cos(phase * TWO_PI);
            }

            draw(x) {
                const bobX = x + sin(this.angle) * this.length;
                const bobY = pivotY + cos(this.angle) * this.length;

                // Draw string
                stroke(100, 100, 100, 150);
                strokeWeight(2);
                line(x, pivotY, bobX, bobY);

                // Draw bob with glow
                noStroke();

                // Glow effect
                for (let r = 30; r > 0; r -= 5) {
                    fill(this.hue, 80, 90, map(r, 30, 0, 5, 50));
                    ellipse(bobX, bobY, r);
                }

                // Main bob
                fill(this.hue, 70, 95);
                ellipse(bobX, bobY, 20);

                // Highlight
                fill(0, 0, 100, 50);
                ellipse(bobX - 3, bobY - 3, 8);
            }
        }

        function setup() {
            createCanvas(windowWidth, windowHeight);
            colorMode(HSB, 360, 100, 100, 100);
            document.getElementById('loading').style.display = 'none';

            pivotY = height * 0.15;
            startTime = millis();

            // Create pendulums
            for (let i = 0; i < NUM_PENDULUMS; i++) {
                pendulums.push(new Pendulum(i, NUM_PENDULUMS));
            }
        }

        function draw() {
            // Dark gradient background
            background(220, 30, 8);

            const time = millis() - startTime;
            const spacing = width / (NUM_PENDULUMS + 1);

            // Draw pivot bar
            stroke(40, 20, 40);
            strokeWeight(8);
            line(spacing * 0.5, pivotY, width - spacing * 0.5, pivotY);

            // Draw pivot points
            fill(40, 20, 50);
            noStroke();
            for (let i = 0; i < NUM_PENDULUMS; i++) {
                const x = spacing * (i + 1);
                ellipse(x, pivotY, 12);
            }

            // Update and draw pendulums
            for (let i = 0; i < NUM_PENDULUMS; i++) {
                const x = spacing * (i + 1);
                pendulums[i].update(time);
                pendulums[i].draw(x);
            }

            // Draw floor reflection hint
            noStroke();
            for (let i = 0; i < NUM_PENDULUMS; i++) {
                const x = spacing * (i + 1);
                const bobX = x + sin(pendulums[i].angle) * pendulums[i].length;
                const bobY = pivotY + cos(pendulums[i].angle) * pendulums[i].length;

                // Reflection
                fill(pendulums[i].hue, 50, 50, 10);
                ellipse(bobX, height - 50 + (height - bobY) * 0.1, 30, 8);
            }
        }

        // Expose for enhance.js keyboard shortcuts
        window.reset = function() {
            pendulums = [];
            startTime = millis();
            for (let i = 0; i < NUM_PENDULUMS; i++) {
                pendulums.push(new Pendulum(i, NUM_PENDULUMS));
            }
        };

        function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
            pivotY = height * 0.15;
        }
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
