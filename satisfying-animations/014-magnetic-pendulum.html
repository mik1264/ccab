<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magnetic Pendulum - Satisfying Animations - CCAB</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #0a0e1a; overflow: hidden; }
        canvas { display: block; }
        .back-link { position: fixed; top: 20px; left: 20px; padding: 10px 20px; background: rgba(254, 250, 224, 0.9); color: #606C38; text-decoration: none; border-radius: 25px; font-family: 'Segoe UI', sans-serif; font-weight: 600; font-size: 14px; z-index: 1000; }
        .back-link:hover { background: #FEFAE0; transform: translateX(-5px); }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back</a>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <script>
        let pendulumX, pendulumY;
        let velX = 0, velY = 0;
        let magnets = [];
        let trail = [];

        function setup() {
            createCanvas(windowWidth, windowHeight);
            colorMode(HSB, 360, 100, 100, 100);
            resetPendulum();

            // Create magnets in triangle
            const cx = width / 2, cy = height / 2;
            const r = min(width, height) * 0.25;
            for (let i = 0; i < 3; i++) {
                const angle = i * TWO_PI / 3 - HALF_PI;
                magnets.push({
                    x: cx + cos(angle) * r,
                    y: cy + sin(angle) * r,
                    hue: i * 120
                });
            }
        }

        function resetPendulum() {
            pendulumX = width / 2 + random(-50, 50);
            pendulumY = height / 2 + random(-50, 50);
            velX = random(-2, 2);
            velY = random(-2, 2);
            trail = [];
        }

        function draw() {
            background(230, 30, 10, 20);

            // Draw magnets
            for (let m of magnets) {
                // Glow
                for (let r = 60; r > 30; r -= 5) {
                    fill(m.hue, 70, 80, map(r, 60, 30, 5, 0));
                    noStroke();
                    ellipse(m.x, m.y, r);
                }
                fill(m.hue, 60, 85);
                stroke(m.hue, 50, 70);
                strokeWeight(2);
                ellipse(m.x, m.y, 30);
            }

            // Physics
            const damping = 0.995;
            const springK = 0.001;
            const magnetStrength = 500;

            // Spring force to center
            const dx = width/2 - pendulumX;
            const dy = height/2 - pendulumY;
            velX += dx * springK;
            velY += dy * springK;

            // Magnetic forces
            for (let m of magnets) {
                const mx = m.x - pendulumX;
                const my = m.y - pendulumY;
                const dist = sqrt(mx*mx + my*my);
                if (dist > 10) {
                    const force = magnetStrength / (dist * dist);
                    velX += (mx / dist) * force;
                    velY += (my / dist) * force;
                }
            }

            velX *= damping;
            velY *= damping;
            pendulumX += velX;
            pendulumY += velY;

            // Trail
            trail.push({x: pendulumX, y: pendulumY});
            if (trail.length > 200) trail.shift();

            // Draw trail
            noFill();
            for (let i = 1; i < trail.length; i++) {
                const alpha = map(i, 0, trail.length, 0, 80);
                stroke(40, 60, 90, alpha);
                strokeWeight(2);
                line(trail[i-1].x, trail[i-1].y, trail[i].x, trail[i].y);
            }

            // Draw pendulum
            fill(40, 70, 95);
            noStroke();
            for (let r = 30; r > 15; r -= 3) {
                fill(40, 70, 95, map(r, 30, 15, 10, 0));
                ellipse(pendulumX, pendulumY, r);
            }
            fill(40, 60, 95);
            stroke(40, 50, 80);
            strokeWeight(2);
            ellipse(pendulumX, pendulumY, 20);

            // Reset occasionally
            if (frameCount % 600 === 0) resetPendulum();
        }

        function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
            magnets = [];
            const cx = width / 2, cy = height / 2;
            const r = min(width, height) * 0.25;
            for (let i = 0; i < 3; i++) {
                const angle = i * TWO_PI / 3 - HALF_PI;
                magnets.push({x: cx + cos(angle) * r, y: cy + sin(angle) * r, hue: i * 120});
            }
            resetPendulum();
        }
    </script>
</body>
</html>
