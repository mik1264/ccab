<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lissajous - Satisfying Animations - CCAB</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #0a0e1a; overflow: hidden; }
        canvas { display: block; }
        .back-link { position: fixed; top: 20px; left: 20px; padding: 10px 20px; background: rgba(254, 250, 224, 0.9); color: #606C38; text-decoration: none; border-radius: 25px; font-family: 'Segoe UI', sans-serif; font-weight: 600; font-size: 14px; z-index: 1000; }
        .back-link:hover { background: #FEFAE0; transform: translateX(-5px); }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back</a>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <script>
        let radius;
        let trail = [];
        const maxTrail = 800;

        // Lissajous configurations (a, b, delta)
        const configs = [
            { a: 3, b: 2, delta: PI / 2 },
            { a: 5, b: 4, delta: PI / 4 },
            { a: 3, b: 4, delta: PI / 2 },
            { a: 5, b: 6, delta: PI / 3 },
            { a: 7, b: 6, delta: PI / 2 },
            { a: 9, b: 8, delta: PI / 4 }
        ];
        let currentConfig = 0;

        function setup() {
            createCanvas(windowWidth, windowHeight);
            colorMode(HSB, 360, 100, 100, 100);
            radius = min(width, height) * 0.35;
        }

        function draw() {
            background(230, 30, 10);

            const time = millis();
            const cycleDuration = 6000;
            const cycleTime = time % cycleDuration;

            // Switch config every cycle
            const newConfig = floor(time / cycleDuration) % configs.length;
            if (newConfig !== currentConfig) {
                currentConfig = newConfig;
                trail = [];
            }

            const config = configs[currentConfig];

            translate(width / 2, height / 2);

            // Draw guide axes
            stroke(230, 30, 25);
            strokeWeight(1);
            line(-radius - 20, 0, radius + 20, 0);
            line(0, -radius - 20, 0, radius + 20);

            // Calculate Lissajous point
            const t = cycleTime / cycleDuration * TWO_PI * 2;

            const x = radius * sin(config.a * t + config.delta);
            const y = radius * sin(config.b * t);

            // Add to trail
            trail.push({ x, y, time: time });

            // Remove old trail points
            while (trail.length > maxTrail) {
                trail.shift();
            }

            // Draw trail with gradient
            noFill();
            strokeWeight(2);

            beginShape();
            for (let i = 0; i < trail.length; i++) {
                const p = trail[i];
                const age = (trail.length - i) / trail.length;
                const hue = (i * 0.5 + time * 0.02) % 360;
                const alpha = (1 - age * 0.9) * 100;

                stroke(hue, 60, 70, alpha);
                vertex(p.x, p.y);
            }
            endShape();

            // Draw moving point
            const pointSize = 12 + sin(time * 0.01) * 3;

            // Glow
            for (let i = 3; i > 0; i--) {
                fill(45, 60, 80, 30 / i);
                noStroke();
                ellipse(x, y, pointSize * i * 1.5);
            }

            // Core
            fill(45, 70, 95);
            noStroke();
            ellipse(x, y, pointSize);

            // Draw oscillating guides on axes
            const guideAlpha = 40;

            // X-axis guide
            stroke(0, 60, 70, guideAlpha);
            strokeWeight(1);
            line(x, 0, x, y);

            fill(0, 60, 70, guideAlpha);
            noStroke();
            ellipse(x, 0, 8);

            // Y-axis guide
            stroke(200, 60, 70, guideAlpha);
            strokeWeight(1);
            line(0, y, x, y);

            fill(200, 60, 70, guideAlpha);
            noStroke();
            ellipse(0, y, 8);

            // Display ratio
            fill(0, 0, 100, 50);
            noStroke();
            textAlign(CENTER, CENTER);
            textSize(14);
            text(`${config.a}:${config.b}`, 0, radius + 35);
        }

        function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
            radius = min(width, height) * 0.35;
            trail = [];
        }
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
