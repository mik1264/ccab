<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spinning Tops - Satisfying Animations - CCAB</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #0a0e1a; overflow: hidden; }
        canvas { display: block; }
        .back-link {
            position: fixed; top: 20px; left: 20px; padding: 10px 20px;
            background: rgba(254, 250, 224, 0.9); color: #606C38;
            text-decoration: none; border-radius: 25px; font-family: 'Segoe UI', sans-serif;
            font-weight: 600; font-size: 14px; z-index: 1000;
        }
        .back-link:hover { background: #FEFAE0; transform: translateX(-5px); }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back</a>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <script>
        const NUM_TOPS = 5;
        let tops = [];
        let startTime;

        class SpinningTop {
            constructor(x, y, size, hue, speed) {
                this.x = x;
                this.y = y;
                this.size = size;
                this.hue = hue;
                this.speed = speed;
                this.rotation = random(TWO_PI);
                this.wobble = 0;
            }

            update(time) {
                this.rotation = time * this.speed;
                this.wobble = sin(time * 2 + this.hue) * 0.05;
            }

            draw() {
                push();
                translate(this.x, this.y);

                // Shadow
                fill(0, 0, 0, 20);
                noStroke();
                ellipse(this.size * 0.1, this.size * 0.05, this.size * 1.2, this.size * 0.3);

                // Wobble effect
                rotate(this.wobble);

                // Top body (cone shape using ellipses)
                for (let i = 0; i < 20; i++) {
                    const t = i / 20;
                    const y = -this.size * 0.8 * t;
                    const w = this.size * (1 - t * 0.7);
                    const h = w * 0.3;
                    const hueShift = sin(this.rotation + t * TWO_PI) * 20;
                    fill(this.hue + hueShift, 60, 80 - t * 20);
                    noStroke();
                    ellipse(0, y, w, h);
                }

                // Spinning pattern on top
                push();
                translate(0, -this.size * 0.75);
                rotate(this.rotation);

                for (let i = 0; i < 6; i++) {
                    rotate(PI / 3);
                    fill(this.hue + i * 30, 70, 90);
                    triangle(0, 0, -this.size * 0.15, -this.size * 0.25, this.size * 0.15, -this.size * 0.25);
                }

                // Center dot
                fill(0, 0, 100);
                ellipse(0, 0, this.size * 0.1);
                pop();

                // Tip
                fill(40, 30, 50);
                triangle(-this.size * 0.05, 0, this.size * 0.05, 0, 0, this.size * 0.2);

                pop();
            }
        }

        function setup() {
            createCanvas(windowWidth, windowHeight);
            colorMode(HSB, 360, 100, 100, 100);
            startTime = millis();

            const baseSize = min(width, height) * 0.12;
            const spacing = width / (NUM_TOPS + 1);

            for (let i = 0; i < NUM_TOPS; i++) {
                tops.push(new SpinningTop(
                    spacing * (i + 1),
                    height * 0.6,
                    baseSize * (0.8 + random(0.4)),
                    (i * 60 + 180) % 360,
                    2 + i * 0.5
                ));
            }
        }

        function draw() {
            background(230, 30, 12);

            // Floor
            fill(230, 20, 15);
            noStroke();
            rect(0, height * 0.7, width, height * 0.3);

            // Floor shine
            fill(230, 15, 18);
            ellipse(width/2, height * 0.75, width * 0.8, height * 0.1);

            const time = (millis() - startTime) * 0.001;

            for (let top of tops) {
                top.update(time);
                top.draw();
            }
        }

        function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
            tops = [];
            const baseSize = min(width, height) * 0.12;
            const spacing = width / (NUM_TOPS + 1);
            for (let i = 0; i < NUM_TOPS; i++) {
                tops.push(new SpinningTop(spacing * (i + 1), height * 0.6, baseSize * (0.8 + random(0.4)), (i * 60 + 180) % 360, 2 + i * 0.5));
            }
        }
    </script>
</body>
</html>
