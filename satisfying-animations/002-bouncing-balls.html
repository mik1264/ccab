<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bouncing Balls - Satisfying Animations - CCAB</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #0a0e1a;
            overflow: hidden;
        }
        canvas { display: block; }
        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            padding: 10px 20px;
            background: rgba(254, 250, 224, 0.9);
            color: #606C38;
            text-decoration: none;
            border-radius: 25px;
            font-family: 'Segoe UI', sans-serif;
            font-weight: 600;
            font-size: 14px;
            z-index: 1000;
            transition: all 0.3s ease;
            border: 2px solid rgba(138, 154, 91, 0.3);
        }
        .back-link:hover {
            background: #FEFAE0;
            transform: translateX(-5px);
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back</a>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <script>
        // Bouncing Balls - Phase-shifted bouncing creates mesmerizing wave patterns

        const NUM_BALLS = 20;
        const LOOP_DURATION = 4000; // 4 seconds per loop

        let balls = [];
        let startTime;

        class Ball {
            constructor(index, total) {
                this.index = index;
                // Phase offset creates the wave effect
                this.phase = (index / total) * TWO_PI;
                this.baseY = 0;
                this.amplitude = 0;

                // Color gradient
                this.hue = map(index, 0, total - 1, 180, 320);
                this.size = 30;
            }

            update(time, floorY) {
                // Normalized time 0-1
                const t = ((time % LOOP_DURATION) / LOOP_DURATION);

                // Sinusoidal motion with phase offset
                // Using abs(sin) to simulate bouncing
                const bounce = abs(sin((t * TWO_PI * 2) + this.phase));

                // Ease the bounce for more natural feel
                const eased = pow(bounce, 0.7);

                this.amplitude = height * 0.5;
                this.baseY = floorY;
                this.y = this.baseY - eased * this.amplitude;

                // Squash when near floor
                this.squash = map(eased, 0, 0.1, 0.6, 1);
                this.squash = constrain(this.squash, 0.6, 1);
            }

            draw(x) {
                push();
                translate(x, this.y);

                // Shadow on floor
                noStroke();
                const shadowY = this.baseY - this.y;
                const shadowScale = map(shadowY, 0, this.amplitude, 1, 0.3);
                fill(0, 0, 0, 30 * shadowScale);
                ellipse(0, this.baseY - this.y + 10, this.size * 1.5 * shadowScale, 8 * shadowScale);

                // Ball glow
                for (let r = this.size * 2; r > this.size; r -= 4) {
                    fill(this.hue, 70, 80, map(r, this.size * 2, this.size, 0, 20));
                    ellipse(0, 0, r, r * this.squash);
                }

                // Main ball with squash
                fill(this.hue, 70, 90);
                ellipse(0, 0, this.size, this.size * this.squash);

                // Highlight
                fill(0, 0, 100, 60);
                ellipse(-this.size * 0.15, -this.size * 0.15 * this.squash, this.size * 0.3, this.size * 0.25 * this.squash);

                pop();
            }
        }

        function setup() {
            createCanvas(windowWidth, windowHeight);
            colorMode(HSB, 360, 100, 100, 100);

            startTime = millis();

            for (let i = 0; i < NUM_BALLS; i++) {
                balls.push(new Ball(i, NUM_BALLS));
            }
        }

        function draw() {
            // Gradient background
            background(230, 40, 10);

            const time = millis() - startTime;
            const spacing = width / (NUM_BALLS + 1);
            const floorY = height * 0.85;

            // Draw floor
            noStroke();
            fill(230, 30, 15);
            rect(0, floorY + 20, width, height - floorY);

            // Floor line
            stroke(230, 20, 25);
            strokeWeight(3);
            line(0, floorY + 20, width, floorY + 20);

            // Update and draw balls
            for (let i = 0; i < NUM_BALLS; i++) {
                const x = spacing * (i + 1);
                balls[i].update(time, floorY);
                balls[i].draw(x);
            }
        }

        function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
        }

        window.reset = function() { startTime = millis(); };
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
