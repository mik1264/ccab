<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Combustion Reactions - Chemistry</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); color: #eee; min-height: 100vh; padding: 20px; }
        .back-link { position: fixed; top: 20px; left: 20px; color: #60a5fa; text-decoration: none; font-weight: 600; padding: 8px 16px; background: rgba(0,0,0,0.3); border-radius: 20px; z-index: 100; }
        h1 { text-align: center; margin: 40px 0 10px; font-size: 2.2em; color: #60a5fa; }
        .subtitle { text-align: center; opacity: 0.8; margin-bottom: 20px; }
        .container { max-width: 1200px; margin: 0 auto; display: grid; grid-template-columns: 1fr 300px; gap: 20px; }
        .panel { background: rgba(255,255,255,0.05); border-radius: 12px; padding: 25px; }
        .info-box { background: rgba(96, 165, 250, 0.1); border: 1px solid rgba(96, 165, 250, 0.3); border-radius: 8px; padding: 15px; margin-bottom: 20px; font-size: 0.85em; line-height: 1.6; }
        h3 { color: #60a5fa; margin-bottom: 15px; }
        canvas { width: 100%; border-radius: 8px; }
        .control-group { margin: 15px 0; }
        .control-group label { display: block; margin-bottom: 5px; }
        .control-group input, .control-group select { width: 100%; }
        .value-display { color: #60a5fa; font-family: monospace; }
        button { width: 100%; padding: 12px; margin: 8px 0; border: none; border-radius: 8px; font-size: 1em; font-weight: 600; cursor: pointer; }
        .btn-ignite { background: linear-gradient(135deg, #f87171, #facc15); color: #1a1a2e; }
        .btn-secondary { background: rgba(255,255,255,0.1); color: #fff; }
        .energy-display { font-size: 2em; text-align: center; padding: 15px; background: linear-gradient(135deg, rgba(248, 113, 113, 0.2), rgba(250, 204, 21, 0.2)); border-radius: 12px; margin: 15px 0; }
        .flame-triangle { display: flex; justify-content: center; gap: 10px; margin: 15px 0; }
        .triangle-item { text-align: center; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 8px; flex: 1; }
        .triangle-item.active { background: rgba(248, 113, 113, 0.3); border: 1px solid #f87171; }
        @media (max-width: 900px) { .container { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Back</a>
    <h1>Combustion Reactions</h1>
    <p class="subtitle">Fire chemistry and energy release</p>

    <div class="container">
        <div class="panel">
            <canvas id="canvas" width="800" height="500"></canvas>
        </div>

        <div class="panel">
            <div class="info-box">
                <strong>Combustion:</strong>
                A rapid oxidation reaction that releases heat and light.
                Requires fuel, oxygen, and ignition temperature.
                Complete combustion produces CO‚ÇÇ and H‚ÇÇO.
            </div>

            <div class="energy-display" id="energyDisplay">
                üî• 0 kJ released
            </div>

            <h3>Fire Triangle</h3>
            <div class="flame-triangle">
                <div class="triangle-item" id="fuelItem">‚õΩ Fuel</div>
                <div class="triangle-item" id="oxygenItem">üí® O‚ÇÇ</div>
                <div class="triangle-item" id="heatItem">üå°Ô∏è Heat</div>
            </div>

            <div class="control-group">
                <label>Fuel Type:</label>
                <select id="fuelSelect" onchange="updateFuel()">
                    <option value="methane">Methane (CH‚ÇÑ) - Natural Gas</option>
                    <option value="propane">Propane (C‚ÇÉH‚Çà) - LPG</option>
                    <option value="octane">Octane (C‚ÇàH‚ÇÅ‚Çà) - Gasoline</option>
                    <option value="ethanol">Ethanol (C‚ÇÇH‚ÇÖOH) - Alcohol</option>
                    <option value="hydrogen">Hydrogen (H‚ÇÇ)</option>
                </select>
            </div>

            <div class="control-group">
                <label>Fuel Amount: <span class="value-display" id="fuelVal">50%</span></label>
                <input type="range" id="fuelSlider" min="0" max="100" value="50" oninput="updateParams()">
            </div>

            <div class="control-group">
                <label>Oxygen Level: <span class="value-display" id="oxygenVal">21%</span></label>
                <input type="range" id="oxygenSlider" min="0" max="100" value="21" oninput="updateParams()">
            </div>

            <div class="control-group">
                <label>Temperature: <span class="value-display" id="tempVal">25¬∞C</span></label>
                <input type="range" id="tempSlider" min="0" max="1000" value="25" oninput="updateParams()">
            </div>

            <button class="btn-ignite" onclick="ignite()">üî• IGNITE</button>
            <button class="btn-secondary" onclick="extinguish()">üßØ Extinguish</button>
            <button class="btn-secondary" onclick="resetSim()">Reset</button>

            <h3 style="margin-top: 15px;">Reaction Data</h3>
            <div style="font-size: 0.9em;">
                <div style="display: flex; justify-content: space-between; padding: 3px 0;">
                    <span>Equation:</span><span class="value-display" id="eqVal">CH‚ÇÑ + 2O‚ÇÇ ‚Üí CO‚ÇÇ + 2H‚ÇÇO</span>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 3px 0;">
                    <span>ŒîH (enthalpy):</span><span class="value-display" id="enthalpyVal">-890 kJ/mol</span>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 3px 0;">
                    <span>Ignition Temp:</span><span class="value-display" id="ignitionVal">580¬∞C</span>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 3px 0;">
                    <span>Flame Temp:</span><span class="value-display" id="flameVal">1950¬∞C</span>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 3px 0;">
                    <span>Combustion:</span><span class="value-display" id="statusVal">Ready</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        const fuels = {
            methane: {
                name: 'Methane',
                formula: 'CH‚ÇÑ',
                equation: 'CH‚ÇÑ + 2O‚ÇÇ ‚Üí CO‚ÇÇ + 2H‚ÇÇO',
                enthalpy: -890,
                ignitionTemp: 580,
                flameTemp: 1950,
                color: '#60a5fa'
            },
            propane: {
                name: 'Propane',
                formula: 'C‚ÇÉH‚Çà',
                equation: 'C‚ÇÉH‚Çà + 5O‚ÇÇ ‚Üí 3CO‚ÇÇ + 4H‚ÇÇO',
                enthalpy: -2220,
                ignitionTemp: 470,
                flameTemp: 1980,
                color: '#4ade80'
            },
            octane: {
                name: 'Octane',
                formula: 'C‚ÇàH‚ÇÅ‚Çà',
                equation: '2C‚ÇàH‚ÇÅ‚Çà + 25O‚ÇÇ ‚Üí 16CO‚ÇÇ + 18H‚ÇÇO',
                enthalpy: -5470,
                ignitionTemp: 280,
                flameTemp: 2030,
                color: '#facc15'
            },
            ethanol: {
                name: 'Ethanol',
                formula: 'C‚ÇÇH‚ÇÖOH',
                equation: 'C‚ÇÇH‚ÇÖOH + 3O‚ÇÇ ‚Üí 2CO‚ÇÇ + 3H‚ÇÇO',
                enthalpy: -1367,
                ignitionTemp: 365,
                flameTemp: 1920,
                color: '#a78bfa'
            },
            hydrogen: {
                name: 'Hydrogen',
                formula: 'H‚ÇÇ',
                equation: '2H‚ÇÇ + O‚ÇÇ ‚Üí 2H‚ÇÇO',
                enthalpy: -286,
                ignitionTemp: 500,
                flameTemp: 2660,
                color: '#22d3ee'
            }
        };

        let currentFuel = 'methane';
        let fuelAmount = 50;
        let oxygenLevel = 21;
        let temperature = 25;
        let burning = false;
        let energyReleased = 0;
        let particles = [];
        let flames = [];

        function updateFuel() {
            currentFuel = document.getElementById('fuelSelect').value;
            const fuel = fuels[currentFuel];

            document.getElementById('eqVal').textContent = fuel.equation;
            document.getElementById('enthalpyVal').textContent = fuel.enthalpy + ' kJ/mol';
            document.getElementById('ignitionVal').textContent = fuel.ignitionTemp + '¬∞C';
            document.getElementById('flameVal').textContent = fuel.flameTemp + '¬∞C';

            resetSim();
        }

        function updateParams() {
            fuelAmount = parseInt(document.getElementById('fuelSlider').value);
            oxygenLevel = parseInt(document.getElementById('oxygenSlider').value);
            temperature = parseInt(document.getElementById('tempSlider').value);

            document.getElementById('fuelVal').textContent = fuelAmount + '%';
            document.getElementById('oxygenVal').textContent = oxygenLevel + '%';
            document.getElementById('tempVal').textContent = temperature + '¬∞C';

            updateTriangle();

            if (burning) {
                checkCombustion();
            }
        }

        function updateTriangle() {
            const fuel = fuels[currentFuel];

            document.getElementById('fuelItem').classList.toggle('active', fuelAmount > 10);
            document.getElementById('oxygenItem').classList.toggle('active', oxygenLevel > 10);
            document.getElementById('heatItem').classList.toggle('active', temperature >= fuel.ignitionTemp);
        }

        function checkCombustion() {
            const fuel = fuels[currentFuel];

            // Fire needs all three: fuel, oxygen, and heat
            if (fuelAmount < 5 || oxygenLevel < 10 || temperature < fuel.ignitionTemp * 0.8) {
                extinguish();
                return false;
            }
            return true;
        }

        function ignite() {
            const fuel = fuels[currentFuel];

            if (fuelAmount < 5) {
                document.getElementById('statusVal').textContent = 'No fuel!';
                return;
            }
            if (oxygenLevel < 10) {
                document.getElementById('statusVal').textContent = 'Low oxygen!';
                return;
            }
            if (temperature < fuel.ignitionTemp) {
                // Heat up to ignition
                temperature = fuel.ignitionTemp;
                document.getElementById('tempSlider').value = temperature;
                document.getElementById('tempVal').textContent = temperature + '¬∞C';
            }

            burning = true;
            document.getElementById('statusVal').textContent = 'Burning!';
            updateTriangle();
            animate();
        }

        function extinguish() {
            burning = false;
            flames = [];
            temperature = Math.max(25, temperature - 200);
            document.getElementById('tempSlider').value = temperature;
            document.getElementById('tempVal').textContent = temperature + '¬∞C';
            document.getElementById('statusVal').textContent = 'Extinguished';
            updateTriangle();
        }

        function resetSim() {
            burning = false;
            flames = [];
            particles = [];
            energyReleased = 0;
            fuelAmount = 50;
            oxygenLevel = 21;
            temperature = 25;

            document.getElementById('fuelSlider').value = fuelAmount;
            document.getElementById('oxygenSlider').value = oxygenLevel;
            document.getElementById('tempSlider').value = temperature;

            updateParams();
            document.getElementById('statusVal').textContent = 'Ready';
            document.getElementById('energyDisplay').textContent = 'üî• 0 kJ released';
            draw();
        }

        function createFlame(x, y) {
            flames.push({
                x: x,
                y: y,
                vx: (Math.random() - 0.5) * 2,
                vy: -2 - Math.random() * 3,
                size: 10 + Math.random() * 20,
                life: 1,
                hue: 30 + Math.random() * 30 // Yellow to orange
            });
        }

        function createSmoke(x, y) {
            particles.push({
                x: x,
                y: y,
                vx: (Math.random() - 0.5) * 1,
                vy: -1 - Math.random() * 2,
                size: 5 + Math.random() * 10,
                life: 1,
                type: 'smoke'
            });
        }

        function createProduct(x, y, type) {
            particles.push({
                x: x,
                y: y,
                vx: (Math.random() - 0.5) * 3,
                vy: -2 - Math.random() * 2,
                size: 4,
                life: 1,
                type: type // 'co2' or 'h2o'
            });
        }

        function update() {
            if (!burning) return;

            const fuel = fuels[currentFuel];

            // Check if combustion can continue
            if (!checkCombustion()) return;

            // Consume fuel and oxygen
            fuelAmount -= 0.1;
            oxygenLevel -= 0.05;
            document.getElementById('fuelSlider').value = fuelAmount;
            document.getElementById('oxygenSlider').value = oxygenLevel;
            document.getElementById('fuelVal').textContent = Math.round(fuelAmount) + '%';
            document.getElementById('oxygenVal').textContent = oxygenLevel.toFixed(1) + '%';

            // Release energy
            energyReleased += Math.abs(fuel.enthalpy) * 0.01;
            document.getElementById('energyDisplay').textContent =
                'üî• ' + energyReleased.toFixed(0) + ' kJ released';

            // Create flames
            const baseX = canvas.width / 2;
            const baseY = canvas.height - 100;
            const intensity = (fuelAmount / 100) * (oxygenLevel / 21);

            for (let i = 0; i < intensity * 5; i++) {
                createFlame(
                    baseX + (Math.random() - 0.5) * 100,
                    baseY + (Math.random() - 0.5) * 20
                );
            }

            // Create smoke
            if (oxygenLevel < 15) {
                // Incomplete combustion - more smoke
                createSmoke(baseX + (Math.random() - 0.5) * 80, baseY - 100);
            }

            // Create products
            if (Math.random() < 0.3) {
                createProduct(baseX + (Math.random() - 0.5) * 60, baseY - 50, 'co2');
                createProduct(baseX + (Math.random() - 0.5) * 60, baseY - 50, 'h2o');
            }

            // Update flames
            for (let i = flames.length - 1; i >= 0; i--) {
                const f = flames[i];
                f.x += f.vx;
                f.y += f.vy;
                f.life -= 0.03;
                f.size *= 0.97;

                if (f.life <= 0) {
                    flames.splice(i, 1);
                }
            }

            // Update particles
            for (let i = particles.length - 1; i >= 0; i--) {
                const p = particles[i];
                p.x += p.vx;
                p.y += p.vy;
                p.life -= 0.01;

                if (p.life <= 0 || p.y < 0) {
                    particles.splice(i, 1);
                }
            }

            updateTriangle();
        }

        function draw() {
            // Dark background with gradient
            const bgGrad = ctx.createLinearGradient(0, 0, 0, canvas.height);
            bgGrad.addColorStop(0, '#0a0a14');
            bgGrad.addColorStop(1, '#1a1a2e');
            ctx.fillStyle = bgGrad;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            const fuel = fuels[currentFuel];

            // Draw fuel container
            const containerX = canvas.width / 2 - 75;
            const containerY = canvas.height - 120;

            ctx.fillStyle = '#333';
            ctx.fillRect(containerX, containerY, 150, 100);

            // Fuel level
            const fuelHeight = (fuelAmount / 100) * 80;
            ctx.fillStyle = fuel.color + '80';
            ctx.fillRect(containerX + 10, containerY + 90 - fuelHeight, 130, fuelHeight);

            // Container outline
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 3;
            ctx.strokeRect(containerX, containerY, 150, 100);

            // Fuel label
            ctx.fillStyle = '#fff';
            ctx.font = '14px sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText(fuel.formula, canvas.width / 2, containerY + 115);

            // Draw flames
            for (const f of flames) {
                const gradient = ctx.createRadialGradient(f.x, f.y, 0, f.x, f.y, f.size);
                gradient.addColorStop(0, `hsla(${f.hue}, 100%, 70%, ${f.life})`);
                gradient.addColorStop(0.4, `hsla(${f.hue - 10}, 100%, 50%, ${f.life * 0.8})`);
                gradient.addColorStop(1, `hsla(${f.hue - 20}, 100%, 30%, 0)`);

                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(f.x, f.y, f.size, 0, Math.PI * 2);
                ctx.fill();
            }

            // Draw particles
            for (const p of particles) {
                if (p.type === 'smoke') {
                    ctx.fillStyle = `rgba(100, 100, 100, ${p.life * 0.5})`;
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                    ctx.fill();
                } else if (p.type === 'co2') {
                    ctx.fillStyle = `rgba(200, 200, 200, ${p.life})`;
                    ctx.font = '10px sans-serif';
                    ctx.fillText('CO‚ÇÇ', p.x, p.y);
                } else if (p.type === 'h2o') {
                    ctx.fillStyle = `rgba(100, 200, 255, ${p.life})`;
                    ctx.font = '10px sans-serif';
                    ctx.fillText('H‚ÇÇO', p.x, p.y);
                }
            }

            // Draw oxygen molecules in air
            ctx.fillStyle = `rgba(248, 113, 113, ${oxygenLevel / 100})`;
            ctx.font = '12px sans-serif';
            for (let i = 0; i < oxygenLevel / 5; i++) {
                const ox = 50 + (i * 73) % (canvas.width - 100);
                const oy = 50 + Math.sin(Date.now() / 1000 + i) * 20;
                ctx.fillText('O‚ÇÇ', ox, oy);
            }

            // Temperature indicator
            ctx.fillStyle = temperature > fuel.ignitionTemp ? '#f87171' : '#60a5fa';
            ctx.font = '16px sans-serif';
            ctx.textAlign = 'left';
            ctx.fillText(`üå°Ô∏è ${temperature}¬∞C`, 20, 30);

            // Status
            if (burning) {
                ctx.fillStyle = '#4ade80';
                ctx.fillText('üî• COMBUSTION ACTIVE', 20, 55);
            }

            // Equation
            ctx.fillStyle = '#aaa';
            ctx.font = '14px sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText(fuel.equation, canvas.width / 2, 30);
        }

        function animate() {
            update();
            draw();
            if (burning) {
                requestAnimationFrame(animate);
            }
        }

        updateFuel();
        draw();
    </script>
</body>
</html>
