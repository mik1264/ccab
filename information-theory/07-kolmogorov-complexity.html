<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kolmogorov Complexity - Information Theory</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0a0e1a;
            color: #e0e0e0;
            overflow: hidden;
        }

        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #4fc3f7;
            text-decoration: none;
            font-size: 18px;
            z-index: 1000;
            padding: 10px 20px;
            background: rgba(79, 195, 247, 0.1);
            border-radius: 8px;
            border: 1px solid #4fc3f7;
            transition: all 0.3s;
        }

        .back-link:hover {
            background: rgba(79, 195, 247, 0.2);
            transform: translateX(-5px);
        }

        #canvas {
            display: block;
            width: 100%;
            height: 100vh;
        }

        .controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(20, 30, 50, 0.95);
            padding: 25px;
            border-radius: 12px;
            border: 1px solid #4fc3f7;
            max-width: 380px;
            max-height: 90vh;
            overflow-y: auto;
            z-index: 100;
        }

        .controls h2 {
            color: #4fc3f7;
            margin-bottom: 20px;
            font-size: 22px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            color: #66bb6a;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .input-group input, .input-group textarea {
            width: 100%;
            padding: 10px;
            background: rgba(79, 195, 247, 0.1);
            border: 1px solid #4fc3f7;
            border-radius: 6px;
            color: #e0e0e0;
            font-size: 14px;
            font-family: 'Courier New', monospace;
        }

        .input-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        button {
            width: 100%;
            padding: 12px;
            background: #4fc3f7;
            color: #0a0e1a;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 10px;
        }

        button:hover {
            background: #29b6f6;
            transform: scale(1.02);
        }

        .info-box {
            background: rgba(79, 195, 247, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 3px solid #4fc3f7;
        }

        .info-box h3 {
            color: #4fc3f7;
            font-size: 16px;
            margin-bottom: 8px;
        }

        .info-box p {
            color: #b0bec5;
            font-size: 13px;
            line-height: 1.5;
        }

        .stat {
            color: #66bb6a;
            font-weight: bold;
            margin-top: 10px;
            font-size: 14px;
        }

        .code-display {
            background: rgba(102, 187, 106, 0.1);
            padding: 10px;
            border-radius: 6px;
            margin-top: 10px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 150px;
            overflow-y: auto;
            color: #81c784;
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">← Back to Gallery</a>

    <canvas id="canvas"></canvas>

    <div class="controls">
        <h2>Kolmogorov Complexity</h2>

        <div class="input-group">
            <label>Input String:</label>
            <textarea id="inputString">0101010101010101010101010101</textarea>
        </div>

        <button onclick="analyzeString()">Analyze Complexity</button>
        <button onclick="generateRandom()">Random String</button>
        <button onclick="generatePattern()">Pattern String</button>

        <div id="stats"></div>

        <div id="programDisplay"></div>

        <div class="info-box">
            <h3>About Kolmogorov Complexity</h3>
            <p>The Kolmogorov complexity K(s) is the length of the shortest program that produces string s.</p>
            <p style="margin-top: 8px;">Random strings have high complexity (incompressible). Patterned strings have low complexity (simple description).</p>
            <p style="margin-top: 8px;">Note: True K(s) is uncomputable, but we can approximate it using compression.</p>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        let width, height;

        function resizeCanvas() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }

        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        let currentString = '0101010101010101010101010101';
        let shortestProgram = '';
        let complexityScore = 0;
        let compressionRatio = 0;

        function generateRandom() {
            let str = '';
            for (let i = 0; i < 50; i++) {
                str += Math.random() < 0.5 ? '0' : '1';
            }
            document.getElementById('inputString').value = str;
            analyzeString();
        }

        function generatePattern() {
            const patterns = [
                '01'.repeat(25),
                '0000111100001111'.repeat(3) + '00',
                '0'.repeat(50),
                '011011011011011011'.repeat(2) + '011011011011',
                '001001001001001'.repeat(3) + '001001001001001'
            ];
            const pattern = patterns[Math.floor(Math.random() * patterns.length)];
            document.getElementById('inputString').value = pattern;
            analyzeString();
        }

        function findPattern(str) {
            // Try to find repeating patterns
            for (let len = 1; len <= str.length / 2; len++) {
                const pattern = str.substring(0, len);
                let matches = true;
                let reps = 0;

                for (let i = 0; i < str.length; i += len) {
                    if (str.substring(i, i + len) !== pattern) {
                        if (i + len < str.length) {
                            matches = false;
                            break;
                        }
                    } else {
                        reps++;
                    }
                }

                if (matches && reps > 1) {
                    const remainder = str.substring(reps * len);
                    return {
                        type: 'repeat',
                        pattern: pattern,
                        reps: reps,
                        remainder: remainder,
                        length: len
                    };
                }
            }

            // Check if all same
            if (str.split('').every(c => c === str[0])) {
                return {
                    type: 'constant',
                    char: str[0],
                    length: str.length
                };
            }

            // No pattern found
            return null;
        }

        function analyzeString() {
            currentString = document.getElementById('inputString').value;
            if (!currentString) return;

            const pattern = findPattern(currentString);

            if (pattern) {
                if (pattern.type === 'repeat') {
                    shortestProgram = `repeat("${pattern.pattern}", ${pattern.reps})`;
                    if (pattern.remainder) {
                        shortestProgram += ` + "${pattern.remainder}"`;
                    }
                    complexityScore = shortestProgram.length;
                } else if (pattern.type === 'constant') {
                    shortestProgram = `repeat("${pattern.char}", ${pattern.length})`;
                    complexityScore = shortestProgram.length;
                }
            } else {
                shortestProgram = `"${currentString}"`;
                complexityScore = currentString.length + 2; // Include quotes
            }

            compressionRatio = currentString.length / complexityScore;

            updateStats();
        }

        function updateStats() {
            const isCompressible = compressionRatio > 1.5;

            document.getElementById('stats').innerHTML = `
                <div class="stat">String Length: ${currentString.length}</div>
                <div class="stat">Program Length: ${complexityScore}</div>
                <div class="stat">Compression: ${compressionRatio.toFixed(2)}x</div>
                <div class="stat">Type: ${isCompressible ? 'Low Complexity (Pattern)' : 'High Complexity (Random)'}</div>
            `;

            document.getElementById('programDisplay').innerHTML = `
                <div class="code-display">
                    <strong>Shortest Program:</strong><br>
                    ${shortestProgram}
                </div>
            `;
        }

        function drawString() {
            const startY = 100;
            const charSize = 18;
            const padding = 2;
            const maxCharsPerRow = Math.floor((width - 500) / (charSize + padding));

            ctx.fillStyle = '#4fc3f7';
            ctx.font = 'bold 20px sans-serif';
            ctx.textAlign = 'left';
            ctx.fillText('Input String:', 50, startY - 30);

            for (let i = 0; i < Math.min(currentString.length, 300); i++) {
                const row = Math.floor(i / maxCharsPerRow);
                const col = i % maxCharsPerRow;
                const x = 50 + col * (charSize + padding);
                const y = startY + row * (charSize + padding);

                // Draw character box
                ctx.fillStyle = currentString[i] === '1' ? '#66bb6a' : '#4fc3f7';
                ctx.fillRect(x, y, charSize, charSize);

                // Draw character
                ctx.fillStyle = '#0a0e1a';
                ctx.font = 'bold 12px monospace';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(currentString[i], x + charSize / 2, y + charSize / 2);
            }

            if (currentString.length > 300) {
                ctx.fillStyle = '#b0bec5';
                ctx.font = '14px sans-serif';
                ctx.fillText('... (truncated)', 50, startY + Math.ceil(300 / maxCharsPerRow) * (charSize + padding) + 20);
            }
        }

        function drawComplexityVisualization() {
            const startY = 350;
            const barWidth = 400;
            const barHeight = 40;

            ctx.fillStyle = '#4fc3f7';
            ctx.font = 'bold 18px sans-serif';
            ctx.textAlign = 'left';
            ctx.fillText('Complexity Comparison:', 50, startY - 20);

            // String length bar
            ctx.fillStyle = 'rgba(79, 195, 247, 0.3)';
            ctx.fillRect(50, startY, barWidth, barHeight);
            ctx.fillStyle = '#4fc3f7';
            ctx.fillRect(50, startY, barWidth, barHeight);
            ctx.strokeStyle = '#4fc3f7';
            ctx.lineWidth = 2;
            ctx.strokeRect(50, startY, barWidth, barHeight);

            ctx.fillStyle = '#e0e0e0';
            ctx.font = 'bold 14px sans-serif';
            ctx.textAlign = 'left';
            ctx.fillText(`Original: ${currentString.length} chars`, 60, startY + 25);

            // Program length bar
            const programBarWidth = (complexityScore / currentString.length) * barWidth;
            ctx.fillStyle = 'rgba(102, 187, 106, 0.3)';
            ctx.fillRect(50, startY + 60, barWidth, barHeight);
            ctx.fillStyle = '#66bb6a';
            ctx.fillRect(50, startY + 60, programBarWidth, barHeight);
            ctx.strokeStyle = '#66bb6a';
            ctx.lineWidth = 2;
            ctx.strokeRect(50, startY + 60, barWidth, barHeight);

            ctx.fillStyle = '#e0e0e0';
            ctx.fillText(`Program: ${complexityScore} chars`, 60, startY + 85);

            // Draw compression indicator
            if (compressionRatio > 1.5) {
                ctx.fillStyle = '#66bb6a';
                ctx.font = 'bold 16px sans-serif';
                ctx.fillText(`✓ Compressible (${compressionRatio.toFixed(1)}x)`, 50, startY + 130);
                ctx.font = '14px sans-serif';
                ctx.fillText('Low Kolmogorov Complexity - Contains Pattern', 50, startY + 155);
            } else {
                ctx.fillStyle = '#ffa726';
                ctx.font = 'bold 16px sans-serif';
                ctx.fillText('✗ Incompressible', 50, startY + 130);
                ctx.font = '14px sans-serif';
                ctx.fillText('High Kolmogorov Complexity - Likely Random', 50, startY + 155);
            }
        }

        function drawExamples() {
            const startX = 550;
            const startY = 350;

            ctx.fillStyle = '#66bb6a';
            ctx.font = 'bold 18px sans-serif';
            ctx.textAlign = 'left';
            ctx.fillText('Complexity Examples:', startX, startY - 20);

            const examples = [
                {
                    title: 'Low Complexity',
                    strings: [
                        { s: '000000000000', desc: 'All zeros' },
                        { s: '010101010101', desc: 'Alternating' },
                        { s: '001001001001', desc: 'Repeating 001' }
                    ],
                    color: '#66bb6a'
                },
                {
                    title: 'High Complexity',
                    strings: [
                        { s: '110100101110', desc: 'Random-like' },
                        { s: '101100010111', desc: 'No pattern' },
                        { s: '011101001010', desc: 'Irregular' }
                    ],
                    color: '#ffa726'
                }
            ];

            let y = startY;

            examples.forEach(category => {
                ctx.fillStyle = category.color;
                ctx.font = 'bold 16px sans-serif';
                ctx.fillText(category.title, startX, y);
                y += 25;

                ctx.font = '13px monospace';
                category.strings.forEach(item => {
                    ctx.fillStyle = '#b0bec5';
                    ctx.fillText(item.s, startX, y);
                    ctx.fillStyle = '#81c784';
                    ctx.font = '12px sans-serif';
                    ctx.fillText(item.desc, startX + 150, y);
                    ctx.font = '13px monospace';
                    y += 22;
                });

                y += 15;
            });
        }

        function drawAlgorithmicPerspective() {
            const startY = height - 180;

            ctx.fillStyle = '#4fc3f7';
            ctx.font = 'bold 18px sans-serif';
            ctx.textAlign = 'left';
            ctx.fillText('Algorithmic Information Theory:', 50, startY);

            const points = [
                'K(s) = length of shortest program producing s',
                'Random strings: K(s) ≈ length(s) + c',
                'Patterned strings: K(s) << length(s)',
                'K(s) is uncomputable in general (halting problem)'
            ];

            ctx.fillStyle = '#b0bec5';
            ctx.font = '14px sans-serif';

            points.forEach((point, i) => {
                ctx.fillText('• ' + point, 50, startY + 35 + i * 25);
            });
        }

        function draw() {
            // Clear canvas
            ctx.fillStyle = '#0a0e1a';
            ctx.fillRect(0, 0, width, height);

            drawString();
            drawComplexityVisualization();
            drawExamples();
            drawAlgorithmicPerspective();

            requestAnimationFrame(draw);
        }

        // Initialize
        analyzeString();
        draw();
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
