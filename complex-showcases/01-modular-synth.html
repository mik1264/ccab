<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>Music - Visual Modular Synthesizer</title>
<style>body{margin:0;overflow:hidden;background:#1a1a2e;display:flex;justify-content:center;align-items:center;height:100vh;font-family:Arial}canvas{border:2px solid#333}.controls{position:absolute;top:20px;left:20px;color:white;background:rgba(0,0,0,0.8);padding:15px;border-radius:8px}button{background:#4CAF50;color:white;border:none;padding:10px 20px;margin:5px;border-radius:4px;cursor:pointer;font-size:16px}button:hover{background:#45a049}</style></head>
<body><div class="controls"><button onclick="playNote(262)">C</button><button onclick="playNote(294)">D</button><button onclick="playNote(330)">E</button><button onclick="playNote(349)">F</button><button onclick="playNote(392)">G</button><button onclick="playNote(440)">A</button><button onclick="playNote(494)">B</button></div><canvas id="c"></canvas><script>
const c=document.getElementById('c'),ctx=c.getContext('2d');c.width=800;c.height=600;
const audioCtx=new(window.AudioContext||window.webkitAudioContext)();
const nodes={osc:null,gain:audioCtx.createGain(),filter:audioCtx.createBiquadFilter(),analyser:audioCtx.createAnalyser()};
nodes.gain.gain.value=0.3;nodes.filter.type='lowpass';nodes.filter.frequency.value=1000;nodes.analyser.fftSize=256;
nodes.gain.connect(nodes.filter);nodes.filter.connect(nodes.analyser);nodes.analyser.connect(audioCtx.destination);
const dataArray=new Uint8Array(nodes.analyser.frequencyBinCount);
let activeFreq=0;
function playNote(freq){if(nodes.osc){nodes.osc.stop();nodes.osc.disconnect()}
nodes.osc=audioCtx.createOscillator();nodes.osc.type='sine';nodes.osc.frequency.value=freq;nodes.osc.connect(nodes.gain);nodes.osc.start();activeFreq=freq;
setTimeout(()=>{if(nodes.osc){nodes.osc.stop();nodes.osc.disconnect();nodes.osc=null;activeFreq=0}},500)}
function render(){ctx.fillStyle='#1a1a2e';ctx.fillRect(0,0,c.width,c.height);
nodes.analyser.getByteFrequencyData(dataArray);
ctx.strokeStyle='#00ffff';ctx.lineWidth=2;ctx.beginPath();for(let i=0;i<dataArray.length;i++){const x=i/dataArray.length*c.width,y=c.height-dataArray[i]*2;if(i===0)ctx.moveTo(x,y);else ctx.lineTo(x,y)}ctx.stroke();
ctx.fillStyle='rgba(0,255,255,0.5)';for(let i=0;i<dataArray.length;i++){const x=i/dataArray.length*c.width,h=dataArray[i]*2;ctx.fillRect(x,c.height-h,c.width/dataArray.length,h)}
if(activeFreq>0){ctx.fillStyle='#00ffff';ctx.font='48px Arial';ctx.fillText(`${activeFreq} Hz`,c.width/2-80,c.height/2)}
const modules=[{x:100,y:100,w:120,h:80,name:'OSC',color:'#ff6b6b'},{x:280,y:100,w:120,h:80,name:'FILTER',color:'#4ecdc4'},{x:460,y:100,w:120,h:80,name:'AMP',color:'#95e1d3'}];
for(const m of modules){ctx.fillStyle=m.color;ctx.fillRect(m.x,m.y,m.w,m.h);ctx.strokeStyle='#fff';ctx.lineWidth=2;ctx.strokeRect(m.x,m.y,m.w,m.h);ctx.fillStyle='#fff';ctx.font='16px Arial';ctx.fillText(m.name,m.x+m.w/2-20,m.y+m.h/2+5)}
ctx.strokeStyle='#ffff00';ctx.lineWidth=3;ctx.beginPath();ctx.moveTo(220,140);ctx.lineTo(280,140);ctx.stroke();ctx.beginPath();ctx.moveTo(400,140);ctx.lineTo(460,140);ctx.stroke();
requestAnimationFrame(render)}
render();
</script></body></html>
