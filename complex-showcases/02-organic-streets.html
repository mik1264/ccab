<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>City Generator - Organic Streets</title>
<style>body{margin:0;overflow:hidden;background:#1a1a1a;display:flex;justify-content:center;align-items:center;height:100vh}canvas{border:2px solid#333;cursor:pointer}.info{position:absolute;top:20px;left:20px;color:white;background:rgba(0,0,0,0.8);padding:15px;border-radius:8px;font-family:Arial}</style></head>
<body><div class="info">Click to regenerate city</div><canvas id="c"></canvas><script>
const c=document.getElementById('c'),ctx=c.getContext('2d');c.width=800;c.height=600;
class Road{constructor(x,y,angle,length,width,generation){this.x=x;this.y=y;this.angle=angle;this.length=length;this.width=width;this.generation=generation;this.endX=x+Math.cos(angle)*length;this.endY=y+Math.sin(angle)*length}}
function generateCity(){const roads=[],maxGen=5,startRoads=8;for(let i=0;i<startRoads;i++){roads.push(new Road(c.width/2,c.height/2,Math.PI*2*i/startRoads,100,12,0))}
for(let g=0;g<maxGen;g++){const roadsToAdd=[];for(const road of roads){if(road.generation===g){const branches=Math.floor(Math.random()*3)+1;for(let b=0;b<branches;b++){const angleOffset=(Math.random()-0.5)*Math.PI/2,newAngle=road.angle+angleOffset,newLength=road.length*(0.7+Math.random()*0.3),newWidth=Math.max(2,road.width-2);roadsToAdd.push(new Road(road.endX,road.endY,newAngle,newLength,newWidth,g+1))}}}roads.push(...roadsToAdd)}return roads}
let roads=generateCity(),buildings=[];
function placeBuildingsAlongRoads(){buildings=[];for(const road of roads){const count=Math.floor(road.length/30);for(let i=0;i<count;i++){const t=i/count,x=road.x+Math.cos(road.angle)*road.length*t,y=road.y+Math.sin(road.angle)*road.length*t,offset=road.width+Math.random()*20,sideAngle=road.angle+Math.PI/2,side=Math.random()<0.5?1:-1,bx=x+Math.cos(sideAngle)*offset*side,by=y+Math.sin(sideAngle)*offset*side;buildings.push({x:bx,y:by,w:15+Math.random()*25,h:15+Math.random()*25,height:20+Math.random()*60})}}}
placeBuildingsAlongRoads();
function render(){ctx.fillStyle='#1a1a1a';ctx.fillRect(0,0,c.width,c.height);
buildings.sort((a,b)=>b.y-a.y);for(const b of buildings){ctx.fillStyle='#2a2a3a';ctx.fillRect(b.x,b.y-b.height*0.5,b.w,b.height);ctx.strokeStyle='#000';ctx.strokeRect(b.x,b.y-b.height*0.5,b.w,b.height)}
for(const road of roads){ctx.strokeStyle='#444';ctx.lineWidth=road.width;ctx.lineCap='round';ctx.beginPath();ctx.moveTo(road.x,road.y);ctx.lineTo(road.endX,road.endY);ctx.stroke();ctx.strokeStyle='#666';ctx.lineWidth=road.width-2;ctx.stroke()}
for(const road of roads){if(road.generation<3){ctx.fillStyle='rgba(255,200,100,0.3)';ctx.beginPath();ctx.arc(road.endX,road.endY,8,0,Math.PI*2);ctx.fill()}}
requestAnimationFrame(render)}
c.addEventListener('click',()=>{roads=generateCity();placeBuildingsAlongRoads()});
render();
</script></body></html>
