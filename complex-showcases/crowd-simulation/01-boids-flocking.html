<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>Crowd - Boids Flocking</title>
<style>body{margin:0;overflow:hidden;background:#0a0a0a;display:flex;justify-content:center;align-items:center;height:100vh}canvas{border:2px solid#333}</style></head>
<body><canvas id="c"></canvas><script>
const c=document.getElementById('c'),ctx=c.getContext('2d');c.width=800;c.height=600;
class Boid{constructor(x,y){this.x=x;this.y=y;this.vx=Math.random()*4-2;this.vy=Math.random()*4-2;this.maxSpeed=3;this.maxForce=0.05;this.hue=Math.random()*60+180}
update(boids){const[sep,ali,coh]=this.separate(boids).concat(this.align(boids)).concat(this.cohesion(boids));
this.vx+=sep[0]*1.5+ali[0]*1.0+coh[0]*1.0;this.vy+=sep[1]*1.5+ali[1]*1.0+coh[1]*1.0;
const speed=Math.sqrt(this.vx**2+this.vy**2);if(speed>this.maxSpeed){this.vx=this.vx/speed*this.maxSpeed;this.vy=this.vy/speed*this.maxSpeed}
this.x+=this.vx;this.y+=this.vy;
if(this.x<0)this.x=c.width;if(this.x>c.width)this.x=0;if(this.y<0)this.y=c.height;if(this.y>c.height)this.y=0}
separate(boids){const desiredSep=25;let steer=[0,0],count=0;
for(const b of boids){const d=Math.sqrt((this.x-b.x)**2+(this.y-b.y)**2);if(d>0&&d<desiredSep){const diff=[this.x-b.x,this.y-b.y];steer[0]+=diff[0]/d;steer[1]+=diff[1]/d;count++}}
if(count>0){steer[0]/=count;steer[1]/=count}return[steer]}
align(boids){const neighborDist=50;let sum=[0,0],count=0;
for(const b of boids){const d=Math.sqrt((this.x-b.x)**2+(this.y-b.y)**2);if(d>0&&d<neighborDist){sum[0]+=b.vx;sum[1]+=b.vy;count++}}
if(count>0){sum[0]/=count;sum[1]/=count;const mag=Math.sqrt(sum[0]**2+sum[1]**2);if(mag>0){sum[0]=sum[0]/mag*this.maxSpeed-this.vx;sum[1]=sum[1]/mag*this.maxSpeed-this.vy}}return[sum]}
cohesion(boids){const neighborDist=50;let sum=[0,0],count=0;
for(const b of boids){const d=Math.sqrt((this.x-b.x)**2+(this.y-b.y)**2);if(d>0&&d<neighborDist){sum[0]+=b.x;sum[1]+=b.y;count++}}
if(count>0){sum[0]/=count;sum[1]/=count;return[[sum[0]-this.x,sum[1]-this.y]]}return[[0,0]]}
draw(){const angle=Math.atan2(this.vy,this.vx);ctx.save();ctx.translate(this.x,this.y);ctx.rotate(angle);
ctx.fillStyle=`hsl(${this.hue},70%,60%)`;ctx.beginPath();ctx.moveTo(8,0);ctx.lineTo(-4,4);ctx.lineTo(-4,-4);ctx.closePath();ctx.fill();ctx.restore()}}
const boids=[];for(let i=0;i<100;i++)boids.push(new Boid(Math.random()*c.width,Math.random()*c.height));
function animate(){ctx.fillStyle='rgba(10,10,10,0.2)';ctx.fillRect(0,0,c.width,c.height);
for(const b of boids)b.update(boids);for(const b of boids)b.draw();
requestAnimationFrame(animate)}
animate();
</script></body></html>
