<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>Music - Frequency Spectrum</title>
<style>body{margin:0;overflow:hidden;background:#000;display:flex;justify-content:center;align-items:center;height:100vh;font-family:Arial}.controls{position:absolute;top:20px;left:20px;color:white;background:rgba(0,0,0,0.8);padding:15px;border-radius:8px}button{background:#4CAF50;color:white;border:none;padding:10px 20px;margin:5px;border-radius:4px;cursor:pointer;font-size:16px}button:hover{background:#45a049}canvas{border:2px solid#333}</style></head>
<body><div class="controls"><button onclick="startAudio()">Start Audio</button><button onclick="playChord()">Play Chord</button><div style="margin-top:10px">Waveform: <select onchange="changeWave(this.value)"><option value="sine">Sine</option><option value="square">Square</option><option value="sawtooth">Sawtooth</option><option value="triangle">Triangle</option></select></div></div><canvas id="c"></canvas><script>
const c=document.getElementById('c'),ctx=c.getContext('2d');c.width=800;c.height=600;
let audioCtx,analyser,dataArray,bufferLength,oscillators=[],waveType='sine';
function startAudio(){if(!audioCtx){audioCtx=new(window.AudioContext||window.webkitAudioContext)();analyser=audioCtx.createAnalyser();analyser.fftSize=2048;bufferLength=analyser.frequencyBinCount;dataArray=new Uint8Array(bufferLength);analyser.connect(audioCtx.destination)}}
function changeWave(type){waveType=type}
function playChord(){startAudio();stopAll();
const freqs=[261.63,329.63,392];for(const freq of freqs){const osc=audioCtx.createOscillator(),gain=audioCtx.createGain();osc.type=waveType;osc.frequency.value=freq;osc.connect(gain);gain.connect(analyser);gain.gain.setValueAtTime(0.2,audioCtx.currentTime);gain.gain.exponentialRampToValueAtTime(0.01,audioCtx.currentTime+2);osc.start();osc.stop(audioCtx.currentTime+2);oscillators.push({osc,gain})}}
function stopAll(){oscillators.forEach(o=>{try{o.osc.stop();o.osc.disconnect()}catch(e){}});oscillators=[]}
function render(){ctx.fillStyle='rgba(0,0,0,0.2)';ctx.fillRect(0,0,c.width,c.height);
if(!analyser)return requestAnimationFrame(render);
analyser.getByteTimeDomainData(dataArray);
ctx.strokeStyle='#00ff00';ctx.lineWidth=2;ctx.beginPath();for(let i=0;i<bufferLength;i++){const v=dataArray[i]/128,y=v*c.height/2,x=i/bufferLength*c.width;if(i===0)ctx.moveTo(x,y);else ctx.lineTo(x,y)}ctx.stroke();
const freqData=new Uint8Array(analyser.frequencyBinCount);analyser.getByteFrequencyData(freqData);
const barWidth=c.width/freqData.length*2.5;let barHeight,x=0;
for(let i=0;i<freqData.length;i++){barHeight=freqData[i]*2;const hue=(i/freqData.length)*360;ctx.fillStyle=`hsl(${hue},100%,50%)`;ctx.fillRect(x,c.height-barHeight,barWidth,barHeight);x+=barWidth+1}
requestAnimationFrame(render)}
render();
</script></body></html>
