<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sprite Mesh Deformation - Pixi.js</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: #0a0a0a;
            font-family: Arial, sans-serif;
        }
    </style>
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.3.2/pixi.min.js"></script>
    <script>
        const app = new PIXI.Application({
            width: window.innerWidth,
            height: window.innerHeight,
            backgroundColor: 0x0a0a0a,
            antialias: true
        });
        document.body.appendChild(app.view);

        // Create grid texture
        const graphics = new PIXI.Graphics();
        const gridSize = 40;
        for (let i = 0; i <= 400; i += gridSize) {
            graphics.lineStyle(2, 0x00FFAA, 0.5);
            graphics.moveTo(i, 0);
            graphics.lineTo(i, 400);
            graphics.moveTo(0, i);
            graphics.lineTo(400, i);
        }
        const texture = app.renderer.generateTexture(graphics);

        // Create plane mesh
        const plane = new PIXI.SimplePlane(texture, 10, 10);
        plane.x = app.screen.width / 2 - 200;
        plane.y = app.screen.height / 2 - 200;
        app.stage.addChild(plane);

        let time = 0;

        app.ticker.add(() => {
            time += 0.05;

            // Deform mesh
            for (let i = 0; i < plane.geometry.points.length; i += 2) {
                const x = plane.geometry.points[i];
                const y = plane.geometry.points[i + 1];

                const offsetX = Math.sin(y * 0.02 + time) * 20;
                const offsetY = Math.cos(x * 0.02 + time) * 20;

                plane.geometry.points[i] = x + offsetX;
                plane.geometry.points[i + 1] = y + offsetY;
            }

            plane.geometry.buffers[0].update();
        });

        window.addEventListener('resize', () => {
            app.renderer.resize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>
