<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Megachurch Explosion - American Religious Trends</title>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --cream: #FEFAE0;
            --earth: #DDA15E;
            --terracotta: #BC6C25;
            --mega-gold: #f4c430;
            --small-blue: #5b8fa8;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #0d0d14 0%, #1a1a28 50%, #0d0d14 100%);
            color: var(--cream);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--earth);
            text-decoration: none;
            font-weight: 600;
            padding: 0.5rem 1rem;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            transition: all 0.3s ease;
            z-index: 100;
        }

        .back-link:hover {
            background: rgba(221, 161, 94, 0.2);
            transform: translateX(-5px);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            padding-top: 80px;
        }

        .header {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        h1 {
            font-family: 'Lora', serif;
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            font-weight: 700;
            color: var(--cream);
            margin-bottom: 0.5rem;
        }

        .subtitle {
            font-size: 1rem;
            color: var(--earth);
            opacity: 0.9;
        }

        .visualization-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .chart-panel {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .panel-title {
            font-family: 'Lora', serif;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--earth);
        }

        #growth-chart, #distribution-chart {
            width: 100%;
            height: 300px;
        }

        .bubble-container {
            position: relative;
            width: 100%;
            height: 350px;
            background: rgba(0,0,0,0.2);
            border-radius: 16px;
            overflow: hidden;
        }

        #bubbles-canvas {
            width: 100%;
            height: 100%;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 1.25rem;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .stat-value {
            font-family: 'Lora', serif;
            font-size: 2rem;
            font-weight: 700;
            color: var(--mega-gold);
        }

        .stat-label {
            font-size: 0.85rem;
            opacity: 0.7;
            margin-top: 0.25rem;
        }

        .walmart-effect {
            background: linear-gradient(135deg, rgba(244, 196, 48, 0.1), rgba(91, 143, 168, 0.1));
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid rgba(244, 196, 48, 0.2);
        }

        .effect-title {
            font-family: 'Lora', serif;
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--mega-gold);
        }

        .distribution-visual {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 3rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .distribution-side {
            text-align: center;
        }

        .distribution-label {
            font-size: 0.9rem;
            opacity: 0.7;
            margin-bottom: 0.5rem;
        }

        .distribution-value {
            font-family: 'Lora', serif;
            font-size: 3rem;
            font-weight: 700;
        }

        .distribution-value.mega { color: var(--mega-gold); }
        .distribution-value.small { color: var(--small-blue); }

        .vs-symbol {
            font-family: 'Lora', serif;
            font-size: 1.5rem;
            opacity: 0.4;
        }

        .bar-comparison {
            display: flex;
            height: 40px;
            border-radius: 20px;
            overflow: hidden;
            margin-top: 1.5rem;
        }

        .bar-mega {
            background: linear-gradient(90deg, var(--mega-gold), #d4a530);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: #1a1a28;
            font-size: 0.9rem;
        }

        .bar-small {
            background: linear-gradient(90deg, var(--small-blue), #3d6b80);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: white;
            font-size: 0.9rem;
        }

        .timeline-section {
            margin-top: 1.5rem;
        }

        .timeline {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            height: 200px;
            padding: 0 1rem;
            position: relative;
        }

        .timeline::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: rgba(255,255,255,0.2);
        }

        .timeline-bar {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            flex: 1;
        }

        .bar-visual {
            width: 60px;
            background: linear-gradient(180deg, var(--mega-gold), #b8860b);
            border-radius: 8px 8px 0 0;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding-bottom: 0.5rem;
            transition: height 1.5s ease-out;
        }

        .bar-count {
            font-weight: 700;
            font-size: 0.85rem;
            color: #1a1a28;
        }

        .bar-year {
            font-size: 0.85rem;
            opacity: 0.7;
            margin-top: 0.5rem;
        }

        @media (max-width: 900px) {
            .visualization-area {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .distribution-visual {
                gap: 1.5rem;
            }

            .distribution-value {
                font-size: 2rem;
            }
        }

        @media (max-width: 600px) {
            .container {
                padding: 1rem;
                padding-top: 70px;
            }

            .bar-visual {
                width: 40px;
            }

            .timeline {
                height: 150px;
            }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">← Back to Gallery</a>

    <div class="container">
        <header class="header">
            <h1>The Megachurch Explosion</h1>
            <p class="subtitle">From 50 megachurches (1970) to 1,750+ (2020): The consolidation of American religion</p>
        </header>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value">50</div>
                <div class="stat-label">Megachurches (1970)</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">1,750+</div>
                <div class="stat-label">Megachurches (2020)</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" style="color: var(--earth);">3,400%</div>
                <div class="stat-label">Growth Rate</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" style="color: var(--small-blue);">65</div>
                <div class="stat-label">Median Church Size</div>
            </div>
        </div>

        <div class="visualization-area">
            <div class="chart-panel">
                <h3 class="panel-title">Megachurch Count Over Time</h3>
                <div class="timeline-section">
                    <div class="timeline" id="growth-timeline">
                        <div class="timeline-bar" data-year="1970" data-count="50">
                            <div class="bar-visual" style="height: 0px;">
                                <span class="bar-count">50</span>
                            </div>
                            <span class="bar-year">1970</span>
                        </div>
                        <div class="timeline-bar" data-year="1990" data-count="350">
                            <div class="bar-visual" style="height: 0px;">
                                <span class="bar-count">350</span>
                            </div>
                            <span class="bar-year">1990</span>
                        </div>
                        <div class="timeline-bar" data-year="2000" data-count="600">
                            <div class="bar-visual" style="height: 0px;">
                                <span class="bar-count">600</span>
                            </div>
                            <span class="bar-year">2000</span>
                        </div>
                        <div class="timeline-bar" data-year="2010" data-count="1200">
                            <div class="bar-visual" style="height: 0px;">
                                <span class="bar-count">1,200</span>
                            </div>
                            <span class="bar-year">2010</span>
                        </div>
                        <div class="timeline-bar" data-year="2020" data-count="1750">
                            <div class="bar-visual" style="height: 0px;">
                                <span class="bar-count">1,750+</span>
                            </div>
                            <span class="bar-year">2020</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="chart-panel">
                <h3 class="panel-title">Church Size Distribution</h3>
                <div class="bubble-container">
                    <canvas id="bubbles-canvas"></canvas>
                </div>
            </div>
        </div>

        <div class="walmart-effect">
            <h3 class="effect-title">The "Wal-Mart Effect" in Religion</h3>
            <p style="opacity: 0.85; line-height: 1.6; margin-bottom: 1rem;">
                The religious marketplace has undergone the same consolidation as retail. The largest 10% of congregations now contain the majority of all American churchgoers, while the median congregation has shrunk to just 65 people. Megachurches offer professional childcare, coffee shops, high-quality music production, and diverse small groups—amenities the median church cannot match.
            </p>

            <div class="distribution-visual">
                <div class="distribution-side">
                    <div class="distribution-label">Top 10% of Churches</div>
                    <div class="distribution-value mega">50%+</div>
                    <div class="distribution-label">of all attendees</div>
                </div>
                <div class="vs-symbol">vs</div>
                <div class="distribution-side">
                    <div class="distribution-label">Bottom 50% of Churches</div>
                    <div class="distribution-value small">~10%</div>
                    <div class="distribution-label">of all attendees</div>
                </div>
            </div>

            <div class="bar-comparison">
                <div class="bar-mega" style="width: 55%;">Top 10% (Megachurches)</div>
                <div class="bar-small" style="width: 45%;">Remaining 90%</div>
            </div>

            <p style="opacity: 0.7; font-size: 0.9rem; margin-top: 1rem; text-align: center;">
                Share of total weekly worship attendance in the United States
            </p>
        </div>
    </div>

    <script>
        // Animate timeline bars
        function animateTimeline() {
            const bars = document.querySelectorAll('.timeline-bar');
            const maxCount = 1750;
            const maxHeight = 150;

            bars.forEach((bar, index) => {
                const count = parseInt(bar.dataset.count);
                const height = (count / maxCount) * maxHeight;
                const visual = bar.querySelector('.bar-visual');

                setTimeout(() => {
                    visual.style.height = height + 'px';
                }, 300 + index * 200);
            });
        }

        // Bubble visualization for church size distribution
        function initBubbles() {
            const canvas = document.getElementById('bubbles-canvas');
            const ctx = canvas.getContext('2d');

            const rect = canvas.parentElement.getBoundingClientRect();
            canvas.width = rect.width * 2;
            canvas.height = rect.height * 2;
            ctx.scale(2, 2);

            const width = rect.width;
            const height = rect.height;

            // Church distribution data
            // Representing ~357,000 congregations with different sizes
            const bubbles = [];

            // Megachurches (2000+ attendance) - ~1,750 = 0.5%
            for (let i = 0; i < 8; i++) {
                bubbles.push({
                    x: width * 0.75 + (Math.random() - 0.5) * 80,
                    y: height * 0.3 + (Math.random() - 0.5) * 60,
                    radius: 20 + Math.random() * 15,
                    color: '#f4c430',
                    type: 'mega',
                    vx: (Math.random() - 0.5) * 0.3,
                    vy: (Math.random() - 0.5) * 0.3
                });
            }

            // Large churches (500-2000) - ~5%
            for (let i = 0; i < 20; i++) {
                bubbles.push({
                    x: width * 0.55 + (Math.random() - 0.5) * 100,
                    y: height * 0.5 + (Math.random() - 0.5) * 100,
                    radius: 10 + Math.random() * 8,
                    color: '#d4a530',
                    type: 'large',
                    vx: (Math.random() - 0.5) * 0.4,
                    vy: (Math.random() - 0.5) * 0.4
                });
            }

            // Medium churches (100-500) - ~25%
            for (let i = 0; i < 50; i++) {
                bubbles.push({
                    x: width * 0.4 + (Math.random() - 0.5) * 120,
                    y: height * 0.5 + (Math.random() - 0.5) * 140,
                    radius: 5 + Math.random() * 4,
                    color: '#7ab3c7',
                    type: 'medium',
                    vx: (Math.random() - 0.5) * 0.5,
                    vy: (Math.random() - 0.5) * 0.5
                });
            }

            // Small churches (<100) - ~70%
            for (let i = 0; i < 120; i++) {
                bubbles.push({
                    x: width * 0.25 + (Math.random() - 0.5) * 100,
                    y: height * 0.6 + (Math.random() - 0.5) * 120,
                    radius: 2 + Math.random() * 2,
                    color: '#5b8fa8',
                    type: 'small',
                    vx: (Math.random() - 0.5) * 0.6,
                    vy: (Math.random() - 0.5) * 0.6
                });
            }

            function animate() {
                ctx.fillStyle = 'rgba(13, 13, 20, 0.2)';
                ctx.fillRect(0, 0, width, height);

                bubbles.forEach(bubble => {
                    // Update position
                    bubble.x += bubble.vx;
                    bubble.y += bubble.vy;

                    // Bounce off edges
                    if (bubble.x < bubble.radius || bubble.x > width - bubble.radius) {
                        bubble.vx *= -1;
                    }
                    if (bubble.y < bubble.radius || bubble.y > height - bubble.radius) {
                        bubble.vy *= -1;
                    }

                    // Draw bubble
                    ctx.beginPath();
                    ctx.arc(bubble.x, bubble.y, bubble.radius, 0, Math.PI * 2);
                    ctx.fillStyle = bubble.color;
                    ctx.fill();

                    // Glow effect for megachurches
                    if (bubble.type === 'mega') {
                        ctx.beginPath();
                        ctx.arc(bubble.x, bubble.y, bubble.radius * 1.5, 0, Math.PI * 2);
                        const gradient = ctx.createRadialGradient(
                            bubble.x, bubble.y, bubble.radius * 0.5,
                            bubble.x, bubble.y, bubble.radius * 1.5
                        );
                        gradient.addColorStop(0, 'rgba(244, 196, 48, 0.3)');
                        gradient.addColorStop(1, 'transparent');
                        ctx.fillStyle = gradient;
                        ctx.fill();
                    }
                });

                // Legend
                ctx.fillStyle = 'rgba(255,255,255,0.7)';
                ctx.font = '11px Nunito, sans-serif';

                const legendY = height - 15;
                ctx.fillStyle = '#f4c430';
                ctx.beginPath();
                ctx.arc(15, legendY, 6, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillStyle = 'rgba(255,255,255,0.7)';
                ctx.fillText('Mega (2000+)', 25, legendY + 4);

                ctx.fillStyle = '#7ab3c7';
                ctx.beginPath();
                ctx.arc(115, legendY, 4, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillStyle = 'rgba(255,255,255,0.7)';
                ctx.fillText('Medium', 123, legendY + 4);

                ctx.fillStyle = '#5b8fa8';
                ctx.beginPath();
                ctx.arc(185, legendY, 2.5, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillStyle = 'rgba(255,255,255,0.7)';
                ctx.fillText('Small (<100)', 192, legendY + 4);

                requestAnimationFrame(animate);
            }

            animate();
        }

        // Initialize
        setTimeout(animateTimeline, 500);
        initBubbles();

        // Handle resize
        window.addEventListener('resize', () => {
            initBubbles();
        });
    </script>
    <script src="../assets/js/enhance.js" defer></script>
</body>
</html>
